(()=>{"use strict";var e,_={},p={};function a(e){var l=p[e];if(void 0!==l)return l.exports;var r=p[e]={id:e,loaded:!1,exports:{}};return _[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=_,e=[],a.O=(l,r,s,c)=>{if(!r){var t=1/0;for(n=0;n<e.length;n++){for(var[r,s,c]=e[n],i=!0,f=0;f<r.length;f++)(!1&c||t>=c)&&Object.keys(a.O).every(h=>a.O[h](r[f]))?r.splice(f--,1):(i=!1,c<t&&(t=c));if(i){e.splice(n--,1);var o=s();void 0!==o&&(l=o)}}return l}c=c||0;for(var n=e.length;n>0&&e[n-1][2]>c;n--)e[n]=e[n-1];e[n]=[r,s,c]},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={121:0};a.O.j=s=>0===e[s];var l=(s,c)=>{var f,o,[n,t,i]=c,u=0;if(n.some(d=>0!==e[d])){for(f in t)a.o(t,f)&&(a.m[f]=t[f]);if(i)var v=i(a)}for(s&&s(c);u<n.length;u++)a.o(e,o=n[u])&&e[o]&&e[o][0](),e[o]=0;return a.O(v)},r=self.webpackChunkca_web_components=self.webpackChunkca_web_components||[];r.forEach(l.bind(null,0)),r.push=l.bind(null,r.push.bind(r))})()})();
"use strict";(self.webpackChunkca_web_components=self.webpackChunkca_web_components||[]).push([[461],{935:()=>{!function(e){const n=e.performance;function i(L){n&&n.mark&&n.mark(L)}function o(L,T){n&&n.measure&&n.measure(L,T)}i("Zone");const c=e.__Zone_symbol_prefix||"__zone_symbol__";function a(L){return c+L}const y=!0===e[a("forceDuplicateZoneCheck")];if(e.Zone){if(y||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let d=(()=>{class L{static#e=this.__symbol__=a;static assertZonePatched(){if(e.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=L.current;for(;t.parent;)t=t.parent;return t}static get current(){return U.zone}static get currentTask(){return re}static __load_patch(t,r,k=!1){if(oe.hasOwnProperty(t)){if(!k&&y)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const C="Zone:"+t;i(C),oe[t]=r(e,L,z),o(C,C)}}get parent(){return this._parent}get name(){return this._name}constructor(t,r){this._parent=t,this._name=r?r.name||"unnamed":"<root>",this._properties=r&&r.properties||{},this._zoneDelegate=new v(this,this._parent&&this._parent._zoneDelegate,r)}get(t){const r=this.getZoneWith(t);if(r)return r._properties[t]}getZoneWith(t){let r=this;for(;r;){if(r._properties.hasOwnProperty(t))return r;r=r._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,r){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const k=this._zoneDelegate.intercept(this,t,r),C=this;return function(){return C.runGuarded(k,this,arguments,r)}}run(t,r,k,C){U={parent:U,zone:this};try{return this._zoneDelegate.invoke(this,t,r,k,C)}finally{U=U.parent}}runGuarded(t,r=null,k,C){U={parent:U,zone:this};try{try{return this._zoneDelegate.invoke(this,t,r,k,C)}catch($){if(this._zoneDelegate.handleError(this,$))throw $}}finally{U=U.parent}}runTask(t,r,k){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||J).name+"; Execution: "+this.name+")");if(t.state===x&&(t.type===Q||t.type===w))return;const C=t.state!=E;C&&t._transitionTo(E,A),t.runCount++;const $=re;re=t,U={parent:U,zone:this};try{t.type==w&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,r,k)}catch(l){if(this._zoneDelegate.handleError(this,l))throw l}}finally{t.state!==x&&t.state!==h&&(t.type==Q||t.data&&t.data.isPeriodic?C&&t._transitionTo(A,E):(t.runCount=0,this._updateTaskCount(t,-1),C&&t._transitionTo(x,E,x))),U=U.parent,re=$}}scheduleTask(t){if(t.zone&&t.zone!==this){let k=this;for(;k;){if(k===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);k=k.parent}}t._transitionTo(X,x);const r=[];t._zoneDelegates=r,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(k){throw t._transitionTo(h,X,x),this._zoneDelegate.handleError(this,k),k}return t._zoneDelegates===r&&this._updateTaskCount(t,1),t.state==X&&t._transitionTo(A,X),t}scheduleMicroTask(t,r,k,C){return this.scheduleTask(new p(I,t,r,k,C,void 0))}scheduleMacroTask(t,r,k,C,$){return this.scheduleTask(new p(w,t,r,k,C,$))}scheduleEventTask(t,r,k,C,$){return this.scheduleTask(new p(Q,t,r,k,C,$))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||J).name+"; Execution: "+this.name+")");if(t.state===A||t.state===E){t._transitionTo(G,A,E);try{this._zoneDelegate.cancelTask(this,t)}catch(r){throw t._transitionTo(h,G),this._zoneDelegate.handleError(this,r),r}return this._updateTaskCount(t,-1),t._transitionTo(x,G),t.runCount=0,t}}_updateTaskCount(t,r){const k=t._zoneDelegates;-1==r&&(t._zoneDelegates=null);for(let C=0;C<k.length;C++)k[C]._updateTaskCount(t.type,r)}}return L})();const b={name:"",onHasTask:(L,T,t,r)=>L.hasTask(t,r),onScheduleTask:(L,T,t,r)=>L.scheduleTask(t,r),onInvokeTask:(L,T,t,r,k,C)=>L.invokeTask(t,r,k,C),onCancelTask:(L,T,t,r)=>L.cancelTask(t,r)};class v{constructor(T,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=T,this._parentDelegate=t,this._forkZS=r&&(r&&r.onFork?r:t._forkZS),this._forkDlgt=r&&(r.onFork?t:t._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:t._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:t._interceptZS),this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:t._invokeZS),this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const k=r&&r.onHasTask;(k||t&&t._hasTaskZS)&&(this._hasTaskZS=k?r:b,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=T,r.onScheduleTask||(this._scheduleTaskZS=b,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=b,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=b,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(T,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,T,t):new d(T,t)}intercept(T,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,T,t,r):t}invoke(T,t,r,k,C){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,T,t,r,k,C):t.apply(r,k)}handleError(T,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,T,t)}scheduleTask(T,t){let r=t;if(this._scheduleTaskZS)this._hasTaskZS&&r._zoneDelegates.push(this._hasTaskDlgtOwner),r=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,T,t),r||(r=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=I)throw new Error("Task is missing scheduleFn.");R(t)}return r}invokeTask(T,t,r,k){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,T,t,r,k):t.callback.apply(r,k)}cancelTask(T,t){let r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,T,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");r=t.cancelFn(t)}return r}hasTask(T,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,T,t)}catch(r){this.handleError(T,r)}}_updateTaskCount(T,t){const r=this._taskCounts,k=r[T],C=r[T]=k+t;if(C<0)throw new Error("More tasks executed then were scheduled.");0!=k&&0!=C||this.hasTask(this.zone,{microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:T})}}class p{constructor(T,t,r,k,C,$){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=T,this.source=t,this.data=k,this.scheduleFn=C,this.cancelFn=$,!r)throw new Error("callback is not defined");this.callback=r;const l=this;this.invoke=T===Q&&k&&k.useG?p.invokeTask:function(){return p.invokeTask.call(e,l,this,arguments)}}static invokeTask(T,t,r){T||(T=this),ee++;try{return T.runCount++,T.zone.runTask(T,t,r)}finally{1==ee&&_(),ee--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(x,X)}_transitionTo(T,t,r){if(this._state!==t&&this._state!==r)throw new Error(`${this.type} '${this.source}': can not transition to '${T}', expecting state '${t}'${r?" or '"+r+"'":""}, was '${this._state}'.`);this._state=T,T==x&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const M=a("setTimeout"),O=a("Promise"),N=a("then");let K,B=[],H=!1;function q(L){if(K||e[O]&&(K=e[O].resolve(0)),K){let T=K[N];T||(T=K.then),T.call(K,L)}else e[M](L,0)}function R(L){0===ee&&0===B.length&&q(_),L&&B.push(L)}function _(){if(!H){for(H=!0;B.length;){const L=B;B=[];for(let T=0;T<L.length;T++){const t=L[T];try{t.zone.runTask(t,null,null)}catch(r){z.onUnhandledError(r)}}}z.microtaskDrainDone(),H=!1}}const J={name:"NO ZONE"},x="notScheduled",X="scheduling",A="scheduled",E="running",G="canceling",h="unknown",I="microTask",w="macroTask",Q="eventTask",oe={},z={symbol:a,currentZoneFrame:()=>U,onUnhandledError:W,microtaskDrainDone:W,scheduleMicroTask:R,showUncaughtError:()=>!d[a("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:W,patchMethod:()=>W,bindArguments:()=>[],patchThen:()=>W,patchMacroTask:()=>W,patchEventPrototype:()=>W,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>W,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>W,wrapWithCurrentZone:()=>W,filterProperties:()=>[],attachOriginToPatched:()=>W,_redefineProperty:()=>W,patchCallbacks:()=>W,nativeScheduleMicroTask:q};let U={parent:null,zone:new d(null,null)},re=null,ee=0;function W(){}o("Zone","Zone"),e.Zone=d}(typeof window<"u"&&window||typeof self<"u"&&self||global);const ue=Object.getOwnPropertyDescriptor,pe=Object.defineProperty,ve=Object.getPrototypeOf,Se=Object.create,it=Array.prototype.slice,Ze="addEventListener",De="removeEventListener",Oe=Zone.__symbol__(Ze),Ne=Zone.__symbol__(De),ie="true",ce="false",me=Zone.__symbol__("");function Ie(e,n){return Zone.current.wrap(e,n)}function Me(e,n,i,o,c){return Zone.current.scheduleMacroTask(e,n,i,o,c)}const j=Zone.__symbol__,be=typeof window<"u",_e=be?window:void 0,Y=be&&_e||"object"==typeof self&&self||global,ct="removeAttribute";function Le(e,n){for(let i=e.length-1;i>=0;i--)"function"==typeof e[i]&&(e[i]=Ie(e[i],n+"_"+i));return e}function Ve(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const Fe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,we=!("nw"in Y)&&typeof Y.process<"u"&&"[object process]"==={}.toString.call(Y.process),Ae=!we&&!Fe&&!(!be||!_e.HTMLElement),Be=typeof Y.process<"u"&&"[object process]"==={}.toString.call(Y.process)&&!Fe&&!(!be||!_e.HTMLElement),Pe={},Ue=function(e){if(!(e=e||Y.event))return;let n=Pe[e.type];n||(n=Pe[e.type]=j("ON_PROPERTY"+e.type));const i=this||e.target||Y,o=i[n];let c;return Ae&&i===_e&&"error"===e.type?(c=o&&o.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===c&&e.preventDefault()):(c=o&&o.apply(this,arguments),null!=c&&!c&&e.preventDefault()),c};function We(e,n,i){let o=ue(e,n);if(!o&&i&&ue(i,n)&&(o={enumerable:!0,configurable:!0}),!o||!o.configurable)return;const c=j("on"+n+"patched");if(e.hasOwnProperty(c)&&e[c])return;delete o.writable,delete o.value;const a=o.get,y=o.set,d=n.slice(2);let b=Pe[d];b||(b=Pe[d]=j("ON_PROPERTY"+d)),o.set=function(v){let p=this;!p&&e===Y&&(p=Y),p&&("function"==typeof p[b]&&p.removeEventListener(d,Ue),y&&y.call(p,null),p[b]=v,"function"==typeof v&&p.addEventListener(d,Ue,!1))},o.get=function(){let v=this;if(!v&&e===Y&&(v=Y),!v)return null;const p=v[b];if(p)return p;if(a){let M=a.call(this);if(M)return o.set.call(this,M),"function"==typeof v[ct]&&v.removeAttribute(n),M}return null},pe(e,n,o),e[c]=!0}function qe(e,n,i){if(n)for(let o=0;o<n.length;o++)We(e,"on"+n[o],i);else{const o=[];for(const c in e)"on"==c.slice(0,2)&&o.push(c);for(let c=0;c<o.length;c++)We(e,o[c],i)}}const ne=j("originalInstance");function ge(e){const n=Y[e];if(!n)return;Y[j(e)]=n,Y[e]=function(){const c=Le(arguments,e);switch(c.length){case 0:this[ne]=new n;break;case 1:this[ne]=new n(c[0]);break;case 2:this[ne]=new n(c[0],c[1]);break;case 3:this[ne]=new n(c[0],c[1],c[2]);break;case 4:this[ne]=new n(c[0],c[1],c[2],c[3]);break;default:throw new Error("Arg list too long.")}},le(Y[e],n);const i=new n(function(){});let o;for(o in i)"XMLHttpRequest"===e&&"responseBlob"===o||function(c){"function"==typeof i[c]?Y[e].prototype[c]=function(){return this[ne][c].apply(this[ne],arguments)}:pe(Y[e].prototype,c,{set:function(a){"function"==typeof a?(this[ne][c]=Ie(a,e+"."+c),le(this[ne][c],a)):this[ne][c]=a},get:function(){return this[ne][c]}})}(o);for(o in n)"prototype"!==o&&n.hasOwnProperty(o)&&(Y[e][o]=n[o])}function ae(e,n,i){let o=e;for(;o&&!o.hasOwnProperty(n);)o=ve(o);!o&&e[n]&&(o=e);const c=j(n);let a=null;if(o&&(!(a=o[c])||!o.hasOwnProperty(c))&&(a=o[c]=o[n],Ve(o&&ue(o,n)))){const d=i(a,c,n);o[n]=function(){return d(this,arguments)},le(o[n],a)}return a}function lt(e,n,i){let o=null;function c(a){const y=a.data;return y.args[y.cbIdx]=function(){a.invoke.apply(this,arguments)},o.apply(y.target,y.args),a}o=ae(e,n,a=>function(y,d){const b=i(y,d);return b.cbIdx>=0&&"function"==typeof d[b.cbIdx]?Me(b.name,d[b.cbIdx],b,c):a.apply(y,d)})}function le(e,n){e[j("OriginalDelegate")]=n}let Xe=!1,je=!1;function ft(){if(Xe)return je;Xe=!0;try{const e=_e.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(je=!0)}catch{}return je}Zone.__load_patch("ZoneAwarePromise",(e,n,i)=>{const o=Object.getOwnPropertyDescriptor,c=Object.defineProperty,y=i.symbol,d=[],b=!0===e[y("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],v=y("Promise"),p=y("then"),M="__creationTrace__";i.onUnhandledError=l=>{if(i.showUncaughtError()){const u=l&&l.rejection;u?console.error("Unhandled Promise rejection:",u instanceof Error?u.message:u,"; Zone:",l.zone.name,"; Task:",l.task&&l.task.source,"; Value:",u,u instanceof Error?u.stack:void 0):console.error(l)}},i.microtaskDrainDone=()=>{for(;d.length;){const l=d.shift();try{l.zone.runGuarded(()=>{throw l.throwOriginal?l.rejection:l})}catch(u){N(u)}}};const O=y("unhandledPromiseRejectionHandler");function N(l){i.onUnhandledError(l);try{const u=n[O];"function"==typeof u&&u.call(this,l)}catch{}}function B(l){return l&&l.then}function H(l){return l}function K(l){return t.reject(l)}const q=y("state"),R=y("value"),_=y("finally"),J=y("parentPromiseValue"),x=y("parentPromiseState"),X="Promise.then",A=null,E=!0,G=!1,h=0;function I(l,u){return s=>{try{z(l,u,s)}catch(f){z(l,!1,f)}}}const w=function(){let l=!1;return function(s){return function(){l||(l=!0,s.apply(null,arguments))}}},Q="Promise resolved with itself",oe=y("currentTaskTrace");function z(l,u,s){const f=w();if(l===s)throw new TypeError(Q);if(l[q]===A){let g=null;try{("object"==typeof s||"function"==typeof s)&&(g=s&&s.then)}catch(P){return f(()=>{z(l,!1,P)})(),l}if(u!==G&&s instanceof t&&s.hasOwnProperty(q)&&s.hasOwnProperty(R)&&s[q]!==A)re(s),z(l,s[q],s[R]);else if(u!==G&&"function"==typeof g)try{g.call(s,f(I(l,u)),f(I(l,!1)))}catch(P){f(()=>{z(l,!1,P)})()}else{l[q]=u;const P=l[R];if(l[R]=s,l[_]===_&&u===E&&(l[q]=l[x],l[R]=l[J]),u===G&&s instanceof Error){const m=n.currentTask&&n.currentTask.data&&n.currentTask.data[M];m&&c(s,oe,{configurable:!0,enumerable:!1,writable:!0,value:m})}for(let m=0;m<P.length;)ee(l,P[m++],P[m++],P[m++],P[m++]);if(0==P.length&&u==G){l[q]=h;let m=s;try{throw new Error("Uncaught (in promise): "+function a(l){return l&&l.toString===Object.prototype.toString?(l.constructor&&l.constructor.name||"")+": "+JSON.stringify(l):l?l.toString():Object.prototype.toString.call(l)}(s)+(s&&s.stack?"\n"+s.stack:""))}catch(S){m=S}b&&(m.throwOriginal=!0),m.rejection=s,m.promise=l,m.zone=n.current,m.task=n.currentTask,d.push(m),i.scheduleMicroTask()}}}return l}const U=y("rejectionHandledHandler");function re(l){if(l[q]===h){try{const u=n[U];u&&"function"==typeof u&&u.call(this,{rejection:l[R],promise:l})}catch{}l[q]=G;for(let u=0;u<d.length;u++)l===d[u].promise&&d.splice(u,1)}}function ee(l,u,s,f,g){re(l);const P=l[q],m=P?"function"==typeof f?f:H:"function"==typeof g?g:K;u.scheduleMicroTask(X,()=>{try{const S=l[R],Z=!!s&&_===s[_];Z&&(s[J]=S,s[x]=P);const D=u.run(m,void 0,Z&&m!==K&&m!==H?[]:[S]);z(s,!0,D)}catch(S){z(s,!1,S)}},s)}const L=function(){},T=e.AggregateError;class t{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(u){return z(new this(null),E,u)}static reject(u){return z(new this(null),G,u)}static any(u){if(!u||"function"!=typeof u[Symbol.iterator])return Promise.reject(new T([],"All promises were rejected"));const s=[];let f=0;try{for(let m of u)f++,s.push(t.resolve(m))}catch{return Promise.reject(new T([],"All promises were rejected"))}if(0===f)return Promise.reject(new T([],"All promises were rejected"));let g=!1;const P=[];return new t((m,S)=>{for(let Z=0;Z<s.length;Z++)s[Z].then(D=>{g||(g=!0,m(D))},D=>{P.push(D),f--,0===f&&(g=!0,S(new T(P,"All promises were rejected")))})})}static race(u){let s,f,g=new this((S,Z)=>{s=S,f=Z});function P(S){s(S)}function m(S){f(S)}for(let S of u)B(S)||(S=this.resolve(S)),S.then(P,m);return g}static all(u){return t.allWithCallback(u)}static allSettled(u){return(this&&this.prototype instanceof t?this:t).allWithCallback(u,{thenCallback:f=>({status:"fulfilled",value:f}),errorCallback:f=>({status:"rejected",reason:f})})}static allWithCallback(u,s){let f,g,P=new this((D,V)=>{f=D,g=V}),m=2,S=0;const Z=[];for(let D of u){B(D)||(D=this.resolve(D));const V=S;try{D.then(F=>{Z[V]=s?s.thenCallback(F):F,m--,0===m&&f(Z)},F=>{s?(Z[V]=s.errorCallback(F),m--,0===m&&f(Z)):g(F)})}catch(F){g(F)}m++,S++}return m-=2,0===m&&f(Z),P}constructor(u){const s=this;if(!(s instanceof t))throw new Error("Must be an instanceof Promise.");s[q]=A,s[R]=[];try{const f=w();u&&u(f(I(s,E)),f(I(s,G)))}catch(f){z(s,!1,f)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return t}then(u,s){let f=this.constructor?.[Symbol.species];(!f||"function"!=typeof f)&&(f=this.constructor||t);const g=new f(L),P=n.current;return this[q]==A?this[R].push(P,g,u,s):ee(this,P,g,u,s),g}catch(u){return this.then(null,u)}finally(u){let s=this.constructor?.[Symbol.species];(!s||"function"!=typeof s)&&(s=t);const f=new s(L);f[_]=_;const g=n.current;return this[q]==A?this[R].push(g,f,u,u):ee(this,g,f,u,u),f}}t.resolve=t.resolve,t.reject=t.reject,t.race=t.race,t.all=t.all;const r=e[v]=e.Promise;e.Promise=t;const k=y("thenPatched");function C(l){const u=l.prototype,s=o(u,"then");if(s&&(!1===s.writable||!s.configurable))return;const f=u.then;u[p]=f,l.prototype.then=function(g,P){return new t((S,Z)=>{f.call(this,S,Z)}).then(g,P)},l[k]=!0}return i.patchThen=C,r&&(C(r),ae(e,"fetch",l=>function $(l){return function(u,s){let f=l.apply(u,s);if(f instanceof t)return f;let g=f.constructor;return g[k]||C(g),f}}(l))),Promise[n.__symbol__("uncaughtPromiseErrors")]=d,t}),Zone.__load_patch("toString",e=>{const n=Function.prototype.toString,i=j("OriginalDelegate"),o=j("Promise"),c=j("Error"),a=function(){if("function"==typeof this){const v=this[i];if(v)return"function"==typeof v?n.call(v):Object.prototype.toString.call(v);if(this===Promise){const p=e[o];if(p)return n.call(p)}if(this===Error){const p=e[c];if(p)return n.call(p)}}return n.call(this)};a[i]=n,Function.prototype.toString=a;const y=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":y.call(this)}});let Ee=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){Ee=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{Ee=!1}const ht={useG:!0},te={},ze={},Ye=new RegExp("^"+me+"(\\w+)(true|false)$"),$e=j("propagationStopped");function Je(e,n){const i=(n?n(e):e)+ce,o=(n?n(e):e)+ie,c=me+i,a=me+o;te[e]={},te[e][ce]=c,te[e][ie]=a}function dt(e,n,i,o){const c=o&&o.add||Ze,a=o&&o.rm||De,y=o&&o.listeners||"eventListeners",d=o&&o.rmAll||"removeAllListeners",b=j(c),v="."+c+":",p="prependListener",M="."+p+":",O=function(R,_,J){if(R.isRemoved)return;const x=R.callback;let X;"object"==typeof x&&x.handleEvent&&(R.callback=E=>x.handleEvent(E),R.originalDelegate=x);try{R.invoke(R,_,[J])}catch(E){X=E}const A=R.options;return A&&"object"==typeof A&&A.once&&_[a].call(_,J.type,R.originalDelegate?R.originalDelegate:R.callback,A),X};function N(R,_,J){if(!(_=_||e.event))return;const x=R||_.target||e,X=x[te[_.type][J?ie:ce]];if(X){const A=[];if(1===X.length){const E=O(X[0],x,_);E&&A.push(E)}else{const E=X.slice();for(let G=0;G<E.length&&(!_||!0!==_[$e]);G++){const h=O(E[G],x,_);h&&A.push(h)}}if(1===A.length)throw A[0];for(let E=0;E<A.length;E++){const G=A[E];n.nativeScheduleMicroTask(()=>{throw G})}}}const B=function(R){return N(this,R,!1)},H=function(R){return N(this,R,!0)};function K(R,_){if(!R)return!1;let J=!0;_&&void 0!==_.useG&&(J=_.useG);const x=_&&_.vh;let X=!0;_&&void 0!==_.chkDup&&(X=_.chkDup);let A=!1;_&&void 0!==_.rt&&(A=_.rt);let E=R;for(;E&&!E.hasOwnProperty(c);)E=ve(E);if(!E&&R[c]&&(E=R),!E||E[b])return!1;const G=_&&_.eventNameToString,h={},I=E[b]=E[c],w=E[j(a)]=E[a],Q=E[j(y)]=E[y],oe=E[j(d)]=E[d];let z;_&&_.prepend&&(z=E[j(_.prepend)]=E[_.prepend]);const t=J?function(s){if(!h.isExisting)return I.call(h.target,h.eventName,h.capture?H:B,h.options)}:function(s){return I.call(h.target,h.eventName,s.invoke,h.options)},r=J?function(s){if(!s.isRemoved){const f=te[s.eventName];let g;f&&(g=f[s.capture?ie:ce]);const P=g&&s.target[g];if(P)for(let m=0;m<P.length;m++)if(P[m]===s){P.splice(m,1),s.isRemoved=!0,0===P.length&&(s.allRemoved=!0,s.target[g]=null);break}}if(s.allRemoved)return w.call(s.target,s.eventName,s.capture?H:B,s.options)}:function(s){return w.call(s.target,s.eventName,s.invoke,s.options)},C=_&&_.diff?_.diff:function(s,f){const g=typeof f;return"function"===g&&s.callback===f||"object"===g&&s.originalDelegate===f},$=Zone[j("UNPATCHED_EVENTS")],l=e[j("PASSIVE_EVENTS")],u=function(s,f,g,P,m=!1,S=!1){return function(){const Z=this||e;let D=arguments[0];_&&_.transferEventName&&(D=_.transferEventName(D));let V=arguments[1];if(!V)return s.apply(this,arguments);if(we&&"uncaughtException"===D)return s.apply(this,arguments);let F=!1;if("function"!=typeof V){if(!V.handleEvent)return s.apply(this,arguments);F=!0}if(x&&!x(s,V,Z,arguments))return;const fe=Ee&&!!l&&-1!==l.indexOf(D),se=function U(s,f){return!Ee&&"object"==typeof s&&s?!!s.capture:Ee&&f?"boolean"==typeof s?{capture:s,passive:!0}:s?"object"==typeof s&&!1!==s.passive?{...s,passive:!0}:s:{passive:!0}:s}(arguments[2],fe);if($)for(let de=0;de<$.length;de++)if(D===$[de])return fe?s.call(Z,D,V,se):s.apply(this,arguments);const xe=!!se&&("boolean"==typeof se||se.capture),tt=!(!se||"object"!=typeof se)&&se.once,kt=Zone.current;let Ge=te[D];Ge||(Je(D,G),Ge=te[D]);const nt=Ge[xe?ie:ce];let Ce,ye=Z[nt],rt=!1;if(ye){if(rt=!0,X)for(let de=0;de<ye.length;de++)if(C(ye[de],V))return}else ye=Z[nt]=[];const ot=Z.constructor.name,st=ze[ot];st&&(Ce=st[D]),Ce||(Ce=ot+f+(G?G(D):D)),h.options=se,tt&&(h.options.once=!1),h.target=Z,h.capture=xe,h.eventName=D,h.isExisting=rt;const ke=J?ht:void 0;ke&&(ke.taskData=h);const he=kt.scheduleEventTask(Ce,V,ke,g,P);return h.target=null,ke&&(ke.taskData=null),tt&&(se.once=!0),!Ee&&"boolean"==typeof he.options||(he.options=se),he.target=Z,he.capture=xe,he.eventName=D,F&&(he.originalDelegate=V),S?ye.unshift(he):ye.push(he),m?Z:void 0}};return E[c]=u(I,v,t,r,A),z&&(E[p]=u(z,M,function(s){return z.call(h.target,h.eventName,s.invoke,h.options)},r,A,!0)),E[a]=function(){const s=this||e;let f=arguments[0];_&&_.transferEventName&&(f=_.transferEventName(f));const g=arguments[2],P=!!g&&("boolean"==typeof g||g.capture),m=arguments[1];if(!m)return w.apply(this,arguments);if(x&&!x(w,m,s,arguments))return;const S=te[f];let Z;S&&(Z=S[P?ie:ce]);const D=Z&&s[Z];if(D)for(let V=0;V<D.length;V++){const F=D[V];if(C(F,m))return D.splice(V,1),F.isRemoved=!0,0===D.length&&(F.allRemoved=!0,s[Z]=null,"string"==typeof f)&&(s[me+"ON_PROPERTY"+f]=null),F.zone.cancelTask(F),A?s:void 0}return w.apply(this,arguments)},E[y]=function(){const s=this||e;let f=arguments[0];_&&_.transferEventName&&(f=_.transferEventName(f));const g=[],P=Ke(s,G?G(f):f);for(let m=0;m<P.length;m++){const S=P[m];g.push(S.originalDelegate?S.originalDelegate:S.callback)}return g},E[d]=function(){const s=this||e;let f=arguments[0];if(f){_&&_.transferEventName&&(f=_.transferEventName(f));const g=te[f];if(g){const S=s[g[ce]],Z=s[g[ie]];if(S){const D=S.slice();for(let V=0;V<D.length;V++){const F=D[V];this[a].call(this,f,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}if(Z){const D=Z.slice();for(let V=0;V<D.length;V++){const F=D[V];this[a].call(this,f,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}}}else{const g=Object.keys(s);for(let P=0;P<g.length;P++){const S=Ye.exec(g[P]);let Z=S&&S[1];Z&&"removeListener"!==Z&&this[d].call(this,Z)}this[d].call(this,"removeListener")}if(A)return this},le(E[c],I),le(E[a],w),oe&&le(E[d],oe),Q&&le(E[y],Q),!0}let q=[];for(let R=0;R<i.length;R++)q[R]=K(i[R],o);return q}function Ke(e,n){if(!n){const a=[];for(let y in e){const d=Ye.exec(y);let b=d&&d[1];if(b&&(!n||b===n)){const v=e[y];if(v)for(let p=0;p<v.length;p++)a.push(v[p])}}return a}let i=te[n];i||(Je(n),i=te[n]);const o=e[i[ce]],c=e[i[ie]];return o?c?o.concat(c):o.slice():c?c.slice():[]}function _t(e,n){const i=e.Event;i&&i.prototype&&n.patchMethod(i.prototype,"stopImmediatePropagation",o=>function(c,a){c[$e]=!0,o&&o.apply(c,a)})}function Et(e,n,i,o,c){const a=Zone.__symbol__(o);if(n[a])return;const y=n[a]=n[o];n[o]=function(d,b,v){return b&&b.prototype&&c.forEach(function(p){const M=`${i}.${o}::`+p,O=b.prototype;try{if(O.hasOwnProperty(p)){const N=e.ObjectGetOwnPropertyDescriptor(O,p);N&&N.value?(N.value=e.wrapWithCurrentZone(N.value,M),e._redefineProperty(b.prototype,p,N)):O[p]&&(O[p]=e.wrapWithCurrentZone(O[p],M))}else O[p]&&(O[p]=e.wrapWithCurrentZone(O[p],M))}catch{}}),y.call(n,d,b,v)},e.attachOriginToPatched(n[o],y)}function Qe(e,n,i){if(!i||0===i.length)return n;const o=i.filter(a=>a.target===e);if(!o||0===o.length)return n;const c=o[0].ignoreProperties;return n.filter(a=>-1===c.indexOf(a))}function et(e,n,i,o){e&&qe(e,Qe(e,n,i),o)}function He(e){return Object.getOwnPropertyNames(e).filter(n=>n.startsWith("on")&&n.length>2).map(n=>n.substring(2))}Zone.__load_patch("util",(e,n,i)=>{const o=He(e);i.patchOnProperties=qe,i.patchMethod=ae,i.bindArguments=Le,i.patchMacroTask=lt;const c=n.__symbol__("BLACK_LISTED_EVENTS"),a=n.__symbol__("UNPATCHED_EVENTS");e[a]&&(e[c]=e[a]),e[c]&&(n[c]=n[a]=e[c]),i.patchEventPrototype=_t,i.patchEventTarget=dt,i.isIEOrEdge=ft,i.ObjectDefineProperty=pe,i.ObjectGetOwnPropertyDescriptor=ue,i.ObjectCreate=Se,i.ArraySlice=it,i.patchClass=ge,i.wrapWithCurrentZone=Ie,i.filterProperties=Qe,i.attachOriginToPatched=le,i._redefineProperty=Object.defineProperty,i.patchCallbacks=Et,i.getGlobalObjects=()=>({globalSources:ze,zoneSymbolEventNames:te,eventNames:o,isBrowser:Ae,isMix:Be,isNode:we,TRUE_STR:ie,FALSE_STR:ce,ZONE_SYMBOL_PREFIX:me,ADD_EVENT_LISTENER_STR:Ze,REMOVE_EVENT_LISTENER_STR:De})});const Re=j("zoneTask");function Te(e,n,i,o){let c=null,a=null;i+=o;const y={};function d(v){const p=v.data;return p.args[0]=function(){return v.invoke.apply(this,arguments)},p.handleId=c.apply(e,p.args),v}function b(v){return a.call(e,v.data.handleId)}c=ae(e,n+=o,v=>function(p,M){if("function"==typeof M[0]){const O={isPeriodic:"Interval"===o,delay:"Timeout"===o||"Interval"===o?M[1]||0:void 0,args:M},N=M[0];M[0]=function(){try{return N.apply(this,arguments)}finally{O.isPeriodic||("number"==typeof O.handleId?delete y[O.handleId]:O.handleId&&(O.handleId[Re]=null))}};const B=Me(n,M[0],O,d,b);if(!B)return B;const H=B.data.handleId;return"number"==typeof H?y[H]=B:H&&(H[Re]=B),H&&H.ref&&H.unref&&"function"==typeof H.ref&&"function"==typeof H.unref&&(B.ref=H.ref.bind(H),B.unref=H.unref.bind(H)),"number"==typeof H||H?H:B}return v.apply(e,M)}),a=ae(e,i,v=>function(p,M){const O=M[0];let N;"number"==typeof O?N=y[O]:(N=O&&O[Re],N||(N=O)),N&&"string"==typeof N.type?"notScheduled"!==N.state&&(N.cancelFn&&N.data.isPeriodic||0===N.runCount)&&("number"==typeof O?delete y[O]:O&&(O[Re]=null),N.zone.cancelTask(N)):v.apply(e,M)})}Zone.__load_patch("legacy",e=>{const n=e[Zone.__symbol__("legacyPatch")];n&&n()}),Zone.__load_patch("timers",e=>{const n="set",i="clear";Te(e,n,i,"Timeout"),Te(e,n,i,"Interval"),Te(e,n,i,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{Te(e,"request","cancel","AnimationFrame"),Te(e,"mozRequest","mozCancel","AnimationFrame"),Te(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,n)=>{const i=["alert","prompt","confirm"];for(let o=0;o<i.length;o++)ae(e,i[o],(a,y,d)=>function(b,v){return n.current.run(a,e,v,d)})}),Zone.__load_patch("EventTarget",(e,n,i)=>{(function gt(e,n){n.patchEventPrototype(e,n)})(e,i),function mt(e,n){if(Zone[n.symbol("patchEventTarget")])return;const{eventNames:i,zoneSymbolEventNames:o,TRUE_STR:c,FALSE_STR:a,ZONE_SYMBOL_PREFIX:y}=n.getGlobalObjects();for(let b=0;b<i.length;b++){const v=i[b],O=y+(v+a),N=y+(v+c);o[v]={},o[v][a]=O,o[v][c]=N}const d=e.EventTarget;d&&d.prototype&&n.patchEventTarget(e,n,[d&&d.prototype])}(e,i);const o=e.XMLHttpRequestEventTarget;o&&o.prototype&&i.patchEventTarget(e,i,[o.prototype])}),Zone.__load_patch("MutationObserver",(e,n,i)=>{ge("MutationObserver"),ge("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,n,i)=>{ge("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,n,i)=>{ge("FileReader")}),Zone.__load_patch("on_property",(e,n,i)=>{!function Tt(e,n){if(we&&!Be||Zone[e.symbol("patchEvents")])return;const i=n.__Zone_ignore_on_properties;let o=[];if(Ae){const c=window;o=o.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const a=function ut(){try{const e=_e.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:c,ignoreProperties:["error"]}]:[];et(c,He(c),i&&i.concat(a),ve(c))}o=o.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let c=0;c<o.length;c++){const a=n[o[c]];a&&a.prototype&&et(a.prototype,He(a.prototype),i)}}(i,e)}),Zone.__load_patch("customElements",(e,n,i)=>{!function pt(e,n){const{isBrowser:i,isMix:o}=n.getGlobalObjects();(i||o)&&e.customElements&&"customElements"in e&&n.patchCallbacks(n,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,i)}),Zone.__load_patch("XHR",(e,n)=>{!function b(v){const p=v.XMLHttpRequest;if(!p)return;const M=p.prototype;let N=M[Oe],B=M[Ne];if(!N){const h=v.XMLHttpRequestEventTarget;if(h){const I=h.prototype;N=I[Oe],B=I[Ne]}}const H="readystatechange",K="scheduled";function q(h){const I=h.data,w=I.target;w[a]=!1,w[d]=!1;const Q=w[c];N||(N=w[Oe],B=w[Ne]),Q&&B.call(w,H,Q);const oe=w[c]=()=>{if(w.readyState===w.DONE)if(!I.aborted&&w[a]&&h.state===K){const U=w[n.__symbol__("loadfalse")];if(0!==w.status&&U&&U.length>0){const re=h.invoke;h.invoke=function(){const ee=w[n.__symbol__("loadfalse")];for(let W=0;W<ee.length;W++)ee[W]===h&&ee.splice(W,1);!I.aborted&&h.state===K&&re.call(h)},U.push(h)}else h.invoke()}else!I.aborted&&!1===w[a]&&(w[d]=!0)};return N.call(w,H,oe),w[i]||(w[i]=h),E.apply(w,I.args),w[a]=!0,h}function R(){}function _(h){const I=h.data;return I.aborted=!0,G.apply(I.target,I.args)}const J=ae(M,"open",()=>function(h,I){return h[o]=0==I[2],h[y]=I[1],J.apply(h,I)}),X=j("fetchTaskAborting"),A=j("fetchTaskScheduling"),E=ae(M,"send",()=>function(h,I){if(!0===n.current[A]||h[o])return E.apply(h,I);{const w={target:h,url:h[y],isPeriodic:!1,args:I,aborted:!1},Q=Me("XMLHttpRequest.send",R,w,q,_);h&&!0===h[d]&&!w.aborted&&Q.state===K&&Q.invoke()}}),G=ae(M,"abort",()=>function(h,I){const w=function O(h){return h[i]}(h);if(w&&"string"==typeof w.type){if(null==w.cancelFn||w.data&&w.data.aborted)return;w.zone.cancelTask(w)}else if(!0===n.current[X])return G.apply(h,I)})}(e);const i=j("xhrTask"),o=j("xhrSync"),c=j("xhrListener"),a=j("xhrScheduled"),y=j("xhrURL"),d=j("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function at(e,n){const i=e.constructor.name;for(let o=0;o<n.length;o++){const c=n[o],a=e[c];if(a){if(!Ve(ue(e,c)))continue;e[c]=(d=>{const b=function(){return d.apply(this,Le(arguments,i+"."+c))};return le(b,d),b})(a)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,n)=>{function i(o){return function(c){Ke(e,o).forEach(y=>{const d=e.PromiseRejectionEvent;if(d){const b=new d(o,{promise:c.promise,reason:c.rejection});y.invoke(b)}})}}e.PromiseRejectionEvent&&(n[j("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),n[j("rejectionHandledHandler")]=i("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(e,n,i)=>{!function yt(e,n){n.patchMethod(e,"queueMicrotask",i=>function(o,c){Zone.current.scheduleMicroTask("queueMicrotask",c[0])})}(e,i)})}},ue=>{ue(ue.s=935)}]);
!function(g,y){"object"==typeof exports&&typeof module<"u"?y(exports):"function"==typeof define&&define.amd?define(["exports"],y):y((g=typeof globalThis<"u"?globalThis:g||self).marked={})}(this,function(g){"use strict";function y(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function v(z){g.defaults=z}g.defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};const D=/[&<>"']/,d=new RegExp(D.source,"g"),$=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Z=new RegExp($.source,"g"),F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S=z=>F[z];function A(z,t){if(t){if(D.test(z))return z.replace(d,S)}else if($.test(z))return z.replace(Z,S);return z}const R=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,C=/(^|[^\[])\^/g;function k(z,t){let e="string"==typeof z?z:z.source;t=t||"";const n={replace:(i,r)=>{let s="string"==typeof r?r:r.source;return s=s.replace(C,"$1"),e=e.replace(i,s),n},getRegex:()=>new RegExp(e,t)};return n}function L(z){try{z=encodeURI(z).replace(/%25/g,"%")}catch{return null}return z}const a={exec:()=>null};function l(z,t){const e=z.replace(/\|/g,(i,r,s)=>{let o=!1,h=r;for(;--h>=0&&"\\"===s[h];)o=!o;return o?"|":" |"}).split(/ \|/);let n=0;if(e[0].trim()||e.shift(),e.length>0&&!e[e.length-1].trim()&&e.pop(),t)if(e.length>t)e.splice(t);else for(;e.length<t;)e.push("");for(;n<e.length;n++)e[n]=e[n].trim().replace(/\\\|/g,"|");return e}function u(z,t,e){const n=z.length;if(0===n)return"";let i=0;for(;i<n;){const r=z.charAt(n-i-1);if(r!==t||e){if(r===t||!e)break;i++}else i++}return z.slice(0,n-i)}function c(z,t,e,n){const i=t.href,r=t.title?A(t.title):null,s=z[1].replace(/\\([\[\]])/g,"$1");if("!"!==z[0].charAt(0)){n.state.inLink=!0;const o={type:"link",raw:e,href:i,title:r,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,o}return{type:"image",raw:e,href:i,title:r,text:A(s)}}class p{options;rules;lexer;constructor(t){this.options=t||g.defaults}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:u(n,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],i=function(r,s){const o=r.match(/^(\s+)(?:```)/);if(null===o)return s;const h=o[1];return s.split("\n").map(m=>{const f=m.match(/^\s+/);if(null===f)return m;const[_]=f;return _.length>=h.length?m.slice(h.length):m}).join("\n")}(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(/#$/.test(n)){const i=u(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=e[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1");n=u(n.replace(/^ *>[ \t]?/gm,""),"\n");const i=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:r,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const s=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let o="",h="",m=!1;for(;t;){let f=!1;if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;o=e[0],t=t.substring(o.length);let _=e[2].split("\n",1)[0].replace(/^\t+/,ye=>" ".repeat(3*ye.length)),w=t.split("\n",1)[0],P=0;this.options.pedantic?(P=2,h=_.trimStart()):(P=e[2].search(/[^ ]/),P=P>4?1:P,h=_.slice(P),P+=e[1].length);let ne=!1;if(!_&&/^ *$/.test(w)&&(o+=w+"\n",t=t.substring(w.length+1),f=!0),!f){const ye=new RegExp(`^ {0,${Math.min(3,P-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),ze=new RegExp(`^ {0,${Math.min(3,P-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Se=new RegExp(`^ {0,${Math.min(3,P-1)}}(?:\`\`\`|~~~)`),Ee=new RegExp(`^ {0,${Math.min(3,P-1)}}#`);for(;t;){const ve=t.split("\n",1)[0];if(w=ve,this.options.pedantic&&(w=w.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Se.test(w)||Ee.test(w)||ye.test(w)||ze.test(t))break;if(w.search(/[^ ]/)>=P||!w.trim())h+="\n"+w.slice(P);else{if(ne||_.search(/[^ ]/)>=4||Se.test(_)||Ee.test(_)||ze.test(_))break;h+="\n"+w}ne||w.trim()||(ne=!0),o+=ve+"\n",t=t.substring(ve.length+1),_=w.slice(P)}}r.loose||(m?r.loose=!0:/\n *\n *$/.test(o)&&(m=!0));let ue,V=null;this.options.gfm&&(V=/^\[[ xX]\] /.exec(h),V&&(ue="[ ] "!==V[0],h=h.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:o,task:!!V,checked:ue,loose:!1,text:h,tokens:[]}),r.raw+=o}r.items[r.items.length-1].raw=o.trimEnd(),r.items[r.items.length-1].text=h.trimEnd(),r.raw=r.raw.trimEnd();for(let f=0;f<r.items.length;f++)if(this.lexer.state.top=!1,r.items[f].tokens=this.lexer.blockTokens(r.items[f].text,[]),!r.loose){const _=r.items[f].tokens.filter(P=>"space"===P.type),w=_.length>0&&_.some(P=>/\n.*\n/.test(P.raw));r.loose=w}if(r.loose)for(let f=0;f<r.items.length;f++)r.items[f].loose=!0;return r}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:i,title:r}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const n=l(e[1]),i=e[2].replace(/^\||\| *$/g,"").split("|"),r=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?s.align.push("right"):/^ *:-+: *$/.test(o)?s.align.push("center"):/^ *:-+ *$/.test(o)?s.align.push("left"):s.align.push(null);for(const o of n)s.header.push({text:o,tokens:this.lexer.inline(o)});for(const o of r)s.rows.push(l(o,s.header.length).map(h=>({text:h,tokens:this.lexer.inline(h)})));return s}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:A(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const s=u(n.slice(0,-1),"\\");if((n.length-s.length)%2==0)return}else{const s=function(o,h){if(-1===o.indexOf(h[1]))return-1;let m=0;for(let f=0;f<o.length;f++)if("\\"===o[f])f++;else if(o[f]===h[0])m++;else if(o[f]===h[1]&&(m--,m<0))return f;return-1}(e[2],"()");if(s>-1){const o=(0===e[0].indexOf("!")?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],r=s[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(n)?i.slice(1):i.slice(1,-1)),c(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const i=e[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!i){const r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return c(n,i,n[0],this.lexer)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(i&&(!i[3]||!n.match(/[\p{L}\p{N}]/u))&&(!i[1]&&!i[2]||!n||this.rules.inline.punctuation.exec(n))){const r=[...i[0]].length-1;let s,o,h=r,m=0;const f="*"===i[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*t.length+r);null!=(i=f.exec(e));){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(o=[...s].length,i[3]||i[4]){h+=o;continue}if((i[5]||i[6])&&r%3&&!((r+o)%3)){m+=o;continue}if(h-=o,h>0)continue;o=Math.min(o,o+h+m);const _=[...i[0]][0].length,w=t.slice(0,r+i.index+_+o);if(Math.min(r,o)%2){const ne=w.slice(1,-1);return{type:"em",raw:w,text:ne,tokens:this.lexer.inlineTokens(ne)}}const P=w.slice(2,-2);return{type:"strong",raw:w,text:P,tokens:this.lexer.inlineTokens(P)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(/\n/g," ");const i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=A(n,!0),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,i;return"@"===e[2]?(n=A(e[1]),i="mailto:"+n):(n=A(e[1]),i=n),{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,i;if("@"===e[2])n=A(e[0]),i="mailto:"+n;else{let r;do{r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(r!==e[0]);n=A(e[0]),i="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let n;return n=this.lexer.state.inRawBlock?e[0]:A(e[0]),{type:"text",raw:e[0],text:n}}}}const x=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,E=/(?:[*+-]|\d{1,9}[.)])/,b=k(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,E).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),T=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,M=/(?!\s*\])(?:\\.|[^\[\]\\])+/,U=k(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",M).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),se=k(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,E).getRegex(),Y="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",K=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,le=k("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",K).replace("tag",Y).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),re=k(T).replace("hr",x).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Y).getRegex(),B={blockquote:k(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",re).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:U,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:x,html:le,lheading:b,list:se,newline:/^(?: *(?:\n|$))+/,paragraph:re,table:a,text:/^[^\n]+/},j=k("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",x).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Y).getRegex(),W={...B,table:j,paragraph:k(T).replace("hr",x).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",j).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Y).getRegex()},J={...B,html:k("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",K).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:a,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:k(T).replace("hr",x).replace("heading"," *#{1,6} *[^\n]").replace("lheading",b).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},H=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ie=/^( {2,}|\\)\n(?!\s*$)/,q="\\p{P}\\p{S}",Q=k(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,q).getRegex(),G=k(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,q).getRegex(),ee=k("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,q).getRegex(),ce=k("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,q).getRegex(),fe=k(/\\([punct])/,"gu").replace(/punct/g,q).getRegex(),pe=k(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),oe=k(K).replace("(?:--\x3e|$)","--\x3e").getRegex(),xe=k("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",oe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),te=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Te=k(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",te).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$e=k(/^!?\[(label)\]\[(ref)\]/).replace("label",te).replace("ref",M).getRegex(),Ae=k(/^!?\[(ref)\](?:\[\])?/).replace("ref",M).getRegex(),me={_backpedal:a,anyPunctuation:fe,autolink:pe,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:ie,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:a,emStrongLDelim:G,emStrongRDelimAst:ee,emStrongRDelimUnd:ce,escape:H,link:Te,nolink:Ae,punctuation:Q,reflink:$e,reflinkSearch:k("reflink|nolink(?!\\()","g").replace("reflink",$e).replace("nolink",Ae).getRegex(),tag:xe,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:a},_e={...me,link:k(/^!?\[(label)\]\((.*?)\)/).replace("label",te).getRegex(),reflink:k(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",te).getRegex()},we={...me,escape:k(H).replace("])","~|])").getRegex(),url:k(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Re={...we,br:k(ie).replace("{2,}","*").getRegex(),text:k(we.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ke={normal:B,gfm:W,pedantic:J},he={normal:me,gfm:we,breaks:Re,pedantic:_e};class N{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||g.defaults,this.options.tokenizer=this.options.tokenizer||new p,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:ke.normal,inline:he.normal};this.options.pedantic?(e.block=ke.pedantic,e.inline=he.pedantic):this.options.gfm&&(e.block=ke.gfm,e.inline=this.options.breaks?he.breaks:he.gfm),this.tokenizer.rules=e}static get rules(){return{block:ke,inline:he}}static lex(t,e){return new N(e).lex(t)}static lexInline(t,e){return new N(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const n=this.inlineQueue[e];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[]){let n,i,r,s;for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(o,h,m)=>h+"    ".repeat(m.length));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>!!(n=o.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0))))if(n=this.tokenizer.space(t))t=t.substring(n.raw.length),1===n.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(n);else if(n=this.tokenizer.code(t))t=t.substring(n.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?e.push(n):(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.fences(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.heading(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.hr(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.blockquote(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.list(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.html(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.def(t))t=t.substring(n.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.table(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.lheading(t))t=t.substring(n.raw.length),e.push(n);else{if(r=t,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const h=t.slice(1);let m;this.options.extensions.startBlock.forEach(f=>{m=f.call({lexer:this},h),"number"==typeof m&&m>=0&&(o=Math.min(o,m))}),o<1/0&&o>=0&&(r=t.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(r)))i=e[e.length-1],s&&"paragraph"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(n),s=r.length!==t.length,t=t.substring(n.raw.length);else if(n=this.tokenizer.text(t))t=t.substring(n.raw.length),i=e[e.length-1],i&&"text"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(n);else if(t){const o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n,i,r,s,o,h,m=t;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(m));)f.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(m=m.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+m.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(m));)m=m.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+m.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.anyPunctuation.exec(m));)m=m.slice(0,s.index)+"++"+m.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(o||(h=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(f=>!!(n=f.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0))))if(n=this.tokenizer.escape(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.tag(t))t=t.substring(n.raw.length),i=e[e.length-1],i&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):e.push(n);else if(n=this.tokenizer.link(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(n.raw.length),i=e[e.length-1],i&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):e.push(n);else if(n=this.tokenizer.emStrong(t,m,h))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.codespan(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.br(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.del(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.autolink(t))t=t.substring(n.raw.length),e.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(t))){if(r=t,this.options.extensions&&this.options.extensions.startInline){let f=1/0;const _=t.slice(1);let w;this.options.extensions.startInline.forEach(P=>{w=P.call({lexer:this},_),"number"==typeof w&&w>=0&&(f=Math.min(f,w))}),f<1/0&&f>=0&&(r=t.substring(0,f+1))}if(n=this.tokenizer.inlineText(r))t=t.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(h=n.raw.slice(-1)),o=!0,i=e[e.length-1],i&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):e.push(n);else if(t){const f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}throw new Error(f)}}else t=t.substring(n.raw.length),e.push(n);return e}}class ge{options;constructor(t){this.options=t||g.defaults}code(t,e,n){const i=(e||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+"\n",i?'<pre><code class="language-'+A(i)+'">'+(n?t:A(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:A(t,!0))+"</code></pre>\n"}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t,e){return t}heading(t,e,n){return`<h${e}>${t}</h${e}>\n`}hr(){return"<hr>\n"}list(t,e,n){const i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+i+">\n"}listitem(t,e,n){return`<li>${t}</li>\n`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>\n`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return`<tr>\n${t}</tr>\n`}tablecell(t,e){const n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,e,n){const i=L(t);if(null===i)return n;let r='<a href="'+(t=i)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){const i=L(t);if(null===i)return n;let r=`<img src="${t=i}" alt="${n}"`;return e&&(r+=` title="${e}"`),r+=">",r}text(t){return t}}class be{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}}class X{options;renderer;textRenderer;constructor(t){this.options=t||g.defaults,this.options.renderer=this.options.renderer||new ge,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new be}static parse(t,e){return new X(e).parse(t)}static parseInline(t,e){return new X(e).parseInline(t)}parse(t,e=!0){let n="";for(let i=0;i<t.length;i++){const r=t[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const s=r,o=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==o||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){n+=o||"";continue}}switch(r.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const s=r;n+=this.renderer.heading(this.parseInline(s.tokens),s.depth,this.parseInline(s.tokens,this.textRenderer).replace(R,(t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""));continue}case"code":n+=this.renderer.code(r.text,r.lang,!!r.escaped);continue;case"table":{const s=r;let o="",h="";for(let f=0;f<s.header.length;f++)h+=this.renderer.tablecell(this.parseInline(s.header[f].tokens),{header:!0,align:s.align[f]});o+=this.renderer.tablerow(h);let m="";for(let f=0;f<s.rows.length;f++){const _=s.rows[f];h="";for(let w=0;w<_.length;w++)h+=this.renderer.tablecell(this.parseInline(_[w].tokens),{header:!1,align:s.align[w]});m+=this.renderer.tablerow(h)}n+=this.renderer.table(o,m);continue}case"blockquote":{const o=this.parse(r.tokens);n+=this.renderer.blockquote(o);continue}case"list":{const s=r,o=s.ordered,h=s.start,m=s.loose;let f="";for(let _=0;_<s.items.length;_++){const w=s.items[_],P=w.checked,ne=w.task;let ue="";if(w.task){const V=this.renderer.checkbox(!!P);m?w.tokens.length>0&&"paragraph"===w.tokens[0].type?(w.tokens[0].text=V+" "+w.tokens[0].text,w.tokens[0].tokens&&w.tokens[0].tokens.length>0&&"text"===w.tokens[0].tokens[0].type&&(w.tokens[0].tokens[0].text=V+" "+w.tokens[0].tokens[0].text)):w.tokens.unshift({type:"text",text:V+" "}):ue+=V+" "}ue+=this.parse(w.tokens,m),f+=this.renderer.listitem(ue,ne,!!P)}n+=this.renderer.list(f,o,h);continue}case"html":n+=this.renderer.html(r.text,r.block);continue;case"paragraph":n+=this.renderer.paragraph(this.parseInline(r.tokens));continue;case"text":{let s=r,o=s.tokens?this.parseInline(s.tokens):s.text;for(;i+1<t.length&&"text"===t[i+1].type;)s=t[++i],o+="\n"+(s.tokens?this.parseInline(s.tokens):s.text);n+=e?this.renderer.paragraph(o):o;continue}default:{const s='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}parseInline(t,e){e=e||this.renderer;let n="";for(let i=0;i<t.length;i++){const r=t[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const s=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=s||"";continue}}switch(r.type){case"escape":case"text":n+=e.text(r.text);break;case"html":n+=e.html(r.text);break;case"link":n+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break;case"image":n+=e.image(r.href,r.title,r.text);break;case"strong":n+=e.strong(this.parseInline(r.tokens,e));break;case"em":n+=e.em(this.parseInline(r.tokens,e));break;case"codespan":n+=e.codespan(r.text);break;case"br":n+=e.br();break;case"del":n+=e.del(this.parseInline(r.tokens,e));break;default:{const s='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}}class de{options;constructor(t){this.options=t||g.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class Fe{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(N.lex,X.parse);parseInline=this.#e(N.lexInline,X.parseInline);Parser=X;Renderer=ge;TextRenderer=be;Lexer=N;Tokenizer=p;Hooks=de;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{const r=i;for(const s of r.header)n=n.concat(this.walkTokens(s.tokens,e));for(const s of r.rows)for(const o of s)n=n.concat(this.walkTokens(o.tokens,e));break}case"list":n=n.concat(this.walkTokens(i.items,e));break;default:{const r=i;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(s=>{const o=r[s].flat(1/0);n=n.concat(this.walkTokens(o,e))}):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const s=e.renderers[r.name];e.renderers[r.name]=s?function(...o){let h=r.renderer.apply(this,o);return!1===h&&(h=s.apply(this,o)),h}:r.renderer}if("tokenizer"in r){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");const s=e[r.level];s?s.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=this.defaults.renderer||new ge(this.defaults);for(const s in n.renderer){if(!(s in r))throw new Error(`renderer '${s}' does not exist`);if("options"===s)continue;const h=n.renderer[s],m=r[s];r[s]=(...f)=>{let _=h.apply(r,f);return!1===_&&(_=m.apply(r,f)),_||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new p(this.defaults);for(const s in n.tokenizer){if(!(s in r))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const h=n.tokenizer[s],m=r[s];r[s]=(...f)=>{let _=h.apply(r,f);return!1===_&&(_=m.apply(r,f)),_}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new de;for(const s in n.hooks){if(!(s in r))throw new Error(`hook '${s}' does not exist`);if("options"===s)continue;const h=n.hooks[s],m=r[s];r[s]=de.passThroughHooks.has(s)?f=>{if(this.defaults.async)return Promise.resolve(h.call(r,f)).then(w=>m.call(r,w));const _=h.call(r,f);return m.call(r,_)}:(...f)=>{let _=h.apply(r,f);return!1===_&&(_=m.apply(r,f)),_}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,s=n.walkTokens;i.walkTokens=function(o){let h=[];return h.push(s.call(this,o)),r&&(h=h.concat(r.call(this,o))),h}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return N.lex(t,e??this.defaults)}parser(t,e){return X.parse(t,e??this.defaults)}#e(t,e){return(n,i)=>{const r={...i},s={...this.defaults,...r};!0===this.defaults.async&&!1===r.async&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const o=this.#t(!!s.silent,!!s.async);if(null==n)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(h=>t(h,s)).then(h=>s.hooks?s.hooks.processAllTokens(h):h).then(h=>s.walkTokens?Promise.all(this.walkTokens(h,s.walkTokens)).then(()=>h):h).then(h=>e(h,s)).then(h=>s.hooks?s.hooks.postprocess(h):h).catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let h=t(n,s);s.hooks&&(h=s.hooks.processAllTokens(h)),s.walkTokens&&this.walkTokens(h,s.walkTokens);let m=e(h,s);return s.hooks&&(m=s.hooks.postprocess(m)),m}catch(h){return o(h)}}}#t(t,e){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const i="<p>An error occurred:</p><pre>"+A(n.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(n);throw n}}}const ae=new Fe;function I(z,t){return ae.parse(z,t)}I.options=I.setOptions=function(z){return ae.setOptions(z),v(I.defaults=ae.defaults),I},I.getDefaults=y,I.defaults=g.defaults,I.use=function(...z){return ae.use(...z),v(I.defaults=ae.defaults),I},I.walkTokens=function(z,t){return ae.walkTokens(z,t)},I.parseInline=ae.parseInline,I.Parser=X,I.parser=X.parse,I.Renderer=ge,I.TextRenderer=be,I.Lexer=N,I.lexer=N.lex,I.Tokenizer=p,I.Hooks=de,I.parse=I;const Ie=I.options,Le=I.setOptions,Ce=I.use,qe=I.walkTokens,Pe=I.parseInline,Ze=I,Be=X.parse,Me=N.lex;g.Hooks=de,g.Lexer=N,g.Marked=Fe,g.Parser=X,g.Renderer=ge,g.TextRenderer=be,g.Tokenizer=p,g.getDefaults=y,g.lexer=Me,g.marked=I,g.options=Ie,g.parse=Ze,g.parseInline=Pe,g.parser=Be,g.setOptions=Le,g.use=Ce,g.walkTokens=qe});var _self=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Prism=function(g){var y=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,v=0,D={},d={manual:g.Prism&&g.Prism.manual,disableWorkerMessageHandler:g.Prism&&g.Prism.disableWorkerMessageHandler,util:{encode:function a(l){return l instanceof $?new $(l.type,a(l.content),l.alias):Array.isArray(l)?l.map(a):l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(a){return Object.prototype.toString.call(a).slice(8,-1)},objId:function(a){return a.__id||Object.defineProperty(a,"__id",{value:++v}),a.__id},clone:function a(l,u){var c,p;switch(u=u||{},d.util.type(l)){case"Object":if(p=d.util.objId(l),u[p])return u[p];for(var x in u[p]=c={},l)l.hasOwnProperty(x)&&(c[x]=a(l[x],u));return c;case"Array":return p=d.util.objId(l),u[p]?u[p]:(u[p]=c=[],l.forEach(function(E,b){c[b]=a(E,u)}),c);default:return l}},getLanguage:function(a){for(;a;){var l=y.exec(a.className);if(l)return l[1].toLowerCase();a=a.parentElement}return"none"},setLanguage:function(a,l){a.className=a.className.replace(RegExp(y,"gi"),""),a.classList.add("language-"+l)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(c){var a=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(c.stack)||[])[1];if(a){var l=document.getElementsByTagName("script");for(var u in l)if(l[u].src==a)return l[u]}return null}},isActive:function(a,l,u){for(var c="no-"+l;a;){var p=a.classList;if(p.contains(l))return!0;if(p.contains(c))return!1;a=a.parentElement}return!!u}},languages:{plain:D,plaintext:D,text:D,txt:D,extend:function(a,l){var u=d.util.clone(d.languages[a]);for(var c in l)u[c]=l[c];return u},insertBefore:function(a,l,u,c){var p=(c=c||d.languages)[a],x={};for(var E in p)if(p.hasOwnProperty(E)){if(E==l)for(var b in u)u.hasOwnProperty(b)&&(x[b]=u[b]);u.hasOwnProperty(E)||(x[E]=p[E])}var T=c[a];return c[a]=x,d.languages.DFS(d.languages,function(M,U){U===T&&M!=a&&(this[M]=x)}),x},DFS:function a(l,u,c,p){p=p||{};var x=d.util.objId;for(var E in l)if(l.hasOwnProperty(E)){u.call(l,E,l[E],c||E);var b=l[E],T=d.util.type(b);"Object"!==T||p[x(b)]?"Array"===T&&!p[x(b)]&&(p[x(b)]=!0,a(b,u,E,p)):(p[x(b)]=!0,a(b,u,null,p))}}},plugins:{},highlightAll:function(a,l){d.highlightAllUnder(document,a,l)},highlightAllUnder:function(a,l,u){var c={callback:u,container:a,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",c),c.elements=Array.prototype.slice.apply(c.container.querySelectorAll(c.selector)),d.hooks.run("before-all-elements-highlight",c);for(var x,p=0;x=c.elements[p++];)d.highlightElement(x,!0===l,c.callback)},highlightElement:function(a,l,u){var c=d.util.getLanguage(a),p=d.languages[c];d.util.setLanguage(a,c);var x=a.parentElement;x&&"pre"===x.nodeName.toLowerCase()&&d.util.setLanguage(x,c);var b={element:a,language:c,grammar:p,code:a.textContent};function T(U){b.highlightedCode=U,d.hooks.run("before-insert",b),b.element.innerHTML=b.highlightedCode,d.hooks.run("after-highlight",b),d.hooks.run("complete",b),u&&u.call(b.element)}if(d.hooks.run("before-sanity-check",b),(x=b.element.parentElement)&&"pre"===x.nodeName.toLowerCase()&&!x.hasAttribute("tabindex")&&x.setAttribute("tabindex","0"),!b.code)return d.hooks.run("complete",b),void(u&&u.call(b.element));if(d.hooks.run("before-highlight",b),b.grammar)if(l&&g.Worker){var M=new Worker(d.filename);M.onmessage=function(U){T(U.data)},M.postMessage(JSON.stringify({language:b.language,code:b.code,immediateClose:!0}))}else T(d.highlight(b.code,b.grammar,b.language));else T(d.util.encode(b.code))},highlight:function(a,l,u){var c={code:a,grammar:l,language:u};if(d.hooks.run("before-tokenize",c),!c.grammar)throw new Error('The language "'+c.language+'" has no grammar.');return c.tokens=d.tokenize(c.code,c.grammar),d.hooks.run("after-tokenize",c),$.stringify(d.util.encode(c.tokens),c.language)},tokenize:function(a,l){var u=l.rest;if(u){for(var c in u)l[c]=u[c];delete l.rest}var p=new S;return A(p,p.head,a),F(a,p,l,p.head,0),function O(a){for(var l=[],u=a.head.next;u!==a.tail;)l.push(u.value),u=u.next;return l}(p)},hooks:{all:{},add:function(a,l){var u=d.hooks.all;u[a]=u[a]||[],u[a].push(l)},run:function(a,l){var u=d.hooks.all[a];if(u&&u.length)for(var p,c=0;p=u[c++];)p(l)}},Token:$};function $(a,l,u,c){this.type=a,this.content=l,this.alias=u,this.length=0|(c||"").length}function Z(a,l,u,c){a.lastIndex=l;var p=a.exec(u);if(p&&c&&p[1]){var x=p[1].length;p.index+=x,p[0]=p[0].slice(x)}return p}function F(a,l,u,c,p,x){for(var E in u)if(u.hasOwnProperty(E)&&u[E]){var b=u[E];b=Array.isArray(b)?b:[b];for(var T=0;T<b.length;++T){if(x&&x.cause==E+","+T)return;var M=b[T],U=M.inside,se=!!M.lookbehind,Y=!!M.greedy,K=M.alias;if(Y&&!M.pattern.global){var le=M.pattern.toString().match(/[imsuy]*$/)[0];M.pattern=RegExp(M.pattern.source,le+"g")}for(var re=M.pattern||M,B=c.next,j=p;B!==l.tail&&!(x&&j>=x.reach);j+=B.value.length,B=B.next){var W=B.value;if(l.length>a.length)return;if(!(W instanceof $)){var H,J=1;if(Y){if(!(H=Z(re,j,a,se))||H.index>=a.length)break;var G=H.index,ie=H.index+H[0].length,q=j;for(q+=B.value.length;G>=q;)q+=(B=B.next).value.length;if(j=q-=B.value.length,B.value instanceof $)continue;for(var Q=B;Q!==l.tail&&(q<ie||"string"==typeof Q.value);Q=Q.next)J++,q+=Q.value.length;J--,W=a.slice(j,q),H.index-=j}else if(!(H=Z(re,0,W,se)))continue;var ee=H[0],ce=W.slice(0,G=H.index),fe=W.slice(G+ee.length),pe=j+W.length;x&&pe>x.reach&&(x.reach=pe);var oe=B.prev;if(ce&&(oe=A(l,oe,ce),j+=ce.length),R(l,oe,J),B=A(l,oe,new $(E,U?d.tokenize(ee,U):ee,K,ee)),fe&&A(l,B,fe),J>1){var te={cause:E+","+T,reach:pe};F(a,l,u,B.prev,j,te),x&&te.reach>x.reach&&(x.reach=te.reach)}}}}}}function S(){var a={value:null,prev:null,next:null},l={value:null,prev:a,next:null};a.next=l,this.head=a,this.tail=l,this.length=0}function A(a,l,u){var c=l.next,p={value:u,prev:l,next:c};return l.next=p,c.prev=p,a.length++,p}function R(a,l,u){for(var c=l.next,p=0;p<u&&c!==a.tail;p++)c=c.next;l.next=c,c.prev=l,a.length-=p}if(g.Prism=d,$.stringify=function a(l,u){if("string"==typeof l)return l;if(Array.isArray(l)){var c="";return l.forEach(function(T){c+=a(T,u)}),c}var p={type:l.type,content:a(l.content,u),tag:"span",classes:["token",l.type],attributes:{},language:u},x=l.alias;x&&(Array.isArray(x)?Array.prototype.push.apply(p.classes,x):p.classes.push(x)),d.hooks.run("wrap",p);var E="";for(var b in p.attributes)E+=" "+b+'="'+(p.attributes[b]||"").replace(/"/g,"&quot;")+'"';return"<"+p.tag+' class="'+p.classes.join(" ")+'"'+E+">"+p.content+"</"+p.tag+">"},!g.document)return g.addEventListener&&(d.disableWorkerMessageHandler||g.addEventListener("message",function(a){var l=JSON.parse(a.data),u=l.language,p=l.immediateClose;g.postMessage(d.highlight(l.code,d.languages[u],u)),p&&g.close()},!1)),d;var C=d.util.currentScript();function k(){d.manual||d.highlightAll()}if(C&&(d.filename=C.src,C.hasAttribute("data-manual")&&(d.manual=!0)),!d.manual){var L=document.readyState;"loading"===L||"interactive"===L&&C&&C.defer?document.addEventListener("DOMContentLoaded",k):window.requestAnimationFrame?window.requestAnimationFrame(k):window.setTimeout(k,16)}return d}(_self);typeof module<"u"&&module.exports&&(module.exports=Prism),typeof global<"u"&&(global.Prism=Prism),Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(g){"entity"===g.type&&(g.attributes.title=g.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(y,v){var D={};D["language-"+v]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[v]},D.cdata=/^<!\[CDATA\[|\]\]>$/i;var d={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:D}};d["language-"+v]={pattern:/[\s\S]+/,inside:Prism.languages[v]};var $={};$[y]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return y}),"i"),lookbehind:!0,greedy:!0,inside:d},Prism.languages.insertBefore("markup","cdata",$)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(g,y){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+g+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[y,"language-"+y],inside:Prism.languages[y]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(g){var y=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;g.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+y.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+y.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+y.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+y.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:y,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},g.languages.css.atrule.inside.rest=g.languages.css;var v=g.languages.markup;v&&(v.tag.addInlined("style","css"),v.tag.addAttribute("style","css"))}(Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,function(){if(!(typeof Prism>"u"||typeof document>"u")){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var D={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},d="data-src-status",$="loading",Z="loaded",S="pre[data-src]:not(["+d+'="'+Z+'"]):not(['+d+'="'+$+'"])';Prism.hooks.add("before-highlightall",function(C){C.selector+=", "+S}),Prism.hooks.add("before-sanity-check",function(C){var k=C.element;if(k.matches(S)){C.code="",k.setAttribute(d,$);var L=k.appendChild(document.createElement("CODE"));L.textContent="Loading\u2026";var a=k.getAttribute("data-src"),l=C.language;if("none"===l){var u=(/\.(\w+)$/.exec(a)||[,"none"])[1];l=D[u]||u}Prism.util.setLanguage(L,l),Prism.util.setLanguage(k,l);var c=Prism.plugins.autoloader;c&&c.loadLanguages(l),function A(C,k,L){var a=new XMLHttpRequest;a.open("GET",C,!0),a.onreadystatechange=function(){4==a.readyState&&(a.status<400&&a.responseText?k(a.responseText):L(a.status>=400?function(C,k){return"\u2716 Error "+C+" while fetching file: "+k}(a.status,a.statusText):"\u2716 Error: File does not exist or is empty"))},a.send(null)}(a,function(p){k.setAttribute(d,Z);var x=function R(C){var k=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(C||"");if(k){var L=Number(k[1]),l=k[3];return k[2]?l?[L,Number(l)]:[L,void 0]:[L,L]}}(k.getAttribute("data-range"));if(x){var E=p.split(/\r\n?|\n/g),b=x[0],T=null==x[1]?E.length:x[1];b<0&&(b+=E.length),b=Math.max(0,Math.min(b-1,E.length)),T<0&&(T+=E.length),T=Math.max(0,Math.min(T,E.length)),p=E.slice(b,T).join("\n"),k.hasAttribute("data-start")||k.setAttribute("data-start",String(b+1))}L.textContent=p,Prism.highlightElement(L)},function(p){k.setAttribute(d,"failed"),L.textContent=p})}}),Prism.plugins.fileHighlight={highlight:function(k){for(var l,L=(k||document).querySelectorAll(S),a=0;l=L[a++];)Prism.highlightElement(l)}};var O=!1;Prism.fileHighlight=function(){O||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),O=!0),Prism.plugins.fileHighlight.highlight.apply(this,arguments)}}}(),function(g){function y(q,Q){return q.replace(/<<(\d+)>>/g,function(G,ee){return"(?:"+Q[+ee]+")"})}function v(q,Q,G){return RegExp(y(q,Q),G||"")}function D(q,Q){for(var G=0;G<Q;G++)q=q.replace(/<<self>>/g,function(){return"(?:"+q+")"});return q.replace(/<<self>>/g,"[^\\s\\S]")}var d="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",$="class enum interface record struct",Z="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",F="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function S(q){return"\\b(?:"+q.trim().replace(/ /g,"|")+")\\b"}var A=S($),R=RegExp(S(d+" "+$+" "+Z+" "+F)),O=S($+" "+Z+" "+F),C=S(d+" "+$+" "+F),k=D("<(?:[^<>;=+\\-*/%&|^]|<<self>>)*>",2),L=D("\\((?:[^()]|<<self>>)*\\)",2),a="@?\\b[A-Za-z_]\\w*\\b",l=y("<<0>>(?:\\s*<<1>>)?",[a,k]),u=y("(?!<<0>>)<<1>>(?:\\s*\\.\\s*<<1>>)*",[O,l]),c="\\[\\s*(?:,\\s*)*\\]",p=y("<<0>>(?:\\s*(?:\\?\\s*)?<<1>>)*(?:\\s*\\?)?",[u,c]),x=y("[^,()<>[\\];=+\\-*/%&|^]|<<0>>|<<1>>|<<2>>",[k,L,c]),E=y("\\(<<0>>+(?:,<<0>>+)+\\)",[x]),b=y("(?:<<0>>|<<1>>)(?:\\s*(?:\\?\\s*)?<<2>>)*(?:\\s*\\?)?",[E,u,c]),T={keyword:R,punctuation:/[<>()?,.:[\]]/},M="'(?:[^\r\n'\\\\]|\\\\.|\\\\[Uux][\\da-fA-F]{1,8})'",U='"(?:\\\\.|[^\\\\"\r\n])*"';g.languages.csharp=g.languages.extend("clike",{string:[{pattern:v("(^|[^$\\\\])<<0>>",['@"(?:""|\\\\[^]|[^\\\\"])*"(?!")']),lookbehind:!0,greedy:!0},{pattern:v("(^|[^@$\\\\])<<0>>",[U]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:v("(\\busing\\s+static\\s+)<<0>>(?=\\s*;)",[u]),lookbehind:!0,inside:T},{pattern:v("(\\busing\\s+<<0>>\\s*=\\s*)<<1>>(?=\\s*;)",[a,b]),lookbehind:!0,inside:T},{pattern:v("(\\busing\\s+)<<0>>(?=\\s*=)",[a]),lookbehind:!0},{pattern:v("(\\b<<0>>\\s+)<<1>>",[A,l]),lookbehind:!0,inside:T},{pattern:v("(\\bcatch\\s*\\(\\s*)<<0>>",[u]),lookbehind:!0,inside:T},{pattern:v("(\\bwhere\\s+)<<0>>",[a]),lookbehind:!0},{pattern:v("(\\b(?:is(?:\\s+not)?|as)\\s+)<<0>>",[p]),lookbehind:!0,inside:T},{pattern:v("\\b<<0>>(?=\\s+(?!<<1>>|with\\s*\\{)<<2>>(?:\\s*[=,;:{)\\]]|\\s+(?:in|when)\\b))",[b,C,a]),inside:T}],keyword:R,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),g.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),g.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:v("([(,]\\s*)<<0>>(?=\\s*:)",[a]),lookbehind:!0,alias:"punctuation"}}),g.languages.insertBefore("csharp","class-name",{namespace:{pattern:v("(\\b(?:namespace|using)\\s+)<<0>>(?:\\s*\\.\\s*<<0>>)*(?=\\s*[;{])",[a]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:v("(\\b(?:default|sizeof|typeof)\\s*\\(\\s*(?!\\s))(?:[^()\\s]|\\s(?!\\s)|<<0>>)*(?=\\s*\\))",[L]),lookbehind:!0,alias:"class-name",inside:T},"return-type":{pattern:v("<<0>>(?=\\s+(?:<<1>>\\s*(?:=>|[({]|\\.\\s*this\\s*\\[)|this\\s*\\[))",[b,u]),inside:T,alias:"class-name"},"constructor-invocation":{pattern:v("(\\bnew\\s+)<<0>>(?=\\s*[[({])",[b]),lookbehind:!0,inside:T,alias:"class-name"},"generic-method":{pattern:v("<<0>>\\s*<<1>>(?=\\s*\\()",[a,k]),inside:{function:v("^<<0>>",[a]),generic:{pattern:RegExp(k),alias:"class-name",inside:T}}},"type-list":{pattern:v("\\b((?:<<0>>\\s+<<1>>|record\\s+<<1>>\\s*<<5>>|where\\s+<<2>>)\\s*:\\s*)(?:<<3>>|<<4>>|<<1>>\\s*<<5>>|<<6>>)(?:\\s*,\\s*(?:<<3>>|<<4>>|<<6>>))*(?=\\s*(?:where|[{;]|=>|$))",[A,l,a,b,R.source,L,"\\bnew\\s*\\(\\s*\\)"]),lookbehind:!0,inside:{"record-arguments":{pattern:v("(^(?!new\\s*\\()<<0>>\\s*)<<1>>",[l,L]),lookbehind:!0,greedy:!0,inside:g.languages.csharp},keyword:R,"class-name":{pattern:RegExp(b),greedy:!0,inside:T},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var se=U+"|"+M,Y=y("/(?![*/])|//[^\r\n]*[\r\n]|/\\*(?:[^*]|\\*(?!/))*\\*/|<<0>>",[se]),K=D(y("[^\"'/()]|<<0>>|\\(<<self>>*\\)",[Y]),2),le="\\b(?:assembly|event|field|method|module|param|property|return|type)\\b",re=y("<<0>>(?:\\s*\\(<<1>>*\\))?",[u,K]);g.languages.insertBefore("csharp","class-name",{attribute:{pattern:v("((?:^|[^\\s\\w>)?])\\s*\\[\\s*)(?:<<0>>\\s*:\\s*)?<<1>>(?:\\s*,\\s*<<1>>)*(?=\\s*\\])",[le,re]),lookbehind:!0,greedy:!0,inside:{target:{pattern:v("^<<0>>(?=\\s*:)",[le]),alias:"keyword"},"attribute-arguments":{pattern:v("\\(<<0>>*\\)",[K]),inside:g.languages.csharp},"class-name":{pattern:RegExp(u),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var B=":[^}\r\n]+",j=D(y("[^\"'/()]|<<0>>|\\(<<self>>*\\)",[Y]),2),W=y("\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}",[j,B]),J=D(y("[^\"'/()]|/(?!\\*)|/\\*(?:[^*]|\\*(?!/))*\\*/|<<0>>|\\(<<self>>*\\)",[se]),2),H=y("\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}",[J,B]);function ie(q,Q){return{interpolation:{pattern:v("((?:^|[^{])(?:\\{\\{)*)<<0>>",[q]),lookbehind:!0,inside:{"format-string":{pattern:v("(^\\{(?:(?![}:])<<0>>)*)<<1>>(?=\\}$)",[Q,B]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:g.languages.csharp}}},string:/[\s\S]+/}}g.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:v('(^|[^\\\\])(?:\\$@|@\\$)"(?:""|\\\\[^]|\\{\\{|<<0>>|[^\\\\{"])*"',[W]),lookbehind:!0,greedy:!0,inside:ie(W,j)},{pattern:v('(^|[^@\\\\])\\$"(?:\\\\.|\\{\\{|<<0>>|[^\\\\"{])*"',[H]),lookbehind:!0,greedy:!0,inside:ie(H,J)}],char:{pattern:RegExp(M),greedy:!0}}),g.languages.dotnet=g.languages.cs=g.languages.csharp}(Prism),function(g){var y=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;g.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:[^;{\\s\"']|\\s+(?!\\s)|"+y.source+")*?(?:;|(?=\\s*\\{))"),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+y.source+"|(?:[^\\\\\r\n()\"']|\\\\[^])*)\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+y.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+y.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:y,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},g.languages.css.atrule.inside.rest=g.languages.css;var v=g.languages.markup;v&&(v.tag.addInlined("style","css"),v.tag.addAttribute("style","css"))}(Prism),function(){if(typeof Prism<"u"&&typeof document<"u"){var g="line-numbers",y=/\n(?!$)/g,v=Prism.plugins.lineNumbers={getLine:function($,Z){if("PRE"===$.tagName&&$.classList.contains(g)){var F=$.querySelector(".line-numbers-rows");if(F){var S=parseInt($.getAttribute("data-start"),10)||1,A=S+(F.children.length-1);return Z<S&&(Z=S),Z>A&&(Z=A),F.children[Z-S]}}},resize:function($){d([$])},assumeViewportIndependence:!0},D=void 0;window.addEventListener("resize",function(){v.assumeViewportIndependence&&D===window.innerWidth||(D=window.innerWidth,d(Array.prototype.slice.call(document.querySelectorAll("pre.line-numbers"))))}),Prism.hooks.add("complete",function($){if($.code){var Z=$.element,F=Z.parentNode;if(F&&/pre/i.test(F.nodeName)&&!Z.querySelector(".line-numbers-rows")&&Prism.util.isActive(Z,g)){Z.classList.remove(g),F.classList.add(g);var S,A=$.code.match(y),O=new Array((A?A.length+1:1)+1).join("<span></span>");(S=document.createElement("span")).setAttribute("aria-hidden","true"),S.className="line-numbers-rows",S.innerHTML=O,F.hasAttribute("data-start")&&(F.style.counterReset="linenumber "+(parseInt(F.getAttribute("data-start"),10)-1)),$.element.appendChild(S),d([F]),Prism.hooks.run("line-numbers",$)}}}),Prism.hooks.add("line-numbers",function($){$.plugins=$.plugins||{},$.plugins.lineNumbers=!0})}function d($){if(0!=($=$.filter(function(F){var S,A=(S=F,S?window.getComputedStyle?getComputedStyle(S):S.currentStyle||null:null)["white-space"];return"pre-wrap"===A||"pre-line"===A})).length){var Z=$.map(function(F){var S=F.querySelector("code"),A=F.querySelector(".line-numbers-rows");if(S&&A){var R=F.querySelector(".line-numbers-sizer"),O=S.textContent.split(y);R||((R=document.createElement("span")).className="line-numbers-sizer",S.appendChild(R)),R.innerHTML="0",R.style.display="block";var C=R.getBoundingClientRect().height;return R.innerHTML="",{element:F,lines:O,lineHeights:[],oneLinerHeight:C,sizer:R}}}).filter(Boolean);Z.forEach(function(F){var S=F.sizer,A=F.lines,R=F.lineHeights,O=F.oneLinerHeight;R[A.length-1]=void 0,A.forEach(function(C,k){if(C&&C.length>1){var L=S.appendChild(document.createElement("span"));L.style.display="block",L.textContent=C}else R[k]=O})}),Z.forEach(function(F){for(var S=F.sizer,A=F.lineHeights,R=0,O=0;O<A.length;O++)void 0===A[O]&&(A[O]=S.children[R++].getBoundingClientRect().height)}),Z.forEach(function(F){var S=F.sizer,A=F.element.querySelector(".line-numbers-rows");S.style.display="none",S.innerHTML="",F.lineHeights.forEach(function(R,O){A.children[O].style.height=R+"px"})})}}}();
(self.webpackChunkca_web_components=self.webpackChunkca_web_components||[]).push([[792],{350:(ss,Nu,Oa)=>{"use strict";function Fu(t,n,e,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void e(c)}a.done?n(u):Promise.resolve(u).then(r,i)}function B(t){return function(){var n=this,e=arguments;return new Promise(function(r,i){var o=t.apply(n,e);function s(u){Fu(o,r,i,s,a,"next",u)}function a(u){Fu(o,r,i,s,a,"throw",u)}s(void 0)})}}let Fn=null,Qr=1;const Na=Symbol("SIGNAL");function ct(t){const n=Fn;return Fn=t,n}function il(t){if((!Ua(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Qr)){if(!t.producerMustRecompute(t)&&!Wi(t))return t.dirty=!1,void(t.lastCleanEpoch=Qr);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Qr}}function Wi(t){Lu(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],r=t.producerLastReadVersion[n];if(r!==e.version||(il(e),r!==e.version))return!0}return!1}function Qs(t,n){if(function Wv(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Lu(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Qs(t.producerNode[r],t.producerIndexOfThis[r]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[n],i=t.liveConsumerNode[n];Lu(i),i.producerIndexOfThis[r]=n}}function Ua(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Lu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let as=null;function Mn(t){return"function"==typeof t}function Ei(t){const e=t(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const ja=Ei(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Hd(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class Bn{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(Mn(r))try{r()}catch(o){n=o instanceof ja?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{zu(o)}catch(s){n=n??[],s instanceof ja?n=[...n,...s.errors]:n.push(s)}}if(n)throw new ja(n)}}add(n){var e;if(n&&n!==this)if(this.closed)zu(n);else{if(n instanceof Bn){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Hd(e,n)}remove(n){const{_finalizers:e}=this;e&&Hd(e,n),n instanceof Bn&&n._removeParent(this)}}Bn.EMPTY=(()=>{const t=new Bn;return t.closed=!0,t})();const bp=Bn.EMPTY;function Gv(t){return t instanceof Bn||t&&"closed"in t&&Mn(t.remove)&&Mn(t.add)&&Mn(t.unsubscribe)}function zu(t){Mn(t)?t():t.unsubscribe()}const Er={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ys={setTimeout(t,n,...e){const{delegate:r}=Ys;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=Ys;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function sl(t){Ys.setTimeout(()=>{const{onUnhandledError:n}=Er;if(!n)throw t;n(t)})}function Ap(){}const al=Xs("C",void 0,void 0);function Xs(t,n,e){return{kind:t,value:n,error:e}}let us=null;function Vu(t){if(Er.useDeprecatedSynchronousErrorHandling){const n=!us;if(n&&(us={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:r}=us;if(us=null,e)throw r}}else t()}class cl extends Bn{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Gv(n)&&n.add(this)):this.destination=hx}static create(n,e,r){return new za(n,e,r)}next(n){this.isStopped?Ep(function ul(t){return Xs("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Ep(function dx(t){return Xs("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Ep(al,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Cp=Function.prototype.bind;function ll(t,n){return Cp.call(t,n)}class _p{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){Wu(r)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){Wu(r)}else Wu(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Wu(e)}}}class za extends cl{constructor(n,e,r){let i;if(super(),Mn(n)||!n)i={next:n??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Er.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&ll(n.next,o),error:n.error&&ll(n.error,o),complete:n.complete&&ll(n.complete,o)}):i=n}this.destination=new _p(i)}}function Wu(t){Er.useDeprecatedSynchronousErrorHandling?function xp(t){Er.useDeprecatedSynchronousErrorHandling&&us&&(us.errorThrown=!0,us.error=t)}(t):sl(t)}function Ep(t,n){const{onStoppedNotification:e}=Er;e&&Ys.setTimeout(()=>e(t,n))}const hx={closed:!0,next:Ap,error:function fx(t){throw t},complete:Ap},qd="function"==typeof Symbol&&Symbol.observable||"@@observable";function Va(t){return t}let Ln=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,i){const o=function px(t){return t&&t instanceof cl||function Yv(t){return t&&Mn(t.next)&&Mn(t.error)&&Mn(t.complete)}(t)&&Gv(t)}(e)?e:new za(e,r,i);return Vu(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Qv(r))((i,o)=>{const s=new za({next:a=>{try{e(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[qd](){return this}pipe(...e){return function Kv(t){return 0===t.length?Va:1===t.length?t[0]:function(e){return t.reduce((r,i)=>i(r),e)}}(e)(this)}toPromise(e){return new(e=Qv(e))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=n=>new t(n),t})();function Qv(t){var n;return null!==(n=t??Er.Promise)&&void 0!==n?n:Promise}const gx=Ei(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Di=(()=>{class t extends Ln{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new Gd(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new gx}next(e){Vu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){Vu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){Vu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:i,observers:o}=this;return r||i?bp:(this.currentObservers=null,o.push(e),new Bn(()=>{this.currentObservers=null,Hd(o,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){const e=new Ln;return e.source=this,e}}return t.create=(n,e)=>new Gd(n,e),t})();class Gd extends Di{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,n)}error(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==r?r:bp}}class Qe extends Di{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}function jr(t){return n=>{if(function Dp(t){return Mn(t?.lift)}(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Yr(t,n,e,r,i){return new mx(t,n,e,r,i)}class mx extends cl{constructor(n,e,r,i,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(u){n.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){n.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ii(t,n){return jr((e,r)=>{let i=0;e.subscribe(Yr(r,o=>{r.next(t.call(n,o,i++))}))})}const Xv="https://g.co/ng/security#xss";class ge extends Error{constructor(n,e){super(function Hu(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function cs(t){return{toString:t}.toString()}const ls="__parameters__";function Ku(t,n,e){return cs(()=>{const r=function Ip(t){return function(...e){if(t){const r=t(...e);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,l){const f=u.hasOwnProperty(ls)?u[ls]:Object.defineProperty(u,ls,{value:[]})[ls];for(;f.length<=l;)f.push(null);return(f[l]=f[l]||[]).push(s),u}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const kt=globalThis;function Ht(t){for(let n in t)if(t[n]===Ht)return n;throw Error("Could not find renamed property on target object.")}function tr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(tr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Sp(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const $v=Ht({__forward_ref__:Ht});function Kd(t){return t.__forward_ref__=Kd,t.toString=function(){return tr(this())},t}function Ye(t){return function Qd(t){return"function"==typeof t&&t.hasOwnProperty($v)&&t.__forward_ref__===Kd}(t)?t():t}function tt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Si(t){return{providers:t.providers||[],imports:t.imports||[]}}function Yd(t){return ry(t,Xd)||ry(t,iy)}function ry(t,n){return t.hasOwnProperty(n)?t[n]:null}function Yu(t){return t&&(t.hasOwnProperty(Rp)||t.hasOwnProperty(Tx))?t[Rp]:null}const Xd=Ht({\u0275prov:Ht}),Rp=Ht({\u0275inj:Ht}),iy=Ht({ngInjectableDef:Ht}),Tx=Ht({ngInjectorDef:Ht});class ke{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=tt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function nr(t){return t&&!!t.\u0275providers}const Xu=Ht({\u0275cmp:Ht}),Wa=Ht({\u0275dir:Ht}),hl=Ht({\u0275pipe:Ht}),Jd=Ht({\u0275mod:Ht}),Yn=Ht({\u0275fac:Ht}),Ju=Ht({__NG_ELEMENT_ID__:Ht}),Op=Ht({__NG_ENV_ID__:Ht});function nt(t){return"string"==typeof t?t:null==t?"":String(t)}function Np(t,n){throw new ge(-201,!1)}var Dt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Dt||{});let Bo;function pl(){return Bo}function zr(t){const n=Bo;return Bo=t,n}function un(t,n,e){const r=Yd(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&Dt.Optional?null:void 0!==n?n:void Np()}const gl={},ml="__NG_DI_FLAG__",Zd="ngTempTokenPath",Ox=/\n/gm,vl="__source";let co;function fs(t){const n=co;return co=t,n}function cy(t,n=Dt.Default){if(void 0===co)throw new ge(-203,!1);return null===co?un(t,void 0,n):co.get(t,n&Dt.Optional?null:void 0,n)}function je(t,n=Dt.Default){return(pl()||cy)(Ye(t),n)}function qe(t,n=Dt.Default){return je(t,ef(n))}function ef(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function yl(t){const n=[];for(let e=0;e<t.length;e++){const r=Ye(t[e]);if(Array.isArray(r)){if(0===r.length)throw new ge(900,!1);let i,o=Dt.Default;for(let s=0;s<r.length;s++){const a=r[s],u=Fx(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}n.push(je(i,o))}else n.push(je(r))}return n}function qa(t,n){return t[ml]=n,t.prototype[ml]=n,t}function Fx(t){return t[ml]}const Ga=qa(Ku("Optional"),8),tf=qa(Ku("SkipSelf"),4);function Ka(t,n){return t.hasOwnProperty(Yn)?t[Yn]:null}function Zu(t,n){t.forEach(e=>Array.isArray(e)?Zu(e,n):n(e))}function Qa(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function nf(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Ri(t,n,e){let r=$u(t,n);return r>=0?t[1|r]=e:(r=~r,function hs(t,n,e,r){let i=t.length;if(i==n)t.push(e,r);else if(1===i)t.push(r,t[0]),t[0]=e;else{for(i--,t.push(t[i-1],t[i]);i>n;)t[i]=t[i-2],i--;t[n]=e,t[n+1]=r}}(t,r,n,e)),r}function Lp(t,n){const e=$u(t,n);if(e>=0)return t[1|e]}function $u(t,n){return function Gi(t,n,e){let r=0,i=t.length>>e;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<e];if(n===s)return o<<e;s>n?i=o:r=o+1}return~(i<<e)}(t,n,1)}const lo={},Rt=[],ec=new ke(""),fy=new ke("",-1),Up=new ke("");class sf{get(n,e=gl){if(e===gl){const r=new Error(`NullInjectorError: No provider for ${tr(n)}!`);throw r.name="NullInjectorError",r}return e}}var Ya=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ya||{}),K=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(K||{}),ae=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ae||{});function ie(t,n,e){let r=t.length;for(;;){const i=t.indexOf(n,e);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}e=i+1}}function Se(t,n,e){let r=0;for(;r<e.length;){const i=e[r];if("number"==typeof i){if(0!==i)break;r++;const o=e[r++],s=e[r++],a=e[r++];t.setAttribute(n,s,a,o)}else{const o=i,s=e[++r];Ot(o)?t.setProperty(n,o,s):t.setAttribute(n,o,s),r++}}return r}function it(t){return 3===t||4===t||6===t}function Ot(t){return 64===t.charCodeAt(0)}function _n(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?e=i:0===e||$t(t,e,i,null,-1===e||2===e?n[++r]:null)}}return t}function $t(t,n,e,r,i){let o=0,s=t.length;if(-1===n)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,n),o=s+1),t.splice(o++,0,e),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const af="ng-template";function jx(t,n,e,r){let i=0;if(r){for(;i<n.length&&"string"==typeof n[i];i+=2)if("class"===n[i]&&-1!==ie(n[i+1].toLowerCase(),e,0))return!0}else if(oi(t))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&"string"==typeof(o=n[i]);)if(o.toLowerCase()===e)return!0}return!1}function oi(t){return 4===t.type&&t.value!==af}function uf(t,n,e){return n===(4!==t.type||e?t.value:af)}function zx(t,n,e){let r=4;const i=t.attrs,o=null!==i?function Vx(t){for(let n=0;n<t.length;n++)if(it(t[n]))return n;return t.length}(i):0;let s=!1;for(let a=0;a<n.length;a++){const u=n[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!uf(t,u,e)||""===u&&1===n.length){if(Vr(r))return!1;s=!0}}else if(8&r){if(null===i||!jx(t,i,u,e)){if(Vr(r))return!1;s=!0}}else{const c=n[++a],l=cf(u,i,oi(t),e);if(-1===l){if(Vr(r))return!1;s=!0;continue}if(""!==c){let f;if(f=l>o?"":i[l+1].toLowerCase(),2&r&&c!==f){if(Vr(r))return!1;s=!0}}}}else{if(!s&&!Vr(r)&&!Vr(u))return!1;if(s&&Vr(u))continue;s=!1,r=u|1&r}}return Vr(r)||s}function Vr(t){return!(1&t)}function cf(t,n,e,r){if(null===n)return-1;let i=0;if(r||!e){let o=!1;for(;i<n.length;){const s=n[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=n[++i];for(;"string"==typeof a;)a=n[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function hy(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const r=t[e];if("number"==typeof r)return-1;if(r===n)return e;e++}return-1}(n,t)}function Al(t,n,e=!1){for(let r=0;r<n.length;r++)if(zx(t,n[r],e))return!0;return!1}function lf(t,n){e:for(let e=0;e<n.length;e++){const r=n[e];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function py(t,n){return t?":not("+n.trim()+")":n}function Wx(t){let n=t[0],e=1,r=2,i="",o=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&r){const a=t[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Vr(s)&&(n+=py(o,i),i=""),r=s,o=o||!Vr(r);e++}return""!==i&&(n+=py(o,i)),n}function bt(t){return cs(()=>{const n=my(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ya.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||K.Emulated,styles:t.styles||Rt,_:null,schemas:t.schemas||null,tView:null,id:""};vy(e);const r=t.dependencies;return e.directiveDefs=Xa(r,!1),e.pipeDefs=Xa(r,!0),e.id=function zp(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of e)n=Math.imul(31,n)+i.charCodeAt(0)|0;return n+=2147483648,"c"+n}(e),e})}function ff(t){return ht(t)||En(t)}function gy(t){return null!==t}function si(t){return cs(()=>({type:t.type,bootstrap:t.bootstrap||Rt,declarations:t.declarations||Rt,imports:t.imports||Rt,exports:t.exports||Rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function jp(t,n){if(null==t)return lo;const e={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a=ae.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),n?(e[o]=a!==ae.None?[r,a]:r,n[o]=s):e[o]=r}return e}function ai(t){return cs(()=>{const n=my(t);return vy(n),n})}function gn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ht(t){return t[Xu]||null}function En(t){return t[Wa]||null}function Dn(t){return t[hl]||null}function my(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||lo,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Rt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jp(t.inputs,n),outputs:jp(t.outputs),debugInfo:null}}function vy(t){t.features?.forEach(n=>n(t))}function Xa(t,n){if(!t)return null;const e=n?Dn:ff;return()=>("function"==typeof t?t():t).map(r=>e(r)).filter(gy)}function yy(...t){return{\u0275providers:Vp(0,t),\u0275fromNgModule:!0}}function Vp(t,...n){const e=[],r=new Set;let i;const o=s=>{e.push(s)};return Zu(n,s=>{const a=s;Rn(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&wy(i,o),e}function wy(t,n){for(let e=0;e<t.length;e++){const{ngModule:r,providers:i}=t[e];Wp(i,o=>{n(o,r)})}}function Rn(t,n,e,r){if(!(t=Ye(t)))return!1;let i=null,o=Yu(t);const s=!o&&ht(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=Yu(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)Rn(c,n,e,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Zu(o.imports,l=>{Rn(l,n,e,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&wy(c,n)}if(!a){const c=Ka(i)||(()=>new i);n({provide:i,useFactory:c,deps:Rt},i),n({provide:Up,useValue:i,multi:!0},i),n({provide:ec,useValue:()=>je(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const c=t;Wp(u,l=>{n(l,c)})}}}return i!==t&&void 0!==t.providers}function Wp(t,n){for(let e of t)nr(e)&&(e=e.\u0275providers),Array.isArray(e)?Wp(e,n):n(e)}const qx=Ht({provide:String,useValue:Ht});function pf(t){return null!==t&&"object"==typeof t&&qx in t}function fo(t){return"function"==typeof t}const Js=new ke(""),Zs={},Cl={};let tc;function ps(){return void 0===tc&&(tc=new sf),tc}class ho{}class nc extends ho{get destroyed(){return this._destroyed}constructor(n,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ic(n,s=>this.processProvider(s)),this.records.set(fy,Uo(void 0,this)),i.has("environment")&&this.records.set(ho,Uo(void 0,this));const o=this.records.get(Js);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Up,Rt,Dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=ct(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ct(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=fs(this),r=zr(void 0);try{return n()}finally{fs(e),zr(r)}}get(n,e=gl,r=Dt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Op))return n[Op](this);r=ef(r);const o=fs(this),s=zr(void 0);try{if(!(r&Dt.SkipSelf)){let u=this.records.get(n);if(void 0===u){const c=function rc(t){return"function"==typeof t||"object"==typeof t&&t instanceof ke}(n)&&Yd(n);u=c&&this.injectableDefInScope(c)?Uo(qp(n),Zs):null,this.records.set(n,u)}if(null!=u)return this.hydrate(n,u)}return(r&Dt.Self?ps():this.parent).get(n,e=r&Dt.Optional&&e===gl?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Zd]=a[Zd]||[]).unshift(tr(n)),o)throw a;return function ly(t,n,e,r){const i=t[Zd];throw n[vl]&&i.unshift(n[vl]),t.message=function Mi(t,n,e,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=tr(n);if(Array.isArray(n))i=n.map(tr).join(" -> ");else if("object"==typeof n){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):tr(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${t.replace(Ox,"\n  ")}`}("\n"+t.message,i,e,r),t.ngTokenPath=i,t[Zd]=null,t}(a,n,"R3InjectorError",this.source)}throw a}finally{zr(s),fs(o)}}resolveInjectorInitializers(){const n=ct(null),e=fs(this),r=zr(void 0);try{const o=this.get(ec,Rt,Dt.Self);for(const s of o)s()}finally{fs(e),zr(r),ct(n)}}toString(){const n=[],e=this.records;for(const r of e.keys())n.push(tr(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(n){let e=fo(n=Ye(n))?n:Ye(n&&n.provide);const r=function Kx(t){return pf(t)?Uo(void 0,t.useValue):Uo(function _l(t,n,e){let r;if(fo(t)){const i=Ye(t);return Ka(i)||qp(i)}if(pf(t))r=()=>Ye(t.useValue);else if(function gf(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...yl(t.deps||[]));else if(function by(t){return!(!t||!t.useExisting)}(t))r=()=>je(Ye(t.useExisting));else{const i=Ye(t&&(t.useClass||t.provide));if(!function Ay(t){return!!t.deps}(t))return Ka(i)||qp(i);r=()=>new i(...yl(t.deps))}return r}(t),Zs)}(n);if(!fo(n)&&!0===n.multi){let i=this.records.get(e);i||(i=Uo(void 0,Zs,!0),i.factory=()=>yl(i.multi),this.records.set(e,i)),e=n,i.multi.push(n)}this.records.set(e,r)}hydrate(n,e){const r=ct(null);try{return e.value===Zs&&(e.value=Cl,e.value=e.factory()),"object"==typeof e.value&&e.value&&function S(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ct(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Ye(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function qp(t){const n=Yd(t),e=null!==n?n.factory:Ka(t);if(null!==e)return e;if(t instanceof ke)throw new ge(204,!1);if(t instanceof Function)return function Gx(t){if(t.length>0)throw new ge(204,!1);const e=function Sx(t){return t&&(t[Xd]||t[iy])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new ge(204,!1)}function Uo(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function ic(t,n){for(const e of t)Array.isArray(e)?ic(e,n):e&&nr(e)?ic(e.\u0275providers,n):n(e)}const mn=0,be=1,We=2,Un=3,po=4,kn=5,ki=6,sc=7,It=8,Dr=9,go=10,et=11,Dl=12,Cy=13,Za=14,vn=15,Il=16,ac=17,mo=18,ms=19,Sl=20,$s=21,Tl=22,$a=23,Ke=25,Ml=1,jn=7,eu=9,Pn=10;var tu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(tu||{});function In(t){return Array.isArray(t)&&"object"==typeof t[Ml]}function Ir(t){return Array.isArray(t)&&!0===t[Ml]}function Kp(t){return!!(4&t.flags)}function jo(t){return t.componentOffset>-1}function yf(t){return!(1&~t.flags)}function Qi(t){return!!t.template}function ir(t){return!!(512&t[We])}class Ty{constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function My(t,n,e,r){null!==n?n.applyValueToInputSignal(n,r):t[e]=r}function nu(){return xf}function xf(t){return t.type.prototype.ngOnChanges&&(t.setInput=Yp),iC}function iC(){const t=Jp(this),n=t?.current;if(n){const e=t.previous;if(e===lo)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function Yp(t,n,e,r,i){const o=this.declaredInputs[r],s=Jp(t)||function Ry(t,n){return t[Xp]=n}(t,{previous:lo,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new Ty(c&&c.currentValue,e,u===lo),My(t,n,i,e)}nu.ngInherit=!0;const Xp="__ngSimpleChanges__";function Jp(t){return t[Xp]||null}const yo=function(t,n,e){};let $p=!1;function Gt(t){for(;Array.isArray(t);)t=t[mn];return t}function kl(t,n){return Gt(n[t])}function Sr(t,n){return Gt(n[t.index])}function Pl(t,n){return t.data[n]}function lc(t,n){return t[n]}function Tr(t,n){const e=n[t];return In(e)?e:e[mn]}function eg(t){return!(128&~t[We])}function zn(t,n){return null==n?null:t[n]}function Ny(t){t[ac]=0}function Cf(t){1024&t[We]||(t[We]|=1024,eg(t)&&Mr(t))}function Ef(t){return!!(9216&t[We]||t[$a]?.dirty)}function Df(t){t[go].changeDetectionScheduler?.notify(1),Ef(t)?Mr(t):64&t[We]&&(function sC(){return $p}()?(t[We]|=1024,Mr(t)):t[go].changeDetectionScheduler?.notify())}function Mr(t){t[go].changeDetectionScheduler?.notify();let n=ea(t);for(;null!==n&&!(8192&n[We])&&(n[We]|=8192,eg(n));)n=ea(n)}function wo(t,n){if(!(256&~t[We]))throw new ge(911,!1);null===t[$s]&&(t[$s]=[]),t[$s].push(n)}function ea(t){const n=t[Un];return Ir(n)?n[Un]:n}const Xe={lFrame:ug(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ys(){return Xe.bindingsEnabled}function dc(){return null!==Xe.skipHydrationRootTNode}function le(){return Xe.lFrame.lView}function xt(){return Xe.lFrame.tView}function ee(t){return Xe.lFrame.contextLView=t,t[It]}function te(t){return Xe.lFrame.contextLView=null,t}function Kt(){let t=og();for(;null!==t&&64===t.type;)t=t.parent;return t}function og(){return Xe.lFrame.currentTNode}function Sn(t,n){const e=Xe.lFrame;e.currentTNode=t,e.isParent=n}function Xi(){return Xe.lFrame.isParent}function sg(){Xe.lFrame.isParent=!1}function Hr(){const t=Xe.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Ji(){return Xe.lFrame.bindingIndex++}function Vy(t,n){const e=Xe.lFrame;e.bindingIndex=e.bindingRootIndex=t,hc(n)}function hc(t){Xe.lFrame.currentDirectiveIndex=t}function pc(){return Xe.lFrame.currentQueryIndex}function gc(t){Xe.lFrame.currentQueryIndex=t}function Sf(t){const n=t[be];return 2===n.type?n.declTNode:1===n.type?t[kn]:null}function Hy(t,n,e){if(e&Dt.SkipSelf){let i=n,o=t;for(;!(i=i.parent,null!==i||e&Dt.Host||(i=Sf(o),null===i||(o=o[Za],10&i.type))););if(null===i)return!1;n=i,t=o}const r=Xe.lFrame=Fl();return r.currentTNode=n,r.lView=t,!0}function Tf(t){const n=Fl(),e=t[be];Xe.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Fl(){const t=Xe.lFrame,n=null===t?null:t.child;return null===n?ug(t):n}function ug(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Mf(){const t=Xe.lFrame;return Xe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const qy=Mf;function Rf(){const t=Mf();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Rr(){return Xe.lFrame.selectedIndex}function na(t){Xe.lFrame.selectedIndex=t}let Pf=!0;function iu(){return Pf}function Pi(t){Pf=t}function Ge(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){const o=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-e,s),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),u&&(t.viewHooks??=[]).push(-e,u),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),null!=l&&(t.destroyHooks??=[]).push(e,l)}}function ou(t,n,e){Ky(t,n,3,e)}function vc(t,n,e,r){(3&t[We])===e&&Ky(t,n,e,r)}function As(t,n){let e=t[We];(3&e)===n&&(e&=16383,e+=1,t[We]=e)}function Ky(t,n,e,r){const o=r??-1,s=n.length-1;let a=0;for(let u=void 0!==r?65535&t[ac]:0;u<s;u++)if("number"==typeof n[u+1]){if(a=n[u],null!=r&&a>=r)break}else n[u]<0&&(t[ac]+=65536),(a<o||-1==o)&&(Qy(t,e,n,u),t[ac]=(4294901760&t[ac])+u+2),u++}function Of(t,n){yo(4,t,n);const e=ct(null);try{n.call(t)}finally{ct(e),yo(5,t,n)}}function Qy(t,n,e,r){const i=e[r]<0,o=e[r+1],a=t[i?-e[r]:e[r]];i?t[We]>>14<t[ac]>>16&&(3&t[We])===n&&(t[We]+=16384,Of(a,o)):Of(a,o)}const Vn=-1;class Bl{constructor(n,e,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function bo(t){return t!==Vn}function or(t){return 32767&t}function Ll(t,n){let e=function cg(t){return t>>16}(t),r=n;for(;e>0;)r=r[Za],e--;return r}let Ul=!0;function Ff(t){const n=Ul;return Ul=t,n}const yc=255,lg=5;let Xy=0;const Vo={};function Bf(t,n){const e=fg(t,n);if(-1!==e)return e;const r=n[be];r.firstCreatePass&&(t.injectorIndex=n.length,dg(r.data,t),dg(n,null),dg(r.blueprint,null));const i=jl(t,n),o=t.injectorIndex;if(bo(i)){const s=or(i),a=Ll(i,n),u=a[be].data;for(let c=0;c<8;c++)n[o+c]=a[s+c]|u[s+c]}return n[o+8]=i,o}function dg(t,n){t.push(0,0,0,0,0,0,0,0,n)}function fg(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function jl(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,r=null,i=n;for(;null!==i;){if(r=$y(i),null===r)return Vn;if(e++,i=i[Za],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return Vn}function hg(t,n,e){!function gC(t,n,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(Ju)&&(r=e[Ju]),null==r&&(r=e[Ju]=Xy++);const i=r&yc;n.data[t+(i>>lg)]|=1<<i}(t,n,e)}function gg(t,n,e){if(e&Dt.Optional||void 0!==t)return t;Np()}function wc(t,n,e,r){if(e&Dt.Optional&&void 0===r&&(r=null),!(e&(Dt.Self|Dt.Host))){const i=t[Dr],o=zr(void 0);try{return i?i.get(n,r,e&Dt.Optional):un(n,r,e&Dt.Optional)}finally{zr(o)}}return gg(r,0,e)}function Lf(t,n,e,r=Dt.Default,i){if(null!==t){if(2048&n[We]&&!(r&Dt.Self)){const s=function yC(t,n,e,r,i){let o=t,s=n;for(;null!==o&&null!==s&&2048&s[We]&&!(512&s[We]);){const a=mg(o,s,e,r|Dt.Self,Vo);if(a!==Vo)return a;let u=o.parent;if(!u){const c=s[Sl];if(c){const l=c.get(e,Vo,r);if(l!==Vo)return l}u=$y(s),s=s[Za]}o=u}return i}(t,n,e,r,Vo);if(s!==Vo)return s}const o=mg(t,n,e,r,Vo);if(o!==Vo)return o}return wc(n,e,r,i)}function mg(t,n,e,r,i){const o=function Wo(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ju)?t[Ju]:void 0;return"number"==typeof n?n>=0?n&yc:mC:n}(e);if("function"==typeof o){if(!Hy(n,t,r))return r&Dt.Host?gg(i,0,r):wc(n,e,r,i);try{let s;if(s=o(r),null!=s||r&Dt.Optional)return s;Np()}finally{qy()}}else if("number"==typeof o){let s=null,a=fg(t,n),u=Vn,c=r&Dt.Host?n[vn][kn]:null;for((-1===a||r&Dt.SkipSelf)&&(u=-1===a?jl(t,n):n[a+8],u!==Vn&&Zy(r,!1)?(s=n[be],a=or(u),n=Ll(u,n)):a=-1);-1!==a;){const l=n[be];if(ia(o,a,l.data)){const f=Jy(a,n,e,s,r,c);if(f!==Vo)return f}u=n[a+8],u!==Vn&&Zy(r,n[be].data[a+8]===c)&&ia(o,a,n)?(s=l,a=or(u),n=Ll(u,n)):a=-1}}return i}function Jy(t,n,e,r,i,o){const s=n[be],a=s.data[t+8],l=su(a,s,e,null==r?jo(a)&&Ul:r!=s&&!!(3&a.type),i&Dt.Host&&o===a);return null!==l?ra(n,s,l,a):Vo}function su(t,n,e,r,i){const o=t.providerIndexes,s=n.data,a=1048575&o,u=t.directiveStart,l=o>>20,p=i?a+l:t.directiveEnd;for(let g=r?a:a+l;g<p;g++){const m=s[g];if(g<u&&e===m||g>=u&&m.type===e)return g}if(i){const g=s[u];if(g&&Qi(g)&&g.type===e)return u}return null}function ra(t,n,e,r){let i=t[e];const o=n.data;if(function fC(t){return t instanceof Bl}(i)){const s=i;s.resolving&&function Ti(t,n){throw n&&n.join(" > "),new ge(-200,t)}(function Pt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():nt(t)}(o[e]));const a=Ff(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?zr(s.injectImpl):null;Hy(t,r,Dt.Default);try{i=t[e]=s.factory(void 0,o,t,r),n.firstCreatePass&&e>=r.directiveStart&&function mc(t,n,e){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const s=xf(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}i&&(e.preOrderHooks??=[]).push(0-t,i),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}(e,o[e],n)}finally{null!==c&&zr(c),Ff(a),s.resolving=!1,qy()}}return i}function ia(t,n,e){return!!(e[n+(t>>lg)]&1<<t)}function Zy(t,n){return!(t&Dt.Self||t&Dt.Host&&n)}class sr{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return Lf(this._tNode,this._lView,n,ef(r),e)}}function mC(){return new sr(Kt(),le())}function $y(t){const n=t[be],e=n.type;return 2===e?n.declTNode:1===e?t[kn]:null}function s0(t,n=null,e=null,r){const i=a0(t,n,e,r);return i.resolveInjectorInitializers(),i}function a0(t,n=null,e=null,r,i=new Set){const o=[e||Rt,yy(t)];return r=r||("object"==typeof t?void 0:tr(t)),new nc(o,n||ps(),r||null,i)}let cn=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=gl;static#t=this.NULL=new sf;static create(e,r){if(Array.isArray(e))return s0({name:""},r,e,"");{const i=e.name??"";return s0({name:i},e.parent,e.providers,i)}}static#n=this.\u0275prov=tt({token:t,providedIn:"any",factory:()=>je(fy)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function jf(t){return t.ngOriginalError}class Ho{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&jf(n);for(;e&&jf(e);)e=jf(e);return e||null}}const c0=new ke("",{providedIn:"root",factory:()=>qe(Ho).handleError.bind(void 0)});let Ac=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=bg;static#t=this.__NG_ENV_ID__=e=>e}return t})();class _C extends Ac{constructor(n){super(),this._lView=n}onDestroy(n){return wo(this._lView,n),()=>function Ol(t,n){if(null===t[$s])return;const e=t[$s].indexOf(n);-1!==e&&t[$s].splice(e,1)}(this._lView,n)}}function bg(){return new _C(le())}function EC(){return xc(Kt(),le())}function xc(t,n){return new qo(Sr(t,n))}let qo=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=EC}return t})();function d0(t){return t instanceof qo?t.nativeElement:t}function Ag(t){return n=>{setTimeout(t,void 0,n)}}const Ie=class DC extends Di{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,function At(){return void 0!==pl()||null!=function Nx(){return co}()}()&&(this.destroyRef=qe(Ac,{optional:!0})??void 0)}emit(n){const e=ct(null);try{super.next(n)}finally{ct(e)}}subscribe(n,e,r){let i=n,o=e||(()=>null),s=r;if(n&&"object"==typeof n){const u=n;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Ag(o),i&&(i=Ag(i)),s&&(s=Ag(s)));const a=super.subscribe({next:i,error:o,complete:s});return n instanceof Bn&&n.add(a),a}};function IC(){return this._results[Symbol.iterator]()}class xg{static#e=Symbol.iterator;get changes(){return this._changes??=new Ie}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const e=xg.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=IC)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;const r=function ii(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Lx(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=n[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zf(t){return!(128&~t.flags)}const Vf=new Map;let TC=0;const Eg="__ngContext__";function ar(t,n){In(n)?(t[Eg]=n[ms],function RC(t){Vf.set(t[ms],t)}(n)):t[Eg]=n}function b0(t){return x0(t[Dl])}function A0(t){return x0(t[po])}function x0(t){for(;null!==t&&!Ir(t);)t=t[po];return t}let Ig;const ql=new ke("",{providedIn:"root",factory:()=>T0}),T0="ng",qf=new ke(""),xs=new ke("",{providedIn:"platform",factory:()=>"unknown"}),Sg=new ke(""),Tg=new ke("",{providedIn:"root",factory:()=>function oa(){if(void 0!==Ig)return Ig;if(typeof document<"u")return document;throw new ge(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Zi=()=>null;function Cs(t,n,e=!1){return Zi(t,n,e)}const R0=new ke("",{providedIn:"root",factory:()=>!1});let Qf,Sc;function Ic(t){return function jg(){if(void 0===Qf&&(Qf=null,kt.trustedTypes))try{Qf=kt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Qf}()?.createHTML(t)||t}function fi(t){return function zg(){if(void 0===Sc&&(Sc=null,kt.trustedTypes))try{Sc=kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Sc}()?.createScriptURL(t)||t}class $i{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xv})`}}class i_ extends $i{getTypeName(){return"HTML"}}class o_ extends $i{getTypeName(){return"Style"}}class s_ extends $i{getTypeName(){return"Script"}}class a_ extends $i{getTypeName(){return"URL"}}class u_ extends $i{getTypeName(){return"ResourceURL"}}function hi(t){return t instanceof $i?t.changingThisBreaksApplicationSecurity:t}function mr(t,n){const e=function dt(t){return t instanceof $i&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${Xv})`)}return e===n}class B0{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Ic(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class Xf{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=Ic(n),e}}const d_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Jf(t){return(t=String(t)).match(d_)?t:"unsafe:"+t}function Es(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Jl(...t){const n={};for(const e of t)for(const r in e)e.hasOwnProperty(r)&&(n[r]=!0);return n}const L0=Es("area,br,col,hr,img,wbr"),U0=Es("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),j0=Es("rp,rt"),Wg=Jl(L0,Jl(U0,Es("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jl(j0,Es("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jl(j0,U0)),Hg=Es("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zf=Jl(Hg,Es("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Es("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),f_=Es("script,style,template");class h_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,r=!0,i=[];for(;e;)if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild)i.push(e),e=pi(e);else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=vr(e);if(o){e=o;break}e=i.pop()}return this.buf.join("")}startElement(n){const e=V0(n).toLowerCase();if(!Wg.hasOwnProperty(e))return this.sanitizedSomething=!0,!f_.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const r=n.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!Zf.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;Hg[a]&&(u=Jf(u)),this.buf.push(" ",s,'="',q0(u),'"')}return this.buf.push(">"),!0}endElement(n){const e=V0(n).toLowerCase();Wg.hasOwnProperty(e)&&!L0.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(q0(n))}}function vr(t){const n=t.nextSibling;if(n&&t!==n.previousSibling)throw W0(n);return n}function pi(t){const n=t.firstChild;if(n&&function p_(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,n))throw W0(n);return n}function V0(t){const n=t.nodeName;return"string"==typeof n?n:"FORM"}function W0(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const g_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,H0=/([^\#-~ |!])/g;function q0(t){return t.replace(/&/g,"&amp;").replace(g_,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(H0,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $f;function G0(t,n){let e=null;try{$f=$f||function F0(t){const n=new Xf(t);return function l_(){try{return!!(new window.DOMParser).parseFromString(Ic(""),"text/html")}catch{return!1}}()?new B0(n):n}(t);let r=n?String(n):"";e=$f.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=e.innerHTML,e=$f.getInertBodyElement(r)}while(r!==o);return Ic((new h_).sanitizeChildren(eh(e)||e))}finally{if(e){const r=eh(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function eh(t){return"content"in t&&function m_(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var gi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(gi||{});function He(t){const n=Zl();return n?n.sanitize(gi.URL,t)||"":mr(t,"URL")?hi(t):Jf(nt(t))}function qg(t){const n=Zl();if(n)return fi(n.sanitize(gi.RESOURCE_URL,t)||"");if(mr(t,"ResourceURL"))return fi(hi(t));throw new ge(904,!1)}function Zl(){const t=le();return t&&t[go].sanitizer}const x_=/^>|^->|<!--|-->|--!>|<!-$/g,Q0=/(<|>)/g,Y0="\u200b$1\u200b";function Yg(t){return t.ownerDocument.defaultView}function $0(t){return t.ownerDocument}var Ko=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ko||{});let Xg;function Jg(t,n){return Xg(t,n)}function Mc(t,n,e,r,i){if(null!=r){let o,s=!1;Ir(r)?o=r:In(r)&&(s=!0,r=r[mn]);const a=Gt(r);0===t&&null!==e?null==i?lw(n,e,a):du(n,e,a,i||null,!0):1===t&&null!==e?du(n,e,a,i||null,!0):2===t?function d(t,n,e){const r=ih(t,n);r&&function L_(t,n,e,r){t.removeChild(n,e,r)}(t,r,n,e)}(n,a,s):3===t&&n.destroyNode(a),null!=o&&function L(t,n,e,r,i){const o=e[jn];o!==Gt(e)&&Mc(n,t,r,o,i);for(let a=Pn;a<e.length;a++){const u=e[a];x(u[be],u,t,n,r,o)}}(n,t,o,e,i)}}function ed(t,n){return t.createComment(function X0(t){return t.replace(x_,n=>n.replace(Q0,Y0))}(n))}function rh(t,n,e){return t.createElement(n,e)}function sw(t,n){n[go].changeDetectionScheduler?.notify(1),x(t,n,n[et],2,null,null)}function uw(t,n){const e=t[eu],r=e.indexOf(n);e.splice(r,1)}function lu(t,n){if(t.length<=Pn)return;const e=Pn+n,r=t[e];if(r){const i=r[Il];null!==i&&i!==t&&uw(i,r),n>0&&(t[e-1][po]=r[po]);const o=nf(t,Pn+n);!function k_(t,n){sw(t,n),n[mn]=null,n[kn]=null}(r[be],r);const s=o[mo];null!==s&&s.detachView(o[be]),r[Un]=null,r[po]=null,r[We]&=-129}return r}function Rc(t,n){if(!(256&n[We])){const e=n[et];e.destroyNode&&x(t,n,e,3,null,null),function aw(t){let n=t[Dl];if(!n)return Zg(t[be],t);for(;n;){let e=null;if(In(n))e=n[Dl];else{const r=n[Pn];r&&(e=r)}if(!e){for(;n&&!n[po]&&n!==t;)In(n)&&Zg(n[be],n),n=n[Un];null===n&&(n=t),In(n)&&Zg(n[be],n),e=n&&n[po]}n=e}}(n)}}function Zg(t,n){if(256&n[We])return;const e=ct(null);try{n[We]&=-129,n[We]|=256,n[$a]&&function La(t){if(Lu(t),Ua(t))for(let n=0;n<t.producerNode.length;n++)Qs(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(n[$a]),function B_(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let r=0;r<e.length;r+=2){const i=n[e[r]];if(!(i instanceof Bl)){const o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];yo(4,a,u);try{u.call(a)}finally{yo(5,a,u)}}else{yo(4,i,o);try{o.call(i)}finally{yo(5,i,o)}}}}}(t,n),function F_(t,n){const e=t.cleanup,r=n[sc];if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else e[o].call(r[e[o+1]]);null!==r&&(n[sc]=null);const i=n[$s];if(null!==i){n[$s]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,n),1===n[be].type&&n[et].destroy();const r=n[Il];if(null!==r&&Ir(n[Un])){r!==n[Un]&&uw(r,n);const i=n[mo];null!==i&&i.detachView(t)}!function kC(t){Vf.delete(t[ms])}(n)}finally{ct(e)}}function $g(t,n,e){return function cw(t,n,e){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return e[mn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===K.None||o===K.Emulated)return null}return Sr(r,e)}}(t,n.parent,e)}function du(t,n,e,r,i){t.insertBefore(n,e,r,i)}function lw(t,n,e){t.appendChild(n,e)}function dw(t,n,e,r,i){null!==r?du(t,n,e,r,i):lw(t,n,e)}function ih(t,n){return t.parentNode(n)}function fw(t,n,e){return pw(t,n,e)}let em,pw=function hw(t,n,e){return 40&t.type?Sr(t,e):null};function oh(t,n,e,r){const i=$g(t,r,n),o=n[et],a=fw(r.parent||n[kn],r,n);if(null!=i)if(Array.isArray(e))for(let u=0;u<e.length;u++)dw(o,i,e[u],a,!1);else dw(o,i,e,a,!1);void 0!==em&&em(o,r,n,e,i)}function td(t,n){if(null!==n){const e=n.type;if(3&e)return Sr(n,t);if(4&e)return tm(-1,t[n.index]);if(8&e){const r=n.child;if(null!==r)return td(t,r);{const i=t[n.index];return Ir(i)?tm(-1,i):Gt(i)}}if(32&e)return Jg(n,t)()||Gt(t[n.index]);{const r=mw(t,n);return null!==r?Array.isArray(r)?r[0]:td(ea(t[vn]),r):td(t,n.next)}}return null}function mw(t,n){return null!==n?t[vn][kn].projection[n.projection]:null}function tm(t,n){const e=Pn+t+1;if(e<n.length){const r=n[e],i=r[be].firstChild;if(null!==i)return td(r,i)}return n[jn]}function v(t,n,e,r,i,o,s){for(;null!=e;){const a=r[e.index],u=e.type;if(s&&0===n&&(a&&ar(Gt(a),r),e.flags|=2),32&~e.flags)if(8&u)v(t,n,e.child,r,i,o,!1),Mc(n,t,i,a,o);else if(32&u){const c=Jg(e,r);let l;for(;l=c();)Mc(n,t,i,l,o);Mc(n,t,i,a,o)}else 16&u?T(t,n,r,e,i,o):Mc(n,t,i,a,o);e=s?e.projectionNext:e.next}}function x(t,n,e,r,i,o){v(e,r,t.firstChild,n,i,o,!1)}function T(t,n,e,r,i,o){const s=e[vn],u=s[kn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Mc(n,t,i,u[c],o);else{let c=u;const l=s[Un];zf(r)&&(c.flags|=128),v(t,n,c,l,i,o,!0)}}function fe(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function he(t,n,e){const{mergedAttrs:r,classes:i,styles:o}=e;null!==r&&Se(t,n,r),null!==i&&fe(t,n,i),null!==o&&function Y(t,n,e){t.setAttribute(n,"style",e)}(t,n,o)}const ne={};function M(t=1){Ne(xt(),le(),Rr()+t,!1)}function Ne(t,n,e,r){if(!r)if(3&~n[We]){const o=t.preOrderHooks;null!==o&&vc(n,o,0,e)}else{const o=t.preOrderCheckHooks;null!==o&&ou(n,o,e)}na(e)}function ve(t,n=Dt.Default){const e=le();return null===e?je(t,n):Lf(Kt(),e,Ye(t),n)}function Je(t,n,e,r,i,o){const s=ct(null);try{let a=null;i&ae.SignalBased&&(a=n[r][Na]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&ae.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(n,o)),null!==t.setInput?t.setInput(n,a,o,e,r):My(n,a,r,o)}finally{ct(s)}}function wt(t,n,e,r,i,o,s,a,u,c,l){const f=n.blueprint.slice();return f[mn]=i,f[We]=204|r,(null!==c||t&&2048&t[We])&&(f[We]|=2048),Ny(f),f[Un]=f[Za]=t,f[It]=e,f[go]=s||t&&t[go],f[et]=a||t&&t[et],f[Dr]=u||t&&t[Dr]||null,f[kn]=o,f[ms]=function MC(){return TC++}(),f[ki]=l,f[Sl]=c,f[vn]=2==n.type?t[vn]:f,f}function yr(t,n,e,r,i){let o=t.data[n];if(null===o)o=function kr(t,n,e,r,i){const o=og(),s=Xi(),u=t.data[n]=function Vj(t,n,e,r,i,o){let s=n?n.injectorIndex:-1,a=0;return dc()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,n,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,n,e,r,i),function Nl(){return Xe.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=r,o.attrs=i;const s=function fc(){const t=Xe.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Sn(o,!0),o}function Pr(t,n,e,r){if(0===e)return-1;const i=n.length;for(let o=0;o<e;o++)n.push(r),t.blueprint.push(r),t.data.push(null);return i}function On(t,n,e,r,i){const o=Rr(),s=2&r;try{na(-1),s&&n.length>Ke&&Ne(t,n,Ke,!1),yo(s?2:0,i),e(r,i)}finally{na(o),yo(s?3:1,i)}}function Ni(t,n,e){if(Kp(n)){const r=ct(null);try{const o=n.directiveEnd;for(let s=n.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,e[s],s)}}finally{ct(r)}}}function Ao(t,n,e){ys()&&(function Yj(t,n,e,r){const i=e.directiveStart,o=e.directiveEnd;jo(e)&&function nz(t,n,e){const r=Sr(n,t),i=eM(e);let s=16;e.signals?s=4096:e.onPush&&(s=64);const a=vw(t,wt(t,i,null,s,r,n,null,t[go].rendererFactory.createRenderer(r,e),null,null,null));t[n.index]=a}(n,e,t.data[i+e.componentOffset]),t.firstCreatePass||Bf(e,n),ar(r,n);const s=e.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],c=ra(n,t,a,e);ar(c,n),null!==s&&rz(0,a-i,c,u,0,s),Qi(u)&&(Tr(e.index,n)[It]=ra(n,t,a,e))}}(t,n,e,Sr(e,n)),!(64&~e.flags)&&oM(t,n,e))}function sh(t,n,e=Sr){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?e(n,t):t[s];t[i++]=a}}}function eM(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=j_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function j_(t,n,e,r,i,o,s,a,u,c,l){const f=Ke+r,p=f+i,g=function Fj(t,n){const e=[];for(let r=0;r<n;r++)e.push(r<t?null:ne);return e}(f,p),m="function"==typeof c?c():c;return g[be]={type:t,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:n,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:m,incompleteFirstPass:!1,ssrId:l}}let tM=()=>null;function nM(t,n,e,r,i){for(let o in n){if(!n.hasOwnProperty(o))continue;const s=n[o];if(void 0===s)continue;r??={};let a,u=ae.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(null!==i){if(!i.hasOwnProperty(o))continue;c=i[o]}0===t?rM(r,e,c,a,u):rM(r,e,c,a)}return r}function rM(t,n,e,r,i){let o;t.hasOwnProperty(e)?(o=t[e]).push(n,r):o=t[e]=[n,r],void 0!==i&&o.push(i)}function z_(t,n,e,r){if(ys()){const i=null===r?null:{"":-1},o=function Jj(t,n){const e=t.directiveRegistry;let r=null,i=null;if(e)for(let o=0;o<e.length;o++){const s=e[o];if(Al(n,s.selectors,!1))if(r||(r=[]),Qi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),V_(t,n,a.length)}else r.unshift(s),V_(t,n,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,e);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&iM(t,n,e,s,i,a),i&&function Zj(t,n,e){if(n){const r=t.localNames=[];for(let i=0;i<n.length;i+=2){const o=e[n[i+1]];if(null==o)throw new ge(-301,!1);r.push(n[i],o)}}}(e,r,i)}e.mergedAttrs=_n(e.mergedAttrs,e.attrs)}function iM(t,n,e,r,i,o){for(let c=0;c<r.length;c++)hg(Bf(e,n),t,r[c].type);!function ez(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=Pr(t,n,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];e.mergedAttrs=_n(e.mergedAttrs,l.hostAttrs),tz(t,e,n,u,l),$j(u,l,i),null!==l.contentQueries&&(e.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(e.flags|=64);const f=l.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),a=!0),u++}!function Wj(t,n,e){const i=n.directiveEnd,o=t.data,s=n.attrs,a=[];let u=null,c=null;for(let l=n.directiveStart;l<i;l++){const f=o[l],p=e?e.get(f):null,m=p?p.outputs:null;u=nM(0,f.inputs,l,u,p?p.inputs:null),c=nM(1,f.outputs,l,c,m);const y=null===u||null===s||oi(n)?null:iz(u,l,s);a.push(y)}null!==u&&(u.hasOwnProperty("class")&&(n.flags|=8),u.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=u,n.outputs=c}(t,e,o)}function oM(t,n,e){const r=e.directiveStart,i=e.directiveEnd,o=e.index,s=function Wy(){return Xe.lFrame.currentDirectiveIndex}();try{na(o);for(let a=r;a<i;a++){const u=t.data[a],c=n[a];hc(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Xj(u,c)}}finally{na(-1),hc(s)}}function Xj(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function V_(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function $j(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;Qi(n)&&(e[""]=t)}}function tz(t,n,e,r,i){t.data[r]=i;const o=i.factory||(i.factory=Ka(i.type)),s=new Bl(o,Qi(i),ve);t.blueprint[r]=s,e[r]=s,function Kj(t,n,e,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~n.index;(function Qj(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,o)}}(t,n,r,Pr(t,e,i.hostVars,ne),i)}function rz(t,n,e,r,i,o){const s=o[n];if(null!==s)for(let a=0;a<s.length;)Je(r,e,s[a++],s[a++],s[a++],s[a++])}function iz(t,n,e){let r=null,i=0;for(;i<e.length;){const o=e[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===n){r.push(o,s[a+1],s[a+2],e[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function sM(t,n,e,r){return[t,!0,0,n,null,r,null,e,null,null]}function aM(t,n){const e=t.contentQueries;if(null!==e){const r=ct(null);try{for(let i=0;i<e.length;i+=2){const s=e[i+1];if(-1!==s){const a=t.data[s];gc(e[i]),a.contentQueries(2,n[s],s)}}}finally{ct(r)}}}function vw(t,n){return t[Dl]?t[Cy][po]=n:t[Dl]=n,t[Cy]=n,n}function H_(t,n,e){gc(0);const r=ct(null);try{n(t,e)}finally{ct(r)}}function uM(t){return t[sc]||(t[sc]=[])}function cM(t){return t.cleanup||(t.cleanup=[])}function yw(t,n){const e=t[Dr],r=e?e.get(Ho,null):null;r&&r.handleError(n)}function q_(t,n,e,r,i){for(let o=0;o<e.length;){const s=e[o++],a=e[o++],u=e[o++];Je(t.data[s],n[s],r,a,u,i)}}function oz(t,n){const e=Tr(n,t),r=e[be];!function sz(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(r,e);const i=e[mn];null!==i&&null===e[ki]&&(e[ki]=Cs(i,e[Dr])),G_(r,e,e[It])}function G_(t,n,e){Tf(n);try{const r=t.viewQuery;null!==r&&H_(1,r,e);const i=t.template;null!==i&&On(t,n,i,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[mo]?.finishViewCreation(t),t.staticContentQueries&&aM(t,n),t.staticViewQueries&&H_(2,t.viewQuery,e);const o=t.components;null!==o&&function az(t,n){for(let e=0;e<n.length;e++)oz(t,n[e])}(n,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[We]&=-5,Rf()}}function ah(t,n){return!n||null===n.firstChild||zf(t)}function rm(t,n,e,r=!0){const i=n[be];if(function O_(t,n,e,r){const i=Pn+r,o=e.length;r>0&&(e[i-1][po]=n),r<o-Pn?(n[po]=e[i],Qa(e,Pn+r,n)):(e.push(n),n[po]=null),n[Un]=e;const s=n[Il];null!==s&&e!==s&&function N_(t,n){const e=t[eu];n[vn]!==n[Un][Un][vn]&&(t[We]|=tu.HasTransplantedViews),null===e?t[eu]=[n]:e.push(n)}(s,n);const a=n[mo];null!==a&&a.insertView(t),Df(n),n[We]|=128}(i,n,t,e),r){const s=tm(e,t),a=n[et],u=ih(a,t[jn]);null!==u&&function P_(t,n,e,r,i,o){r[mn]=i,r[kn]=n,x(t,r,e,1,i,o)}(i,t[kn],a,n,u,s)}const o=n[ki];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function im(t,n,e,r,i=!1){for(;null!==e;){const o=n[e.index];null!==o&&r.push(Gt(o)),Ir(o)&&fM(o,r);const s=e.type;if(8&s)im(t,n,e.child,r);else if(32&s){const a=Jg(e,n);let u;for(;u=a();)r.push(u)}else if(16&s){const a=mw(n,e);if(Array.isArray(a))r.push(...a);else{const u=ea(n[vn]);im(u[be],u,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function fM(t,n){for(let e=Pn;e<t.length;e++){const r=t[e],i=r[be].firstChild;null!==i&&im(r[be],r,i,n)}t[jn]!==t[mn]&&n.push(t[jn])}let hM=[];const dz={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Mr(t.lView)},consumerOnSignalRead(){this.lView[$a]=this}},pM=100;function ww(t,n=!0,e=0){const r=t[go],i=r.rendererFactory;i.begin?.();try{!function fz(t,n){Q_(t,n);let e=0;for(;Ef(t);){if(e===pM)throw new ge(103,!1);e++,Q_(t,1)}}(t,e)}catch(s){throw n&&yw(t,s),s}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function hz(t,n,e,r){const i=n[We];if(!(256&~i))return;n[go].inlineEffectRunner?.flush(),Tf(n);let s=null,a=null;(function pz(t){return 2!==t.type})(t)&&(a=function uz(t){return t[$a]??function cz(t){const n=hM.pop()??Object.create(dz);return n.lView=t,n}(t)}(n),s=function uo(t){return t&&(t.nextProducerIndex=0),ct(t)}(a));try{Ny(n),function jy(t){return Xe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&On(t,n,e,2,r);const u=!(3&~i);if(u){const f=t.preOrderCheckHooks;null!==f&&ou(n,f,null)}else{const f=t.preOrderHooks;null!==f&&vc(n,f,0,null),As(n,0)}if(function gz(t){for(let n=b0(t);null!==n;n=A0(n)){if(!(n[We]&tu.HasTransplantedViews))continue;const e=n[eu];for(let r=0;r<e.length;r++){Cf(e[r])}}}(n),gM(n,0),null!==t.contentQueries&&aM(t,n),u){const f=t.contentCheckHooks;null!==f&&ou(n,f)}else{const f=t.contentHooks;null!==f&&vc(n,f,1),As(n,1)}!function Ct(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const i=e[r];if(i<0)na(~i);else{const o=i,s=e[++r],a=e[++r];Vy(s,o),a(2,n[o])}}}finally{na(-1)}}(t,n);const c=t.components;null!==c&&vM(n,c,0);const l=t.viewQuery;if(null!==l&&H_(2,l,r),u){const f=t.viewCheckHooks;null!==f&&ou(n,f)}else{const f=t.viewHooks;null!==f&&vc(n,f,2),As(n,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[Tl]){for(const f of n[Tl])f();n[Tl]=null}n[We]&=-73}catch(u){throw Mr(n),u}finally{null!==a&&(function Ba(t,n){if(ct(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ua(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)Qs(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(a,s),function lz(t){t.lView[$a]!==t&&(t.lView=null,hM.push(t))}(a)),Rf()}}function gM(t,n){for(let e=b0(t);null!==e;e=A0(e))for(let r=Pn;r<e.length;r++)mM(e[r],n)}function mz(t,n,e){mM(Tr(n,t),e)}function mM(t,n){eg(t)&&Q_(t,n)}function Q_(t,n){const r=t[be],i=t[We],o=t[$a];let s=!!(0===n&&16&i);if(s||=!!(64&i&&0===n),s||=!!(1024&i),s||=!(!o?.dirty||!Wi(o)),o&&(o.dirty=!1),t[We]&=-9217,s)hz(r,t,r.template,t[It]);else if(8192&i){gM(t,1);const a=r.components;null!==a&&vM(t,a,1)}}function vM(t,n,e){for(let r=0;r<n.length;r++)mz(t,n[r],e)}function om(t){for(t[go].changeDetectionScheduler?.notify();t;){t[We]|=64;const n=ea(t);if(ir(t)&&!n)return t;t=n}return null}class sm{get rootNodes(){const n=this._lView,e=n[be];return im(e,n,e.firstChild,[])}constructor(n,e,r=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[It]}set context(n){this._lView[It]=n}get destroyed(){return!(256&~this._lView[We])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Un];if(Ir(n)){const e=n[8],r=e?e.indexOf(this):-1;r>-1&&(lu(n,r),nf(e,r))}this._attachedToViewContainer=!1}Rc(this._lView[be],this._lView)}onDestroy(n){wo(this._lView,n)}markForCheck(){om(this._cdRefInjectingView||this._lView)}detach(){this._lView[We]&=-129}reattach(){Df(this._lView),this._lView[We]|=128}detectChanges(){this._lView[We]|=1024,ww(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,sw(this._lView[be],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=n,Df(this._lView)}}let hu=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=wz}return t})();const vz=hu,yz=class extends vz{constructor(n,e,r){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,r){const i=function nm(t,n,e,r){const i=ct(null);try{const o=n.tView,u=wt(t,o,e,4096&t[We]?4096:16,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[Il]=t[n.index];const l=t[mo];return null!==l&&(u[mo]=l.createEmbeddedView(o)),G_(o,u,e),u}finally{ct(i)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:r});return new sm(i)}};function wz(){return bw(Kt(),le())}function bw(t,n){return 4&t.type?new yz(n,t,xc(t,n)):null}class Ew{}class Wz{}class _M{}class qz{resolveComponentFactory(n){throw function Hz(t){const n=Error(`No component factory found for ${tr(t)}.`);return n.ngComponent=t,n}(n)}}let ch=(()=>{class t{static#e=this.NULL=new qz}return t})();class e1{}let Dw=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Gz(){const t=le(),e=Tr(Kt().index,t);return(In(e)?e:t)[et]}()}return t})(),Kz=(()=>{class t{static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:()=>null})}return t})();const t1={},DM=new Set;function IM(...t){}class tn{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ie(!1),this.onMicrotaskEmpty=new Ie(!1),this.onStable=new Ie(!1),this.onError=new Ie(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Qz(){const t="function"==typeof kt.requestAnimationFrame;let n=kt[t?"requestAnimationFrame":"setTimeout"],e=kt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Jz(t){const n=()=>{!function Xz(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(kt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,r1(t),t.isCheckStableRunning=!0,n1(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),r1(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,o,s,a)=>{if(function Zz(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(i,o,s,a);try{return SM(t),e.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&n(),TM(t)}},onInvoke:(e,r,i,o,s,a,u)=>{try{return SM(t),e.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&n(),TM(t)}},onHasTask:(e,r,i,o)=>{e.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,r1(t),n1(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,r,i,o)=>(e.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tn.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(tn.isInAngularZone())throw new ge(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,n,Yz,IM,IM);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}}const Yz={};function n1(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function r1(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function SM(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function TM(t){t._nesting--,n1(t)}class MM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ie,this.onMicrotaskEmpty=new Ie,this.onStable=new Ie,this.onError=new Ie}run(n,e,r){return n.apply(e,r)}runGuarded(n,e,r){return n.apply(e,r)}runOutsideAngular(n){return n()}runTask(n,e,r,i){return n.apply(e,r)}}let dm=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of e)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Sw(t,n,e){let r=e?t.styles:null,i=e?t.classes:null,o=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?o=a:1==o?i=Sp(i,a):2==o&&(r=Sp(r,a+": "+n[++s]+";"))}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=i:t.classesWithoutHost=i}class FM extends ch{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=ht(n);return new pm(e,this.ngModule)}}function BM(t){const n=[];for(const e in t){if(!t.hasOwnProperty(e))continue;const r=t[e];void 0!==r&&n.push({propName:Array.isArray(r)?r[0]:r,templateName:e})}return n}class Tw{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){r=ef(r);const i=this.injector.get(n,t1,r);return i!==t1||e===t1?i:this.parentInjector.get(n,e,r)}}class pm extends _M{get inputs(){const n=this.componentDef,e=n.inputTransforms,r=BM(n.inputs);if(null!==e)for(const i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return BM(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function Hx(t){return t.map(Wx).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,r,i){const o=ct(null);try{let s=(i=i||this.ngModule)instanceof ho?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new Tw(n,s):n,u=a.get(e1,null);if(null===u)throw new ge(407,!1);const c=a.get(Kz,null),p={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:a.get(dm,null),changeDetectionScheduler:a.get(Ew,null)},g=u.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",y=r?function Bj(t,n,e,r){const o=r.get(R0,!1)||e===K.ShadowDom,s=t.selectRootElement(n,o);return function Lj(t){tM(t)}(s),s}(g,r,this.componentDef.encapsulation,a):rh(g,m,function iV(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(m));let w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let b=null;null!==y&&(b=Cs(y,a,!0));const A=j_(0,null,null,1,0,null,null,null,null,null,null),C=wt(null,A,null,w,null,null,p,g,a,null,b);let _,E;Tf(C);try{const I=this.componentDef;let P,O=null;I.findHostDirectiveDefs?(P=[],O=new Map,I.findHostDirectiveDefs(I,P,O),P.push(I)):P=[I];const F=function sV(t,n){const e=t[be],r=Ke;return t[r]=n,yr(e,r,2,"#host",null)}(C,y),N=function aV(t,n,e,r,i,o,s){const a=i[be];!function uV(t,n,e,r){for(const i of t)n.mergedAttrs=_n(n.mergedAttrs,i.hostAttrs);null!==n.mergedAttrs&&(Sw(n,n.mergedAttrs,!0),null!==e&&he(r,e,n))}(r,t,n,s);let u=null;null!==n&&(u=Cs(n,i[Dr]));const c=o.rendererFactory.createRenderer(n,e);let l=16;e.signals?l=4096:e.onPush&&(l=64);const f=wt(i,eM(e),null,l,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&V_(a,t,r.length-1),vw(i,f),i[t.index]=f}(F,y,I,P,C,p,g);E=Pl(A,Ke),y&&function lV(t,n,e,r){if(r)Se(t,e,["ng-version","17.3.5"]);else{const{attrs:i,classes:o}=function df(t){const n=[],e=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&n.push(o,t[++r]):8===i&&e.push(o);else{if(!Vr(i))break;i=o}r++}return{attrs:n,classes:e}}(n.selectors[0]);i&&Se(t,e,i),o&&o.length>0&&fe(t,e,o.join(" "))}}(g,I,y,r),void 0!==e&&function dV(t,n,e){const r=t.projection=[];for(let i=0;i<n.length;i++){const o=e[i];r.push(null!=o?Array.from(o):null)}}(E,this.ngContentSelectors,e),_=function cV(t,n,e,r,i,o){const s=Kt(),a=i[be],u=Sr(s,i);iM(a,i,s,e,null,r);for(let l=0;l<e.length;l++)ar(ra(i,a,s.directiveStart+l,s),i);oM(a,i,s),u&&ar(u,i);const c=ra(i,a,s.directiveStart+s.componentOffset,s);if(t[It]=i[It]=c,null!==o)for(const l of o)l(c,n);return Ni(a,s,i),c}(N,I,P,O,C,[fV]),G_(A,C,null)}finally{Rf()}return new oV(this.componentType,_,xc(E,C),C,E)}finally{ct(o)}}}class oV extends Wz{constructor(n,e,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new sm(i,void 0,!1),this.componentType=n}setInput(n,e){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const o=this._rootLView;q_(o[be],o,i,n,e),this.previousInputValues.set(n,e),om(Tr(this._tNode.index,o))}}get injector(){return new sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function fV(){const t=Kt();Ge(le()[be],t)}let Qo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=hV}return t})();function hV(){return jM(Kt(),le())}const pV=Qo,LM=class extends pV{constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return xc(this._hostTNode,this._hostLView)}get injector(){return new sr(this._hostTNode,this._hostLView)}get parentInjector(){const n=jl(this._hostTNode,this._hostLView);if(bo(n)){const e=Ll(n,this._hostLView),r=or(n);return new sr(e[be].data[r+8],e)}return new sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=UM(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-Pn}createEmbeddedView(n,e,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=n.createEmbeddedViewImpl(e||{},o,null);return this.insertImpl(a,i,ah(this._hostTNode,null)),a}createComponent(n,e,r,i,o){const s=n&&!function El(t){return"function"==typeof t}(n);let a;if(s)a=e;else{const m=e||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}const u=s?n:new pm(ht(n)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const y=(s?c:this.parentInjector).get(ho,null);y&&(o=y)}ht(u.componentType??{});const g=u.create(c,i,null,o);return this.insertImpl(g.hostView,a,ah(this._hostTNode,null)),g}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,r){const i=n._lView;if(function aC(t){return Ir(t[Un])}(i)){const a=this.indexOf(n);if(-1!==a)this.detach(a);else{const u=i[Un],c=new LM(u,u[kn],u[Un]);c.detach(c.indexOf(n))}}const o=this._adjustIndex(e),s=this._lContainer;return rm(s,i,o,r),n.attachToViewContainerRef(),Qa(a1(s),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=UM(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),r=lu(this._lContainer,e);r&&(nf(a1(this._lContainer),e),Rc(r[be],r))}detach(n){const e=this._adjustIndex(n,-1),r=lu(this._lContainer,e);return r&&null!=nf(a1(this._lContainer),e)?new sm(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function UM(t){return t[8]}function a1(t){return t[8]||(t[8]=[])}function jM(t,n){let e;const r=n[t.index];return Ir(r)?e=r:(e=sM(r,n,null,t),n[t.index]=e,vw(n,e)),zM(e,n,t,r),new LM(e,t,n)}let zM=function WM(t,n,e,r){if(t[jn])return;let i;i=8&e.type?Gt(r):function gV(t,n){const e=t[et],r=e.createComment(""),i=Sr(n,t);return du(e,ih(e,i),r,function U_(t,n){return t.nextSibling(n)}(e,i),!1),r}(n,e),t[jn]=i},u1=()=>!1;class c1{constructor(n){this.queryList=n,this.matches=null}clone(){return new c1(this.queryList)}setDirty(){this.queryList.setDirty()}}class l1{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const r=null!==n.contentQueries?n.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){const s=e.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new l1(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==g1(n,e).matches&&this.queries[e].setDirty()}}class HM{constructor(n,e,r=null){this.flags=e,this.read=r,this.predicate="string"==typeof n?function CV(t){return t.split(",").map(n=>n.trim())}(n):n}}class d1{constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){const i=null!==e?e.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,null!==e?e.push(o):e=[o])}return null!==e?new d1(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class f1{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new f1(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const e=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(n,e,wV(e,o)),this.matchTNodeWithReadOption(n,e,su(e,n,o,!1,!1))}else r===hu?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,su(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===qo||i===Qo||i===hu&&4&e.type)this.addMatch(e.index,-2);else{const o=su(e,n,i,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function wV(t,n){const e=t.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1];return null}function AV(t,n,e,r){return-1===e?function bV(t,n){return 11&t.type?xc(t,n):4&t.type?bw(t,n):null}(n,t):-2===e?function xV(t,n,e){return e===qo?xc(n,t):e===hu?bw(n,t):e===Qo?jM(n,t):void 0}(t,n,r):ra(t,t[be],e,n)}function qM(t,n,e,r){const i=n[mo].queries[r];if(null===i.matches){const o=t.data,s=e.matches,a=[];for(let u=0;null!==s&&u<s.length;u+=2){const c=s[u];a.push(c<0?null:AV(n,o[c],s[u+1],e.metadata.read))}i.matches=a}return i.matches}function h1(t,n,e,r){const i=t.queries.getByIndex(e),o=i.matches;if(null!==o){const s=qM(t,n,i,e);for(let a=0;a<o.length;a+=2){const u=o[a];if(u>0)r.push(s[a/2]);else{const c=o[a+1],l=n[-u];for(let f=Pn;f<l.length;f++){const p=l[f];p[Il]===p[Un]&&h1(p[be],p,c,r)}if(null!==l[eu]){const f=l[eu];for(let p=0;p<f.length;p++){const g=f[p];h1(g[be],g,c,r)}}}}}return r}function KM(t,n,e){const r=xt();return r.firstCreatePass&&(function YM(t,n,e){null===t.queries&&(t.queries=new d1),t.queries.track(new f1(n,e))}(r,new HM(t,n,e),-1),!(2&~n)&&(r.staticViewQueries=!0)),function GM(t,n,e){const r=new xg(!(4&~e));return function zj(t,n,e,r){const i=uM(n);i.push(e),t.firstCreatePass&&cM(t).push(r,i.length-1)}(t,n,r,r.destroy),(n[mo]??=new l1).queries.push(new c1(r))-1}(r,le(),n)}function g1(t,n){return t.queries.getByIndex(n)}function XM(t,n){const e=t[be],r=g1(e,n);return r.crossesNgTemplate?h1(e,t,n,[]):qM(e,t,r,n)}class id{}class GV{}class v1 extends id{constructor(n,e,r){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new FM(this);const i=function Wr(t,n){const e=t[Jd]||null;if(!e&&!0===n)throw new Error(`Type ${tr(t)} does not have '\u0275mod' property.`);return e}(n);this._bootstrapComponents=function mi(t){return t instanceof Function?t():t}(i.bootstrap),this._r3Injector=a0(n,e,[{provide:id,useValue:this},{provide:ch,useValue:this.componentFactoryResolver},...r],tr(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class y1 extends GV{constructor(n){super(),this.moduleType=n}create(n){return new v1(this.moduleType,n,[])}}class gR extends id{constructor(n){super(),this.componentFactoryResolver=new FM(this),this.instance=null;const e=new nc([...n.providers,{provide:id,useValue:this},{provide:ch,useValue:this.componentFactoryResolver}],n.parent||ps(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}let od=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pw(t){return!!w1(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function w1(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ca(t,n,e){return t[n]=e}function ur(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function _e(t,n,e,r,i,o,s,a){const u=le(),c=xt(),l=t+Ke,f=c.firstCreatePass?function eW(t,n,e,r,i,o,s,a,u){const c=n.consts,l=yr(n,t,4,s||null,zn(c,a));z_(n,e,l,zn(c,u)),Ge(n,l);const f=l.tView=j_(2,l,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return null!==n.queries&&(n.queries.template(n,l),f.queries=n.queries.embeddedTView(l)),l}(l,c,u,n,e,r,i,o,s):c.data[l];Sn(f,!1);const p=vR(c,u,f,t);iu()&&oh(c,u,p,f),ar(p,u);const g=sM(p,u,p,f);return u[l]=g,vw(u,g),function VM(t,n,e){return u1(t,n,e)}(g,f,u),yf(f)&&Ao(c,u,f),null!=s&&sh(u,f,a),_e}let vR=function yR(t,n,e,r){return Pi(!0),n[et].createComment("")};function jw(t,n){return t<<17|n<<2}function Oc(t){return t>>17&32767}function T1(t){return 2|t}function ud(t){return(131068&t)>>2}function M1(t,n){return-131069&t|n<<2}function R1(t){return 1|t}function XR(t,n,e,r){const i=t[e+1],o=null===n;let s=r?Oc(i):ud(i),a=!1;for(;0!==s&&(!1===a||o);){const c=t[s+1];UW(t[s],n)&&(a=!0,t[s+1]=r?R1(c):T1(c)),s=r?Oc(c):ud(c)}a&&(t[e+1]=r?T1(i):R1(i))}function UW(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&$u(t,n)>=0}function U(t,n,e){const r=le();return ur(r,Ji(),n)&&function to(t,n,e,r,i,o,s,a){const u=Sr(n,e);let l,c=n.inputs;!a&&null!=c&&(l=c[r])?(q_(t,e,l,r,i),jo(n)&&function qj(t,n){const e=Tr(n,t);16&e[We]||(e[We]|=64)}(e,n.index)):3&n.type&&(r=function Hj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,n.value||"",r):i,o.setProperty(u,r,i))}(xt(),function rn(){const t=Xe.lFrame;return Pl(t.tView,t.selectedIndex)}(),r,t,n,r[et],e,!1),U}function k1(t,n,e,r,i){const s=i?"class":"style";q_(t,e,n.inputs[s],s,r)}function Xn(t,n,e){return Is(t,n,e,!1),Xn}function P1(t,n){return Is(t,n,null,!0),P1}function Is(t,n,e,r){const i=le(),o=xt(),s=function li(t){const n=Xe.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}(2);o.firstUpdatePass&&function ik(t,n,e,r){const i=t.data;if(null===i[e+1]){const o=i[Rr()],s=function rk(t,n){return n>=t.expandoStartIndex}(t,e);(function uk(t,n){return!!(t.flags&(n?8:16))})(o,r)&&null===n&&!s&&(n=!1),n=function QW(t,n,e,r){const i=function If(t){const n=Xe.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let o=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(e=Am(e=O1(null,t,n,e,r),n.attrs,r),o=null);else{const s=n.directiveStylingLast;if(-1===s||t[s]!==i)if(e=O1(i,t,n,e,r),null===o){let u=function YW(t,n,e){const r=e?n.classBindings:n.styleBindings;if(0!==ud(r))return t[Oc(r)]}(t,n,r);void 0!==u&&Array.isArray(u)&&(u=O1(null,t,n,u[1],r),u=Am(u,n.attrs,r),function XW(t,n,e,r){t[Oc(e?n.classBindings:n.styleBindings)]=r}(t,n,r,u))}else o=function JW(t,n,e){let r;const i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++)r=Am(r,t[o].hostAttrs,e);return Am(r,n.attrs,e)}(t,n,r)}return void 0!==o&&(r?n.residualClasses=o:n.residualStyles=o),e}(i,o,n,r),function BW(t,n,e,r,i,o){let s=o?n.classBindings:n.styleBindings,a=Oc(s),u=ud(s);t[r]=e;let l,c=!1;if(Array.isArray(e)?(l=e[1],(null===l||$u(e,l)>0)&&(c=!0)):l=e,i)if(0!==u){const p=Oc(t[a+1]);t[r+1]=jw(p,a),0!==p&&(t[p+1]=M1(t[p+1],r)),t[a+1]=function NW(t,n){return 131071&t|n<<17}(t[a+1],r)}else t[r+1]=jw(a,0),0!==a&&(t[a+1]=M1(t[a+1],r)),a=r;else t[r+1]=jw(u,0),0===a?a=r:t[u+1]=M1(t[u+1],r),u=r;c&&(t[r+1]=T1(t[r+1])),XR(t,l,r,!0),XR(t,l,r,!1),function LW(t,n,e,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof n&&$u(o,n)>=0&&(e[r+1]=R1(e[r+1]))}(n,l,t,r,o),s=jw(a,u),o?n.classBindings=s:n.styleBindings=s}(i,o,n,e,s,r)}}(o,t,s,r),n!==ne&&ur(i,s,n)&&function sk(t,n,e,r,i,o,s,a){if(!(3&n.type))return;const u=t.data,c=u[a+1],l=function FW(t){return!(1&~t)}(c)?ak(u,n,e,i,ud(c),s):void 0;zw(l)||(zw(o)||function OW(t){return!(2&~t)}(c)&&(o=ak(u,null,e,i,a,s)),function H(t,n,e,r,i){if(n)i?t.addClass(e,r):t.removeClass(e,r);else{let o=-1===r.indexOf("-")?void 0:Ko.DashCase;null==i?t.removeStyle(e,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ko.Important),t.setStyle(e,r,i,o))}}(r,s,kl(Rr(),e),i,o))}(o,o.data[Rr()],i,i[et],t,i[s+1]=function tH(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=tr(hi(t)))),t}(n,e),r,s)}function O1(t,n,e,r,i){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=n[a],r=Am(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(e.directiveStylingLast=a),r}function Am(t,n,e){const r=e?1:2;let i=-1;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ri(t,s,!!e||n[++o]))}return void 0===t?null:t}function ak(t,n,e,r,i,o){const s=null===n;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),l=c?u[1]:u,f=null===l;let p=e[i+1];p===ne&&(p=f?Rt:void 0);let g=f?Lp(p,r):l===r?p:void 0;if(c&&!zw(g)&&(g=Lp(u,r)),zw(g)&&(a=g,s))return a;const m=t[i+1];i=s?Oc(m):ud(m)}if(null!==n){let u=o?n.residualClasses:n.residualStyles;null!=u&&(a=Lp(u,r))}return a}function zw(t){return void 0!==t}function z(t,n,e,r){const i=le(),o=xt(),s=Ke+t,a=i[et],u=o.firstCreatePass?function _H(t,n,e,r,i,o){const s=n.consts,u=yr(n,t,2,r,zn(s,i));return z_(n,e,u,zn(s,o)),null!==u.attrs&&Sw(u,u.attrs,!1),null!==u.mergedAttrs&&Sw(u,u.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,u),u}(s,o,i,n,e,r):o.data[s],c=fk(o,i,u,a,n,t);i[s]=c;const l=yf(u);return Sn(u,!0),he(a,c,u),!function vm(t){return!(32&~t.flags)}(u)&&iu()&&oh(o,i,c,u),0===function By(){return Xe.lFrame.elementDepthCount}()&&ar(c,i),function ng(){Xe.lFrame.elementDepthCount++}(),l&&(Ao(o,i,u),Ni(o,u,i)),null!==r&&sh(i,u),z}function G(){let t=Kt();Xi()?sg():(t=t.parent,Sn(t,!1));const n=t;(function ta(t){return Xe.skipHydrationRootTNode===t})(n)&&function uC(){Xe.skipHydrationRootTNode=null}(),function rg(){Xe.lFrame.elementDepthCount--}();const e=xt();return e.firstCreatePass&&(Ge(e,t),Kp(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Yy(t){return!!(8&t.flags)}(n)&&k1(e,n,le(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function pC(t){return!!(16&t.flags)}(n)&&k1(e,n,le(),n.stylesWithoutHost,!1),G}function Fe(t,n,e,r){return z(t,n,e,r),G(),Fe}let fk=(t,n,e,r,i,o)=>(Pi(!0),rh(r,i,function kf(){return Xe.lFrame.currentNamespace}()));function Ae(t,n,e){const r=le(),i=xt(),o=t+Ke,s=i.firstCreatePass?function IH(t,n,e,r,i){const o=n.consts,s=zn(o,r),a=yr(n,t,8,"ng-container",s);return null!==s&&Sw(a,s,!0),z_(n,e,a,zn(o,i)),null!==n.queries&&n.queries.elementStart(n,a),a}(o,i,r,n,e):i.data[o];Sn(s,!0);const a=hk(i,r,s,t);return r[o]=a,iu()&&oh(i,r,a,s),ar(a,r),yf(s)&&(Ao(i,r,s),Ni(i,s,r)),null!=e&&sh(r,s),Ae}function xe(){let t=Kt();const n=xt();return Xi()?sg():(t=t.parent,Sn(t,!1)),n.firstCreatePass&&(Ge(n,t),Kp(t)&&n.queries.elementEnd(t)),xe}function Jn(t,n,e){return Ae(t,n,e),xe(),Jn}let hk=(t,n,e,r)=>(Pi(!0),ed(n[et],""));function Te(){return le()}const Sh="en-US";let yk=Sh;function me(t,n,e,r){const i=le(),o=xt(),s=Kt();return function z1(t,n,e,r,i,o,s){const a=yf(r),c=t.firstCreatePass&&cM(t),l=n[It],f=uM(n);let p=!0;if(3&r.type||s){const y=Sr(r,n),w=s?s(y):y,b=f.length,A=s?_=>s(Gt(_[r.index])):r.index;let C=null;if(!s&&a&&(C=function S5(t,n,e,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===e&&i[o+1]===r){const a=n[sc],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,n,i,r.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,p=!1;else{o=Gk(r,n,l,o,!1);const _=e.listen(w,i,o);f.push(o,_),c&&c.push(i,A,b,b+1)}}else o=Gk(r,n,l,o,!1);const g=r.outputs;let m;if(p&&null!==g&&(m=g[i])){const y=m.length;if(y)for(let w=0;w<y;w+=2){const E=n[m[w]][m[w+1]].subscribe(o),I=f.length;f.push(o,E),c&&c.push(i,r.index,I,-(I+1))}}}(o,i,i[et],s,t,n,r),me}function qk(t,n,e,r){const i=ct(null);try{return yo(6,n,e),!1!==e(r)}catch(o){return yw(t,o),!1}finally{yo(7,n,e),ct(i)}}function Gk(t,n,e,r,i){return function o(s){if(s===Function)return r;om(t.componentOffset>-1?Tr(t.index,n):n);let u=qk(n,e,r,s),c=o.__ngNextListenerFn__;for(;c;)u=qk(n,e,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function j(t=1){return function ws(t){return(Xe.lFrame.contextLView=function _f(t,n){for(;t>0;)n=n[Za],t--;return n}(t,Xe.lFrame.contextLView))[It]}(t)}function T5(t,n){let e=null;const r=function qt(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let i=0;i<n.length;i++){const o=n[i];if("*"!==o){if(null===r?Al(t,o,!0):lf(r,o))return i}else e=i}return e}function dr(t,n,e){KM(t,n,e)}function fr(t){const n=le(),e=xt(),r=pc();gc(r+1);const i=g1(e,r);if(t.dirty&&function Oy(t){return!(4&~t[We])}(n)===!(2&~i.metadata.flags)){if(null===i.matches)t.reset([]);else{const o=XM(n,r);t.reset(o,d0),t.notifyOnChanges()}return!0}return!1}function hr(){return function p1(t,n){return t[mo].queries[n].queryList}(le(),pc())}function gt(t){return lc(function cC(){return Xe.lFrame.contextLView}(),Ke+t)}function we(t,n=""){const e=le(),r=xt(),i=t+Ke,o=r.firstCreatePass?yr(r,i,1,n,null):r.data[i],s=hP(r,e,o,n,t);e[i]=s,iu()&&oh(r,e,s,o),Sn(o,!1)}let hP=(t,n,e,r,i)=>(Pi(!0),function $l(t,n){return t.createText(n)}(n[et],r));function nn(t){return Ts("",t,""),nn}function Ts(t,n,e){const r=le(),i=function yh(t,n,e,r){return ur(t,Ji(),e)?n+nt(e)+r:ne}(r,t,n,e);return i!==ne&&function fu(t,n,e){const r=kl(n,t);!function ow(t,n,e){t.setValue(n,e)}(t[et],r,e)}(r,Rr(),i),Ts}let Z5=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const r=Vp(0,e.type),i=r.length>0?function mR(t,n,e=null){return new gR({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=tt({token:t,providedIn:"environment",factory:()=>new t(je(ho))})}return t})();function pr(t){(function ua(t){DM.has(t)||(DM.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))})("NgStandalone"),t.getStandaloneInjector=n=>n.get(Z5).getOrCreateStandaloneInjector(t)}function Ms(t,n,e){const r=Hr()+t,i=le();return i[r]===ne?ca(i,r,e?n.call(e):n()):function mm(t,n){return t[n]}(i,r)}function Wn(t,n,e,r){return DP(le(),Hr(),t,n,e,r)}function K1(t,n,e,r,i){return function IP(t,n,e,r,i,o,s){const a=n+e;return function sd(t,n,e,r){const i=ur(t,n,e);return ur(t,n+1,r)||i}(t,a,i,o)?ca(t,a+2,s?r.call(s,i,o):r(i,o)):Sm(t,a+2)}(le(),Hr(),t,n,e,r,i)}function Sm(t,n){const e=t[n];return e===ne?void 0:e}function DP(t,n,e,r,i,o){const s=n+e;return ur(t,s,i)?ca(t,s+1,o?r.call(o,i):r(i)):Sm(t,s+1)}function Bt(t,n){const e=xt();let r;const i=t+Ke;e.firstCreatePass?(r=function u6(t,n){if(n)for(let e=n.length-1;e>=0;e--){const r=n[e];if(t===r.name)return r}}(n,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];const o=r.factory||(r.factory=Ka(r.type)),a=zr(ve);try{const u=Ff(!1),c=o();return Ff(u),function O5(t,n,e,r){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=r}(e,le(),i,c),c}finally{zr(a)}}function Lt(t,n,e){const r=t+Ke,i=le(),o=lc(i,r);return function Tm(t,n){return t[be].data[n].pure}(i,r)?DP(i,Hr(),n,o.transform,e,o):o.transform(e)}function Mt(t,n){return bw(t,n)}const XP=new ke(""),Xw=new ke("");let tE,$1=(()=>{class t{constructor(e,r,i){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,tE||(function sq(t){tE=t}(i),i.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e()},r)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(je(tn),je(eE),je(Xw))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})(),eE=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return tE?.findTestabilityInTree(this,e,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function nE(t){return!!t&&"function"==typeof t.then}function JP(t){return!!t&&"function"==typeof t.subscribe}const aq=new ke("");let rE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),this.appInits=qe(aq,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const i of this.appInits){const o=i();if(nE(o))e.push(o);else if(JP(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});e.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),0===e.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ZP=new ke("");function tO(t,n){return Array.isArray(n)?n.reduce(tO,t):{...t,...n}}let Nc=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qe(c0),this.afterRenderEffectManager=qe(dm),this.externalTestViews=new Set,this.beforeRender=new Di,this.afterTick=new Di,this.componentTypes=[],this.components=[],this.isStable=qe(od).hasPendingTasks.pipe(Ii(e=>!e)),this._injector=qe(ho)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,r){const i=e instanceof _M;if(!this._injector.get(rE).done)throw!i&&function Lo(t){const n=ht(t)||En(t)||Dn(t);return null!==n&&n.standalone}(e),new ge(405,!1);let s;s=i?e:this._injector.get(ch).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function uq(t){return t.isBoundToModule}(s)?void 0:this._injector.get(id),c=s.create(cn.NULL,[],r||s.selector,a),l=c.location.nativeElement,f=c.injector.get(XP,null);return f?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),Jw(this.components,c),f?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new ge(101,!1);const r=ct(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ct(r)}}detectChangesInAttachedViews(e){let r=0;const i=this.afterRenderEffectManager;for(;;){if(r===pM)throw new ge(103,!1);if(e){const o=0===r;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)lq(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>iE(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>iE(o))))break}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;Jw(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(ZP,[]);[...this._bootstrapListeners,...r].forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Jw(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new ge(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Jw(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function lq(t,n,e){!n&&!iE(t)||function dq(t,n,e){let r;e?(r=0,t[We]|=1024):r=64&t[We]?0:1,ww(t,n,r)}(t,e,n)}function iE(t){return Ef(t)}let gq=(()=>{class t{constructor(){this.zone=qe(tn),this.applicationRef=qe(Nc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mq(){const t=qe(tn),n=qe(Ho);return e=>t.runOutsideAngular(()=>n.handleError(e))}let yq=(()=>{class t{constructor(){this.subscription=new Bn,this.initialized=!1,this.zone=qe(tn),this.pendingTasks=qe(od)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{tn.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{tn.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const pu=new ke("",{providedIn:"root",factory:()=>qe(pu,Dt.Optional|Dt.SkipSelf)||function wq(){return typeof $localize<"u"&&$localize.locale||Sh}()}),oE=new ke("");let oO=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const i=function $z(t="zone.js",n){return"noop"===t?new MM:"zone.js"===t?new tn(n):t}(r?.ngZone,function iO(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function QV(t,n,e){return new v1(t,n,e)}(e.moduleType,this.injector,function rO(t){return[{provide:tn,useFactory:t},{provide:ec,multi:!0,useFactory:()=>{const n=qe(gq,{optional:!0});return()=>n.initialize()}},{provide:ec,multi:!0,useFactory:()=>{const n=qe(yq);return()=>{n.initialize()}}},{provide:c0,useFactory:mq}]}(()=>i)),s=o.injector.get(Ho,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{Jw(this._modules,o),a.unsubscribe()})}),function eO(t,n,e){try{const r=e();return nE(r)?r.catch(i=>{throw n.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(rE);return a.runInitializers(),a.donePromise.then(()=>(function wk(t){"string"==typeof t&&(yk=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(pu,Sh)||Sh),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,r=[]){const i=tO({},r);return function pq(t,n,e){const r=new y1(e);return Promise.resolve(r)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(e){const r=e.injector.get(Nc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new ge(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(oE,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(je(cn))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Fc=null;const sO=new ke("");function aO(t,n,e=[]){const r=`Platform: ${n}`,i=new ke(r);return(o=[])=>{let s=sE();if(!s||s.injector.get(sO,!1)){const a=[...e,...o,{provide:i,useValue:!0}];t?t(a):function xq(t){if(Fc&&!Fc.get(sO,!1))throw new ge(400,!1);(function $P(){!function zd(t){as=t}(()=>{throw new ge(600,!1)})})(),Fc=t;const n=t.get(oO);(function cO(t){t.get(qf,null)?.forEach(e=>e())})(t)}(function uO(t=[],n){return cn.create({name:n,providers:[{provide:Js,useValue:"platform"},{provide:oE,useValue:new Set([()=>Fc=null])},...t]})}(a,r))}return function Cq(t){const n=sE();if(!n)throw new ge(401,!1);return n}()}}function sE(){return Fc?.get(oO)??null}let km=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Eq}return t})();function Eq(t){return function Dq(t,n,e){if(jo(t)&&!e){const r=Tr(t.index,n);return new sm(r,r)}return 47&t.type?new sm(n[vn],n):null}(Kt(),le(),!(16&~t))}class pO{constructor(){}supports(n){return Pw(n)}create(n){return new Rq(n)}}const Mq=(t,n)=>n;class Rq{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Mq}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){const s=!r||e&&e.currentIndex<mO(r,i,o)?e:r,a=mO(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,l=u-i;if(c!=l){for(let p=0;p<c;p++){const g=p<o.length?o[p]:o[p]=0,m=g+p;l<=m&&m<c&&(o[p]=g+1)}o[s.previousIndex]=l-c}}a!==u&&n(s,a,u)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Pw(n))throw new ge(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,o,s,e=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)o=n[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),r=!0),e=e._next}else i=0,function ZV(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let r;for(;!(r=e.next()).done;)n(r.value)}}(n,a=>{s=this._trackByFn(i,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,i),r=!0),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,r,i){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,i)):n=this._addAfter(new kq(e,r),o,i),n}_verifyReinsertion(n,e,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,o=n._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,e,r),this._addToMoves(n,r),n}_moveAfter(n,e,r){return this._unlink(n),this._insertAfter(n,e,r),this._addToMoves(n,r),n}_addAfter(n,e,r){return this._insertAfter(n,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,r){const i=null===e?this._itHead:e._next;return n._next=i,n._prev=e,null===i?this._itTail=n:i._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new gO),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,r=n._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gO),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class kq{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Pq{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const e=n._prevDup,r=n._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class gO{constructor(){this.map=new Map}put(n){const e=n.trackById;let r=this.map.get(e);r||(r=new Pq,this.map.set(e,r)),r.add(n)}get(n,e){const i=this.map.get(n);return i?i.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mO(t,n,e){const r=t.previousIndex;if(null===r)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+n+i}class vO{constructor(){}supports(n){return n instanceof Map||w1(n)}create(){return new Oq}}class Oq{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||w1(n)))throw new ge(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,e);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new Nq(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}}class Nq{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yO(){return new dE([new pO])}let dE=(()=>{class t{static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:yO});constructor(e){this.factories=e}static create(e,r){if(null!=r){const i=r.factories.slice();e=e.concat(i)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||yO()),deps:[[t,new tf,new Ga]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(null!=r)return r;throw new ge(901,!1)}}return t})();function wO(){return new tb([new vO])}let tb=(()=>{class t{static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:wO});constructor(e){this.factories=e}static create(e,r){if(r){const i=r.factories.slice();e=e.concat(i)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||wO()),deps:[[t,new tf,new Ga]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(r)return r;throw new ge(901,!1)}}return t})();const Lq=aO(null,"core",[]);let Uq=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(r){return new(r||t)(je(Nc))};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({})}return t})();function zO(t){const n=ct(null);try{return t()}finally{ct(n)}}let VO=null;function pE(){return VO}class A8{}const fa=new ke("");function JO(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}const _E=/\s+/,ZO=[];let $O=(()=>{class t{constructor(e,r){this._ngEl=e,this._renderer=r,this.initialClasses=ZO,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(_E):ZO}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(_E):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){const i=this.stateMap.get(e);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(_E).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||t)(ve(qo),ve(Dw))};static#t=this.\u0275dir=ai({type:t,selectors:[["","ngClass",""]],inputs:{klass:[ae.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class u7{constructor(n,e,r,i){this.$implicit=n,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ph=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new u7(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),tN(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{tN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ve(Qo),ve(hu),ve(dE))};static#t=this.\u0275dir=ai({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function tN(t,n){t.context.$implicit=n.item}let gr=(()=>{class t{constructor(e,r){this._viewContainer=e,this._context=new c7,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){nN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){nN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ve(Qo),ve(hu))};static#t=this.\u0275dir=ai({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class c7{constructor(){this.$implicit=null,this.ngIf=null}}function nN(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${tr(n)}'.`)}class EE{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let yb=(()=>{class t{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=ai({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return t})(),rN=(()=>{class t{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new EE(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(r){return new(r||t)(ve(Qo),ve(hu),ve(yb,9))};static#t=this.\u0275dir=ai({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return t})(),Oh=(()=>{class t{constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[i,o]=e.split("."),s=-1===i.indexOf("-")?void 0:Ko.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static#e=this.\u0275fac=function(r){return new(r||t)(ve(qo),ve(tb),ve(Dw))};static#t=this.\u0275dir=ai({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return t})(),Fm=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(e,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static#e=this.\u0275fac=function(r){return new(r||t)(ve(Qo))};static#t=this.\u0275dir=ai({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[nu]})}return t})();class h7{createSubscription(n,e){return zO(()=>n.subscribe({next:e,error:r=>{throw r}}))}dispose(n){zO(()=>n.unsubscribe())}}class p7{createSubscription(n,e){return n.then(e,r=>{throw r})}dispose(n){}}const g7=new p7,m7=new h7;let Zo=(()=>{class t{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(nE(e))return g7;if(JP(e))return m7;throw function ks(t,n){return new ge(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(ve(km,16))};static#t=this.\u0275pipe=gn({name:"async",type:t,pure:!1,standalone:!0})}return t})(),Zn=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({})}return t})();const sN="browser";function Nh(t){return t===sN}function aN(t){return"server"===t}class uN{}class dG extends A8{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class TE extends dG{static makeCurrent(){!function b8(t){VO??=t}(new TE)}onAndCancel(n,e,r){return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function fG(){return Um=Um||document.querySelector("base"),Um?Um.getAttribute("href"):null}();return null==e?null:function hG(t){return new URL(t,document.baseURI).pathname}(e)}resetBaseElement(){Um=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return JO(document.cookie,n)}}let Um=null,gG=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();const ME=new ke("");let vN=(()=>{class t{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new ge(5101,!1);return this._eventNameToPlugin.set(e,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(je(ME),je(tn))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();class yN{constructor(n){this._doc=n}}const RE="ng-app-id";let wN=(()=>{class t{constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=aN(o),this.resetHostNodes()}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.elements?.forEach(i=>i.remove()),r.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${RE}="${this.appId}"]`);if(e?.length){const r=new Map;return e.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(e,r){const i=this.styleRef;if(i.has(e)){const o=i.get(e);return o.usage+=r,o.usage}return i.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===e)return i.delete(r),o.removeAttribute(RE),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(RE,this.appId),e.appendChild(s),s}}addStyleToHost(e,r){const i=this.getStyleElement(e,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(je(fa),je(ql),je(Tg,8),je(xs))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();const kE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},PE=/%COMP%/g,wG=new ke("",{providedIn:"root",factory:()=>!0});function AN(t,n){return n.map(e=>e.replace(PE,t))}let OE=(()=>{class t{constructor(e,r,i,o,s,a,u,c=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=aN(a),this.defaultRenderer=new NE(e,s,u,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===K.ShadowDom&&(r={...r,encapsulation:K.Emulated});const i=this.getOrCreateRenderer(e,r);return i instanceof CN?i.applyToHost(e):i instanceof FE&&i.applyStyles(),i}getOrCreateRenderer(e,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case K.Emulated:o=new CN(u,c,r,this.appId,l,s,a,f);break;case K.ShadowDom:return new CG(u,c,e,r,s,a,this.nonce,f);default:o=new FE(u,c,r,l,s,a,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(je(vN),je(wN),je(ql),je(wG),je(fa),je(xs),je(tn),je(Tg))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();class NE{constructor(n,e,r,i){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(kE[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(xN(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(xN(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new ge(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,i){if(i){e=i+":"+e;const o=kE[i];o?n.setAttributeNS(o,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){const i=kE[r];i?n.removeAttributeNS(i,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,i){i&(Ko.DashCase|Ko.Important)?n.style.setProperty(e,r,i&Ko.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&Ko.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){null!=n&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r){if("string"==typeof n&&!(n=pE().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(r))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function xN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class CG extends NE{constructor(n,e,r,i,o,s,a,u){super(n,o,s,u),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=AN(i.id,i.styles);for(const l of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=l,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class FE extends NE{constructor(n,e,r,i,o,s,a,u){super(n,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=u?AN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class CN extends FE{constructor(n,e,r,i,o,s,a,u){const c=i+"-"+r.id;super(n,e,r,o,s,a,u,c),this.contentAttr=function bG(t){return"_ngcontent-%COMP%".replace(PE,t)}(c),this.hostAttr=function AG(t){return"_nghost-%COMP%".replace(PE,t)}(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}}let _G=(()=>{class t extends yN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(je(fa))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();const _N=["alt","control","meta","shift"],EG={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DG={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let IG=(()=>{class t extends yN{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pE().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),_N.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(e,r){let i=EG[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),_N.forEach(s=>{s!==i&&(0,DG[s])(e)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{t.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(r){return new(r||t)(je(fa))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();const DN=[{provide:xs,useValue:sN},{provide:qf,useValue:function SG(){TE.makeCurrent()},multi:!0},{provide:fa,useFactory:function MG(){return function Hf(t){Ig=t}(document),document},deps:[]}],RG=aO(Lq,"browser",DN),kG=new ke(""),IN=[{provide:Xw,useClass:class pG{addToWindow(n){kt.getAngularTestability=(r,i=!0)=>{const o=n.findTestabilityInTree(r,i);if(null==o)throw new ge(5103,!1);return o},kt.getAllAngularTestabilities=()=>n.getAllTestabilities(),kt.getAllAngularRootElements=()=>n.getAllRootElements(),kt.frameworkStabilizers||(kt.frameworkStabilizers=[]),kt.frameworkStabilizers.push(r=>{const i=kt.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(n,e,r){return null==e?null:n.getTestability(e)??(r?pE().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:XP,useClass:$1,deps:[tn,eE,Xw]},{provide:$1,useClass:$1,deps:[tn,eE,Xw]}],SN=[{provide:Js,useValue:"root"},{provide:Ho,useFactory:function TG(){return new Ho},deps:[]},{provide:ME,useClass:_G,multi:!0,deps:[fa,tn,xs]},{provide:ME,useClass:IG,multi:!0,deps:[fa]},OE,wN,vN,{provide:e1,useExisting:OE},{provide:uN,useClass:gG,deps:[]},[]];let TN=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:ql,useValue:e.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(je(kG,12))};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({providers:[...SN,...IN],imports:[Zn,Uq]})}return t})(),Fh=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:function(r){let i=null;return i=r?new(r||t):je(FG),i},providedIn:"root"})}return t})(),FG=(()=>{class t extends Fh{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case gi.NONE:return r;case gi.HTML:return mr(r,"HTML")?hi(r):G0(this._doc,String(r)).toString();case gi.STYLE:return mr(r,"Style")?hi(r):r;case gi.SCRIPT:if(mr(r,"Script"))return hi(r);throw new ge(5200,!1);case gi.URL:return mr(r,"URL")?hi(r):Jf(String(r));case gi.RESOURCE_URL:if(mr(r,"ResourceURL"))return hi(r);throw new ge(5201,!1);default:throw new ge(5202,!1)}}bypassSecurityTrustHtml(e){return function O0(t){return new i_(t)}(e)}bypassSecurityTrustStyle(e){return function eo(t){return new o_(t)}(e)}bypassSecurityTrustScript(e){return function N0(t){return new s_(t)}(e)}bypassSecurityTrustUrl(e){return function c_(t){return new a_(t)}(e)}bypassSecurityTrustResourceUrl(e){return function jt(t){return new u_(t)}(e)}static#e=this.\u0275fac=function(r){return new(r||t)(je(fa))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var rt=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(rt||{});const vu="*";function BG(t,n){return{type:rt.Trigger,name:t,definitions:n,options:{}}}function PN(t,n=null){return{type:rt.Animate,styles:n,timings:t}}function Bh(t){return{type:rt.Style,styles:t,offset:null}}function ON(t,n,e=null){return{type:rt.Transition,expr:t,animation:n,options:e}}class zm{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class NN{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,r=0,i=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}function FN(t){return new ge(3e3,!1)}function Bc(t){switch(t.length){case 0:return new zm;case 1:return t[0];default:return new NN(t)}}function BN(t,n,e=new Map,r=new Map){const i=[],o=[];let s=-1,a=null;if(n.forEach(u=>{const c=u.get("offset"),l=c==s,f=l&&a||new Map;u.forEach((p,g)=>{let m=g,y=p;if("offset"!==g)switch(m=t.normalizePropertyName(m,i),y){case"!":y=e.get(g);break;case vu:y=r.get(g);break;default:y=t.normalizeStyleValue(g,m,y,i)}f.set(m,y)}),l||o.push(f),a=f,s=c}),i.length)throw function d9(t){return new ge(3502,!1)}();return o}function LE(t,n,e,r){switch(n){case"start":t.onStart(()=>r(e&&UE(e,"start",t)));break;case"done":t.onDone(()=>r(e&&UE(e,"done",t)));break;case"destroy":t.onDestroy(()=>r(e&&UE(e,"destroy",t)))}}function UE(t,n,e){const o=jE(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),s=t._data;return null!=s&&(o._data=s),o}function jE(t,n,e,r,i="",o=0,s){return{element:t,triggerName:n,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function _o(t,n,e){let r=t.get(n);return r||t.set(n,r=e),r}function LN(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const C9=typeof document>"u"?null:document.documentElement;function zE(t){const n=t.parentNode||t.host||null;return n===C9?null:n}let dd=null,UN=!1;function jN(t,n){for(;n;){if(n===t)return!0;n=zE(n)}return!1}function zN(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const r=t.querySelector(n);return r?[r]:[]}let VE=(()=>{class t{validateStyleProperty(e){return function E9(t){dd||(dd=function D9(){return typeof document<"u"?document.body:null}()||{},UN=!!dd.style&&"WebkitAppearance"in dd.style);let n=!0;return dd.style&&!function _9(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in dd.style,!n&&UN&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in dd.style)),n}(e)}matchesElement(e,r){return!1}containsElement(e,r){return jN(e,r)}getParentElement(e){return zE(e)}query(e,r,i){return zN(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],u){return new zm(i,o)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();class WE{static#e=this.NOOP=new VE}class HE{}const S9=1e3,qE="ng-enter",xb="ng-leave",Cb="ng-trigger",_b=".ng-trigger",WN="ng-animating",GE=".ng-animating";function yu(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:KE(parseFloat(n[1]),n[2])}function KE(t,n){return"s"===n?t*S9:t}function Eb(t,n,e){return t.hasOwnProperty("duration")?t:function M9(t,n,e){let i,o=0,s="";if("string"==typeof t){const a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return n.push(FN()),{duration:0,delay:0,easing:""};i=KE(parseFloat(a[1]),a[2]);const u=a[3];null!=u&&(o=KE(parseFloat(u),a[4]));const c=a[5];c&&(s=c)}else i=t;if(!e){let a=!1,u=n.length;i<0&&(n.push(function WG(){return new ge(3100,!1)}()),a=!0),o<0&&(n.push(function HG(){return new ge(3101,!1)}()),a=!0),a&&n.splice(u,0,FN())}return{duration:i,delay:o,easing:s}}(t,n,e)}function ha(t,n,e){n.forEach((r,i)=>{const o=YE(i);e&&!e.has(i)&&e.set(i,t.style[o]),t.style[o]=r})}function fd(t,n){n.forEach((e,r)=>{const i=YE(r);t.style[i]=""})}function Vm(t){return Array.isArray(t)?1==t.length?t[0]:function LG(t,n=null){return{type:rt.Sequence,steps:t,options:n}}(t):t}const QE=new RegExp("{{\\s*(.+?)\\s*}}","g");function qN(t){let n=[];if("string"==typeof t){let e;for(;e=QE.exec(t);)n.push(e[1]);QE.lastIndex=0}return n}function Wm(t,n,e){const r=`${t}`,i=r.replace(QE,(o,s)=>{let a=n[s];return null==a&&(e.push(function GG(t){return new ge(3003,!1)}()),a=""),a.toString()});return i==r?t:i}const P9=/-+([a-z0-9])/g;function YE(t){return t.replace(P9,(...n)=>n[1].toUpperCase())}function Eo(t,n,e){switch(n.type){case rt.Trigger:return t.visitTrigger(n,e);case rt.State:return t.visitState(n,e);case rt.Transition:return t.visitTransition(n,e);case rt.Sequence:return t.visitSequence(n,e);case rt.Group:return t.visitGroup(n,e);case rt.Animate:return t.visitAnimate(n,e);case rt.Keyframes:return t.visitKeyframes(n,e);case rt.Style:return t.visitStyle(n,e);case rt.Reference:return t.visitReference(n,e);case rt.AnimateChild:return t.visitAnimateChild(n,e);case rt.AnimateRef:return t.visitAnimateRef(n,e);case rt.Query:return t.visitQuery(n,e);case rt.Stagger:return t.visitStagger(n,e);default:throw function KG(t){return new ge(3004,!1)}()}}function XE(t,n){return window.getComputedStyle(t)[n]}const F9=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class GN extends HE{normalizePropertyName(n,e){return YE(n)}normalizeStyleValue(n,e,r,i){let o="";const s=r.toString().trim();if(F9.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function QG(t,n){return new ge(3005,!1)}())}return s+o}}const Db="*";const Ib=new Set(["true","1"]),Sb=new Set(["false","0"]);function KN(t,n){const e=Ib.has(t)||Sb.has(t),r=Ib.has(n)||Sb.has(n);return(i,o)=>{let s=t==Db||t==i,a=n==Db||n==o;return!s&&e&&"boolean"==typeof i&&(s=i?Ib.has(t):Sb.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?Ib.has(n):Sb.has(n)),s&&a}}const j9=new RegExp("s*:selfs*,?","g");function JE(t,n,e,r){return new z9(t).build(n,e,r)}class z9{constructor(n){this._driver=n}build(n,e,r){const i=new H9(e);return this._resetContextStyleTimingState(i),Eo(this,Vm(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],s=[];return"@"==n.name.charAt(0)&&e.errors.push(function YG(){return new ge(3006,!1)}()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==rt.State){const u=a,c=u.name;c.toString().split(/\s*,\s*/).forEach(l=>{u.name=l,o.push(this.visitState(u,e))}),u.name=c}else if(a.type==rt.Transition){const u=this.visitTransition(a,e);r+=u.queryCount,i+=u.depCount,s.push(u)}else e.errors.push(function XG(){return new ge(3007,!1)}())}),{type:rt.Trigger,name:n.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(n,e){const r=this.visitStyle(n.styles,e),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{qN(u).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(function JG(t,n){return new ge(3008,!1)}(0,o.values()))}return{type:rt.State,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const r=Eo(this,Vm(n.animation),e),i=function B9(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(r=>function L9(t,n,e){if(":"==t[0]){const u=function U9(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return n.push(function a9(t){return new ge(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof u)return void n.push(u);t=u}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function s9(t){return new ge(3015,!1)}()),n;const i=r[1],o=r[2],s=r[3];n.push(KN(i,s)),"<"==o[0]&&(i!=Db||s!=Db)&&n.push(KN(s,i))}(r,e,n)):e.push(t),e}(n.expr,e.errors);return{type:rt.Transition,matchers:i,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:hd(n.options)}}visitSequence(n,e){return{type:rt.Sequence,steps:n.steps.map(r=>Eo(this,r,e)),options:hd(n.options)}}visitGroup(n,e){const r=e.currentTime;let i=0;const o=n.steps.map(s=>{e.currentTime=r;const a=Eo(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:rt.Group,steps:o,options:hd(n.options)}}visitAnimate(n,e){const r=function G9(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return ZE(Eb(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=ZE(0,0,"");return o.dynamic=!0,o.strValue=e,o}const i=Eb(e,n);return ZE(i.duration,i.delay,i.easing)}(n.timings,e.errors);e.currentAnimateTimings=r;let i,o=n.styles?n.styles:Bh({});if(o.type==rt.Keyframes)i=this.visitKeyframes(o,e);else{let s=n.styles,a=!1;if(!s){a=!0;const c={};r.easing&&(c.easing=r.easing),s=Bh(c)}e.currentTime+=r.duration+r.delay;const u=this.visitStyle(s,e);u.isEmptyStep=a,i=u}return e.currentAnimateTimings=null,{type:rt.Animate,timings:r,style:i,options:null}}visitStyle(n,e){const r=this._makeStyleAst(n,e);return this._validateStyleAst(r,e),r}_makeStyleAst(n,e){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of i)"string"==typeof a?a===vu?r.push(a):e.errors.push(new ge(3002,!1)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let u of a.values())if(u.toString().indexOf("{{")>=0){o=!0;break}}),{type:rt.Style,styles:r,easing:s,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),n.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,u)=>{const c=e.collectedStyles.get(e.currentQuerySelector),l=c.get(u);let f=!0;l&&(o!=i&&o>=l.startTime&&i<=l.endTime&&(e.errors.push(function $G(t,n,e,r,i){return new ge(3010,!1)}()),f=!1),o=l.startTime),f&&c.set(u,{startTime:o,endTime:i}),e.options&&function k9(t,n,e){const r=n.params||{},i=qN(t);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(function qG(t){return new ge(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(n,e){const r={type:rt.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function e9(){return new ge(3011,!1)}()),r;let o=0;const s=[];let a=!1,u=!1,c=0;const l=n.steps.map(b=>{const A=this._makeStyleAst(b,e);let C=null!=A.offset?A.offset:function q9(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(A.styles),_=0;return null!=C&&(o++,_=A.offset=C),u=u||_<0||_>1,a=a||_<c,c=_,s.push(_),A});u&&e.errors.push(function t9(){return new ge(3012,!1)}()),a&&e.errors.push(function n9(){return new ge(3200,!1)}());const f=n.steps.length;let p=0;o>0&&o<f?e.errors.push(function r9(){return new ge(3202,!1)}()):0==o&&(p=1/(f-1));const g=f-1,m=e.currentTime,y=e.currentAnimateTimings,w=y.duration;return l.forEach((b,A)=>{const C=p>0?A==g?1:p*A:s[A],_=C*w;e.currentTime=m+y.delay+_,y.duration=_,this._validateStyleAst(b,e),b.offset=C,r.styles.push(b)}),r}visitReference(n,e){return{type:rt.Reference,animation:Eo(this,Vm(n.animation),e),options:hd(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:rt.AnimateChild,options:hd(n.options)}}visitAnimateRef(n,e){return{type:rt.AnimateRef,animation:this.visitReference(n.animation,e),options:hd(n.options)}}visitQuery(n,e){const r=e.currentQuerySelector,i=n.options||{};e.queryCount++,e.currentQuery=n;const[o,s]=function V9(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(j9,"")),t=t.replace(/@\*/g,_b).replace(/@\w+/g,e=>_b+"-"+e.slice(1)).replace(/:animating/g,GE),[t,n]}(n.selector);e.currentQuerySelector=r.length?r+" "+o:o,_o(e.collectedStyles,e.currentQuerySelector,new Map);const a=Eo(this,Vm(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:rt.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:n.selector,options:hd(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function i9(){return new ge(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:Eb(n.timings,e.errors,!0);return{type:rt.Stagger,animation:Eo(this,Vm(n.animation),e),timings:r,options:null}}}class H9{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hd(t){return t?(t={...t}).params&&(t.params=function W9(t){return t?{...t}:null}(t.params)):t={},t}function ZE(t,n,e){return{duration:t,delay:n,easing:e}}function $E(t,n,e,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Tb{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const Y9=new RegExp(":enter","g"),J9=new RegExp(":leave","g");function eD(t,n,e,r,i,o=new Map,s=new Map,a,u,c=[]){return(new Z9).buildKeyframes(t,n,e,r,i,o,s,a,u,c)}class Z9{buildKeyframes(n,e,r,i,o,s,a,u,c,l=[]){c=c||new Tb;const f=new tD(n,e,c,i,o,l,[]);f.options=u;const p=u.delay?yu(u.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([s],null,f.errors,u),Eo(this,r,f);const g=f.timelines.filter(m=>m.containsAnimation());if(g.length&&a.size){let m;for(let y=g.length-1;y>=0;y--){const w=g[y];if(w.element===e){m=w;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,f.errors,u)}return g.length?g.map(m=>m.buildKeyframes()):[$E(e,[],[],[],0,p,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(n.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=n}visitAnimateRef(n,e){const r=e.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,r),this.visitReference(n.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,r){for(const i of n){const o=i?.delay;if(o){const s="number"==typeof o?o:yu(Wm(o,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(n,e,r){let o=e.currentTimeline.currentTime;const s=null!=r.duration?yu(r.duration):null,a=null!=r.delay?yu(r.delay):null;return 0!==s&&n.forEach(u=>{const c=e.appendInstructionToTimeline(u,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(n,e){e.updateOptions(n.options,!0),Eo(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const r=e.subContextCount;let i=e;const o=n.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){i.previousNode.type==rt.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Mb);const s=yu(o.delay);i.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>Eo(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const r=[];let i=e.currentTimeline.currentTime;const o=n.options&&n.options.delay?yu(n.options.delay):0;n.steps.forEach(s=>{const a=e.createSubContext(n.options);o&&a.delayNextStep(o),Eo(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const r=n.strValue;return Eb(e.params?Wm(r,e.params,e.errors):r,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const r=e.currentAnimateTimings=this._visitTiming(n.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=n.style;o.type==rt.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(o):r.setStyles(n.styles,o,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,n.styles.forEach(u=>{a.forwardTime((u.offset||0)*o),a.setStyles(u.styles,u.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=n}visitQuery(n,e){const r=e.currentTimeline.currentTime,i=n.options||{},o=i.delay?yu(i.delay):0;o&&(e.previousNode.type===rt.Style||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Mb);let s=r;const a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let u=null;a.forEach((c,l)=>{e.currentQueryIndex=l;const f=e.createSubContext(n.options,c);o&&f.delayNextStep(o),c===e.element&&(u=f.currentTimeline),Eo(this,n.animation,f),f.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,f.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const r=e.parentContext,i=e.currentTimeline,o=n.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let u=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime}const l=e.currentTimeline;u&&l.delayNextStep(u);const f=l.currentTime;Eo(this,n.animation,e),e.previousNode=n,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}}const Mb={};class tD{constructor(n,e,r,i,o,s,a,u){this._driver=n,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Mb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Rb(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=yu(r.duration)),null!=r.delay&&(i.delay=yu(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=Wm(o[a],s,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const r=n.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return n}createSubContext(n=null,e,r){const i=e||this.element,o=new tD(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=Mb,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,r){const i={duration:e??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},o=new $9(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,r,i,o,s){let a=[];if(i&&a.push(this.element),n.length>0){n=(n=n.replace(Y9,"."+this._enterClassName)).replace(J9,"."+this._leaveClassName);let c=this._driver.query(this.element,n,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!o&&0==a.length&&s.push(function o9(t){return new ge(3014,!1)}()),a}}class Rb{constructor(n,e,r,i){this._driver=n,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new Rb(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||vu),this._currentKeyframe.set(e,vu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,r,i){e&&this._previousKeyframe.set("easing",e);const o=i&&i.params||{},s=function eK(t,n){const e=new Map;let r;return t.forEach(i=>{if("*"===i){r??=n.keys();for(let o of r)e.set(o,vu)}else for(let[o,s]of i)e.set(o,s)}),e}(n,this._globalTimelineStyles);for(let[a,u]of s){const c=Wm(u,o,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??vu),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,r)=>{const i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,u)=>{const c=new Map([...this._backFill,...a]);c.forEach((l,f)=>{"!"===l?n.add(f):l===vu&&e.add(f)}),r||c.set("offset",u/this.duration),i.push(c)});const o=[...n.values()],s=[...e.values()];if(r){const a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return $E(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class $9 extends Rb{constructor(n,e,r,i,o,s,a=!1){super(n,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=r+e,a=e/s,u=new Map(n[0]);u.set("offset",0),o.push(u);const c=new Map(n[0]);c.set("offset",XN(a)),o.push(c);const l=n.length-1;for(let f=1;f<=l;f++){let p=new Map(n[f]);const g=p.get("offset");p.set("offset",XN((e+g*r)/s)),o.push(p)}r=s,e=0,i="",n=o}return $E(this.element,n,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function XN(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}function JN(t,n,e,r,i,o,s,a,u,c,l,f,p){return{type:0,element:t,triggerName:n,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:f,errors:p}}const nD={};class ZN{constructor(n,e,r){this._triggerName=n,this.ast=e,this._stateStyles=r}match(n,e,r,i){return function tK(t,n,e,r,i){return t.some(o=>o(n,e,r,i))}(this.ast.matchers,n,e,r,i)}buildStyles(n,e,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(e,r):new Map}build(n,e,r,i,o,s,a,u,c,l){const f=[],p=this.ast.options&&this.ast.options.params||nD,m=this.buildStyles(r,a&&a.params||nD,f),y=u&&u.params||nD,w=this.buildStyles(i,y,f),b=new Set,A=new Map,C=new Map,_="void"===i,E={params:$N(y,p),delay:this.ast.options?.delay},I=l?[]:eD(n,e,this.ast.animation,o,s,m,w,E,c,f);let P=0;return I.forEach(O=>{P=Math.max(O.duration+O.delay,P)}),f.length?JN(e,this._triggerName,r,i,_,m,w,[],[],A,C,P,f):(I.forEach(O=>{const F=O.element,N=_o(A,F,new Set);O.preStyleProps.forEach(q=>N.add(q));const Q=_o(C,F,new Set);O.postStyleProps.forEach(q=>Q.add(q)),F!==e&&b.add(F)}),JN(e,this._triggerName,r,i,_,m,w,I,[...b.values()],A,C,P))}}function $N(t,n){const e={...n};return Object.entries(t).forEach(([r,i])=>{null!=i&&(e[r]=i)}),e}class nK{constructor(n,e,r){this.styles=n,this.defaultParams=e,this.normalizer=r}buildStyles(n,e){const r=new Map,i=$N(n,this.defaultParams);return this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Wm(s,i,e));const u=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,u,s,e),r.set(a,s)})}),r}}class iK{constructor(n,e,r){this.name=n,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{this.states.set(i.name,new nK(i.style,i.options&&i.options.params||{},r))}),eF(this.states,"true","1"),eF(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new ZN(n,i,this.states))}),this.fallbackTransition=function oK(t,n,e){return new ZN(t,{type:rt.Transition,animation:{type:rt.Sequence,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,r,i){return this.transitionFactories.find(s=>s.match(n,e,r,i))||null}matchStyles(n,e,r){return this.fallbackTransition.buildStyles(n,e,r)}}function eF(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const sK=new Tb;class aK{constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const r=[],o=JE(this._driver,e,r,[]);if(r.length)throw function f9(t){return new ge(3503,!1)}();this._animations.set(n,o)}_buildPlayer(n,e,r){const i=n.element,o=BN(this._normalizer,n.keyframes,e,r);return this._driver.animate(i,o,n.duration,n.delay,n.easing,[],!0)}create(n,e,r={}){const i=[],o=this._animations.get(n);let s;const a=new Map;if(o?(s=eD(this._driver,e,o,qE,xb,new Map,new Map,r,sK,i),s.forEach(l=>{const f=_o(a,l.element,new Map);l.postStyleProps.forEach(p=>f.set(p,null))})):(i.push(function h9(){return new ge(3300,!1)}()),s=[]),i.length)throw function p9(t){return new ge(3504,!1)}();a.forEach((l,f)=>{l.forEach((p,g)=>{l.set(g,this._driver.computeStyle(f,g,vu))})});const c=Bc(s.map(l=>{const f=a.get(l.element);return this._buildPlayer(l,new Map,f)}));return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function g9(t){return new ge(3301,!1)}();return e}listen(n,e,r,i){const o=jE(e,"","","");return LE(this._getPlayer(n),r,o,i),()=>{}}command(n,e,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,e,i[0]||{});const o=this._getPlayer(n);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const tF="ng-animate-queued",rD="ng-animate-disabled",fK=[],nF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},hK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ps="__ng_removed";class iD{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const r=n&&n.hasOwnProperty("value");if(this.value=function vK(t){return t??null}(r?n.value:n),r){const{value:o,...s}=n;this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const Hm="void",oD=new iD(Hm);class pK{constructor(n,e,r){this.id=n,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,$o(e,this._hostClassName)}listen(n,e,r,i){if(!this._triggers.has(e))throw function m9(t,n){return new ge(3302,!1)}();if(null==r||0==r.length)throw function v9(t){return new ge(3303,!1)}();if(!function yK(t){return"start"==t||"done"==t}(r))throw function y9(t,n){return new ge(3400,!1)}();const o=_o(this._elementListeners,n,[]),s={name:e,phase:r,callback:i};o.push(s);const a=_o(this._engine.statesByElement,n,new Map);return a.has(e)||($o(n,Cb),$o(n,Cb+"-"+e),a.set(e,oD)),()=>{this._engine.afterFlush(()=>{const u=o.indexOf(s);u>=0&&o.splice(u,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function w9(t){return new ge(3401,!1)}();return e}trigger(n,e,r,i=!0){const o=this._getTrigger(e),s=new sD(this.id,e,n);let a=this._engine.statesByElement.get(n);a||($o(n,Cb),$o(n,Cb+"-"+e),this._engine.statesByElement.set(n,a=new Map));let u=a.get(e);const c=new iD(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),a.set(e,c),u||(u=oD),c.value!==Hm&&u.value===c.value){if(!function AK(t,n){const e=Object.keys(t),r=Object.keys(n);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!n.hasOwnProperty(o)||t[o]!==n[o])return!1}return!0}(u.params,c.params)){const y=[],w=o.matchStyles(u.value,u.params,y),b=o.matchStyles(c.value,c.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{fd(n,w),ha(n,b)})}return}const p=_o(this._engine.playersByElement,n,[]);p.forEach(y=>{y.namespaceId==this.id&&y.triggerName==e&&y.queued&&y.destroy()});let g=o.matchTransition(u.value,c.value,n,c.params),m=!1;if(!g){if(!i)return;g=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:g,fromState:u,toState:c,player:s,isFallbackTransition:m}),m||($o(n,tF),s.onStart(()=>{Lh(n,tF)})),s.onDone(()=>{let y=this.players.indexOf(s);y>=0&&this.players.splice(y,1);const w=this._engine.playersByElement.get(n);if(w){let b=w.indexOf(s);b>=0&&w.splice(b,1)}}),this.players.push(s),p.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const r=this._engine.driver.query(n,_b,!0);r.forEach(i=>{if(i[Ps])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,e,r,i){const o=this._engine.statesByElement.get(n),s=new Map;if(o){const a=[];if(o.forEach((u,c)=>{if(s.set(c,u.value),this._triggers.has(c)){const l=this.trigger(n,c,Hm,i);l&&a.push(l)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,s),r&&Bc(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(e&&r){const i=new Set;e.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const u=this._triggers.get(s).fallbackTransition,c=r.get(s)||oD,l=new iD(Hm),f=new sD(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:u,fromState:c,toState:l,player:f,isFallbackTransition:!0})})}}removeNode(n,e){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(n):[];if(o&&o.length)i=!0;else{let s=n;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,e);else{const o=n[Ps];(!o||o===nF)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,e))}}insertNode(n,e){$o(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const u=jE(o,r.triggerName,r.fromState.value,r.toState.value);u._data=n,LE(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class gK{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,r,i){this.bodyNode=n,this.driver=e,this._normalizer=r,this.scheduler=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,e){const r=new pK(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,e){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){const u=i.get(a);if(u){const c=r.indexOf(u);r.splice(c+1,0,n),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(n)}else r.push(n);return i.set(e,n),n}register(n,e){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,e)),r}registerTrigger(n,e,r){let i=this._namespaceLookup[n];i&&i.register(e,r)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}return e}trigger(n,e,r,i){if(kb(e)){const o=this._fetchNamespace(n);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(n,e,r,i){if(!kb(e))return;const o=e[Ps];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){const s=this._fetchNamespace(n);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),$o(n,rD)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Lh(n,rD))}removeNode(n,e,r){if(kb(e)){this.scheduler?.notify();const i=n?this._fetchNamespace(n):null;i?i.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r);const o=this.namespacesByHostElement.get(e);o&&o.id!==n&&o.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,r,i,o){this.collectedLeaveElements.push(e),e[Ps]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,e,r,i,o){return kb(e)?this._fetchNamespace(n).listen(e,r,i,o):()=>{}}_buildInstruction(n,e,r,i,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,e,o)}destroyInnerAnimations(n){let e=this.driver.query(n,_b,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,GE,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Bc(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Ps];if(e&&e.setForRemoval){if(n[Ps]=nF,e.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(rD)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)$o(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?Bc(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function b9(t){return new ge(3402,!1)}()}_flushAnimations(n,e){const r=new Tb,i=[],o=new Map,s=[],a=new Map,u=new Map,c=new Map,l=new Set;this.disabledNodes.forEach(X=>{l.add(X);const J=this.driver.query(X,".ng-animate-queued",!0);for(let Z=0;Z<J.length;Z++)l.add(J[Z])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=oF(p,this.collectedEnterElements),m=new Map;let y=0;g.forEach((X,J)=>{const Z=qE+y++;m.set(J,Z),X.forEach(oe=>$o(oe,Z))});const w=[],b=new Set,A=new Set;for(let X=0;X<this.collectedLeaveElements.length;X++){const J=this.collectedLeaveElements[X],Z=J[Ps];Z&&Z.setForRemoval&&(w.push(J),b.add(J),Z.hasAnimation?this.driver.query(J,".ng-star-inserted",!0).forEach(oe=>b.add(oe)):A.add(J))}const C=new Map,_=oF(p,Array.from(b));_.forEach((X,J)=>{const Z=xb+y++;C.set(J,Z),X.forEach(oe=>$o(oe,Z))}),n.push(()=>{g.forEach((X,J)=>{const Z=m.get(J);X.forEach(oe=>Lh(oe,Z))}),_.forEach((X,J)=>{const Z=C.get(J);X.forEach(oe=>Lh(oe,Z))}),w.forEach(X=>{this.processLeaveNode(X)})});const E=[],I=[];for(let X=this._namespaceList.length-1;X>=0;X--)this._namespaceList[X].drainQueuedTransitions(e).forEach(Z=>{const oe=Z.player,pe=Z.element;if(E.push(oe),this.collectedEnterElements.length){const $e=pe[Ps];if($e&&$e.setForMove){if($e.previousTriggersValues&&$e.previousTriggersValues.has(Z.triggerName)){const ft=$e.previousTriggersValues.get(Z.triggerName),st=this.statesByElement.get(Z.element);if(st&&st.has(Z.triggerName)){const Cn=st.get(Z.triggerName);Cn.value=ft,st.set(Z.triggerName,Cn)}}return void oe.destroy()}}const Ce=!f||!this.driver.containsElement(f,pe),De=C.get(pe),Ue=m.get(pe),Be=this._buildInstruction(Z,r,Ue,De,Ce);if(Be.errors&&Be.errors.length)return void I.push(Be);if(Ce)return oe.onStart(()=>fd(pe,Be.fromStyles)),oe.onDestroy(()=>ha(pe,Be.toStyles)),void i.push(oe);if(Z.isFallbackTransition)return oe.onStart(()=>fd(pe,Be.fromStyles)),oe.onDestroy(()=>ha(pe,Be.toStyles)),void i.push(oe);const mt=[];Be.timelines.forEach($e=>{$e.stretchStartingKeyframe=!0,this.disabledNodes.has($e.element)||mt.push($e)}),Be.timelines=mt,r.append(pe,Be.timelines),s.push({instruction:Be,player:oe,element:pe}),Be.queriedElements.forEach($e=>_o(a,$e,[]).push(oe)),Be.preStyleProps.forEach(($e,ft)=>{if($e.size){let st=u.get(ft);st||u.set(ft,st=new Set),$e.forEach((Cn,Et)=>st.add(Et))}}),Be.postStyleProps.forEach(($e,ft)=>{let st=c.get(ft);st||c.set(ft,st=new Set),$e.forEach((Cn,Et)=>st.add(Et))})});if(I.length){const X=[];I.forEach(J=>{X.push(function A9(t,n){return new ge(3505,!1)}())}),E.forEach(J=>J.destroy()),this.reportError(X)}const P=new Map,O=new Map;s.forEach(X=>{const J=X.element;r.has(J)&&(O.set(J,J),this._beforeAnimationBuild(X.player.namespaceId,X.instruction,P))}),i.forEach(X=>{const J=X.element;this._getPreviousPlayers(J,!1,X.namespaceId,X.triggerName,null).forEach(oe=>{_o(P,J,[]).push(oe),oe.destroy()})});const F=w.filter(X=>aF(X,u,c)),N=new Map;iF(N,this.driver,A,c,vu).forEach(X=>{aF(X,u,c)&&F.push(X)});const q=new Map;g.forEach((X,J)=>{iF(q,this.driver,new Set(X),u,"!")}),F.forEach(X=>{const J=N.get(X),Z=q.get(X);N.set(X,new Map([...J?.entries()??[],...Z?.entries()??[]]))});const $=[],ce=[],de={};s.forEach(X=>{const{element:J,player:Z,instruction:oe}=X;if(r.has(J)){if(l.has(J))return Z.onDestroy(()=>ha(J,oe.toStyles)),Z.disabled=!0,Z.overrideTotalTime(oe.totalTime),void i.push(Z);let pe=de;if(O.size>1){let De=J;const Ue=[];for(;De=De.parentNode;){const Be=O.get(De);if(Be){pe=Be;break}Ue.push(De)}Ue.forEach(Be=>O.set(Be,pe))}const Ce=this._buildAnimation(Z.namespaceId,oe,P,o,q,N);if(Z.setRealPlayer(Ce),pe===de)$.push(Z);else{const De=this.playersByElement.get(pe);De&&De.length&&(Z.parentPlayer=Bc(De)),i.push(Z)}}else fd(J,oe.fromStyles),Z.onDestroy(()=>ha(J,oe.toStyles)),ce.push(Z),l.has(J)&&i.push(Z)}),ce.forEach(X=>{const J=o.get(X.element);if(J&&J.length){const Z=Bc(J);X.setRealPlayer(Z)}}),i.forEach(X=>{X.parentPlayer?X.syncPlayerEvents(X.parentPlayer):X.destroy()});for(let X=0;X<w.length;X++){const J=w[X],Z=J[Ps];if(Lh(J,xb),Z&&Z.hasAnimation)continue;let oe=[];if(a.size){let Ce=a.get(J);Ce&&Ce.length&&oe.push(...Ce);let De=this.driver.query(J,GE,!0);for(let Ue=0;Ue<De.length;Ue++){let Be=a.get(De[Ue]);Be&&Be.length&&oe.push(...Be)}}const pe=oe.filter(Ce=>!Ce.destroyed);pe.length?wK(this,J,pe):this.processLeaveNode(J)}return w.length=0,$.forEach(X=>{this.players.push(X),X.onDone(()=>{X.destroy();const J=this.players.indexOf(X);this.players.splice(J,1)}),X.play()}),$}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,r,i,o){let s=[];if(e){const a=this.playersByQueriedElement.get(n);a&&(s=a)}else{const a=this.playersByElement.get(n);if(a){const u=!o||o==Hm;a.forEach(c=>{c.queued||!u&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(n,e,r){const o=e.element,s=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:e.triggerName;for(const u of e.timelines){const c=u.element,l=c!==o,f=_o(r,c,[]);this._getPreviousPlayers(c,l,s,a,e.toState).forEach(g=>{const m=g.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),g.destroy(),f.push(g)})}fd(o,e.fromStyles)}_buildAnimation(n,e,r,i,o,s){const a=e.triggerName,u=e.element,c=[],l=new Set,f=new Set,p=e.timelines.map(m=>{const y=m.element;l.add(y);const w=y[Ps];if(w&&w.removedBeforeQueried)return new zm(m.duration,m.delay);const b=y!==u,A=function bK(t){const n=[];return sF(t,n),n}((r.get(y)||fK).map(P=>P.getRealPlayer())).filter(P=>!!P.element&&P.element===y),C=o.get(y),_=s.get(y),E=BN(this._normalizer,m.keyframes,C,_),I=this._buildPlayer(m,E,A);if(m.subTimeline&&i&&f.add(y),b){const P=new sD(n,a,y);P.setRealPlayer(I),c.push(P)}return I});c.forEach(m=>{_o(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function mK(t,n,e){let r=t.get(n);if(r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&t.delete(n)}return r}(this.playersByQueriedElement,m.element,m))}),l.forEach(m=>$o(m,WN));const g=Bc(p);return g.onDestroy(()=>{l.forEach(m=>Lh(m,WN)),ha(u,e.toStyles)}),f.forEach(m=>{_o(i,m,[]).push(g)}),g}_buildPlayer(n,e,r){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,r):new zm(n.duration,n.delay)}}class sD{constructor(n,e,r){this.namespaceId=n,this.triggerName=e,this.element=r,this._player=new zm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>LE(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){_o(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function kb(t){return t&&1===t.nodeType}function rF(t,n){const e=t.style.display;return t.style.display=n??"none",e}function iF(t,n,e,r,i){const o=[];e.forEach(u=>o.push(rF(u)));const s=[];r.forEach((u,c)=>{const l=new Map;u.forEach(f=>{const p=n.computeStyle(c,f,i);l.set(f,p),(!p||0==p.length)&&(c[Ps]=hK,s.push(c))}),t.set(c,l)});let a=0;return e.forEach(u=>rF(u,o[a++])),s}function oF(t,n){const e=new Map;if(t.forEach(a=>e.set(a,[])),0==n.length)return e;const i=new Set(n),o=new Map;function s(a){if(!a)return 1;let u=o.get(a);if(u)return u;const c=a.parentNode;return u=e.has(c)?c:i.has(c)?1:s(c),o.set(a,u),u}return n.forEach(a=>{const u=s(a);1!==u&&e.get(u).push(a)}),e}function $o(t,n){t.classList?.add(n)}function Lh(t,n){t.classList?.remove(n)}function wK(t,n,e){Bc(e).onDone(()=>t.processLeaveNode(n))}function sF(t,n){for(let e=0;e<t.length;e++){const r=t[e];r instanceof NN?sF(r.players,n):n.push(r)}}function aF(t,n,e){const r=e.get(t);if(!r)return!1;let i=n.get(t);return i?r.forEach(o=>i.add(o)):n.set(t,r),e.delete(t),!0}class qm{constructor(n,e,r,i){this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new gK(n.body,e,r,i),this._timelineEngine=new aK(n.body,e,r),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(n,e,r,i,o){const s=n+"-"+i;let a=this._triggerCache[s];if(!a){const u=[],l=JE(this._driver,o,u,[]);if(u.length)throw function l9(t,n){return new ge(3404,!1)}();a=function rK(t,n,e){return new iK(t,n,e)}(i,l,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,r,i){this._transitionEngine.insertNode(n,e,r,i)}onRemove(n,e,r){this._transitionEngine.removeNode(n,e,r)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,r,i){if("@"==r.charAt(0)){const[o,s]=LN(r);this._timelineEngine.command(o,e,s,i)}else this._transitionEngine.trigger(n,e,r,i)}listen(n,e,r,i,o){if("@"==r.charAt(0)){const[s,a]=LN(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(n,e,r,i,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}class Gm{static#e=this.initialStylesByElement=new WeakMap;constructor(n,e,r){this._element=n,this._startStyles=e,this._endStyles=r,this._state=0;let i=Gm.initialStylesByElement.get(n);i||Gm.initialStylesByElement.set(n,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&ha(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ha(this._element,this._initialStyles),this._endStyles&&(ha(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Gm.initialStylesByElement.delete(this._element),this._startStyles&&(fd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fd(this._element,this._endStyles),this._endStyles=null),ha(this._element,this._initialStyles),this._state=3)}}function aD(t){let n=null;return t.forEach((e,r)=>{(function CK(t){return"display"===t||"position"===t})(r)&&(n=n||new Map,n.set(r,e))}),n}class uF{constructor(n,e,r,i){this.element=n,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(n,e,r){return n.animate(this._convertKeyframesToObject(e),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:XE(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class cF{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return jN(n,e)}getParentElement(n){return zE(n)}query(n,e,r){return zN(n,e,r)}computeStyle(n,e,r){return XE(n,e)}animate(n,e,r,i,o,s=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(u.easing=o);const c=new Map,l=s.filter(g=>g instanceof uF);(function O9(t,n){return 0===t||0===n})(r,i)&&l.forEach(g=>{g.currentSnapshot.forEach((m,y)=>c.set(y,m))});let f=function R9(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}(e).map(g=>new Map(g));f=function N9(t,n,e){if(e.size&&n.length){let r=n[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<n.length;o++){let s=n[o];i.forEach(a=>s.set(a,XE(t,a)))}}return n}(n,f,c);const p=function xK(t,n){let e=null,r=null;return Array.isArray(n)&&n.length?(e=aD(n[0]),n.length>1&&(r=aD(n[n.length-1]))):n instanceof Map&&(e=aD(n)),e||r?new Gm(t,e,r):null}(n,f);return new uF(n,f,u,p)}}const lF="@.disabled";class dF{constructor(n,e,r,i){this.namespaceId=n,this.delegate=e,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,r,i=!0){this.delegate.insertBefore(n,e,r),this.engine.onInsert(this.namespaceId,e,n,i)}removeChild(n,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,r,i){this.delegate.setAttribute(n,e,r,i)}removeAttribute(n,e,r){this.delegate.removeAttribute(n,e,r)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,r,i){this.delegate.setStyle(n,e,r,i)}removeStyle(n,e,r){this.delegate.removeStyle(n,e,r)}setProperty(n,e,r){"@"==e.charAt(0)&&e==lF?this.disableAnimations(n,!!r):this.delegate.setProperty(n,e,r)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,r){return this.delegate.listen(n,e,r)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class _K extends dF{constructor(n,e,r,i,o){super(e,r,i,o),this.factory=n,this.namespaceId=e}setProperty(n,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==lF?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,e.slice(1),r):this.delegate.setProperty(n,e,r)}listen(n,e,r){if("@"==e.charAt(0)){const i=function EK(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let o=e.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function DK(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(n,e,r)}}class IK{constructor(n,e,r){this.delegate=n,this.engine=e,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(i,o)=>{const s=o?.parentNode(i);s&&o.removeChild(s,i)}}createRenderer(n,e){const i=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){const c=this._rendererCache;let l=c.get(i);return l||(l=new dF("",i,this.engine,()=>c.delete(i)),c.set(i,l)),l}const o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,n);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,n,c.name,c)};return e.data.animation.forEach(a),new _K(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,r){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>e(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([e,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}let SK=(()=>{class t extends qm{constructor(e,r,i){super(e,r,i,qe(Ew,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||t)(je(fa),je(WE),je(HE))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();const fF=[{provide:HE,useFactory:function TK(){return new GN}},{provide:qm,useClass:SK},{provide:e1,useFactory:function MK(t,n,e){return new IK(t,n,e)},deps:[OE,qm,tn]}],uD=[{provide:WE,useFactory:()=>new cF},{provide:Sg,useValue:"BrowserAnimations"},...fF],hF=[{provide:WE,useClass:VE},{provide:Sg,useValue:"NoopAnimations"},...fF];let RK=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?hF:uD}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({providers:uD,imports:[TN]})}return t})();function vi(t,n,e,r){var s,i=arguments.length,o=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,e,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(n,e,o):s(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o}function Lc(t){return this instanceof Lc?(this.v=t,this):new Lc(t)}function vF(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function fD(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=t[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=t[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;let Ui=(()=>{class t{static#e=this.UserId="638b9d07-8c20-4c61-84ad-6f7d0fbdddbf";static#t=this.BotId="4f35a6e3-4e0a-4edb-b86c-8f2d1f2bae99"}return t})();class Uh{constructor(n,e,r){this.labelColor=n,this.textColor=e,this.backgroundColor=r}}class hD{constructor(n,e,r){this.primaryColor=n,this.onPrimaryColor=e,this.secondaryColor=r}}class pD{constructor(n,e,r,i,o,s){this.title=n,this.userName=e,this.botName=r,this.windowColors=i,this.userColors=o,this.cancelOnClickOutside=s}}var Ob=function(t){return t.BottomLeft="BOTTOM_LEFT",t.BottomRight="BOTTOM_RIGHT",t}(Ob||{}),gD=function(t){return t[t.Regular=0]="Regular",t[t.Callout=1]="Callout",t}(gD||{});function pa(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}function yF(t,n=!1){return jr((e,r)=>{let i=0;e.subscribe(Yr(r,o=>{const s=t(o,i++);(s||n)&&r.next(o),!s&&r.complete()}))})}const{isArray:ZK}=Array,{getPrototypeOf:$K,prototype:eQ,keys:tQ}=Object;const wF=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function bF(t){return Mn(t?.then)}function AF(t){return Mn(t[qd])}function xF(t){return Symbol.asyncIterator&&Mn(t?.[Symbol.asyncIterator])}function CF(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const _F=function iQ(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function EF(t){return Mn(t?.[_F])}function DF(t){return function mF(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=e.apply(t,n||[]),o=[];return i={},a("next"),a("throw"),a("return",function s(g){return function(m){return Promise.resolve(m).then(g,f)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,m){r[g]&&(i[g]=function(y){return new Promise(function(w,b){o.push([g,y,w,b])>1||u(g,y)})},m&&(i[g]=m(i[g])))}function u(g,m){try{!function c(g){g.value instanceof Lc?Promise.resolve(g.value.v).then(l,f):p(o[0][2],g)}(r[g](m))}catch(y){p(o[0][3],y)}}function l(g){u("next",g)}function f(g){u("throw",g)}function p(g,m){g(m),o.shift(),o.length&&u(o[0][0],o[0][1])}}(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:r,done:i}=yield Lc(e.read());if(i)return yield Lc(void 0);yield yield Lc(r)}}finally{e.releaseLock()}})}function IF(t){return Mn(t?.getReader)}function ga(t){if(t instanceof Ln)return t;if(null!=t){if(AF(t))return function oQ(t){return new Ln(n=>{const e=t[qd]();if(Mn(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(wF(t))return function sQ(t){return new Ln(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(bF(t))return function aQ(t){return new Ln(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,sl)})}(t);if(xF(t))return SF(t);if(EF(t))return function uQ(t){return new Ln(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(IF(t))return function cQ(t){return SF(DF(t))}(t)}throw CF(t)}function SF(t){return new Ln(n=>{(function lQ(t,n){var e,r,i,o;return function pF(t,n,e,r){return new(e||(e=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(f){s(f)}}function u(l){try{c(r.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):function i(o){return o instanceof e?o:new e(function(s){s(o)})}(l.value).then(a,u)}c((r=r.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=vF(t);!(r=yield e.next()).done;)if(n.next(r.value),n.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function wu(t,n,e,r=0,i=!1){const o=n.schedule(function(){e(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function TF(t,n=0){return jr((e,r)=>{e.subscribe(Yr(r,i=>wu(r,t,()=>r.next(i),n),()=>wu(r,t,()=>r.complete(),n),i=>wu(r,t,()=>r.error(i),n)))})}function MF(t,n=0){return jr((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function RF(t,n){if(!t)throw new Error("Iterable cannot be null");return new Ln(e=>{wu(e,n,()=>{const r=t[Symbol.asyncIterator]();wu(e,n,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function Uc(t,n){return n?function mQ(t,n){if(null!=t){if(AF(t))return function dQ(t,n){return ga(t).pipe(MF(n),TF(n))}(t,n);if(wF(t))return function hQ(t,n){return new Ln(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}(t,n);if(bF(t))return function fQ(t,n){return ga(t).pipe(MF(n),TF(n))}(t,n);if(xF(t))return RF(t,n);if(EF(t))return function pQ(t,n){return new Ln(e=>{let r;return wu(e,n,()=>{r=t[_F](),wu(e,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void e.error(s)}o?e.complete():e.next(i)},0,!0)}),()=>Mn(r?.return)&&r.return()})}(t,n);if(IF(t))return function gQ(t,n){return RF(DF(t),n)}(t,n)}throw CF(t)}(t,n):ga(t)}const{isArray:vQ}=Array;function kF(t){return t&&Mn(t.schedule)}function mD(t){return t[t.length-1]}function Km(t){return kF(mD(t))?t.pop():void 0}function PF(...t){const n=Km(t),e=function bQ(t){return Mn(mD(t))?t.pop():void 0}(t),{args:r,keys:i}=function nQ(t){if(1===t.length){const n=t[0];if(ZK(n))return{args:n,keys:null};if(function rQ(t){return t&&"object"==typeof t&&$K(t)===eQ}(n)){const e=tQ(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}(t);if(0===r.length)return Uc([],n);const o=new Ln(function CQ(t,n,e=Va){return r=>{OF(n,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)OF(n,()=>{const c=Uc(t[u],n);let l=!1;c.subscribe(Yr(r,f=>{o[u]=f,l||(l=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,n,i?s=>function xQ(t,n){return t.reduce((e,r,i)=>(e[r]=n[i],e),{})}(i,s):Va));return e?o.pipe(function wQ(t){return Ii(n=>function yQ(t,n){return vQ(n)?t(...n):t(n)}(t,n))}(e)):o}function OF(t,n,e){t?wu(e,t,n):n()}class jh{constructor(n,e,r){this.id=n,this.userId=e,this.message=r,this.loading=!1,this.warning=!1,this.updateCount=0,this._queryText=void 0,this.style=Os.Default}get QueryText(){return this._queryText?this._queryText:this.message}set QueryText(n){this._queryText=n}}var Os=function(t){return t[t.Default=1]="Default",t[t.Pill=2]="Pill",t[t.Attachment=3]="Attachment",t[t.Location=4]="Location",t[t.Code=5]="Code",t[t.Secret=6]="Secret",t}(Os||{}),vD=function(t){return t.User="user",t.Assistant="assistant",t}(vD||{});class NF{constructor(n,e){this.role=n,this.content=e}}class Ns{constructor(n,e,r){this.content=n,this.finish_reason=e,this.error=r}}var zh=function(t){return t.None="None",t.ShowRecord="SHOW_RECORD",t.ShowRecords="SHOW_RECORDS",t.RecordVideo="RECORD_VIDEO",t.RecordAudio="RECORD_AUDIO",t.UploadFile="UPLOAD_FILE",t.ChooseOption="CHOOSE_OPTION",t.ChooseOptions="CHOOSE_OPTIONS",t.CreateSchedule="CREATE_SCHEDULE",t.TakePicture="TAKE_PICTURE",t.FaceCapture="SCAN_FACE_IMAGE",t.ReadPIN="READ_PIN",t.ScanQRCode="SCAN_CODE",t.ScanDocument="SCAN_DOCUMENT",t.ShareLocation="LOCATION_SHARE",t}(zh||{});class yD{constructor(n,e,r,i,o){this.Id=n,this.TypeId=e,this.AppId=r,this.ClientId=i,this.DisplayName=o}static get(n){const e=n.id,r=n.TypeId,i=n.AppId,o=n.ClientId,s=n.DisplayName;return e&&r&&o&&i?new yD(e,r,i,o,s?"__null__"===s?"Not provided":s:"Not provided"):null}}class es{get result(){return this._result}set result(n){this._result=n}get error(){return this._error}set error(n){this._error=n}constructor(){this.isError=!1}static ok(n){const e=new es;return e.result=n,e.isError=!1,e}static error(n){const e=new es;return e.error=n,e.isError=!0,e}}class Qm{constructor(n){this.dataService=n,this.history=[],this.sessionid=pa()}clearChatHistory(){this.history=[]}submitUserReplyToBOT(n,e){let r="",i=!1;return new Ln(o=>{let s,a;this.history=this.dataService.dumpChatHistory(this.history),this.dataService.submitUserReply(n,this.sessionid,this.history).subscribe({next:c=>{o.closed||(c.message?c.message.error?(r="",o.next(es.error(new Error(c.message.content||"We've encounted an unknown problem. Please try agian later."))),i=!0,o.complete()):i||(c.message.content&&c.message.content.length>0?(r+=c.message.content,o.next(es.ok({message:r,action:s,suggestions:a}))):(r+="",o.next(es.ok({message:r,action:s,suggestions:a})))):c.uiaction&&c.uiaction&&c.uiaction&&c.uiaction.content&&c.uiaction.content.actions&&c.uiaction.content.actions.length?(s=c.uiaction.content.actions[0],o.next(es.ok({message:r,action:s,suggestions:a}))):c.suggestions&&c.suggestions&&(a=c.suggestions,o.next(es.ok({message:r,action:s,suggestions:a}))))},complete:()=>{i||this.history.push(new NF(vD.User,n),new NF(vD.Assistant,r)),o.complete(),e()}})})}}class _Q extends Bn{constructor(n,e){super()}schedule(n,e=0){return this}}const Nb={setInterval(t,n,...e){const{delegate:r}=Nb;return r?.setInterval?r.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=Nb;return(n?.clearInterval||clearInterval)(t)},delegate:void 0},wD={now:()=>(wD.delegate||Date).now(),delegate:void 0};class Ym{constructor(n,e=Ym.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,r){return new this.schedulerActionCtor(this,n).schedule(r,e)}}Ym.now=wD.now;const bD=new class DQ extends Ym{constructor(n,e=Ym.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,r){for(;n=e.shift();)n.unsubscribe();throw r}}}(class EQ extends _Q{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var r;if(this.closed)return this;this.state=n;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,r=0){return Nb.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&Nb.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let i,r=!1;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Hd(r,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),IQ=bD;function FF(t=0,n,e=IQ){let r=-1;return null!=n&&(kF(n)?e=n:r=n),new Ln(i=>{let o=function SQ(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;o<0&&(o=0);let s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}const Fb=new Ln(t=>t.complete());function Vh(t,n,e=1/0){return Mn(n)?Vh((r,i)=>Ii((o,s)=>n(r,o,i,s))(ga(t(r,i))),e):("number"==typeof n&&(e=n),jr((r,i)=>function RQ(t,n,e,r,i,o,s,a){const u=[];let c=0,l=0,f=!1;const p=()=>{f&&!u.length&&!c&&n.complete()},g=y=>c<r?m(y):u.push(y),m=y=>{o&&n.next(y),c++;let w=!1;ga(e(y,l++)).subscribe(Yr(n,b=>{i?.(b),o?g(b):n.next(b)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;u.length&&c<r;){const b=u.shift();s?wu(n,s,()=>m(b)):m(b)}p()}catch(b){n.error(b)}}))};return t.subscribe(Yr(n,g,()=>{f=!0,p()})),()=>{a?.()}}(r,i,t,e)))}function LF(t,n){return Mn(n)?Vh(t,n,1):Vh(t,1)}function Bb(...t){return Uc(t,Km(t))}class Lb{submitUserReply(n,e,r){return new Ln(i=>{setTimeout(()=>{const o=["You"," need"," to"," contact"," Cloudapper"," Sales"," for"," this"," service."," You"," can"," do"," so"," from ","[here](https://cloudapper.ai/contact-us)"];(function TQ(t=0,n=bD){return t<0&&(t=0),FF(t,t,n)})(50).pipe(function BF(t){return t<=0?()=>Fb:jr((n,e)=>{let r=0;n.subscribe(Yr(e,i=>{++r<=t&&(e.next(i),t<=r&&e.complete())}))})}(o.length),LF((s,a)=>Bb(o[a]))).subscribe({next:s=>{i.next({message:new Ns(s)})},complete:()=>{i.complete()}})},1e3)})}dumpChatHistory(n){return n}}class kQ{constructor(n,e){this.func=n,this.param=e}}class PQ{constructor(){this.queue=[],this.isRunning=!1,this.onQueueEmpty=new Ie,this.isResetFlag=!1}addInQueue(n){this.isResetFlag=!1,this.queue.push(n)}length(){return this.queue.length}execute(n=!1){if(this.isRunning&&!n)return;const e=this.queue.pop();e?(this.isRunning=!0,e.func(e.param).then(()=>{this.execute(!0)})):(this.isRunning=!1,this.isResetFlag||this.onQueueEmpty.closed||this.onQueueEmpty.next())}reset(){this.isResetFlag=!0,this.queue=[],this.isRunning=!1}}var Xm=Oa(376);function UF(t){let n=!1;return n=(0,Xm.isObject)(t)&&!(0,Xm.isDate)(t)||(0,Xm.isArray)(t)?(0,Xm.isEmpty)(t):null==t||typeof t>"u",n}function Ub(t){return!!(UF(t)||(0,Xm.isString)(t)&&!t.trim())}function jF(t,n){const e=parseInt(t.slice(1),16),r=Math.round(2.55*n),i=(e>>16)+r,o=(e>>8&255)+r,s=(255&e)+r;return`#${(16777216+65536*(i<255?i<1?0:i:255)+256*(o<255?o<1?0:o:255)+(s<255?s<1?0:s:255)).toString(16).slice(1)}`}function AD(t,n){const e=parseInt(t.slice(1),16),r=Math.round(2.55*n),i=(e>>16)-r,o=(e>>8&255)-r,s=(255&e)-r;return`#${(16777216+65536*(i>0?i:0)+256*(o>0?o:0)+(s>0?s:0)).toString(16).slice(1)}`}class zF{constructor(n,e,r){this.identifier=e,this.knowledgeBaseId=r,this.MAX_TOKEN_LIMIT=2e3,this.url=n.endsWith("/")?`${n}api/v2.0/ai/llm-chat`:`${n}/api/v2.0/ai/llm-chat`}submitUserReply(n,e,r){return new Ln(i=>{let o={};o=this.knowledgeBaseId.length>0?{group_ids:[this.knowledgeBaseId],similarity_top_k:4,query:n,chat_history:r,system_context:"You are an AI Assistant made by CloudApper AI."}:{similarity_top_k:4,query:n,chat_history:r,system_context:"You are an AI Assistant made by CloudApper AI."},fetch(this.url,{method:"post",headers:{"Content-Type":"application/json",Accept:"*/*","X-Ca-Identifier":this.identifier,"X-Ca-Stream-Response":"true","X-Ca-Chat-Session-Id":e},body:JSON.stringify(o)}).then(s=>{if(s.ok){if("text/event-stream"!==s.headers.get("Content-Type"))return s.json();{const a=new TextDecoder("utf-8"),u=s.body;if(u){const c=u.getReader();let l=!1;this.readStream(a,c,f=>{if(!i.closed)if(f)switch(f.event){case"message":case"error":{const p=this.parseMessageContent(f.data);p?i.next({message:p}):(i.next({message:new Ns(null,null,"We have encountered a problem when we were parsing response.")}),i.complete()),l=!0}break;case"data":{const p=this.parseDataContent(f.data);p&&i.next({cache:p}),l=!0}break;case"suggestions":{const p=this.parseChatSuggestionContent(f.data);p&&i.next({suggestions:p.content}),l=!0}break;case"uiaction":{const p=this.parseUIActionContent(f.data);p&&i.next({uiaction:p}),l=!0}}else i.next(l?{}:{message:new Ns("We didn't receive a response that we can work with.",null,{})}),i.complete()})}else i.next({message:new Ns("We have encountered a problem. Please try again later.",null,{})}),i.complete()}}else s.statusText&&s.statusText.trim().length>0?i.next({message:new Ns(`We have encountered a problem. Please try again later.\n${s.status}: **${s.statusText}**`,null,{})}):i.next({message:new Ns(`${s.status} - We have encountered a problem. Please try again later.`,null,{})}),i.complete()}).then(s=>{if(s){if(s.ResponseCode&&200!==s.ResponseCode){const a=s.ResponseCode;let u="";u=s.Message&&s.Message.trim().length>0?`We have encountered a problem. Please try again later.\n${a}-**${s.Message.trim()}**`:`${a} - We have encountered a problem. Please try again later.`,i.next({message:new Ns(u,null,{})})}else{const a=s.Result;a?a.query_result&&a.query_result.trim().length>0?i.next({message:new Ns(a.query_result.trim(),null,null)}):i.next({message:new Ns("",null,null)}):i.next({message:new Ns("We have encountered a problem. Please try again later.",null,{})})}i.complete()}}).catch(s=>{i.next({message:new Ns(`We have encountered a problem. Please try again later.\n${s}`,null,{})}),i.complete()})})}readStream(n,e,r){let i=!1;const o=new PQ;let s,a;o.onQueueEmpty.subscribe(()=>{i&&r(void 0)});const u=()=>{s&&a&&s.length&&a.length&&a.endsWith("}")&&(r({event:s,data:a}),s=void 0,a=void 0)},c=g=>new Promise(m=>{const y=n.decode(g,{stream:!0});if(y){const w=y.split("\n").filter(b=>!Ub(b));for(let b=0;b<w.length;b++){const A=w[b];A.startsWith("event:")?(u(),s=A.substring(6).trim()):A.startsWith("data:")?a=A.substring(5):a+=A}u()}m()}),l=g=>{r({event:"message",data:JSON.stringify({content:`We encountered an error while reading stream. Error: ${g.message}`,finish_reason:null,error:g})}),setTimeout(()=>{r(void 0),e.releaseLock()},10)},p=()=>{e.read().then(g=>{((g,m)=>{g.done?(e.releaseLock(),i=!0,o.execute()):(o.addInQueue(new kQ(c,g.value)),o.execute(),p())})(g)}).catch(l)};p()}parseMessageContent(n){return JSON.parse(n)||null}parseDataContent(n){return JSON.parse(n)||null}parseChatSuggestionContent(n){try{return JSON.parse(n)||null}catch{return null}}parseUIActionContent(n){try{return JSON.parse(n)||null}catch{return null}}dumpChatHistory(n){return n}}function VF(t){return jr((n,e)=>{ga(t).subscribe(Yr(e,()=>e.complete(),Ap)),!e.closed&&n.subscribe(e)})}const OQ=hl,FQ=Symbol("__destroy"),WF=Symbol("__decoratorApplied");function HF(t){return"string"==typeof t?Symbol(`__destroy__${t}`):FQ}function qF(t,n){t[n]||(t[n]=new Di)}function GF(t,n){t[n]&&(t[n].next(),t[n].complete(),t[n]=null)}function KF(t){t instanceof Bn&&t.unsubscribe()}function QF(t,n){return function(){if(t&&t.call(this),GF(this,HF()),n.arrayName&&function LQ(t){Array.isArray(t)&&t.forEach(KF)}(this[n.arrayName]),n.checkProperties)for(const e in this)n.blackList?.includes(e)||KF(this[e])}}function ji(t={}){return n=>{!function NQ(t){return!!t[OQ]}(n)?function UQ(t,n){t.prototype.ngOnDestroy=QF(t.prototype.ngOnDestroy,n)}(n,t):function jQ(t,n){const e=t.\u0275pipe;e.onDestroy=QF(e.onDestroy,n)}(n,t),function BQ(t){t.prototype[WF]=!0}(n)}}Symbol("CheckerHasBeenSet");function Xt(t,n){return e=>{const r=HF(n);"string"==typeof n?function HQ(t,n,e){const r=t[n];qF(t,e),t[n]=function(){r.apply(this,arguments),GF(this,e),t[n]=r}}(t,n,r):qF(t,r);const i=t[r];return e.pipe(VF(i))}}class CD{constructor(){this.Refresh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAALWSURBVFiFtdfPi5VlFAfwz9wxHS0kCKIYR0UFB6EBU0iiNgotBMcJdBVt+wfatRQxalMLmShQcdWiX+BCok2QdkdFR4wK3GiTJIiFmjPYIDguzn2ZZ9573+d9b6NfOPDwPt/nnOece348d0BzrMUevIUxbMRLuIeHuIrf8AO+x4M+dGexBUcxi4WGch+TGFmO4SEcwnwfhsvyH45gZb/G1+OXZRguyyVsbmp8DDefoPFCbmJbE8//egrGC7mFDanBgWQ9hAt4pe6WmMF53EALL2OXqIw6XMSbIj+W4FDN7R/ha+zIKH8N39ToWRCJuQRb5LP9H+xr4F2Bcfyb0fdAKVpHM+Q72J5wW9iPE2hjqrOe6OwV2C6aVJXeyYK4Vr7JpJ5vxXSGO43RhD/R+f4T3he5U3DvYg28nVH4VaJsFLcz3EJuly5xEs931u+WuAfgs4yynZ2DrRrPF0QOfYzjOGfx5xhMLvNR6cyn8HOFwpkeoczJsYS/SQyqFC+KGZGemVqhunbbyXq8gpNiDM9iDtd67H+A50rfhomG0MujTxJiVZTKcgPv4ZmSoRFRemX+XEvM8l5YqHa2EuvwOX7HOxbz4LDotGUMEv25lzdfJsQTFZw6uYqzmf1bcKZi83pygSZJ+H9kqoVfK8K5UfR2OIXLFbzl4Ar5RvRtQh7F3xluIXfEYDvdgHsQVuuuz1TSEhwVkajiTot2TTzD5jLcWUlZTtZ49GpyicFO1E6K8myLJN1vadfbKUZ4ld4vEq4R1f2guMSE5hiXn4TzolsuwZHMgUK+s5iYvbBL5E2dng+LA+mTbKWY7Wm4qzAjnm9/iLAP43XN/ge0sVtEoQubPd1H6Z+6h1QXtqnujss13uTBi+jp556g8XYTz8sYEonZa4o1lfmOjlX9Gk+xQfSJu30YnhVTsavUyhioIyRYg714Q5TiMF7Ais7lrosu+aNow7NNlD4GsIko/piURS8AAAAASUVORK5CYII=",this.FileUpload="data:image/png;base64,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",this.Delete="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAACxAAAAsQHGLUmNAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAU1JREFUSIm1lj1Ow0AQhb/xTxQimlDQ0dBwBYS4Bw2i5FJcgRvABajTJFJoqBAKJHQR9nooyI+zu/Y6dnjSSt63O+/NzPoPAshJpzmpVoxpKF4aGBggqlguErK4Lj4JGYDc1CSiwejy5If0MkLOwqbVKNC3HtmLs5CT3tX0es/Ru13rlnt71SXzXej1+mpzBgJjhedDyAuMD6HT1GwLhcSQTjroaUx2IWDWxM5tKpDncAoctzSYl8XB/wB9WXMD3AMfpVTeV5yx9s5tMcdA3E2zhOwBGG0pHa04O5lZ0EA9WTSHfAYNQO2s9oAb6zGQ1hUohCtQpHUFUZMKIor/PoMuLWpg0KVFShFukXZoUdsKBgpHAiclbqgw4G9skBI7FTifQqV/bjCvFr0E+iEuJhsKLGorgKXvDGxxH5cD3/Ym37toATx5BEN4FM9PwC94JZIu2DeSAgAAAABJRU5ErkJggg==",this.Warning="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABBFJREFUeF7tmUuIHFUUhr8znUxQA9Eh6piEMSoYMQs1SMCFG8XHwsduXBiVCNJVGYy40o0y6EZXYmSmqhEMvhbOzsdC8bFxIYj4WCgqqEkck0kMowGjzCSdI1V21J5JT91761Z1d7ruts7jP1+fe+v2KWHAlwx4/VQAqg4YcALVFhjwBqgOwWoLVFtgwAlUW6CbDaARtyX5JeS9bunoWgfoXs5ngd/Swtdwgezk925A6B6AiGmEMC1aiSRk18AA0Gm2MMS3bQWf4irZxXdlQyi9A1QRGumev6WtWOUDAm4VQcuEUD6AiDsQ3j5jkcqdEvLOWQtAZxhmnnngvA5FHmeEERlnsSwIpXaANngC5akVixOelDpPn3UAdIq11DiavvRWXgs0WS8T/FEGhNI6QGNeAnYaFrVXAh40tM1lVgoAjbke+DS59BmqTd4E2yXgM0N7ZzNTQc4J0ntOzOfAdZZBvpCAbZY+1uaFA9CYHcCr1sr+cbhPAl5z9DVyKxSATrKKS9iPssFIzVIj4SCHuFQmOenkb+BULICYKch9x5+WgAmDWpxMCgOgDVajHAdWOyn7z+kEI6wt6nJUCIDWff9nYGOH4k8Bvyx5ltgOdbCfpc5YEf8TigEQczXwdcdfXvlVQi76/3ONOIJw4QrdslUCvsnZTcvcvQPQPaxhmAPQXmBbZjcAR1hkTHaz4BOCfwAx9wMvryjSDUAS8gEJeKVnAegUo9Q4mHnjcwegNNkgE8z5guCtA1oH33PAI5ni3AEkoZ+nzqO+DkR/AGKuAb7MLD4xyAcgiXCtBHxllCvDyAsAnWSIUd5dNubqlDw/gPeZ43aZJHmd5lp+AETci1jc2fMDSLpoh4S8nqv6zMPKIHrrxvcjsMnA/LRJE+H7Ja/GK4GaRYxZhMulzgkLH//3AI15Bngsj4gcvs9KwOM5/I0HFGfMoS9yMc10lr8uj4gcvseosUUe4rBrjFxngDZ4E+Uu1+Re/IS3pM7drrGcAWiDbWg65rLZt6d1/oUQLzkDAuAch0KS82S71NOpk/VyBxDzE7DZOmPi4OMt0J54nwRc5qLFCYBGjCO84ZIw9fEPIIl5j4TM2GqyBpCOuUY5Bpxrm+xf+yIAwJ/Msc52fGYPICYCkv2aZx1lkSvaAgzzA7A+T9Dks6vU7bRZAdCIjQizuUQW7axsknDZtKljVmMAOkONeT4Gbii6hpzxP2GEG2WcpkkccwARNyF8aBK06zbKzRLykYkOIwCtD5vJjG/MJGgP2BygyVaTD6xmAGIeBvb0QGE2EnZLwAtZDpkAWmOufcCqrGA99vwkTTZnjc8yAfRYUd7lVAC8I+2zgFUH9NkP5l1u1QHekfZZwKoD+uwH8y636gDvSPss4MB3wN+5BxBQ25wMYQAAAABJRU5ErkJggg==",this.Minimize="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAN1JREFUeF7tlcENQlEMw9qVmIIB2Iczw3BmA9Z6DGEkUGLuEb+u87pT/tvy+UcAGlBOwAqUC+AjaAWsQDkBK1AugFfACliBcgJWoFwAr4AVsALlBKxAuQBeAStgBcoJ4Aqccy4zc/8Rx8fuvsl/fwPAdWZe5CNA9ra7T5DnV+CcIwANKK9A9yNIHqB/yOIr8A9DkG8QAKGXkNWAhC2SGTSA0EvIakDCFskMGkDoJWQ1IGGLZAYNIPQSshqQsEUygwYQeglZDUjYIplBAwi9hKwGJGyRzKABhF5Ctt6ADzywHkEQYk5nAAAAAElFTkSuQmCC",this.Cancel="data:image/png;base64,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",this.DisabledStart="data:image/png;base64,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",this.PauseAudioRecording="data:image/png;base64,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",this.ResumeAudioRecording="data:image/png;base64,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",this.StartAudioRecording="data:image/png;base64,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",this.StopAudioRecoding="data:image/png;base64,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",this.VideoCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAk5JREFUeF7tWL9rFFEQ/ub2ko2e8fID0UoQo4EYInK4WqRY3TRpRMSz8R8wleBfoGUa2/g/WEjqXMJpTKKX2FiE4I/CgG0UvRVdjCOvOIhw62WTvceyMw+22sebmW++b968IQhfJDx+KADKAOEIqASEE0CLoEpAJSAcAZWAcALoLaASUAkIR0AlIJwAyW8BrlR6woHCI4AeAHCtAMh4XoBz9+jS2ue07SWWQHjt6g0u/JlP25FO5xHhaanWuBO3b2eqUi4SjR9f2FjpdNbe/8kBuO7dY8JcEiNp7T222GjrLz9EIVz2tojxuLTUeJLEXi4AaAbeOwDniDEjCgCeHnHDaOgtgPMm66IA+Do5OVh0o5cAxlqUFwPA9+lLJyjqqQGY+KegSZBAXPAiJPCrl8puxKsALrSr9LmXAID3ptrHXXMSAPjvFa8A5L0IdurwlAHKgJy3wioBYBvAabHXYES7Ay6cDWaMiGyEzDygGVw5CfCL1gtQ3FvABNz0L5+CQ3UAoyIBMEF/C7xhB3jNwFlxz+FWwOz7faHzYxPAGRGvwXYzQQYoDLyPBoTcd4KxQ9Fq1Ql3Pn0gxmz3Z4KBd5OBZ52akrT/G5v9i41bceeaEZnT9/tif+2VKY77Xomnwlwd6w2/lGbBdN/MIfdt6XAb1x3avX2k9sY0QqmuAwfAvl8EYL6uL6rXf3bLyIEB6JZDts9VAGwjnjV7yoCsZcS2P8oA24hnzZ4yIGsZse2PMsA24lmzpwzIWkZs+6MMsI141uwpA7KWEdv+iGfAX27gEVDXo6xBAAAAAElFTkSuQmCC",this.VideoPause="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAS1JREFUeF7tmjGKAkEURJ9eQgwW7ydG4iYLxoqBIOIFRQTvsKIOGigmhWOg3W/imp751dV/uh/TofKrU3n9aIAJqNwBl0DlAbAJugRcApU74BJoGYAfoB+OsQP2obYHDELtAdgCp1D/IGubgDkwDh7cvNwUWATaRjIElkA30G+AyWX8Y6B9krQ1oCnoN3zwHzALtSNgFRqwvk3Cfzj2WxOgASbAJWAPsAmG3devgJ9B9wFuhNwJhg3TrbBnAQ9DngY9DssDMiIkEJEIXbmkSCzcZMkE7x2QCr8Sm7t7pMJSYamwVFgqHDZSqbBUWCosFZYKhw1TKiwV/hIqXP1PUtX/Jhf2tM+VtQUin1tZ+GYaEBpVrMwEFDu1YWEmIDSqWJkJKHZqw8JMQGhUsbIzwOTKQeh33/4AAAAASUVORK5CYII=",this.Edit="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABFNJREFUeF7tmE1sVFUUx//nvoEVBRIjxI+dDTTTTKcEjJHYMh/G4AJjTOqSHe6KbYfQYIwZjVE+HFqscaExIe4UY1ho1OJMB4qigQamdPgq7BQT1IhQLJq+e8wdW2zGafue773b18x9u8m8mXv+v/M/5557CXX+UJ3rhwFgHFDnBEwJ1LkBTBM0JWBKoM4JmBKocwOYXcCUgCmBEBPgbFZcvPPNI7a0twrQT7/LPz7f3Hdq0s+QQ1sCQ9lEZM0EbZSS9gFoAyCIsde2In3xtwZv+AUhlAAYoHImvYkh3wBTEoA1LXiCwe8uj0QONe0/dt0PCKEEUO5ONEoShwE8rjJfJfQ3Br/PYlnODyeEEsB459Mr7y778wqAtXNkeYIY79zC5Gtee0JoACjbF7MJK5Et2gTwWE8yzhBfAPzAXFYXRB3NufwnXkohFAA+7uiw1j/0a1wQtjPTR7H+/HcKwvnu1FNEGGCgsUYpSBC6YrnCwJIGoLa60ZsnWoXF+8CUBmiEiTOxhvaTlM3Kck/yGQYdYGDdLKE2gJOWZe2IHjg2vqQBnOtJr7PA7wFoB6ZHc8aoAPVGV7UNKgjKCSA6PF0OEsQFQXg5umLLafX9kgVQ2p14mKbElwQ0V4lgEJWExJ4ZCP/0BPoKwFUi6v65wT6bzBanvIhXv120HjAt/nsCHpxDBINxngU6Y7nCsOoJanf4KzK5JtpXvKY+exW/KABUzV+4PdwkmT8EsHFhEXSGJXbONMaF33f3hlYHVMTfLLbYJHJESDkMVTnh7V9WyV1+WL56Ta0Aypl01JY84Eo8cV7a1NvSXzjrl+1nQ9AGQNW8mBJHndn+XojHpUTP5R/vKz1/5Ija+nx/tABw0PD+I4yBsgQ9F1/ZdtXrVjcftUABqJov3RpuFOBPa2x1c8bFwHWOyMfi+4s/+J7yqj8MDMC98VbgIIAtLoSMyIh8Vof4wLZBdbAZ7Upt+He8dTZvMKNgCepszuUvuADm6dVAHFB6MbleWPQBgM1Oh62KeJaZ6OrEaJA1H/g2WJntmT8DVU5wTgGPCKLt0Ya2SzrF+1oCyvZjXU82kZBHq05u81pUZ8OrFYjTDM0rQl1g3n/b2sDMfa5sD5Q5IrfqaniBAKiMtxPHH5WM18GkxtvqO7xa66qDzAkb9ELrwby6+lq0x7MDyl2JVilEP4AnZt3ezieIMTPerm4/p7vmfW+CY5n0bmZ+00Xmv5USO4Mcb93YybMDxjLJV5npFUeLMsal5G0th4auBHGwcRSD35OgQwBMwPgUaNti13wAJbCgA9Sd3SlIsSPW//XF/5OlIH8TdAnYIB4iiJeac/kzYbH9bKBBAlCZHxaCe2+s4JEgbnP8cIZnAOVdqRQz1zjtiTtk24O6Z3u3UDwDcLtg2N43AMKWEd3xGAfoJh629YwDwpYR3fEYB+gmHrb1jAPClhHd8RgH6CYetvWMA8KWEd3x1L0D/gYYxqhQW3njMgAAAABJRU5ErkJggg==",this.Schedular="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzFBMVEVHcEwrPU8rPU8rPU8rPU8sPU0pPE8rPU8qPE8rPU4qPVArPU8rPU8rPU8sPlDl5eXUyLzqaF7/12YwQVLi4uM4SFhSYG7b3N2Ejpd5g45daHRtd4FzfYY/Tl3W19lEU2LMztFLWWe+wsZlcHutsriZoah6T1ZHSlK/t66in5xYVFSyrKaiqa+MlJ2nrbOzuL2VlJTPw7jjZl7CX1vDrGHJv7WGiIqUiVv40mWvnV7VuGF+elhpalbuy2TYZF3mz5n31HfjwmOZVldvTVULfkMNAAAADnRSTlMAwWEiNAr5merYFa1/T58l3ZcAABSASURBVHja7J1rQxo5FEArIoDaKTCAAiioIhZfFWkRUaz2//+nXatWmeeDSWaSOefjbhM1OSQ3NzPcL18AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAL8sVyoVAu5uk/k2wUjTeKG/SfwflfM/6xtkH/maNofKJI/5nb/40l8vSf5QVAwEdI9f61p7w8gGX6zxiF5QEs0H/GMCzQPwLQPwLQPwLQPwLQPwIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIggDzyue2tcrlUMAJifY/eawBf3rs3QqJs/4VSeauYU+vdws3cVsmIwOf36N0HcKNoRETl/ktbuU1Fpv/rVtQB/PwevesAfn7vPmP9r+XS/z0DG9slYwWK/gNYzG7/BaO0vanz9H9+j95tAPPZ7t8obKd4FcitOv2fPkJuA1jMdv8v0UAupdO/vmasTtlvAMvZ7v81FlhP5ce/EMOf9vEevdsAFrLd/9tPSd8isFE0YsGsvmH9H27/PWP9v7OVskhgvRzTHzb0G8Bhtvv/yDulahtYL8U0/8aJ3wCeZLv/T7FgipKD+djm37jxG8CbbPefSgPyBSP2BcB1AFf7CKne//I2kNfu8z8a+w/geJTd/lO5BsS3/xsnH+PnPoDV8UlW+7cbkIJIcCOm+N8cntxUq0EGsFq9ORmaWevf5SyQ/GnQ7fxvjk6ebxbjcTUiXgMYB8r0P17cPJ+M3ITZSjz/5zz7f27GWZkgOf2Pb/44O5BwTnDd6QBgPi+q4yoCxNr/uLp4dlKgkGwY4HT/c7LI4gTJ6H/hFD6upWwDaNxkd4LE93/TSNUmsGE/AQ4XVQQQ2P/CfpdQSu4ksO2VCUEAIf075JG207MADMdVBBDc/9i2BpQ207IANBbCBtAUPEEK9b9opGUJKLlehcXA0OWenf7tF4oJRQFf3a/CYuBEYN+q9287DX5NRADr+x/moipO85u4J0jl/hdmGnIBm1YNnwV+hGL/gKrd/7N17JMIA3NCF4Dl8058p0s9+rctAbkU7AB/Yh/BE6d7dvp/4U8KLgVLhuBd9PXe3HrPTv8vblkPAqUEHgSz7gDjKkhjbN0D8omHACNmRSajxIOAbUPwQRrCpAKKSceA5jOTIpPnxKPAsvgYEIKng8uJC7BgUmSysCzApcRPgRwC5B4D3F5Ll0YBARLF7fsHpCH6gQpAAEAAQABAAEAAQABAAEAAQABAAEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABIhfAEgWBEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAAEQJ8A6kgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAKoKUD/eDA47mvVDgGCj+pu7/VX7O329WmHAAHZ75ofv6TZ3delHQIE47yx/Gs2zjVphwBBqLfsX6vdqmvRDgGCzP+R0xerd+o6tEOAAPPfcf5qfb8ZUaIdAviz61Zc4UKDdgjgy5V7eY1D9dshgO8G0HMf2IO68u0QwI+BV4WdgfLtEGCFBcAwenXV2yFA9AjghSvV2yGADy3vgW2p3g4BfGh6D2xT9XYI4EPDe2AbqrdDgJCXJUF/X1XbIYAFM+InS5V2CODDgffAHqjeDgF86HoPbFf1dgjgw6X3wF6q3g4BfNjxDK8bddXbIUDky+AXdpVvhwCrLAF7O8q3QwBfziPsrOq0QwB/OqFDa4XaIUCATcAlz96sa9AOAQKw7ziyzX0d2iFAIAPa9nFt72jRDgECUbcesszduh7tECAgh0vLa/NQl3YIEJjjo7cbN/PoWJ92CBAmFDi+aLUujnd0aocAGQcBEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABdMXyVnEBATKG5bulygiQMSzfLVREgIxxuDz8eQTI9BIgfwFAgKTZ+fQuwdoGAmTQgH9rQDGB+UeAOKj3r84Hu63OUbvdbDbb7aOj7u7F+VW/Hqz5YevALJSL+S9fEEC5qT88b7V7rl8RttduDQ4DPR7+JSlWEkDDOn5hej1vHZhGAHrdQV9DAfSs4xd0477s9oww7HUG+1oJoGsdv0BKXbRNIwLN3UNtBNC2jp+/UYOmEZ2Di74OAmhcx8+nw8sj01iR5mBHdQF0ruPnHU3sGXHQaB0qLYDWdfw8Tusd04gLs32lsABa1/Fz46ptxEvzvK6oAHrX8XPpq2nEz8FlXUUBNK/j57j4tw3TEEHzWEEBNK/j5xD6dQxxtA9VE0D3On62fi5MQyRma18tAXSv42fhuGeIpjGoqySA7nX8lrN+HUMG7b5CAuhex88rj+zOcHQ/n85mk8ndC5PJbDadzkfDwPvARV0ZAXSv4xf24z+8n87ubmvO3D5NpveBNGiuqyKA31+ieruPIMI/7Tuazp5q/jz8b4FfJGmWcooIoHsdv/fgf9fn6N+Yzx5qwXmYzP1Wgq0NJQTQvY7f2/Lvnfgdzie18NxNvR0or6sggO51/F5Tf16HP/M+yuy/OTD3WldKXxUQ4NJ7YJWv4/c3+veYpeH0obYKt7ORx6+1nX4BdK/j982zANxoVludyX2aAoHQ0bHmdfy+1d03jxXW/mWe3BVY20y7AJrX8dtpC59+bwVkh4LhnwfQuo7fvlsGcRjn9P+NB91igdJ6ygXQuY7fvsvp0Zze1mJn5nIqLOVTLoC+dfz6Lse/9uljTQAP8xQYEOWpYF3r+O07z3/je6VS+S3CALd9QKYBUQTQtI6fy/rf/ll5QYgAtdt50gZEEkDLOn7OO4b5o/LKoxgDapNhspFgNAE0rOPnPP+9s8o7vwUZ8HCfqAFRBdCtjp/zW0Rvy7/QJaB2O3XMB2ykXQC96vg5PkL2q/IZUUtArTazXz6YhTW+IUQiA6/t/x1hAtTunNKWRQSQxpXD/V/jzDL/lcen6f1oNJ8JSAo9OYWCOQSQRL8RZP6vu6LSwi+hoFNGII8AUqg7HAD2Tq3z//PTv5rJMaC0iQAy6AaZ/8pSUknAGnDrcBxcQwAJnAea/+/Ll4O3ctaAbQRIIgBo2Oe/YtkmpjU5BuQRQHQAYL8vMM/s839t/Ud3IgwYyg8DMi/Ahf1T990+/5Uz2+OBkvIBWwgg9PPft2UAzF+VIAKIOAnUahO7jl8RQO4JsOM0/5VTe6DwICQrLHsTyLgA9hTwwbWjABX7q4JzSQ8IFBFA4gnA6QDwl1/2xXkixICR3JNAtgXoBAoAXxOB9iVARDKgVnuyRSVlBBDEYcAAwCETJCwZ4BQG5BBAUgTYu3YXoOLwgOGTEAPuZcaBWRbAHgGeecx/5dR+Z3wv5iGxhsQ4MMMC1G27erfiiUMcOJOzCRTWEUDCArB37S3A9YGkZIB9EygiQOzs7AU+AbinA8UkAxxOAusIIPwSoF3xpSMpGVCbSrsSyKwA9gjgzF+An/bLmtGtnDhwHQEERwCdSgB+JJYMKKZRAIXr/9WtAZ15GkSAiv3yyBSSDLi1PhpQ2EybAGrX/7sMeQSUngyYSXo6LKoAqtf/a0dbACQmA6xLQClVAqhe/68fKQL4mwywf4nAUM6TAV/TI4D69f9s3yEWdAFwvBQS82RAQ8oz4lEEUL3+3/89NsLnAP7h8NvcSckFrKdEAMXr/zmGgGchBJCVDHgwZYSBEQRQuv7fK9YPca8SBlnJgLmMB0PCC6By/b/3awDT84sAIiQDGiKSARMZz4aFFkDh+n8fZwrrGfBnOAHOJCUDhhKygaEFULb+n0cSoF0JSVfOpZAlDDRLKRBA1fp/njvA97ACXMt4QvT346mEPSCsAIrW//M8A5jXYQVwSAaY85hn/+XH9MSfA8IKoGT9PwvdVXcAxydEzbuYZ98h77yWvAAq1v/zexLgRwQBTh2SATHPvtMjSJuJC6Be/T8btrcBfkYQQNCl0OfZd3ohLZe4AIYPaWkX4hxzUImE/QlRM8Sl0N1sZis6aJ19h7RzMXEBFKv/50Qn2pMAAZ4QDZoMeC8gN5p4zr5D0rGcuABq1f9zxLKsmt+jCWBPBpiBkgFP05E9hfz46HLvIDwICCuAUvX/gj0KcB1RgCiviz7M7pdLks5fPvuP7j+kJ/qhgLACXHpPSKrq/wXrMWIIEOF10duZvYawOXkMdfe8nbQA/7V3tTtqI0HQNmAbbEYrEZPE4BCWnA6LOwmkA53u3v+9LmFP+fCMzdieni+qfkT5RbI7RU91d023Q/v/JJuLm8EE6FUM+Psv8dbQdb/OY2a8F+DK/j/pVvB5OAHkHaL//NtK5GMvqTk3TgBX9gbKasBeXpBhxYDurdHdGvRCrQL759Wu7A1sI5QqDSj5XPQX0S/Cgwi0I+4HDSisuLI3UK4OuHsZgwfPRTnR3zsCcDojMk8AV/YGyiUB5SgCdD0XFYn+3hqAqzbk5gngzN5AIf5UlwS0OETvxYA20c9bGl7MpgGDauuu7A2U6S/fxhFA7BDtEP09JQBXbAhtIIAzewMlssB6JAEEDlH2O5PGwxvoSPxCbGh3zZW9gQ8NBqexBDiu2HCsH+YgzTwwtuZ1sCt7AxvYDX4T1qMYIIlC5v5p8mtmCwHc2RvY6TC5jibAZTfo9FdlLVWCqGgfiCkwWDiFd80f+GU8TkNi/1mWeXvaStCzEeBTMworIMDLoefp72/H4SJzCQKMQdMNUKkgwLXocfrVx36yowQBKAmwU0EAUTGgRfZtemcdIIBSvJIQ4GUtdfqHWsH9EoEAKgmwV0OAx8UAWdFvmgDvQAA1DtGhol83AeLGx7+HBhhWDKgUiX7dBEgbH/8JBFDmEH37B24ja43EInCuaOjGU6eBQuvOXfZtR7caqAmQKXBZPX0hSFwPHCb6dReCEgU+W5cqwRSlYFFTaLDo110Kjpr9ad/zQPXNoB/loO+54P6s7mOJm0HTZrrqex6ovh38Uyqw+UavolT5mdTtYC4N+OI5AZQbQohBbQjhVODGcwIot4QRg9oSxomAleeVANWmUGpQm0KDBWe39JsAim3h5CB/HRqEzfTV7xCg+GEIOagfhvB3wLDRa8/eDyYD9dOwIJilSqYvugKlj0M1gPpx6FfknGnJ60tg51QeyD0Pn6knwCLmutc+N4UVDojQAPIBEcIQMPjhnQv44FQaQJ8ECFXA0Ke3LqYBe6sJQD4kSpwIMFZ5qwQ/O6UCycfEiWsB92zQ1yBQOVQMph8U+YZJLLKzfPCTAo2hHqutQxJgHhAhEluZN1887A7/5pAIoB8W3dYU/OFs+fDH6+f3PvFAzbh4Paj0SIBvmcCceYnV7uPrIxFgbyXgpEkC3GVAynzF9l13R9jefpCGlTE/mcP8ZUCjrvWlGSWsTQR3WqoA3xkQe8uAXxuc49fGmboBpkGAGDAIr53tgNKRGyANAjBARQgYuzrWUA4QJ9QECCae5gKN1TJjl0cbsgNS3wD3bDDzNBvsLAZaags66CoD/loT9FIKNtz0S+aAK4QbOpFrIUAwCT0kwPxBA9xGGchtzZ0EmhD5pwWTRx6Yo3Xnfyl0VoEaX5DcNwo05dOEWe8L4iaPLQONWPhFgeShA2JlWwjgZs6kgV7Mlv5ogZC30i65zrftASAPtGMRZV7EgWQmMRvHshDABYB4ERjBNEqyeepuahjPk6mcBcauEHB7fIsBiq3QNtUC+OnDExwZ8WuI1doiAmwRAAyEAHu6wlwRMEYA0GCErWxpCl7WCAA6QsDcVh3IpYAIAJq88HbowGNTAcYIADTgSl07K9yB3JrMdIGzoilyMBsvAX4NXYSjIgJvfzGfCZxWzIgR5CnBz8YoTFeEBVsIpzgojTpwf7FMACAF1KsD2cEyAZDOcEqEEDyMN2kRFuwdWeKQSMEPSDIoBHkBSDMUCOi8BFam6kFHfvPUHCUA8kuAN70UZhhw3TFkAAaw5H/tlYlk8Lrn/yM5jkcDEisYIDr/EIejA7PQAgaIzh89AHMyQLcOOArOP4YA0IWpwE5a1Gb1P3pAZkvCjK3O+vL/Quo1C6C1HsTYR10OINHyeVSA9EI4GKHU4RK8bITvGdACMJ8KMFbRS8HjWvieHQmAdgYIx+MU1K2hWnT9sxQuUP1YiAcklUfd4R/nbxcDCrps4LQTnz8KAIYKQi1D0oiCwPXAcP5OxAC2uhEYxc4Fzt8+BrRNxahU3wP1vm2eFe5/+7LBu1tUZWn4VDKcv6VIGDkF2o+fhcj/jSNvmzbK2P6sQAvU657TbADN6BqWWt3GZQTX865joA0MQHZg2jkzu6wHh4H6sOr44BQOcOuTgf9LQ4chHDhtq+5xtpB/DgiBHxw497kLrvWmGjLMDrD0GnibJrCRIsGx3u4ffhbCv30VAanVCUW5PZ/aXAOX03lbVjIfEyL8W4il9JzUYl9utrdzXden06mu6/Pttin3xVvuKDHNEu4/S7Vg0mcpCfcX6VHG+PrbGwTolyil+PpbrQRy2jnJcYLar0/3AKK/lxkh1Sq1ELmfKxSgWJ4xx/E/cxTAt985CiQK5WAG25eLcjBXkxSmCaSfs3WBbHQYCCN0fZwOA9EYQRjm+PJ7wYEYp//cmC2TfnogzSKU/HwLBMtELhLMkwhffV8jwSTKs3ncurQwTKIpNN8TBIPpMsqTLMvCO7IsyaPlFF/75w4O+BUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACDAfy9WtHd3yunuAAAAAElFTkSuQmCC",this.RotateCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAuxJREFUWEftlT1MU1EUx//nvX6YUjEG2mKRttJXQlgcCH5MBEWJn4ORxUFDdHHQzUVHYxzcTHTRxI+44eYHCgjGwQEDbgTpA2wpX22FFKTavvfuMa2FMIAtloSld7zn3nN+53/uOZewzYu2OT5KACUFSgpsVgG5yldfY0A0E8QRYvJm2pgZE0To0XT+ND+lzgAwCm3vvAAuT91RJpFMcXrESjs6AL4MoJrAQQZNZgEIe4nhBxAG+JFJSz6dnp5OFgKRF8DpC3QTaEEwCwLOAhiCxLclNo2adHkxE8QwJ3cKw6wIwi0CNwH03KT9vFEIRH4Ab+AzgCYgM7Sox2Ikz0UikV/rZacoijWhUycxWphxMxYOPsxXjkIBDgOIMolLRPJMuSxGVFVNrQfR0NBgiS+nuwCqMJnEmemxsWyZNlqbAUgy4wcRBoSQrsed9phzPtECBkUrdvVhcFBbCeLyBFqZ0Anma9Gw+qIoAIdHaQeoasUJEaZSnOq3knUIgC+3H45WlisrELtra3dZDPkUIM3Ohb71FQWw3mXnPuU4BL1fa2PQyVhotKuQl7/2TN4SrAvgU9rA9G6tTQCn46Hgmy0HqPQpzTLInZaMtwvj44lsgMZGszO+qALw5AJGLIZlf1rWmhmoXoVgMRcLq51FlcDlDVxg4AEx2ufCwd5VZ42NZkd8qTXTno4yU290mSsk6PeZcZAIFQBsTPgS+x48UBSA2++v0XXpFQMLjjJz2/DwcHqjGbBoSPWAcEFIzwCu2hIAALLDW3eVwHeZ0O+wmc//CyKh0UsCTmS/CMLXohXIZOt2u2262X4P4IsADxDkO7Ksqcu6vpSx22S5XBimwN9RjEMAXhOREMzOWCjYUlQJVi5nIDSzvYPAV3KPLwggkrUzakCoI2CWGU8swvI4Lf+uh0T26ITavSUAOSey2+936xo1Q8IxMNVm/0JQmMAfALlvLrRnEvioF9qO/zUHCnVeyLkSQEmBkgLbrsAfyPcpMDvN/okAAAAASUVORK5CYII=",this.Submit="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAelJREFUWEftlU9rE0EYh593NxtKKojEJCXUuraJAQM9mEv1ooLiUUHBz+DFk170UJRiezEWPIiHoi0ifgDBT9GjkbQhNZBCk9SGgBgo2XkloBDqn/yxJiA713lnfs88886uMOIhI87HB/AN+Ab+WwP28VQqtJvPfwH0T9+af2HAjp5KpTHmmnre21q5uDlMACviJmeBR6KcF7hTKW2+GRrAxFQibSx5jDIHrAW94GK5/GFvKACxqeS0wnOEs8ArQyC7W/q4M5QeiEzOJMS2XgNpFVZEWovVra1qt/C2mV6a0IpEzoRqtVy7o38a0ROJGSxrDfQcygttOvd+V/ur9V0BJtzERaOSFdGHlU+Fd4D3fSOJTE4nxLKfIVwCXa2WCrc75nv603cFiJ5M3gCWgYYYvV+JHn3P+nor7J5O2aoLwBWB1fC4czeXy+33lNpR1BWATMaJ1hq3EJlHtCmGB14gkLeNWUC5rJiXlsPSTqFQ6ze81x4gHo+HWoEjNxGdF9hXYQPlAuhKq8XTve1CeZDwngHahbHY7LiOfb0O8gQIt6/F82T5c3lje9DwvgDaxa7rjjUJXMVYcxI02UG1dwJ374GDx8tknGP1eqheLDb+5uQ/1vYPcBipfb2CQw48uJ1vwDfgGxi5gW88aZkhHj/UJAAAAABJRU5ErkJggg==",this.PhotoCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAg1JREFUWEftlbFrE3EUxz/vd5dUJalQEEEEEaSLKAh6IIhIU4QK4qAI3bRODg4q6uIfoFLqpotSlw4iDg4iiqkotGBbEUEEQQQRBx0UkmBNk3tPYlt6zWB7SY4u95sO7t37fu5zv987YY2XrHE+KUBqIDUQ24CBzB7etzWs0R09wr6n5XXP33wVsDhHOzZAqRD0Ctxwws5okGIfLLTL3S9mPnYUoDywZ5NUM0PAZsQcyG7gAJBpCqqBTQDvMFHgu/n+aP7Z5I//Aa1ooFII7gBn4rzVUq3cyxVfn24LoFwIJgX2NzVpfOdfBv90C/QCPfOXy9Z0rjgVdBpAEe4rcivj7Fujec10i1N3FhgEXCQwEYCnhHbK4Xz17S4mznk6FJKpitZHMY4kCVA15KI4nUDlbVStqOxVTwMxuQl0LdzruIGSmR11yAkTzi0DMG6Hno45dY+BjYkACFQwPWnidgHXmwCummMG4wGQTwQACIGR0PeuefX6Q5AGSGP2vVfhuIMrwHnATwqgMWc/O5ELv2f98Q3rawcx5E9WXmVr2i8mw8D2JDfhYu+SQVHg0bwAjgn0R9Qv1rW/CSuFoAj0tTQJjZe58alDbQ2iSl8wiHDJlnb2qlgESmDDueL0WFsANrCjqzzXs008za4qeaHIQjeXz/78Ik8+VdsCiBPaSu2Kf8NWmsZ5JgVIDaQG/gIlLskh19p0BwAAAABJRU5ErkJggg==",this.SubmitGreen="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAfdJREFUWEftlcFLFFEcx7+/N7vbuhIhQnguIWihoC7WRYM0ImcbXB2vnYQunepSB7cQ9dK20CEUxJSI6LEujgvLQn+BIHTxkF4NFoNiwQhn571fTJSEWLO7ygoyc53fe9/P+7wvM4RjfuiY8xEChAZCAyfTwMj7EWP31G7CSTk7IPD/vjVHbuB3eFJpcZeU8a44nN9sGUAmkxGrlz9eEsAzANeJ+MGKtfy2ZQCmYybZi0yCuIeZFj0vMlW25deWANzJD50joV8BuMJMrz2mbHloqdKSDqSWU91aizcAkgDmhNBTTsrZDgr3zQSW0L/X9YvrCWnLnYNU3i5Y5w1gEcA1EM+0ubFH/5o9aH0gwGDB6gOQJaancS9SlLZUvzZi0GA+3Q1DvQRwA8QLbW7s/t77Ov/zgQBmwUozkANTlQ31uFLpKq2NzXpmPn2BDTUBoJ+AhXgt+lDa0q0zd28sEODqzFi06+z2KAHjAH6A+InW4pMheIIZNwHMq1p0umTLL42G19UBf8hcMROsxDCYxkHsQosNIu5lYE5p8aKUXtpqJrxuAH9woDzQHvveboH4OYBOZspRtJYrmsXPzYY3BOAP983fi58+U73FQvcoN5ZtVvvfwIEd2H86vxMdHd8SH2xZPczJ/6xtGOAoQg9lIAQIDYQGTpyBn92kryEPk14qAAAAAElFTkSuQmCC",this.Refresh2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQbSURBVHgB7ZhfaFt1FMfP+d3cpE1Z12Rb4rKYpl3SrVZasCCCQ1R88h+KMnwQBQVFQfRhwhzoiwx88XXsQZwKPgxRhij45J9tiCIbslln20i7pt2aphqXknZNcu/x++tuoYTpcm8ydOx+4PD7d3+//P6d3zknRD4+Pj4+Pj4+Ny9M7YOjmcymUI13WMy7WOR21MVsIUspOW8znzbZmo50ds6PjY1VGzvH48NdEl7duTA1foZc0K4FqG2pzJOK+RkhugPlW64y9irkdxL6SQx6vzg1eQJl0Q2ZTCZUrqsDJBJeOD/5OrlAUYtE+vs3x3qzR5n5KGbzEKq2O5O3IZYjOh+C3IaWZ9mm72Lp7GHdF3VGucqvYvJvMUkHuSRALbAlPbBbWXQIG3mfUyWYYA7pN8hNMvFfukZIIqgbRNv9SFPOly+YtjGIhZzTefKI5wWsHXtNjiB7p1NVEZG3VUCOFHp6SnTqVG3j90NDQ8GFSiXKEtiHA3oFVUFMfA/SPdQCnhaQTCY7yzV+D9m7nKoiJv9ycSb3KTn3uhFHceeJ7t0fT83lheldlA1qEU8LqBqdDyJ5zCkuic1PFPNrSnlN0unpwIodiOMU2vKAuFbiRCIRhsLuRTYMsbDzB4v5iaYmj93H5M0XhfkNasMDonF9Apc5HA2IrN/bnBjGsWb6pdPpjorMvgmdPkBtxPUumIbahSSh8ziJM4tT4xNNdFMrYu7Dq7Sf2ox7HVD2MMmV6ytCP9I/KO1GEomBqEXSh14f/Nt3GOgHconrBeAKxNfzUMO5ZvpcuDCxiOR5ug60qkjX3P3rjesFwNwX1vO4QjvoP8b9FbL5l3U3TcTWVliXvJ4E43UKVatVBWR2dvay27Fcn0DdknNILq51Zh7Z2r87Sx6J37pzaFnM7+tmVx7G8WSsry9GLnH/jNbDJTyfJ3UeW5VVlvUoeUQM9TSSEUgU8luwViuTS1z7IpVKoRbujmgb8DBphwz+UFdP5HjlUinf9CCjo2Y8tGkvduAdlEzIMuTgxfz0WXKJp1fIrC9/CRfic6fYjWE+i/UOPE5NBEjaIscWy6+hv3YGdYygN+OLQK3yFXnAs0OlPdKa0XEcdmHUGWeJGUFJgD6ezyVLRN/WqWHiS/XgFiMgh7DzOvDRp68V9uegtXI3FHiFPNCSR7i9NztoCR3GKPc4VdpGj2NRXzPbObHVH6IQQJLE0TKCtgfwzdYNv35C2fLS/ExujDzSsku7OZWKBFXoQ4RdjzQ02Y6wIw3XVY6tSvW5SzMzJWqBdgX1Rqw38xTmiFdFdFC/7Spj47pwAYbwNC79R4XpiU/oygJboq1/qyBI7w7VVdJaC955GKeiFyIwGAVYvbO4S7+umjL3Zy63RP8DN8THx8fHx8fH50bnbzilXEHX539GAAAAAElFTkSuQmCC",this.PlaceMarker="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJ4SURBVEiJpZVNSBVRFMd/Z+bNvDHy9YRUqHZBbQwVhUqFsE1tIvrctguigiCopUsJA0Eoilq0qkURtalNKVRKtahMDSkUgojQEo1Xvg9nThufzMybq086MIv7P/f8f+fOvXNHVJVVQzpaA+SwQJtC2wxzjSlSs4JMOsjNjI7eW7XcCJAmN2BTD3AZsMvyD35Fpnm4Iz7BgXodz1UPkO7NAcVBYFc8FQcA2Nj5DWxsrtU3n+M5K4mqlK4nmZvCx/cK/H2elKsA+NJ1UtETMbkIDCgcr6HmqoszGq8rUto2L839cb3iFQXSOQnsDEk/LXQ/OjIWnjcvLUfzFO4H6EqTNnaxUSfS5hXIngywIywpnI+bA2T1w8M06Wthzcd3F6VlqxmA1QpISFi0cR/EzctRR90liUyHEnrMCPCRSPfANDq0ZAKgQ3kLqxD1oN0IAL7HxtuR7pQRIN1eQBB55wpTRoCN9SVm4fmUTpn855i7oUQPiYu8iPQQP0W+dLwWZHdI+h3AkZQOD0bMpeVikUJfgK5sQgo716ATteF5CcuXPiC8sRkLnql0PVL01QK5fT5+e5GlLfFKB+dOhVvFVSEiPp0vBe2shCdfFcvd/2ngUxbVyKGovCpU1SY4A5hPT0J42Kfj5skAYPnDGqje3B3L6Me7SblkAGDh9gDf1jK3kMAidcicN4UO5RQurAVIk76V1XdfTXnzD6fMka6nih4sj8Ob7JBaqNfx7Gr15hWUO0DPAfmknINj/AirBqDDUyC9cdnDeZvV94//HwBYZK4AK9eIjfglMsaNXTcAfVIIkLPloYvX36jDM9XVqlb9+Oy9PUvT9Hpq/gHXIiFRt5kHAQAAAABJRU5ErkJggg==",this.CodeScanner="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJvSURBVEiJ3ZZPSFRRFMZ/586bxqY0m5dEpVM6NhSpG3UCW1Q6ZFCLli2KFgVBBP0hyE1gq4gisqWtojZu3LSJ0hZRmqP9wYrISslWFfOwpEXNvHtaOMKoRcLkwr7V5YNzvnPvd+65V+oadtT4xhwgD6JijQSuD6fujjEP1DYmqxQ9oqImnw9Ye8uxYg4JHANe5ylY1ewdYF4CYMsRkgL5AputCRgnl3HkZaq3YX7J5uLF4P0HQCKfq0m0PENVzB9i/hkWXMARUauKBUin0yeBpgJz9rmuexVVK6JW6hK7KlWzFcOp3j7P835Q+K5sJBIJ1SWat4kEx2WaVdWg53k/+waekPY84tUxgkGHkpJi+geGWB+toHj5MlAFoLR0BQ/7U0TL1/EzkyFasY73ox9o2lpPJBJZIiIZAGe2fFf3bZ4Pv+Lwwf2EQkvYWF3J5Wud7NvbyoZoOVnfB2DTxhiXr3Wyp7WZia/f2Ls7SVf3bZq21s/It/i7SCZbYztRaUMkYLc0tIy8G2Vy8jtr16zGGEM4XMTI2zHKylyWFoXQnAfhcJg3I+9Z5a4kk81Stsrl0+cvxKurMK+GelH1MVwwiOiCle+jc7roxNn2OSafajv/W5OPnzk3x+SOi+0zuug/MHl6MX1EjwefkvYmiMcqcZwAxQVeNKltTFaBXzGcuv9oIUaFg/hHVSUpIvXpdPo0sK1AgT4RydY0Nl+BTI+jKgaZehdc1+0AOgoUmIKIUcUs/i7KTVON1ySah/J4K8qZ3Fv7V9Q27tyuIpeYUbDGEbnnGLU3fDF+foCoWJHAx/lWKRIcV/V7Zn1belTtzV9xfAviw6wpugAAAABJRU5ErkJggg==",this.PinCode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHYSURBVHgB7ZdLLwRBEMeLROIREiEIwbhJfAIn38bjC4h4RWLFbffK2dXrYEM4iBMH4sDBxcXBI7vxikRIPKp0jS22YprLzkj9kv/2bM0/Xd3TPd09AIZhGIZhGIZRarpRW6gX1FvM9YpaQQXU8DK+2Ec18M1HiDfV4Np9jeqlwBK4ni2gmiD+BKg1cG1epMAN/2mG5NAGrs05gMLcShI1wO0uh4Tj04FT1IGH7xB15OE7QR17+HzzqlMoQI1xSfcewK1SoxyTvglUp6iHFoJxxTeJ6hG+FtSI4vPJWyPqUTswz7EzLp/BLVt0PSV8Mxy7EPWEi0Ja+DIcuxK+HJfTSt5cRN7IDtATzULxJrIOxU9sWfFtKj6tvuw3H+Vd9cgb+RLTRlGpxG+VWJUSu1diFUrsSclbC355P9FGYI5j4fDRESMc1inhS8HXISedc5kRvjTH8sIXTrvUH/J6TaEhcC9Q+DJRrB+Kp8YAql7U04oaVHwU6xK+dqU+LW+z4ovsgGQP3FyNYge16+HbZkXxU95fdSCO/K+dOM/XjZAcOri8pJ8NKBxNA4g/tNPTB03Y5o9Gy2UwKaKZE5RxrwLULKoPVQfx5g7cIW8Y3MHQMAzDMAzDMErEO4sMCpYoPwJIAAAAAElFTkSuQmCC",this.FaceScan="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAhtJREFUeNrMV11OwkAQBsIB6gnEA5iUR59sL6D2BnACNPHdHsBEOQHcAPQCwJOPrfEA9gb0BjpDvm3GTZdut1DcZCAw3fm+ndn5aadz4tXlj6v32KevFYmn6cOPm3jdFITss+1A/JXDdtrDH2Xgx1weMAsP/EBxRqzyYyITFoNv8fPiDwEC71oY8OHOcxJfuPSTJCUbSwsbBV6/BnMGfdJiKdcdnmMyU5JXG2/2LMFHiFlgGV8mmsBbVgRCiAl85hDuAZM2kCjwuhYX5rthhvC9GLqGYHSA9PThRScC1wfKvoErgbKNKcmYJLME50yYm5RVaeiXGBtzCWWjSM3A4KkMIeQ7kLkSkIt7QiRzG31iXZG+e1PRlsAQp3at+/ULEbF/UW5vAJ5rtmp54B7fkSDF5XbBbidSoaHlRqIfRKigbOvBOA+IJpO01I6LkPY0d2UtgGcqNP9iVfb/569FjDyfPl5GSxujtIfvyoRkQ3vipu04w+Wa1DjYBHsqQ2pDYImYBXSywOL0qjrm2NuMALlQTTi8ZgTg7QH3xOwwxd5md0AYT1BWOX0iMp5p+gFqxO4Z0g9t7PZFEenoxaVkilkBICFA7nBv0N2K2SE1TVda0drhqRAEVfMe3Bkirh6q20pUOg+60ML1BV6dbqhIRHR6H1OwasMbBid96lQHTvViIt8LcrhwSw+08W5YdEo5lrdZn/Oqi9ra+hVgABGZ13TGsBs1AAAAAElFTkSuQmCC"}static#e=this.shared=new CD}class _D{constructor(){this.Loading="data:image/gif;base64,R0lGODlhlgCWAPcBAAAAAAD/AGaz52az52a05ma05ma05ma052a052a052a052a052a052a06Ga06Ga15ma152a26We05me052e052e15me16Ge16Giz52i152i352m252q16nC/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/7yH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAwABACwAAAAAlgCWAIcAAAAA/wBms+dms+dmtOZmtOZmtOZmtOdmtOdmtOdmtOdmtOdmtOdmtOhmtOhmteZmtedmtulntOZntOdntOdnteZntehntehos+dotedot+dp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eM3ktR9CtzwROnDm1a1nD368puvf251LrJyOPLYA5eHBS/yunib7yud7N6csoL7s9dptvo8c/yL8+vYJB1F+N+3HWH2s0QdggPKld5tOBmIgQEb/LRgfdRRFeN9OlHFUIYANVqShgFx9eJ5GI4b41YccjWjWhi126NiMNNZo44045qjjjjz26OOPQAYp5JBEFmnkkUgmqeSSTDbp5JNQRinllFRWaeWVWGap5ZZcdunll2CGKeaYZJZp5plopqnmmmw+FRAAIfkECQMAAQAsAAAAAJYAlgAACP8AAwgcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AAwseTDgthsOICydEzDixYoKNI2N4LFCy5MeWLRfOnJkwZ80aG4sUzfPzZYydO3IAjdM064muQ69OfdP1adi2UceubZs07twVe0/mLTx4ceO2ORDPLMC3ROGHKUIfXtN0c8bSp2c/bvOzgOvUn2un/91b+c3Zkr9HR8494vTwNdE3Vn/xPUX5wHHiP/xdd3r1kd03nk4BhhbZdwgWKF57Wv2HIHjwQTTgVg4+6JiA+XVVIYAY7feahgdaqJGHzn1VIUckrkfWbaopSNmLMMYo44w01mjjjTjmqOOOPPbo449ABinkkEQWaeSRSCap5JJMNunkk1BGKeWUVFZp5ZVYZqnlllx26eWXYIYp5phklmnmmWimGRAAIfkECQQAAQAsAAAAAJYAlgAACP8AAwgcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AA8PEQJiwAMEMCysujBjh4scYGheEDFmyQMqUJWOmzKHx5syIP1cWLHp04NKPO2dcLJL1TtSPMWL2yAF0TtiMLZbWiKH27Nu4I1eELXs3zuDCKeLWTfz4ZgECcitf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"}static#e=this.shared=new _D}class yi{static#e=this.Images=CD.shared;static#t=this.Gifs=_D.shared}class GQ{}class KQ extends GQ{}var ZF=function(t){return t[t.None=0]="None",t[t.RecordControlFile=1]="RecordControlFile",t[t.RecordFile=2]="RecordFile",t[t.RepositoryFile=3]="RepositoryFile",t[t.RecordDisplayPicture=4]="RecordDisplayPicture",t[t.AppLogo=5]="AppLogo",t[t.UserProfilePicture=6]="UserProfilePicture",t[t.MenuIcon=7]="MenuIcon",t[t.Multimedia=8]="Multimedia",t[t.ClientLogo=9]="ClientLogo",t[t.GalleryAppLogo=10]="GalleryAppLogo",t[t.LayoutMap=11]="LayoutMap",t[t.EasyStreetDrawing=12]="EasyStreetDrawing",t}(ZF||{});class Jm{constructor(n){this.file=n,this.id=pa(),this.uploadStatus=ro.None}}var ro=function(t){return t[t.None=0]="None",t[t.Uploading=1]="Uploading",t[t.Uploaded=2]="Uploaded",t[t.UploadFailed=3]="UploadFailed",t}(ro||{});const $F=new ke("file-service");let e3=(()=>{class t{constructor(e){this.service=e}updateEndpoint(e,r){this.service.updateEndpointSetting(e,r)}uploadfile(e){return new Ln(r=>{e.uploadStatus=ro.Uploading,r.next({...e}),this.service.uploadFile(e.file).subscribe({next:i=>{if(i&&i.Result&&!i.Result.isUploadProgress){const o=i.Result.url||"";o&&o.length?(e.uploadStatus=ro.Uploaded,e.url=o,r.next({...e})):(e.uploadStatus=ro.UploadFailed,e.uploadError="Failed to upload file.",r.next({...e})),r.complete()}},error:i=>{e.uploadStatus=ro.UploadFailed,e.uploadError=i||"Failed to upload file.",r.next({...e}),r.complete()}})})}static#e=this.\u0275fac=function(r){return new(r||t)(je($F))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Fs=function(t){return t.None="unknown",t.Straight="straight",t.Right="right",t.Left="left",t}(Fs||{});function Wh(t,n=Va){return t=t??YQ,jr((e,r)=>{let i,o=!0;e.subscribe(Yr(r,s=>{const a=n(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function YQ(t,n){return t===n}class ED{constructor(){this.RotateCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAuxJREFUWEftlT1MU1EUx//nvX6YUjEG2mKRttJXQlgcCH5MBEWJn4ORxUFDdHHQzUVHYxzcTHTRxI+44eYHCgjGwQEDbgTpA2wpX22FFKTavvfuMa2FMIAtloSld7zn3nN+53/uOZewzYu2OT5KACUFSgpsVgG5yldfY0A0E8QRYvJm2pgZE0To0XT+ND+lzgAwCm3vvAAuT91RJpFMcXrESjs6AL4MoJrAQQZNZgEIe4nhBxAG+JFJSz6dnp5OFgKRF8DpC3QTaEEwCwLOAhiCxLclNo2adHkxE8QwJ3cKw6wIwi0CNwH03KT9vFEIRH4Ab+AzgCYgM7Sox2Ikz0UikV/rZacoijWhUycxWphxMxYOPsxXjkIBDgOIMolLRPJMuSxGVFVNrQfR0NBgiS+nuwCqMJnEmemxsWyZNlqbAUgy4wcRBoSQrsed9phzPtECBkUrdvVhcFBbCeLyBFqZ0Anma9Gw+qIoAIdHaQeoasUJEaZSnOq3knUIgC+3H45WlisrELtra3dZDPkUIM3Ohb71FQWw3mXnPuU4BL1fa2PQyVhotKuQl7/2TN4SrAvgU9rA9G6tTQCn46Hgmy0HqPQpzTLInZaMtwvj44lsgMZGszO+qALw5AJGLIZlf1rWmhmoXoVgMRcLq51FlcDlDVxg4AEx2ufCwd5VZ42NZkd8qTXTno4yU290mSsk6PeZcZAIFQBsTPgS+x48UBSA2++v0XXpFQMLjjJz2/DwcHqjGbBoSPWAcEFIzwCu2hIAALLDW3eVwHeZ0O+wmc//CyKh0UsCTmS/CMLXohXIZOt2u2262X4P4IsADxDkO7Ksqcu6vpSx22S5XBimwN9RjEMAXhOREMzOWCjYUlQJVi5nIDSzvYPAV3KPLwggkrUzakCoI2CWGU8swvI4Lf+uh0T26ITavSUAOSey2+936xo1Q8IxMNVm/0JQmMAfALlvLrRnEvioF9qO/zUHCnVeyLkSQEmBkgLbrsAfyPcpMDvN/okAAAAASUVORK5CYII=",this.Submit="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAelJREFUWEftlU9rE0EYh593NxtKKojEJCXUuraJAQM9mEv1ooLiUUHBz+DFk170UJRiezEWPIiHoi0ifgDBT9GjkbQhNZBCk9SGgBgo2XkloBDqn/yxJiA713lnfs88886uMOIhI87HB/AN+Ab+WwP28VQqtJvPfwH0T9+af2HAjp5KpTHmmnre21q5uDlMACviJmeBR6KcF7hTKW2+GRrAxFQibSx5jDIHrAW94GK5/GFvKACxqeS0wnOEs8ArQyC7W/q4M5QeiEzOJMS2XgNpFVZEWovVra1qt/C2mV6a0IpEzoRqtVy7o38a0ROJGSxrDfQcygttOvd+V/ur9V0BJtzERaOSFdGHlU+Fd4D3fSOJTE4nxLKfIVwCXa2WCrc75nv603cFiJ5M3gCWgYYYvV+JHn3P+nor7J5O2aoLwBWB1fC4czeXy+33lNpR1BWATMaJ1hq3EJlHtCmGB14gkLeNWUC5rJiXlsPSTqFQ6ze81x4gHo+HWoEjNxGdF9hXYQPlAuhKq8XTve1CeZDwngHahbHY7LiOfb0O8gQIt6/F82T5c3lje9DwvgDaxa7rjjUJXMVYcxI02UG1dwJ374GDx8tknGP1eqheLDb+5uQ/1vYPcBipfb2CQw48uJ1vwDfgGxi5gW88aZkhHj/UJAAAAABJRU5ErkJggg==",this.Refresh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQbSURBVHgB7ZhfaFt1FMfP+d3cpE1Z12Rb4rKYpl3SrVZasCCCQ1R88h+KMnwQBQVFQfRhwhzoiwx88XXsQZwKPgxRhij45J9tiCIbslln20i7pt2aphqXknZNcu/x++tuoYTpcm8ydOx+4PD7d3+//P6d3zknRD4+Pj4+Pj4+Ny9M7YOjmcymUI13WMy7WOR21MVsIUspOW8znzbZmo50ds6PjY1VGzvH48NdEl7duTA1foZc0K4FqG2pzJOK+RkhugPlW64y9irkdxL6SQx6vzg1eQJl0Q2ZTCZUrqsDJBJeOD/5OrlAUYtE+vs3x3qzR5n5KGbzEKq2O5O3IZYjOh+C3IaWZ9mm72Lp7GHdF3VGucqvYvJvMUkHuSRALbAlPbBbWXQIG3mfUyWYYA7pN8hNMvFfukZIIqgbRNv9SFPOly+YtjGIhZzTefKI5wWsHXtNjiB7p1NVEZG3VUCOFHp6SnTqVG3j90NDQ8GFSiXKEtiHA3oFVUFMfA/SPdQCnhaQTCY7yzV+D9m7nKoiJv9ycSb3KTn3uhFHceeJ7t0fT83lheldlA1qEU8LqBqdDyJ5zCkuic1PFPNrSnlN0unpwIodiOMU2vKAuFbiRCIRhsLuRTYMsbDzB4v5iaYmj93H5M0XhfkNasMDonF9Apc5HA2IrN/bnBjGsWb6pdPpjorMvgmdPkBtxPUumIbahSSh8ziJM4tT4xNNdFMrYu7Dq7Sf2ox7HVD2MMmV6ytCP9I/KO1GEomBqEXSh14f/Nt3GOgHconrBeAKxNfzUMO5ZvpcuDCxiOR5ug60qkjX3P3rjesFwNwX1vO4QjvoP8b9FbL5l3U3TcTWVliXvJ4E43UKVatVBWR2dvay27Fcn0DdknNILq51Zh7Z2r87Sx6J37pzaFnM7+tmVx7G8WSsry9GLnH/jNbDJTyfJ3UeW5VVlvUoeUQM9TSSEUgU8luwViuTS1z7IpVKoRbujmgb8DBphwz+UFdP5HjlUinf9CCjo2Y8tGkvduAdlEzIMuTgxfz0WXKJp1fIrC9/CRfic6fYjWE+i/UOPE5NBEjaIscWy6+hv3YGdYygN+OLQK3yFXnAs0OlPdKa0XEcdmHUGWeJGUFJgD6ezyVLRN/WqWHiS/XgFiMgh7DzOvDRp68V9uegtXI3FHiFPNCSR7i9NztoCR3GKPc4VdpGj2NRXzPbObHVH6IQQJLE0TKCtgfwzdYNv35C2fLS/ExujDzSsku7OZWKBFXoQ4RdjzQ02Y6wIw3XVY6tSvW5SzMzJWqBdgX1Rqw38xTmiFdFdFC/7Spj47pwAYbwNC79R4XpiU/oygJboq1/qyBI7w7VVdJaC955GKeiFyIwGAVYvbO4S7+umjL3Zy63RP8DN8THx8fHx8fH50bnbzilXEHX539GAAAAAElFTkSuQmCC"}static#e=this.shared=new ED}class DD{constructor(){this.Loading="data:image/gif;base64,R0lGODlhlgCWAPcBAAAAAAD/AGaz52az52a05ma05ma05ma052a052a052a052a052a052a06Ga06Ga15ma152a26We05me052e052e15me16Ge16Giz52i152i352m252q16nC/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/7yH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAwABACwAAAAAlgCWAIcAAAAA/wBms+dms+dmtOZmtOZmtOZmtOdmtOdmtOdmtOdmtOdmtOdmtOhmtOhmteZmtedmtulntOZntOdntOdnteZntehntehos+dotedot+dp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eM3ktR9CtzwROnDm1a1nD368puvf251LrJyOPLYA5eHBS/yunib7yud7N6csoL7s9dptvo8c/yL8+vYJB1F+N+3HWH2s0QdggPKld5tOBmIgQEb/LRgfdRRFeN9OlHFUIYANVqShgFx9eJ5GI4b41YccjWjWhi126NiMNNZo44045qjjjjz26OOPQAYp5JBEFmnkkUgmqeSSTDbp5JNQRinllFRWaeWVWGap5ZZcdunll2CGKeaYZJZp5plopqnmmmw+FRAAIfkECQMAAQAsAAAAAJYAlgAACP8AAwgcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AAwseTDgthsOICydEzDixYoKNI2N4LFCy5MeWLRfOnJkwZ80aG4sUzfPzZYydO3IAjdM064muQ69OfdP1adi2UceubZs07twVe0/mLTx4ceO2ORDPLMC3ROGHKUIfXtN0c8bSp2c/bvOzgOvUn2un/91b+c3Zkr9HR8494vTwNdE3Vn/xPUX5wHHiP/xdd3r1kd03nk4BhhbZdwgWKF57Wv2HIHjwQTTgVg4+6JiA+XVVIYAY7feahgdaqJGHzn1VIUckrkfWbaopSNmLMMYo44w01mjjjTjmqOOOPPbo449ABinkkEQWaeSRSCap5JJMNunkk1BGKeWUVFZp5ZVYZqnlllx26eWXYIYp5phklmnmmWimGRAAIfkECQQAAQAsAAAAAJYAlgAACP8AAwgcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AA8PEQJiwAMEMCysujBjh4scYGheEDFmyQMqUJWOmzKHx5syIP1cWLHp04NKPO2dcLJL1TtSPMWL2yAF0TtiMLZbWiKH27Nu4I1eELXs3zuDCKeLWTfz4ZgECcitf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"}static#e=this.shared=new DD}class XQ{static#e=this.Images=ED.shared;static#t=this.Gifs=DD.shared}let JQ=(()=>{class t{static#e=this.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"};static#t=this.DEFAULT_IMAGE_TYPE="image/jpeg";static#n=this.DEFAULT_IMAGE_QUALITY=.92;getAvailableDevices(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((e,r)=>{navigator.mediaDevices.enumerateDevices().then(i=>{e(i.filter(o=>"videoinput"===o.kind))}).catch(i=>{r(i.message||i)})}):Promise.reject("Couldn't find camera information")}stopMediaTracks(e,r){r.pause();const i=e.getTracks();i&&i.length&&i.forEach(o=>o.stop())}getMediaConstraintsForDevice(e,r){const i=r||t.DEFAULT_VIDEO_OPTIONS;return e&&(i.deviceId={exact:e}),i}getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){const r=e;if(r.exact)return String(r.exact);if(r.ideal)return String(r.ideal)}}}getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const r=e.getConstraints().deviceId||"";return this.getValueFromConstrainDOMString(r)}}initiateWebcam(e,r,i){return new Promise((o,s)=>{const a=this.getMediaConstraintsForDevice(r,i);navigator.mediaDevices.getUserMedia({video:a}).then(u=>{const c=u.getVideoTracks();let l=-1;if(c.length){const f=this.getDeviceIdFromMediaStreamTrack(c[0]);f&&(l=e.findIndex(p=>p.deviceId===f))}o({stream:u,activeDeviceIndex:l})}).catch(u=>{s(u.message||u)})})}takeSnapShot(e,r){return new Promise((i,o)=>{e.width=r.videoWidth,e.height=r.videoHeight;const s=e.getContext("2d");s?(s.drawImage(r,0,0),e.toBlob(a=>{a?i(new File([a],Date.now()+".jpg",{type:t.DEFAULT_IMAGE_TYPE})):o("Unable to capture snapshot.")},t.DEFAULT_IMAGE_TYPE,t.DEFAULT_IMAGE_QUALITY)):o("Unable to capture snapshot.")})}static#r=this.\u0275fac=function(r){return new(r||t)};static#i=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ZQ=["VideoElement"],$Q=["Overlay"],eY=["Canvas"];function tY(t,n){if(1&t&&(Ae(0),z(1,"h3",11),we(2),G(),xe()),2&t){const e=n.ngIf;M(2),nn(e)}}function nY(t,n){1&t&&(Ae(0),Fe(1,"canvas",12,3),xe())}function rY(t,n){if(1&t&&(Ae(0),z(1,"div",13),Fe(2,"img",14),G(),xe()),2&t){const e=j();M(2),U("src",e.dataUrl,He)}}function iY(t,n){if(1&t){const e=Te();z(0,"div",16)(1,"div",17),me("click",function(){return ee(e),te(j(2).rotateCameraClicked())}),Fe(2,"img",18),G()()}if(2&t){const e=j(2);M(2),U("src",e.Assets.Images.RotateCamera,He)}}function oY(t,n){if(1&t&&(Ae(0),_e(1,iY,3,1,"div",15),xe()),2&t){const e=j();M(),U("ngIf",e.availableDevices.length>1)}}function sY(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",17),me("click",function(){return ee(e),te(j().submitImageClicked())}),Fe(2,"img",19),G(),z(3,"div",17),me("click",function(){return ee(e),te(j().refreshImageClicked())}),Fe(4,"img",20),G(),xe()}if(2&t){const e=j();M(2),U("src",e.Assets.Images.Submit,He),M(2),U("src",e.Assets.Images.Refresh,He)}}function aY(t,n){if(1&t){const e=Te();z(0,"div",21),me("click",function(){return ee(e),te(j().captureImageClicked())}),G()}}let Zm=class k2{constructor(n,e){this.sanitizer=n,this.service=e,this.autocapture=!1,this.allowOverlay=!1,this.captureCompleted=new Ie,this.videoReady=new Ie,this.videoEnded=new Ie,this.Assets=XQ,this.error$=new Qe(void 0),this.isPreviewing=!1,this.availableDevices$=new Qe([]),this.deviceIndex=-1}get availableDevices(){return this.availableDevices$.getValue()}set availableDevices(n){this.availableDevices$.next(n)}ngOnInit(){Uc(this.service.getAvailableDevices()).pipe(Xt(this)).subscribe({next:n=>{this.availableDevices=n},error:n=>{this.availableDevices=[],console.error(n)}})}ngAfterViewInit(){this.availableDevices$.pipe(Xt(this),Wh()).subscribe(n=>{n.length>0&&this.startCaptureV2()})}startCaptureV2(n=-1){this.isPreviewing=!1,this.dataUrl=void 0,this.capturedFile=void 0,this.stopCapture(),this.service.initiateWebcam(this.availableDevices,n>=0?this.availableDevices[n].deviceId:void 0,void 0).then(e=>{this.error$.next(void 0),this.startCapture(e.stream,e.activeDeviceIndex)}).catch(e=>this.error$.next(e))}startCapture(n,e){this.videoElement&&(this.stream=n,this.videoElement.nativeElement.srcObject=n,this.videoElement.nativeElement.play(),this.deviceIndex=e,setTimeout(()=>{this.videoElement&&this.overlayElement&&this.videoReady.next({video:this.videoElement.nativeElement,canvas:this.overlayElement.nativeElement})},750))}stopCapture(){this.stream&&this.videoElement?.nativeElement&&this.service.stopMediaTracks(this.stream,this.videoElement.nativeElement),this.videoEnded.next()}ngOnDestroy(){this.stopCapture()}setCapturedImage(n){n?this.readFile(n).then(e=>{e?(this.isPreviewing=!0,this.capturedFile=n,this.dataUrl=e):(this.isPreviewing=!1,this.capturedFile=void 0,this.dataUrl=void 0)}):(this.isPreviewing=!1,this.capturedFile=void 0,this.dataUrl=void 0)}readFile(n){return new Promise(e=>{const r=new FileReader;r.onload=()=>{e(this.sanitizer.bypassSecurityTrustUrl(r.result))},r.onerror=()=>{e(void 0)},r.readAsDataURL(n)})}captureImageClicked(){this.canvasElement?.nativeElement&&this.videoElement?.nativeElement&&this.service.takeSnapShot(this.canvasElement.nativeElement,this.videoElement.nativeElement).then(n=>{this.stopCapture(),this.autocapture?this.captureCompleted.next(n):this.setCapturedImage(n)}).catch(n=>{this.setCapturedImage(void 0),console.error(n)})}rotateCameraClicked(){-1!==this.deviceIndex&&this.startCaptureV2((this.deviceIndex+1)%this.availableDevices.length)}submitImageClicked(){this.isPreviewing&&this.capturedFile&&this.captureCompleted.next(this.capturedFile)}refreshImageClicked(){this.startCaptureV2(this.deviceIndex)}requestCaptureImage(){this.captureImageClicked()}static#e=this.\u0275fac=function(e){return new(e||k2)(ve(Fh),ve(JQ))};static#t=this.\u0275cmp=bt({type:k2,selectors:[["web-cam"]],viewQuery:function(e,r){if(1&e&&(dr(ZQ,5),dr($Q,5),dr(eY,5)),2&e){let i;fr(i=hr())&&(r.videoElement=i.first),fr(i=hr())&&(r.overlayElement=i.first),fr(i=hr())&&(r.canvasElement=i.first)}},inputs:{autocapture:"autocapture",allowOverlay:"allowOverlay"},outputs:{captureCompleted:"captureCompleted",videoReady:"videoReady",videoEnded:"videoEnded"},standalone:!0,features:[pr],decls:20,vars:24,consts:[["Canvas",""],["VideoElement",""],["capturing",""],["Overlay",""],[1,"capture-container"],[4,"ngIf"],[1,"video-container"],[2,"display","none"],[3,"playsInline","autoplay"],[1,"controls"],[4,"ngIf","ngIfElse"],[1,"error"],[2,"background-color","transparent"],[1,"preview"],["alt","","srcset","",3,"src"],["class","top-controls",4,"ngIf"],[1,"top-controls"],[1,"button",3,"click"],["alt","Rotate camera",3,"src"],["alt","Submit",3,"src"],["alt","Capture Again",3,"src"],[1,"capture",3,"click"]],template:function(e,r){if(1&e&&(z(0,"div",4),_e(1,tY,3,1,"ng-container",5),Bt(2,"async"),z(3,"div",6),Bt(4,"async"),Bt(5,"async"),Fe(6,"canvas",7,0)(8,"video",8,1),_e(10,nY,3,0,"ng-container",5),G(),_e(11,rY,3,1,"ng-container",5)(12,oY,2,1,"ng-container",5),Bt(13,"async"),Bt(14,"async"),z(15,"div",9),Bt(16,"async"),_e(17,sY,5,2,"ng-container",10)(18,aY,1,0,"ng-template",null,2,Mt),G()()),2&e){const i=gt(19);M(),U("ngIf",Lt(2,12,r.error$)),M(2),Xn("display",r.isPreviewing||null!==Lt(4,14,r.error$)&&void 0!==Lt(5,16,r.error$)?"none":"block"),M(5),U("playsInline",!0)("autoplay",!1),M(2),U("ngIf",r.allowOverlay),M(),U("ngIf",r.isPreviewing&&r.dataUrl),M(),U("ngIf",!r.isPreviewing&&(null===Lt(13,18,r.error$)||void 0===Lt(14,20,r.error$))),M(3),Xn("display",Lt(16,22,r.error$)||r.autocapture?"none":"flex"),M(2),U("ngIf",r.isPreviewing)("ngIfElse",i)}},dependencies:[Zn,gr,Zo],styles:[".capture-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;position:relative}.error[_ngcontent-%COMP%]{color:#c00!important;text-align:center;padding:16px;margin:0}.video-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000}video[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000}canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000}.top-controls[_ngcontent-%COMP%]{position:absolute;top:0;height:72px;left:0;width:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-end;background-color:#fff4;padding:8px}.top-controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:36px;height:36px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:18px}.top-controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;height:28px}.controls[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:72px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;background-color:#fff8;padding:8px;gap:16px}.controls[_ngcontent-%COMP%]   .capture[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:28px;background-color:#d00}.controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:48px;height:48px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:24px}.controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;height:28px}.preview[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;display:flex;align-items:center;justify-content:center}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]})};Zm=vi([ji()],Zm);var t3=function(t,n){return(t3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function Bs(t,n){function e(){this.constructor=t}t3(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function Pe(t,n,e,r){return new(e||(e=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(l){o(l)}}function a(c){try{u(r.throw(c))}catch(l){o(l)}}function u(c){c.done?i(c.value):new e(function(l){l(c.value)}).then(s,a)}u((r=r.apply(t,n||[])).next())})}function Oe(t,n){var e,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return function(l){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){s=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){s.label=l[1];break}if(6===l[0]&&s.label<i[1]){s.label=i[1],i=l;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(l);break}i[2]&&s.ops.pop(),s.trys.pop();continue}l=n.call(t,s)}catch(f){l=[6,f],r=0}finally{e=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}}var uY=function(){function t(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(n,e){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},t.prototype.registerFlag=function(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},null!=this.urlFlags[n]){var i=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+i+"."),this.set(n,i)}},t.prototype.get=function(n){return n in this.flags||(this.flags[n]=this.evaluateFlag(n)),this.flags[n]},t.prototype.getNumber=function(n){return this.get(n)},t.prototype.getBool=function(n){return this.get(n)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(n,e){if(null==this.flagRegistry[n])throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,null!=this.flagRegistry[n].setHook&&this.flagRegistry[n].setHook(e)},t.prototype.evaluateFlag=function(n){if(null==this.flagRegistry[n])throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},t.prototype.setFlags=function(n){this.flags=Object.assign({},n)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var n=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var r,i=(r={},this.global.location.search.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return function cY(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}(r,s[0],s[1]),s.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var s=o.split(":"),a=s[0];n.urlFlags[a]=function(c,l){if("true"===(l=l.toLowerCase())||"false"===l)return"true"===l;if(""+ +l===l)return+l;throw new Error("Could not parse value flag value "+l+" for flag "+c+".")}(a,s[1])})}},t}();function ue(){return n3}var n3=null,Hh=new Map,$m=new Map;function r3(t,n){var e=ID(t,n);return Hh.get(e)}function i3(t){for(var n=Hh.entries(),e=[];;){var r=n.next(),o=r.value;if(r.done)break;var a=o[1];o[0].split("_")[0]===t&&e.push(a)}return e}function o3(t){var n=t.kernelName,e=t.backendName,r=ID(n,e);if(Hh.has(r))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");Hh.set(r,t)}function dY(t){var n=t.kernelName;$m.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),$m.set(n,t)}function ID(t,n){return n+"_"+t}function s3(t){for(var n=t.length,e=0,r=0;n>0;)r=Math.random()*n|0,e=t[--n],t[n]=t[r],t[r]=e}function jb(t,n,e){return Math.max(t,Math.min(n,e))}function SD(t){return t%2==0?t:t+1}function a3(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function k(t,n){if(!t)throw new Error("string"==typeof n?n:n())}function Nt(t,n,e){void 0===e&&(e=""),k(Ar(t,n),function(){return e+" Shapes "+t+" and "+n+" must match"})}function pd(t){k(null!=t,function(){return"The input to the tensor constructor must be a non-null value."})}function bu(t,n,e){if(void 0===n&&(n=[]),void 0===e&&(e=!1),null==n&&(n=[]),Array.isArray(t)||Zr(t)&&!e)for(var r=0;r<t.length;++r)bu(t[r],n,e);else n.push(t);return n}function Le(t){if(0===t.length)return 1;for(var n=t[0],e=1;e<t.length;e++)n*=t[e];return n}function Ar(t,n){if(t===n)return!0;if(null==t||null==n||t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Hn(t){return t%1==0}function u3(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var n=Math.exp(2*t);return(n-1)/(n+1)}function zb(t){var n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function gd(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function TD(t,n,e){return void 0===n&&(n=function(r){return 0}),new Promise(function(r,i){var o=0,s=function(){if(t())r();else{o++;var a=n(o);null!=e&&o>=e?i():setTimeout(s,a)}};s()})}function c3(t,n){for(var e=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(-1===t[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(-1===r){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+t);return t}if(0===e)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=t.slice();return o[r]=n/e,o}function xr(t,n){var e=n.length;return k((t=null==t?n.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+t}),k(t.every(function(r){return Hn(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?e+r:r})}function jc(t,n){for(var e=[],r=[],i=null!=n&&Array.isArray(n)&&0===n.length,o=null==n||i?null:xr(n,t).sort(),s=0,a=0;a<t.length;++a){if(null!=o){if(o[s]===a&&1!==t[a])throw new Error("Can't squeeze axis "+a+" since its dim '"+t[a]+"' is not 1");(null==o[s]||o[s]>a)&&1===t[a]&&(e.push(t[a]),r.push(a)),o[s]<=a&&s++}1!==t[a]&&(e.push(t[a]),r.push(a))}return{newShape:e,keptDims:r}}function qh(t,n){var e=null;if(null==t||"float32"===t)e=new Float32Array(n);else if("int32"===t)e=new Int32Array(n);else{if("bool"!==t)throw new Error("Unknown data type "+t);e=new Uint8Array(n)}return e}function ev(t,n){var e=null;if(null==t||"float32"===t)e=new Float32Array(n);else if("int32"===t)e=new Int32Array(n);else if("bool"===t)e=new Uint8Array(n);else{if("string"!==t)throw new Error("Unknown data type "+t);e=new Array(n)}return e}function l3(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function d3(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function f3(t,n){return!("complex64"===n||"float32"===n&&"complex64"!==t||"int32"===n&&"float32"!==t&&"complex64"!==t||"bool"===n&&"bool"===t)}function Zr(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function MD(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function h3(t){if(null==t)return 0;var n=0;return t.forEach(function(e){return n+=e.length}),n}function zc(t){return"string"==typeof t||t instanceof String}function p3(t){return"boolean"==typeof t}function g3(t){return"number"==typeof t}function Gh(t){return Array.isArray(t)?Gh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":g3(t)?"float32":zc(t)?"string":p3(t)?"bool":"float32"}function Vc(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Vb(t,n){for(var e=n;e<t;++e)if(t%e==0)return e;return t}function Ls(t){var n=t.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=t[n-1];for(var r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function RD(t,n,e){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=bu(t)),e&&l3(t,n),s=n,(o=t)instanceof Float32Array&&"float32"===s||o instanceof Int32Array&&"int32"===s||o instanceof Uint8Array&&"bool"===s)return t;var o,s;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(t);if("int32"===n)return new Int32Array(t);if("bool"===n){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)0!==Math.round(t[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+n)}function kD(t,n){if(0===t.length)return n[0];var e=t.reduce(function(r,i){return r*i});if(0===e)return[];if(e!==n.length)throw new Error("["+t+"] does not match the input size.");return function r(i,o,s){var a=new Array;if(1===o.length)for(var u=o[0],c=0;c<u;c++)a[c]=s[i+c];else{u=o[0];var l=o.slice(1),f=l.reduce(function(p,g){return p*g});for(c=0;c<u;c++)a[c]=r(i+c*f,l,s)}return a}(0,t,n)}function PD(t,n){for(var e=Kh(t,n),r=0;r<e.length;r++)e[r]=1;return e}function Kh(t,n){if(null==n||"float32"===n||"complex64"===n)return new Float32Array(t);if("int32"===n)return new Int32Array(t);if("bool"===n)return new Uint8Array(t);throw new Error("Unknown data type "+n)}function Us(){return ue().platform.now()}function OD(t){t.forEach(function(n){k(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function m3(t,n){return void 0===n&&(n="utf-8"),n=n||"utf-8",ue().platform.encode(t,n)}function tv(t,n){return void 0===n&&(n="utf-8"),n=n||"utf-8",ue().platform.decode(t,n)}function ND(t,n,e){if(0===n)return 0;if(1===n)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=e[i]*t[i];return r}function v3(t,n,e){if(0===n)return[];if(1===n)return[t];for(var r=new Array(n),i=0;i<r.length-1;++i)r[i]=Math.floor(t/e[i]),t-=r[i]*e[i];return r[r.length-1]=t,r}Object.freeze({shuffle:s3,clamp:jb,nearestLargerEven:SD,sum:a3,randUniform:function(t,n){var e=Math.random();return n*e+(1-e)*t},distSquared:function(t,n){for(var e=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(n[r]);e+=i*i}return e},assert:k,assertShapesMatch:Nt,assertNonNull:pd,flatten:bu,sizeFromShape:Le,isScalarShape:function(t){return 0===t.length},arraysEqual:Ar,isInt:Hn,tanh:u3,sizeToSquarishShape:zb,createShuffledIndices:function(t){for(var n=new Uint32Array(t),e=0;e<t;++e)n[e]=e;return s3(n),n},rightPad:gd,repeatedTry:TD,inferFromImplicitShape:c3,parseAxisParam:xr,squeezeShape:jc,getTypedArrayFromDType:qh,getArrayFromDType:ev,checkConversionForErrors:l3,isValidDtype:d3,hasEncodingLoss:f3,isTypedArray:Zr,bytesPerElement:MD,bytesFromStringArray:h3,isString:zc,isBoolean:p3,isNumber:g3,inferDtype:Gh,isFunction:Vc,nearestDivisor:Vb,computeStrides:Ls,toTypedArray:RD,toNestedArray:kD,makeOnesTypedArray:PD,makeZerosTypedArray:Kh,now:Us,assertNonNegativeIntegerDimensions:OD,fetch:function(t,n){return ue().platform.fetch(t,n)},encodeString:m3,decodeString:tv,locToIndex:ND,indexToLoc:v3});var fY=function(){function t(n,e){this.backendTimer=n,this.logger=e,null==e&&(this.logger=new hY)}return t.prototype.profileKernel=function(n,e,r){var i,o=this,s=this.backendTimer.time(function(){i=r()});return i.forEach(function(a){a.data().then(function(u){(function(c,l,f){if("float32"!==l)return!1;for(var p=0;p<c.length;p++){var g=c[p];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+f+"'"),!0}})(u,a.dtype,n),s.then(function(c){var l="";null!=c.getExtraProfileInfo&&(l=c.getExtraProfileInfo()),o.logger.logKernelProfile(n,a,u,c.kernelMs,e,l)})})}),i},t}(),hY=function(){function t(){}return t.prototype.logKernelProfile=function(n,e,r,i,o,s){var a="number"==typeof i?gd(i+"ms",9):i.error,u=gd(n,25),c=e.rank,l=e.size,f=gd(e.shape.toString(),14),p="";for(var g in o){var m=o[g].shape||e.shape,y=m.length;p+=g+": "+y+"D "+(y>0?m:"")+" "}console.log("%c"+u+"\t%c"+a+"\t%c"+c+"D "+f+"\t%c"+l+"\t%c"+p+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}();function rv(t,n,e){return gd(Array.isArray(t)?parseFloat(t[0].toFixed(7))+" + "+parseFloat(t[1].toFixed(7))+"j":zc(t)?"'"+t+"'":"bool"===e?w3(t):parseFloat(t.toFixed(7)).toString(),n)}function w3(t){return 0===t?"false":"true"}function iv(t){for(var n=[],e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var ov=function(){function t(n,e,r){var i=this;if(this.dtype=e,this.shape=n.slice(),this.size=Le(n),null!=r){var o=r.length;k(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ev(e,this.size),this.strides=Ls(n)}return t.prototype.set=function(n){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];0===r.length&&(r=[0]),k(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=n},t.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];0===n.length&&(n=[0]);for(var r=0,i=0,o=n;i<o.length;i++){var s=o[i];if(s<0||s>=this.shape[r])throw new Error("Requested out of range element at "+n+".   Buffer shape="+this.shape);r++}for(var u=n[n.length-1],c=0;c<n.length-1;++c)u+=this.strides[c]*n[c];return this.values[u]},t.prototype.locToIndex=function(n){if(0===this.rank)return 0;if(1===this.rank)return n[0];for(var e=n[n.length-1],r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e},t.prototype.indexToLoc=function(n){if(0===this.rank)return[];if(1===this.rank)return[n];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return ma().makeTensor(this.values,this.shape,this.dtype)},t}(),ma=null,se=null,b3=null,hn=function(){function t(n,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Le(n),this.strides=Ls(n),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),k(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},t.prototype.as3D=function(n,e,r){return this.throwIfDisposed(),this.reshape([n,e,r])},t.prototype.as4D=function(n,e,r,i){return this.throwIfDisposed(),this.reshape([n,e,r,i])},t.prototype.as5D=function(n,e,r,i,o){return this.throwIfDisposed(),this.reshape([n,e,r,i,o])},t.prototype.asType=function(n){return this.throwIfDisposed(),se.cast(this,n)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Pe(this,void 0,void 0,function(){var n;return Oe(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,se.buffer(this.shape,this.dtype,n)]}})})},t.prototype.bufferSync=function(){return se.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Pe(this,void 0,void 0,function(){var n;return Oe(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,kD(this.shape,n)]}})})},t.prototype.arraySync=function(){return kD(this.shape,this.dataSync())},t.prototype.data=function(){return Pe(this,void 0,void 0,function(){var n,e;return Oe(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=ma().read(this.dataId),"string"!==this.dtype?[3,2]:[4,n];case 1:e=r.sent();try{return[2,e.map(function(i){return tv(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var n=ma().readSync(this.dataId);if("string"===this.dtype)try{return n.map(function(e){return tv(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},t.prototype.bytes=function(){return Pe(this,void 0,void 0,function(){var n;return Oe(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,ma().read(this.dataId)];case 1:return n=e.sent(),"string"===this.dtype?[2,n]:[2,new Uint8Array(n.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(ma().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(n){return void 0===n&&(n=!1),se.print(this,n)},t.prototype.reshape=function(n){return this.throwIfDisposed(),se.reshape(this,n)},t.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},t.prototype.expandDims=function(n){return void 0===n&&(n=0),se.expandDims(this,n)},t.prototype.cumsum=function(n,e,r){return void 0===n&&(n=0),void 0===e&&(e=!1),void 0===r&&(r=!1),se.cumsum(this,n,e,r)},t.prototype.squeeze=function(n){return this.throwIfDisposed(),se.squeeze(this,n)},t.prototype.clone=function(){return this.throwIfDisposed(),se.clone(this)},t.prototype.oneHot=function(n,e,r){return this.throwIfDisposed(),se.oneHot(this,n,e,r)},t.prototype.toString=function(n){return void 0===n&&(n=!1),function pY(t,n,e,r){var i=Ls(n),o=function(c,l,f,p){var g=Le(l),m=p[p.length-1],y=new Array(m).fill(0),w=l.length,b="complex64"===f?iv(c):c;if(w>1)for(var A=0;A<g/m;A++)for(var C=A*m,_=0;_<m;_++)y[_]=Math.max(y[_],rv(b[C+_],0,f).length);return y}(t,n,e,i),s=n.length,a=function c(l,f,p,g,m,y){void 0===y&&(y=!0);var w="complex64"===p?2:1,b=f[0],A=f.length;if(0===A)return"complex64"===p?[rv(iv(l)[0],0,p)]:"bool"===p?[w3(l[0])]:[l[0].toString()];if(1===A){if(b>20){var _=Array.from(l.slice(0,3*w)),E=Array.from(l.slice((b-3)*w,b*w));return"complex64"===p&&(_=iv(_),E=iv(E)),["["+_.map(function(de,X){return rv(de,m[X],p)}).join(", ")+", ..., "+E.map(function(de,X){return rv(de,m[b-3+X],p)}).join(", ")+"]"]}return["["+("complex64"===p?iv(l):Array.from(l)).map(function(de,X){return rv(de,m[X],p)}).join(", ")+"]"]}var I=f.slice(1),P=g.slice(1),O=g[0]*w,F=[];if(b>20){for(var N=0;N<3;N++){var Q=(q=N*O)+O;F.push.apply(F,c(l.slice(q,Q),I,p,P,m,!1))}for(F.push("..."),N=b-3;N<b;N++)Q=(q=N*O)+O,F.push.apply(F,c(l.slice(q,Q),I,p,P,m,N===b-1))}else for(N=0;N<b;N++){var q;Q=(q=N*O)+O,F.push.apply(F,c(l.slice(q,Q),I,p,P,m,N===b-1))}var $=2===A?",":"";for(F[0]="["+F[0]+$,N=1;N<F.length-1;N++)F[N]=" "+F[N]+$;var ce=",\n";for(N=2;N<A;N++)ce+="\n";return F[F.length-1]=" "+F[F.length-1]+"]"+(y?"":ce),F}(t,n,e,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+e),u.push("  rank: "+s),u.push("  shape: ["+n+"]"),u.push("  values:")),u.push(a.map(function(c){return"    "+c}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,n)},t.prototype.tile=function(n){return this.throwIfDisposed(),se.tile(this,n)},t.prototype.gather=function(n,e){return void 0===e&&(e=0),this.throwIfDisposed(),se.gather(this,n,e)},t.prototype.matMul=function(n,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),this.throwIfDisposed(),se.matMul(this,n,e,r)},t.prototype.dot=function(n){return this.throwIfDisposed(),se.dot(this,n)},t.prototype.norm=function(n,e,r){return void 0===n&&(n="euclidean"),void 0===e&&(e=null),void 0===r&&(r=!1),this.throwIfDisposed(),se.norm(this,n,e,r)},t.prototype.slice=function(n,e){return this.throwIfDisposed(),se.slice(this,n,e)},t.prototype.reverse=function(n){return this.throwIfDisposed(),se.reverse(this,n)},t.prototype.concat=function(n,e){return void 0===e&&(e=0),this.throwIfDisposed(),n instanceof t&&(n=[n]),se.concat([this].concat(n),e)},t.prototype.split=function(n,e){return void 0===e&&(e=0),this.throwIfDisposed(),se.split(this,n,e)},t.prototype.stack=function(n,e){return void 0===e&&(e=0),se.stack([this,n],e)},t.prototype.unstack=function(n){return void 0===n&&(n=0),se.unstack(this,n)},t.prototype.pad=function(n,e){return void 0===e&&(e=0),se.pad(this,n,e)},t.prototype.batchNormalization=function(n,e,r,i,o){return void 0===r&&(r=.001),b3("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,i,r)},t.prototype.batchNorm=function(n,e,r,i,o){return void 0===o&&(o=.001),this.throwIfDisposed(),se.batchNorm(this,n,e,r,i,o)},t.prototype.all=function(n,e){return void 0===n&&(n=null),void 0===e&&(e=!1),this.throwIfDisposed(),se.all(this,n,e)},t.prototype.any=function(n,e){return void 0===n&&(n=null),void 0===e&&(e=!1),this.throwIfDisposed(),se.any(this,n,e)},t.prototype.logSumExp=function(n,e){return void 0===n&&(n=null),void 0===e&&(e=!1),this.throwIfDisposed(),se.logSumExp(this,n,e)},t.prototype.sum=function(n,e){return void 0===n&&(n=null),void 0===e&&(e=!1),this.throwIfDisposed(),se.sum(this,n,e)},t.prototype.prod=function(n,e){return void 0===n&&(n=null),void 0===e&&(e=!1),this.throwIfDisposed(),se.prod(this,n,e)},t.prototype.mean=function(n,e){return void 0===n&&(n=null),void 0===e&&(e=!1),this.throwIfDisposed(),se.mean(this,n,e)},t.prototype.min=function(n,e){return void 0===n&&(n=null),void 0===e&&(e=!1),this.throwIfDisposed(),se.min(this,n,e)},t.prototype.max=function(n,e){return void 0===n&&(n=null),void 0===e&&(e=!1),this.throwIfDisposed(),se.max(this,n,e)},t.prototype.argMin=function(n){return void 0===n&&(n=null),this.throwIfDisposed(),se.argMin(this,n)},t.prototype.argMax=function(n){return void 0===n&&(n=null),this.throwIfDisposed(),se.argMax(this,n)},t.prototype.cast=function(n){return this.throwIfDisposed(),se.cast(this,n)},t.prototype.add=function(n){return this.throwIfDisposed(),se.add(this,n)},t.prototype.addStrict=function(n){return this.throwIfDisposed(),se.addStrict(this,n)},t.prototype.atan2=function(n){return this.throwIfDisposed(),se.atan2(this,n)},t.prototype.sub=function(n){return this.throwIfDisposed(),se.sub(this,n)},t.prototype.subStrict=function(n){return this.throwIfDisposed(),se.subStrict(this,n)},t.prototype.pow=function(n){return this.throwIfDisposed(),se.pow(this,n)},t.prototype.powStrict=function(n){return this.throwIfDisposed(),se.powStrict(this,n)},t.prototype.mul=function(n){return this.throwIfDisposed(),se.mul(this,n)},t.prototype.mulStrict=function(n){return this.throwIfDisposed(),se.mulStrict(this,n)},t.prototype.div=function(n){return this.throwIfDisposed(),se.div(this,n)},t.prototype.divNoNan=function(n){return this.throwIfDisposed(),se.divNoNan(this,n)},t.prototype.floorDiv=function(n){return this.throwIfDisposed(),se.floorDiv(this,n)},t.prototype.divStrict=function(n){return this.throwIfDisposed(),se.divStrict(this,n)},t.prototype.minimum=function(n){return this.throwIfDisposed(),se.minimum(this,n)},t.prototype.minimumStrict=function(n){return this.throwIfDisposed(),se.minimumStrict(this,n)},t.prototype.maximum=function(n){return this.throwIfDisposed(),se.maximum(this,n)},t.prototype.maximumStrict=function(n){return this.throwIfDisposed(),se.maximumStrict(this,n)},t.prototype.mod=function(n){return this.throwIfDisposed(),se.mod(this,n)},t.prototype.modStrict=function(n){return this.throwIfDisposed(),se.modStrict(this,n)},t.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),se.squaredDifferenceStrict(this,n)},t.prototype.transpose=function(n){return this.throwIfDisposed(),se.transpose(this,n)},t.prototype.notEqual=function(n){return this.throwIfDisposed(),se.notEqual(this,n)},t.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),se.notEqualStrict(this,n)},t.prototype.less=function(n){return this.throwIfDisposed(),se.less(this,n)},t.prototype.lessStrict=function(n){return this.throwIfDisposed(),se.lessStrict(this,n)},t.prototype.equal=function(n){return this.throwIfDisposed(),se.equal(this,n)},t.prototype.equalStrict=function(n){return this.throwIfDisposed(),se.equalStrict(this,n)},t.prototype.lessEqual=function(n){return this.throwIfDisposed(),se.lessEqual(this,n)},t.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),se.lessEqualStrict(this,n)},t.prototype.greater=function(n){return this.throwIfDisposed(),se.greater(this,n)},t.prototype.greaterStrict=function(n){return this.throwIfDisposed(),se.greaterStrict(this,n)},t.prototype.greaterEqual=function(n){return this.throwIfDisposed(),se.greaterEqual(this,n)},t.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),se.greaterEqualStrict(this,n)},t.prototype.logicalAnd=function(n){return this.throwIfDisposed(),se.logicalAnd(this,n)},t.prototype.logicalOr=function(n){return this.throwIfDisposed(),se.logicalOr(this,n)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),se.logicalNot(this)},t.prototype.logicalXor=function(n){return this.throwIfDisposed(),se.logicalXor(this,n)},t.prototype.where=function(n,e){return this.throwIfDisposed(),se.where(n,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),se.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),se.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),se.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),se.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),se.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),se.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),se.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),se.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),se.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),se.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),se.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),se.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),se.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),se.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),se.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),se.abs(this)},t.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),se.clipByValue(this,n,e)},t.prototype.relu=function(){return this.throwIfDisposed(),se.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),se.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),se.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),se.selu(this)},t.prototype.leakyRelu=function(n){return void 0===n&&(n=.2),this.throwIfDisposed(),se.leakyRelu(this,n)},t.prototype.prelu=function(n){return this.throwIfDisposed(),se.prelu(this,n)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),se.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),se.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),se.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),se.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),se.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),se.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),se.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),se.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),se.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),se.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),se.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),se.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),se.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),se.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),se.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),se.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),se.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),se.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),se.round(this)},t.prototype.step=function(n){return void 0===n&&(n=0),this.throwIfDisposed(),se.step(this,n)},t.prototype.softmax=function(n){return void 0===n&&(n=-1),this.throwIfDisposed(),se.softmax(this,n)},t.prototype.logSoftmax=function(n){return void 0===n&&(n=-1),this.throwIfDisposed(),se.logSoftmax(this,n)},t.prototype.resizeBilinear=function(n,e){return void 0===e&&(e=!1),this.throwIfDisposed(),se.image.resizeBilinear(this,n,e)},t.prototype.resizeNearestNeighbor=function(n,e){return void 0===e&&(e=!1),this.throwIfDisposed(),se.image.resizeNearestNeighbor(this,n,e)},t.prototype.conv1d=function(n,e,r,i,o,s){return void 0===i&&(i="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),se.conv1d(this,n,e,r,i,o,s)},t.prototype.conv2d=function(n,e,r,i,o,s){return void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),se.conv2d(this,n,e,r,i,o,s)},t.prototype.conv2dTranspose=function(n,e,r,i,o){return this.throwIfDisposed(),se.conv2dTranspose(this,n,e,r,i,o)},t.prototype.depthwiseConv2D=function(n,e,r,i,o,s){return void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),se.depthwiseConv2d(this,n,e,r,i,o,s)},t.prototype.separableConv2d=function(n,e,r,i,o,s){return void 0===o&&(o=[1,1]),void 0===s&&(s="NHWC"),this.throwIfDisposed(),se.separableConv2d(this,n,e,r,i,o,s)},t.prototype.avgPool=function(n,e,r,i){return this.throwIfDisposed(),se.avgPool(this,n,e,r,i)},t.prototype.maxPool=function(n,e,r,i){return this.throwIfDisposed(),se.maxPool(this,n,e,r,i)},t.prototype.localResponseNormalization=function(n,e,r,i){return void 0===n&&(n=5),void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=.5),se.localResponseNormalization(this,n,e,r,i)},t.prototype.pool=function(n,e,r,i,o){return this.throwIfDisposed(),se.pool(this,n,e,r,i,o)},t.prototype.variable=function(n,e,r){return void 0===n&&(n=!0),this.throwIfDisposed(),ma().makeVariable(this,n,e,r)},t.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),se.unsortedSegmentSum(this,n,e)},t.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),se.batchToSpaceND(this,n,e)},t.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),se.spaceToBatchND(this,n,e)},t.prototype.topk=function(n,e){return void 0===n&&(n=1),void 0===e&&(e=!0),this.throwIfDisposed(),se.topk(this,n,e)},t.prototype.stridedSlice=function(n,e,r,i,o,s,a,u){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),this.throwIfDisposed(),se.stridedSlice(this,n,e,r,i,o,s,a,u)},t.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),se.depthToSpace(this,n,e)},t.prototype.fft=function(){return this.throwIfDisposed(),se.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),se.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),se.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),se.spectral.irfft(this)},t}();Object.defineProperty(hn,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype}});var A3,BD,LD,UD,jD,t,Qh=function(t){function n(e,r,i,o){var s=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return s.trainable=r,s.name=i,s}return Bs(n,t),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Ar(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");ma().disposeTensor(this),this.dataId=e.dataId,ma().incRef(this,null)},n.prototype.dispose=function(){ma().disposeVariable(this),this.isDisposedInternal=!0},n}(hn);Object.defineProperty(Qh,Symbol.hasInstance,{value:function(t){return t instanceof hn&&null!=t.assign&&t.assign instanceof Function}}),(t=A3||(A3={})).R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(BD||(BD={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(LD||(LD={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(UD||(UD={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(jD||(jD={}));var gY={float32:UD,int32:BD,bool:LD,complex64:jD};function qr(t,n){if("string"===t||"string"===n){if("string"===t&&"string"===n)return"string";throw new Error("Can not upcast "+t+" with "+n)}return gY[t][n]}function zD(t){return qr(t,"int32")}function Nn(t,n){if(t.dtype===n.dtype)return[t,n];var e=qr(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function x3(t,n){k(t.dtype===n.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+n.dtype+") input must match"})}function VD(t){var n=[];return function e(r,i,o){if(null!=r){if(r instanceof hn)return void i.push(r);if(s=r,Array.isArray(s)||"object"==typeof s){var s,a=r;for(var u in a){var c=a[u];o.has(c)||(o.add(c),e(c,i,o))}}}}(t,n,new Set),n}Object.freeze({makeTypesMatch:Nn,assertTypesMatch:x3,isTensorInList:function(t,n){return n.some(function(e){return e.id===t.id})},getTensorsInContainer:VD});var WD,C3=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},t}(),mY=function(){function t(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new C3}return t.prototype.ready=function(){return Pe(this,void 0,void 0,function(){var n,e,r;return Oe(this,function(i){switch(i.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];n=this.getSortedBackends(),e=0,i.label=1;case 1:return e<n.length?[4,this.initializeBackend(r=n[e]).success]:[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(n){return n in this.registry||n in this.registryFactory&&!this.initializeBackend(n).asyncInit?this.registry[n]:null},t.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},t.prototype.registerBackend=function(n,e,r){return void 0===r&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:r},!0)},t.prototype.setBackend=function(n){return Pe(this,void 0,void 0,function(){var e,r,i;return Oe(this,function(o){switch(o.label){case 0:if(null==this.registryFactory[n])throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,null!=this.registry[n]?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new fY(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var n=this;i3(this.backendName).forEach(function(e){null!=e.setupFunc&&e.setupFunc(n.backendInstance)})},t.prototype.disposeRegisteredKernels=function(n){var e=this;i3(n).forEach(function(r){null!=r.disposeFunc&&r.disposeFunc(e.registry[n])})},t.prototype.initializeBackend=function(n){var e=this,r=this.registryFactory[n];if(null==r)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,s=i.then(function(a){return!(o<e.pendingBackendInitId||(e.registry[n]=a,e.pendingBackendInit=null,0))}).catch(function(a){return!(o<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(a.stack||a.message),1))});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+n+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var n=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,r){return n.registryFactory[r].priority-n.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var r=n[e],i=this.initializeBackend(r),s=i.asyncInit;if(s||i.success)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(n,e){var r=this.state.tensorInfo.get(e),i=r.backend,o=this.readSync(e);i.disposeData(e),r.backend=n,n.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(n,e){var r,i=this,o=null;if(null==e){if("function"!=typeof n)throw new Error("Please provide a function to tidy()");e=n}else{if("string"!=typeof n&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(n,e,r){n();try{var i=r();return e(),i}catch(o){throw e(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype);return this.addTapeNode(this.state.activeScope.name,{x:n},[e],function(i){return{x:function(){return i.toFloat()}}},[]),e},t.prototype.runKernel=function(n,e,r,i,o){return this.runKernelFunc(null,e,null,n,r,i,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(n,e,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(u){o+="complex64"===u.dtype?3:1});var a=i-e-o-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+n+"'")},t.prototype.runKernelFunc=function(n,e,r,i,o,s,a){var u,c=this;void 0===s&&(s=[]),void 0===a&&(a=[]);var l=[],f=this.isTapeOn();null==i&&(i=null!=this.state.activeScope?this.state.activeScope.name:"");var p,g=function(A){f&&(l=A.map(function(C){return c.keep(c.clone(C))}))},m=this.state.numBytes,y=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var w,b=r3(i,this.backendName);return p=null!=b?function(){var A=c.backend.numDataIds();w=b.kernelFunc({inputs:e,attrs:o,backend:c.backend});var C=Array.isArray(w)?w:[w];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(i,A,C);var _=C.map(function(I){return c.makeTensorFromDataId(I.dataId,I.shape,I.dtype)}),E=_.filter(function(I,P){return a[P]});return g((s||[]).slice().concat(E)),_}:function(){var A=c.backend.numDataIds();w=c.tidy(function(){return n(c.backend,g)});var C=Array.isArray(w)?w:[w];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(i,A,C),C},this.scopedRun(function(){return c.state.kernelDepth++},function(){return c.state.kernelDepth--},function(){u=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(i,e,function(){return p()}):p()}),f&&this.addTapeNode(i,e,u,r,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-m,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-y,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(A){return e[A].shape}),outputShapes:u.map(function(A){return A.shape})}),Array.isArray(w)?u:u[0]},t.prototype.makeTensor=function(n,e,r,i){if(null==n)throw new Error("Values passed to engine.makeTensor() are null");i=i||this.backend;var o=n;"string"===(r=r||"float32")&&zc(n[0])&&(o=n.map(function(l){return m3(l)}));var s=i.write(o,e,r),a=new hn(e,r,s,this.nextTensorId());if(this.incRef(a,i),"string"===r){var u=this.state.tensorInfo.get(s),c=h3(o);this.state.numBytes+=c-u.bytes,u.bytes=c}return a},t.prototype.makeTensorFromDataId=function(n,e,r,i){var o=new hn(e,r=r||"float32",n,this.nextTensorId());return this.incRef(o,i),o},t.prototype.makeVariable=function(n,e,r,i){void 0===e&&(e=!0),r=r||this.nextVariableId().toString(),null!=i&&i!==n.dtype&&(n=n.asType(i));var o=new Qh(n,e,r,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(n,e){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,"string"===n.dtype&&this.state.numStringTensors++,0===r){this.state.numDataBuffers++;var i=0;"complex64"!==n.dtype&&"string"!==n.dtype&&(i=n.size*MD(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof Qh||this.track(n)},t.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,"string"===n.dtype&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?("complex64"!==n.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[n])},t.prototype.disposeVariable=function(n){this.disposeTensor(n),null!=this.state.registeredVariables[n.name]&&delete this.state.registeredVariables[n.name]},t.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,null==n.reasons&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},t.prototype.profile=function(n){return Pe(this,void 0,void 0,function(){var e,r;return Oe(this,function(i){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},t.prototype.addTapeNode=function(n,e,r,i,o){var s=this,a={id:this.state.nextTapeNodeId++,kernelName:n,inputs:e,outputs:r,saved:o},u=function lY(t){return $m.get(t)}(n);null!=u&&(i=u.gradFunc),null!=i&&(a.gradient=function(c){return c=c.map(function(l,f){if(null==l){var p=r[f],g=Kh(p.size,p.dtype);return s.makeTensor(g,p.shape,p.dtype)}return l}),i(c.length>1?c:c[0],o)}),this.state.activeTape.push(a)},t.prototype.keep=function(n){return n.kept=!0,n},t.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(n){for(var e=this,r=VD(n),i=new Set(r.map(function(u){return u.id})),o=0;o<this.state.activeScope.track.length;o++){var s=this.state.activeScope.track[o];s.kept||i.has(s.id)||s.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==a.id||e.track(u)})},t.prototype.gradients=function(n,e,r,i){var o=this;if(void 0===i&&(i=!1),k(e.length>0,function(){return"gradients() received an empty list of xs."}),null!=r&&"float32"!==r.dtype)throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var s=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});k(s instanceof hn,function(){return"The result y returned by f() must be a tensor."});var a=function(u,c,l){for(var f={},p={},g=0;g<c.length;g++)f[c[g].id]=!0;for(g=0;g<u.length;g++){var m=(I=u[g]).inputs;for(var y in m){for(var w=m[y],b=!1,A=0;A<c.length;A++)if(f[w.id]){I.outputs.forEach(function(N){return f[N.id]=!0}),b=!0,p[I.id]=!0;break}if(b)break}}var C={};C[l.id]=!0;var _={};for(g=u.length-1;g>=0;g--)for(m=(I=u[g]).inputs,A=0;A<I.outputs.length;A++)if(C[I.outputs[A].id]){for(var y in m)C[m[y].id]=!0,_[I.id]=!0;break}var E=[];for(g=0;g<u.length;g++){var I;if(p[(I=u[g]).id]&&_[I.id]){var P={};for(var y in I.inputs){var O=I.inputs[y];f[O.id]&&(P[y]=O)}var F=Object.assign({},I);F.inputs=P,F.outputs=I.outputs,E.push(F)}}return E}(this.state.activeTape,e,s);if(!i&&0===a.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,c,l={};l[s.id]=r??(c=PD(Le(u=s.shape),"float32"),V.makeTensor(c,u,"float32")),function(p,g,m){for(var y=function(b){var A=g[b],C=[];if(A.outputs.forEach(function(P){var O=p[P.id];C.push(null!=O?O:null)}),null==A.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+A.kernelName+".");var _=A.gradient(C),E=function(P){if(!(P in _))throw new Error("Cannot backprop through input "+P+". Available gradients found: "+Object.keys(_)+".");var O=o.tidy(function(){return _[P]()});if("float32"!==O.dtype)throw new Error("Error in gradient for op "+A.kernelName+". The gradient of input "+P+" must have 'float32' dtype, but has '"+O.dtype+"'");var F=A.inputs[P];if(!Ar(O.shape,F.shape))throw new Error("Error in gradient for op "+A.kernelName+". The gradient of input '"+P+"' has shape '"+O.shape+"', which does not match the shape of the input '"+F.shape+"'");if(null==p[F.id])p[F.id]=O;else{var N=p[F.id];p[F.id]=N.add(O),N.dispose()}};for(var I in A.inputs)E(I)},w=g.length-1;w>=0;w--)y(w)}(l,a);var f=e.map(function(p){return l[p.id]});return 0===o.state.gradientDepth&&(o.state.activeTape.forEach(function(p){for(var g=0,m=p.saved;g<m.length;g++)m[g].dispose()}),o.state.activeTape=null),{value:s,grads:f}})},t.prototype.customGrad=function(n){var e=this;return k(Vc(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];k(i.every(function(a){return a instanceof hn}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return i.forEach(function(a,u){s[u]=a}),e.runKernelFunc(function(a,u){return k((r=n.apply(void 0,i.concat([u]))).value instanceof hn,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),k(Vc(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},s,function(a,u){var c=r.gradFunc(a,u),l=Array.isArray(c)?c:[c];k(l.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),k(l.every(function(p){return p instanceof hn}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return l.forEach(function(p,g){f[g]=function(){return p}}),f})}},t.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},t.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},t.prototype.time=function(n){return Pe(this,void 0,void 0,function(){var e,r;return Oe(this,function(i){switch(i.label){case 0:return e=Us(),[4,this.backend.time(n)];case 1:return(r=i.sent()).wallMs=Us()-e,[2,r]}})})},t.prototype.track=function(n){return null!=this.state.activeScope&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new C3,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),V=function(){var t=function(){if(null==WD){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}WD=e}return WD}();if(null==t._tfengine){var n=new uY(t);t._tfengine=new mY(n)}return n3=t._tfengine.ENV,ma=function(){return t._tfengine},t._tfengine}();function _3(){return typeof window<"u"&&null!=window.document||typeof WorkerGlobalScope<"u"}var Au=ue();Au.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Au.registerFlag("IS_BROWSER",function(){return _3()}),Au.registerFlag("IS_NODE",function(){return typeof process<"u"&&void 0!==process.versions&&void 0!==process.versions.node}),Au.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Au.registerFlag("PROD",function(){return!1}),Au.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Au.getBool("DEBUG")}),Au.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Au.registerFlag("IS_TEST",function(){return!1});var sv,Do,Io,md={},HD={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function E3(t,n){md[t]=n}function va(t){t in md||(md[t]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&2===i)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete md[e]},!1),1===e?r.getContext("webgl",HD)||r.getContext("experimental-webgl",HD):r.getContext("webgl2",HD)}(t));var n=md[t];return n.isContextLost()?(delete md[t],va(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),md[t])}function Wb(t,n){return[n,t]}function av(t){var n=Le(t);return zb(Math.ceil(n/4))}function uv(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function qD(t,n){var e,r,i,o,s,a,u,c,l,f=t;return 2===ue().getNumber("WEBGL_VERSION")?(e=f.R32F,r=f.R16F,i=f.RGBA16F,o=f.RGBA32F,s=f.RED,a=4,u=1,c=f.HALF_FLOAT,l=f.FLOAT):(e=t.RGBA,r=t.RGBA,i=t.RGBA,o=f.RGBA,s=t.RGBA,a=4,u=4,c=null!=n?n.HALF_FLOAT_OES:null,l=t.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}}function Re(t,n,e){var r=e();return n&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+I3(i,o))}(t),r}function D3(t){return!!(ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function I3(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function cv(t,n,e){return xu(t,n,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function S3(t,n,e){var r=xu(t,n,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Re(t,n,function(){return t.shaderSource(r,e)}),Re(t,n,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function T3(t,n,e){var r=xu(t,n,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Re(t,n,function(){return t.shaderSource(r,e)}),Re(t,n,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(i,o){var s=wY.exec(o);if(null==s)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var a=+s[1],u=i.split("\n"),c=u.length.toString().length+2,l=u.map(function(w,b){return gd((b+1).toString(),c)+w}),f=0,p=0;p<l.length;p++)f=Math.max(l[p].length,f);var g=l.slice(0,a-1),m=l.slice(a-1,a),y=l.slice(a);console.log(g.join("\n")),console.log(o.split("\n")[0]),console.log("%c "+gd(m[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(y.join("\n"))}(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(sv||(sv={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(Do||(Do={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Io||(Io={}));var Hb,qb,wY=/ERROR: [0-9]+:([0-9]+):/g;function M3(t,n){return xu(t,n,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function R3(t,n,e){if(Re(t,n,function(){return t.linkProgram(e)}),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Gb(t,n,e){if(Re(t,n,function(){return t.validateProgram(e)}),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function k3(t,n,e){var r=xu(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Re(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Re(t,n,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function P3(t,n,e){var r=xu(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Re(t,n,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Re(t,n,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function O3(t,n){return xu(t,n,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function N3(t,n){var e=ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){var r="["+t+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e)throw r="["+t+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+e+"x"+e+"].")}function F3(t,n){return xu(t,n,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function GD(t,n,e,r,i,o,s,a){var u=t.getAttribLocation(e,r);return-1!==u&&(Re(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Re(t,n,function(){return t.vertexAttribPointer(u,o,t.FLOAT,!1,s,a)}),Re(t,n,function(){return t.enableVertexAttribArray(u)}),!0)}function B3(t,n,e,r){V3(t,r),Re(t,n,function(){return t.activeTexture(t.TEXTURE0+r)}),Re(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function L3(t,n,e,r){return xu(t,n,function(){return t.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function U3(t,n,e){return t.getUniformLocation(n,e)}function j3(t,n,e,r,i,o){Re(t,n,function(){return B3(t,n,r,o)}),Re(t,n,function(){return t.uniform1i(i,o)})}function Kb(t,n,e,r){Re(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Re(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function KD(t,n,e){Re(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),Re(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function lv(t){var n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+z3(t,n))}function z3(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function xu(t,n,e,r){var i=Re(t,n,function(){return e()});if(null==i)throw new Error(r);return i}function V3(t,n){var e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+e+"].")}function dv(t,n){return void 0===n&&(n=2),Le(t.slice(0,t.length-n))}function fv(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Qb(t){var n=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(n=[dv(t)].concat(fv(t))),n}function W3(t,n){var e;void 0===n&&(n=!1);var r=ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,1===(t=t.map(function(c,l){return l>=t.length-2?SD(t[l]):t[l]})).length&&(t=[2,t[0]])),2!==t.length){var i=jc(t);t=i.newShape}var o=Le(t);if(t.length<=1&&o<=r)return[1,o];if(2===t.length&&t[0]<=r&&t[1]<=r)return t;if(3===t.length&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(n){var s=dv(t),a=2,u=2;return t.length&&(a=(e=fv(t))[0],u=e[1]),zb(o=s*(a/2)*(u/2)).map(function(c){return 2*c})}return zb(o)}function Yb(t){return t%2==0}function hv(t,n){if(Ar(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||0===t[0]||0===t[1]||0===n[0]||0===n[1])return!0;if(t.length!==n.length){var e=t.slice(-1)[0],r=n.slice(-1)[0];if(e===r||Yb(e)&&Yb(r)&&(1===t[0]||1===n[0]))return!0}return t[1]===n[1]&&Yb(t[0])&&Yb(n[0])}function H3(t){if(null==Hb){var n=va(t);Hb=n.getParameter(n.MAX_TEXTURE_SIZE)}return Hb}function q3(t){if(null==qb){var n=va(t);qb=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,qb)}function G3(t){if(0===t)return 0;var n=va(t);return So(n,"EXT_disjoint_timer_query_webgl2")&&2===t?2:So(n,"EXT_disjoint_timer_query")?1:0}function So(t,n){return null!=t.getExtension(n)}function QD(t){try{if(null!=va(t))return!0}catch{return!1}return!1}function K3(t){if(0===t)return!1;var n=va(t);if(1===t){if(!So(n,"OES_texture_float"))return!1}else if(!So(n,"EXT_color_buffer_float"))return!1;return YD(n)}function Q3(t){if(0===t)return!1;var n=va(t);if(1!==t){if(So(n,"EXT_color_buffer_float"))return YD(n);if(So(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=qD(r,i),s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(s),r.deleteFramebuffer(a),u}(n,e)}return!1}return!!So(n,"OES_texture_float")&&!!So(n,"WEBGL_color_buffer_float")&&YD(n)}function YD(t){var n=qD(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),i}function Y3(t){return 2===t&&null!=va(t).fenceSync}var bY=Object.freeze({callAndCheck:Re,canBeRepresented:D3,getWebGLErrorMessage:I3,getExtensionOrThrow:cv,createVertexShader:S3,createFragmentShader:T3,createProgram:M3,linkProgram:R3,validateProgram:Gb,createStaticVertexBuffer:k3,createStaticIndexBuffer:P3,getNumChannels:function(){return 2===ue().getNumber("WEBGL_VERSION")?1:4},createTexture:O3,validateTextureSize:N3,createFramebuffer:F3,bindVertexBufferToProgramAttribute:GD,bindTextureUnit:B3,unbindTextureUnit:function(t,n,e){V3(t,e),Re(t,n,function(){return t.activeTexture(t.TEXTURE0+e)}),Re(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:L3,getProgramUniformLocation:U3,bindTextureToProgramUniformSampler:j3,bindCanvasToFramebuffer:function(t,n){Re(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Re(t,n,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),Re(t,n,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:Kb,unbindColorTextureFromFramebuffer:KD,validateFramebuffer:lv,getFramebufferErrorMessage:z3,getBatchDim:dv,getRowsCols:fv,getShapeAs3D:Qb,getTextureShapeFromLogicalShape:W3,isReshapeFree:hv,getWebGLMaxTextureSize:H3,resetMaxTextureSize:function(){Hb=null},resetMaxTexturesInShader:function(){qb=null},getMaxTexturesInShader:q3,getWebGLDisjointQueryTimerVersion:G3,hasExtension:So,isWebGLVersionEnabled:QD,isCapableOfRenderingToFloatTexture:K3,isDownloadFloatTextureEnabled:Q3,isWebGLFenceEnabled:Y3}),ot=ue();function X3(t){ue().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Me(t,n){return V.tidy(t,n)}function io(t){VD(t).forEach(function(n){return n.dispose()})}function Xb(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];ue().getBool("IS_TEST")||console.warn.apply(console,t)}function ya(t,n){var e=t;if(Zr(t))return"string"===n?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(e)||Zr(e)&&"string"!==n;)r.push(e.length),e=e[0];return Array.isArray(t)&&ue().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,s,a){if(a=a||[],Array.isArray(o)||Zr(o)){k(s.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),k(o.length===s[0],function(){return"Element arr["+a.join("][")+"] should have "+s[0]+" elements, but has "+o.length+" elements"});for(var u=s.slice(1),c=0;c<o.length;++c)i(o[c],u,a.concat(c))}else k(0===s.length,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"})}(t,r,[]),r}function J3(t,n,e,r){if(null!=t&&("numeric"!==t&&t!==n||"numeric"===t&&"string"===n))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+t+" tensor, but got "+n+" tensor")}function R(t,n,e,r){if(void 0===r&&(r="numeric"),t instanceof hn)return J3(r,t.dtype,n,e),t;var i=Gh(t);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),J3(r,i,n,e),null==t||!Zr(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+(null==t?"null":t.constructor.name)+"'");var s=ya(t,i);Zr(t)||Array.isArray(t)||(t=[t]);var a="string"!==i?RD(t,i,ue().getBool("DEBUG")):bu(t,[],!0);return V.makeTensor(a,s,i)}function pv(t,n,e,r){if(void 0===r&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,o){return R(i,n+"["+o+"]",e)},r)}function XD(t,n){for(var e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function Z3(t,n,e){for(var r=t.length+n.length,i=[],o=0,s=0,a=0;a<r;a++)-1===e.indexOf(a)?i.push(t[o++]):i.push(n[s++]);return i}function $r(t,n){for(var e=[],r=t.length,i=0;i<r;i++)-1===n.indexOf(i)&&e.push(t[i]);return[e,n.map(function(o){return t[o]})]}function zi(t,n){return Z3(t,n.map(function(e){return 1}),n)}function oo(t,n,e){k(XD(n,e),function(){return t+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function js(t,n){if(XD(t,n))return null;for(var e=[],r=0;r<n;++r)-1===t.indexOf(r)&&e.push(r);return t.forEach(function(i){return e.push(i)}),e}function Jb(t){return t.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function zs(t,n){for(var e=[],r=n-t;r<n;++r)e.push(r);return e}function $3(t,n){var e=t[0].length;t.forEach(function(i,o){k(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),k(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=t[0];t.forEach(function(i,o){for(var s=0;s<e;s++)k(s===n||i[s]===r[s],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function vd(t,n){for(var e=t[0].slice(),r=1;r<t.length;r++)e[n]+=t[r][n];return e}function W(t){var n=Object.keys(t);if(1!==n.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];V.startScope(e);try{var a=r.apply(void 0,o);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),V.endScope(a),a}catch(u){throw V.endScope(null),u}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}ot.registerFlag("HAS_WEBGL",function(){return ot.getNumber("WEBGL_VERSION")>0}),ot.registerFlag("WEBGL_VERSION",function(){return QD(2)?2:QD(1)?1:0}),ot.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===ot.get("WEBGL_VERSION")}),ot.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),ot.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),ot.registerFlag("WEBGL_PACK",function(){return ot.getBool("HAS_WEBGL")}),ot.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_PACK_CLIP",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),ot.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_PACK_REDUCE",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_LAZILY_UNPACK",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_CONV_IM2COL",function(){return ot.getBool("WEBGL_PACK")}),ot.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return H3(ot.getNumber("WEBGL_VERSION"))}),ot.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return q3(ot.getNumber("WEBGL_VERSION"))}),ot.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=ot.getNumber("WEBGL_VERSION");return 0===t?0:G3(t)}),ot.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return ot.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),ot.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return K3(ot.getNumber("WEBGL_VERSION"))}),ot.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!ot.getBool("WEBGL_FORCE_F16_TEXTURES")&&ot.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),ot.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Q3(ot.getNumber("WEBGL_VERSION"))}),ot.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Y3(ot.getNumber("WEBGL_VERSION"))}),ot.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return ot.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),b3=X3;var ei=W({complex_:function(t,n){var e=R(t,"real","complex"),r=R(n,"imag","complex");return Nt(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),V.runKernelFunc(function(i){return i.complex(e,r)},{$real:e,$imag:r})}}),ts=W({real_:function(t){var n=R(t,"input","real");return V.runKernelFunc(function(e){return e.real(n)},{$input:n})}}),wa=W({imag_:function(t){var n=R(t,"input","imag");return V.runKernelFunc(function(e){return e.imag(n)},{$input:n})}});function ti(t,n,e){return Wc(t,n,ya(t,e),e)}function Wc(t,n,e,r){if(null==r&&(r=Gh(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Zr(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=n){OD(n);var i=Le(n),o=Le(e);k(i===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+i+" values but has "+o});for(var s=0;s<e.length;++s){var u=s!==e.length-1||e[s]!==Le(n.slice(s));k(e[s]===n[s]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "})}}return Zr(t)||Array.isArray(t)||(t=[t]),n=n||e,t="string"!==r?RD(t,r,ue().getBool("DEBUG")):bu(t,[],!0),V.makeTensor(t,n,r)}function Ee(t,n){if((Zr(t)&&"string"!==n||Array.isArray(t))&&"complex64"!==n)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===n&&Zr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Wc(t,[],[],n)}function Cr(t,n){pd(t);var e=ya(t,n);if(1!==e.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Wc(t,null,e,n)}function Hc(t,n,e){if(pd(t),null!=n&&2!==n.length)throw new Error("tensor2d() requires shape to have two numbers");var r=ya(t,e);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Wc(t,n,r,e)}function JD(t,n,e){if(pd(t),null!=n&&3!==n.length)throw new Error("tensor3d() requires shape to have three numbers");var r=ya(t,e);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Wc(t,n,r,e)}function so(t,n,e){if(pd(t),null!=n&&4!==n.length)throw new Error("tensor4d() requires shape to have four numbers");var r=ya(t,e);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Wc(t,n,r,e)}function Yh(t,n){if(void 0===n&&(n="float32"),"complex64"===n){var e=Yh(t,"float32"),r=Tn(t,"float32");return ei(e,r)}var i=PD(Le(t),n);return V.makeTensor(i,t,n)}function Tn(t,n){if(void 0===n&&(n="float32"),"complex64"===n){var e=Tn(t,"float32"),r=Tn(t,"float32");return ei(e,r)}var i=Kh(Le(t),n);return V.makeTensor(i,t,n)}function ba(t,n,e){return V.runKernelFunc(function(r){return r.fill(t,n,e)},{})}function Zb(t,n,e,r){if(void 0===e&&(e=1),void 0===r&&(r="float32"),0===e)throw new Error("Cannot have a step of zero");if(t===n||t<n&&e<0||n<t&&e>1)return Tn([0],r);var i=Kh(Math.abs(Math.ceil((n-t)/e)),r);n<t&&1===e&&(e=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return Cr(i,r)}var eB=W({onesLike_:function(t){var n=R(t,"x","onesLike");if("complex64"===n.dtype){var e=eB(ts(n)),r=Ft(wa(n));return ei(e,r)}return V.runKernelFunc(function(i){return i.onesLike(n)},{$x:n},function(i,o){return{$x:function(){return Ft(i)}}})}}),Ft=W({zerosLike_:function(t){var n=R(t,"x","zerosLike");return V.runKernelFunc(function(e){return e.zerosLike(n)},{$x:n},function(e,r){return{$x:function(){return Ft(e)}}})}}),Fr=W({concat_:function(t,n){void 0===n&&(n=0),k(t.length>=1,function(){return"Pass at least one tensor to concat"});var e=pv(t,"tensors","concat");"complex64"===e[0].dtype&&e.forEach(function(a){if("complex64"!==a.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+a.dtype+". ")}),n=xr(n,e[0].shape)[0];var r=vd(e.map(function(a){return a.shape}),n);if(0===Le(r))return ti([],r);if(1===(e=e.filter(function(a){return a.size>0})).length)return e[0];var i=e.map(function(a){return a.shape});return $3(i,n),V.runKernelFunc(function(a){return a.concat(e,n)},e,function(a){var u=i.map(function(c){return c[n]});return ZD(a,u,n).map(function(c){return function(){return c}})},"Concat",{axis:n})}}),DY=W({concat1d_:function(t){return Fr(t,0)}}),IY=W({concat2d_:function(t,n){return Fr(t,n)}}),SY=W({concat3d_:function(t,n){return Fr(t,n)}}),TY=W({concat4d_:function(t,n){return Fr(t,n)}}),ZD=W({split_:function(t,n,e){void 0===e&&(e=0);var r,i=R(t,"x","split");return e=xr(e,i.shape)[0],"number"==typeof n?(k(i.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(i.shape[e]/n)):(k(i.shape[e]===n.reduce(function(o,s){return o+s}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),V.runKernelFunc(function(o){return o.split(i,r,e)},{$x:i},function(o){return{$x:function(){return Fr(o,e)}}})}});function yd(t,n){return t(n={exports:{}},n.exports),n.exports}typeof globalThis<"u"||typeof window<"u"||typeof global<"u"&&global;var MY=yd(function(t){!function(n,e,r){function i(a){var u,c=this,l=(u=4022871197,function(f){f=f.toString();for(var p=0;p<f.length;p++){var g=.02519603282416938*(u+=f.charCodeAt(p));g-=u=g>>>0,u=(g*=u)>>>0,u+=4294967296*(g-=u)}return 2.3283064365386963e-10*(u>>>0)});c.next=function(){var f=2091639*c.s0+2.3283064365386963e-10*c.c;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=0|f)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(a),c.s0<0&&(c.s0+=1),c.s1-=l(a),c.s1<0&&(c.s1+=1),c.s2-=l(a),c.s2<0&&(c.s2+=1),l=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function s(a,u){var c=new i(a),l=u&&u.state,f=c.next;return f.int32=function(){return 4294967296*c.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,l&&("object"==typeof l&&o(l,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.alea=s}(0,t)}),RY=yd(function(t){!function(n,e,r){function i(a){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},a===(0|a)?u.x=a:c+=a;for(var l=0;l<c.length+64;l++)u.x^=0|c.charCodeAt(l),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function s(a,u){var c=new i(a),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,l&&("object"==typeof l&&o(l,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.xor128=s}(0,t)}),kY=yd(function(t){!function(n,e,r){function i(a){var u=this,c="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(0|a)?u.x=a:c+=a;for(var l=0;l<c.length+64;l++)u.x^=0|c.charCodeAt(l),l==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function s(a,u){var c=new i(a),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,l&&("object"==typeof l&&o(l,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.xorwow=s}(0,t)}),PY=yd(function(t){!function(n,e,r){function i(a){var u=this;u.next=function(){var c,l,f=u.x,p=u.i;return c=f[p],l=(c^=c>>>7)^c<<24,l^=(c=f[p+1&7])^c>>>10,l^=(c=f[p+3&7])^c>>>3,l^=(c=f[p+4&7])^c<<7,c=f[p+7&7],l^=(c^=c<<13)^c<<9,f[p]=l,u.i=p+1&7,l},function(c,l){var f,p=[];if(l===(0|l))p[0]=l;else for(l=""+l,f=0;f<l.length;++f)p[7&f]=p[7&f]<<15^l.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&0===p[f];++f);for(8==f&&(p[7]=-1),c.x=p,c.i=0,f=256;f>0;--f)c.next()}(u,a)}function o(a,u){return u.x=a.x.slice(),u.i=a.i,u}function s(a,u){null==a&&(a=+new Date);var c=new i(a),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,l&&(l.x&&o(l,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.xorshift7=s}(0,t)}),OY=yd(function(t){!function(n,e,r){function i(a){var u=this;u.next=function(){var c,l,f=u.w,p=u.X,g=u.i;return u.w=f=f+1640531527|0,l=p[g+34&127],c=p[g=g+1&127],l^=l<<13,c^=c<<17,l=p[g]=(l^=l>>>15)^(c^=c>>>12),u.i=g,l+(f^f>>>16)|0},function(c,l){var f,p,g,m,y,w=[],b=128;for(l===(0|l)?(p=l,l=null):(l+="\0",p=0,b=Math.max(b,l.length)),g=0,m=-32;m<b;++m)l&&(p^=l.charCodeAt((m+32)%l.length)),0===m&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=0==(f=w[127&m]^=p+(y=y+1640531527|0))?g+1:0);for(g>=128&&(w[127&(l&&l.length||0)]=-1),g=127,m=512;m>0;--m)p=w[g+34&127],f=w[g=g+1&127],p^=p<<13,f^=f<<17,w[g]=(p^=p>>>15)^(f^=f>>>12);c.w=y,c.X=w,c.i=g}(u,a)}function o(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function s(a,u){null==a&&(a=+new Date);var c=new i(a),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,l&&(l.X&&o(l,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.xor4096=s}(0,t)}),NY=yd(function(t){!function(n,e,r){function i(a){var u=this,c="";u.next=function(){var f=u.b,p=u.c,g=u.d,m=u.a;return f=f<<25^f>>>7^p,p=p-g|0,g=g<<24^g>>>8^m,m=m-f|0,u.b=f=f<<20^f>>>12^p,u.c=p=p-g|0,u.d=g<<16^p>>>16^m,u.a=m-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=0|a):c+=a;for(var l=0;l<c.length+20;l++)u.b^=0|c.charCodeAt(l),u.next()}function o(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function s(a,u){var c=new i(a),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,l&&("object"==typeof l&&o(l,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.tychei=s}(0,t)}),wd=yd(function(t){!function(n,e){var r,i=this,o=256,a="random",u=e.pow(o,6),c=e.pow(2,52),l=2*c,f=o-1;function p(b,A,C){var _=[],E=y(function O(F,N){var Q,q=[],$=typeof F;if(N&&"object"==$)for(Q in F)try{q.push(O(F[Q],N-1))}catch{}return q.length?q:"string"==$?F:F+"\0"}((A=1==A?{entropy:!0}:A||{}).entropy?[b,w(n)]:b??function(){try{var O;return r&&(O=r.randomBytes)?O=O(o):(O=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(O)),w(O)}catch{var F=i.navigator,N=F&&F.plugins;return[+new Date,i,N,i.screen,w(n)]}}(),3),_),I=new g(_),P=function(){for(var O=I.g(6),F=u,N=0;O<c;)O=(O+N)*o,F*=o,N=I.g(1);for(;O>=l;)O/=2,F/=2,N>>>=1;return(O+N)/F};return P.int32=function(){return 0|I.g(4)},P.quick=function(){return I.g(4)/4294967296},P.double=P,y(w(I.S),n),(A.pass||C||function(O,F,N,Q){return Q&&(Q.S&&m(Q,I),O.state=function(){return m(I,{})}),N?(e[a]=O,F):O})(P,E,"global"in A?A.global:this==e,A.state)}function g(b){var A,C=b.length,_=this,E=0,I=_.i=_.j=0,P=_.S=[];for(C||(b=[C++]);E<o;)P[E]=E++;for(E=0;E<o;E++)P[E]=P[I=f&I+b[E%C]+(A=P[E])],P[I]=A;(_.g=function(O){for(var F,N=0,Q=_.i,q=_.j,$=_.S;O--;)F=$[Q=f&Q+1],N=N*o+$[f&($[Q]=$[q=f&q+F])+($[q]=F)];return _.i=Q,_.j=q,N})(o)}function m(b,A){return A.i=b.i,A.j=b.j,A.S=b.S.slice(),A}function y(b,A){for(var C,_=b+"",E=0;E<_.length;)A[f&E]=f&(C^=19*A[f&E])+_.charCodeAt(E++);return w(A)}function w(b){return String.fromCharCode.apply(0,b)}if(e["seed"+a]=p,y(e.random(),n),t.exports){t.exports=p;try{r=Oa(82)}catch{}}}([],Math)});wd.alea=MY,wd.xor128=RY,wd.xorwow=kY,wd.xorshift7=PY,wd.xor4096=OY,wd.tychei=NY;var $b=wd.alea,$D=function(){function t(n,e,r,i,o){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=o||Math.random();this.random=$b(s.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,r,i=!1;!i;){var o=void 0,s=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(s=2*this.random()-1)*s}while(a>=1||0===a);var u=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*s*u,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(n){return null==this.dtype||"float32"===this.dtype?n:Math.round(n)},t.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},t}(),FY=function(){function t(n,e,r,i){this.alpha=n,this.beta=1/e,this.dtype=r;var o=i||Math.random();this.randu=$b(o.toString()),this.randn=new $D(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var n,e,r,i,o,s;;){do{i=this.randn.nextValue(),s=1+this.c*i}while(s<=0);if(e=1-.331*(n=i*i)*n,r=.5*n+this.d*(1-(s*=s*s)+Math.log(s)),(o=this.randu())<e||Math.log(o)<r)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},t.prototype.convertValue=function(n){return"float32"===this.dtype?n:Math.round(n)},t}(),BY=function(){function t(n,e,r,i){var o=this;if(void 0===n&&(n=0),void 0===e&&(e=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=n,this.range=e-n,this.dtype=r,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=$b(i)}return t.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function lt(t,n,e){return void 0===n&&(n="float32"),n=n||"float32",OD(t),new ov(t,n,e)}var tB=W({batchToSpaceND_:function(t,n,e){var r=R(t,"x","batchToSpaceND"),i=n.reduce(function(o,s){return o*s});return k(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),k(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),k(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+i}),V.runKernelFunc(function(o){return o.batchToSpaceND(r,n,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}}),UY=W({broadcastTo_:function(t,n){var e=R(t,"broadcastTo","x"),r=e.shape;if(n.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<e.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+e.rank+".");if(n.length>e.rank){for(var i=e.shape.slice();i.length<n.length;)i.unshift(1);e=e.reshape(i)}for(var o=Array.from(n),s=n.length-1;s>=0;s--)if(e.shape[s]===n[s])o[s]=1;else if(1!==e.shape[s])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+n+"].");var a=o.map(function(u,c){return u>1?c:-1}).filter(function(u){return u>=0});return 0===a.length?e.clone():V.runKernelFunc(function(u){return u.tile(e,o)},{input:e},function(u){return{input:function(){return u.sum(a,!0)}}})}}),jY=W({cast_:function(t,n){var e=R(t,"x","cast");if(!d3(n))throw new Error("Failed to cast to unknown dtype "+n);if("string"===n&&"string"!==e.dtype||"string"!==n&&"string"===e.dtype)throw new Error("Only strings can be casted to strings");return V.runKernelFunc(function(i){return i.cast(e,n)},{x:e},function(i){return{x:function(){return i.clone()}}},"Cast",{dtype:n})}}),zY=W({clone_:function(t){var n=R(t,"x","clone",null);return V.runKernelFunc(function(){return V.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(e){return{$x:function(){return e.toFloat()}}})}}),VY=W({cumsum_:function(t,n,e,r){void 0===n&&(n=0),void 0===e&&(e=!1),void 0===r&&(r=!1);var i=R(t,"x","cumsum"),o=js([n|=0],i.rank),s=i;null!=o&&(s=i.transpose(o));var a=zs(1,i.rank)[0],u=V.runKernelFunc(function(c){return c.cumsum(s,a,e,r)},{permutedX:s},function(c){return{permutedX:function(){return c.cumsum(n,e,!r)}}});return null!=o&&(u=u.transpose(o)),u}}),WY=W({depthToSpace_:function(t,n,e){void 0===e&&(e="NHWC");var r=R(t,"x","depthToSpace"),i="NHWC"===e?r.shape[1]:r.shape[2],o="NHWC"===e?r.shape[2]:r.shape[3],s="NHWC"===e?r.shape[3]:r.shape[1];return k(i*n>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+n+"  for depthToSpace with input shape\n      "+r.shape}),k(o*n>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+n+" for depthToSpace with input shape\n          "+r.shape}),k(s%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+s+" for depthToSpace with input shape "+r.shape}),V.runKernelFunc(function(a){return a.depthToSpace(r,n,e)},{$x:r})}}),ns=W({expandDims_:function(t,n){void 0===n&&(n=0);var e=R(t,"x","expandDims",null);k(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return n<0&&(k(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),r.splice(n,0,1),Vs(e,r)}}),nB=W({eye_:function(t,n,e,r){void 0===r&&(r="float32"),null==n&&(n=t);for(var i=lt([t,n],r),o=t<=n?t:n,s=0;s<o;++s)i.set(1,s,s);var a=i.toTensor().as2D(t,n);if(null==e)return a;if(1===e.length)return Xh(ns(a,0),[e[0],1,1]);if(2===e.length)return Xh(ns(ns(a,0),0),[e[0],e[1],1,1]);if(3===e.length)return Xh(ns(ns(ns(a,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),HY=W({multinomial_:function(t,n,e,r){void 0===r&&(r=!1);var i=R(t,"logits","multinomial"),o=i.size,s=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);e=e||Math.random();var a=1===s?i.as2D(1,-1):i,u=V.runKernelFunc(function(c){return c.multinomial(a,r,n,e)},{logits2D:a});return 1===s?u.as1D():u}}),eI=W({oneHot_:function(t,n,e,r){if(void 0===e&&(e=1),void 0===r&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var i=R(t,"indices","oneHot","int32"),o=i.shape.concat([n]);return i=i.flatten(),V.runKernelFunc(function(s){return s.oneHot(i,n,e,r)},{$indices:i},function(s){return{$indices:function(){return Tn(i.shape,"float32")}}}).reshape(o)}}),bd=W({pad_:function(t,n,e){void 0===e&&(e=0);var r=R(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return V.runKernelFunc(function(o){return o.pad(r,n,e)},{x:r},function(o){var s=n.map(function(a){return a[0]});return{x:function(){return o.slice(s,r.shape)}}},"PadV2",{paddings:n,constantValue:e})}}),qY=W({pad1d_:function(t,n,e){return void 0===e&&(e=0),k(2===n.length,function(){return"Invalid number of paddings. Must be length of 2."}),bd(t,[n],e)}}),GY=W({pad2d_:function(t,n,e){return void 0===e&&(e=0),k(2===n.length&&2===n[0].length&&2===n[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),bd(t,n,e)}}),KY=W({pad3d_:function(t,n,e){return void 0===e&&(e=0),k(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),bd(t,n,e)}}),QY=W({pad4d_:function(t,n,e){return void 0===e&&(e=0),k(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),bd(t,n,e)}}),YY=W({rand_:function(t,n,e){var r=Le(t),i=null;if(null==e||"float32"===e)i=new Float32Array(r);else if("int32"===e)i=new Int32Array(r);else{if("bool"!==e)throw new Error("Unknown data type "+e);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=n();return V.makeTensor(i,t,e)}}),XY=W({randomNormal_:function(t,n,e,r,i){if(void 0===n&&(n=0),void 0===e&&(e=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new $D(n,e,r,!1,i),s=lt(t,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),JY=W({randomGamma_:function(t,n,e,r,i){if(void 0===e&&(e=1),void 0===r&&(r="float32"),null==e&&(e=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var o=new FY(n,e,r,i),s=lt(t,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),rB=W({randomUniform_:function(t,n,e,r,i){void 0===n&&(n=0),void 0===e&&(e=1),void 0===r&&(r="float32");for(var o=lt(t,r),s=new BY(n,e,null,i),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),Vs=W({reshape_:function(t,n){var e=R(t,"x","reshape",null);return n=c3(n,e.size),k(e.size===Le(n),function(){return"new shape and old shape must have the same number of elements."}),V.runKernelFunc(function(i){return i.reshape(e,n)},{x:e},function(i){return{x:function(){return i.reshape(e.shape)}}},"Reshape",{shape:n})}}),iB=W({spaceToBatchND_:function(t,n,e){var r=R(t,"x","spaceToBatchND");return k(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),k(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),k(r.shape.reduce(function(i,o,s){return s>0&&s<=n.length?i&&(o+e[s-1][0]+e[s-1][1])%n[s-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),V.runKernelFunc(function(i){return i.spaceToBatchND(r,n,e)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(n,e)}}})}}),oB=W({squeeze_:function(t,n){var e=R(t,"x","squeeze");return Vs(e,jc(e.shape,n).newShape)}}),To=W({stack_:function(t,n){void 0===n&&(n=0);var e=pv(t,"tensors","stack");if(k(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===e.length)return e[0].expandDims(n);var i=e[0].shape,o=e[0].dtype;k(n<=e[0].rank,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(a){Nt(i,a.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(a){k(o===a.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=e.map(function(a){return a.expandDims(n)});return Fr(s,n)}}),Xh=W({tile_:function(t,n){var e=R(t,"x","tile",null);return k(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."}),V.runKernelFunc(function(o,s){var a=o.tile(e,n);return s([e]),a},{x:e},function(o,s){var a=s[0];return{x:function(){var u=Ft(a);if(1===a.rank)for(var c=0;c<n[0];++c)u=u.add(o.slice([c*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(c=0;c<n[0];++c)for(var l=0;l<n[1];++l)u=u.add(o.slice([c*a.shape[0],l*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(c=0;c<n[0];++c)for(l=0;l<n[1];++l)for(var f=0;f<n[2];++f)u=u.add(o.slice([c*a.shape[0],l*a.shape[1],f*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(c=0;c<n[0];++c)for(l=0;l<n[1];++l)for(f=0;f<n[2];++f)for(var p=0;p<n[3];++p)u=u.add(o.slice([c*a.shape[0],l*a.shape[1],f*a.shape[2],p*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return u}}},"Tile",{reps:n},[e])}}),ZY=W({truncatedNormal_:function(t,n,e,r,i){if(void 0===n&&(n=0),void 0===e&&(e=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new $D(n,e,r,!0,i),s=lt(t,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),Br=W({unstack_:function(t,n){void 0===n&&(n=0),n=n||0;var e=R(t,"x","unstack");return k(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length),V.runKernelFunc(function(i){return i.unstack(e,n)},{x:e},function(i){return{x:function(){return To(i,n)}}},"Unpack",{axis:n})}});function eA(t,n,e,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(n.slice(0))).push(t[0]/e),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=n.length,s=0;s<o;++s)i=i.concat([t[s+1]/n[s],n[s]]);i=i.concat(t.slice(o+1))}return i}function tA(t,n,e){void 0===e&&(e=!0);var r=[];if(e){r.push(n);for(var i=n+1;i<t;++i)i<=2*n?(r.push(i),r.push(i-(n+1))):r.push(i)}else{var o=[],s=[];for(i=1;i<t;++i)i>=2*n+1||i%2==1?s.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,s)}return r}function nA(t,n,e,r){void 0===r&&(r=!0);var i=[];i.push(r?t[0]/e:t[0]*e);for(var o=1;o<t.length;++o)i.push(o<=n.length?r?n[o-1]*t[o]:t[o]/n[o-1]:t[o]);return i}function sB(t,n){for(var e=[0],r=0;r<n;++r)e.push(t[r][0]);return e}function aB(t,n,e){for(var r=t.slice(0,1),i=0;i<e;++i)r.push(t[i+1]-n[i][0]-n[i][1]);return r}function tI(t,n){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if("int32"!==n.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+t.rank);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var e=n.shape,r=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var s=t.shape,a=e.slice();a.pop();var u=1;for(o=r;o<t.rank;++o)u*=s[o],a.push(s[o]);var c=Ls(t.shape).map(function(l){return l/u}).concat([1]).slice(0,r);return[a,i,u,c]}function rA(t){return t<=30?t:Vb(t,Math.floor(Math.sqrt(t)))}function uB(t,n,e){var r=n.rank>1?n.shape[n.rank-1]:1,i=n.rank>1?n.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+n.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(e.rank<i)throw new Error(o+" update.rank < "+i+". ");if(t.length<r+(e.rank-i))throw new Error(o+" Output shape length < "+(r+(e.rank-i)));if(e.rank!==i+t.length-r)throw new Error(o+" update.rank != "+(i+t.length-r));for(var s=0;s<i;++s)if(e.shape[s]!==n.shape[s])throw new Error(o+" updates.shape["+s+"] ("+e.shape[s]+") != indices.shape["+s+"] ("+n.shape[s]+").");for(s=0;s<e.rank-i;++s)if(e.shape[s+i]!==t[s+r])throw new Error(o+" updates.shape["+(s+i)+"] ("+e.shape[s+i]+") != shape["+(s+i)+"] ("+t[s+i]+")")}function cB(t,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==n.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(0===e.length){if(0===n.size)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}uB(e,n,t)}function gv(t,n,e){for(var r=n.shape.length,i=r>1?n.shape[r-1]:1,o=e.length,s=1,a=i;a<o;++a)s*=e[a];var u=i<1?1:i;return{sliceRank:i,numUpdates:Le(n.shape)/u,sliceSize:s,strides:Ls(e.slice(0,i)).concat([1]),outputSize:Le(e)}}function lB(t,n,e){k(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+n+" must match the rank of the array ("+t.rank+")."}),k(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of size "+e+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){k(n[o]+e[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},i=0;i<t.rank;++i)r(i)}function rI(t){for(var n=[],e=0;t>0;)1&t&&n.push(e),t/=2,e++;return n}function iA(t,n,e){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((n[i]-t[i])/e[i]);return r}function dB(t,n,e,r,i){var o=n[i];(t&1<<i||null==o)&&(o=(e[i]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),jb(0,o,a-1)}function fB(t,n,e,r,i){var o=n[i],s=e[i]||1;(t&1<<i||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),s>0?jb(0,o,a):jb(-1,o,a-1)}function iI(t,n,e){for(var r=e.length,i=0;i<e.length;i++)if(e[i]>1){r=i;break}for(i=r+1;i<e.length;i++)if(n[i]>0||e[i]!==t[i])return!1;return!0}function oI(t,n){for(var e=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}function oA(t){return V.customGrad(t)}Object.freeze({prepareAndValidate:tI}),Object.freeze({validateUpdateShape:uB,validateInput:cB,calculateShapes:gv}),Object.freeze({assertParamsValid:lB,maskToAxes:rI,computeOutShape:iA,startForAxis:dB,stopForAxis:fB,isSliceContinous:iI,computeFlatOffset:oI});var Cu=W({softmax_:function(t,n){void 0===n&&(n=-1);var e=R(t,"logits","softmax","float32");if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return V.runKernelFunc(function(r,i){var o=r.softmax(e,n);return i([o]),o},{logits:e},function(r,i){var o=i[0],s=r.mul(o);return{logits:function(){return s.sub(s.sum([n],!0).mul(o))}}},"Softmax",{dim:n},[],[!0])}}),tX=W({logSoftmax_:function(t,n){void 0===n&&(n=-1);var e=R(t,"logits","logSoftmax");if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return oA(function(r,i){var o=r.max(n,!0),s=r.sub(o),a=s.toFloat().sub(s.exp().sum(n,!0).log());return i([a]),{value:a,gradFunc:function(u,c){var l=c[0].exp();return u.sub(u.sum(n,!0).mul(l))}}})(e)}}),hB=function(){function t(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},t.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},t.prototype.has=function(n){return this.data.has(n)},t.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),pB=function(){function t(){}return t.prototype.time=function(n){return re("time")},t.prototype.read=function(n){return re("read")},t.prototype.readSync=function(n){return re("readSync")},t.prototype.numDataIds=function(){return re("numDataIds")},t.prototype.disposeData=function(n){return re("disposeData")},t.prototype.write=function(n,e,r){return re("write")},t.prototype.move=function(n,e,r,i){return re("move")},t.prototype.memory=function(){return re("memory")},t.prototype.floatPrecision=function(){return re("floatPrecision")},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.batchMatMul=function(n,e,r,i){return re("batchMatMul")},t.prototype.fusedBatchMatMul=function(n){return re("fusedBatchMatMul")},t.prototype.slice=function(n,e,r){return re("slice")},t.prototype.stridedSlice=function(n,e,r,i){return re("stridedSlice")},t.prototype.unstack=function(n,e){return re("unstack")},t.prototype.reverse=function(n,e){return re("reverse")},t.prototype.concat=function(n,e){return re("concat")},t.prototype.neg=function(n){return re("neg")},t.prototype.add=function(n,e){return re("add")},t.prototype.addN=function(n){return re("addN")},t.prototype.subtract=function(n,e){return re("subtract")},t.prototype.multiply=function(n,e){return re("multiply")},t.prototype.realDivide=function(n,e){return re("realDivide")},t.prototype.floorDiv=function(n,e){return re("floorDiv")},t.prototype.sum=function(n,e){return re("sum")},t.prototype.prod=function(n,e){return re("prod")},t.prototype.unsortedSegmentSum=function(n,e,r){return re("unsortedSegmentSum")},t.prototype.argMin=function(n,e){return re("argMin")},t.prototype.argMax=function(n,e){return re("argMax")},t.prototype.equal=function(n,e){return re("equal")},t.prototype.notEqual=function(n,e){return re("notEqual")},t.prototype.less=function(n,e){return re("less")},t.prototype.lessEqual=function(n,e){return re("lessEqual")},t.prototype.greater=function(n,e){return re("greater")},t.prototype.greaterEqual=function(n,e){return re("greaterEqual")},t.prototype.logicalNot=function(n){return re("logicalNot")},t.prototype.logicalAnd=function(n,e){return re("logicalAnd")},t.prototype.logicalOr=function(n,e){return re("logicalOr")},t.prototype.where=function(n){return re("where")},t.prototype.select=function(n,e,r){return re("select")},t.prototype.topk=function(n,e,r){return re("topk")},t.prototype.min=function(n,e){return re("min")},t.prototype.minimum=function(n,e){return re("minimum")},t.prototype.mod=function(n,e){return re("mod")},t.prototype.max=function(n,e){return re("max")},t.prototype.maximum=function(n,e){return re("maximum")},t.prototype.all=function(n,e){return re("all")},t.prototype.any=function(n,e){return re("any")},t.prototype.squaredDifference=function(n,e){return re("squaredDifference")},t.prototype.ceil=function(n){return re("ceil")},t.prototype.floor=function(n){return re("floor")},t.prototype.round=function(n){return re("round")},t.prototype.sign=function(n){return re("sign")},t.prototype.isNaN=function(n){return re("isNaN")},t.prototype.isInf=function(n){return re("isInf")},t.prototype.isFinite=function(n){return re("isFinite")},t.prototype.pow=function(n,e){return re("pow")},t.prototype.exp=function(n){return re("exp")},t.prototype.expm1=function(n){return re("expm1")},t.prototype.softmax=function(n,e){return re("softmax")},t.prototype.log=function(n){return re("log")},t.prototype.log1p=function(n){return re("log1p")},t.prototype.sqrt=function(n){return re("sqrt")},t.prototype.rsqrt=function(n){return re("rsqrt")},t.prototype.square=function(n){return re("square")},t.prototype.reciprocal=function(n){return re("reciprocal")},t.prototype.relu=function(n){return re("relu")},t.prototype.relu6=function(n){return re("relu6")},t.prototype.prelu=function(n,e){return re("prelu")},t.prototype.elu=function(n){return re("elu")},t.prototype.eluDer=function(n,e){return re("eluDer")},t.prototype.selu=function(n){return re("selu")},t.prototype.int=function(n){return re("int")},t.prototype.clip=function(n,e,r){return re("clip")},t.prototype.abs=function(n){return re("abs")},t.prototype.complexAbs=function(n){return re("complexAbs")},t.prototype.sigmoid=function(n){return re("sigmoid")},t.prototype.softplus=function(n){return re("softplus")},t.prototype.sin=function(n){return re("sin")},t.prototype.cos=function(n){return re("cos")},t.prototype.tan=function(n){return re("tan")},t.prototype.asin=function(n){return re("asin")},t.prototype.acos=function(n){return re("acos")},t.prototype.atan=function(n){return re("atan")},t.prototype.atan2=function(n,e){return re("atan2")},t.prototype.sinh=function(n){return re("sinh")},t.prototype.cosh=function(n){return re("cosh")},t.prototype.tanh=function(n){return re("tanh")},t.prototype.asinh=function(n){return re("asinh")},t.prototype.acosh=function(n){return re("acosh")},t.prototype.atanh=function(n){return re("atanh")},t.prototype.erf=function(n){return re("erf")},t.prototype.step=function(n,e){return re("step")},t.prototype.fusedConv2d=function(n){return re("fusedConv2d")},t.prototype.conv2d=function(n,e,r){return re("conv2d")},t.prototype.conv2dDerInput=function(n,e,r){return re("conv2dDerInput")},t.prototype.conv2dDerFilter=function(n,e,r){return re("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(n){return re("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(n,e,r){return re("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(n,e,r){return re("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){return re("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(n,e,r){return re("conv3d")},t.prototype.conv3dDerInput=function(n,e,r){return re("conv3dDerInput")},t.prototype.conv3dDerFilter=function(n,e,r){return re("conv3dDerFilter")},t.prototype.maxPool=function(n,e){return re("maxPool")},t.prototype.maxPoolBackprop=function(n,e,r,i){return re("maxPoolBackprop")},t.prototype.avgPool=function(n,e){return re("avgPool")},t.prototype.avgPoolBackprop=function(n,e,r){return re("avgPoolBackprop")},t.prototype.avgPool3d=function(n,e){return re("avgPool3d")},t.prototype.avgPool3dBackprop=function(n,e,r){return re("avgPool3dBackprop")},t.prototype.maxPool3d=function(n,e){return re("maxPool3d")},t.prototype.maxPool3dBackprop=function(n,e,r,i){return re("maxPool3dBackprop")},t.prototype.reshape=function(n,e){return re("reshape")},t.prototype.cast=function(n,e){return re("cast")},t.prototype.tile=function(n,e){return re("tile")},t.prototype.pad=function(n,e,r){return re("pad")},t.prototype.transpose=function(n,e){return re("transpose")},t.prototype.gather=function(n,e,r){return re("gather")},t.prototype.gatherND=function(n,e){return re("gatherND")},t.prototype.scatterND=function(n,e,r){return re("scatterND")},t.prototype.batchToSpaceND=function(n,e,r){return re("batchToSpaceND")},t.prototype.spaceToBatchND=function(n,e,r){return re("spaceToBatchND")},t.prototype.resizeBilinear=function(n,e,r,i){return re("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(n,e,r){return re("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(n,e,r,i){return re("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){return re("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(n,e,r,i,o,s){return re("batchNormalization")},t.prototype.localResponseNormalization4D=function(n,e,r,i,o){return re("localResponseNormalization4D")},t.prototype.LRNGrad=function(n,e,r,i,o,s,a){return re("LRNGrad")},t.prototype.multinomial=function(n,e,r,i){return re("multinomial")},t.prototype.oneHot=function(n,e,r,i){return re("oneHot")},t.prototype.cumsum=function(n,e,r,i){return re("cumsum")},t.prototype.nonMaxSuppression=function(n,e,r,i,o){return re("nonMaxSuppression")},t.prototype.fft=function(n){return re("fft")},t.prototype.ifft=function(n){return re("ifft")},t.prototype.complex=function(n,e){return re("complex")},t.prototype.real=function(n){return re("real")},t.prototype.imag=function(n){return re("imag")},t.prototype.cropAndResize=function(n,e,r,i,o,s){return re("cropAndResize")},t.prototype.depthToSpace=function(n,e,r){return re("depthToSpace")},t.prototype.split=function(n,e,r){return re("split")},t.prototype.sparseToDense=function(n,e,r,i){return re("sparseToDense")},t.prototype.diag=function(n){return re("diag")},t.prototype.fill=function(n,e,r){return re("fill")},t.prototype.onesLike=function(n){return re("onesLike")},t.prototype.zerosLike=function(n){return re("zerosLike")},t.prototype.linspace=function(n,e,r){return re("linspace")},t.prototype.dispose=function(){return re("dispose")},t}();function re(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function _u(t,n){for(var e=t.length,r=[],i=0;i<e;i++){var o=e-1-i;(n[n.length-1-i]||1)>1&&1===(t[o]||1)&&r.unshift(o)}return r}function _r(t,n){for(var e=[],r=0;r<n.length;r++){var i=t[t.length-r-1],o=n.length-r-1;(null==i||1===i&&n[o]>1)&&e.unshift(o)}return e}function St(t,n){for(var e=[],r=Math.max(t.length,n.length),i=0;i<r;i++){var o=t[t.length-i-1];null==o&&(o=1);var s=n[n.length-i-1];if(null==s&&(s=1),1===o)e.unshift(s);else if(1===s)e.unshift(o);else{if(o!==s)throw Error("Operands could not be broadcast together with shapes "+t+" and "+n+".");e.unshift(o)}}return e}function Jh(t,n,e,r,i,o,s){void 0===s&&(s="channelsLast");var a,u=aA(n),c=u[0],l=u[1];if("channelsLast"===s)a=[c,l,t[3],t[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);a=[c,l,t[1],t[1]]}return qc(t,a,e,r,i,o,!1,s)}function mv(t,n,e,r,i,o,s){void 0===s&&(s="NDHWC");var a,u,c=aI(n),l=c[0],f=c[1],p=c[2];if("NDHWC"===s)u="channelsLast",a=[l,f,p,t[4],t[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat "+s);u="channelsFirst",a=[l,f,p,t[1],t[1]]}return vv(t,a,e,r,i,!1,u,o)}function qc(t,n,e,r,i,o,s,a){void 0===s&&(s=!1),void 0===a&&(a="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],p=u[3];if("channelsLast"===a)c=t[0],l=t[1],f=t[2],p=t[3];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=t[0],p=t[1],l=t[2],f=t[3]}var g,m=n[0],y=n[1],w=n[3],b=aA(e),A=b[0],C=b[1],_=aA(r),E=_[0],I=_[1],P=Zh(m,E),O=Zh(y,I),F=function(ce,de,X,J,Z,oe,pe,Ce){var De,Ue,Be;if("number"==typeof ce){De={top:ce,bottom:ce,left:ce,right:ce,type:0===ce?"VALID":"NUMBER"};var mt=function(Et,an,Jt,er,Kn){null==er&&(er=sI(Et,an,Jt));var Ra=Et[1],ka=yv((Et[0]-an+2*er)/Jt+1,Kn);k(Hn(ka),function(){return"The output # of rows ("+ka+") must be an integer. Change the stride and/or zero pad parameters"});var No=yv((Ra-an+2*er)/Jt+1,Kn);return k(Hn(No),function(){return"The output # of columns ("+No+") must be an integer. Change the stride and/or zero pad parameters"}),[ka,No]}([de,X],oe,J,ce,Ce);Ue=mt[0],Be=mt[1]}else if("same"===ce){Ue=Math.ceil(de/J),Be=Math.ceil(X/Z);var _t=Math.max(0,(Ue-1)*J+oe-de),$e=Math.max(0,(Be-1)*Z+pe-X),ft=Math.floor(_t/2),st=_t-ft,Cn=Math.floor($e/2);De={top:ft,bottom:st,left:Cn,right:$e-Cn,type:"SAME"}}else{if("valid"!==ce)throw Error("Unknown padding parameter: "+ce);De={top:0,bottom:0,left:0,right:0,type:"VALID"},Ue=Math.ceil((de-oe+1)/J),Be=Math.ceil((X-pe+1)/Z)}return{padInfo:De,outHeight:Ue,outWidth:Be}}(i,l,f,A,C,P,O,o),Q=F.outHeight,q=F.outWidth,$=s?w*p:w;return"channelsFirst"===a?g=[c,$,Q,q]:"channelsLast"===a&&(g=[c,Q,q,$]),{batchSize:c,dataFormat:a,inHeight:l,inWidth:f,inChannels:p,outHeight:Q,outWidth:q,outChannels:$,padInfo:F.padInfo,strideHeight:A,strideWidth:C,filterHeight:m,filterWidth:y,effectiveFilterHeight:P,effectiveFilterWidth:O,dilationHeight:E,dilationWidth:I,inShape:t,outShape:g,filterShape:n}}function vv(t,n,e,r,i,o,s,a){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],p=u[3],g=u[4];if("channelsLast"===s)c=t[0],l=t[1],f=t[2],p=t[3],g=t[4];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=t[0],g=t[1],l=t[2],f=t[3],p=t[4]}var m,y=n[0],w=n[1],b=n[2],A=n[4],C=aI(e),_=C[0],E=C[1],I=C[2],P=aI(r),O=P[0],F=P[1],N=P[2],Q=Zh(y,O),q=Zh(w,F),$=Zh(b,N),ce=function(pe,Ce,De,Ue,Be,mt,_t,$e,ft,st,Cn){var Et,an,Jt,er;if("number"==typeof pe){Et={top:pe,bottom:pe,left:pe,right:pe,front:pe,back:pe,type:0===pe?"VALID":"NUMBER"};var Kn=function(gp,Ou,I2,mp,Pa,S2){null==Pa&&(Pa=sI(gp,Ou,mp));var yue=gp[1],wue=gp[2],T2=yv((gp[0]-Ou+2*Pa)/mp+1,S2);k(Hn(T2),function(){return"The output # of depths ("+T2+") must be an integer. Change the stride and/or zero pad parameters"});var M2=yv((yue-Ou+2*Pa)/mp+1,S2);k(Hn(M2),function(){return"The output # of rows ("+M2+") must be an integer. Change the stride and/or zero pad parameters"});var R2=yv((wue-Ou+2*Pa)/mp+1,S2);return k(Hn(R2),function(){return"The output # of columns ("+R2+") must be an integer. Change the stride and/or zero pad parameters"}),[T2,M2,R2,1]}([Ce,De,Ue,1],$e,0,Be,pe,Cn);an=Kn[0],Jt=Kn[1],er=Kn[2]}else if("same"===pe){var Qn=((an=Math.ceil(Ce/Be))-1)*Be+$e-Ce,Ra=((Jt=Math.ceil(De/mt))-1)*mt+ft-De,ka=((er=Math.ceil(Ue/_t))-1)*_t+st-Ue,No=Math.floor(Qn/2),pp=Qn-No,ku=Math.floor(Ra/2),nl=Ra-ku,Pu=Math.floor(ka/2);Et={top:ku,bottom:nl,left:Pu,right:ka-Pu,front:No,back:pp,type:"SAME"}}else{if("valid"!==pe)throw Error("Unknown padding parameter: "+pe);Et={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},an=Math.ceil((Ce-$e+1)/Be),Jt=Math.ceil((De-ft+1)/mt),er=Math.ceil((Ue-st+1)/_t)}return{padInfo:Et,outDepth:an,outHeight:Jt,outWidth:er}}(i,l,f,p,_,E,I,Q,q,$,a),X=ce.outDepth,J=ce.outHeight,Z=ce.outWidth,oe=o?A*g:A;return"channelsFirst"===s?m=[c,oe,X,J,Z]:"channelsLast"===s&&(m=[c,X,J,Z,oe]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:f,inWidth:p,inChannels:g,outDepth:X,outHeight:J,outWidth:Z,outChannels:oe,padInfo:ce.padInfo,strideDepth:_,strideHeight:E,strideWidth:I,filterDepth:y,filterHeight:w,filterWidth:b,effectiveFilterDepth:Q,effectiveFilterHeight:q,effectiveFilterWidth:$,dilationDepth:O,dilationHeight:F,dilationWidth:N,inShape:t,outShape:m,filterShape:n}}function sI(t,n,e,r){void 0===r&&(r=1);var i=Zh(n,r);return Math.floor((t[0]*(e-1)-e+i)/2)}function aA(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function aI(t){return"number"==typeof t?[t,t,t]:t}function Zh(t,n){return n<=1?t:t+(t-1)*(n-1)}function yv(t,n){if(!n)return t;switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+n)}}function Ad(t){var n=aA(t);return 1===n[0]&&1===n[1]&&1===n[2]}function Vi(t,n){return Ad(t)||Ad(n)}function uA(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function uI(t,n,e){if("complex64"===n){if("complex64"===t.dtype)return t.clone();var r=Tn(t.shape),i=t.toFloat(),o=e.complex(i,r);return r.dispose(),i.dispose(),o}if(!f3(t.dtype,n))return V.makeTensorFromDataId(t.dataId,t.shape,n);if("complex64"===t.dtype){var s=e.real(t);return o=s.cast(n),s.dispose(),o}if("int32"===n)return e.int(t);if("bool"===n){var a=Ee(0,t.dtype);return o=e.notEqual(t,a),a.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+n)}function cA(t,n){return V.makeTensorFromDataId(t.dataId,n,t.dtype)}function cI(t,n,e){var r=(n-t)/(e-1),i=Kh(e,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Cr(i,"float32")}function lI(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+n.length+".");for(var e=new Float32Array(2*t.length),r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function gB(t,n){return{real:t[2*n],imag:t[2*n+1]}}function nX(t,n,e,r){t[2*r]=n,t[2*r+1]=e}function rX(t,n,e){var r=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(r),imag:Math.sin(r)}}function iX(t,n,e){var r=function(u,c,l){for(var f=0,p=u.length,g=0,m=!1;f<p;){var y=l(c,u[g=f+(p-f>>>1)]);y>0?f=g+1:(p=g,m=!y)}return m?f:-f-1}(t,n,e||oX);t.splice(r<0?-(r+1):r,0,n)}function oX(t,n){return t>n?1:t<n?-1:0}function dI(t,n,e,r,i){return mB(t,n,e,r,i,0).selectedIndices}function fI(t,n,e,r,i,o){var s=mB(t,n,e,r,i,o,!0);return s.numValidOutputs.dispose(),{selectedIndices:s.selectedIndices,selectedScores:s.selectedScores}}function mB(t,n,e,r,i,o,s,a){void 0===s&&(s=!1),void 0===a&&(a=!1);for(var u=Array.from(n).map(function(_,E){return{score:_,boxIndex:E,suppressBeginIndex:0}}).filter(function(_){return _.score>i}).sort(vB),c=o>0?-.5/o:0,l=[],f=[];l.length<e&&u.length>0;){var p=u.pop(),g=p.score,m=p.boxIndex,y=p.suppressBeginIndex;if(g<i)break;for(var w=!1,b=l.length-1;b>=y;--b){var A=sX(t,m,l[b]);if(A>=r){w=!0;break}if(p.score=p.score*aX(r,c,A),p.score<=i)break}p.suppressBeginIndex=l.length,w||(p.score===g?(l.push(m),f.push(p.score)):p.score>i&&iX(u,p,vB))}var C=l.length;return a&&(l.fill(0,C),f.fill(0,C)),{selectedIndices:Cr(l,"int32"),selectedScores:Cr(f,"float32"),numValidOutputs:Ee(C,"int32")}}function sX(t,n,e){var r=t.subarray(4*n,4*n+4),i=t.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),g=(a-o)*(u-s),m=(f-c)*(p-l);if(g<=0||m<=0)return 0;var y=Math.max(o,c),w=Math.max(s,l),b=Math.min(a,f),A=Math.min(u,p),C=Math.max(b-y,0)*Math.max(A-w,0);return C/(g+m-C)}function aX(t,n,e){var r=Math.exp(n*e*e);return e<=t?r:0}function vB(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function yB(t,n,e){var r=new Array(t.rank).fill(0),i=t.shape.slice();return n.map(function(o){i[e]=o;var s=t.slice(r,i);return r[e]+=o,s})}function wB(t,n){for(var e=new Array(t.rank),r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];var i=lt(e,t.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),s=new Array(t.rank),a=0;a<s.length;a++)s[a]=o[a]%t.shape[a];var u=t.locToIndex(s);i.values[r]=t.values[u]}return i.toTensor()}function bB(t,n,e,r,i){for(var o=n[n.length-1],s=[t.length/o,o],a=s[0],u=s[1],c=qh(e,a*r),l=qh("int32",a*r),f=0;f<a;f++){for(var p=f*u,g=t.subarray(p,p+u),m=[],y=0;y<g.length;y++)m.push({value:g[y],index:y});m.sort(function(_,E){return E.value-_.value});var w=f*r,b=c.subarray(w,w+r),A=l.subarray(w,w+r);for(y=0;y<r;y++)b[y]=m[y].value,A[y]=m[y].index}var C=n.slice();return C[C.length-1]=r,[ti(c,C,e),ti(l,C,"int32")]}function hI(t,n){for(var e=[],r=0;r<n.length;r++)n[r]&&e.push(r);var i=lt(t,"int32"),o=lt([e.length,t.length],"int32");for(r=0;r<e.length;r++){var s=i.indexToLoc(e[r]);o.values.set(s,r*t.length)}return o.toTensor()}Object.freeze({castTensor:uI,reshapeTensor:cA,linspaceImpl:cI,upcastType:qr,axesAreInnerMostDims:XD,combineLocations:Z3,computeOutAndReduceShapes:$r,expandShapeToKeepDim:zi,assertAxesAreInnerMostDims:oo,getAxesPermutation:js,getUndoAxesPermutation:Jb,getInnerMostAxes:zs,getBroadcastDims:_u,getReductionAxes:_r,assertAndGetBroadcastShape:St,assertParamsConsistent:$3,computeOutShape:vd,computePool2DInfo:Jh,computePool3DInfo:mv,computeConv2DInfo:qc,computeConv3DInfo:vv,computeDefaultPad:sI,tupleValuesAreOne:Ad,eitherStridesOrDilationsAreOne:Vi,convertConv2DDataFormat:uA,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:rA});var uX=function(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode="\n      void main() {\n        "+e.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},cX=function(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode="\n      void main() {\n        "+e.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},lX=function(t,n,e){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,s=Math.ceil(t.inSize/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+(e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===n?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function AB(t,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return t+"."+e})}function ao(t,n){return 1===n?[t]:AB(t,n)}function wi(){var t,n,e,r,i,o,s,a,u,c;return 2===ue().getNumber("WEBGL_VERSION")?(t="#version 300 es",n="in",e="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",n="attribute",e="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:u,defineRound:c}}function xd(t,n,e){void 0===e&&(e="index");var r=Ls(n);return r.map(function(i,o){return"int "+t[o]+" = "+e+" / "+i+"; "+(o===r.length-1?"int "+t[o+1]+" = "+e+" - "+t[o]+" * "+i:"index -= "+t[o]+" * "+i)+";"}).join("")}function pI(t){var n=Ls(t).map(function(e){return e.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+n[0]+" + coords.y * "+n[1]+" + coords.z;\n  }\n"}var xB="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function dX(t,n,e,r){var i=[];t.forEach(function(g){var m=Le(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?i.push("uniform float "+g.name+(m>1?"["+m+"]":"")+";"):(i.push("uniform sampler2D "+g.name+";"),i.push("uniform int offset"+g.name+";"))});var o,s,g,a=i.join("\n"),u=t.map(function(g){return function(m,y,w){void 0===w&&(w=!1);var b="";return b+=w?CB(m):$h(m),m.shapeInfo.logicalShape.length<=y.logicalShape.length&&(b+=w?function(_,E){var I,X,P=_.name,O=P.charAt(0).toUpperCase()+P.slice(1),F="get"+O+"AtOutCoords",N=_.shapeInfo.logicalShape.length,Q=E.logicalShape.length,q=_u(_.shapeInfo.logicalShape,E.logicalShape),$=An(Q),ce=Q-N,de=["x","y","z","w","u","v"];I=0===N?"":Q<2&&q.length>=1?"coords = 0;":q.map(function(De){return"coords."+de[De+ce]+" = 0;"}).join("\n"),X=Q<2&&N>0?"coords":_.shapeInfo.logicalShape.map(function(De,Ue){return"coords."+de[Ue+ce]}).join(", ");var J="return outputValue;",Z=1===Le(_.shapeInfo.logicalShape),oe=1===Le(E.logicalShape);if(1!==N||Z||oe){if(Z&&!oe)J=1===Q?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(q.length){var pe=N-2,Ce=N-1;q.indexOf(pe)>-1&&q.indexOf(Ce)>-1?J="return vec4(outputValue.x);":q.indexOf(pe)>-1?J="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":q.indexOf(Ce)>-1&&(J="return vec4(outputValue.xx, outputValue.zz);")}}else J="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+F+"() {\n      "+$+" coords = getOutputCoords();\n      "+I+"\n      vec4 outputValue = get"+O+"("+X+");\n      "+J+"\n    }\n  "}(m,y):function(_,E){var I=_.name,P=I.charAt(0).toUpperCase()+I.slice(1),O="get"+P+"AtOutCoords",Q=_.shapeInfo.logicalShape.length,q=E.logicalShape.length;if(!_.shapeInfo.isUniform&&Q===q&&null==_.shapeInfo.flatOffset&&Ar(_.shapeInfo.texShape,E.texShape))return"\n      float "+O+"() {\n        return sampleTexture("+I+", resultUV);\n      }\n    ";var ce=An(q),de=_u(_.shapeInfo.logicalShape,E.logicalShape),X=q-Q,J=["x","y","z","w","u","v"];return"\n    float "+O+"() {\n      "+ce+" coords = getOutputCoords();\n      "+(0===Q?"":q<2&&de.length>=1?"coords = 0;":de.map(function(oe){return"coords."+J[oe+X]+" = 0;"}).join("\n"))+"\n      return get"+P+"("+(q<2&&Q>0?"coords":_.shapeInfo.logicalShape.map(function(oe,pe){return"coords."+J[pe+X]}).join(", "))+");\n    }\n  "}(m,y)),b}(g,n,r)}).join("\n"),c=n.texShape,l=wi(),f="\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+l.texture2D+"(textureSampler, uv).r;\n    }\n  ",p=(g=l).version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+g.varyingFs+" vec2 resultUV;\n    "+g.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+g.defineSpecialNaN+"\n    "+g.defineSpecialInf+"\n    "+g.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+fX+"\n    "+hX+"\n    "+pX+"\n  ";return n.isPacked?(o=function(g,m){switch(g.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return E=m,1===(I=[Math.ceil(E[0]/2),Math.ceil(E[1]/2)])[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+I[1]+".0);\n      }\n    ":1===I[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+I[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+I[0]+", "+I[1]+"));\n      return 2 * (resTexRC.x * "+I[1]+" + resTexRC.y);\n    }\n  ";case 2:return function(_,E){var I=[Math.ceil(E[0]/2),Math.ceil(E[1]/2)];if(Ar(_,E))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+I[0]+", "+I[1]+"));\n      }\n    ";var P=Math.ceil(_[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+I[0]+", "+I[1]+"));\n\n      int index = resTexRC.x * "+I[1]+" + resTexRC.y;\n      int r = 2 * (index / "+P+");\n      int c = imod(index, "+P+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(g,m);case 3:return y=g,w=m,b=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],C=(A=Math.ceil(y[2]/2))*Math.ceil(y[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+b[0]+", "+b[1]+"));\n      int index = resTexRC.x * "+b[1]+" + resTexRC.y;\n\n      int b = index / "+C+";\n      index -= b * "+C+";\n\n      int r = 2 * (index / "+A+");\n      int c = imod(index, "+A+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(_,E){for(var I=[Math.ceil(E[0]/2),Math.ceil(E[1]/2)],P=Math.ceil(_[_.length-1]/2),O=P*Math.ceil(_[_.length-2]/2),F=O,N="",Q="b, r, c",q=2;q<_.length-1;q++)N="\n      int b"+q+" = index / "+(F*=_[_.length-q-1])+";\n      index -= b"+q+" * "+F+";\n    "+N,Q="b"+q+", "+Q;return"\n    ivec"+_.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+I[0]+", "+I[1]+"));\n      int index = resTexRC.x * "+I[1]+" + resTexRC.y;\n\n      "+N+"\n\n      int b = index / "+O+";\n      index -= b * "+O+";\n\n      int r = 2 * (index / "+P+");\n      int c = imod(index, "+P+") * 2;\n\n      return ivec"+_.length+"("+Q+");\n    }\n  "}(g,m)}var E,I,y,w,b,A,C}(n.logicalShape,c),s=function(g){return"\n    void setOutput(vec4 val) {\n      "+g.output+" = val;\n    }\n  "}(l)):(o=function(g,m){switch(g.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(A=m)[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+A[1]+".0);\n      }\n    ":1===A[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+A[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+A[0]+", "+A[1]+"));\n      return resTexRC.x * "+A[1]+" + resTexRC.y;\n    }\n  ";case 2:return function(b,A){return Ar(b,A)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+A[0]+", "+A[1]+"));\n      }\n    ":1===b[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+A[0]+", "+A[1]+"));\n        int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===b[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+A[0]+", "+A[1]+"));\n        int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+A[0]+", "+A[1]+"));\n      int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n      int r = index / "+b[1]+";\n      int c = index - r * "+b[1]+";\n      return ivec2(r, c);\n    }\n  "}(g,m);case 3:return y=m,w=xd(["r","c","d"],g),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+y[0]+", "+y[1]+"));\n      int index = resTexRC.x * "+y[1]+" + resTexRC.y;\n      "+w+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(b,A){var C=xd(["r","c","d","d2"],b);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+A[0]+", "+A[1]+"));\n      int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n      "+C+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(g,m);case 5:return function(b,A){var C=xd(["r","c","d","d2","d3"],b);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+A[0]+",\n                             "+A[1]+"));\n\n      int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n\n      "+C+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(g,m);case 6:return function(b,A){var C=xd(["r","c","d","d2","d3","d4"],b);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+A[0]+", "+A[1]+"));\n      int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n\n      "+C+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(g,m);default:throw new Error(g.length+"-D output sampling is not yet supported")}var A,y,w}(n.logicalShape,c),s=function(g){return"\n    void setOutput(float val) {\n      "+g.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(l)),r&&(p+=gX),[p,f,s,a,o,u,e].join("\n")}function $h(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=e.shapeInfo.texShape;if(1===o[0]&&1===o[1])return"\n      float "+i+"() {\n        return sampleTexture("+r+", halfCR);\n      }\n    ";var u=e.shapeInfo.texShape;return"\n    float "+i+"() {\n      vec2 uv = uvFromFlat("+u[0]+", "+u[1]+", "+Cd(r)+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 1:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+i+"(int index) {\n        "+ep(e)+"\n      }\n    ";var o=e.shapeInfo.texShape,s=o[0],a=o[1];if(1===a&&1===s)return"\n      float "+i+"(int index) {\n        return sampleTexture("+r+", halfCR);\n      }\n    ";var u=Cd(r);return 1===a?"\n      float "+i+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+u+") + 0.5) / "+s+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":1===s?"\n      float "+i+"(int index) {\n        vec2 uv = vec2((float(index + "+u+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int index) {\n      vec2 uv = uvFromFlat("+s+", "+a+", index + "+u+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 2:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=e.shapeInfo.texShape;if(null!=s&&Ar(r,s))return"\n    float "+o+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+s[1]+".0, "+s[0]+".0);\n      return sampleTexture("+i+", uv);\n    }\n  ";var c=jc(r),l=c.newShape,f=c.keptDims;if(l.length<r.length)return"\n      "+$h(tp(e,l))+"\n      float "+o+"(int row, int col) {\n        return "+o+"("+np(["row","col"],f)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+r[1]+", 1)));\n        "+ep(e)+"\n      }\n    ";var m=s[0],y=s[1],w=Cd(i);return 1===y?"\n    float "+o+"(int row, int col) {\n      float index = dot(vec3(row, col, "+w+"), vec3("+r[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+m+".0);\n      return sampleTexture("+i+", uv);\n    }\n  ":1===m?"\n    float "+o+"(int row, int col) {\n      float index = dot(vec3(row, col, "+w+"), vec3("+r[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+y+".0, 0.5);\n      return sampleTexture("+i+", uv);\n    }\n  ":"\n  float "+o+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+r[1]+" + col + "+w+";\n    vec2 uv = uvFromFlat("+m+", "+y+", index);\n    return sampleTexture("+i+", uv);\n  }\n"}(t);case 3:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[1]*r[2],a=r[2],u=jc(r),c=u.newShape,l=u.keptDims;if(c.length<r.length)return"\n        "+$h(tp(e,c))+"\n        float "+o+"(int row, int col, int depth) {\n          return "+o+"("+np(["row","col","depth"],l)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+s+", "+a+", 1)));\n        "+ep(e)+"\n      }\n    ";var g=e.shapeInfo.texShape,m=g[0],y=g[1],w=e.shapeInfo.flatOffset;return y===s&&null==w?"\n        float "+o+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+y+".0, "+m+".0);\n          return sampleTexture("+i+", uv);\n        }\n      ":y===a&&null==w?"\n    float "+o+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+r[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+y+".0, "+m+".0);\n      return sampleTexture("+i+", uv);\n    }\n  ":"\n      float "+o+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+s+" + col * "+a+" + depth + "+Cd(i)+";\n        vec2 uv = uvFromFlat("+m+", "+y+", index);\n        return sampleTexture("+i+", uv);\n      }\n  "}(t);case 4:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[3],a=r[2]*s,u=r[1]*a,c=jc(r),l=c.newShape,f=c.keptDims;if(l.length<r.length)return"\n      "+$h(tp(e,l))+"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        return "+o+"("+np(["row","col","depth","depth2"],f)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+u+", "+a+", "+s+", 1)));\n        "+ep(e)+"\n      }\n    ";var g=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,y=m[0],w=m[1];return w===u&&null==g?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+s+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+w+".0, "+y+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":w===s&&null==g?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+r[1]*r[2]+", "+r[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+w+".0, "+y+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+a+" +\n          depth * "+s+" + depth2;\n      vec2 uv = uvFromFlat("+y+", "+w+", index + "+Cd(i)+");\n      return sampleTexture("+i+", uv);\n    }\n  "}(t);case 5:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[4],a=r[3]*s,u=r[2]*a,c=r[1]*u,l=jc(r),f=l.newShape,p=l.keptDims;if(f.length<r.length)return"\n      "+$h(tp(e,f))+"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+o+"("+np(["row","col","depth","depth2","depth3"],p)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+c+", "+u+", "+a+", "+s+")) +\n          depth3;\n        "+ep(e)+"\n      }\n    ";var m=e.shapeInfo.flatOffset,y=e.shapeInfo.texShape,w=y[0],b=y[1];return b===c&&null==m?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+u+", "+a+", "+s+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+b+".0, "+w+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":b===s&&null==m?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+r[1]*r[2]*r[3]+",\n               "+r[2]*r[3]+", "+r[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+b+".0, "+w+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+c+" + col * "+u+" + depth * "+a+" +\n          depth2 * "+s+" + depth3 + "+Cd(i)+";\n      vec2 uv = uvFromFlat("+w+", "+b+", index);\n      return sampleTexture("+i+", uv);\n    }\n  "}(t);case 6:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=jc(r),a=s.newShape,u=s.keptDims;if(a.length<r.length)return"\n      "+$h(tp(e,a))+"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+o+"("+np(["row","col","depth","depth2","depth3","depth4"],u)+");\n      }\n    ";var l=r[5],f=r[4]*l,p=r[3]*f,g=r[2]*p,m=r[1]*g;if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+m+", "+g+", "+p+", "+f+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+l+", 1)));\n        "+ep(e)+"\n      }\n    ";var y=e.shapeInfo.flatOffset,w=e.shapeInfo.texShape,b=w[0],A=w[1];return A===m&&null==y?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+g+", "+p+", "+f+", "+l+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+A+".0, "+b+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":A===l&&null==y?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+r[1]*r[2]*r[3]*r[4]+",\n               "+r[2]*r[3]*r[4]+",\n               "+r[3]*r[4]+",\n               "+r[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+A+".0, "+b+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+m+" + col * "+g+" + depth * "+p+" +\n          depth2 * "+f+" + depth3 * "+l+" + depth4 + "+Cd(i)+";\n      vec2 uv = uvFromFlat("+b+", "+A+", index);\n      return sampleTexture("+i+", uv);\n    }\n  "}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function CB(t){var n,i,o,s,a,u,c;switch(t.shapeInfo.logicalShape.length){case 0:return"\n    vec4 get"+(n=t.name).charAt(0).toUpperCase()+n.slice(1)+"() {\n      return "+wi().texture2D+"("+n+", halfCR);\n    }\n  ";case 1:return s="get"+(o=(i=t).name).charAt(0).toUpperCase()+o.slice(1),a=i.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=wi(),"\n    vec4 "+s+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+u[0]+", "+u[1]+", index);\n      return "+c.texture2D+"("+o+", uv);\n    }\n  ";case 2:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=u[0],l=u[1],f=wi();if(null!=u&&Ar(o,u))return"\n      vec4 "+a+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+l+".0, "+c+".0);\n\n        return "+f.texture2D+"("+s+", uv);\n      }\n    ";var p=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];return"\n    vec4 "+a+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(o[1]/2)+", "+p[0]+", "+p[1]+", row, col);\n      return "+f.texture2D+"("+s+", uv);\n    }\n  "}(t);case 3:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(1===o[0])return"\n        "+CB(tp(i,o.slice(1)))+"\n        vec4 "+a+"(int b, int row, int col) {\n          return "+a+"("+np(["b","row","col"],[1,2])+");\n        }\n      ";var p=c[0],g=c[1],m=Math.ceil(o[2]/2);return"\n    vec4 "+a+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+p+", "+g+", "+m*Math.ceil(o[1]/2)+", "+m+", b, row, col);\n      return "+wi().texture2D+"("+s+", uv);\n    }\n  "}(t);default:return function(i){for(var o=i.shapeInfo.logicalShape,s=o.length,a=i.name,u="get"+a.charAt(0).toUpperCase()+a.slice(1),c=i.shapeInfo.texShape,l=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],f=l[0],p=l[1],g=Math.ceil(o[s-1]/2),m=g*Math.ceil(o[s-2]/2),y="int b, int row, int col",w="b * "+m+" + (row / 2) * "+g+" + (col / 2)",b=2;b<s-1;b++)y="int b"+b+", "+y,w="b"+b+" * "+(m*=o[s-b-1])+" + "+w;return"\n    vec4 "+u+"("+y+") {\n      int index = "+w+";\n      int texR = index / "+p+";\n      int texC = index - texR * "+p+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+p+", "+f+");\n      return "+wi().texture2D+"("+a+", uv);\n    }\n  "}(t)}}var fX="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",hX="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",pX="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",gX="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Cd(t){return"offset"+t}function ep(t){var n=t.name,e=Le(t.shapeInfo.logicalShape);return e<2?"return "+n+";":"\n    for (int i = 0; i < "+e+"; i++) {\n      if (i == index) {\n        return "+n+"[i];\n      }\n    }\n  "}function An(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function tp(t,n){var e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function np(t,n){return n.map(function(e){return t[e]}).join(", ")}var mX=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,k(t.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var o=Math.ceil(t[t.length-1]/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,a,u=this.outputShape,c=u.length,l=An(c),f=ao("coords",c);if(1===o){var p=An(a=c+1);s="\n        "+p+" sourceLocR = "+p+"("+f.join()+", 0);\n        ++"+f[c-1]+";\n        "+p+" sourceLocG = "+p+"("+f.join()+", 0);\n        ++"+f[c-2]+";\n        "+p+" sourceLocA = "+p+"("+f.join()+", 0);\n        --"+f[c-1]+";\n        "+p+" sourceLocB = "+p+"("+f.join()+", 0);\n        --"+f[c-2]+";"}else a=c,s="\n        "+l+" sourceLocR = coords;\n        ++"+f[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+f[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+f[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+f[c-2]+";";var g=["x","y","z","w","u","v"].slice(0,a),m="."+g[a-1],y=g.map(function(O){return"int "+O}),w=ao("sourceLocR",a-1).concat("inIdx.r"),b=ao("sourceLocG",a-1).concat("inIdx.g"),A=ao("sourceLocB",a-1).concat("inIdx.b"),C=ao("sourceLocA",a-1).concat("inIdx.a"),_="max"===e?"greaterThan":"lessThan",E=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+w.join()+"),\n                             getBestIndicesAChannel("+b.join()+"),\n                             getBestIndicesAChannel("+A.join()+"),\n                             getBestIndicesAChannel("+C.join()+")));",I="vec4(\n            getAChannel("+w.join()+"),\n            hasNextCol ? getAChannel("+b.join()+") : 0.,\n            hasNextRow ? getAChannel("+A.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+C.join()+") : 0.)",P=r?"":"\n      float getBestIndicesAChannel("+y.join()+") {\n        return getChannel(getBestIndicesA("+g.join()+"),\n                                          vec2("+g.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+y.join()+") {\n        return getChannel(getA("+g.join()+"),\n                               vec2("+g.slice(-2).join()+"));\n      }\n      "+P+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+f[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+f[c-2]+" < "+(u[c-2]-1)+";\n        "+s+"\n        ivec4 srcIdx = ivec4(sourceLocR"+m+", sourceLocG"+m+",\n          sourceLocB"+m+", sourceLocA"+m+") * "+n+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+I+";\n\n        for (int i = 0; i < "+n+"; i++) {\n          inIdx = srcIdx;\n          "+E+"\n          vec4 candidate = "+I+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+_+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},vX=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var a=t.effectiveFilterHeight,u=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(a-1-t.padInfo.top)+", "+(u-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t.filterHeight*t.filterWidth)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n            wR += "+t.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+t.dilationWidth+") {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},yX=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var l=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(l-1-t.padInfo.front)+", "+(f-1-t.padInfo.top)+", "+(p-1-t.padInfo.left)+");\n      const float avgMultiplier = float("+1/(t.filterDepth*t.filterHeight*t.filterWidth)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+t.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+t.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+f+";\n              wR += "+t.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+p+";\n                wC += "+t.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wX=function(t,n,e,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],St(t,n),St(t,e);var s="0.0";null!=r&&(St(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="1.0";null!=i&&(St(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+a+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},bX=function(t,n,e,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],St(t,n),St(t,e);var s="vec4(0.0)";null!=r&&(St(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="vec4(1.0)";null!=i&&(St(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = "+s+";\n        vec4 scale = "+a+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},_B=function(t,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=St(n,e),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},gI="return a + b;",mI="return a - b;",EB="return a * b;",DB="return (a < 0.) ? b * a : a;",$n=function(t,n,e){this.variableNames=["A","B"],this.outputShape=St(n,e),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},IB="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Eu=function(t,n,e,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=St(n,e);var i=this.outputShape.length,o="";if(r)if(0===i||1===Le(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          "+An(i)+" coords = getOutputCoords();\n        ",1===i)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var s=ao("coords",i);o+="\n            bool nextRowOutOfBounds =\n              ("+s[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+s[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},CX=function(){function t(n){this.variableNames=["A"],this.outputShape=n,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){null==r.minLoc&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),_X=function(){function t(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){null==r.minLoc&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),EX=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},DX=function(t){this.outputShape=[],this.outputShape=vd(t,1),this.variableNames=t.map(function(a,u){return"T"+u});var n=new Array(t.length-1);n[0]=t[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++)r.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+n[e-1]+"));");r.push("else setOutput(getT"+n.length+"(yR, yC-"+n[n.length-1]+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},IX=function(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=vd(t,n);var e=this.outputShape,r=e.length,i=An(r),o=ao("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(w,b){return"T"+b});var a=new Array(t.length-1);a[0]=t[0][n];for(var u=1;u<a.length;u++)a[u]=a[u-1]+t[u][n];var c=s[n],l=s.slice(-2),f=s.join(),p="if ("+c+" < "+a[0]+") {\n        return getChannel(\n            getT0("+f+"), vec2("+l.join()+"));\n        }";for(u=1;u<a.length;u++){var g=a[u-1];p+="\n        if ("+c+" < "+a[u]+"  && "+c+" >= "+a[u-1]+") {\n          return getChannel(\n            getT"+u+"("+lA(s,c,g)+"),\n            vec2("+lA(l,c,g)+"));\n        }"}var y=a[a.length-1];p+="\n        return getChannel(\n          getT"+a.length+"("+lA(s,c,y)+"),\n          vec2("+lA(l,c,y)+"));",this.userCode="\n      float getValue("+s.map(function(w){return"int "+w})+") {\n        "+p+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n\n        "+o[r-1]+" = "+o[r-1]+" + 1;\n        if ("+o[r-1]+" < "+e[r-1]+") {\n          result.g = getValue("+o+");\n        }\n\n        "+o[r-2]+" = "+o[r-2]+" + 1;\n        if ("+o[r-2]+" < "+e[r-2]+") {\n          result.a = getValue("+o+");\n        }\n\n        "+o[r-1]+" = "+o[r-1]+" - 1;\n        if ("+o[r-2]+" < "+e[r-2]+" &&\n            "+o[r-1]+" < "+e[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "};function lA(t,n,e){var r=t.indexOf(n);return t.map(function(i,o){return o===r?i+" - "+e:i}).join()}var SX=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              if ("+("channelsLast"===t.dataFormat)+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},TX=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,o="channelsLast"===t.dataFormat;this.userCode="\n      const ivec2 pads = ivec2("+(n-1-t.padInfo.top)+", "+(e-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+(o?3:1)+"];\n\n        ivec2 dyCorner = ivec2(coords["+(o?1:2)+"], coords["+(o?2:3)+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+n+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+n+" - 1 - wR;\n\n          for (int wC = 0; wC < "+e+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+e+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n\n              if ("+o+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},MX=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yF = 0; yF < "+t.outDepth+"; yF++) {\n            int xF = wF + yF * "+t.strideDepth+" - "+t.padInfo.front+";\n\n            if (xF < 0 || xF >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n              int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n                int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},RX=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(n-1-t.padInfo.front)+", "+(e-1-t.padInfo.top)+", "+(r-1-t.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+n+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+t.strideDepth+".0;\n\n          if (dyF < 0.0 || dyF >= "+t.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+n+" - 1 - wF;\n\n          for (int wR = 0; wR < "+e+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+e+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},kX=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+t.outChannels/t.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+t.strideHeight+" - "+t.padInfo.top+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+t.strideWidth+" - "+t.padInfo.left+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},PX=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,a=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(n-1-t.padInfo.top)+", "+(e-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+n+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+n+" - 1 - wR;\n\n          for (int wC = 0; wC < "+e+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+e+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+a+"; dm++) {\n              int d2 = d1 * "+a+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},SB=function(t,n,e,r){void 0===n&&(n=!1),void 0===e&&(e=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,o=t.padInfo.left,s=t.strideHeight,a=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterHeight,f=t.filterWidth,p=4*Math.floor(t.inChannels/4),g=t.inChannels%4,m="channelsLast"===t.dataFormat,y=m?1:2,w=m?2:3,b=m?3:1,A="",C="";e&&(A=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+e+"\n        }":"\n          float activation(float x) {\n            "+e+"\n          }\n        ",C="result = activation(result);");var _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+A+"\n\n      const ivec2 strides = ivec2("+s+", "+a+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+b+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+y+"], coords["+w+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+m+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===g)+") {\n\n              if ("+m+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+p+") *\n                    getW(wR, wC, "+p+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+p+", xR, xC) *\n                    getW(wR, wC, "+p+", d2);\n              }\n\n            } else if ("+(2===g)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2)\n              );\n\n              if ("+m+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===g)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2),\n                getW(wR, wC, "+p+" + 2, d2)\n              );\n\n              if ("+m+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1),\n                  getX(batch, xR, xC, "+p+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC),\n                  getX(batch, "+p+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+_+"\n        "+C+"\n        setOutput(result);\n      }\n    "},OX=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,e=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,f=t.filterHeight,p=t.filterWidth,g=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+o+", "+s+");\n      const ivec3 pads = ivec3("+n+", "+e+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+a+";\n\n          if (xF < 0 || xF >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+p+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+g+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===m)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+g+") *\n                  getW(wF, wR, wC, "+g+", d2);\n              } else if ("+(2===m)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+g+"),\n                  getX(batch, xF, xR, xC, "+g+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+g+", d2),\n                  getW(wF, wR, wC, "+g+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===m)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+g+"),\n                  getX(batch, xF, xR, xC, "+g+" + 1),\n                  getX(batch, xF, xR, xC, "+g+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+g+", d2),\n                  getW(wF, wR, wC, "+g+" + 1, d2),\n                  getW(wF, wR, wC, "+g+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},TB=function(t,n,e,r){void 0===n&&(n=!1),void 0===e&&(e=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,o=t.inWidth,s=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,p=t.filterHeight,g=t.filterWidth,m=t.outChannels/t.inChannels,y="",w="";e&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+e+"\n        }":"\n          float activation(float x) {\n            "+e+"\n          }\n        ",w="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+m+";\n        int q = d2 - d1 * "+m+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+p+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+g+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+o+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+b+"\n        "+w+"\n        setOutput(result);\n      }\n    "},MB=function(t,n,e,r){void 0===n&&(n=!1),void 0===e&&(e=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,o=t.inWidth,s=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,p=t.filterHeight,g=t.filterWidth,m=g,y="int xR; int xC; int xCOffset;",w=0;w<p;w++)for(var b=0;b<g;b++)y+="\n          vec4 xTexelR"+w+"C"+2*b+" = vec4(0.);\n          vec4 wR"+w+"C"+b+" = vec4(0.);\n          vec4 xR"+w+"C"+b+" = vec4(0.);";for(w=0;w<p;w++)for(var A=0;A<m;A++){if(y+="\n          xR = xRCorner + "+w*l+";\n          xC = xCCorner + "+(b=2*A)*f+";\n        ",1===c){if(b<g&&(y+=a%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+w+"C"+b+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    xTexelR"+w+"C"+b+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+w+"C"+b+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+w+"C"+b+" = vec4(previous.zw, xTexelR"+w+"C"+b+".xy);\n                } else {\n                  xR"+w+"C"+b+" = vec4(0, 0, xTexelR"+w+"C"+b+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+o+") {\n                  xTexelR"+w+"C"+b+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+w+"C"+b+" = vec4(0.);\n                }\n\n                xR"+w+"C"+b+" = xTexelR"+w+"C"+b+";\n              ",b+1<g)){var C=a%2==0?SD(f):f;f%2==0&&a%2==1||f%2!=0&&a%2!=1?(y+="\n                  xCOffset = xC + "+a%2+" + "+C+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+w+"C"+(b+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(y+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+o+") {\n                      xTexelR"+w+"C"+b+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+w+"C"+b+" = vec4(0.);\n                    }\n                  "),y+="\n                  xR"+w+"C"+(b+1)+" = vec4(\n                    xTexelR"+w+"C"+b+".zw, xTexelR"+w+"C"+(b+2)+".xy);\n                "):y+="\n                  xCOffset = xC + "+C+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+w+"C"+(b+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+w+"C"+(b+1)+" = xTexelR"+w+"C"+(b+2)+";\n                "}}else b<g&&(y+="\n              if(xR >= 0 && xR < "+i+") {\n            ",a%2==1?(y+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+w+"C"+b+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+w+"C"+b+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+o+") {\n                  xTexelR"+w+"C"+(b+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+w+"C"+(b+2)+" = vec4(0.);\n                }\n\n                xR"+w+"C"+b+" = vec4(\n                  xTexelR"+w+"C"+b+".zw, xTexelR"+w+"C"+(b+2)+".zw);\n              ",b+1<g&&(y+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+o+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+w+"C"+(b+1)+" = vec4(xTexelR"+w+"C"+(b+2)+".xy, final.xy);\n                ")):(y+="\n                if(xC >= 0 && xC < "+o+") {\n                  xTexelR"+w+"C"+b+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+w+"C"+b+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+w+"C"+(b+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+w+"C"+(b+2)+" = vec4(0.);\n                }\n\n                xR"+w+"C"+b+" = vec4(\n                  xTexelR"+w+"C"+b+".xy, xTexelR"+w+"C"+(b+2)+".xy);\n              ",b+1<g&&(y+="\n                  xR"+w+"C"+(b+1)+" = vec4(\n                    xTexelR"+w+"C"+b+".zw, xTexelR"+w+"C"+(b+2)+".zw);\n                ")),y+="}");b<g&&(y+="\n            vec4 wTexelR"+w+"C"+b+" = getW("+w+", "+b+", d1, q);\n            wR"+w+"C"+b+" = vec4(wTexelR"+w+"C"+b+".xz, wTexelR"+w+"C"+b+".xz);\n          ",b+1<g&&(y+="\n              vec4 wTexelR"+w+"C"+(b+1)+" = getW("+w+", "+(b+1)+", d1, q);\n              wR"+w+"C"+(b+1)+" =\n                vec4(wTexelR"+w+"C"+(b+1)+".xz, wTexelR"+w+"C"+(b+1)+".xz);"))}for(w=0;w<p;w++)for(b=0;b<g;b++)y+="dotProd += xR"+w+"C"+b+" * wR"+w+"C"+b+";";var _="",E="";e&&(_=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+e+"\n        }":"vec4 activation(vec4 x) {\n          "+e+"\n        }",E="result = activation(result);");var I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+_+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+y+"\n\n        vec4 result = dotProd;\n        "+I+"\n        "+E+"\n        setOutput(result);\n      }\n    "},NX=function(t,n,e,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],s=t[1],a=t[2],l=e[0],f=e[1];this.outputShape=[n[0],l,f,t[3]];var g=[s-1+".0",a-1+".0"],m=g[0],y=g[1],w=l>1?[""+(s-1)/(l-1),"(y2-y1) * height_ratio","y1*"+m+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+m],_=f>1?[""+(a-1)/(f-1),"(x2-x1) * width_ratio","x1*"+y+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+y];this.userCode="\n      const float height_ratio = float("+w[0]+");\n      const float width_ratio = float("+_[0]+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+w[1]+";\n        float width_scale = "+_[1]+";\n\n        float in_y = "+w[2]+";\n        if( in_y < 0.0 || in_y > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+_[2]+";\n        if( in_x < 0.0 || in_x > "+y+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+("bilinear"===r?1:0)+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},FX=function(t,n,e){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=e?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(e?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+An(r)+" coords = getOutputCoords();\n        int end = "+RB(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+n+") {\n            continue;\n          }\n          "+RB(r,"coords")+" = idx;\n          val += getX("+function(s,a){if(1===s)return""+a;if(2===s)return a+".x, "+a+".y";if(3===s)return a+".x, "+a+".y, "+a+".z";if(4===s)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function RB(t,n){if(1===t)return""+n;if(2===t)return n+".y";if(3===t)return n+".z";if(4===t)return n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var BX=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sv.DENSE;var n=av(t),e=wi();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+xd(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+n[0]+", "+n[1]+"));\n        int index = 4 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+e.output+" = result;\n      }\n    "},LX=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sv.DENSE;var n=av(t),e=wi();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+xd(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+n[0]+", "+n[1]+"));\n        int index = 4 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+e.output+" = result;\n      }\n    "},UX=function(){function t(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),jX=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},zX=function(t){this.variableNames=["A"],this.outTexUsage=Do.DOWNLOAD;var n=wi();this.outputShape=t,this.userCode="\n      "+xB+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+n.output+" = encode_float(x);\n      }\n    "},VX=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Do.DOWNLOAD;var n=wi();this.outputShape=t,this.userCode="\n      "+xB+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+n.output+" = encode_float(x);\n      }\n    "},WX=function(t,n,e){void 0===e&&(e=!1),this.variableNames=["A"];var r=wi(),i=n[0],o=n[1];this.outputShape=t;var s="result";e&&(s="floor(result * 255. + 0.5)"),this.userCode="\n      "+pI(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+s+", 0., 0., 0.);\n      }\n    "},HX=function(t,n,e){void 0===e&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=wi(),i=n[0],o=n[1];this.outputShape=t;var s="",a="result";e&&(a="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;s+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+t[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+t[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+pI(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+s+"\n\n        "+r.output+" = "+a+";\n      }\n    "},kB=function(t,n,e){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI;this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+t+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+(e?r+".0":"1.0")+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},KX=function(){function t(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){null==e.valueLoc&&(e.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(e.valueLoc,n)}},t}(),QX=function(t,n,e){this.variableNames=["A","indices"];var r=t.slice();r[e]=n,this.outputShape=r,this.rank=r.length;var i=An(this.rank),o=function(s,a){var u=s.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(1===u)return"int(getIndices(resRC))";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],f=0;f<s.length;f++)l.push(f===a?"int(getIndices("+c[f]+"))":""+c[f]);return l.join()}(t,e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},YX=function(t,n,e){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var r=An(n.length),i=An(e.length);this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+(this.sliceDim>1?"strides[j]":"strides")+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function PB(t,n){var e=wi();return S3(t,n,e.version+"\n    precision highp float;\n    "+e.attribute+" vec3 clipSpacePos;\n    "+e.attribute+" vec2 uv;\n    "+e.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function OB(t,n){return k3(t,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function NB(t,n){return P3(t,n,new Uint16Array([0,1,2,2,1,3]))}function wv(t,n,e,r,i,o,s){N3(e,r);var a=O3(t,n),u=t.TEXTURE_2D;return Re(t,n,function(){return t.bindTexture(u,a)}),Re(t,n,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Re(t,n,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Re(t,n,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Re(t,n,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Re(t,n,function(){return t.texImage2D(u,0,i,e,r,0,o,s,null)}),Re(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)}),a}function FB(t,n,e,r,i){var o=Wb(e,r);return wv(t,n,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function BB(t,n,e,r,i){var o=Wb(e,r);return wv(t,n,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function LB(t,n,e,r,i){var o=Wb(e,r);return wv(t,n,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function UB(t,n,e,r,i){var o=uv(e,r);return wv(t,n,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function jB(t,n,e,r,i){var o=uv(e,r);return wv(t,n,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function zB(t,n,e,r){return Re(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),GD(t,n,e,"clipSpacePos",r,3,20,0)&&GD(t,n,e,"uv",r,2,20,12)}function VB(t,n,e,r,i,o,s){var a,u,c;Re(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),o instanceof Uint8Array?(a=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,c=t.RGBA):(a=new Float32Array(r*i*4),u=t.FLOAT,c=s.internalFormatPackedFloat),a.set(o),Re(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,c,r,i,0,t.RGBA,u,a)}),Re(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function WB(t,n,e,r){Re(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),r.data instanceof Uint8Array?Re(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Re(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Re(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function HB(t,n,e,r,i){var o=t.createBuffer();Re(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var s=16*e*r;return Re(t,n,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)}),Re(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,0)}),Re(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function qB(t,n,e){var r=t,i=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function GB(t,n,e,r,i){var o=Wb(e,r),s=o[0],a=o[1],u=new Uint8Array(e*r*4);return Re(t,n,function(){return t.readPixels(0,0,s,a,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function KB(t,n,e,r,i,o,s,a){var p,u=t,c=new Float32Array((p=uv(o,s))[0]*p[1]*4);return u.bindBuffer(u.PIXEL_PACK_BUFFER,n),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function QB(t,n,e,r){var i=new Float32Array(e*r*4);return Re(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,i)}),i}var XX=Object.freeze({createVertexShader:PB,createVertexBuffer:OB,createIndexBuffer:NB,createFloat32MatrixTexture:FB,createFloat16MatrixTexture:BB,createUnsignedBytesMatrixTexture:LB,createPackedMatrixTexture:UB,createFloat16PackedMatrixTexture:jB,bindVertexProgramAttributeStreams:zB,uploadDenseMatrixToTexture:VB,uploadPixelDataToTexture:WB,createBufferFromOutputTexture:HB,downloadFloat32MatrixFromBuffer:qB,downloadByteEncodedFloatMatrixFromOutputTexture:GB,downloadPackedMatrixFromBuffer:KB,downloadMatrixFromPackedOutputTexture:QB}),YB=function(){function t(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=ue().getNumber("WEBGL_VERSION");null!=n?(this.gl=n,E3(e,n)):this.gl=va(e);var r="WEBGL_color_buffer_float";if(1===ue().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=cv(this.gl,this.debug,"OES_texture_float"),So(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=cv(this.gl,this.debug,"OES_texture_half_float");else if(ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),So(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=cv(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(So(this.gl,r="EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!So(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=OB(this.gl,this.debug),this.indexBuffer=NB(this.gl,this.debug),this.framebuffer=F3(this.gl,this.debug),this.textureConfig=qD(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return ue().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var n=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Re(e,this.debug,function(){return e.finish()}),Re(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Re(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),Re(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Re(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Re(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),FB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),BB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),LB(this.gl,this.debug,n,e)},t.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),WB(this.gl,this.debug,n,e)},t.prototype.uploadDenseMatrixToTexture=function(n,e,r,i){this.throwIfDisposed(),VB(this.gl,this.debug,n,e,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),jB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),UB(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(KD(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Re(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return GB(i.gl,i.debug,e,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(n,e,r,i,o,s){return KB(this.gl,n,0,0,0,o,s)},t.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return qB(this.gl,n,e)},t.prototype.createBufferFromTexture=function(n,e,r){this.bindTextureToFrameBuffer(n);var i=HB(this.gl,this.debug,e,r);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},t.prototype.createFence=function(n){var e,r,i=this;if(ue().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var a=o.clientWaitSync(s,0,0);return a===o.ALREADY_SIGNALED||a===o.CONDITION_SATISFIED},e=s}else ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(e,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return QB(i.gl,i.debug,e,r)})},t.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,r=T3(e,this.debug,n),i=PB(e,this.debug),o=M3(e,this.debug);return Re(e,this.debug,function(){return e.attachShader(o,i)}),Re(e,this.debug,function(){return e.attachShader(o,r)}),R3(e,this.debug,o),this.debug&&Gb(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=zB(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),null!=n&&Re(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},t.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,null!=this.program&&this.debug&&Gb(this.gl,this.debug,this.program),Re(this.gl,this.debug,function(){return e.gl.useProgram(n)})},t.prototype.getUniformLocation=function(n,e,r){return void 0===r&&(r=!0),this.throwIfDisposed(),r?L3(this.gl,this.debug,n,e):U3(this.gl,n,e)},t.prototype.getAttributeLocation=function(n,e){var r=this;return this.throwIfDisposed(),Re(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,e)})},t.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},t.prototype.setInputMatrixTexture=function(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),j3(this.gl,this.debug,0,n,e,r)},t.prototype.setOutputMatrixTexture=function(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)},t.prototype.setOutputPackedMatrixTexture=function(n,e,r){this.throwIfDisposed();var i=uv(e,r);this.setOutputMatrixTextureDriver(n,i[0],i[1])},t.prototype.setOutputMatrixWriteRegion=function(n,e,r,i){this.setOutputMatrixWriteRegionDriver(r,n,i,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(n,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&Gb(this.gl,this.debug,this.program),lv(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),Re(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),Re(this.gl,this.debug,function(){return n.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=cv(this.gl,this.debug,2===ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(2!==ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return Pe(this,void 0,void 0,function(){var e=this;return Oe(this,function(r){switch(r.label){case 0:return[4,TD(function(){return e.disposed||e.isQueryAvailable(n,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(n,e){if(0===e)return null;if(2===e){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(n,e){if(0===e)return!0;if(2===e){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(n){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var n=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},t.prototype.addItemToPoll=function(n,e){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||TD(function(){return r.pollItems(),0===r.itemsToPoll.length})},t.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),Kb(this.gl,this.debug,n,this.framebuffer),this.debug&&lv(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Kb(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&lv(this.gl)):KD(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var r=e();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(n,e,r){this.throwIfDisposed();var i=this.gl;Kb(i,this.debug,n,this.framebuffer),this.debug&&lv(i),this.outputTexture=n,Re(i,this.debug,function(){return i.viewport(0,0,e,r)}),Re(i,this.debug,function(){return i.scissor(0,0,e,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(n,e,r,i){var o=this;this.throwIfDisposed(),Re(this.gl,this.debug,function(){return o.gl.scissor(n,e,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function XB(t,n){if(t.length!==n.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+n.length+" inputs");t.forEach(function(e,r){var i=e.logicalShape,o=n[r],s=o.shape;if(!Ar(i,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+s+" must match");if(!e.isUniform||!o.isUniform){var a=e.texShape,u=o.isUniform?null:o.texData.texShape;if(!Ar(a,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+u+" must match")}})}var JX=function(t,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var i=e.inChannels,o=e.strideWidth,s=e.strideHeight,a=e.padInfo,u=e.outWidth,c=e.dilationWidth,l=e.dilationHeight,f=e.dataFormat,p=a.left,g=a.top,m=i*e.filterWidth,y=wi(),w="channelsLast"===f,b=w?0:1,A=w?1:2,C="",_=0;_<=1;_++)for(var E=0;E<=1;E++)C+="\n          blockIndex = rc.y + "+E+";\n          pos = rc.x + "+_+";\n\n          if(blockIndex < "+t[1]+" && pos < "+t[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+s+" - "+g+";\n            d0 = offsetY + "+l+" * (pos / "+m+");\n\n            if(d0 < "+n[b]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+p+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+m+".) / "+i+".));\n\n              if(d1 < "+n[A]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+w+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*_+E)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*_+E)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+C+"\n\n        "+y.output+" = result;\n      }\n    "},ZX=function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[];var s=n,a=t[3]-1;this.outputShape=t;var u="float("+e+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+s+"; j <= "+s+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+a+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));")+";\n        setOutput(val);\n      }\n    "},$X=function(t,n,e,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=e,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+n+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+n+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+e+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},eJ=function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var s=n,a=t[3]-1;this.outputShape=t;var u="float("+e+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+s+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+s+"; j <= "+s+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+a+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+(.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));")+";\n        setOutput(result);\n      }\n    "},tJ=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var i=t.effectiveFilterHeight,o=t.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(i-1-t.padInfo.top)+", "+(o-1-t.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+t.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(i*o-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},nJ=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var a=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(a-1-t.padInfo.front)+", "+(u-1-t.padInfo.top)+", "+(c-1-t.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+a+";\n           wD += "+t.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+t.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+t.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+t.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+t.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+t.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+(a*u*c-1)+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vI=function(t,n,e,r,i,o,s){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null),void 0===s&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var u=Math.ceil((e?t[1]:t[2])/2),c=e?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",f=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",m="";o&&(g=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+o+"\n        }":"vec4 activation(vec4 x) {\n          "+o+"\n        }",m="result = activation(result);");var y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+g+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+f[0]+" * "+p[0]+");\n          result += ("+f[1]+" * "+p[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+y+"\n\n        "+m+"\n\n        setOutput(result);\n      }\n    "},rJ=function(){function t(n,e,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){null==e.seedLoc&&(e.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(e.seedLoc,n)}},t}(),iJ=function(t,n,e,r){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+e+"),\n                      float(index == coords.y)));\n      }\n    "},oJ=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var a,c,l,n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var e=ao("rc",n),r=An(n),i=function(a,u,c){if(1===a)return"rc > "+u[0];for(var l="",f=a-2;f<a;f++)l+=c[f]+" >= "+u[f],f<a-1&&(l+="||");return l}(n,t,e),o=function(a,u,c,l){if(1===a)return"";var f=l.slice(-2);return"\n    int r = "+f[0]+";\n    int c = "+f[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+u+";\n    bool rEdge = rp1 >= "+c+";\n  "}(n,t[t.length-1],t[t.length-2],e),s=(l=function(f,p){for(var g=[],m=0;m<=1;m++)for(var y=0;y<=1;y++){for(var w=(0===m?"r":"rp1")+", "+(0===y?"c":"cp1"),b=2;b<f;b++)w=p[p.length-1-b]+","+w;g.push(w)}return g}(c=(a=t).length,e),1===c?"getA(rc),\n            rc + 1 >= "+a[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+l[0]+"),\n          cEdge ? 0. : getA("+l[1]+"),\n          rEdge ? 0. : getA("+l[2]+"),\n          rEdge || cEdge ? 0. : getA("+l[3]+")");this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+s+"));\n          }\n        }\n      "}},sJ=function(t,n,e){this.variableNames=["x"],this.outputShape=n.map(function(u,c){return u[0]+t[c]+u[1]});var r=t.length,i=An(r),o=n.map(function(u){return u[0]}).join(","),s=n.map(function(u,c){return u[0]+t[c]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+o+");\n      "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+e+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+a+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+s+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+e+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},aJ=function(t,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(w,b){return w[0]+t[b]+w[1]});for(var r=t.length,i=An(r),o=n.map(function(w){return w[0]}).join(","),s=n.map(function(w,b){return w[0]+t[b]}).join(","),a=ao("rc",r),u=ao("source",r),c=a[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",f=[i+" rc = outputLoc;",a[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+a[r-2]+" += 1;\n       if("+a[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+a[r-1]+" += 1;\n         if("+c+") {"],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",m=0,y=1===r?2:4;m<y;m++)g+="\n        "+f[m]+"\n        if ("+p+") {\n          result["+m+"] = float("+e+");\n        } else {\n          "+i+" source = rc - start;\n          result["+m+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      ";this.userCode="\n      const "+i+" start = "+i+"("+o+");\n      const "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+(g+=1===r?"} ":"}}")+"\n        setOutput(result);\n      }\n    "},yI=function(t,n,e){if(this.variableNames=["x"],"avg"===n&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,o=t.strideWidth,s=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var p="avg"===n,g="0.0";if(p||(g="-1.0 / 1e-20"),e)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+l+", "+f+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+s+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+a+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var m=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(m="avgValue / count");var y=4*Math.floor(r/4),w=r%4,b="\n      if ("+p+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+l+", "+f+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+s+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+y+"; wC += 4) {\n            int xC = xCCorner + wC * "+a+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              getValue(batch, xR, xC + 3 * "+a+", d)\n            );\n\n            "+b+"\n          }\n\n          int xC = xCCorner + "+y+";\n          if ("+(1===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+b+"\n          } else if ("+(2===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+b+"\n          } else if ("+(3===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              initializationValue\n            );\n\n            "+b+"\n          }\n        }\n        setOutput("+m+");\n      }\n    "}},wI=function(t,n,e){if(this.variableNames=["x"],"avg"===n&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth,g=t.padInfo.front,m=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var w="avg"===n,b="0.0";if(w||(b="-1.0 / 1e-20"),e)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+o+", "+s+");\n        const ivec3 pads = ivec3("+g+", "+m+", "+y+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+a+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+f+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+p+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+f+" * "+p+" +\n                      wR * "+p+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var A=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(A="avgValue / count");var C=4*Math.floor(r/4),_=r%4,E="\n      if ("+w+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+o+", "+s+");\n      const ivec3 pads = ivec3("+g+", "+m+", "+y+");\n      const float initializationValue = "+b+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+b+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+a+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+C+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+E+"\n            }\n\n            int xC = xCCorner + "+C+";\n            if ("+(1===_)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+E+"\n            } else if ("+(2===_)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+E+"\n            } else if ("+(3===_)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+E+"\n            }\n          }\n          setOutput("+A+");\n        }\n      }\n    "}},uJ=function(t,n){this.variableNames=["x"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/e);this.outputShape=[r,o];var s="0.0",a="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",a="min"):"max"===n&&(s="-1.0 / 1e-20",a="max");var u=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?u="sumValue":"prod"===n?u="prodValue":"all"===n?u="allValue":"any"===n&&(u="anyValue");var c=4*Math.floor(e/4),l=e%4,f="\n      if ("+("sum"===n)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===n)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+a+"(values, minMaxValue);\n      }\n    ",p="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var g="";i%e>0&&(g="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+g+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+e+";\n\n        vec4 minMaxValue = vec4("+s+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "},cJ=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var e="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),e+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+xd(["r","c","d"],n)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+pI(t)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+t[1]+";\n        int cols = "+t[2]+";\n\n        "+e+"\n\n        setOutput(result);\n      }\n    "},lJ=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],s=t.shape,a=s[1],u=s[2],c=[e&&a>1?i-1:i,e&&u>1?o-1:o],l=[e&&a>1?a-1:a,e&&u>1?u-1:u],f=c[0]/l[0],p=c[1]/l[1],g=1/f,m=1/p,y=2*Math.ceil(g)+2,w=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+g+");\n        const float invWidthScale = float("+m+");\n\n        const int winHeight = int("+y+");\n        const int winWidth = int("+w+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},dJ=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var o=t[1],s=t[2];this.outputShape=[t[0],n,e,t[3]];var u=[r&&n>1?o-1:o,r&&e>1?s-1:s],c=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},fJ=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[1],s=t[2],a=t[3];this.outputShape=[t[0],n,e,a];var u=[r&&n>1?o-1:o,r&&e>1?s-1:s],c=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+s+".0,\n                                     "+s+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(a-1)+";\n        bool hasNextRow = coords.z < "+(e-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},hJ=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],s=t.shape,a=s[1],u=s[2],c=[e&&a>1?i-1:i,e&&u>1?o-1:o],l=[e&&a>1?a-1:a,e&&u>1?u-1:u],f=c[0]/l[0],p=c[1]/l[1],g=1/f,m=1/p,y=2*Math.ceil(g)+2,w=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+g+");\n        const float invWidthScale = float("+m+");\n\n        const int winHeight = int("+y+");\n        const int winWidth = int("+w+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+e+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+e+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},pJ=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var o=t[1],s=t[2];this.outputShape=[t[0],n,e,t[3]];var u=[r&&n>1?o-1:o,r&&e>1?s-1:s],c=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(r?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},gJ=function(t,n){this.variableNames=["x"];var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=t,1!==e){var r=t.map(function(o,s){return-1!==n.indexOf(a=s)&&1!==t[a]?t[a]+" - coords["+a+"] - 1":"coords["+a+"]";var a}).join(","),i=An(e);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "},mJ=function(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=t;var u,r=ao("rc",e),i=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],s=An(e);function a(u){var c=t.map(function(l,f){return g=u,-1!==n.indexOf(p=f)&&1!==t[p]?t[p]+" - "+g[p]+" - 1":""+g[p];var p,g});return"getChannel(getX("+c.join(",")+"), vec2("+c.slice(-2).join(",")+"))"}this.userCode=1===e?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+t[0]+" - rc - 1),\n            "+t[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+t[0]+" - (rc  + 1) - 1),\n                "+t[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+s+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+a(r.slice())+";\n          if("+i+"){\n            result.g = "+((u=r.slice())[e-1]="("+u[e-1]+" + 1)",a(u)+";\n          }\n          if(")+o+") {\n            result.b = "+function(u){return u[e-2]="("+u[e-2]+" + 1)",a(u)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(u){return u[e-1]="("+u[e-1]+" + 1)",u[e-2]="("+u[e-2]+" + 1)",a(u)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},JB=function(t,n,e,r,i,o,s){void 0===s&&(s=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var a=An(i.length),u=An(o.length),c="";1===e?c="i":2===e&&(c="i, j");var f="";1===r?f="i":2===r&&(f="i, coords[1]"),this.userCode="\n        "+a+" strides = "+a+"("+i+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+t+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+n+"; j++) {\n              int index = round(getIndices("+c+"));\n              flattenedIndex += index * "+(n>1?"strides[j]":"strides")+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates("+f+");\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},vJ=function(t,n){this.variableNames=["x","segmentIds"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/e);this.outputShape=[r,s];var a=4*Math.floor(e/4),u=e%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";i%e>0&&(l="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var f="";i%e>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+e+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+a+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+a+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},yJ=function(t,n,e){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(1===e)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[],u=0;u<n.length;u++)a.push(""+o[u]),u<t&&s.push(""+o[u]);r=s.join(),i=a.join()}var c=An(e);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},wJ=function(){function t(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,r=An(this.rank),i="uniform int start["+this.rank+"];",o=function(s){if(1===s)return"sourceLoc";if(s<=6)return bI.slice(0,s).map(function(a){return"sourceLoc."+a}).join(",");throw Error("Slicing for rank "+s+" is not yet supported")}(this.rank);e="\n        "+r+" sourceLoc;\n        "+r+" coords = getOutputCoords();\n        "+n.map(function(s,a){return"sourceLoc."+bI[a]+" = start["+a+"] + coords."+bI[a]+";"}).join("\n")+"\n      ",this.userCode="\n      "+i+"\n      void main() {\n        "+e+"\n        setOutput(getSource("+o+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){null==e.startLoc&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),null==e.startLoc)||r.gl.uniform1iv(e.startLoc,n)}},t}(),bI=["x","y","z","w","u","v"],bJ=function(){function t(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=An(this.rank),r=ao("coords",this.rank),i=ao("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+i.slice(-2).join()+")",s="getChannel(getSource("+i.join()+"), "+o+")",a="\n      result.x = "+s+";\n      if (++"+r[this.rank-1]+" < "+n[this.rank-1]+") {\n        ++"+i[this.rank-1]+";\n        result.y = "+s+";\n        --"+i[this.rank-1]+";\n      }\n    ",u=1===this.rank?"":"\n      --"+r[this.rank-1]+";\n      if (++"+r[this.rank-2]+" < "+n[this.rank-2]+") {\n        ++"+i[this.rank-2]+";\n        result.z = "+s+";\n        if (++"+r[this.rank-1]+" < "+n[this.rank-1]+") {\n          ++"+i[this.rank-1]+";\n          result.w = "+s+";\n        }\n      }\n    ",c=this.rank<=4?"sourceLoc = coords +\n            "+e+"("+n.map(function(l,f){return"start["+f+"]"}).join()+");":n.map(function(l,f){return i[f]+" = "+r[f]+" + start["+f+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+e+" coords = getOutputCoords();\n        "+e+" sourceLoc;\n        "+c+"\n        vec4 result = vec4(0.);\n        "+a+"\n        "+u+"\n        setOutput(result);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){null==e.startLoc&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),null==e.startLoc)||r.gl.uniform1iv(e.startLoc,n)}},t}(),AJ=function(t,n,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=An(e.length),o=An(e.length),s="";if(1===r)s="coords * strides + begin";else{var a=0;s=e.map(function(u,c){return a++,1===e.length?"coords * strides["+c+"] + begin["+c+"]":"coords["+(a-1)+"] * strides["+c+"] + begin["+c+"]"}).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+t+");\n      "+i+" strides = "+i+"("+n+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+s+"));\n      }\n    "},xJ=function(){function t(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(n,e,r){var i,o=ZB(e,r),s=$B(n,o,r);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[s].shift();return this.usedTextures[s].push(a),a}return this.numUsedTextures++,this.log(),o===Io.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===Io.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===Io.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===Io.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===Io.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[s].push(i),i},t.prototype.releaseTexture=function(n,e,r,i){if(null!=this.freeTextures){var o=$B(e,ZB(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[o],a=s.indexOf(n);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(a,1),this.log()}},t.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var n=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){n.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function ZB(t,n){if(t===Do.UPLOAD)return Io.PACKED_2X2_FLOAT32;if(t===Do.RENDER||null==t)return e=n,ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Io.PACKED_2X2_FLOAT32:Io.UNPACKED_FLOAT32:e?Io.PACKED_2X2_FLOAT16:Io.UNPACKED_FLOAT16;var e;if(t===Do.DOWNLOAD||t===Do.PIXELS)return Io.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function $B(t,n,e){return t[0]+"_"+t[1]+"_"+n+"_"+e}var CJ=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[r]*n[r];this.outputShape=e,this.rank=e.length;var i=An(this.rank),o=function(s){var a=s.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(1===a)return"imod(resRC, "+s[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],c=[],l=0;l<s.length;l++)c.push("imod("+u[l]+", "+s[l]+")");return c.join()}(t);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},_J=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];this.outputShape=e,this.rank=e.length;var i=An(this.rank),o=function(s){var a=s.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],c=new Array(a),l=0;l<s.length;l++)c[s[l]]=u[l];return c.join()}(n);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},EJ=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=An(this.rank),o=AB("rc",this.rank),s=new Array(this.rank);for(r=0;r<n.length;r++)s[n[r]]=o[r];var a="vec2("+s.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+e[this.rank-1],c="getChannel(getA("+s.join()+"), "+a+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+e[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},AI=1.7580993408473768,xI=1.0507009873554805,yt=function(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+n+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Ws="if (isnan(x)) return x;",eL="return abs(x);",tL=Ws+"\n  return (x < 0.0) ? 0.0 : x;\n",nL=Ws+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",rL="return (x >= 0.0) ? x : (exp(x) - 1.0);",IJ="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+AI+";\n  float scale = "+xI+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",iL="return -x;",oL="return ceil(x);",sL="return floor(x);",aL="return exp(x);",uL="return exp(x) - 1.0;",SJ=Ws+"\n  return sin(x);\n",TJ=Ws+"\n  return cos(x);\n",MJ=Ws+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",RJ=Ws+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",kJ=Ws+"\n  return atan(x);\n",PJ=Ws+"return log(x + sqrt(x * x + 1.0));",OJ=Ws+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",NJ=Ws+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",dA="return x;",cL="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",lL="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",dL="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",bv=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+n+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},BJ=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,e=ao("rc",n),r=An(n),i=function(a,u){if(1===a)return"rc";for(var c="",l=0;l<a;l++)c+=u[l],l<a-1&&(c+=",");return c}(n,e),o=e.slice(-2),s=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+s+"));\n      }\n    "},fA={};function hA(t,n){if(void 0===n&&(n=!1),"linear"===t)return"return x;";if("relu"===t)return n?cL:tL;if("elu"===t)return n?dL:rL;if("relu6"===t)return n?lL:nL;if("prelu"===t)return n?IB:DB;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var fL=function(t){function n(e){var r,i=t.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!ue().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var o=va(ue().getNumber("WEBGL_VERSION"));i.binaryCache=((r=ue().getNumber("WEBGL_VERSION"))in fA||(fA[r]={}),fA[r]),i.gpgpu=new YB(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=e,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new xJ(i.gpgpu),i.numMBBeforeWarning=null==ue().global.screen?1024:ue().global.screen.height*ue().global.screen.width*window.devicePixelRatio*600/1024/1024,i.texData=new hB(i,V),i}return Bs(n,t),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(e,r,i){if(ue().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===i&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:e,usage:Do.UPLOAD}),o},n.prototype.move=function(e,r,i,o){if(ue().getBool("DEBUG")&&this.checkNumericalProblems(r),"complex64"===o)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:r,usage:Do.UPLOAD})},n.prototype.readSync=function(e){var r=this.texData.get(e),i=r.values,o=r.dtype,s=r.complexTensors,u=r.shape;if(null!=r.slice){var l;l=r.isPacked?new bv(u,dA):new yt(u,dA);var f=this.runWebGLProgram(l,[{dataId:e,shape:u,dtype:o}],o),p=this.readSync(f.dataId);return this.disposeData(f.dataId),p}if(null!=i)return this.convertAndCacheOnCPU(e);if("string"===o)return i;var g,m,y=null!=this.activeTimers;return y&&(g=Us()),m="complex64"===o?lI(s.real.dataSync(),s.imag.dataSync()):this.getValuesFromTexture(e),y&&(this.downloadWaitMs+=Us()-g),this.convertAndCacheOnCPU(e,m)},n.prototype.read=function(e){return Pe(this,void 0,void 0,function(){var r,i,o,s,u,c,l,f,p,g,m,y,w,b,A,E,I,P,O;return Oe(this,function(F){switch(F.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise(function(N){return r.push(N)})];if(i=this.texData.get(e),o=i.values,s=i.shape,u=i.dtype,c=i.complexTensors,l=i.isPacked,null!=i.slice)return f=l?new bv(s,dA):new yt(s,dA),p=this.runWebGLProgram(f,[{dataId:e,shape:s,dtype:u}],u),g=this.read(p.dataId),this.disposeData(p.dataId),[2,g];if(null!=o)return[2,this.convertAndCacheOnCPU(e)];if(!ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===ue().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return m=null,"complex64"!==u&&ue().get("WEBGL_BUFFER_SUPPORTED")&&(y=this.decode(e),w=this.texData.get(y.dataId),m=(O=this.gpgpu).createBufferFromTexture.apply(O,[w.texture].concat(av(s)))),this.pendingRead.set(e,[]),"complex64"===u?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:F.sent(),F.label=2;case 2:return"complex64"!==u?[3,4]:[4,Promise.all([c.real.data(),c.imag.data()])];case 3:return A=F.sent(),b=lI(A[0],A[1]),[3,5];case 4:null==m?b=this.getValuesFromTexture(e):(E=Le(s),b=this.gpgpu.downloadFloat32MatrixFromBuffer(m,E)),F.label=5;case 5:return null!=y&&this.disposeData(y.dataId),I=this.convertAndCacheOnCPU(e,b),P=this.pendingRead.get(e),this.pendingRead.delete(e),P.forEach(function(N){return N(I)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,I]}})})},n.prototype.checkNumericalProblems=function(e){if(null!=e)for(var r=0;r<e.length;r++){var i=e[r];if(!D3(i))throw ue().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var r,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.isPacked,u=Le(o);if(ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var c=this.decode(e),l=this.texData.get(c.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[l.texture].concat(av(o))).subarray(0,u);return this.disposeData(c.dataId),f}var p=ue().getBool("WEBGL_PACK")&&!0===a,g=p?Qb(o):o,m=p?new VX(g):new zX(g),y=this.runWebGLProgram(m,[{shape:g,dtype:s,dataId:e}],"float32"),w=this.texData.get(y.dataId),b=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(w.texture,w.texShape[0],w.texShape[1]).subarray(0,u);return this.disposeData(y.dataId),b},n.prototype.time=function(e){return Pe(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return Oe(this,function(l){switch(l.label){case 0:return r=this.activeTimers,i=[],o=!1,null==this.programTimersStack?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),s=bu(this.activeTimers.map(function(f){return f.query})).filter(function(f){return null!=f}),a=bu(this.activeTimers.map(function(f){return f.name})).filter(function(f){return null!=f}),this.activeTimers=r,o&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return c=l.sent(),u.kernelMs=a3(c),u.getExtraProfileInfo=function(){return c.map(function(f,p){return{name:a[p],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},l.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Us(),endMs:null}},n.prototype.endTimer=function(e){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Us(),e)},n.prototype.getQueryTime=function(e){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]})})},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;null!=r&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var r=this.texData.get(e),i=r.texture,o=r.dtype,s=r.texShape,a=r.usage,u=r.isPacked,c=r.slice,l=c&&c.origDataId||e,f=this.dataRefCount.get(l);f>1?this.dataRefCount.set(l,f-1):(this.dataRefCount.delete(l),null!=i&&(this.numBytesInGPU-=this.computeBytes(s,o),this.textureManager.releaseTexture(i,s,a,u)));var p=this.texData.get(e);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return ue().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=V.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,r){var i=this;return void 0===r&&(r=128),null!=this.getCPUBackend()&&e.every(function(o){return null==i.texData.get(o.dataId).texture&&o.size<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,r){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:V.keep(e.clone()),imag:V.keep(r.clone())},i},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,i);if(0===Le(i))return ti([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,s=iI(e.shape,r,i);if(o||!s){var a=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bJ(i):new wJ(i),u=a.getCustomSetupFunc(r);return this.compileAndRun(a,[e],null,u)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,i)},n.prototype.shallowSlice=function(e,r,i){var o=this.texData.get(e.dataId),s=this.makeOutput(i,e.dtype),a=this.texData.get(s.dataId);Object.assign(a,o),a.shape=i,a.dtype=e.dtype;var u=oI(r,e.strides);o.slice&&(u+=o.slice.flatOffset),a.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||e.dataId};var c=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,c+1),s},n.prototype.stridedSlice=function(e,r,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,i,o);var s=iA(r,i,o);if(s.some(function(u){return 0===u}))return ti([],s);var a=new AJ(r,o,s);return this.compileAndRun(a,[e])},n.prototype.reverse=function(e,r){var i=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mJ(e.shape,r):new gJ(e.shape,r);return this.compileAndRun(i,[e])},n.prototype.concat=function(e,r){if("complex64"===e[0].dtype){var i=e.map(function(g){return ts(g)}),o=e.map(function(g){return wa(g)});return ei(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(1===e.length)return e[0];if(e.length>ue().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(e.length/2),a=this.concat(e.slice(0,s),r),u=this.concat(e.slice(s),r);return this.concat([a,u],r)}if(ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var c=new IX(e.map(function(g){return g.shape}),r);return this.compileAndRun(c,e)}var l=vd(e.map(function(g){return g.shape}),r),f=e.map(function(g){return g.as2D(-1,Le(g.shape.slice(r)))}),p=new DX(f.map(function(g){return g.shape}));return this.compileAndRun(p,f).reshape(l)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,iL,e.dtype);var r=new yt(e.shape,iL);return this.compileAndRun(r,[e])},n.prototype.batchMatMul=function(e,r,i,o){var s=i?e.shape[2]:e.shape[1],a=o?r.shape[1]:r.shape[2],u=i?e.shape[1]:e.shape[2],c=e.shape[0];if((1===s||1===a)&&u>1e3){i&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var l=1===a?e:e.as3D(c,u,1),f=1===a?2:1,p=1===a?r.as3D(c,1,u):r;return this.multiply(l,p).sum(f,!0)}var g=qr(e.dtype,r.dtype),m=new vI(e.shape,[c,s,a],i,o);return this.compileAndRun(m,[e,r],g)},n.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,s=e.transposeB,a=e.bias,u=e.activation,c=e.preluActivationWeights,l=o?r.shape[2]:r.shape[1],f=s?i.shape[1]:i.shape[2],p=r.shape[0],g=qr(r.dtype,i.dtype),m=null!=a,y=null!=c,w=u?hA(u,!0):null,b=new vI(r.shape,[p,l,f],o,s,m,w,y),A=[r,i];return a&&A.push(a),c&&A.push(c),this.compileAndRun(b,A,g)},n.prototype.multiply=function(e,r){if("complex64"===e.dtype){var i=this.texData.get(e.dataId),o=this.texData.get(r.dataId),s=new _B("return areal * breal - aimag * bimag;",e.shape,r.shape),a=new _B("return areal * bimag + aimag * breal;",e.shape,r.shape),u=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],c=this.compileAndRun(s,u),l=this.compileAndRun(a,u),f=this.complex(c,l);return c.dispose(),l.dispose(),f}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,EB,e.dtype);var p=new $n(EB,e.shape,r.shape);return this.compileAndRun(p,[e,r],e.dtype)},n.prototype.batchNormalization=function(e,r,i,o,s,a){var u=[e,r,i],c=null;null!=a&&(c=a.shape,u.push(a));var l=null;if(null!=s&&(l=s.shape,u.push(s)),ue().getBool("WEBGL_PACK_NORMALIZATION")){var f=new bX(e.shape,r.shape,i.shape,c,l,o);return this.compileAndRun(f,u)}var p=new wX(e.shape,r.shape,i.shape,c,l,o);return this.compileAndRun(p,u)},n.prototype.localResponseNormalization4D=function(e,r,i,o,s){var a=ue().getBool("WEBGL_PACK_NORMALIZATION")?new eJ(e.shape,r,i,o,s):new ZX(e.shape,r,i,o,s);return this.compileAndRun(a,[e])},n.prototype.LRNGrad=function(e,r,i,o,s,a,u){var c=new $X(r.shape,o,s,a,u);return this.compileAndRun(c,[r,i,e])},n.prototype.tile=function(e,r){if("string"===e.dtype){var i=this.readSync(e.dataId).map(function(s){return tv(s)});return wB(lt(e.shape,e.dtype,i),r)}var o=new CJ(e.shape,r);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,r,i){var o=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aJ(e.shape,r,i):new sJ(e.shape,r,i);return this.compileAndRun(o,[e])},n.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var i=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new EJ(e.shape,r):new _J(e.shape,r);return this.compileAndRun(i,[e])},n.prototype.gather=function(e,r,i){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,i);var o=new QX(e.shape,r.size,i);return this.compileAndRun(o,[e,r])},n.prototype.batchToSpaceND=function(e,r,i){k(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(f,p){return f*p}),s=eA(e.shape,r,o),a=tA(s.length,r.length),u=nA(e.shape,r,o),c=sB(i,r.length),l=aB(u,i,r.length);return e.reshape(s).transpose(a).reshape(u).slice(c,l)},n.prototype.spaceToBatchND=function(e,r,i){k(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(p,g){return p*g}),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<e.shape.length;++a)s.push([0,0]);var u=e.pad(s),c=eA(u.shape,r,o,!1),l=tA(c.length,r.length,!1),f=nA(u.shape,r,o,!1);return u.reshape(c).transpose(l).reshape(f)},n.prototype.reduce=function(e,r,i){var o=e.shape[0],s=e.shape[1],a=rA(s),u=new uJ({windowSize:a,inSize:s,batchSize:o},r),c=this.compileAndRun(u,[e],i);return 1===c.shape[1]?c:this.reduce(c,r,i)},n.prototype.argReduce=function(e,r,i){void 0===i&&(i=null);var o=e.shape[0],s=e.shape[1];null!=i&&(o=i.shape[0],s=i.shape[1]);var a=rA(s),u=new lX({windowSize:a,inSize:s,batchSize:o},r,null==i),c=[e];null!=i&&c.push(i);var l=this.compileAndRun(u,c,"int32");return 1===l.shape[1]?l:this.argReduce(e,r,l)},n.prototype.argReducePacked=function(e,r,i){void 0===i&&(i=null);var o=null!=i?i.shape:e.shape,s=rA(o[o.length-1]),a=new mX(o,s,r,null==i),c=this.compileAndRun(a,null==i?[e]:[e,i],"int32");return c.rank===e.rank?this.argReducePacked(e,r,c):c},n.prototype.sum=function(e,r){oo("sum",r,e.rank);var i=$r(e.shape,r),o=i[0],s=Le(i[1]),a=e.as2D(-1,s),u=zD(e.dtype);return this.reduce(a,"sum",u).reshape(o)},n.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var i=$r(e.shape,r),o=i[0],s=Le(i[1]),a=e.as2D(-1,s),u=zD(e.dtype);return this.reduce(a,"prod",u).reshape(o)},n.prototype.unsortedSegmentSum=function(e,r,i){var o=0,s=js([o],e.rank),a=e;null!=s&&(a=e.transpose(s),o=zs(1,e.rank)[0]);var u=function(g,m,y){for(var w=[],b=g.length,A=0;A<b;A++)w.push(A!==m?g[A]:y);return w}(a.shape,o,i),c=Le([a.shape[o]]),l=a.as2D(-1,c),f=zD(e.dtype),p=this.segOpCompute(l,"unsortedSegmentSum",r,f,i).reshape(u);return null!=s&&(p=p.transpose(Jb(s))),p},n.prototype.segOpCompute=function(e,r,i,o,s){var a=e.shape[0],u=e.shape[1],c=function(p,g){var m,y=!1;for(p<=30?(m=p,y=!0):m=Vb(p,Math.floor(Math.sqrt(p)));!y;)m>g||m===p?y=!0:m=Vb(p,m+1);return m}(u,s),l=new vJ({windowSize:c,inSize:u,batchSize:a,numSegments:s},r),f=this.compileAndRun(l,[e,i],o);return f.shape[1]===s?f:(i=Zb(0,s).tile([u/c]),this.segOpCompute(f,r,i,o,s))},n.prototype.argMinMaxReduce=function(e,r,i){var o=[r];if(oo("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!ue().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var s=$r(e.shape,o),a=s[0],u=Le(s[1]),c=e.as2D(-1,u);return this.argReduce(c,i).reshape(a)}return this.argReducePacked(e,i)},n.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},n.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},n.prototype.cumsum=function(e,r,i,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var s=new FX(e.shape,i,o);return this.compileAndRun(s,[e])},n.prototype.equal=function(e,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(equal(a, b));\n","bool");var i=new $n("return float(a == b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.notEqual=function(e,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(notEqual(a, b));\n","bool");var i=new $n("return float(a != b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(lessThan(a, b));\n","bool");var i=new $n("return float(a < b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.lessEqual=function(e,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(lessThanEqual(a, b));\n","bool");var i=new $n("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(greaterThan(a, b));\n","bool");var i=new $n("return float(a > b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.greaterEqual=function(e,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var i=new $n("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.logicalNot=function(e){var r=new yt(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},n.prototype.logicalAnd=function(e,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var i=new $n("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.logicalOr=function(e,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var i=new $n("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.select=function(e,r,i){var o=new yJ(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,i],qr(r.dtype,i.dtype))},n.prototype.where=function(e){Xb("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return hI(e.shape,r)},n.prototype.topk=function(e,r,i){return bB(e.dataSync(),e.shape,e.dtype,r)},n.prototype.min=function(e,r){oo("min",r,e.rank);var i=$r(e.shape,r),o=i[0],s=Le(i[1]),a=e.as2D(-1,s);return this.reduce(a,"min",a.dtype).reshape(o)},n.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var i=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eu("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new $n("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.mod=function(e,r){var i=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eu("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new $n("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);oo("max",r,e.rank);var i=$r(e.shape,r),o=i[0],s=Le(i[1]),a=e.as2D(-1,s);return this.reduce(a,"max",a.dtype).reshape(o)},n.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var i=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eu("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new $n("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.all=function(e,r){oo("all",r,e.rank);var i=$r(e.shape,r),o=i[0],s=Le(i[1]),a=e.as2D(-1,s);return this.reduce(a,"all",a.dtype).reshape(o)},n.prototype.any=function(e,r){oo("any",r,e.rank);var i=$r(e.shape,r),o=i[0],s=Le(i[1]),a=e.as2D(-1,s);return this.reduce(a,"any",a.dtype).reshape(o)},n.prototype.realDivide=function(e,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var i=new $n("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,r.shape);return this.compileAndRun(i,[e,r],"float32")},n.prototype.floorDiv=function(e,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var i=new $n("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,r.shape);return this.compileAndRun(i,[e,r],"int32")},n.prototype.add=function(e,r){if("complex64"===e.dtype&&"complex64"===r.dtype)return this.complexSeparableBinaryOp(e,r,gI);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var i=qr(e.dtype,r.dtype);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,gI,i);var o=new $n(gI,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},n.prototype.packedUnaryOp=function(e,r,i){var o=new bv(e.shape,r);return this.compileAndRun(o,[e],i)},n.prototype.packedBinaryOp=function(e,r,i,o,s){void 0===s&&(s=!1);var a=new Eu(i,e.shape,r.shape,s);return this.compileAndRun(a,[e,r],o)},n.prototype.complexSeparableBinaryOp=function(e,r,i){var o=this,s=this.texData.get(e.dataId),a=this.texData.get(r.dataId),u=[[s.complexTensors.real,a.complexTensors.real],[s.complexTensors.imag,a.complexTensors.imag]].map(function(p){var g=p[0],m=p[1],y=o.makeComplexComponentTensorInfo(e,g),w=o.makeComplexComponentTensorInfo(r,m),b=new $n(i,e.shape,r.shape);return o.compileAndRun(b,[y,w],qr(g.dtype,m.dtype))}),c=u[0],l=u[1],f=this.complex(c,l);return c.dispose(),l.dispose(),f},n.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},n.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>ue().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),i=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([i,o])}var s=e.map(function(c){return c.dtype}).reduce(function(c,l){return qr(c,l)}),a=e.map(function(c){return c.shape}),u=ue().getBool("WEBGL_PACK")?new cX(e[0].shape,a):new uX(e[0].shape,a);return this.compileAndRun(u,e,s)},n.prototype.subtract=function(e,r){if("complex64"===e.dtype&&"complex64"===r.dtype)return this.complexSeparableBinaryOp(e,r,mI);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var i=qr(e.dtype,r.dtype);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,mI,e.dtype);var o=new $n(mI,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},n.prototype.pow=function(e,r){var i=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eu("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new $n("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,r.shape),o=qr(e.dtype,r.dtype);return this.compileAndRun(i,[e,r],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,oL,e.dtype);var r=new yt(e.shape,oL);return this.compileAndRun(r,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,sL,e.dtype);var r=new yt(e.shape,sL);return this.compileAndRun(r,[e])},n.prototype.sign=function(e){var r=new yt(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(r,[e])},n.prototype.isNaN=function(e){var r=new yt(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isInf=function(e){var r=new yt(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isFinite=function(e){var r=new yt(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.round=function(e){var r=new yt(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(r,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,aL,e.dtype);var r=new yt(e.shape,aL);return this.compileAndRun(r,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,uL,e.dtype);var r=new yt(e.shape,uL);return this.compileAndRun(r,[e])},n.prototype.softmax=function(e,r){var i=xr([r],e.shape),o=this.max(e,i),s=zi(o.shape,i),a=this.subtract(e,o.reshape(s)),u=this.exp(a),c=this.sum(u,i).reshape(s);return this.realDivide(u,c)},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var r=new yt(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(r,[e])},n.prototype.log1p=function(e){var r=new yt(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},n.prototype.sqrt=function(e){var r=new yt(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new yt(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},n.prototype.reciprocal=function(e){var r=new yt(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},n.prototype.relu=function(e){var r;return r=ue().getBool("WEBGL_PACK")?new bv(e.shape,cL):new yt(e.shape,tL),this.compileAndRun(r,[e])},n.prototype.relu6=function(e){var r;return r=ue().getBool("WEBGL_PACK")?new bv(e.shape,lL):new yt(e.shape,nL),this.compileAndRun(r,[e])},n.prototype.prelu=function(e,r){var i=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eu(IB,e.shape,r.shape):new $n(DB,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.elu=function(e){if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,dL,e.dtype);var r=new yt(e.shape,rL);return this.compileAndRun(r,[e])},n.prototype.eluDer=function(e,r){var i=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eu("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,r.shape):new $n("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.selu=function(e){var r=new yt(e.shape,IJ);return this.compileAndRun(r,[e])},n.prototype.int=function(e){var r=new yt(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},n.prototype.clip=function(e,r,i){var o,s=(o=ue().getBool("WEBGL_PACK_CLIP")?new _X(e.shape):new CX(e.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[e],null,s)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,eL,e.dtype);var r=new yt(e.shape,eL);return this.compileAndRun(r,[e])},n.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),i=new EX(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(i,o)},n.prototype.sigmoid=function(e){var r=new yt(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},n.prototype.softplus=function(e){var r=new yt(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(r,[e])},n.prototype.sin=function(e){var r=new yt(e.shape,SJ);return this.compileAndRun(r,[e])},n.prototype.cos=function(e){var r=new yt(e.shape,TJ);return this.compileAndRun(r,[e])},n.prototype.tan=function(e){var r=new yt(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},n.prototype.asin=function(e){var r=new yt(e.shape,MJ);return this.compileAndRun(r,[e])},n.prototype.acos=function(e){var r=new yt(e.shape,RJ);return this.compileAndRun(r,[e])},n.prototype.atan=function(e){var r=new yt(e.shape,kJ);return this.compileAndRun(r,[e])},n.prototype.atan2=function(e,r){var i=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eu("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new $n("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.sinh=function(e){var r=new yt(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(r,[e])},n.prototype.cosh=function(e){var r=new yt(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(r,[e])},n.prototype.tanh=function(e){var r=new yt(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(r,[e])},n.prototype.asinh=function(e){var r=new yt(e.shape,PJ);return this.compileAndRun(r,[e])},n.prototype.acosh=function(e){var r=new yt(e.shape,OJ);return this.compileAndRun(r,[e])},n.prototype.atanh=function(e){var r=new yt(e.shape,NJ);return this.compileAndRun(r,[e])},n.prototype.erf=function(e){var r=new yt(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(r,[e])},n.prototype.step=function(e,r){var o,i=new yt(e.shape,(void 0===(o=r)&&(o=0),Ws+"\n    return x > 0.0 ? 1.0 : float("+o+");\n  "));return this.compileAndRun(i,[e])},n.prototype.conv2dByMatMul=function(e,r,i,o,s,a){var u=e.shape,c=this.texData.get(e.dataId),g="channelsLast"===i.dataFormat,y=u[2]%2!=0&&!!c.isPacked;if((1==u[0]*u[1]*u[2]||1===i.outChannels)&&i.inChannels>1e3||!ue().getBool("WEBGL_LAZILY_UNPACK")||!ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!y){var b=this.reshape(e,[1,g?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],i.inChannels]),A=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:b,b:A,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),i.outShape)}var _={dataId:e.dataId,shape:[1,g?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),i.inChannels],dtype:e.dtype},E=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,k(hv(c.shape,_.shape),function(){return"packed reshape "+c.shape+" to "+_.shape+" isn't free"});var I=this.reshape(r,[1,i.inChannels,i.outChannels]),P=this.fusedBatchMatMul({a:_,b:I,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),O=this.texData.get(P.dataId);return k(O.isPacked,function(){return"batchMatMul result is expected to be packed"}),c.shape=E,O.shape=i.outShape,V.makeTensorFromDataId(P.dataId,i.outShape,P.dtype)},n.prototype.conv2dWithIm2Row=function(e,r,i,o,s,a){var f=i.outWidth,p=i.outHeight,g="channelsLast"===i.dataFormat,m=i.filterWidth*i.filterHeight*i.inChannels,y=p*f,w=[m,y],b=e.squeeze([0]),A=r.reshape([1,m,-1]),C=new JX(w,b.shape,i),_=this.compileAndRun(C,[b]).reshape([1,w[0],w[1]]),E=null!=o,I=null!=a,P=s?hA(s,!0):null,O=new vI(_.shape,[1,y,i.outChannels],!0,!1,E,P,I),F=[_,A];return o&&F.push(o),I&&F.push(a),this.compileAndRun(O,F).reshape(g?[1,p,f,i.outChannels]:[1,i.outChannels,p,f])},n.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights;if(1===o.filterHeight&&1===o.filterWidth&&1===o.dilationHeight&&1===o.dilationWidth&&1===o.strideHeight&&1===o.strideWidth&&("SAME"===o.padInfo.type||"VALID"===o.padInfo.type))return this.conv2dByMatMul(r,i,o,s,a,u);if(ue().getBool("WEBGL_CONV_IM2COL")&&1===r.shape[0])return this.conv2dWithIm2Row(r,i,o,s,a,u);var c=null!=s,l=null!=u,f=a?hA(a,!1):null,p=new SB(o,c,f,l),g=[r,i];return s&&g.push(s),u&&g.push(u),this.compileAndRun(p,g)},n.prototype.conv2d=function(e,r,i){if(1===i.filterHeight&&1===i.filterWidth&&1===i.dilationHeight&&1===i.dilationWidth&&1===i.strideHeight&&1===i.strideWidth&&("SAME"===i.padInfo.type||"VALID"===i.padInfo.type))return this.conv2dByMatMul(e,r,i);if(ue().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,r,i);var o=new SB(i);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerInput=function(e,r,i){var o=new TX(i);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerFilter=function(e,r,i){var o=new SX(i);return this.compileAndRun(o,[e,r])},n.prototype.fusedDepthwiseConv2D=function(e){var r,i=e.input,o=e.filter,s=e.convInfo,a=e.bias,u=e.activation,c=e.preluActivationWeights,l=ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,f=u?hA(u,l):null,p=[i,o],g=null!=a,m=null!=c;return g&&p.push(a),m&&p.push(c),l?(r=new MB(s,g,f,m),this.compileAndRun(r,p)):(r=new TB(s,g,f,m),this.compileAndRun(r,p))},n.prototype.depthwiseConv2D=function(e,r,i){var o;return ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new MB(i),this.compileAndRun(o,[e,r])):(o=new TB(i),this.compileAndRun(o,[e,r]))},n.prototype.depthwiseConv2DDerInput=function(e,r,i){var o=new PX(i);return this.compileAndRun(o,[e,r])},n.prototype.depthwiseConv2DDerFilter=function(e,r,i){var o=new kX(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3d=function(e,r,i){var o=new OX(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerInput=function(e,r,i){var o=new RX(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerFilter=function(e,r,i){var o=new MX(i);return this.compileAndRun(o,[e,r])},n.prototype.maxPool=function(e,r){var i=new yI(r,"max",!1);return this.compileAndRun(i,[e])},n.prototype.avgPool=function(e,r){var i=new yI(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPoolBackprop=function(e,r,i,o){var s=new yI(o,"max",!0),a=this.compileAndRun(s,[r]),u=new tJ(o),c=this.compileAndRun(u,[e,a],r.dtype);return a.dispose(),c},n.prototype.avgPoolBackprop=function(e,r,i){var o=new vX(i);return this.compileAndRun(o,[e],r.dtype)},n.prototype.cast=function(e,r){return uI(e,r,this)},n.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==r&&(o[s++]=e.shape[a]);var u=new Array(e.rank).fill(0),c=e.shape.slice();c[r]=1;var l=new Array(i);for(a=0;a<l.length;a++)u[r]=a,l[a]=this.slice(e,u,c).reshape(o);return l},n.prototype.avgPool3d=function(e,r){var i=new wI(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,r,i){var o=new yX(i);return this.compileAndRun(o,[e],r.dtype)},n.prototype.maxPool3d=function(e,r){var i=new wI(r,"max",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,r,i,o){var s=new wI(o,"max",!0),a=this.compileAndRun(s,[r]),u=new nJ(o),c=this.compileAndRun(u,[e,a],r.dtype);return a.dispose(),c},n.prototype.reshape=function(e,r){var i=this.texData.get(e.dataId);if(i.isPacked&&!hv(e.shape,r)&&(null===i.texture||!hv(i.shape,r))){var o=this.packedReshape(e,r);return V.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return cA(e,r)},n.prototype.resizeBilinear=function(e,r,i,o){var s=ue().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new fJ(e.shape,r,i,o):new dJ(e.shape,r,i,o);return this.compileAndRun(s,[e],"float32")},n.prototype.resizeBilinearBackprop=function(e,r,i){var o=new lJ(e,r,i);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,r,i,o){var s=new pJ(e.shape,r,i,o);return this.compileAndRun(s,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,r,i){var o=new hJ(e,r,i);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,r,i,o){var s=r?e:Cu(e),c=new rJ(s.shape[0],s.shape[1],i),l=c.getCustomSetupFunc(o);return this.compileAndRun(c,[s],"int32",l)},n.prototype.oneHot=function(e,r,i,o){var s=new iJ(e.size,r,i,o);return this.compileAndRun(s,[e])},n.prototype.diag=function(e){var r=new jX(e.size);return this.compileAndRun(r,[e])},n.prototype.nonMaxSuppression=function(e,r,i,o,s){return Xb("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),dI(e.dataSync(),r.dataSync(),i,o,s)},n.prototype.cropAndResize=function(e,r,i,o,s,a){var u=new NX(e.shape,r.shape,o,s,a);return this.compileAndRun(u,[e,r,i],"float32")},n.prototype.depthToSpace=function(e,r,i){k(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=e.shape[0],c=("NHWC"===i?e.shape[1]:e.shape[2])*r,l=("NHWC"===i?e.shape[2]:e.shape[3])*r,f=("NHWC"===i?e.shape[3]:e.shape[1])/(r*r),p=new UX("NHWC"===i?[o,c,l,f]:[o,f,c,l],r,i);return this.compileAndRun(p,[e])},n.prototype.split=function(e,r,i){return yB(e,r,i)},n.prototype.scatterND=function(e,r,i){var o=gv(0,e,i),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,c=o.strides,l=o.outputSize,f=[l/u,u],p=e.reshape([a,s]),g=r.reshape([a,u]);if(0===l)return cA(ti([]),i);var m=Ee(0),y=new JB(a,s,p.rank,g.rank,c,f);return this.compileAndRun(y,[g,p,m]).reshape(i)},n.prototype.sparseToDense=function(e,r,i,o){var s=gv(0,e,i),f=new JB(s.numUpdates,s.sliceRank,e.rank,r.rank,s.strides,[s.outputSize,1],!1);return this.compileAndRun(f,[r,e,o]).reshape(i)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,r){var i=this.texData.get(e.dataId),o=new kB("return real * expR - imag * expI;",e.shape,r),s=new kB("return real * expI + imag * expR;",e.shape,r),a=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],u=this.compileAndRun(o,a),c=this.compileAndRun(s,a),l=this.complex(u,c).as2D(e.shape[0],e.shape[1]);return u.dispose(),c.dispose(),l},n.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],s=tI(e,r),a=s[0],u=s[1],c=s[2],l=s[3],f=r.reshape([u,o]),p=e.reshape([e.size/c,c]),g=new YX(o,l,[u,c]);return this.compileAndRun(g,[p,f]).reshape(a)},n.prototype.fill=function(e,r,i){if("string"===(i=i||Gh(r))){var o=ev(i,Le(e));return o.fill(r),V.makeTensor(o,e,i,this)}var s=new KX(e,r),a=s.getCustomSetupFunc(r);return this.compileAndRun(s,[],i,a)},n.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},n.prototype.linspace=function(e,r,i){return cI(e,r,i)},n.prototype.makeTensorInfo=function(e,r){var i=this.write(null,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}},n.prototype.makeOutput=function(e,r){var i=this.makeTensorInfo(e,r).dataId;return V.makeTensorFromDataId(i,e,r,this)},n.prototype.unpackTensor=function(e){var r=new BJ(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},n.prototype.packTensor=function(e){var r=new oJ(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,r){var i=[dv(e.shape)].concat(fv(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},s=[dv(r)].concat(fv(r)),a=new cJ(s,i),u=this.runWebGLProgram(a,[o],e.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},n.prototype.decode=function(e){var r,i=this.texData.get(e),o=i.isPacked,s=i.shape,a=i.dtype,u=Qb(s);return r=o?new LX(u):new BX(u),{dtype:a,shape:s,dataId:this.runWebGLProgram(r,[{shape:u,dtype:a,dataId:e}],a,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,r,i,o,s){var a=this;void 0===s&&(s=!1);var u=this.makeTensorInfo(e.outputShape,i),c=this.texData.get(u.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===sv.DENSE){var l=av(e.outputShape);c.texShape=l.map(function(C){return 2*C})}if(null!=e.outTexUsage&&(c.usage=e.outTexUsage),0===Le(u.shape))return c.values=qh(u.dtype,0),u;var f=[],p=r.map(function(C){if("complex64"===C.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var _=a.texData.get(C.dataId);if(null==_.texture){if(!e.packedInputs&&Le(C.shape)<=ue().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:C.shape,texData:null,isUniform:!0,uniformValues:_.values};e.packedInputs&&(_.isPacked=!0,_.shape=C.shape)}else if(!!_.isPacked!=!!e.packedInputs)C=_.isPacked?a.unpackTensor(C):a.packTensor(C),f.push(C),_=a.texData.get(C.dataId);else if(_.isPacked&&!hv(_.shape,C.shape)){var E=C,I=C.shape;C.shape=_.shape,C=a.packedReshape(C,I),f.push(C),_=a.texData.get(C.dataId),E.shape=I}return a.uploadToGPU(C.dataId),{shape:C.shape,texData:_,isUniform:!1}});this.uploadToGPU(u.dataId);var g,C,I,m={shape:u.shape,texData:c,isUniform:!1},y=(C=e,I="",p.concat(m).forEach(function(F){I+=F.shape+"_"+(F.isUniform?"uniform":F.texData.texShape)+"_"+(null!=F.texData&&null!=F.texData.slice&&F.texData.slice.flatOffset>0)}),C.constructor.name+"_"+I+"_"+C.userCode),w=this.getAndSaveBinary(y,function(){return function(C,_,E,I){var P=_.userCode,O=E.map(function(Z,oe){var pe={logicalShape:Z.shape,texShape:Z.isUniform?null:Z.texData.texShape,isUniform:Z.isUniform,isPacked:!Z.isUniform&&Z.texData.isPacked,flatOffset:null};return null!=Z.texData&&null!=Z.texData.slice&&Z.texData.slice.flatOffset>0&&(pe.flatOffset=Z.texData.slice.flatOffset),{name:_.variableNames[oe],shapeInfo:pe}}),F=O.map(function(Z){return Z.shapeInfo}),N={logicalShape:I.shape,texShape:I.texData.texShape,isUniform:!1,isPacked:I.texData.isPacked,flatOffset:null},Q=dX(O,N,P,_.packedInputs),q=C.createProgram(Q),$=null,ce=C.getUniformLocation(q,"NAN",!1);1===ue().getNumber("WEBGL_VERSION")&&($=C.getUniformLocation(q,"INFINITY",!1));for(var de={},X=0;X<_.variableNames.length;X++){var J=_.variableNames[X];de[J]=C.getUniformLocation(q,J,!1),de["offset"+J]=C.getUniformLocation(q,"offset"+J,!1)}return{program:_,source:Q,webGLProgram:q,uniformLocations:de,inShapeInfos:F,outShapeInfo:N,infLoc:$,nanLoc:ce}}(a.gpgpu,e,p,m)}),b=null!=this.activeTimers;if(b&&(g=this.startTimer()),function(C,_,E,I,P){XB(_.inShapeInfos,E),XB([_.outShapeInfo],[I]);var O=I.texData.texture,F=I.texData.texShape;I.texData.isPacked?C.setOutputPackedMatrixTexture(O,F[0],F[1]):C.setOutputMatrixTexture(O,F[0],F[1]),C.setProgram(_.webGLProgram),1===ue().getNumber("WEBGL_VERSION")&&null!==_.infLoc&&C.gl.uniform1f(_.infLoc,1/0),null!==_.nanLoc&&C.gl.uniform1f(_.nanLoc,NaN),E.forEach(function(N,Q){var q=_.program.variableNames[Q],$=_.uniformLocations[q],ce=_.uniformLocations["offset"+q];if(null!=$)if(N.isUniform)if(Le(N.shape)<2)C.gl.uniform1f($,N.uniformValues[0]);else{var de=N.uniformValues;de instanceof Float32Array||(de=new Float32Array(de)),C.gl.uniform1fv($,de)}else null!=N.texData.slice&&null!=ce&&C.gl.uniform1i(ce,N.texData.slice.flatOffset),C.setInputMatrixTexture(N.texData.texture,$,Q)}),P?.(C,_.webGLProgram),C.executeProgram()}(this.gpgpu,w,p,m,o),f.forEach(function(C){return a.disposeData(C.dataId)}),b&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)})),!ue().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&!1===s){var A=this.unpackTensor(u);return this.disposeData(u.dataId),A}return u},n.prototype.compileAndRun=function(e,r,i,o,s){void 0===s&&(s=!1);var a=this.runWebGLProgram(e,r,i=i||r[0].dtype,o,s);return V.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},n.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var e=this;this.disposed||(ue().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){e.gpgpu.deleteProgram(e.binaryCache[r].webGLProgram),delete e.binaryCache[r]}),this.textureManager.dispose(),null!=this.canvas&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Me(function(){if(!ue().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ue().getBool("DEBUG");ue().set("DEBUG",!1);var i=e.abs(Ee(1e-8)).dataSync()[0];if(ue().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var r,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.values,c=i.usage,l=i.isPacked;if(null==i.texture){var f,p=null!=this.activeTimers;p&&(f=Us());var g=i.texShape;if(null==g&&(g=W3(o,l),i.texShape=g),null!=a){var m=Qb(o),y=void 0,w=g[1],b=g[0],A=a instanceof Uint8Array;l?(w=(r=uv(g[0],g[1]))[0],y=new HX(m,[b=r[1],w],A)):y=new WX(m,[b,w],A);var C=this.makeTensorInfo([b,w],s);this.texData.get(C.dataId).usage=A?Do.PIXELS:Do.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),w,b,a);var _=this.runWebGLProgram(y,[C],s,null,!0),E=this.texData.get(_.dataId);i.texture=E.texture,i.texShape=E.texShape,i.isPacked=E.isPacked,i.usage=E.usage,this.disposeData(C.dataId),this.texData.delete(_.dataId),i.values=null,p&&(this.uploadWaitMs+=Us()-f)}else{var I=this.acquireTexture(g,c,s,l);i.texture=I}}},n.prototype.convertAndCacheOnCPU=function(e,r){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),null!=r&&(i.values=function(s,a){if("float32"===a||"complex64"===a)return s;if("int32"===a||"bool"===a){for(var u="int32"===a?new Int32Array(s.length):new Uint8Array(s.length),c=0;c<u.length;++c)u[c]=Math.round(s[c]);return u}throw new Error("Unknown dtype "+a)}(r,o)),i.values},n.prototype.acquireTexture=function(e,r,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},n.prototype.computeBytes=function(e,r){return e[0]*e[1]*MD(r)},n}(pB);_3()&&V.registerBackend("webgl",function(){return new fL},2);var UJ=W({square_:function(t){var n=R(t,"x","square");return V.runKernelFunc(function(r,i){return i([n]),r.square(n)},{x:n},null,"Square",{},[n],[])}}),Av="SquaredDifference",hL=W({squaredDifference_:function(t,n){var e,r=R(t,"a","squaredDifference"),i=R(n,"b","squaredDifference");return e=Nn(r,i),St((r=e[0]).shape,(i=e[1]).shape),V.runKernelFunc(function(a,u){var c=a.squaredDifference(r,i);return u([r,i]),c},{a:r,b:i},function(a,u){var c=u[0],l=u[1],f=Ee(2);return{a:function(){return a.mul(c.sub(l).mul(f))},b:function(){return a.mul(l.sub(c).mul(f))}}},Av,{},[r,i],[])}}),jJ=W({abs_:function(t){var n=R(t,"x","abs");return"complex64"===n.dtype?V.runKernelFunc(function(e){return e.complexAbs(n)},{$x:n}):V.runKernelFunc(function(e,r){var i=e.abs(n);return r([n]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}},"Abs")}}),zJ=W({acos_:function(t){var n=R(t,"x","acos");return V.runKernelFunc(function(e,r){var i=e.acos(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ee(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),VJ=W({acosh_:function(t){var n=R(t,"x","acosh");return V.runKernelFunc(function(e,r){var i=e.acosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),WJ=W({asin_:function(t){var n=R(t,"x","asin");return V.runKernelFunc(function(e,r){var i=e.asin(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ee(1).sub(i.toFloat().square()).sqrt())}}})}}),HJ=W({asinh_:function(t){var n=R(t,"x","asinh");return V.runKernelFunc(function(e,r){var i=e.asinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ee(1).add(i.toFloat().square()).sqrt())}}})}}),qJ=W({atan_:function(t){var n=R(t,"x","atan");return V.runKernelFunc(function(e,r){var i=e.atan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}}),GJ=W({atanh_:function(t){var n=R(t,"x","atanh");return V.runKernelFunc(function(e,r){var i=e.atanh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(Ee(1).sub(i.toFloat().square()))}}})}}),KJ=W({ceil_:function(t){var n=R(t,"x","ceil");return V.runKernelFunc(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return Ft(e)}}})}}),CI=W({clipByValue_:function(t,n,e){var r=R(t,"x","clipByValue");return k(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."}),V.runKernelFunc(function(s,a){var u=s.clip(r,n,e);return a([r]),u},{x:r},function(s,a){var u=a[0];return{x:function(){return s.where(u.greaterEqual(n).logicalAnd(u.lessEqual(e)),Ft(s))}}},"ClipByValue",{min:n,max:e},[r])}}),QJ=W({cos_:function(t){var n=R(t,"x","cos");return V.runKernelFunc(function(r,i){var o=r.cos(n);return i([n]),o},{x:n},function(r,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},[n])}}),YJ=W({cosh_:function(t){var n=R(t,"x","cosh");return V.runKernelFunc(function(e,r){var i=e.cosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}}),XJ=W({erf_:function(t){var n=R(t,"x","erf");return k("int32"===n.dtype||"float32"===n.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===n.dtype&&(n=n.toFloat()),V.runKernelFunc(function(e,r){var i=e.erf(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),_I=W({exp_:function(t){var n=R(t,"x","exp");return V.runKernelFunc(function(e,r){var i=e.exp(n);return r([i]),i},{x:n},function(e,r){return{x:function(){return e.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),JJ=W({expm1_:function(t){var n=R(t,"x","expm1");return V.runKernelFunc(function(e,r){var i=e.expm1(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.exp())}}})}}),ZJ=W({floor_:function(t){var n=R(t,"x","floor");return V.runKernelFunc(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return Ft(e)}}})}}),$J=W({log_:function(t){var n=R(t,"x","log");return V.runKernelFunc(function(r,i){var o=r.log(n);return i([n]),o},{x:n},function(r,i){var o=i[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},[n])}}),eZ=W({log1p_:function(t){var n=R(t,"x","log1p");return V.runKernelFunc(function(e,r){var i=e.log1p(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.add(1))}}})}}),tZ=W({logSigmoid_:function(t){var n=R(t,"x","logSigmoid");return V.runKernelFunc(function(e,r){var i=e.softplus(n.neg()).neg();return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}}),pA=W({neg_:function(t){var n=R(t,"x","neg");return V.runKernelFunc(function(r){return r.neg(n)},{x:n},function(r){return{x:function(){return r.neg()}}},"Neg",{},[n])}}),nZ=W({reciprocal_:function(t){var n=R(t,"x","reciprocal");return V.runKernelFunc(function(e,r){var i=e.reciprocal(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.square().neg())}}})}}),rZ=W({round_:function(t){var n=R(t,"x","round");return V.runKernelFunc(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return Ft(e)}}})}}),pL=W({rsqrt_:function(t){var n=R(t,"x","rsqrt");return V.runKernelFunc(function(r,i){var o=r.rsqrt(n);return i([n]),o},{x:n},function(r,i){var o=i[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},[n])}}),gL=W({sigmoid_:function(t){var n=R(t,"x","sigmoid");return V.runKernelFunc(function(e,r){var i=e.sigmoid(n);return r([i]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mul(i.mul(Ee(1).sub(i)))}}},"Sigmoid")}}),iZ=W({sign_:function(t){var n=R(t,"x","sign");return V.runKernelFunc(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return Ft(e)}}})}}),oZ=W({isNaN_:function(t){var n=R(t,"x","isNaN");return V.runKernelFunc(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return Ft(e)}}})}}),sZ=W({isInf_:function(t){var n=R(t,"x","isInf");return V.runKernelFunc(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return Ft(e)}}})}}),aZ=W({isFinite_:function(t){var n=R(t,"x","isFinite");return V.runKernelFunc(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return Ft(e)}}})}}),uZ=W({sin_:function(t){var n=R(t,"x","sin");return V.runKernelFunc(function(r,i){var o=r.sin(n);return i([n]),o},{x:n},function(r,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},[n])}}),cZ=W({sinh_:function(t){var n=R(t,"x","sinh");return V.runKernelFunc(function(e,r){var i=e.sinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}}),lZ=W({softplus_:function(t){var n=R(t,"x","softplus");return V.runKernelFunc(function(e,r){var i=e.softplus(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.sigmoid())}}})}}),dZ=W({sqrt_:function(t){var n=R(t,"x","sqrt");return V.runKernelFunc(function(e,r){var i=e.sqrt(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}}),fZ=W({step_:function(t,n){void 0===n&&(n=0);var e=R(t,"x","step");return V.runKernelFunc(function(r){return r.step(e,n)},{$x:e},function(r){return{$x:function(){return Ft(r)}}})}}),hZ=W({tan_:function(t){var n=R(t,"x","tan");return V.runKernelFunc(function(e,r){var i=e.tan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.cos().square())}}})}}),pZ=W({tanh_:function(t){var n=R(t,"x","tanh");return V.runKernelFunc(function(e,r){var i=e.tanh(n);return r([i]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return Ee(1).sub(i.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function mL(t,n,e,r,i,o){var s,a,u=R(t,"x","batchNorm"),c=R(n,"mean","batchNorm"),l=R(e,"variance","batchNorm");return null!=i&&(s=R(i,"scale","batchNorm")),null!=r&&(a=R(r,"offset","batchNorm")),k(2===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),k(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),k(2===l.rank||1===l.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),null!=s&&k(2===s.rank||1===s.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),null!=a&&k(2===a.rank||1===a.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),xv(u,c,l,a,s,o)}function vL(t,n,e,r,i,o){var s,a,u=R(t,"x","batchNorm"),c=R(n,"mean","batchNorm"),l=R(e,"variance","batchNorm");return null!=i&&(s=R(i,"scale","batchNorm")),null!=r&&(a=R(r,"offset","batchNorm")),k(3===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),k(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),k(3===l.rank||1===l.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),null!=s&&k(3===s.rank||1===s.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),null!=a&&k(3===a.rank||1===a.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),xv(u,c,l,a,s,o)}function yL(t,n,e,r,i,o){var s,a,u=R(t,"x","batchNorm"),c=R(n,"mean","batchNorm"),l=R(e,"variance","batchNorm");return null!=i&&(s=R(i,"scale","batchNorm")),null!=r&&(a=R(r,"offset","batchNorm")),k(4===u.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),k(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),k(4===l.rank||1===l.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),null!=s&&k(4===s.rank||1===s.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),null!=a&&k(4===a.rank||1===a.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),xv(u,c,l,a,s,o)}function xv(t,n,e,r,i,o){null==o&&(o=.001);var s,a,u,c=R(t,"x","batchNorm"),l=R(n,"mean","batchNorm"),f=R(e,"variance","batchNorm");return null!=i&&(s=R(i,"scale","batchNorm")),null!=r&&(a=R(r,"offset","batchNorm")),k(l.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),k(null==a||l.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),k(null==s||l.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c,V.runKernelFunc(function(g,m){var y=g.batchNormalization(u,gA(l),gA(f),o,gA(s),gA(a));return m([c,l,f,s]),y},{x:c,mean:l,variance:f,scale:s,offset:a},function(g,m){var w=m[0],b=m[1],A=m[2],_=m[3]??Ee(1),E=_r(b.shape,u.shape),I=[];if(1===b.rank){for(var P=0;P<u.shape.length-1;++P)I.push(u.shape[P]);I.push(1)}var O=w.sub(b),F=g.mul(_),N=pL(A.add(Ee(o))),Q=N.mul(N).mul(N).mul(Ee(-.5));return{x:function(){return 1===b.rank?g.mul(Xh(N.as4D(1,1,1,b.shape[0]),I)).mul(_).reshape(w.shape):g.mul(N).mul(_).reshape(w.shape)},mean:function(){var q=N.mul(Ee(-1)).mul(F);return 1===b.rank&&(q=q.sum(E)),q.reshape(b.shape)},variance:function(){var q=Q.mul(O).mul(F);return 1===b.rank&&(q=q.sum(E)),q.reshape(b.shape)},scale:function(){var q=O.mul(N),$=g.mul(q);return 1===b.rank&&($=$.sum(E)),$.reshape(b.shape)},offset:function(){var q=g;return 1===b.rank&&(q=q.sum(E)),q.reshape(b.shape)}}},"BatchNormalization",{varianceEpsilon:o},[c,l,f,s]).reshape(c.shape)}function gA(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function mA(){X3("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var gZ=W({batchNormalization2d_:function(t,n,e,r,i,o){return void 0===r&&(r=.001),mA(),mL(t,n,e,o,i,r)}}),mZ=W({batchNormalization3d_:function(t,n,e,r,i,o){return void 0===r&&(r=.001),mA(),vL(t,n,e,o,i,r)}}),vZ=W({batchNormalization4d_:function(t,n,e,r,i,o){return void 0===r&&(r=.001),mA(),yL(t,n,e,o,i,r)}}),yZ=W({batchNormalization_:function(t,n,e,r,i,o){return void 0===r&&(r=.001),mA(),xv(t,n,e,o,i,r)}}),wL=W({batchNorm_:xv}),wZ=W({batchNorm2d_:mL}),bZ=W({batchNorm3d_:vL}),AZ=W({batchNorm4d_:yL}),vA=W({logicalAnd_:function(t,n){var e=R(t,"a","logicalAnd","bool"),r=R(n,"b","logicalAnd","bool");return St(e.shape,r.shape),V.runKernelFunc(function(i){return i.logicalAnd(e,r)},{a:e,b:r},null,"LogicalAnd")}}),xZ=W({logicalNot_:function(t){var n=R(t,"x","logicalNot","bool");return V.runKernelFunc(function(e){return e.logicalNot(n)},{$x:n})}}),bL=W({logicalOr_:function(t,n){var e=R(t,"a","logicalOr","bool"),r=R(n,"b","logicalOr","bool");return St(e.shape,r.shape),V.runKernelFunc(function(i){return i.logicalOr(e,r)},{$a:e,$b:r})}}),CZ=W({logicalXor_:function(t,n){var e=R(t,"a","logicalXor","bool"),r=R(n,"b","logicalXor","bool");return St(e.shape,r.shape),bL(t,n).logicalAnd(vA(t,n).logicalNot())}}),_d=W({where_:function(t,n,e){var r=R(n,"a","where"),i=R(e,"b","where"),o=R(t,"condition","where","bool");return Nt(r.shape,i.shape,"Error in where: "),1===o.rank?k(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Nt(o.shape,i.shape,"Error in where: "),V.runKernelFunc(function(s,a){var u=s.select(o,r,i);return a([o]),u},{$condition:o,$a:r,$b:i},function(s,a){var u=a[0];return{$condition:function(){return Ft(u).toFloat()},$a:function(){return s.mul(u.cast(s.dtype))},$b:function(){return s.mul(u.logicalNot().cast(s.dtype))}}})}}),AL=function(t){return Pe(this,void 0,void 0,function(){var n,e,r;return Oe(this,function(i){switch(i.label){case 0:return[4,(n=R(t,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),r=hI(n.shape,e),t!==n&&n.dispose(),[2,r]}})})},Tt=W({add_:function(t,n){var e,r=R(t,"a","add"),i=R(n,"b","add");e=Nn(r,i);var o=St((r=e[0]).shape,(i=e[1]).shape);return V.runKernelFunc(function(s){return s.add(r,i)},{a:r,b:i},function(s){return{a:function(){var a=s,u=_r(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=s,u=_r(i.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(i.shape)}}},"Add")}}),_Z=W({addN_:function(t){k(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),k(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var n=t.map(function(i,o){return R(i,"tensors"+o,"addN")}),e=n[0];return n.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(i){if(!Ar(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),V.runKernelFunc(function(i){return i.addN(n)},n,function(i){var o={};return n.forEach(function(s,a){o[a]=function(){return i.clone()}}),o},"AddN")}}),EZ=W({addStrict_:function(t,n){var e=R(t,"a","addStrict"),r=R(n,"b","addStrict");return Nt(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),DZ=W({atan2_:function(t,n){var e,r=R(t,"a","atan2"),i=R(n,"b","atan2");e=Nn(r,i);var o=St((r=e[0]).shape,(i=e[1]).shape);return V.runKernelFunc(function(s,a){var u=s.atan2(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],c=a[1];return{$a:function(){var l=Tt(u.square(),c.square()),f=s.mul(c.div(l)),p=_r(u.shape,o);return p.length>0&&(f=f.sum(p)),f.reshape(u.shape)},$b:function(){var l=Tt(u.square(),c.square()),f=pA(s.mul(u.div(l))),p=_r(c.shape,o);return p.length>0&&(f=f.sum(p)),f.reshape(c.shape)}}})}}),Hs=W({div_:function(t,n){var e,r=R(t,"a","div"),i=R(n,"b","div");if(e=Nn(r,i),i=e[1],"int32"===(r=e[0]).dtype&&"int32"===i.dtype)return xL(r,i);var o=St(r.shape,i.shape);return V.runKernelFunc(function(s,a){var u=s.realDivide(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var l=s.div(c.toFloat()),f=_r(u.shape,o);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=s.mul(u.toFloat()),f=_r(c.shape,o);f.length>0&&(l=l.sum(f).reshape(c.shape));var p=c.square();return l.div(p.toFloat()).neg()}}},"Div")}}),IZ=W({divNoNan_:function(t,n){var e,r=R(t,"a","div"),i=R(n,"b","div");r=(e=Nn(r,i))[0];var o=Hs(r,i=e[1]),s=Ft(o),a=i.equal(s);return _d(a,s,o)}}),SZ=W({divStrict_:function(t,n){var e=R(t,"a","div"),r=R(n,"b","div");return Nt(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),xL=W({floorDiv_:function(t,n){var e,r=R(t,"a","floorDiv"),i=R(n,"b","floorDiv");e=Nn(r,i);var o=St((r=e[0]).shape,(i=e[1]).shape);return V.runKernelFunc(function(s,a){var u=s.floorDiv(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var l=s.div(c.toFloat()),f=_r(u.shape,o);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=s.mul(u.toFloat()),f=_r(c.shape,o);f.length>0&&(l=l.sum(f).reshape(c.shape));var p=c.square();return l.div(p.toFloat()).neg()}}},"FloorDiv")}}),EI=W({maximum_:function(t,n){var e,r=R(t,"a","maximum"),i=R(n,"b","maximum");return e=Nn(r,i),i=e[1],"bool"===(r=e[0]).dtype&&(r=r.toInt(),i=i.toInt()),St(r.shape,i.shape),V.runKernelFunc(function(o,s){var a=o.maximum(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return o.mul(a.greaterEqual(u).toFloat())},b:function(){return o.mul(a.less(u).toFloat())}}},"Maximum")}}),TZ=W({maximumStrict_:function(t,n){var e=R(t,"a","maximumStrict"),r=R(n,"b","maximumStrict");return Nt(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),CL=W({minimum_:function(t,n){var e,r=R(t,"a","minimum"),i=R(n,"b","minimum");return e=Nn(r,i),i=e[1],"bool"===(r=e[0]).dtype&&(r=r.toInt(),i=i.toInt()),St(r.shape,i.shape),V.runKernelFunc(function(o,s){var a=o.minimum(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return o.mul(a.lessEqual(u).toFloat())},b:function(){return o.mul(a.greater(u).toFloat())}}},"Minimum")}}),MZ=W({minimumStrict_:function(t,n){var e=R(t,"a","minimumStrict"),r=R(n,"b","minimumStrict");return Nt(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),RZ=W({mod_:function(t,n){var e,r=R(t,"a","mod"),i=R(n,"b","mod");e=Nn(r,i);var o=St((r=e[0]).shape,(i=e[1]).shape);return V.runKernelFunc(function(s,a){var u=s.mod(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],c=a[1];return{$a:function(){var l=_r(u.shape,o);return l.length>0?s.sum(l).reshape(u.shape):s},$b:function(){var l=s.mul(u.div(c).floor().neg()),f=_r(c.shape,o);return f.length>0?l.sum(f).reshape(c.shape):l}}})}}),kZ=W({modStrict_:function(t,n){var e=R(t,"a","modStrict"),r=R(n,"b","modStrict");return Nt(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),bi=W({mul_:function(t,n){var e,r=R(t,"a","mul"),i=R(n,"b","mul");e=Nn(r,i);var o=St((r=e[0]).shape,(i=e[1]).shape);return V.runKernelFunc(function(s,a){var u=s.multiply(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var l=s.mul(c.toFloat()),f=_r(u.shape,o);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=s.mul(u.toFloat()),f=_r(c.shape,o);return f.length>0?l.sum(f).reshape(c.shape):l}}},"Mul")}}),PZ=W({mulStrict_:function(t,n){var e=R(t,"a","mul"),r=R(n,"b","mul");return Nt(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),yA=W({pow_:function(t,n){var e,r=R(t,"base","pow"),i=R(n,"exp","pow");e=Nn(r,i);var o=St((r=e[0]).shape,(i=e[1]).shape);return V.runKernelFunc(function(a,u){var c=a.pow(r,i);return u([r,i,c]),c},{a:r,b:i},function(a,u){var c=u[0],l=u[1],f=u[2];return{a:function(){var p=l.toFloat(),g=a.mul(p.mul(c.pow(p.sub(Ee(1))))),m=_r(c.shape,o);return m.length>0&&(g=g.sum(m)),g.reshape(c.shape)},b:function(){var p=c.greater(0),g=c.log().where(p,Ft(c)),m=a.mul(f.mul(g)),y=_r(l.shape,o);return y.length>0&&(m=m.sum(y)),m.reshape(l.shape)}}},"Pow",{},[r,i],[!0])}}),OZ=W({powStrict_:function(t,n){return Nt(t.shape,n.shape,"Error in powStrict: "),t.pow(n)}}),NZ=W({squaredDifferenceStrict_:function(t,n){var e=R(t,"a","squaredDifferenceStrict"),r=R(n,"b","squaredDifferenceStrict");return Nt(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),Lr=W({sub_:function(t,n){var e,r=R(t,"a","sub"),i=R(n,"b","sub");e=Nn(r,i);var o=St((r=e[0]).shape,(i=e[1]).shape);return V.runKernelFunc(function(s){return s.subtract(r,i)},{a:r,b:i},function(s){return{a:function(){var a=s,u=_r(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=s,u=_r(i.shape,o);return u.length>0&&(a=a.sum(u)),a.neg().reshape(i.shape)}}},"Sub")}}),FZ=W({subStrict_:function(t,n){var e=R(t,"a","subStrict"),r=R(n,"b","subStrict");return Nt(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),_L=W({equal_:function(t,n){var e,r=R(t,"a","equal"),i=R(n,"b","equal");return e=Nn(r,i),St((r=e[0]).shape,(i=e[1]).shape),V.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),BZ=W({equalStrict_:function(t,n){var e=R(t,"a","equalStrict"),r=R(n,"b","equalStrict");return Nt(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),LZ=W({greater_:function(t,n){var e,r=R(t,"a","greater"),i=R(n,"b","greater");return e=Nn(r,i),St((r=e[0]).shape,(i=e[1]).shape),V.runKernelFunc(function(o){return o.greater(r,i)},{a:r,b:i},null,"Greater")}}),EL=W({greaterEqual_:function(t,n){var e,r=R(t,"a","greaterEqual"),i=R(n,"b","greaterEqual");return e=Nn(r,i),St((r=e[0]).shape,(i=e[1]).shape),V.runKernelFunc(function(o,s){var a=o.greaterEqual(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return Ft(a)},b:function(){return Ft(u)}}},"GreaterEqual")}}),UZ=W({greaterEqualStrict_:function(t,n){var e=R(t,"a","greaterEqualStrict"),r=R(n,"b","greaterEqualStrict");return Nt(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),jZ=W({greaterStrict_:function(t,n){var e=R(t,"a","greaterStrict"),r=R(n,"b","greaterStrict");return Nt(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),zZ=W({less_:function(t,n){var e,r=R(t,"a","less"),i=R(n,"b","less");return e=Nn(r,i),St((r=e[0]).shape,(i=e[1]).shape),V.runKernelFunc(function(o){return o.less(r,i)},{a:r,b:i},null,"Less")}}),VZ=W({lessEqual_:function(t,n){var e,r=R(t,"a","lessEqual"),i=R(n,"b","lessEqual");return e=Nn(r,i),St((r=e[0]).shape,(i=e[1]).shape),V.runKernelFunc(function(o,s){var a=o.lessEqual(r,i);return s([r,i]),a},{a:r,b:i},null,"LessEqual")}}),WZ=W({lessEqualStrict_:function(t,n){var e=R(t,"a","lessEqualStrict"),r=R(n,"b","lessEqualStrict");return Nt(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),HZ=W({lessStrict_:function(t,n){var e=R(t,"a","lessStrict"),r=R(n,"b","lessStrict");return Nt(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),qZ=W({notEqual_:function(t,n){var e,r=R(t,"a","notEqual"),i=R(n,"b","notEqual");return e=Nn(r,i),St((r=e[0]).shape,(i=e[1]).shape),V.runKernelFunc(function(o){return o.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),GZ=W({notEqualStrict_:function(t,n){var e=R(t,"a","notEqualStrict"),r=R(n,"b","notEqualStrict");return Nt(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function DL(t,n){for(var e=[],r=t;r<n;++r)e.push(r);return e}function IL(t){for(var n=[],e=0;e<t.length;++e)for(var r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var DI=W({gather_:function(t,n,e){void 0===e&&(e=0);var r=R(t,"x","gather"),i=R(n,"indices","gather","int32");e=xr(e,r.shape)[0];var o=function(s,a,u){for(var c=s.shape[u],l=[],f=1,p=1,g=0;g<u;g++)l.push(s.shape[g]),f*=s.shape[g];for(g=0;g<a.rank;g++)l.push(a.shape[g]);for(g=u+1;g<s.rank;g++)l.push(s.shape[g]),p*=s.shape[g];return{batchSize:f,sliceSize:p,dimSize:c,outputShape:l}}(r,i,e);return V.runKernelFunc(function(s,a){var u=s.gather(r,i.flatten(),e);return a([i]),u},{x:r,indices:i},function(s,a){var u=a[0];return{x:function(){var c=r.shape,l=u.size,f=c.slice(0,e),p=f.length,g=c.slice(e,c.length).slice(1),m=g.length,y=DL(0,p),w=DL(p+1,p+1+m),b=IL([f,[l],g]),A=s.reshape(b),C=u.reshape([l]),_=IL([[p],y,w]),E=A.transpose(_),I=SL(E,C,r.shape[e]),P=Jb(_);return I.transpose(P)},indices:function(){return u}}},"Gather",{axis:e}).reshape(o.outputShape)}}),SL=W({unsortedSegmentSum_:function(t,n,e){var r=R(t,"x","unsortedSegmentSum"),i=R(n,"segmentIds","unsortedSegmentSum","int32");return k(Hn(e),function(){return"numSegments must be of dtype int"}),V.runKernelFunc(function(o,s){var a=o.unsortedSegmentSum(r,i,e);return s([i]),a},{$x:r},function(o,s){var a=s[0];return{$x:function(){return function(u,c){for(var l=EI(c,Ft(c)),f=DI(u,l),p=EL(c,Ee(0,"int32")),g=f.rank-p.rank,m=0;m<g;++m)p=ns(p,m+1);p=vA(p,Yh(f.shape,"bool"));var y=Ft(f);return _d(p,f,y)}(o,a)}}})}});function TL(t,n,e,r,i,o,s){void 0===o&&(o="NHWC"),k(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var a=t,u=n,c=!1;3===n.rank&&(c=!0,u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),a=[1,t[0],t[1],t[2]]),k(4===a.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),k(4===u.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),k(4===e.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var l="NHWC"===o?a[3]:a[1],f="NHWC"===o?u.shape[3]:u.shape[1];k(l===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+e.shape[2]+"."}),k(f===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+e.shape[3]+"."}),null!=s&&k(Hn(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var p=uA(o),g=qc(a,e.shape,r,1,i,s,!1,p),m=V.runKernelFunc(function(y,w){var b=y.conv2dDerInput(u,e,g);return w([e,u]),b},{dy4D:u,filter:e},function(y,w){var b=w[0],A=w[1];return{dy4D:function(){return rs(y,b,r,i,o,1,s)},filter:function(){return SI(y,A,b.shape,r,i,o,s)}}});return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}function II(t){var o,n="number"==typeof(o=t)?[o,o,o]:2===o.length?[o[0],o[1],1]:o;return 1===n[0]&&1===n[1]&&1===n[2]}function ML(t,n,e,r,i){k(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var o=t,s=n,a=!1;4===n.rank&&(a=!0,s=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var u=o[4],c=s.shape[4];k(5===o.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),k(5===s.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),k(5===e.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),k(u===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+e.shape[3]+"."}),k(c===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+e.shape[4]+"."});var l=vv(o,e.shape,r,1,i),f=V.runKernelFunc(function(p){return p.conv3dDerInput(s,e,l)},{dy5D:s});return a?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var QZ=W({conv1d_:function(t,n,e,r,i,o,s){void 0===i&&(i="NWC"),void 0===o&&(o=1);var a=R(t,"x","conv1d"),u=R(n,"filter","conv1d"),c=a,l=!1;2===a.rank&&(l=!0,c=a.as3D(1,a.shape[0],a.shape[1])),k(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),k(3===u.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),null!=s&&k(Hn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),k(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),k(Vi(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),k("NWC"===i,function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),g=rs(p,f,[1,e],r,"NHWC",[1,o],s);return l?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),rs=W({conv2d_:function(t,n,e,r,i,o,s){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var a=R(t,"x","conv2d"),u=R(n,"filter","conv2d"),c=a,l=!1;3===a.rank&&(l=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),k(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),k(4===u.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),null!=s&&k(Hn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var f="NHWC"===i?c.shape[3]:c.shape[1];k(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),k(Vi(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var p=uA(i),g=qc(c.shape,u.shape,e,o,r,s,!1,p),y=V.runKernelFunc(function(w,b){var A=w.conv2d(c,u,g);return b([u,c]),A},{x:c,filter:u},function(w,b){var C=b[0],_=b[1];return k(Ad(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return RL(_.shape,w,C,e,r,i)},filter:function(){return SI(_,w,C.shape,e,r,i)}}},"Conv2D",g,[u,c]);return l?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),YZ=W({conv3d_:function(t,n,e,r,i,o){void 0===i&&(i="NDHWC"),void 0===o&&(o=[1,1,1]);var g,s=R(t,"x","conv3d"),a=R(n,"filter","conv3d"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),k(5===u.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),k(5===a.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),k(u.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),k((g=o,II(e)||II(g)),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),k("NDHWC"===i,function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var l=vv(u.shape,a.shape,e,o,r),f=V.runKernelFunc(function(p,g){var m=p.conv3d(u,a,l);return g([u,a]),m},{x:u,$filter:a},function(p,g){k(II(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var m=g[0],y=g[1];return{x:function(){return ML(m.shape,p,y,e,r)},$filter:function(){return function(w,b,A,C,_){var E=w;4===w.rank&&(E=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]));var I=b;4===I.rank&&(I=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3])),k(5===E.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+E.shape+"."}),k(5===I.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+I.shape+"."}),k(5===A.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+A+"."}),k(E.shape[4]===A[3],function(){return"Error in conv3dDerFilter: depth of input "+E.shape[4]+") must match input depth in filter ("+A[3]+"."}),k(I.shape[4]===A[4],function(){return"Error in conv3dDerFilter: depth of dy ("+I.shape[4]+") must match output depth for filter ("+A[4]+")."});var P=vv(E.shape,A,C,1,_);return V.runKernelFunc(function(O){return O.conv3dDerFilter(E,I,P)},{x5D:E,dy5D:I})}(m,p,y.shape,e,r)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),SI=W({conv2dDerFilter_:function(t,n,e,r,i,o,s){void 0===o&&(o="NHWC");var a=t;3===t.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=n;3===u.rank&&(u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),k(4===a.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),k(4===u.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),k(4===e.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var c="NHWC"===o?a.shape[3]:a.shape[1],l="NHWC"===o?u.shape[3]:u.shape[1];k(c===e[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+e[2]+"."}),k(l===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+e[3]+")."}),null!=s&&k(Hn(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var f=uA(o),p=qc(a.shape,e,r,1,i,s,!1,f);return V.runKernelFunc(function(g){return g.conv2dDerFilter(a,u,p)},{x4D:a,dy4D:u})}}),RL=W({conv2dDerInput_:TL}),wA=W({depthwiseConv2d_:function(t,n,e,r,i,o,s){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var a=R(t,"x","depthwiseConv2d"),u=R(n,"filter","depthwiseConv2d"),c=a,l=!1;3===a.rank&&(l=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),k(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),k(4===u.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),k(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),null==o&&(o=[1,1]),k(Vi(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),null!=s&&k(Hn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var f=qc(c.shape,u.shape,e,o,r,s,!0),g=V.runKernelFunc(function(m,y){var w=m.depthwiseConv2D(c,u,f);return y([c,u]),w},{x:c,filter:u},function(m,y){k(Ad(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var w=y[0],b=y[1];return{x:function(){return kL(w.shape,m,b,f)},filter:function(){return PL(w,m,b.shape,f)}}},"DepthwiseConv2dNative",f,[c,u]);return l?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),kL=W({depthwiseConv2dDerInput_:function(t,n,e,r){var i=n,o=!1;3===n.rank&&(o=!0,i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var s=V.runKernelFunc(function(a){return a.depthwiseConv2DDerInput(i,e,r)},{dy4D:i});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),PL=W({depthwiseConv2dDerFilter_:function(t,n,e,r){var i=t;3===t.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=n;return 3===o.rank&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),V.runKernelFunc(function(s){return s.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),TI=W({separableConv2d_:function(t,n,e,r,i,o,s){void 0===o&&(o=[1,1]),void 0===s&&(s="NHWC");var a=R(t,"x","separableConv2d"),u=R(n,"depthwiseFilter","separableConv2d"),c=R(e,"pointwiseFilter","separableConv2d"),l=a,f=!1;if(3===a.rank&&(f=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");k(4===l.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),k(4===u.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),k(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),k(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),k(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var p=u.shape[2],g=u.shape[3];k(c.shape[2]===p*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*g+", but got "+c.shape[2]+"."});var m=wA(l,u,r,i,s,o),y=rs(m,c,1,"valid",s);return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),XZ=W({conv2dTranspose_:function(t,n,e,r,i,o){return TL(e,R(t,"x","conv2dTranspose"),R(n,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),JZ=W({conv3dTranspose_:function(t,n,e,r,i){return ML(e,R(t,"x","conv3dTranspose"),R(n,"filter","conv3dTranspose"),r,i)}}),bA=W({matMul_:function(t,n,e,r){var i;void 0===e&&(e=!1),void 0===r&&(r=!1);var o=R(t,"a","matMul"),s=R(n,"b","matMul");i=Nn(o,s),o=i[0],s=i[1];var a=e?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?s.shape[s.rank-1]:s.shape[s.rank-2],c=e?o.shape[o.rank-1]:o.shape[o.rank-2],l=r?s.shape[s.rank-2]:s.shape[s.rank-1],f=o.shape.slice(0,-2),p=s.shape.slice(0,-2),g=Le(f),m=Le(p);k(o.rank>=2&&s.rank>=2&&o.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+s.rank+"."}),k(Ar(f,p),function(){return"Error in matMul: outer dimensions ("+f+") and ("+p+") of Tensors with shapes "+o.shape+" and "+s.shape+" must match."}),k(a===u,function(){return"Error in matMul: inner shapes ("+a+") and ("+u+") of Tensors with shapes "+o.shape+" and "+s.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var y=o.shape.slice(0,-2).concat([c,l]),w=e?o.as3D(g,a,c):o.as3D(g,c,a),b=r?s.as3D(m,l,u):s.as3D(m,u,l);return V.runKernelFunc(function(C,_){var E=C.batchMatMul(w,b,e,r);return _([w,b]),E},{a:w,b},function(C,_){var I=_[0],P=_[1];return e||r?!e&&r?{a:function(){return C.matMul(P,!1,!1)},b:function(){return C.matMul(I,!0,!1)}}:e&&!r?{a:function(){return P.matMul(C,!1,!0)},b:function(){return I.matMul(C,!1,!1)}}:{a:function(){return P.matMul(C,!0,!0)},b:function(){return C.matMul(I,!0,!0)}}:{a:function(){return C.matMul(P,!1,!0)},b:function(){return I.matMul(C,!0,!1)}}},"BatchMatMul",{transposeA:e,transposeB:r}).reshape(y)}}),ZZ=W({dot_:function(t,n){var e=R(t,"t1","dot"),r=R(n,"t2","dot");k(!(1!==e.rank&&2!==e.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var i=1===e.rank?e.size:e.shape[1],o=1===r.rank?r.size:r.shape[0];return k(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),1===e.rank&&1===r.rank?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===e.rank&&2===r.rank?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===e.rank&&1===r.rank?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),$Z=W({outerProduct_:function(t,n){var e=R(t,"v1","outerProduct"),r=R(n,"v2","outerProduct");return k(1===e.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),Cv=W({reverse_:function(t,n){var e=R(t,"x","reverse");if(0===e.rank)return e.clone();var r=xr(n,e.shape);return V.runKernelFunc(function(i){return i.reverse(e,r)},{$x:e},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(e)}}),e$=W({reverse1d_:function(t){var n=R(t,"x","reverse");return k(1===n.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),Cv(n,0)}}),t$=W({reverse2d_:function(t,n){var e=R(t,"x","reverse");return k(2===e.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),Cv(e,n)}}),n$=W({reverse3d_:function(t,n){var e=R(t,"x","reverse");return k(3===e.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),Cv(e,n)}}),r$=W({reverse4d_:function(t,n){var e=R(t,"x","reverse");return k(4===e.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),Cv(e,n)}});function OL(t,n,e,r,i,o){var s=R(t,"x","maxPool"),a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),null==r&&(r=[1,1]),k(4===a.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),k(Vi(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),null!=o&&k(Hn(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=Jh(a.shape,n,e,r,i,o);if(1===c.filterWidth&&1===c.filterHeight&&Ar(c.inShape,c.outShape))return s.clone();var f=V.runKernelFunc(function(p,g){var m=p.maxPool(a,c);return g([a,m]),m},{x:a},function(p,g){var m=g[0],y=g[1];return{x:function(){return function(w,b,A,C,_,E,I,P){var O=R(w,"dy","maxPoolBackprop"),F=R(b,"input","maxPoolBackprop"),N=R(A,"output","maxPoolBackprop");k(F.rank===O.rank,function(){return"Rank of input ("+F.rank+") does not match rank of dy ("+O.rank+")"}),null==E&&(E=[1,1]),k(Vi(_,E),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+E+"'"}),k(4===O.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+O.rank+"."}),k(4===F.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+F.rank+"."});var Q=Jh(F.shape,C,_,E,I,void 0);return V.runKernelFunc(function(q){return q.maxPoolBackprop(O,F,N,Q)},{$dy:O,$input:F})}(p,m,y,n,e,r,i)}}},"MaxPool",c,[a]);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function NL(t,n,e,r,i,o){var s=R(t,"x","avgPool","float32");null==r&&(r=[1,1]),k(Vi(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),k(4===a.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),null!=o&&k(Hn(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=Jh(a.shape,n,e,r,i,o);if(1===c.filterWidth&&1===c.filterHeight&&Ar(c.inShape,c.outShape))return s.clone();var l=V.runKernelFunc(function(f){return f.avgPool(a,c)},{x:a},function(f){return{x:function(){return function(p,g,m,y,w,b){var A=R(p,"dy","avgPoolBackprop"),C=R(g,"input","avgPoolBackprop");k(C.rank===A.rank,function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+A.rank+")"}),null==w&&(w=[1,1]),k(Vi(y,w),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+w+"'"});var _=C,E=A,I=!1;3===C.rank&&(I=!0,_=C.as4D(1,C.shape[0],C.shape[1],C.shape[2]),E=A.as4D(1,A.shape[0],A.shape[1],A.shape[2])),k(4===E.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+E.rank+"."}),k(4===_.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+_.rank+"."});var P=Jh(_.shape,m,y,w,b),O=V.runKernelFunc(function(F){return F.avgPoolBackprop(E,_,P)},{dy4D:E,input4D:_});return I?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}(f,a,n,e,r,i)}}},"AvgPool",c);return l=l.cast(s.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var Gr=W({maxPool_:function(t,n,e,r,i){return OL(t,n,e,1,r,i)}}),_v=W({avgPool_:function(t,n,e,r,i){return NL(t,n,e,1,r,i)}}),i$=W({pool_:function(t,n,e,r,i,o){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");var s=R(t,"x","maxPool"),a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),k(Vi(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var c,E,I,P,O,l=Jh(a.shape,n,o,i,r),f=[l.dilationHeight,l.dilationWidth];c="same"===r?(E=f,I=[l.filterHeight,l.filterWidth].map(function(F,N){return F+(F-1)*(E[N]-1)}).map(function(F){return F-1}),P=I.map(function(F){return Math.floor(F/2)}),O=I.map(function(F,N){return F-P[N]}),I.map(function(F,N){return[P[N],O[N]]})):[[0,0],[0,0]];var p=1===f[0]&&1===f[1],g=function(_,E,I){var P=I.map(function(ce){return ce[0]}),O=I.map(function(ce){return ce[1]}),F=_.concat(P,O),N=E.map(function(ce,de){return(ce-F[de]%ce)%ce}),Q=O.map(function(ce,de){return ce+N[de]});return[E.map(function(ce,de){return[P[de],Q[de]]}),E.map(function(ce,de){return[0,N[de]]})]}([l.inHeight,l.inWidth],f,c),y=g[1],w=p?r:"valid",b=p?a:iB(a,f,g[0]),A=("avg"===e?function(){return NL(b,n,o,1,w)}:function(){return OL(b,n,o,1,w)})(),C=p?A:tB(A,f,y);return u?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),o$=W({maxPool3d_:function(t,n,e,r,i,o,s){void 0===o&&(o="NDHWC");var a=R(t,"x","maxPool3d"),u=a,c=!1;4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),null==s&&(s=[1,1,1]),k(5===u.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),k("NDHWC"===o,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),k(Vi(e,s),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),null!=i&&k(Hn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var l=mv(u.shape,n,e,s,r,i,o),f=V.runKernelFunc(function(p,g){var m=p.maxPool3d(u,l);return g([u,m]),m},{x:u},function(p,g){var m=g[0],y=g[1];return{x:function(){return function(w,b,A,C,_,E,I,P){var O=R(w,"dy","maxPool3dBackprop"),F=R(b,"input","maxPool3dBackprop"),N=R(A,"output","maxPool3dBackprop"),Q=O,q=F,$=N,ce=!1;4===F.rank&&(ce=!0,Q=O.as5D(1,O.shape[0],O.shape[1],O.shape[2],O.shape[3]),q=F.as5D(1,F.shape[0],F.shape[1],F.shape[2],F.shape[3]),$=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3])),k(5===Q.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+Q.rank+"."}),k(5===q.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+q.rank+"."}),k(5===$.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+$.rank+"."}),null==E&&(E=[1,1,1]),k(Vi(_,E),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+E+"'"}),null!=P&&k(Hn(I),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+P+" but got pad "+I+"."});var de=mv(q.shape,C,_,E,I,P),X=V.runKernelFunc(function(J){return J.maxPool3dBackprop(Q,q,$,de)},{dy5D:Q,input5D:q});return ce?X.as4D(X.shape[1],X.shape[2],X.shape[3],X.shape[4]):X}(p,m,y,n,e,s,r,i)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),s$=W({avgPool3d_:function(t,n,e,r,i,o,s){void 0===o&&(o="NDHWC");var a=R(t,"x","avgPool3d","float32"),u=a,c=!1;4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),null==s&&(s=[1,1,1]),k(5===u.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),k("NDHWC"===o,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),k(Vi(e,s),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),null!=i&&k(Hn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var l=mv(u.shape,n,e,s,r,i,o),f=V.runKernelFunc(function(p){return p.avgPool3d(u,l)},{x:u},function(p){return{x:function(){return function(g,m,y,w,b,A,C){var _=R(g,"dy","avgPool3dBackprop"),E=R(m,"input","avgPool3dBackprop"),I=_,P=E,O=!1;4===E.rank&&(O=!0,I=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]),P=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3])),k(5===I.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+I.rank+"."}),k(5===P.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+P.rank+"."}),null==b&&(b=[1,1,1]),k(Vi(w,b),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+b+"'"}),null!=C&&k(Hn(A),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+A+"."});var F=mv(P.shape,y,w,b,A,C),N=V.runKernelFunc(function(Q){return Q.avgPool3dBackprop(I,P,F)},{dy5D:I,input5D:P});return O?N.as4D(N.shape[1],N.shape[2],N.shape[3],N.shape[4]):N}(p,u,n,e,s,r,i)}}});return f=f.cast(u.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Aa=W({slice_:function(t,n,e){var r,i,o=R(t,"x","slice");if(0===o.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof n?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach(function(u){k(-1!==u,function(){return"slice() does not support negative begin indexing."})}),i=(i=null==e?new Array(o.rank).fill(-1):"number"==typeof e?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(u,c){return u>=0?u:(k(-1===u,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+c+"."}),o.shape[c]-r[c])}),lB(o,r,i);var s=o.shape;return V.runKernelFunc(function(u){return u.slice(o,r,i)},{x:o},function(u){for(var c=[],l=0;l<u.rank;l++)c.push([r[l],s[l]-r[l]-i[l]]);return{x:function(){return u.pad(c)}}},"Slice",{begin:r,size:i})}}),a$=W({slice1d_:function(t,n,e){var r=R(t,"x","slice1d");return k(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Aa(r,[n],[e])}}),u$=W({slice2d_:function(t,n,e){var r=R(t,"x","slice2d");return k(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Aa(r,n,e)}}),FL=W({slice3d_:function(t,n,e){var r=R(t,"x","slice3d");return k(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Aa(r,n,e)}}),c$=W({slice4d_:function(t,n,e){var r=R(t,"x","slice4d");return k(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Aa(r,n,e)}});function BL(t,n,e,r,i){return n.rank<e.rank&&(n=n.reshape(zi(n.shape,r))),t.rank<e.rank&&(t=t.reshape(zi(t.shape,r))),{x:function(){var o=t.mul(e.equal(n).cast(t.dtype));return null==i?o:o.transpose(i)}}}var l$=W({all_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=R(t,"x","all","bool"),i=xr(n,r.shape),o=i,s=js(o,r.rank);null!=s&&(r=r.transpose(s),o=zs(o.length,r.rank));var a=V.runKernelFunc(function(c){return c.all(r,o)},{$x:r});if(e){var u=zi(a.shape,i);return a.reshape(u)}return a}}),d$=W({any_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=R(t,"x","any","bool"),i=xr(n,r.shape),o=i,s=js(o,r.rank);null!=s&&(r=r.transpose(s),o=zs(o.length,r.rank));var a=V.runKernelFunc(function(c){return c.any(r,o)},{$x:r});if(e){var u=zi(a.shape,i);return a.reshape(u)}return a}}),f$=W({argMax_:function(t,n){void 0===n&&(n=0);var e=R(t,"x","argMax");null==n&&(n=0);var r=xr(n,e.shape),i=js(r,e.rank);return null!=i&&(e=e.transpose(i),r=zs(r.length,e.rank)),V.runKernelFunc(function(a,u){var c=a.argMax(e,r[0]);return u([e]),c},{x:e},function(a,u){var c=u[0];return{x:function(){return Ft(c)}}},"ArgMax",{axis:r[0]},[e])}}),h$=W({argMin_:function(t,n){void 0===n&&(n=0);var e=R(t,"x","argMin");null==n&&(n=0);var r=xr(n,e.shape),i=js(r,e.rank);return null!=i&&(e=e.transpose(i),r=zs(r.length,e.rank)),V.runKernelFunc(function(o,s){var a=o.argMin(e,r[0]);return s([e]),a},{$x:e},function(o,s){var a=s[0];return{$x:function(){return Ft(a)}}})}}),p$=W({logSumExp_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=R(t,"x","logSumExp"),i=xr(n,r.shape),o=r.max(i,!0),s=r.sub(o).exp().sum(i).log(),a=o.reshape(s.shape).add(s);if(e){var u=zi(a.shape,i);return a.reshape(u)}return a}}),AA=W({max_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=R(t,"x","max"),i=r,o=xr(n,r.shape),s=o,a=js(s,r.rank);null!=a&&(r=r.transpose(a),s=zs(s.length,r.rank));var c=V.runKernelFunc(function(f,p){var g=f.max(r,s);return p([i,g]),g},{x:r},function(f,p){return BL(f,p[1],p[0],o,a)},"Max",{axes:s},[r],[!0]);if(e){var l=zi(c.shape,o);c=c.reshape(l)}return c}}),g$=W({mean_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=R(t,"x","mean"),i=xr(n,r.shape),o=Le($r(r.shape,i)[1]);return oA(function(s){var a=Ee(o);return{value:(a.dtype===s.dtype?s:s.cast(a.dtype)).div(a).sum(n,e),gradFunc:function(u){var c=s.shape.slice();return i.forEach(function(l){c[l]=1}),u.reshape(c).mul(Yh(s.shape,"float32")).div(o)}}})(r)}}),m$=W({min_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=R(t,"x","min"),i=r,o=xr(n,r.shape),s=o,a=js(s,r.rank);null!=a&&(r=r.transpose(a),s=zs(s.length,r.rank));var c=V.runKernelFunc(function(f,p){var g=f.min(r,s);return p([i,g]),g},{x:r},function(f,p){return BL(f,p[1],p[0],o,a)},"Min",{axes:s},[r],[!0]);if(e){var l=zi(c.shape,o);c=c.reshape(l)}return c}}),v$=W({moments_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=xr(n,(t=R(t,"x","moments")).shape),i=t.mean(r,e),o=i.shape;e||(o=zi(i.shape,r));var s=t.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:s.mean(r,e)}}}),LL=W({sum_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=R(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=xr(n,r.shape);return oA(function(o){var s=js(i,o.rank),a=i,u=o;null!=s&&(u=o.transpose(s),a=zs(a.length,o.rank));var c=function(g){var m=o.shape.slice();return i.forEach(function(y){m[y]=1}),g.reshape(m).mul(Yh(o.shape,"float32"))},f=V.runKernelFunc(function(g){return g.sum(u,a)},{x:u},function(g){return{x:function(){return c(g)}}},"Sum",{axes:a});if(e){var p=zi(f.shape,i);f=f.reshape(p)}return{value:f,gradFunc:c}})(r)}}),y$=W({prod_:function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1);var r=R(t,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=xr(n,r.shape),o=js(i,r.rank),s=i,a=r;null!=o&&(a=r.transpose(o),s=zs(s.length,r.rank));var u=V.runKernelFunc(function(l){return l.prod(a,s)},{permutedX:a});if(e){var c=zi(u.shape,i);u=u.reshape(c)}return u}}),UL=W({elu_:function(t){var n=R(t,"x","elu");return V.runKernelFunc(function(e,r){var i=e.elu(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return V.runKernelFunc(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}}),w$=W({leakyRelu_:function(t,n){void 0===n&&(n=.2);var e=R(t,"x","leakyRelu");return EI(Ee(n).mul(e),e)}}),jL=W({prelu_:function(t,n){var e=R(t,"x","prelu"),r=R(n,"alpha","prelu");return V.runKernelFunc(function(i,o){var s=i.prelu(e,r);return o([e,r]),s},{x:e,alpha:r},function(i,o){var s=o[0],a=o[1],u=s.greater(0);return{x:function(){return _d(u,i,i.mul(a))},alpha:function(){var c=_d(u,Ft(i),i.mul(s)),l=_r(a.shape,i.shape);return l.length>0&&(c=c.sum(l)),c.reshape(a.shape)}}},"Prelu")}}),qn=W({relu_:function(t){var n=R(t,"x","relu");return"bool"===n.dtype?n.toInt():V.runKernelFunc(function(e,r){var i=e.relu(n);return r([n]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mulStrict(i.step().toFloat())}}},"Relu")}}),zL=W({relu6_:function(t){var n=R(t,"x","relu6");return"bool"===n.dtype?n.toInt():V.runKernelFunc(function(e,r){var i=e.relu6(n);return r([n]),i},{x:n},function(e,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return e.mulStrict(o.toFloat())}}},"Relu6")}}),b$=W({selu_:function(t){var n=R(t,"x","selu");return V.runKernelFunc(function(e,r){var i=e.selu(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){var o=i.greater(Ee(0)),s=Ee(AI),a=Ee(xI),u=e.mul(a),c=e.mul(s).mul(i.toFloat().exp());return _d(o,u,c)}}})}}),Gc=W({transpose_:function(t,n){var e=R(t,"x","transpose");return null==n&&(n=e.shape.map(function(i,o){return o}).reverse()),k(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(i){k(i>=0&&i<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1?e.clone():V.runKernelFunc(function(i){return i.transpose(e,n)},{x:e},function(i){var o=Jb(n);return{x:function(){return i.transpose(o)}}},"Transpose",{perm:n})}}),A$=W({localResponseNormalization_:function(t,n,e,r,i){void 0===n&&(n=5),void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=.5);var o=R(t,"x","localResponseNormalization");k(4===o.rank||3===o.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."}),k(Hn(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var s=o,a=!1;3===o.rank&&(a=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=V.runKernelFunc(function(c,l){var f=c.localResponseNormalization4D(s,n,e,r,i);return l([s,f]),f},{x4D:s},function(c,l){var f=l[0],p=l[1];return{x4D:function(){return V.runKernelFunc(function(g){return g.LRNGrad(c,f,p,n,e,r,i)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),VL=W({norm_:function(t,n,e,r){void 0===n&&(n="euclidean"),void 0===e&&(e=null),void 0===r&&(r=!1);var i=function a(u,c,l){if(void 0===l&&(l=null),0===u.rank)return u.abs();if(1!==u.rank&&null===l)return a(u.reshape([-1]),c,l);if(1===u.rank||"number"==typeof l||Array.isArray(l)&&1===l.length){if(1===c)return u.abs().sum(l);if(c===1/0)return u.abs().max(l);if(c===-1/0)return u.abs().min(l);if("euclidean"===c||2===c)return u.abs().pow(Ee(2,"int32")).sum(l).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}if(Array.isArray(l)&&2===l.length){if(1===c)return u.abs().sum(l[0]).max(l[1]-1);if(c===1/0)return u.abs().sum(l[1]).max(l[0]);if(c===-1/0)return u.abs().sum(l[1]).min(l[0]);if("fro"===c||"euclidean"===c)return u.square().sum(l).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}throw new Error("Error in norm: invalid axis: "+l)}(t=R(t,"x","norm"),n,e),o=i.shape;if(r){var s=xr(e,t.shape);o=zi(i.shape,s)}return i.reshape(o)}}),x$=W({basicLSTMCell_:function(t,n,e,r,i,o){var s=R(t,"forgetBias","basicLSTMCell"),a=R(n,"lstmKernel","basicLSTMCell"),u=R(e,"lstmBias","basicLSTMCell"),c=R(r,"data","basicLSTMCell"),l=R(i,"c","basicLSTMCell"),f=R(o,"h","basicLSTMCell"),p=c.concat(f,1).matMul(a).add(u),m=p.shape[1]/4,y=[p.shape[0],m],w=p.slice([0,0],y),b=p.slice([0,m],y),A=p.slice([0,2*m],y),C=p.slice([0,3*m],y),_=w.sigmoid().mulStrict(b.tanh()).addStrict(l.mulStrict(s.add(A).sigmoid())),E=_.tanh().mulStrict(C.sigmoid());return[_,E]}}),C$=W({multiRNNCell_:function(t,n,e,r){for(var i=R(n,"data","multiRNNCell"),o=pv(e,"c","multiRNNCell"),s=pv(r,"h","multiRNNCell"),a=i,u=[],c=0;c<t.length;c++){var l=t[c](a,o[c],s[c]);u.push(l[0]),u.push(l[1]),a=l[1]}var f=[],p=[];for(c=0;c<u.length;c+=2)f.push(u[c]),p.push(u[c+1]);return[f,p]}}),_$=W({movingAverage_:function(t,n,e,r,i){void 0===i&&(i=!0);var o=R(t,"v","movingAverage"),s=R(n,"x","movingAverage"),a=R(e,"decay","movingAverage");x3(o,s),k(Ar(o.shape,s.shape),function(){return"Shape mismatch in v and x"});var u=Ee(1),c=u.sub(a),l=s.sub(o).mul(c);if(i){k(null!=r,function(){return"When using zeroDebias: true, step is required."});var f=R(r,"step","movingAverage");l=l.div(u.sub(yA(a,f)))}return o.add(l)}}),E$=W({stridedSlice_:function(t,n,e,r,i,o,s,a,u){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),null==r&&(r=new Array(n.length)),0!==s)throw new Error("ellipsis mask is not yet supported");var c=R(t,"x","stridedSlice"),l=rI(a),f=c.shape.slice();l.forEach(function(w){n[w]=0,e[w]=1,f.splice(w,0,1)}),c=c.reshape(f);for(var p=0;p<c.rank;p++)n[p]=dB(i,n,r,c.shape,p),e[p]=fB(o,e,r,c.shape,p),r[p]=r[p]||1;var g=rI(u);g.forEach(function(w){e[w]=n[w]+1,r[w]=1});var m=iA(n,e,r),y=m.filter(function(w,b){return-1===g.indexOf(b)});return r.every(function(w){return 1===w})?Aa(c,n,m).reshape(y):V.runKernelFunc(function(w){return w.stridedSlice(c,n,e,r)},{$x:c}).reshape(y)}}),D$=W({topk_:function(t,n,e){void 0===n&&(n=1),void 0===e&&(e=!0);var r=R(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(n>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+n);var o=V.runKernelFunc(function(s){return s.topk(r,n,e)},{$x:r});return{values:o[0],indices:o[1]}}}),I$=W({scatterND_:function(t,n,e){var r=R(t,"indices","scatterND","int32"),i=R(n,"updates","scatterND");return cB(i,r,e),V.runKernelFunc(function(o){return o.scatterND(r,i,e)},{indices:r,updates:i},null,"ScatterNd",{shape:e})}}),MI=W({fft_:function(t){k("complex64"===t.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],r=t.as2D(t.size/n,n);return V.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),xA=W({ifft_:function(t){k("complex64"===t.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],r=t.as2D(t.size/n,n);return V.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),RI=W({rfft_:function(t,n){k("float32"===t.dtype,function(){return"The dtype for rfft() must be real value but got "+t.dtype});var e,r=t.shape[t.shape.length-1],i=t.size/r;if(null!=n&&n<r){var o=t.shape.map(function(b){return 0}),s=t.shape.map(function(b){return b});s[t.shape.length-1]=n,e=t.slice(o,s),r=n}else if(null!=n&&n>r){var a=t.shape.map(function(b){return b});a[t.shape.length-1]=n-r,e=t.concat(Tn(a),t.shape.length-1),r=n}else e=t;var u=e.zerosLike(),c=ei(e,u).as2D(i,r),l=MI(c),f=Math.floor(r/2)+1,p=ts(l),g=wa(l),m=p.split([f,r-f],p.shape.length-1),y=g.split([f,r-f],g.shape.length-1),w=e.shape.slice();return w[e.shape.length-1]=f,ei(m[0],y[0]).reshape(w)}}),WL=W({irfft_:function(t){var n=t.shape[t.shape.length-1],e=t.size/n;if(n<=2){var r=t.as2D(e,n),i=xA(r);return ts(i)}var o=[e,2*(n-1)],s=ts(t).as2D(e,n),a=wa(t).as2D(e,n),u=s.slice([0,1],[e,n-2]).reverse(1),c=a.slice([0,1],[e,n-2]).reverse(1).mul(Ee(-1)),l=s.concat(u,1),f=a.concat(c,1);return r=ei(l,f).as2D(o[0],o[1]),i=xA(r),ts(i)}}),S$=Object.freeze({fft:MI,ifft:xA,rfft:RI,irfft:WL}),T$=W({sparseToDense_:function(t,n,e,r){void 0===r&&(r=0);var i=R(t,"sparseIndices","sparseToDense","int32"),o=R(n,"sparseValues","sparseToDense"),s=R(r,"defaultValue","sparseToDense",o.dtype);return function(a,u,c,l){if("int32"!==a.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var f=a.rank>0?a.shape[0]:1,p=a.rank>1?a.shape[1]:1;if(c.length!==p)throw new Error("outputShape has incorrect number of elements:, "+c.length+", should be: "+p+".");if(0!==u.rank&&(1!==u.rank||u.size!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==l.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,e,s),V.runKernelFunc(function(a){return a.sparseToDense(i,o,e,s)},{$sparseIndices:i,$sparseValues:o,$defaultValue:s})}}),M$=W({gatherND_:function(t,n){var e=R(n,"indices","gatherND","int32"),r=R(t,"x","gatherND");return V.runKernelFunc(function(i){return i.gatherND(r,e)},{x:r,indices:e},null,"GatherNd")}}),R$=W({diag_:function(t){var n=R(t,"x","diag").flatten(),e=t.shape.concat(t.shape);return V.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(e)}}),k$=W({dropout_:function(t,n,e,r){var i=R(t,"x","dropout");if(k("float32"===i.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),k(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),0===n)return t instanceof hn?i.clone():i;var o=function(u,c){if(null==c)return u.shape.slice();if(Ar(u.shape,c))return c;if(u.shape.length===c.length){for(var l=[],f=0;f<u.shape.length;f++)l.push(null==c[f]&&null!=u.shape[f]?u.shape[f]:c[f]);return l}return c}(i,e),s=1-n,a=rB(o,0,1,"float32",r).add(s).floor().div(s);return i.mul(a)}});function HL(t,n,e){for(var r=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var s=2*Math.PI*o/(t+r-1);i[o]=n-e*Math.cos(s)}return Cr(i,"float32")}var Ai,kI=W({hannWindow_:function(t){return HL(t,.5,.5)}}),qL=W({hammingWindow_:function(t){return HL(t,.54,.46)}}),PI=W({frame_:function(t,n,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var o=0,s=[];o+n<=t.size;)s.push(Aa(t,o,n)),o+=e;if(r)for(;o<t.size;){var a=o+n-t.size,u=Fr([Aa(t,o,n-a),ba([a],i)]);s.push(u),o+=e}return 0===s.length?Hc([],[0,n]):Fr(s).as2D(s.length,n)}}),GL=W({stft_:function(t,n,e,r,i){void 0===i&&(i=kI),null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)))));for(var s=PI(t,n,e),a=bi(s,i(n)),u=[],c=0;c<s.shape[0];c++)u.push(RI(a.slice([c,0],[1,n]),r));return Fr(u)}}),P$=Object.freeze({hannWindow:kI,hammingWindow:qL,frame:PI,stft:GL});!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Ai||(Ai={}));var N$=W({absoluteDifference_:function(t,n,e,r){void 0===r&&(r=Ai.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","absoluteDifference"),o=R(n,"predictions","absoluteDifference"),s=null;null!=e&&(s=R(e,"weights","absoluteDifference")),Nt(i.shape,o.shape,"Error in absoluteDifference: ");var a=i.sub(o).abs();return Du(a,s,r)}}),Du=W({computeWeightedLoss_:function(t,n,e){void 0===e&&(e=Ai.SUM_BY_NONZERO_WEIGHTS);var r=R(t,"losses","computeWeightedLoss"),i=null;null!=n&&(i=R(n,"weights","computeWeightedLoss"));var o=null==i?r:r.mul(i);if(e===Ai.NONE)return o;if(e===Ai.SUM)return o.sum();if(e===Ai.MEAN){if(null==i)return o.mean();var s=r.size/i.size,a=o.sum().div(i.sum());return s>1?a.div(Ee(s)):a}if(e===Ai.SUM_BY_NONZERO_WEIGHTS){if(null==i)return o.sum().div(Ee(r.size));var u=i.mul(Yh(r.shape)).notEqual(Ee(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+e)}}),F$=W({cosineDistance_:function(t,n,e,r,i){void 0===i&&(i=Ai.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","cosineDistance"),s=R(n,"predictions","cosineDistance"),a=null;null!=r&&(a=R(r,"weights","cosineDistance")),Nt(o.shape,s.shape,"Error in cosineDistance: ");var u=Ee(1).sub(o.mul(s).sum(e,!0));return Du(u,a,i)}}),B$=W({hingeLoss_:function(t,n,e,r){void 0===r&&(r=Ai.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","hingeLoss"),o=R(n,"predictions","hingeLoss"),s=null;null!=e&&(s=R(e,"weights","hingeLoss")),Nt(i.shape,o.shape,"Error in hingeLoss: ");var a=Ee(1);i=Ee(2).mul(i).sub(a);var u=a.sub(i.mul(o)).relu();return Du(u,s,r)}}),L$=W({huberLoss_:function(t,n,e,r,i){void 0===r&&(r=1),void 0===i&&(i=Ai.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","huberLoss"),s=R(n,"predictions","huberLoss"),a=null;null!=e&&(a=R(e,"weights","huberLoss")),Nt(o.shape,s.shape,"Error in huberLoss: ");var u=Ee(r),c=s.sub(o).abs(),l=CL(c,u),f=c.sub(l),p=Ee(.5).mul(l.square()).add(u.mul(f));return Du(p,a,i)}}),U$=W({logLoss_:function(t,n,e,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=Ai.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","logLoss"),s=R(n,"predictions","logLoss"),a=null;null!=e&&(a=R(e,"weights","logLoss")),Nt(o.shape,s.shape,"Error in logLoss: ");var u=Ee(1),c=Ee(r),l=o.mul(s.add(c).log()).neg().sub(u.sub(o).mul(u.sub(s).add(c).log()));return Du(l,a,i)}}),j$=W({meanSquaredError_:function(t,n,e,r){void 0===r&&(r=Ai.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","meanSquaredError"),o=R(n,"predictions","meanSquaredError"),s=null;null!=e&&(s=R(e,"weights","meanSquaredError")),Nt(i.shape,o.shape,"Error in meanSquaredError: ");var a=i.squaredDifference(o);return Du(a,s,r)}}),z$=W({sigmoidCrossEntropy_:function(t,n,e,r,i){void 0===r&&(r=0),void 0===i&&(i=Ai.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"multiClassLabels","sigmoidCrossEntropy"),s=R(n,"logits","sigmoidCrossEntropy"),a=null;if(null!=e&&(a=R(e,"weights","sigmoidCrossEntropy")),Nt(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Ee(r),c=Ee(1),l=Ee(.5);o=o.mul(c.sub(u)).add(l.mul(u))}var f=function(p,g){var m=R(p,"labels","sigmoidCrossEntropyWithLogits"),y=R(g,"logits","sigmoidCrossEntropyWithLogits");Nt(m.shape,y.shape,"Error in sigmoidCrossEntropyWithLogits: ");var w=y.relu(),b=y.mul(m),A=y.abs().neg().exp().log1p();return w.sub(b).add(A)}(o,s);return Du(f,a,i)}}),V$=W({softmaxCrossEntropy_:function(t,n,e,r,i){void 0===r&&(r=0),void 0===i&&(i=Ai.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"onehotLabels","softmaxCrossEntropy"),s=R(n,"logits","softmaxCrossEntropy"),a=null;if(null!=e&&(a=R(e,"weights","softmaxCrossEntropy")),Nt(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Ee(r),c=Ee(1),l=Ee(o.shape[1]);o=o.mul(c.sub(u)).add(u.div(l))}var f=function(p,g,m){if(void 0===m&&(m=-1),-1===m&&(m=g.rank-1),m!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+m);return oA(function(y,w,b){var A=w.logSumExp([m],!0),C=w.toFloat().sub(A);return b([y,C]),{value:C.mul(y).neg().sum([m]),gradFunc:function(_,E){var I=E[0],P=E[1],O=zi(_.shape,[m]);return[_.reshape(O).mul(I.toFloat().sub(P.exp())),_.reshape(O).mul(P.exp().sub(I.toFloat()))]}}})(p,g)}(o,s);return Du(f,a,i)}}),W$=Object.freeze({get Reduction(){return Ai},absoluteDifference:N$,computeWeightedLoss:Du,cosineDistance:F$,hingeLoss:B$,huberLoss:L$,logLoss:U$,meanSquaredError:j$,sigmoidCrossEntropy:z$,softmaxCrossEntropy:V$});function KL(t,n){return void 0===n&&(n=!1),V.tidy(function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var e=t.shape[0],r=t.shape[1],i=nB(e),o=t.clone(),s=Hc([[1]],[1,1]),a=s.clone(),u=e>=r?r:e,c=function(f){var p,g=o,m=a,y=i;p=V.tidy(function(){var w=o.slice([f,f],[e-f,1]),b=w.norm(),A=o.slice([f,f],[1,1]),C=Hc([[-1]]).where(A.greater(0),Hc([[1]])),_=A.sub(C.mul(b)),E=w.div(_);a=1===E.shape[0]?s.clone():s.concat(E.slice([1,0],[E.shape[0]-1,E.shape[1]]),0);var I=C.matMul(_).div(b).neg(),P=o.slice([f,0],[e-f,r]),O=I.mul(a);if(0===f)o=P.sub(O.matMul(a.transpose().matMul(P)));else{var F=P.sub(O.matMul(a.transpose().matMul(P)));o=o.slice([0,0],[f,r]).concat(F,0)}var N=i.slice([0,f],[e,i.shape[1]-f]);if(0===f)i=N.sub(N.matMul(a).matMul(O.transpose()));else{var Q=N.sub(N.matMul(a).matMul(O.transpose()));i=i.slice([0,0],[e,f]).concat(Q,1)}return[a,o,i]}),a=p[0],o=p[1],i=p[2],io([g,m,y])},l=0;l<u;++l)c(l);return!n&&e>r&&(i=i.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[i,o]})}var H$=W({bandPart_:function(t,n,e){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var r=R(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),s=o[0],a=o[1];if(!(n<=s))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+s+").");if(!(e<=a))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+a+").");n<0&&(n=s),e<0&&(e=a);var u=Zb(0,s,1,"int32").reshape([-1,1]),c=Zb(0,a,1,"int32"),l=Lr(u,c),f=vA(l.lessEqual(Ee(+n,"int32")),l.greaterEqual(Ee(-e,"int32"))),p=Tn([s,a],r.dtype);return To(Br(r.reshape([-1,s,a])).map(function(g){return _d(f,g,p)})).reshape(i)}}),q$=W({gramSchmidt_:function(t){var n;if(Array.isArray(t)){n=!1,k(null!=t&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=t[0].shape[0],r=function(u){k(t[u].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+e+")"})},i=1;i<t.length;++i)r(i)}else n=!0,t=ZD(t,t.shape[0],0).map(function(u){return oB(u,[0])});k(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],s=t,a=function(u){o.push(V.tidy(function(){var c=s[u];if(u>0)for(var l=0;l<u;++l){var f=LL(o[l].mulStrict(c)).mul(o[l]);c=c.sub(f)}return c.div(VL(c,"euclidean"))}))};for(i=0;i<t.length;++i)a(i);return n?To(o,0):o}}),G$=W({qr_:function(t,n){if(void 0===n&&(n=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return KL(t,n);var e=t.shape.slice(0,t.shape.length-2).reduce(function(s,a){return s*a}),r=Br(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(function(s){var a=KL(s,n),c=a[1];i.push(a[0]),o.push(c)}),[To(i,0).reshape(t.shape),To(o,0).reshape(t.shape)]}}),K$=Object.freeze({bandPart:H$,gramSchmidt:q$,qr:G$});function CA(t,n,e,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);var s=t.shape[0];return e=Math.min(e,s),k(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),k(2===t.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),k(4===t.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),k(1===n.rank,function(){return"scores must be a 1D tensor"}),k(n.shape[0]===s,function(){return"scores has incompatible shape with boxes. Expected "+s+", but was "+n.shape[0]}),k(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var Q$=W({resizeBilinear_:function(t,n,e){void 0===e&&(e=!1);var r=R(t,"images","resizeBilinear");k(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),k(2===n.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=n[0],a=n[1],u=V.runKernelFunc(function(c,l){return l([i]),c.resizeBilinear(i,s,a,e)},{x:i},function(c,l){return{x:function(){return V.runKernelFunc(function(f){return f.resizeBilinearBackprop(c,l[0],e)},{})}}},"ResizeBilinear",{alignCorners:e,newHeight:s,newWidth:a});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Y$=W({resizeNearestNeighbor_:function(t,n,e){void 0===e&&(e=!1);var r=R(t,"images","resizeNearestNeighbor");k(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),k(2===n.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),k("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=n[0],a=n[1],u=V.runKernelFunc(function(c,l){return l([i]),c.resizeNearestNeighbor(i,s,a,e)},{batchImages:i},function(c,l){return{batchImages:function(){return V.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(c,l[0],e)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),X$=W({nonMaxSuppression_:function(t,n,e,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var o=R(t,"boxes","nonMaxSuppression"),s=R(n,"scores","nonMaxSuppression"),a=CA(o,s,e,r,i);return V.runKernelFunc(function(c){return c.nonMaxSuppression(o,s,e,r,i)},{boxes:o,scores:s},null,"NonMaxSuppressionV3",{maxOutputSize:e=a.maxOutputSize,iouThreshold:r=a.iouThreshold,scoreThreshold:i=a.scoreThreshold})}}),Z$=W({nonMaxSuppressionWithScore_:function(t,n,e,r,i,o){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===o&&(o=0);var s=R(t,"boxes","nonMaxSuppression"),a=R(n,"scores","nonMaxSuppression"),u=CA(s,a,e,r,i,o),c={maxOutputSize:e=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},l=V.runKernel("NonMaxSuppressionV5",{boxes:s,scores:a},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),eee=W({cropAndResize_:function(t,n,e,r,i,o){var s=R(t,"image","cropAndResize"),a=R(n,"boxes","cropAndResize","float32"),u=R(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var c=a.shape[0];return k(4===s.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),k(2===a.rank&&4===a.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+a.shape+"."}),k(1===u.rank&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+a.shape+"."}),k(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),k(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),k("bilinear"===i||"nearest"===i,function(){return"method must be bilinear or nearest, but was "+i}),V.runKernelFunc(function(l,f){return l.cropAndResize(s,a,u,r,i,o)},{images:s,boxes:a,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),OI=Object.freeze({resizeBilinear:Q$,resizeNearestNeighbor:Y$,nonMaxSuppression:X$,nonMaxSuppressionAsync:function(t,n,e,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),Pe(this,void 0,void 0,function(){var o,s,a,u,f;return Oe(this,function(p){switch(p.label){case 0:return o=R(t,"boxes","nonMaxSuppressionAsync"),s=R(n,"scores","nonMaxSuppressionAsync"),a=CA(o,s,e,r,i),e=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return u=p.sent(),f=dI(u[0],u[1],e,r,i),o!==t&&o.dispose(),s!==n&&s.dispose(),[2,f]}})})},nonMaxSuppressionWithScore:Z$,nonMaxSuppressionWithScoreAsync:function(t,n,e,r,i,o){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===o&&(o=0),Pe(this,void 0,void 0,function(){var s,a,u,c,p;return Oe(this,function(g){switch(g.label){case 0:return s=R(t,"boxes","nonMaxSuppressionAsync"),a=R(n,"scores","nonMaxSuppressionAsync"),u=CA(s,a,e,r,i,o),e=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([s.data(),a.data()])];case 1:return c=g.sent(),p=fI(c[0],c[1],e,r,i,o),s!==t&&s.dispose(),a!==n&&a.dispose(),[2,p]}})})},cropAndResize:eee}),NI=function(t,n){return!(t>0)||"linear"===n},FI=function(t,n,e){if(null==e||"linear"===e)return t;if("relu"===e)return t.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},BI=function(t,n){var e=n,r=_r(t.shape,n.shape);return r.length>0&&(e=e.sum(r)),e.reshape(t.shape)},LI=function(t,n,e){if("linear"===n)return t;if("relu"===n)return qn(t);if("elu"===n)return UL(t);if("relu6"===n)return zL(t);if("prelu"===n)return jL(t,e);throw new Error("Unknown fused activation "+n+".")},tee=W({fusedMatMul_:function(t){var n,e=t.a,r=t.b,i=t.transposeA,o=void 0!==i&&i,s=t.transposeB,a=void 0!==s&&s,u=t.bias,c=t.activation,l=void 0===c?"linear":c,f=t.preluActivationWeights;if(!1===NI(V.state.gradientDepth,l)){var p=bA(e,r,o,a);return null!=u&&(p=Tt(p,u)),LI(p,l,f)}var g=R(e,"a","fused matMul"),m=R(r,"b","fused matMul");n=Nn(g,m),g=n[0],m=n[1];var y=o?g.shape[g.rank-2]:g.shape[g.rank-1],w=a?m.shape[m.rank-1]:m.shape[m.rank-2],b=o?g.shape[g.rank-1]:g.shape[g.rank-2],A=a?m.shape[m.rank-2]:m.shape[m.rank-1],C=g.shape.slice(0,-2),_=m.shape.slice(0,-2),E=Le(C),I=Le(_);k(g.rank>=2&&m.rank>=2&&g.rank===m.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+m.rank+"."}),k(Ar(C,_),function(){return"Error in fused matMul: outer dimensions ("+C+") and ("+_+") of Tensors with shapes "+g.shape+" and "+m.shape+" must match."}),k(y===w,function(){return"Error in fused matMul: inner shapes ("+y+") and ("+w+") of Tensors with shapes "+g.shape+" and "+m.shape+" and transposeA="+o+" and transposeB="+a+" must match."});var P,O,F=g.shape.slice(0,-2).concat([b,A]),N=o?g.as3D(E,y,b):g.as3D(E,b,y),Q=a?m.as3D(I,A,w):m.as3D(I,w,A);null!=u&&St(F,(P=Nn(P=R(u,"bias","fused matMul"),g)[0]).shape),null!=f&&(O=R(f,"prelu weights","fused matMul"));var q={a:N,b:Q};return null!=u&&(q.bias=P),null!=f&&(q.preluActivationWeights=O),V.runKernelFunc(function(ce,de){var X=ce.fusedBatchMatMul({a:N,b:Q,transposeA:o,transposeB:a,bias:P,activation:l,preluActivationWeights:O});return de([N,Q,X]),X},q,function(ce,de){var X=de[0],J=de[1],oe=FI(ce,de[2],l),pe={};return null!=u&&(pe={bias:function(){return BI(P,oe)}}),Object.assign(o||a?!o&&a?{a:function(){return oe.matMul(J,!1,!1)},b:function(){return oe.matMul(X,!0,!1)}}:o&&!a?{a:function(){return J.matMul(oe,!1,!0)},b:function(){return X.matMul(oe,!1,!1)}}:{a:function(){return J.matMul(oe,!0,!0)},b:function(){return oe.matMul(X,!0,!0)}}:{a:function(){return oe.matMul(J,!1,!0)},b:function(){return X.matMul(oe,!0,!1)}},pe)},"_FusedMatMul",{transposeA:o,transposeB:a,activation:l},[N,Q],[!0]).reshape(F)}}),nee=W({fusedConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,s=void 0===o?"NHWC":o,a=t.dilations,u=void 0===a?[1,1]:a,c=t.dimRoundingMode,l=t.bias,f=t.activation,p=void 0===f?"linear":f,g=t.preluActivationWeights;if(!1===NI(V.state.gradientDepth,p=p||"linear")){var m=rs(n,e,r,i,s,u,c);return null!=l&&(m=Tt(m,l)),LI(m,p,g)}var y=R(n,"x","conv2d"),w=R(e,"filter","conv2d"),b=y,A=!1;3===y.rank&&(A=!0,b=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),k(4===b.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+b.rank+"."}),k(4===w.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+w.rank+"."}),null!=c&&k(Hn(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+i+"."}),k(b.shape[3]===w.shape[2],function(){return"Error in conv2d: depth of input ("+b.shape[3]+") must match input depth for filter "+w.shape[2]+"."}),k(Vi(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),k("NHWC"===s,function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."});var C,_,E=qc(b.shape,w.shape,r,u,i,c);null!=l&&(C=Nn(C=R(l,"bias","fused conv2d"),y)[0],St(E.outShape,C.shape)),null!=g&&(_=R(g,"prelu weights","fused conv2d"));var I={x:b,filter:w};null!=l&&(I.bias=C),null!=g&&(I.preluActivationWeights=_);var O=V.runKernelFunc(function(F,N){var Q=F.fusedConv2d({input:b,filter:w,convInfo:E,bias:C,activation:p,preluActivationWeights:_});return N([w,b,Q]),Q},I,function(F,N){var q=N[0],$=N[1],de=FI(F,N[2],p);k(Ad(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var X={};return null!=l&&(X={bias:function(){return BI(C,de)}}),Object.assign({x:function(){return RL($.shape,de,q,r,i)},filter:function(){return SI($,de,q.shape,r,i)}},X)},"FusedConv2D",{convInfo:E,activation:p},[w,b],[!0]);return A?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}}),ree=W({fusedDepthwiseConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,s=void 0===o?"NHWC":o,a=t.dilations,u=void 0===a?[1,1]:a,c=t.dimRoundingMode,l=t.bias,f=t.activation,p=void 0===f?"linear":f,g=t.preluActivationWeights;if(!1===NI(V.state.gradientDepth,p)){var m=wA(n,e,r,i,s,u,c);return null!=l&&(m=Tt(m,l)),LI(m,p,g)}var y=R(n,"x","depthwiseConv2d"),w=R(e,"filter","depthwiseConv2d"),b=y,A=!1;3===y.rank&&(A=!0,b=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),k(4===b.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+b.rank+"."}),k(4===w.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+w.rank+"."}),k(b.shape[3]===w.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+b.shape[3]+") must match the inChannels dimension in filter "+w.shape[2]+"."}),null==u&&(u=[1,1]),k(Vi(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),null!=c&&k(Hn(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+i+"."});var C,_,E=qc(b.shape,w.shape,r,u,i,c,!0);null!=l&&(C=Nn(C=R(l,"bias","fused conv2d"),y)[0],St(E.outShape,C.shape)),null!=g&&(_=R(g,"prelu weights","fused depthwiseConv2d"));var I={x:b,filter:w};null!=l&&(I.bias=C),null!=g&&(I.preluActivationWeights=_);var O=V.runKernelFunc(function(F,N){var Q=F.fusedDepthwiseConv2D({input:b,filter:w,convInfo:E,bias:C,activation:p,preluActivationWeights:_});return N([w,b,Q]),Q},I,function(F,N){k(Ad(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var Q=N[0],q=N[1],ce=FI(F,N[2],p),de={};return null!=l&&(de={bias:function(){return BI(C,ce)}}),Object.assign({x:function(){return kL(q.shape,ce,Q,E)},filter:function(){return PL(q,ce,Q.shape,E)}},de)},"FusedDepthwiseConv2D",{convInfo:E,activation:p},[w,b],[!0]);return A?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}}),iee=Object.freeze({matMul:tee,conv2d:nee,depthwiseConv2d:ree}),oee=Object.freeze({image:OI,linalg:K$,losses:W$,spectral:S$,fused:iee,signal:P$,square:UJ,squaredDifference:hL,conv1d:QZ,conv2d:rs,conv3d:YZ,depthwiseConv2d:wA,separableConv2d:TI,conv2dTranspose:XZ,conv3dTranspose:JZ,op:W,batchNormalization2d:gZ,batchNormalization3d:mZ,batchNormalization4d:vZ,batchNormalization:yZ,batchNorm:wL,batchNorm2d:wZ,batchNorm3d:bZ,batchNorm4d:AZ,booleanMaskAsync:function(t,n,e){return Pe(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,f,p,g,m,y;return Oe(this,function(w){switch(w.label){case 0:for(r=R(t,"tensor","boolMask"),i=R(n,"mask","boolMask","bool"),o=e??0,a=r.shape,k((s=i.rank)>0,function(){return"mask cannot be scalar"}),Nt(a.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=o;c<o+s;c++)u*=a[c];return l=a.slice(0,o).concat([u],a.slice(o+s)),f=r.reshape(l),p=i.reshape([-1]),[4,AL(p)];case 1:return g=w.sent(),m=g.squeeze([1]),y=DI(f,m,o),t!==r&&r.dispose(),n!==i&&i.dispose(),m.dispose(),f.dispose(),p.dispose(),g.dispose(),[2,y]}})})},complex:ei,real:ts,imag:wa,concat:Fr,concat1d:DY,concat2d:IY,concat3d:SY,concat4d:TY,split:ZD,matMul:bA,dot:ZZ,outerProduct:$Z,reverse:Cv,reverse1d:e$,reverse2d:t$,reverse3d:n$,reverse4d:r$,maxPool:Gr,avgPool:_v,pool:i$,maxPool3d:o$,avgPool3d:s$,slice:Aa,slice1d:a$,slice2d:u$,slice3d:FL,slice4d:c$,abs:jJ,acos:zJ,acosh:VJ,asin:WJ,asinh:HJ,atan:qJ,atanh:GJ,ceil:KJ,clipByValue:CI,cos:QJ,cosh:YJ,erf:XJ,exp:_I,expm1:JJ,floor:ZJ,log:$J,log1p:eZ,logSigmoid:tZ,neg:pA,reciprocal:nZ,round:rZ,rsqrt:pL,sigmoid:gL,sign:iZ,isNaN:oZ,isInf:sZ,isFinite:aZ,sin:uZ,sinh:cZ,softplus:lZ,sqrt:dZ,step:fZ,tan:hZ,tanh:pZ,all:l$,any:d$,argMax:f$,argMin:h$,logSumExp:p$,max:AA,mean:g$,min:m$,moments:v$,sum:LL,prod:y$,equal:_L,equalStrict:BZ,greater:LZ,greaterEqual:EL,greaterEqualStrict:UZ,greaterStrict:jZ,less:zZ,lessEqual:VZ,lessEqualStrict:WZ,lessStrict:HZ,notEqual:qZ,notEqualStrict:GZ,add:Tt,addN:_Z,addStrict:EZ,atan2:DZ,div:Hs,divNoNan:IZ,divStrict:SZ,floorDiv:xL,maximum:EI,maximumStrict:TZ,minimum:CL,minimumStrict:MZ,mod:RZ,modStrict:kZ,mul:bi,mulStrict:PZ,pow:yA,powStrict:OZ,squaredDifferenceStrict:NZ,sub:Lr,subStrict:FZ,elu:UL,leakyRelu:w$,prelu:jL,relu:qn,relu6:zL,selu:b$,logicalAnd:vA,logicalNot:xZ,logicalOr:bL,logicalXor:CZ,where:_d,whereAsync:AL,buffer:lt,print:function LY(t,n){void 0===n&&(n=!1),console.log(t.toString(n))},batchToSpaceND:tB,broadcastTo:UY,cast:jY,clone:zY,cumsum:VY,depthToSpace:WY,expandDims:ns,eye:nB,multinomial:HY,oneHot:eI,pad:bd,pad1d:qY,pad2d:GY,pad3d:KY,pad4d:QY,rand:YY,randomNormal:XY,randomGamma:JY,randomUniform:rB,reshape:Vs,spaceToBatchND:iB,squeeze:oB,stack:To,tile:Xh,truncatedNormal:ZY,unstack:Br,setdiff1dAsync:function(t,n){return Pe(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,l,f;return Oe(this,function(p){switch(p.label){case 0:return e=R(t,"x","setdiff1d"),r=R(n,"y","setdiff1d"),k(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),k(1===e.rank,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),k(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return i=p.sent(),[4,r.data()];case 2:for(o=p.sent(),s=new Set(o),a=0,l=0;l<i.length;l++)s.has(i[l])||a++;for(u=new ov([a],e.dtype),c=new ov([a],"int32"),l=0,f=0;l<i.length;l++)s.has(i[l])||(u.values[f]=i[l],c.values[f]=l,f++);return[2,[u.toTensor(),c.toTensor()]]}})})},fill:ba,linspace:function EY(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return V.runKernelFunc(function(r){return r.linspace(t,n,e)},{})},ones:Yh,range:Zb,scalar:Ee,tensor:ti,tensor1d:Cr,tensor2d:Hc,tensor3d:JD,tensor4d:so,tensor5d:function xY(t,n,e){if(pd(t),null!=n&&5!==n.length)throw new Error("tensor5d() requires shape to have five numbers");var r=ya(t,e);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Wc(t,n,r,e)},tensor6d:function CY(t,n,e){if(pd(t),null!=n&&6!==n.length)throw new Error("tensor6d() requires shape to have six numbers");var r=ya(t,e);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Wc(t,n=n||r,r,e)},variable:function _Y(t,n,e,r){return void 0===n&&(n=!0),V.makeVariable(t,n,e,r)},zeros:Tn,onesLike:eB,zerosLike:Ft,transpose:Gc,softmax:Cu,logSoftmax:tX,localResponseNormalization:A$,norm:VL,gather:DI,unsortedSegmentSum:SL,basicLSTMCell:x$,multiRNNCell:C$,movingAverage:_$,stridedSlice:E$,topk:D$,scatterND:I$,fft:MI,ifft:xA,rfft:RI,irfft:WL,sparseToDense:T$,gatherND:M$,diag:R$,dropout:k$,hannWindow:kI,hammingWindow:qL,frame:PI,stft:GL,inTopKAsync:function(t,n,e){return void 0===e&&(e=1),Pe(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,f,p,g,m,y,w;return Oe(this,function(b){switch(b.label){case 0:return r=R(t,"predictions","inTopK"),i=R(n,"targets","inTopK"),k(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),k(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),Nt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],k(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,r.data()];case 1:return s=b.sent(),[4,i.data()];case 2:for(a=b.sent(),l=(u=[s.length/o,o])[1],f=qh("bool",c=u[0]),p=0;p<c;p++){for(m=s.subarray(g=p*l,g+l),y=[],w=0;w<m.length;w++)y.push({value:m[w],index:w});for(y.sort(function(A,C){return C.value-A.value}),f[p]=0,w=0;w<e;w++)if(y[w].index===a[p]){f[p]=1;break}}return t!==r&&r.dispose(),n!==i&&i.dispose(),[2,ti(f,i.shape,"bool")]}})})}});function ye(t,n){Array.isArray(t)||(t=[t]),t.forEach(function(e){null!=e&&k("complex64"!==e.dtype,function(){return n+" does not support complex64 tensors."})})}function UI(t,n,e,r){if("linear"===e)return t.linear(n);if("relu"===e)return t.relu(n);if("elu"===e)return t.elu(n);if("relu6"===e)return t.relu6(n);if("prelu"===e)return t.prelu(n,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var see=function(t){function n(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new hB(e,V),e}return Bs(n,t),n.prototype.write=function(e,r,i){this.firstUse&&(this.firstUse=!1,ue().get("IS_NODE")&&Xb("\n============================\nHi there \u{1f44b}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var o={};return this.data.set(o,{values:e,dtype:i}),o},n.prototype.move=function(e,r,i,o){this.data.set(e,{values:r,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){return[2,this.readSync(e)]})})},n.prototype.readSync=function(e){var r=this.data.get(e),o=r.complexTensors;return"complex64"===r.dtype?lI(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),i=r;if("string"===e.dtype)try{i=r.map(function(o){return tv(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return lt(e.shape,e.dtype,i)},n.prototype.makeOutput=function(e,r,i){var o=this.write(e,r,i);return V.makeTensorFromDataId(o,r,i,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;null!=r&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){return r=Us(),e(),[2,{kernelMs:Us()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,r){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:V.keep(e.clone()),imag:V.keep(r.clone())},i},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,i){if(ye(e,"slice"),iI(e.shape,r,i)){var o=oI(r,e.strides),s=Le(i);return ti(this.readSync(e.dataId).subarray(o,o+s),i,e.dtype)}for(var a=lt(i,e.dtype),u=this.bufferSync(e),c=0;c<a.size;++c){var l=a.indexToLoc(c).map(function(f,p){return f+r[p]});a.values[c]=u.get.apply(u,l)}return a.toTensor()},n.prototype.stridedSlice=function(e,r,i,o){ye(e,"stridedSlice");var s=iA(r,i,o);if(s.some(function(g){return 0===g}))return ti([],s);for(var a=lt(s,e.dtype),u=this.bufferSync(e),c=0;c<a.size;c++){for(var l=a.indexToLoc(c),f=new Array(l.length),p=0;p<f.length;p++)f[p]=l[p]*o[p]+r[p];a.set.apply(a,[u.get.apply(u,f)].concat(l))}return a.toTensor()},n.prototype.diag=function(e){for(var r=this.readSync(e.dataId),i=lt([e.size,e.size],e.dtype),o=i.values,s=0;s<r.length;s++)o[s*e.size+s]=r[s];return i.toTensor()},n.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==r&&(o[s++]=e.shape[a]);var u=new Array(e.rank).fill(0),c=e.shape.slice();c[r]=1;var l=new Array(i);for(a=0;a<l.length;a++)u[r]=a,l[a]=this.slice(e,u,c).reshape(o);return l},n.prototype.reverse=function(e,r){ye(e,"reverse");for(var i=lt(e.shape,e.dtype),o=this.bufferSync(e),s=function(u){var c=i.indexToLoc(u),l=c.slice();r.forEach(function(f){return l[f]=e.shape[f]-1-l[f]}),i.set.apply(i,[o.get.apply(o,l)].concat(c))},a=0;a<i.size;a++)s(a);return i.toTensor()},n.prototype.concat=function(e,r){var i=this;if("complex64"===e[0].dtype){var o=e.map(function(g){return ts(g)}),s=e.map(function(g){return wa(g)});return ei(this.concat(o,r),this.concat(s,r))}var a=e.map(function(g){var m=Le(g.shape.slice(r));return g.as2D(-1,m)}),u=vd(a.map(function(g){return g.shape}),1),c=lt(u,e[0].dtype).values;if(1===a[0].shape[0]){var l=0;a.forEach(function(g){c.set(i.readSync(g.dataId),l),l+=g.size})}else{var f=0;a.forEach(function(g){for(var m=i.readSync(g.dataId),y=0,w=0;w<g.shape[0];++w)for(var b=w*u[1]+f,A=0;A<g.shape[1];++A)c[b+A]=m[y++];f+=g.shape[1]})}var p=vd(e.map(function(g){return g.shape}),r);return ti(c,p,e[0].dtype)},n.prototype.neg=function(e){return ye(e,"neg"),this.multiply(Ee(-1),e)},n.prototype.add=function(e,r){return"complex64"===e.dtype||"complex64"===r.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i+s,imag:o+a}}):this.broadcastedBinaryOp(e,r,qr(e.dtype,r.dtype),function(i,o){return i+o})},n.prototype.addN=function(e){var r=this;ye(e,"addN");for(var i=e.map(function(l){return r.readSync(l.dataId)}),o=lt(e[0].shape,e[0].dtype),s=o.values,a=0;a<e.length;a++)for(var u=i[a],c=0;c<s.length;c++)s[c]+=u[c];return o.toTensor()},n.prototype.softmax=function(e,r){var i=xr([r],e.shape),o=this.max(e,i),s=zi(o.shape,i),a=this.subtract(e,o.reshape(s)),u=this.exp(a),c=this.sum(u,i).reshape(s);return this.realDivide(u,c)},n.prototype.subtract=function(e,r){return"complex64"===e.dtype||"complex64"===r.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i-s,imag:o-a}}):this.broadcastedBinaryOp(e,r,qr(e.dtype,r.dtype),function(i,o){return i-o})},n.prototype.pow=function(e,r){return ye([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.pow(i,o)})},n.prototype.batchMatMul=function(e,r,i,o){ye([e,r],"matMul");for(var s=i?e.shape[1]:e.shape[2],a=i?e.shape[2]:e.shape[1],u=o?r.shape[1]:r.shape[2],c=e.shape[0],l=this.readSync(e.dataId),f=this.readSync(r.dataId),p=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],g=p[0],m=p[1],y=p[2],w=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],b=w[0],A=w[1],C=w[2],_=a*u,E=lt([c,a,u],e.dtype),I=E.values,P=this.blockSize,O=0;O<c;O++)for(var F=0;F<a;F+=P)for(var N=0;N<u;N+=P)for(var Q=0;Q<s;Q+=P)for(var q=Math.min(F+P,a),$=Math.min(N+P,u),ce=Math.min(Q+P,s),de=F;de<q;de++)for(var X=N;X<$;X++){for(var J=0,Z=Q;Z<ce;Z++)J+=l[O*g+de*m+Z*y]*f[Z*b+X*A+O*C];I[O*_+(de*u+X)]+=J}return E.toTensor()},n.prototype.fusedBatchMatMul=function(e){var a=e.bias,u=e.activation,c=e.preluActivationWeights,l=this.batchMatMul(e.a,e.b,e.transposeA,e.transposeB);return a&&(l=this.add(l,a)),u&&(l=UI(this,l,u,c)),l},n.prototype.multiply=function(e,r){return"complex64"===e.dtype||"complex64"===r.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i*s-o*a,imag:i*a+o*s}}):this.broadcastedBinaryOp(e,r,qr(e.dtype,r.dtype),function(i,o){return i*o})},n.prototype.realDivide=function(e,r){return ye([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",function(i,o){return i/o})},n.prototype.floorDiv=function(e,r){return ye([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",function(i,o){return Math.floor(i/o)})},n.prototype.sum=function(e,r){ye(e,"sum"),oo("sum",r,e.rank);for(var i=$r(e.shape,r),s=i[1],a=Tn(i[0],qr(e.dtype,"int32")),u=Le(s),c=this.readSync(a.dataId),l=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=0,m=0;m<u;++m)g+=l[p+m];c[f]=g}return a},n.prototype.prod=function(e,r){ye(e,"sum");for(var i=$r(e.shape,r),s=i[1],a=Tn(i[0],qr(e.dtype,"int32")),u=Le(s),c=this.readSync(a.dataId),l=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=1,m=0;m<u;++m)g*=l[p+m];c[f]=g}return a},n.prototype.unsortedSegmentSum=function(e,r,i){ye(e,"unsortedSegmentSum");for(var o=[],s=e.rank-r.rank,a=0;a<s;++a)r=r.expandDims(a+1);for(a=0;a<i;++a){var u=Ee(a,"int32"),c=_L(u,r).asType("float32").mul(e).sum(0);o.push(c)}return To(o)},n.prototype.argMin=function(e,r){ye(e,"argMin");var i=[r];oo("argMin",i,e.rank);for(var o=$r(e.shape,i),a=o[1],u=Tn(o[0],"int32"),c=Le(a),l=this.readSync(u.dataId),f=this.readSync(e.dataId),p=0;p<l.length;++p){for(var g=p*c,m=f[g],y=0,w=0;w<c;++w){var b=f[g+w];b<m&&(m=b,y=w)}l[p]=y}return u},n.prototype.argMax=function(e,r){ye(e,"argMax");var i=[r];oo("argMax",i,e.rank);for(var o=$r(e.shape,i),a=o[1],u=Tn(o[0],"int32"),c=Le(a),l=this.readSync(u.dataId),f=this.readSync(e.dataId),p=0;p<l.length;++p){for(var g=p*c,m=f[g],y=0,w=0;w<c;++w){var b=f[g+w];b>m&&(m=b,y=w)}l[p]=y}return u},n.prototype.cumsum=function(e,r,i,o){if(ye(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var s=qr(e.dtype,"int32"),a=Tn(e.shape,s),u=this.readSync(a.dataId),c=this.readSync(e.dataId),l=e.shape[e.rank-1],f=o?function(w,b){return w+l-b-1}:function(w,b){return w+b},p=0;p<c.length;p+=l)for(var g=0;g<l;g++){var m=f(p,g);if(0===g)u[m]=i?0:c[m];else{var y=f(p,g-1);u[m]=i?c[y]+u[y]:c[m]+u[y]}}return a},n.prototype.equal=function(e,r){return ye([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i===o?1:0})},n.prototype.notEqual=function(e,r){return ye([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i!==o?1:0})},n.prototype.less=function(e,r){return ye([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<o?1:0})},n.prototype.lessEqual=function(e,r){return ye([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<=o?1:0})},n.prototype.greater=function(e,r){return ye([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>o?1:0})},n.prototype.greaterEqual=function(e,r){return ye([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>=o?1:0})},n.prototype.logicalNot=function(e){ye(e,"logicalNot");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,e.shape,"bool")},n.prototype.logicalAnd=function(e,r){return ye([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i&&o})},n.prototype.logicalOr=function(e,r){return ye([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i||o})},n.prototype.select=function(e,r,i){ye([e,r,i],"select");for(var o=this.readSync(e.dataId),s=this.readSync(r.dataId),a=this.readSync(i.dataId),u=Tn(r.shape,qr(r.dtype,i.dtype)),c=this.readSync(u.dataId),l=0,f=0===e.rank||e.rank>1||1===r.rank?1:Le(r.shape.slice(1)),p=0;p<o.length;p++)for(var g=0;g<f;g++)c[l++]=1===o[p]?s[p]:a[p];return u},n.prototype.where=function(e){ye([e],"where");var r=this.readSync(e.dataId);return hI(e.shape,r)},n.prototype.topk=function(e,r,i){return ye(e,"topk"),bB(this.readSync(e.dataId),e.shape,e.dtype,r)},n.prototype.min=function(e,r){ye(e,"min"),oo("min",r,e.rank);for(var i=$r(e.shape,r),s=i[1],a=Tn(i[0],e.dtype),u=Le(s),c=this.readSync(a.dataId),l=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=l[p],m=0;m<u;++m){var y=l[p+m];y<g&&(g=y)}c[f]=g}return a},n.prototype.minimum=function(e,r){return ye([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.min(i,o)})},n.prototype.mod=function(e,r){return ye([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var s=i%o;return i<0&&o<0||i>=0&&o>=0?s:(s+o)%o})},n.prototype.max=function(e,r){ye(e,"max"),oo("max",r,e.rank);for(var i=$r(e.shape,r),s=i[1],a=Tn(i[0],e.dtype),u=Le(s),c=this.readSync(a.dataId),l=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=l[p],m=0;m<u;++m){var y=l[p+m];y>g&&(g=y)}c[f]=g}return a},n.prototype.maximum=function(e,r){return ye([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.max(i,o)})},n.prototype.all=function(e,r){ye(e,"all"),oo("all",r,e.rank);for(var i=$r(e.shape,r),s=i[1],a=Tn(i[0],e.dtype),u=Le(s),c=this.readSync(a.dataId),l=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=l[p],m=0;m<u;++m)g=g&&l[p+m];c[f]=g}return a},n.prototype.any=function(e,r){ye(e,"any"),oo("any",r,e.rank);for(var i=$r(e.shape,r),s=i[1],a=Tn(i[0],e.dtype),u=Le(s),c=this.readSync(a.dataId),l=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=l[p],m=0;m<u;++m)g=g||l[p+m];c[f]=g}return a},n.prototype.squaredDifference=function(e,r){return ye([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var s=i-o;return s*s})},n.prototype.ceil=function(e){ye(e,"ceil");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.floor=function(e){ye(e,"floor");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.sign=function(e){ye(e,"x");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=r[o]<0?-1:r[o]>0?1:0;return this.makeOutput(i,e.shape,"float32")},n.prototype.isNaN=function(e){ye(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isInf=function(e){ye(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isFinite=function(e){ye(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.round=function(e){ye(e,"round");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=Math.floor(r[o]);i[o]=r[o]-s<.5?Math.floor(r[o]):r[o]-s>.5?Math.ceil(r[o]):s%2==0?s:s+1}return this.makeOutput(i,e.shape,"float32")},n.prototype.exp=function(e){ye(e,"exp");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.expm1=function(e){ye(e,"expm1");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.log=function(e){ye(e,"log");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.log(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.log1p=function(e){ye(e,"log1p");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.log1p(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.sqrt=function(e){ye(e,"sqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.sqrt(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.rsqrt=function(e){ye(e,"rsqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/Math.sqrt(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.reciprocal=function(e){ye(e,"reciprocal");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){ye(e,"relu");for(var r=Tn(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)i[s]=Math.max(0,o[s]);return r},n.prototype.relu6=function(e){ye(e,"relu");for(var r=Tn(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)i[s]=Math.min(Math.max(0,o[s]),6);return r},n.prototype.prelu=function(e,r){return ye([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return i<0?o*i:i})},n.prototype.elu=function(e){ye(e,"elu");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=i[o];r[o]=s>=0?s:Math.exp(s)-1}return this.makeOutput(r,e.shape,"float32")},n.prototype.eluDer=function(e,r){ye([e,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),s=this.readSync(e.dataId),a=0;a<o.length;++a){var u=o[a];i[a]=u>=1?s[a]:s[a]*(u+1)}return this.makeOutput(i,r.shape,"float32")},n.prototype.selu=function(e){ye(e,"selu");for(var o=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>=0?1.0507009873554805*u:1.7580993408473768*(Math.exp(u)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,r,i){ye(e,"clip");for(var o=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>i?i:u<r?r:u}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o)r[o]=Math.hypot(i[2*o],i[2*o+1]);return this.makeOutput(r,e.shape,"float32")},n.prototype.int=function(e){ye(e,"int");for(var r=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,e.shape,"int32")},n.prototype.sigmoid=function(e){ye(e,"sigmoid");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,e.shape,"float32")},n.prototype.softplus=function(e){ye(e,"softplus");for(var r=Math.log(1.1920928955078125e-7)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var l,a=o[s]>-r,u=o[s]<r,c=Math.exp(o[s]);l=u?c:a?o[s]:Math.log(1+c),i[s]=l}return this.makeOutput(i,e.shape,"float32")},n.prototype.sin=function(e){ye(e,"sin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cos=function(e){ye(e,"cos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tan=function(e){ye(e,"tan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asin=function(e){ye(e,"asin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acos=function(e){ye(e,"acos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan=function(e){ye(e,"atan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan2=function(e,r){return ye([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.atan2(i,o)})},n.prototype.sinh=function(e){ye(e,"sinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cosh=function(e){ye(e,"cosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tanh=function(e){ye(e,"tanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=u3(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asinh=function(e){ye(e,"asinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acosh=function(e){ye(e,"acosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atanh=function(e){ye(e,"atanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.erf=function(e){ye(e,"erf");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=Math.sign(i[o]),a=Math.abs(i[o]),u=1/(1+.3275911*a);r[o]=s*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-a*a))}return this.makeOutput(r,e.shape,"float32")},n.prototype.step=function(e,r){void 0===r&&(r=0),ye(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var a=o[s];i[s]=isNaN(a)?NaN:a>0?1:r}return this.makeOutput(i,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var s=e.bias,a=e.activation,u=e.preluActivationWeights,c=this.conv2d(e.input,e.filter,e.convInfo);return s&&(c=this.add(c,s)),a&&(c=UI(this,c,a,u)),c},n.prototype.conv2d=function(e,r,i){ye([e,r],"conv2d");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.padInfo.left,l=i.padInfo.top,f="channelsLast"===i.dataFormat,p=lt(i.outShape,e.dtype),g=e.strides[0],m=f?e.strides[1]:e.strides[2],y=f?e.strides[2]:1,w=f?1:e.strides[1],b=p.strides[0],A=f?p.strides[1]:p.strides[2],C=f?p.strides[2]:1,_=f?1:p.strides[1],E=this.readSync(e.dataId),I=this.readSync(r.dataId),P=p.values,O=0;O<i.batchSize;++O)for(var F=O*g,N=O*b,Q=0;Q<i.outHeight;++Q)for(var q=N+Q*A,$=Q*i.strideHeight-l,ce=0;ce<o;ce++){var de=$+ce*a;if(!(de<0||de>=i.inHeight))for(var X=ce*r.strides[0],J=F+de*m,Z=0;Z<i.outWidth;++Z)for(var oe=q+Z*C,pe=Z*i.strideWidth-c,Ce=0;Ce<s;Ce++){var De=pe+Ce*u;if(!(De<0||De>=i.inWidth))for(var Ue=J+De*y,Be=X+Ce*r.strides[1],mt=0;mt<i.inChannels;++mt){for(var _t=E[Ue+mt*w],$e=0;$e<i.outChannels;++$e)P[oe+$e*_]+=_t*I[Be+$e];Be+=i.outChannels}}}return p.toTensor()},n.prototype.conv3d=function(e,r,i){for(var o=i.filterDepth,s=i.filterHeight,a=i.filterWidth,u=i.dilationDepth,c=i.dilationHeight,l=i.dilationWidth,f=i.padInfo.front,p=i.padInfo.left,g=i.padInfo.top,m=lt(i.outShape,e.dtype),y=this.readSync(e.dataId),w=this.readSync(r.dataId),b=m.values,A=0;A<i.batchSize;++A)for(var C=A*e.strides[0],_=A*m.strides[0],E=0;E<i.outDepth;++E)for(var I=_+E*m.strides[1],P=E*i.strideDepth-f,O=0;O<o;O++){var F=P+O*u;if(!(F<0||F>=i.inDepth))for(var N=O*r.strides[0],Q=C+F*e.strides[1],q=0;q<i.outHeight;++q)for(var $=I+q*m.strides[2],ce=q*i.strideHeight-g,de=0;de<s;de++){var X=ce+de*c;if(!(X<0||X>=i.inHeight))for(var J=N+de*r.strides[1],Z=Q+X*e.strides[2],oe=0;oe<i.outWidth;++oe)for(var pe=$+oe*i.outChannels,Ce=oe*i.strideWidth-p,De=0;De<a;De++){var Ue=Ce+De*l;if(!(Ue<0||Ue>=i.inWidth))for(var mt=Z+Ue*i.inChannels,_t=J+De*r.strides[2],$e=0;$e<i.inChannels;++$e){for(var ft=y[mt+$e],st=0;st<i.outChannels;++st)b[pe+st]+=ft*w[_t+st];_t+=i.outChannels}}}}return m.toTensor()},n.prototype.conv2dDerInput=function(e,r,i){ye([e,r],"conv2dDerInput");for(var o=lt(i.inShape,"float32"),s=o.values,a=this.readSync(e.dataId),u=this.readSync(r.dataId),c=r.strides,l=c[0],f=c[1],p=c[2],g=i.batchSize,m=i.filterHeight,y=i.filterWidth,w=i.inChannels,b=i.inHeight,A=i.inWidth,C=i.outChannels,_=i.outHeight,E=i.outWidth,I=i.strideHeight,P=i.strideWidth,F=m-1-i.padInfo.top,N=y-1-i.padInfo.left,Q="channelsLast"===i.dataFormat,q=o.strides[0],$=Q?o.strides[1]:o.strides[2],ce=Q?o.strides[2]:1,de=Q?1:o.strides[1],X=e.strides[0],J=Q?e.strides[1]:e.strides[2],Z=Q?e.strides[2]:1,oe=Q?1:e.strides[1],pe=0;pe<g;++pe)for(var Ce=0;Ce<w;++Ce)for(var De=0;De<b;++De)for(var Ue=De-F,Be=Math.max(0,Math.ceil(Ue/I)),mt=Math.min(_,(m+Ue)/I),_t=0;_t<A;++_t){for(var $e=_t-N,ft=Math.max(0,Math.ceil($e/P)),st=Math.min(E,(y+$e)/P),Cn=0,Et=Be;Et<mt;++Et)for(var an=Et*I-Ue,Jt=ft;Jt<st;++Jt)for(var er=X*pe+J*Et+Z*Jt,Kn=l*(m-1-an)+f*(y-1-(Jt*P-$e))+p*Ce,Qn=0;Qn<C;++Qn)Cn+=a[er+oe*Qn]*u[Kn+Qn];s[q*pe+$*De+ce*_t+de*Ce]=Cn}return o.toTensor()},n.prototype.conv3dDerInput=function(e,r,i){for(var o=lt(i.inShape,"float32"),s=o.values,a=o.strides,u=a[0],c=a[1],l=a[2],f=a[3],p=this.readSync(e.dataId),g=e.strides,m=g[0],y=g[1],w=g[2],b=g[3],A=this.readSync(r.dataId),C=r.strides,_=C[0],E=C[1],I=C[2],P=C[3],O=i.batchSize,F=i.filterDepth,N=i.filterHeight,Q=i.filterWidth,q=i.inChannels,$=i.inDepth,ce=i.inHeight,de=i.inWidth,X=i.outChannels,J=i.outDepth,Z=i.outHeight,oe=i.outWidth,pe=i.strideDepth,Ce=i.strideHeight,De=i.strideWidth,Ue=F-1-i.padInfo.front,Be=N-1-i.padInfo.top,mt=Q-1-i.padInfo.left,_t=0;_t<O;++_t)for(var $e=0;$e<q;++$e)for(var ft=0;ft<$;++ft)for(var st=ft-Ue,Cn=Math.max(0,Math.ceil(st/pe)),Et=Math.min(J,(F+st)/pe),an=0;an<ce;++an)for(var Jt=an-Be,er=Math.max(0,Math.ceil(Jt/Ce)),Kn=Math.min(Z,(N+Jt)/Ce),Qn=0;Qn<de;++Qn){for(var Ra=Qn-mt,ka=Math.max(0,Math.ceil(Ra/De)),No=Math.min(oe,(Q+Ra)/De),pp=0,ku=Cn;ku<Et;++ku)for(var nl=ku*pe-st,Pu=er;Pu<Kn;++Pu)for(var gp=Pu*Ce-Jt,Ou=ka;Ou<No;++Ou)for(var I2=m*_t+y*ku+w*Pu+b*Ou,mp=_*(F-1-nl)+E*(N-1-gp)+I*(Q-1-(Ou*De-Ra))+P*$e,Pa=0;Pa<X;++Pa)pp+=p[I2+Pa]*A[mp+Pa];s[u*_t+c*ft+l*an+f*Qn+$e]=pp}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,r,i){ye([e,r],"conv2dDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c="channelsLast"===i.dataFormat,l=lt(i.filterShape,"float32"),f=i.padInfo.left,p=i.padInfo.top,g=this.bufferSync(e),m=this.bufferSync(r),y=0;y<a;++y)for(var w=Math.max(0,Math.ceil((p-y)/o)),b=Math.min(i.outHeight,(i.inHeight+p-y)/o),A=0;A<u;++A)for(var C=Math.max(0,Math.ceil((f-A)/s)),_=Math.min(i.outWidth,(i.inWidth+f-A)/s),E=0;E<i.inChannels;++E)for(var I=0;I<i.outChannels;++I){for(var P=0,O=0;O<i.batchSize;++O)for(var F=w;F<b;++F)for(var N=y+F*o-p,Q=C;Q<_;++Q){var q=A+Q*s-f;P+=c?g.get(O,N,q,E)*m.get(O,F,Q,I):g.get(O,E,N,q)*m.get(O,I,F,Q)}l.set(P,y,A,E,I)}return l.toTensor()},n.prototype.conv3dDerFilter=function(e,r,i){for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,u=i.filterDepth,c=i.filterHeight,l=i.filterWidth,f=lt(i.filterShape,"float32"),p=f.values,g=f.strides,m=g[0],y=g[1],w=g[2],b=g[3],A=this.readSync(r.dataId),C=r.strides,_=C[0],E=C[1],I=C[2],P=C[3],O=this.readSync(e.dataId),F=e.strides,N=F[0],Q=F[1],q=F[2],$=F[3],ce=i.padInfo.front,de=i.padInfo.left,X=i.padInfo.top,J=0;J<u;++J)for(var Z=Math.max(0,Math.ceil((ce-J)/o)),oe=Math.min(i.outDepth,(i.inDepth+ce-J)/o),pe=J*m,Ce=0;Ce<c;++Ce)for(var De=Math.max(0,Math.ceil((X-Ce)/s)),Ue=Math.min(i.outHeight,(i.inHeight+X-Ce)/s),Be=Ce*y+pe,mt=0;mt<l;++mt)for(var _t=Math.max(0,Math.ceil((de-mt)/a)),$e=Math.min(i.outWidth,(i.inWidth+de-mt)/a),ft=mt*w+Be,st=0;st<i.inChannels;++st)for(var Cn=st*b+ft,Et=0;Et<i.outChannels;++Et){for(var an=0,Jt=0;Jt<i.batchSize;++Jt)for(var er=Jt*N,Kn=Jt*_,Qn=Z;Qn<oe;++Qn)for(var Ra=(J+Qn*o-ce)*Q+er,ka=Qn*E+Kn,No=De;No<Ue;++No)for(var pp=(Ce+No*s-X)*q+Ra,ku=No*I+ka,nl=_t;nl<$e;++nl)an+=O[(mt+nl*a-de)*$+pp+st]*A[nl*P+ku+Et];p[Cn+Et]=an}return f.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var s=e.bias,a=e.activation,u=e.preluActivationWeights,c=this.depthwiseConv2D(e.input,e.filter,e.convInfo);return s&&(c=this.add(c,s)),a&&(c=UI(this,c,a,u)),c},n.prototype.depthwiseConv2D=function(e,r,i){ye([e,r],"depthwiseConv2D");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.padInfo.left,l=i.padInfo.top,f=i.outChannels/i.inChannels,p=lt(i.outShape,e.dtype),g=this.readSync(e.dataId),m=this.readSync(r.dataId),y=p.values,w=0;w<i.batchSize;++w)for(var b=w*e.strides[0],A=w*p.strides[0],C=0;C<i.outHeight;++C)for(var _=A+C*p.strides[1],E=C*i.strideHeight-c,I=0;I<o;++I){var P=E+I*a;if(!(P<0||P>=i.inHeight))for(var O=I*r.strides[0],F=b+P*e.strides[1],N=0;N<i.outWidth;++N)for(var Q=_+N*p.strides[2],q=N*i.strideWidth-l,$=0;$<s;++$){var ce=q+$*u;if(!(ce<0||ce>=i.inWidth))for(var X=F+ce*i.inChannels,J=Q,Z=O+$*r.strides[1],oe=0;oe<i.inChannels;++oe){for(var pe=g[X+oe],Ce=0;Ce<f;++Ce)y[J+Ce]+=pe*m[Z+Ce];J+=f,Z+=f}}}return p.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,r,i){ye([e,r],"depthwiseConv2DDerInput");for(var o=lt(i.inShape,"float32"),s=o.values,a=o.strides,u=a[0],c=a[1],l=a[2],f=this.readSync(e.dataId),p=e.strides,g=p[0],m=p[1],y=p[2],w=this.readSync(r.dataId),b=r.strides,A=b[0],C=b[1],_=b[2],E=i.batchSize,I=i.filterHeight,P=i.filterWidth,O=i.inChannels,F=i.inHeight,N=i.inWidth,q=i.outHeight,$=i.outWidth,ce=i.strideHeight,de=i.strideWidth,X=I-1-i.padInfo.top,J=P-1-i.padInfo.left,Z=i.outChannels/O,oe=0;oe<E;++oe)for(var pe=0;pe<O;++pe)for(var Ce=0;Ce<F;++Ce)for(var De=Ce-X,Ue=Math.max(0,Math.ceil(De/ce)),Be=Math.min(q,(I+De)/ce),mt=0;mt<N;++mt){for(var _t=mt-J,$e=Math.max(0,Math.ceil(_t/de)),ft=Math.min($,(P+_t)/de),st=0,Cn=Ue;Cn<Be;++Cn)for(var Et=Cn*ce-De,an=$e;an<ft;++an)for(var Jt=g*oe+m*Cn+y*an,er=A*(I-1-Et)+C*(P-1-(an*de-_t))+_*pe,Kn=0;Kn<Z;++Kn)st+=f[Jt+(pe*Z+Kn)]*w[er+Kn];s[u*oe+c*Ce+l*mt+pe]=st}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,r,i){ye([e,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=lt(i.filterShape,"float32"),l=i.padInfo.left,f=i.padInfo.top,p=i.outChannels/i.inChannels,g=this.bufferSync(e),m=this.bufferSync(r),y=0;y<a;++y)for(var w=Math.max(0,Math.ceil((f-y)/o)),b=Math.min(i.outHeight,(i.inHeight+f-y)/o),A=0;A<u;++A)for(var C=Math.max(0,Math.ceil((l-A)/s)),_=Math.min(i.outWidth,(i.inWidth+l-A)/s),E=0;E<i.outChannels;++E){for(var I=Math.trunc(E/p),P=E%p,O=0,F=0;F<i.batchSize;++F)for(var N=w;N<b;++N)for(var Q=y+N*o-f,q=C;q<_;++q)O+=g.get(F,Q,A+q*s-l,I)*m.get(F,N,q,E);c.set(O,y,A,I,P)}return c.toTensor()},n.prototype.tile=function(e,r){return ye(e,"tile"),wB(this.bufferSync(e),r)},n.prototype.pad=function(e,r,i){ye(e,"pad");var o=r.map(function(p,g){return p[0]+e.shape[g]+p[1]}),s=r.map(function(p){return p[0]}),a=this.bufferSync(e),u=lt(o,e.dtype);0!==i&&u.values.fill(i);for(var c=0;c<e.size;c++){var l=a.indexToLoc(c),f=l.map(function(p,g){return p+s[g]});u.set.apply(u,[a.get.apply(a,l)].concat(f))}return u.toTensor()},n.prototype.transpose=function(e,r){ye(e,"transpose");for(var i=new Array(e.rank),o=0;o<i.length;o++)i[o]=e.shape[r[o]];var s=this.readSync(e.dataId),a=lt(i,e.dtype),u=this.bufferSync(e);for(o=0;o<e.size;++o){for(var c=u.indexToLoc(o),l=new Array(c.length),f=0;f<l.length;f++)l[f]=c[r[f]];var p=a.locToIndex(l);a.values[p]=s[o]}return a.toTensor()},n.prototype.gather=function(e,r,i){ye([e,r],"gather");var o=e.shape.slice(),s=this.readSync(r.dataId);o[i]=s.length;for(var a=lt(o,e.dtype),u=this.bufferSync(e),c=0;c<a.size;++c){var l=a.indexToLoc(c),f=l.slice();f[i]=s[l[i]];var p=u.locToIndex(f);a.values[c]=u.values[p]}return a.toTensor()},n.prototype.batchToSpaceND=function(e,r,i){ye([e],"batchToSpaceND");var o=r.reduce(function(f,p){return f*p}),s=eA(e.shape,r,o),a=tA(s.length,r.length),u=nA(e.shape,r,o),c=sB(i,r.length),l=aB(u,i,r.length);return e.reshape(s).transpose(a).reshape(u).slice(c,l)},n.prototype.spaceToBatchND=function(e,r,i){ye([e],"spaceToBatchND");var o=r.reduce(function(p,g){return p*g}),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<e.shape.length;++a)s.push([0,0]);var u=e.pad(s),c=eA(u.shape,r,o,!1),l=tA(c.length,r.length,!1),f=nA(u.shape,r,o,!1);return u.reshape(c).transpose(l).reshape(f)},n.prototype.pool=function(e,r,i){ye(e,"pool");for(var o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,g="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),y=lt(r.outShape,e.dtype),w=y.values,b=r.outShape[1]*r.outShape[2]*r.outShape[3],A=r.outShape[2]*r.outShape[3],C=r.outShape[3],_=0;_<r.batchSize;++_)for(var E=_*b,I=_*e.strides[0],P=0;P<r.inChannels;++P)for(var O=0;O<r.outHeight;++O)for(var F=O*o-f,N=Math.max(0,F),Q=Math.min(r.inHeight,c+F),q=E+O*A,$=0;$<r.outWidth;++$){for(var ce=$*s-p,de=Math.max(0,ce),X=Math.min(r.inWidth,l+ce),J=g,Z=0,oe=0,pe=N;pe<Q;pe+=a){for(var Ce=I+pe*e.strides[1],De=de;De<X;De+=u){var Ue=m[Ce+De*e.strides[2]+P];"max"===i&&Ue>J?J=Ue:"avg"===i&&(Z+=Ue,oe++)}if(isNaN(J))break}w[q+$*C+P]="avg"===i?Z/oe:J}return y.toTensor()},n.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},n.prototype.maxPoolPositions=function(e,r){for(var i=lt(r.outShape,"int32"),o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,g=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var y=0;y<r.inChannels;++y)for(var w=0;w<r.outHeight;++w){for(var b=w*o-f,A=b;A<0;)A+=a;for(var C=Math.min(r.inHeight,c+b),_=0;_<r.outWidth;++_){for(var E=_*s-p,I=E;I<0;)I+=u;for(var P=Math.min(r.inWidth,l+E),O=Number.NEGATIVE_INFINITY,F=-1,N=A;N<C;N+=a)for(var Q=N-b,q=I;q<P;q+=u){var $=q-E,ce=g.get(m,N,q,y);ce>O&&(O=ce,F=Q*l+$)}i.set(F,m,w,_,y)}}return i.toTensor()},n.prototype.maxPoolBackprop=function(e,r,i,o){ye([r,i],"maxPoolBackprop");for(var s=this.maxPoolPositions(r,o),a=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,l=o.dilationWidth,f=o.effectiveFilterHeight,p=o.effectiveFilterWidth,g=p-1-o.padInfo.left,m=f-1-o.padInfo.top,y=lt(r.shape,"float32"),w=this.bufferSync(s),b=this.bufferSync(e),A=0;A<o.batchSize;++A)for(var C=0;C<o.inChannels;++C)for(var _=0;_<o.inHeight;++_)for(var E=0;E<o.inWidth;++E){for(var I=_-m,P=E-g,O=0,F=0;F<f;F+=c){var N=(I+F)/a;if(!(N<0||N>=o.outHeight||Math.floor(N)!==N))for(var Q=0;Q<p;Q+=l){var q=(P+Q)/u;if(!(q<0||q>=o.outWidth||Math.floor(q)!==q)){var $=f*p-1-w.get(A,N,q,C)===F*p+Q?1:0;0!==$&&(O+=b.get(A,N,q,C)*$)}}}y.set(O,A,_,E,C)}return y.toTensor()},n.prototype.avgPoolBackprop=function(e,r,i){ye([e,r],"avgPoolBackprop");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=i.dilationHeight,l=i.dilationWidth,f=i.effectiveFilterHeight,p=i.effectiveFilterWidth,g=p-1-i.padInfo.left,m=f-1-i.padInfo.top,y=lt(r.shape,"float32"),w=1/(a*u),b=this.bufferSync(e),A=0;A<i.batchSize;++A)for(var C=0;C<i.inChannels;++C)for(var _=0;_<i.inHeight;++_)for(var E=0;E<i.inWidth;++E){for(var I=_-m,P=E-g,O=0,F=0;F<f;F+=c){var N=(I+F)/o;if(!(N<0||N>=i.outHeight||Math.floor(N)!==N))for(var Q=0;Q<p;Q+=l){var q=(P+Q)/s;q<0||q>=i.outWidth||Math.floor(q)!==q||(O+=b.get(A,N,q,C))}}y.set(O*w,A,_,E,C)}return y.toTensor()},n.prototype.pool3d=function(e,r,i){ye(e,"pool3d");for(var o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,g=r.effectiveFilterWidth,m=r.padInfo.front,y=r.padInfo.top,w=r.padInfo.left,b="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=this.readSync(e.dataId),C=lt(r.outShape,e.dtype),_=C.values,E=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],I=r.outShape[2]*r.outShape[3]*r.outShape[4],P=r.outShape[3]*r.outShape[4],O=r.outShape[4],F=0;F<r.batchSize;++F)for(var N=F*E,Q=F*e.strides[0],q=0;q<r.inChannels;++q)for(var $=0;$<r.outDepth;++$){for(var ce=$*o-m,de=ce;de<0;)de+=u;for(var X=Math.min(r.inDepth,f+ce),J=N+$*I,Z=0;Z<r.outHeight;++Z){for(var oe=Z*s-y,pe=oe;pe<0;)pe+=c;for(var Ce=Math.min(r.inHeight,p+oe),De=J+Z*P,Ue=0;Ue<r.outWidth;++Ue){for(var Be=Ue*a-w,mt=Be;mt<0;)mt+=l;for(var _t=Math.min(r.inWidth,g+Be),$e=De+Ue*O,ft=b,st=0,Cn=0,Et=de;Et<X;Et+=u){for(var an=Q+Et*e.strides[1],Jt=pe;Jt<Ce;Jt+=c){for(var er=an+Jt*e.strides[2],Kn=mt;Kn<_t;Kn+=l){var Qn=A[er+Kn*e.strides[3]+q];if("max"===i&&Qn>ft?ft=Qn:"avg"===i&&(st+=Qn,Cn++),isNaN(ft))break}if(isNaN(ft))break}if(isNaN(ft))break}_[$e+q]="avg"===i?st/Cn:ft}}}return C.toTensor()},n.prototype.avgPool3d=function(e,r){return ye(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,r,i){ye([e,r],"avgPool3dBackprop");for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,u=i.filterDepth,c=i.filterHeight,l=i.filterWidth,f=i.dilationDepth,p=i.dilationHeight,g=i.dilationWidth,m=i.effectiveFilterDepth,y=i.effectiveFilterHeight,w=i.effectiveFilterWidth,b=m-1-i.padInfo.front,A=w-1-i.padInfo.left,C=y-1-i.padInfo.top,_=lt(r.shape,"float32"),E=1/(u*c*l),I=this.bufferSync(e),P=0;P<i.batchSize;++P)for(var O=0;O<i.inChannels;++O)for(var F=0;F<i.inDepth;++F)for(var N=0;N<i.inHeight;++N)for(var Q=0;Q<i.inWidth;++Q){for(var q=F-b,$=N-C,ce=Q-A,de=0,X=0;X<m;X+=f){var J=(q+X)/o;if(!(J<0||J>=i.outDepth||Math.floor(J)!==J))for(var Z=0;Z<y;Z+=p){var oe=($+Z)/s;if(!(oe<0||oe>=i.outHeight||Math.floor(oe)!==oe))for(var pe=0;pe<w;pe+=g){var Ce=(ce+pe)/a;Ce<0||Ce>=i.outWidth||Math.floor(Ce)!==Ce||(de+=I.get(P,J,oe,Ce,O))}}}_.set(de*E,P,F,N,Q,O)}return _.toTensor()},n.prototype.maxPool3d=function(e,r){return ye(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,r){for(var i=lt(r.outShape,"int32"),o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,g=r.effectiveFilterWidth,m=r.padInfo.front,y=r.padInfo.top,w=r.padInfo.left,b=this.bufferSync(e),A=0;A<r.batchSize;++A)for(var C=0;C<r.inChannels;++C)for(var _=0;_<r.outDepth;++_){for(var E=_*o-m,I=E;I<0;)I+=u;for(var P=Math.min(r.inDepth,f+E),O=0;O<r.outHeight;++O){for(var F=O*s-y,N=F;N<0;)N+=c;for(var Q=Math.min(r.inHeight,p+F),q=0;q<r.outWidth;++q){for(var $=q*a-w,ce=$;ce<0;)ce+=l;for(var de=Math.min(r.inWidth,g+$),X=Number.NEGATIVE_INFINITY,J=-1,Z=I;Z<P;Z+=u)for(var oe=Z-E,pe=N;pe<Q;pe+=c)for(var Ce=pe-F,De=ce;De<de;De+=l){var Ue=De-$,Be=b.get(A,Z,pe,De,C);Be>=X&&(X=Be,J=oe*p*g+Ce*p+Ue)}i.set(J,A,_,O,q,C)}}}return i.toTensor()},n.prototype.maxPool3dBackprop=function(e,r,i,o){ye([r,i],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(r,o),a=o.strideDepth,u=o.strideHeight,c=o.strideWidth,l=o.dilationDepth,f=o.dilationHeight,p=o.dilationWidth,g=o.effectiveFilterDepth,m=o.effectiveFilterHeight,y=o.effectiveFilterWidth,w=g-1-o.padInfo.front,b=y-1-o.padInfo.left,A=m-1-o.padInfo.top,C=lt(r.shape,"float32"),_=this.bufferSync(s),E=this.bufferSync(e),I=0;I<o.batchSize;++I)for(var P=0;P<o.inChannels;++P)for(var O=0;O<o.inDepth;++O)for(var F=0;F<o.inHeight;++F)for(var N=0;N<o.inWidth;++N){for(var Q=O-w,q=F-A,$=N-b,ce=0,de=0;de<g;de+=l){var X=(Q+de)/a;if(!(X<0||X>=o.outDepth||Math.floor(X)!==X))for(var J=0;J<m;J+=f){var Z=(q+J)/u;if(!(Z<0||Z>=o.outHeight||Math.floor(Z)!==Z))for(var oe=0;oe<y;oe+=p){var pe=($+oe)/c;if(!(pe<0||pe>=o.outWidth||Math.floor(pe)!==pe)){var Ce=g*m*y-1-_.get(I,X,Z,pe,P)===de*m*y+J*y+oe?1:0;0!==Ce&&(ce+=E.get(I,X,Z,pe,P)*Ce)}}}}C.set(ce,I,O,F,N,P)}return C.toTensor()},n.prototype.cast=function(e,r){return uI(e,r,this)},n.prototype.reshape=function(e,r){return cA(e,r)},n.prototype.avgPool=function(e,r){return ye(e,"avgPool"),this.pool(e,r,"avg").toFloat()},n.prototype.resizeBilinear=function(e,r,i,o){ye(e,"resizeBilinear");for(var s=e.shape,a=s[0],u=s[1],c=s[2],l=s[3],f=this.readSync(e.dataId),p=new Float32Array(Le([a,r,i,l])),g=[o&&r>1?u-1:u,o&&i>1?c-1:c],m=[o&&r>1?r-1:r,o&&i>1?i-1:i],y=0,w=g[0]/m[0],b=g[1]/m[1],A=0;A<a;A++)for(var C=0;C<r;C++)for(var _=w*C,E=Math.floor(_),I=_-E,P=Math.min(u-1,Math.ceil(_)),O=A*e.strides[0]+E*e.strides[1],F=A*e.strides[0]+P*e.strides[1],N=0;N<i;N++)for(var Q=b*N,q=Math.floor(Q),$=Q-q,ce=Math.min(c-1,Math.ceil(Q)),de=O+q*e.strides[2],X=F+q*e.strides[2],J=O+ce*e.strides[2],Z=F+ce*e.strides[2],oe=0;oe<l;oe++){var pe=f[de+oe],Ce=f[X+oe],De=pe+(f[J+oe]-pe)*$;p[y++]=De+(Ce+(f[Z+oe]-Ce)*$-De)*I}return ti(p,[a,r,i,l])},n.prototype.resizeBilinearBackprop=function(e,r,i){ye([e,r],"resizeBilinearBackprop");for(var o=r.shape,s=o[0],a=o[1],u=o[2],c=o[3],l=e.shape,f=l[1],p=l[2],g=new Float32Array(s*a*u*c),m=[i&&f>1?a-1:a,i&&p>1?u-1:u],y=[i&&f>1?f-1:f,i&&p>1?p-1:p],w=m[0]/y[0],b=m[1]/y[1],A=this.readSync(e.dataId),C=0,_=0;_<s;_++)for(var E=_*r.strides[0],I=0;I<f;I++)for(var P=I*w,O=Math.floor(P),F=Math.min(Math.ceil(P),a-1),N=E+O*r.strides[1],Q=E+F*r.strides[1],q=P-O,$=1-q,ce=0;ce<p;ce++)for(var de=ce*b,X=Math.floor(de),J=Math.min(Math.ceil(de),u-1),Z=de-X,oe=1-Z,pe=N+X*r.strides[2],Ce=N+J*r.strides[2],De=Q+X*r.strides[2],Ue=Q+J*r.strides[2],Be=$*oe,mt=$*Z,_t=q*oe,$e=q*Z,ft=0;ft<c;ft++){var st=A[C++];g[pe+ft]+=st*Be,g[Ce+ft]+=st*mt,g[De+ft]+=st*_t,g[Ue+ft]+=st*$e}return so(g,[s,u,a,c],r.dtype)},n.prototype.resizeNearestNeighbor=function(e,r,i,o){ye(e,"resizeNearestNeighbor");for(var s=e.shape,a=s[0],u=s[1],c=s[2],l=s[3],f=this.readSync(e.dataId),p=new Float32Array(a*r*i*l),g=[o&&r>1?u-1:u,o&&i>1?c-1:c],m=[o&&r>1?r-1:r,o&&i>1?i-1:i],y=g[0]/m[0],w=g[1]/m[1],b=0,A=0;A<a;A++)for(var C=A*e.strides[0],_=0;_<r;_++)for(var E=y*_,I=C+Math.min(u-1,o?Math.round(E):Math.floor(E))*e.strides[1],P=0;P<i;P++)for(var O=w*P,F=I+Math.min(c-1,o?Math.round(O):Math.floor(O))*e.strides[2],N=0;N<l;N++)p[b++]=f[F+N];return ti(p,[a,r,i,l],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,r,i){ye([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,s=o[0],a=o[1],u=o[2],c=o[3],l=e.shape,f=l[1],p=l[2],g=new Float32Array(s*a*u*c),m=this.readSync(e.dataId),y=[i&&f>1?a-1:a,i&&p>1?u-1:u],w=[i&&f>1?f-1:f,i&&p>1?p-1:p],b=y[0]/w[0],A=y[1]/w[1],C=1/b,_=1/A,E=2*Math.ceil(C)+2,I=2*Math.ceil(_)+2,P=0;P<s;P++)for(var O=P*r.strides[0],F=0;F<a;F++)for(var N=O+F*r.strides[1],Q=Math.floor(F*C),q=Math.floor(Q-E/2),$=0;$<u;$++)for(var ce=N+$*r.strides[2],de=Math.floor($*_),X=Math.floor(de-I/2),J=0;J<c;J++){for(var Z=0,oe=0;oe<E;oe++){var pe=oe+q;if(!(pe<0||pe>=f)){var Ce=O+pe*e.strides[1],De=pe*b;if(F===Math.min(a-1,i?Math.round(De):Math.floor(De)))for(var Ue=0;Ue<I;Ue++){var Be=Ue+X;if(!(Be<0||Be>=p)){var mt=Ce+Be*e.strides[2],_t=Be*A;$===Math.min(u-1,i?Math.round(_t):Math.floor(_t))&&(Z+=m[mt+J])}}}}g[ce+J]=Z}return so(g,r.shape,r.dtype)},n.prototype.batchNormalization=function(e,r,i,o,s,a){ye([e,r,i,s,a],"batchNorm");for(var u=this.readSync(e.dataId),c=this.readSync(r.dataId),l=this.readSync(i.dataId),f=s?this.readSync(s.dataId):new Float32Array([1]),p=a?this.readSync(a.dataId):new Float32Array([0]),g=new Float32Array(u.length),m=p.length,y=f.length,w=l.length,b=c.length,A=0,C=0,_=0,E=0,I=0;I<u.length;++I)g[I]=p[A++]+(u[I]-c[C++])*f[_++]/Math.sqrt(l[E++]+o),A>=m&&(A=0),C>=b&&(C=0),_>=y&&(_=0),E>=w&&(E=0);return so(g,e.shape)},n.prototype.localResponseNormalization4D=function(e,r,i,o,s){ye(e,"localResponseNormalization4D");var a=e.shape[3],u=a-1,c=this.readSync(e.dataId),l=e.size,f=new Float32Array(l);function p(w){for(var b=w%a,A=w-b+Math.max(0,b-r),C=w-b+Math.min(b+r,u),_=0;A<=C;A++){var E=c[A];_+=E*E}return _}for(var g=0;g<l;g++){var m=p(g),y=c[g]*Math.pow(i+o*m,-s);f[g]=y}return so(f,e.shape)},n.prototype.LRNGrad=function(e,r,i,o,s,a,u){ye(e,"LRNGrad");for(var c=e.shape[3],l=this.readSync(e.dataId),f=this.readSync(r.dataId),p=this.readSync(i.dataId),g=new Float32Array(e.size),m=e.size,y=0;y<m;y++){for(var w=y%c,b=y-w+Math.max(0,w-o),A=y-w+Math.min(c,w+o+1),C=0,_=b;_<A;_++)C+=Math.pow(f[_],2);for(C=a*C+s,_=b;_<A;_++){var E=-2*a*u*f[_]*p[y]/C;y===_&&(E+=Math.pow(C,-u)),g[_]+=E*=l[y]}}return so(g,e.shape)},n.prototype.multinomial=function(e,r,i,o){ye(e,"multinomial");for(var s=r?e:Cu(e),a=s.shape[0],u=s.shape[1],c=Tn([a,i],"int32"),l=this.readSync(c.dataId),f=this.readSync(s.dataId),p=0;p<a;++p){var g=p*u,m=new Float32Array(u-1);m[0]=f[g];for(var y=1;y<m.length;++y)m[y]=m[y-1]+f[g+y];for(var w=$b(o.toString()),b=p*i,A=0;A<i;++A){var C=w();l[b+A]=m.length;for(var _=0;_<m.length;_++)if(C<m[_]){l[b+A]=_;break}}}return c},n.prototype.oneHot=function(e,r,i,o){ye(e,"oneHot");var s=new Float32Array(e.size*r);s.fill(o);for(var a=this.readSync(e.dataId),u=0;u<e.size;++u)a[u]>=0&&a[u]<r&&(s[u*r+a[u]]=i);return Hc(s,[e.size,r],"int32")},n.prototype.nonMaxSuppression=function(e,r,i,o,s){return ye(e,"nonMaxSuppression"),dI(this.readSync(e.dataId),this.readSync(r.dataId),i,o,s)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,r){for(var i=e.shape[0],o=e.shape[1],s=lt(e.shape,"float32"),a=lt(e.shape,"float32"),u=ts(e).as2D(i,o),c=wa(e).as2D(i,o),l=0;l<i;l++)for(var f=u.slice([l,0],[1,o]),p=c.slice([l,0],[1,o]),g=ei(f,p),m=this.readSync(this.fftImpl(g,r).dataId),y=0;y<o;y++){var w=gB(m,y);s.values[l*o+y]=w.real,a.values[l*o+y]=w.imag}return ei(s.toTensor(),a.toTensor()).as2D(i,o)},n.prototype.fftImpl=function(e,r){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var s=this.fftRadix2(i,o,r).as2D(e.shape[0],e.shape[1]);return r&&(s=ei(ts(s).div(Ee(o)),wa(s).div(Ee(o)))),s}var a=this.readSync(e.dataId),u=function(c){for(var l=new Float32Array(c.length/2),f=new Float32Array(c.length/2),p=0;p<c.length;p+=2)l[p/2]=c[p],f[p/2]=c[p+1];return{real:l,imag:f}}(this.fourierTransformByMatmul(a,o,r));return ei(u.real,u.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return!(e&e-1)},n.prototype.fftRadix2=function(e,r,i){if(1===r)return e;var o=this.readSync(e.dataId),s=r/2,a=function(b){for(var A=Math.ceil(b.length/4),C=new Float32Array(A),_=new Float32Array(A),E=0;E<b.length;E+=4)C[Math.floor(E/4)]=b[E],_[Math.floor(E/4)]=b[E+1];return{real:C,imag:_}}(o),u=ei(a.real,a.imag).as1D(),c=function(b){for(var A=Math.floor(b.length/4),C=new Float32Array(A),_=new Float32Array(A),E=2;E<b.length;E+=4)C[Math.floor(E/4)]=b[E],_[Math.floor(E/4)]=b[E+1];return{real:C,imag:_}}(o),l=ei(c.real,c.imag).as1D();u=this.fftRadix2(u,s,i),l=this.fftRadix2(l,s,i);var f=function(b,A){for(var C=new Float32Array(b/2),_=new Float32Array(b/2),E=0;E<Math.ceil(b/2);E++){var I=(A?2:-2)*Math.PI*(E/b);C[E]=Math.cos(I),_[E]=Math.sin(I)}return{real:C,imag:_}}(r,i),p=ei(f.real,f.imag).mul(l),g=u.add(p),m=u.sub(p),y=ts(g).concat(ts(m)),w=wa(g).concat(wa(m));return ei(y,w).as1D()},n.prototype.fourierTransformByMatmul=function(e,r,i){for(var o=new Float32Array(2*r),s=0;s<r;s++){for(var a=0,u=0,c=0;c<r;c++){var l=rX(s*c,r,i),f=gB(e,c);a+=f.real*l.real-f.imag*l.imag,u+=f.real*l.imag+f.imag*l.real}i&&(a/=r,u/=r),nX(o,a,u,s)}return o},n.prototype.depthToSpace=function(e,r,i){k("NHWC"===i,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),k(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=e.shape[0],s=e.shape[1],a=e.shape[2],u=e.shape[3],c=s*r,l=a*r,f=u/(r*r),p=this.readSync(e.dataId),g=new Float32Array(o*c*l*f),m=0,y=0;y<o;++y)for(var w=0;w<c;++w)for(var b=Math.floor(w/r),A=w%r,C=0;C<l;++C)for(var _=Math.floor(C/r),E=(A*r+C%r)*f,I=0;I<f;++I)g[m++]=p[I+E+u*(_+a*(b+s*y))];return so(g,[o,c,l,f])},n.prototype.broadcastedBinaryOp=function(e,r,i,o){var s=St(e.shape,r.shape),a=lt(s,i),u=this.readSync(e.dataId),c=this.readSync(r.dataId),l=_u(e.shape,s),f=_u(r.shape,s),p=a.values;if(l.length+f.length===0)for(var g=0;g<p.length;++g)p[g]=o(u[g%u.length],c[g%c.length]);else{var m=this.bufferSync(e),y=this.bufferSync(r),w=function(b){var A=a.indexToLoc(b),C=A.slice(-e.rank);l.forEach(function(P){return C[P]=0});var _=m.locToIndex(C),E=A.slice(-r.rank);f.forEach(function(P){return E[P]=0});var I=y.locToIndex(E);p[b]=o(u[_],c[I])};for(g=0;g<p.length;++g)w(g)}return a.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,r,i){var o=St(e.shape,r.shape),s=lt(o,"float32"),a=lt(o,"float32"),u=this.readSync(e.dataId),c=this.readSync(r.dataId),l=_u(e.shape,o),f=_u(r.shape,o),p=s.values,g=a.values;if(l.length+f.length===0)for(var m=0;m<p.length;m++){var y=m%u.length,w=m%c.length,b=i(u[2*y],u[2*y+1],c[2*w],c[2*w+1]);p[m]=b.real,g[m]=b.imag}else{var A=this.bufferSync(this.data.get(e.dataId).complexTensors.real),C=this.bufferSync(this.data.get(r.dataId).complexTensors.real),_=function(E){var I=s.indexToLoc(E),P=I.slice(-e.rank);l.forEach(function(q){return P[q]=0});var O=A.locToIndex(P),F=I.slice(-r.rank);f.forEach(function(q){return F[q]=0});var N=C.locToIndex(F),Q=i(u[2*O],u[2*O+1],c[2*N],c[2*N+1]);p[E]=Q.real,g[E]=Q.imag};for(m=0;m<p.length;m++)_(m)}return this.complex(s.toTensor(),a.toTensor())},n.prototype.split=function(e,r,i){return yB(e,r,i)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,r,i,o,s,a){for(var u=e.shape,c=u[0],l=u[1],f=u[2],p=u[3],g=r.shape[0],m=o[0],y=o[1],w=lt([g,m,y,p],"float32"),b=this.readSync(r.dataId),A=this.readSync(i.dataId),C=this.readSync(e.dataId),_=e.strides,E=w.strides,I=0;I<g;I++){var P=4*I,O=b[P],F=b[P+1],N=b[P+2],Q=b[P+3],q=A[I];if(!(q>=c))for(var $=m>1?(N-O)*(l-1)/(m-1):0,ce=y>1?(Q-F)*(f-1)/(y-1):0,de=0;de<m;de++){var X=m>1?O*(l-1)+de*$:.5*(O+N)*(l-1);if(X<0||X>l-1)for(var J=0;J<y;J++)for(var Z=0;Z<p;Z++){var oe=Z+J*E[2]+de*E[1]+I*E[0];w.values[oe]=a}else if("bilinear"===s){var pe=Math.floor(X),Ce=Math.ceil(X),De=X-pe;for(J=0;J<y;J++)if((Et=y>1?F*(f-1)+J*ce:.5*(F+Q)*(f-1))<0||Et>f-1)for(Z=0;Z<p;Z++)w.values[oe=Z+J*E[2]+de*E[1]+I*E[0]]=a;else{var Ue=Math.floor(Et),Be=Math.ceil(Et),mt=Et-Ue;for(Z=0;Z<p;Z++){var _t=C[oe=Z+Ue*_[2]+pe*_[1]+q*_[0]],$e=C[oe=Z+Be*_[2]+pe*_[1]+q*_[0]],ft=C[oe=Z+Ue*_[2]+Ce*_[1]+q*_[0]],st=_t+($e-_t)*mt,Cn=ft+(C[oe=Z+Be*_[2]+Ce*_[1]+q*_[0]]-ft)*mt;w.values[oe=Z+J*E[2]+de*E[1]+I*E[0]]=st+(Cn-st)*De}}}else for(J=0;J<y;++J){var Et;if((Et=y>1?F*(f-1)+J*ce:.5*(F+Q)*(f-1))<0||Et>f-1)for(Z=0;Z<p;Z++)w.values[oe=Z+J*E[2]+de*E[1]+I*E[0]]=a;else{var an=Math.round(Et),Jt=Math.round(X);for(Z=0;Z<p;Z++)w.values[Z+J*E[2]+de*E[1]+I*E[0]]=C[Z+an*_[2]+Jt*_[1]+q*_[0]]}}}}return w.toTensor()},n.prototype.sparseToDense=function(e,r,i,o){var s=gv(0,e,i);return this.scatter(e,r,i,s.outputSize,s.sliceSize,s.numUpdates,s.sliceRank,s.strides,o,!1)},n.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],s=tI(e,r),a=s[0],u=s[1],c=s[2],l=s[3];if(0===u)return ti([],a,e.dtype);for(var f=new ov([u,c],e.dtype),p=this.readSync(r.dataId),g=this.readSync(e.dataId),m=0;m<u;m++){for(var y=[],w=0,b=0;b<o;b++){var A=p[m*o+b];w+=A*l[b],y.push(A)}if(w<0||w>=e.size/c)throw new Error("Invalid indices: "+y+" does not index into "+e.shape);for(var C=0;C<c;C++)f.values[m*c+C]=g[w*c+C]}return f.toTensor().reshape(a)},n.prototype.scatterND=function(e,r,i){var o=gv(0,e,i),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,c=o.strides,l=o.outputSize,f=Ee(0);return this.scatter(e,r,i,l,u,a,s,c,f,!0)},n.prototype.fill=function(e,r,i){var o=ev(i=i||Gh(r),Le(e));return o.fill(r),V.makeTensor(o,e,i,this)},n.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var r=ev(e.dtype,Le(e.shape));return this.makeOutput(r,e.shape,e.dtype)},n.prototype.linspace=function(e,r,i){return cI(e,r,i)},n.prototype.scatter=function(e,r,i,o,s,a,u,c,l,f){var p=[o/s,s],g=this.readSync(e.dataId),m=this.readSync(r.dataId);if(0===o)return ti([],i,r.dtype);var y=new ov(p,r.dtype);y.values.fill(this.readSync(l.dataId)[0]);for(var w=0;w<a;w++){for(var b=[],A=0,C=0;C<u;C++){var _=g[w*u+C];b.push(_),A+=_*c[C]}if(A<0||A>=o/s)throw new Error("Invalid indices: "+b+" does not index into "+i);for(var E=0;E<s;E++)f?y.values[A*s+E]+=m[w*s+E]:y.values[A*s+E]=0===r.rank?m[0]:m[w*s+E]}return y.toTensor().reshape(i)},n}(pB);V.registerBackend("cpu",function(){return new see},1);for(var jI=0,QL=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,r=t.attrs,o=n.boxes,s=n.scores,u=r.maxOutputSize,c=r.iouThreshold,l=r.scoreThreshold,f=r.softNmsSigma,p=t.backend;ye(o,"NonMaxSuppressionWithScore");var g=fI(p.data.get(o.dataId).values,p.data.get(s.dataId).values,u,c,l,f);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var r=t.inputs.x,i=t.backend;ye(r,"square");for(var o=i.data.get(r.dataId).values,s=new Float32Array(o.length),a=0;a<o.length;++a){var u=o[a];s[a]=u*u}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Av,backendName:"cpu",kernelFunc:function(t){var n=t.inputs,i=n.a,o=n.b,s=t.backend;ye([i,o],Av);var a=s.data.get(i.dataId).values,u=s.data.get(o.dataId).values,c=function(p,g,m,y,w,b){var A=St(p,g),C=A.length,_=Ls(A),E=qh(w,Le(A)),I=p.length,P=g.length,O=Ls(p),F=Ls(g),N=_u(p,A),Q=_u(g,A);if(N.length+Q.length===0)for(var q=0;q<E.length;++q)E[q]=b(m[q%m.length],y[q%y.length]);else{var $=function(ce){var de=v3(ce,C,_),X=de.slice(-I);N.forEach(function(pe){return X[pe]=0});var J=ND(X,I,O),Z=de.slice(-P);Q.forEach(function(pe){return Z[pe]=0});var oe=ND(Z,P,F);E[ce]=b(m[J],y[oe])};for(q=0;q<E.length;++q)$(q)}return[E,A]}(i.shape,o.shape,a,u,i.dtype,function(p,g){var m=p-g;return m*m}),f=c[1];return{dataId:s.write(c[0],f,i.dtype),shape:f,dtype:i.dtype}}}];jI<QL.length;jI++)o3(QL[jI]);for(var rp,aee=function(t){this.variableNames=["A"];var n=wi(),e=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+e+".0);\n\n        vec4 values = "+n.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},uee=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=wi(),e=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+e+".0);\n            vec4 values = "+n.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+n.output+" = result;\n      }\n    "},zI=0,YL=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.backend,i=t.inputs.pixels,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=u[0],l=u[1],f=[l,c],p=[l,c,t.attrs.numChannels];(a||s)&&(null==rp&&(rp=document.createElement("canvas").getContext("2d")),rp.canvas.width=c,rp.canvas.height=l,rp.drawImage(i,0,0,c,l),i=rp.canvas);var g=e.makeTensorInfo(f,"int32");e.texData.get(g.dataId).usage=Do.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(g.dataId),i);var m=ue().getBool("WEBGL_PACK")?new uee(p):new aee(p),y=e.runWebGLProgram(m,[g],"int32");return e.disposeData(g.dataId),y}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs;Xb("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var s=n.scores,u=r.maxOutputSize,c=r.iouThreshold,l=r.scoreThreshold,f=r.softNmsSigma,p=e,g=fI(p.readSync(n.boxes.dataId),p.readSync(s.dataId),u,c,l,f);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var r=t.inputs.x,i=t.backend,o=new yt(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Av,backendName:"webgl",kernelFunc:function(t){var n=t.inputs,i=n.a,o=n.b,s=t.backend,a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eu("return (a - b) * (a - b);",i.shape,o.shape):new $n("return (a - b) * (a - b);",i.shape,o.shape);return s.compileAndRun(a,[i,o])}}];zI<YL.length;zI++)o3(YL[zI]);for(var VI=0,XL=[{kernelName:"Square",gradFunc:function(t,n){var e=n[0];return{x:function(){return t.mul(e.toFloat().mul(2))}}}},{kernelName:Av,gradFunc:function(t,n){var e=n[0],r=n[1],i=Ee(2);return{a:function(){return bi(t,bi(i,Lr(e,r)))},b:function(){return bi(t,bi(i,Lr(r,e)))}}}}];VI<XL.length;VI++)dY(XL[VI]);var cee=function(){function t(){}return t.prototype.fetch=function(n,e){return fetch(n,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(n,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},t}();ue().get("IS_BROWSER")&&ue().setPlatform("browser",new cee);var WI,dee=function(){function t(){this.util=Oa(745),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(n,e){return null!=ue().global.fetch?ue().global.fetch(n,e):(null==WI&&(WI=Oa(318)),WI(n,e))},t.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},t.prototype.encode=function(n,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return 0===n.length?"":new this.util.TextDecoder(e).decode(n)},t}();ue().get("IS_NODE")&&ue().setPlatform("node",new dee);var HI={float32:4,int32:4,uint16:2,uint8:1,bool:1},_A=4;function JL(t,n){for(var e={},r=0,i=function(a){var u=a.name,c=a.dtype,l=a.shape,f=Le(l),p=void 0;if("quantization"in a){var g=a.quantization;if("uint8"!==g.dtype&&"uint16"!==g.dtype)throw new Error("Weight "+a.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var m=HI[g.dtype],y=t.slice(r,r+f*m),w="uint8"===g.dtype?new Uint8Array(y):new Uint16Array(y);if("float32"===c)p=Float32Array.from(w,function(I){return I*g.scale+g.min});else{if("int32"!==c)throw new Error("Unsupported dtype in weight '"+u+"': "+c);p=Int32Array.from(w,function(I){return Math.round(I*g.scale+g.min)})}r+=f*m}else if("string"===c){var b=Le(a.shape);p=[];for(var A=0;A<b;A++){var C=new Uint32Array(t.slice(r,r+_A))[0];r+=_A;var _=new Uint8Array(t.slice(r,r+C));p.push(_),r+=C}}else{var E=HI[c];if(y=t.slice(r,r+f*E),"float32"===c)p=new Float32Array(y);else if("int32"===c)p=new Int32Array(y);else{if("bool"!==c)throw new Error("Unsupported dtype in weight '"+u+"': "+c);p=new Uint8Array(y)}r+=f*E}e[u]=ti(p,l,c)},o=0,s=n;o<s.length;o++)i(s[o]);return e}function fee(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var n=0,e=[];t.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(n),i=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var qI=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function ZL(t){return qI?Buffer.byteLength(t):new Blob([t]).size}function GI(t){var n=0;t.forEach(function(i){n+=i.byteLength});var e=new Uint8Array(n),r=0;return t.forEach(function(i){e.set(new Uint8Array(i),r),r+=i.byteLength}),e.buffer}function $L(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var n=t.split("/");return n[n.length-1]}function Ev(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:ZL(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:ZL(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var Mo=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(n){t.getInstance().saveRouters.push(n)},t.registerLoadRouter=function(n){t.getInstance().loadRouters.push(n)},t.getSaveHandlers=function(n){return t.getHandlers(n,"save")},t.getLoadHandlers=function(n,e){return t.getHandlers(n,"load",e)},t.getHandlers=function(n,e,r){var i=[];return("load"===e?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var s=o(n,r);null!==s&&i.push(s)}),i},t}(),ip="://",Kc=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(n,e){k(null!=n,function(){return"scheme must not be undefined or null."}),n.endsWith(ip)&&(n=n.slice(0,n.indexOf(ip))),k(n.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();k(null==r.managers[n],function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=e},t.getManager=function(n){var e=this.getInstance().managers[n];if(null==e)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function EA(t){if(-1===t.indexOf(ip))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Kc.getSchemes().join(","));return{scheme:t.split(ip)[0],path:t.split(ip)[1]}}function e4(t,n,e){return void 0===e&&(e=!1),Pe(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,f;return Oe(this,function(p){switch(p.label){case 0:return k(t!==n,function(){return"Old path and new path are the same: '"+t+"'"}),k((r=Mo.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),k(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],k((o=Mo.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),k(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),s=o[0],a=EA(t).scheme,u=EA(t).path,c=a===EA(t).scheme,[4,i.load()];case 1:return l=p.sent(),e&&c?[4,Kc.getManager(a).removeModel(u)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[4,s.save(l)];case 4:return f=p.sent(),!e||c?[3,6]:[4,Kc.getManager(a).removeModel(u)];case 5:p.sent(),p.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var Ed="models_store",Qc="model_info_store";function t4(){if(!ue().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==n)throw new Error("The current browser does not appear to support IndexedDB.");return n}function KI(t){var n=t.result;n.createObjectStore(Ed,{keyPath:"modelPath"}),n.createObjectStore(Qc,{keyPath:"modelPath"})}var op=function(){function t(n){if(this.indexedDB=t4(),null==n||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return t.prototype.save=function(n){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},t.prototype.load=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(n,e){var r=this;return new Promise(function(i,o){var s=r.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return KI(s)},s.onsuccess=function(){var a=s.result;if(null==e){var u=a.transaction(Ed,"readonly"),c=u.objectStore(Ed).get(r.modelPath);c.onsuccess=function(){if(null==c.result)return a.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(c.result.modelArtifacts)},c.onerror=function(y){return a.close(),o(c.error)},u.oncomplete=function(){return a.close()}}else{var l,f=Ev(e),p=a.transaction(Qc,"readwrite"),g=p.objectStore(Qc),m=g.put({modelPath:r.modelPath,modelArtifactsInfo:f});m.onsuccess=function(){var y=(l=a.transaction(Ed,"readwrite")).objectStore(Ed).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:f});y.onsuccess=function(){return i({modelArtifactsInfo:f})},y.onerror=function(w){var b=(g=p.objectStore(Qc)).delete(r.modelPath);b.onsuccess=function(){return a.close(),o(y.error)},b.onerror=function(A){return a.close(),o(y.error)}}},m.onerror=function(y){return a.close(),o(m.error)},p.oncomplete=function(){null==l?a.close():l.oncomplete=function(){return a.close()}}}},s.onerror=function(a){return o(s.error)}})},t.URL_SCHEME="indexeddb://",t}(),n4=function(t){return ue().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(op.URL_SCHEME)?(n=t.slice(op.URL_SCHEME.length),new op(n)):null;var n};Mo.registerSaveRouter(n4),Mo.registerLoadRouter(n4);var hee=function(){function t(){this.indexedDB=t4()}return t.prototype.listModels=function(){return Pe(this,void 0,void 0,function(){var n=this;return Oe(this,function(e){return[2,new Promise(function(r,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return KI(o)},o.onsuccess=function(){var s=o.result,a=s.transaction(Qc,"readonly"),u=a.objectStore(Qc).getAll();u.onsuccess=function(){for(var c={},l=0,f=u.result;l<f.length;l++){var p=f[l];c[p.modelPath]=p.modelArtifactsInfo}r(c)},u.onerror=function(c){return s.close(),i(u.error)},a.oncomplete=function(){return s.close()}},o.onerror=function(s){return i(o.error)}})]})})},t.prototype.removeModel=function(n){return Pe(this,void 0,void 0,function(){var e=this;return Oe(this,function(r){var i;return n=(i=n).startsWith(op.URL_SCHEME)?i.slice(op.URL_SCHEME.length):i,[2,new Promise(function(o,s){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return KI(a)},a.onsuccess=function(){var u,c=a.result,l=c.transaction(Qc,"readwrite"),f=l.objectStore(Qc),p=f.get(n);p.onsuccess=function(){if(null==p.result)return c.close(),s(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var g=f.delete(n),m=function(){var y=(u=c.transaction(Ed,"readwrite")).objectStore(Ed).delete(n);y.onsuccess=function(){return o(p.result.modelArtifactsInfo)},y.onerror=function(w){return s(p.error)}};g.onsuccess=m,g.onerror=function(y){return m(),c.close(),s(p.error)}},p.onerror=function(g){return c.close(),s(p.error)},l.oncomplete=function(){null==u?c.close():u.oncomplete=function(){return c.close()}}},a.onerror=function(u){return s(a.error)}})]})})},t}();if(ue().getBool("IS_BROWSER"))try{Kc.registerManager(op.URL_SCHEME,new hee)}catch{}var Iu="/",sp="tensorflowjs_models",r4="info",pee="model_topology",gee="weight_specs",mee="weight_data",vee="model_metadata";function i4(t){return{info:[sp,t,r4].join(Iu),topology:[sp,t,pee].join(Iu),weightSpecs:[sp,t,gee].join(Iu),weightData:[sp,t,mee].join(Iu),modelMetadata:[sp,t,vee].join(Iu)}}function yee(t){var n=t.split(Iu);if(n.length<3)throw new Error("Invalid key format: "+t);return n.slice(1,n.length-1).join(Iu)}var ap=function(){function t(n){if(!ue().getBool("IS_BROWSER")||typeof window>"u"||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==n||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=i4(this.modelPath)}return t.prototype.save=function(n){return Pe(this,void 0,void 0,function(){var e,r,i;return Oe(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),i=Ev(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(s){if(qI)return Buffer.from(s).toString("base64");for(var a=new Uint8Array(s),u="",c=0,l=a.length;c<l;c++)u+=String.fromCharCode(a[c]);return btoa(u)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return Pe(this,void 0,void 0,function(){var n,e,r,i,o,s,a;return Oe(this,function(u){if(null==(n=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==n.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(r=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,null==(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(o),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy,e.userDefinedMetadata=s.userDefinedMetadata),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(c){if(qI){var l=Buffer.from(c,"base64");return l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)}for(var f=atob(c),p=new Uint8Array(f.length),g=0;g<f.length;++g)p.set([f.charCodeAt(g)],g);return p.buffer}(a),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),o4=function(t){return ue().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ap.URL_SCHEME)?(n=t.slice(ap.URL_SCHEME.length),new ap(n)):null;var n};Mo.registerSaveRouter(o4),Mo.registerLoadRouter(o4);var wee=function(){function t(){k(ue().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),k(typeof window>"u"||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return Pe(this,void 0,void 0,function(){var n,e,r,i,o,s;return Oe(this,function(a){for(n={},e=sp+Iu,r=Iu+r4,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(r)&&(s=yee(o),n[s]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},t.prototype.removeModel=function(n){return Pe(this,void 0,void 0,function(){var e,r;return Oe(this,function(i){var o;if(n=(o=n).startsWith(ap.URL_SCHEME)?o.slice(ap.URL_SCHEME.length):o,e=i4(n),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},t}();if(ue().getBool("IS_BROWSER"))try{Kc.registerManager(ap.URL_SCHEME,new wee)}catch{}function s4(t){return new Promise(function(n){return setTimeout(n)}).then(t)}var QI=function(){function t(n){if(!ue().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),null!=n&&0!==n.length||(n="model"),this.modelTopologyFileName=n+".json",this.weightDataFileName=n+".weights.bin"}return t.prototype.save=function(n){return Pe(this,void 0,void 0,function(){var e,o,s,a;return Oe(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return o=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}]})],{type:"application/json"})),(s=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=o,[4,s4(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),null==n.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=e,[4,s4(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Ev(n)}]}})})},t.URL_SCHEME="downloads://",t}(),Cee=function(){function t(n){if(null==n||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return t.prototype.load=function(){return Pe(this,void 0,void 0,function(){var n,e,r=this;return Oe(this,function(i){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,s){var a=new FileReader;a.onload=function(u){var c=JSON.parse(u.target.result),l=c.modelTopology;if(null!=l){0===e.length&&o({modelTopology:l});var f=c.weightsManifest;if(null!=f){var p;try{p=r.checkManifestAndWeightFiles(f,e)}catch(w){return void s(w)}var g=[],m=[],y=[];f.forEach(function(w){w.paths.forEach(function(b){m.push(b),y.push(null)}),g.push.apply(g,w.weights)}),f.forEach(function(w){w.paths.forEach(function(b){var A=new FileReader;A.onload=function(C){var _=C.target.result,E=m.indexOf(b);y[E]=_,-1===y.indexOf(null)&&o({modelTopology:l,weightSpecs:g,weightData:GI(y),format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,userDefinedMetadata:c.userDefinedMetadata})},A.onerror=function(C){return s("Failed to weights data from file of path '"+b+"'.")},A.readAsArrayBuffer(p[b])})})}else s(new Error("weightManifest field is missing from file "+n.name))}else s(new Error("modelTopology field is missing from file "+n.name))},a.onerror=function(u){return s("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(n)})]})})},t.prototype.checkManifestAndWeightFiles=function(n,e){for(var r=[],i=e.map(function(u){return $L(u.name)}),o={},s=0,a=n;s<a.length;s++)a[s].paths.forEach(function(u){var c=$L(u);if(-1!==r.indexOf(c))throw new Error("Duplicate file basename found in weights manifest: '"+c+"'");if(r.push(c),-1===i.indexOf(c))throw new Error("Weight file with basename '"+c+"' is not provided.");o[u]=e[i.indexOf(c)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},t}();function a4(t,n,e,r){var o;k(null!=(o=t)&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"}),function(o,s){k(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),k(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s}),k(s>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+s})}(e=e??0,r=r??1);var i=0;return Promise.all(t.map(function(o){return o.then(function(s){var a=e+ ++i/t.length*(r-e);return n(a),s}),o}))}function u4(t,n){return Pe(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,l;return Oe(this,function(f){switch(f.label){case 0:return null==n&&(n={}),e=null==n.fetchFunc?ue().platform.fetch:n.fetchFunc,r=t.map(function(p){return e(p,n.requestInit,{isBinary:!0})}),i=0,o=.5,null!=n.onProgress?[3,2]:[4,Promise.all(r)];case 1:return s=f.sent(),[3,4];case 2:return[4,a4(r,n.onProgress,i,o)];case 3:s=f.sent(),f.label=4;case 4:return a=s.map(function(p){return p.arrayBuffer()}),u=.5,c=1,null!=n.onProgress?[3,6]:[4,Promise.all(a)];case 5:return l=f.sent(),[3,8];case 6:return[4,a4(a,n.onProgress,u,c)];case 7:l=f.sent(),f.label=8;case 8:return[2,l]}})})}function c4(t){var n=this;return function(e,r,i){return void 0===r&&(r=""),Pe(n,void 0,void 0,function(){var o,s,a,u,c,l,f,p,g,m;return Oe(this,function(y){switch(y.label){case 0:if(o=e.map(function(){return!1}),s={},a=null!=i?i.map(function(){return!1}):[],u=[],e.forEach(function(w,b){var A=0;w.weights.forEach(function(C){var E=HI["quantization"in C?C.quantization.dtype:C.dtype]*Le(C.shape),I=function(){o[b]=!0,null==s[b]&&(s[b]=[]),s[b].push({manifestEntry:C,groupOffset:A,sizeBytes:E})};null!=i?i.forEach(function(P,O){P===C.name&&(I(),a[O]=!0)}):I(),u.push(C.name),A+=E})}),!a.every(function(w){return w}))throw c=i.filter(function(w,b){return!a[b]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return l=o.reduce(function(w,b,A){return b&&w.push(A),w},[]),f=[],l.forEach(function(w){e[w].paths.forEach(function(b){var A=r+(r.endsWith("/")?"":"/")+b;f.push(A)})}),[4,t(f)];case 1:return p=y.sent(),g={},m=0,l.forEach(function(w){for(var b=e[w].paths.length,A=0,C=0;C<b;C++)A+=p[m+C].byteLength;for(var _=new ArrayBuffer(A),E=new Uint8Array(_),I=0,P=0;P<b;P++){var O=new Uint8Array(p[m+P]);E.set(O,I),I+=O.byteLength}s[w].forEach(function(F){var N=JL(_.slice(F.groupOffset,F.groupOffset+F.sizeBytes),[F.manifestEntry]);for(var Q in N)g[Q]=N[Q]}),m+=b}),[2,g]}})})}}Mo.registerSaveRouter(function(t){return ue().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(QI.URL_SCHEME)?(void 0===(n=t.slice(QI.URL_SCHEME.length))&&(n="model"),new QI(n)):null;var n});var l4=function(){function t(n,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(k("function"==typeof e.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=ue().platform.fetch,k(null!=n&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&k(2===n.length,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(n){return Pe(this,void 0,void 0,function(){var e,o;return Oe(this,function(s){switch(s.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:[{paths:["./model.weights.bin"],weights:n.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=n.weightData&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=s.sent()).ok)return[2,{modelArtifactsInfo:Ev(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return Pe(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u,c,l,f,p;return Oe(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,n.json()];case 3:return e=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=e.weightsManifest,s=e.generatedBy,a=e.convertedBy,u=e.format,c=e.userDefinedMetadata,null==(i=e.modelTopology)&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:p=g.sent(),l=p[0],f=p[1],g.label=7;case 7:return[2,{modelTopology:i,weightSpecs:l,weightData:f,userDefinedMetadata:c,generatedBy:s,convertedBy:a,format:u}]}})})},t.prototype.loadWeights=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,s,a,u,c,f,p;return Oe(this,function(g){switch(g.label){case 0:for(void 0,void 0,y=(m=Array.isArray(this.path)?this.path[1]:this.path).lastIndexOf("/"),w=m.lastIndexOf("?"),r=[m.substring(0,y)+"/",w>y?m.substring(w):""],i=r[0],o=r[1],s=this.weightPathPrefix||i,a=[],u=0,c=n;u<c.length;u++)a.push.apply(a,c[u].weights);return f=[],n.forEach(function(m){m.paths.forEach(function(y){f.push(s+y+o)})}),[4,u4(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return p=g.sent(),[2,[a,GI(p)]]}var m,y,w})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function YI(t){return null!=t.match(l4.URL_SCHEME_REGEX)}var d4=function(t,n){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(e){return YI(e)}):YI(t))?XI(t,{onProgress:n}):null};function XI(t,n){return new l4(t,n)}Mo.registerSaveRouter(d4),Mo.registerLoadRouter(d4);var up,JI=function(){function t(n){this.modelArtifacts=n}return t.prototype.load=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(n){return[2,this.modelArtifacts]})})},t}(),_ee=function(){function t(n){this.saveHandler=n}return t.prototype.save=function(n){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){return[2,this.saveHandler(n)]})})},t}(),f4=Object.freeze({browserFiles:function(t){return new Cee(t)},browserHTTPRequest:function(t,n){return XI(t,n)},concatenateArrayBuffers:GI,decodeWeights:JL,encodeWeights:function(t,n){return Pe(this,void 0,void 0,function(){var e,r,i,o,s,a=this;return Oe(this,function(u){switch(u.label){case 0:for(e=[],r=[],i=Array.isArray(t)?t.map(function(c){return c.name}):Object.keys(t),o=function(c){var l=i[c],f=Array.isArray(t)?t[c].tensor:t[l];if("float32"!==f.dtype&&"int32"!==f.dtype&&"bool"!==f.dtype&&"string"!==f.dtype)throw new Error("Unsupported dtype in weight '"+l+"': "+f.dtype);var p={name:l,shape:f.shape,dtype:f.dtype};if("string"===f.dtype){var g=new Promise(function(m){return Pe(a,void 0,void 0,function(){var y,w,b,A,C,_,E;return Oe(this,function(I){switch(I.label){case 0:return[4,f.bytes()];case 1:for(y=I.sent(),w=y.reduce(function(P,O){return P+O.length},0)+_A*y.length,b=new Uint8Array(w),A=0,C=0;C<y.length;C++)_=y[C],E=new Uint8Array(new Uint32Array([_.length]).buffer),b.set(E,A),b.set(_,A+=_A),A+=_.length;return m(b),[2]}})})});r.push(g)}else r.push(f.data());null!=n&&(p.group=n),e.push(p)},s=0;s<i.length;++s)o(s);return[4,Promise.all(r)];case 1:return[2,{data:fee(u.sent()),specs:e}]}})})},fromMemory:function(t,n,e,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new JI(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new JI({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new JI({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))},getLoadHandlers:function(t,n){return Mo.getLoadHandlers(t,n)},getModelArtifactsInfoForJSON:Ev,getSaveHandlers:function(t){return Mo.getSaveHandlers(t)},http:XI,isHTTPScheme:YI,loadWeights:function(t,n,e,r){return void 0===n&&(n=""),Pe(this,void 0,void 0,function(){return Oe(this,function(i){return[2,c4(function(o){return u4(o,{requestInit:r})})(t,n,e)]})})},registerLoadRouter:function(t){return Mo.registerLoadRouter(t)},registerSaveRouter:function(t){return Mo.registerSaveRouter(t)},weightsLoaderFactory:c4,withSaveHandler:function(t){return new _ee(t)},copyModel:function(t,n){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){return[2,e4(t,n,!1)]})})},listModels:function(){return Pe(this,void 0,void 0,function(){var t,n,e,r,i,o,s;return Oe(this,function(a){switch(a.label){case 0:t=Kc.getSchemes(),n={},e=0,r=t,a.label=1;case 1:return e<r.length?[4,Kc.getManager(i=r[e]).listModels()]:[3,4];case 2:for(s in o=a.sent())n[i+ip+s]=o[s];a.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})},moveModel:function(t,n){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){return[2,e4(t,n,!0)]})})},removeModel:function(t){return Pe(this,void 0,void 0,function(){var n;return Oe(this,function(e){return n=EA(t),[2,Kc.getManager(n.scheme).removeModel(n.path)]})})}}),Eee=W({confusionMatrix_:function(t,n,e){var r=R(t,"labels","confusionMatrix"),i=R(n,"predictions","confusionMatrix");k(null==e||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),k(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),k(1===i.rank,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),k(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),k(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=eI(r.asType("int32"),e),s=eI(i.asType("int32"),e);return o.transpose().matMul(s).asType("int32")}}),Dee=(Object.freeze({confusionMatrix:Eee}),W({fromPixels_:function(t,n){if(void 0===n&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,r=!1,i=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);s=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=r3("FromPixels",V.backendName))return V.runKernel("FromPixels",{pixels:t},{numChannels:n});var a,u,c=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],l=c[0],f=c[1];if(s?a=t.getContext("2d").getImageData(0,0,l,f).data:r||e?a=t.data:(o||i)&&(null==up&&(up=document.createElement("canvas").getContext("2d")),up.canvas.width=l,up.canvas.height=f,up.drawImage(t,0,0,l,f),a=up.getImageData(0,0,l,f).data),4===n)u=new Int32Array(a);else{var p=l*f;u=new Int32Array(p*n);for(var g=0;g<p;g++)for(var m=0;m<n;++m)u[g*n+m]=a[4*g+m]}return JD(u,[f,l,n],"int32")}})),ZI=Object.freeze({toPixels:function(t,n){return Pe(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,l,g,m,y,w,b,A,C,_,E,I,P,O;return Oe(this,function(F){switch(F.label){case 0:if(e=R(t,"img","toPixels"),t instanceof hn||(e=e.toInt()),2!==e.rank&&3!==e.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),i=r[0],o=r[1],(s=2===e.rank?1:e.shape[2])>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,e.data()];case 1:return a=F.sent(),u=e.min(),c=e.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(l=F.sent(),g=l[0][0],m=l[1][0],u.dispose(),c.dispose(),"float32"===e.dtype){if(g<0||m>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+m+"].")}else{if("int32"!==e.dtype)throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(g<0||m>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+m+"].")}for(y="float32"===e.dtype?255:1,w=new Uint8ClampedArray(o*i*4),b=0;b<i*o;++b)A=void 0,C=void 0,_=void 0,E=void 0,1===s?(A=a[b]*y,C=a[b]*y,_=a[b]*y,E=255):3===s?(A=a[3*b]*y,C=a[3*b+1]*y,_=a[3*b+2]*y,E=255):4===s&&(A=a[4*b]*y,C=a[4*b+1]*y,_=a[4*b+2]*y,E=a[4*b+3]*y),w[0+(I=4*b)]=Math.round(A),w[I+1]=Math.round(C),w[I+2]=Math.round(_),w[I+3]=Math.round(E);return null!=n&&(n.width=o,n.height=i,P=n.getContext("2d"),O=new ImageData(w,o,i),P.putImageData(O,0,0)),e!==t&&e.dispose(),[2,w]}})})},fromPixels:Dee}),h4=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(n,e){return new n(e)},t}(),p4=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]},t}();function Yc(t){k(null!=t.className,function(){return"Class being registered does not have the static className property defined."}),k("string"==typeof t.className,function(){return"className is required to be a string, but got type "+typeof t.className}),k(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),p4.register(t)}function $I(){return 32===V.backend.floatPrecision()?.001:.1}function eS(t,n,e){var r=!0;if((Zr(t)||Zr(n))&&(r=!1),Zr(t)&&Zr(n)&&(r=!0),r){var i=t.constructor.name,o=n.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(t)&&Array.isArray(n)){var s=ya(t),a=ya(n);if(!Ar(s,a))throw new Error("Arrays have different shapes. Actual: ["+s+"]. Expected: ["+a+"]")}var u=Zr(t)?t:bu(t),c=Zr(n)?n:bu(n);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var f=u[l],p=c[l];if(!e(f,p))throw new Error("Arrays differ: actual["+l+"] = "+f+", expected["+l+"] = "+p+".\nActual:   "+u+".\nExpected: "+c+".")}}function tS(t,n,e){return!isFinite(t)&&!isFinite(n)||!(isNaN(t)||isNaN(n)||Math.abs(t-n)>e)}Object.freeze({Serializable:h4,SerializationMap:p4,registerClass:Yc}),Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(t,n,e){return null==e&&(e=$I()),eS(t,n,function(r,i){return tS(r,i,e)})},testEpsilon:$I,expectPromiseToFail:function(t,n){t().then(function(){return n.fail()},function(){return n()})},expectArraysEqual:function(t,n){var e="string"==typeof n||"number"==typeof n||"boolean"==typeof n?[n]:n;return zc(t)||zc(t[0])||zc(n)||zc(n[0])?eS(t,e,function(r,i){return r==i}):eS(t,n,function(r,i){return tS(r,i,0)})},expectNumbersClose:function(t,n,e){if(null==e&&(e=$I()),!tS(t,n,e))throw new Error("Numbers differ: actual === "+t+", expected === "+n)},expectValuesInRange:function(t,n,e){for(var r=0;r<t.length;r++)if(t[r]<n||t[r]>e)throw new Error("Value out of range:"+t[r]+" low: "+n+", high: "+e)},expectArrayBuffersEqual:function(t,n){expect(new Float32Array(t)).toEqual(new Float32Array(n))}}),Object.freeze({gpgpu_util:XX,webgl_util:bY,forceHalfFloat:function(){ue().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:fL,setWebGLContext:E3,GPGPUContext:YB});var Dd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Bs(n,t),n.prototype.minimize=function(e,r,i){void 0===r&&(r=!1);var o=this.computeGradients(e,i),s=o.value,a=o.grads;if(null!=i){var u=i.map(function(c){return{name:c.name,tensor:a[c.name]}});this.applyGradients(u)}else this.applyGradients(a);return io(a),r?s:(s.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,r){return function eX(t,n){k(Vc(t),function(){return"The f passed in variableGrads(f) must be a function"}),k(null==n||Array.isArray(n)&&n.every(function(l){return l instanceof Qh}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=null!=n;if(!e)for(var r in n=[],V.registeredVariables)n.push(V.registeredVariables[r]);var i=e?n.filter(function(l){return!l.trainable}):null,o=n.length;k((n=n.filter(function(l){return l.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var s=V.gradients(t,n,null,!0),a=s.value,u=s.grads;k(u.some(function(l){return null!=l}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),k(0===a.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var c={};return n.forEach(function(l,f){null!=u[f]&&(c[l.name]=u[f])}),i?.forEach(function(l){return c[l.name]=null}),{value:a,grads:c}}(e,r)},n.prototype.dispose=function(){null!=this.iterations_&&io(this.iterations_)},n.prototype.saveIterations=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Ee(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(e){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,e.slice(1)]}})})},n}(h4);Object.defineProperty(Dd,Symbol.hasInstance,{value:function(t){return null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients}});var m4=function(t){function n(e,r,i){void 0===i&&(i=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==i&&(o.epsilon=V.backend.epsilon()),o}return Bs(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=V.registeredVariables[i];null==r.accumulatedGrads[o]&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:Me(function(){return Ft(s).variable(!1)})}),null==r.accumulatedUpdates[o]&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:Me(function(){return Ft(s).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(null!=a){var u=r.accumulatedGrads[o].variable,c=r.accumulatedUpdates[o].variable;Me(function(){var l=u.mul(r.rho).add(a.square().mul(1-r.rho)),f=c.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(a),p=c.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(l),c.assign(p);var g=f.mul(-r.learningRate).add(s);s.assign(g)})}}),this.incrementIterations()},n.prototype.dispose=function(){null!=this.accumulatedUpdates&&(io(this.accumulatedGrads.map(function(e){return e.variable})),io(this.accumulatedUpdates.map(function(e){return e.variable})))},n.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){var e;return Oe(this,function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),this.accumulatedGrads=e.slice(0,r=e.length/2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(Dd);Yc(m4);var v4=function(t){function n(e,r){void 0===r&&(r=.1);var i=t.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Bs(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=V.registeredVariables[i];null==r.accumulatedGrads[o]&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:Me(function(){return ba(s.shape,r.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(null!=a){var u=r.accumulatedGrads[o].variable;Me(function(){var c=u.add(a.square());u.assign(c);var l=a.div(c.add(V.backend.epsilon()).sqrt()).mul(-r.learningRate).add(s);s.assign(l)})}}),this.incrementIterations()},n.prototype.dispose=function(){null!=this.accumulatedGrads&&io(this.accumulatedGrads.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(Dd);Yc(v4);var y4=function(t){function n(e,r,i,o){void 0===o&&(o=null);var s=t.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=i,s.epsilon=o,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],Me(function(){s.accBeta1=Ee(r).variable(),s.accBeta2=Ee(i).variable()}),null==o&&(s.epsilon=V.backend.epsilon()),s}return Bs(n,t),n.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Me(function(){var o=Lr(1,r.accBeta1),s=Lr(1,r.accBeta2);i.forEach(function(a,u){var c=V.registeredVariables[a];null==r.accumulatedFirstMoment[u]&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:Me(function(){return Ft(c).variable(!1)})}),null==r.accumulatedSecondMoment[u]&&(r.accumulatedSecondMoment[u]={originalName:a+"/v",variable:Me(function(){return Ft(c).variable(!1)})});var l=Array.isArray(e)?e[u].tensor:e[a];if(null!=l){var f=r.accumulatedFirstMoment[u].variable,p=r.accumulatedSecondMoment[u].variable,g=f.mul(r.beta1).add(l.mul(1-r.beta1)),m=p.mul(r.beta2).add(l.square().mul(1-r.beta2)),y=g.div(o),w=m.div(s);f.assign(g),p.assign(m);var b=y.div(w.sqrt().add(r.epsilon)).mul(-r.learningRate).add(c);c.assign(b)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&io(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedSecondMoment&&io(this.accumulatedSecondMoment.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){var e;return Oe(this,function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Pe(this,void 0,void 0,function(){var r,i=this;return Oe(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),Me(function(){i.accBeta1.assign(yA(i.beta1,i.iterations_+1)),i.accBeta2.assign(yA(i.beta2,i.iterations_+1))}),this.accumulatedFirstMoment=e.slice(0,r=e.length/2).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(Dd);Yc(y4);var w4=function(t){function n(e,r,i,o,s){void 0===o&&(o=null),void 0===s&&(s=0);var a=t.call(this)||this;return a.learningRate=e,a.beta1=r,a.beta2=i,a.epsilon=o,a.decay=s,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],Me(function(){a.iteration=Ee(0).variable(),a.accBeta1=Ee(r).variable()}),null==o&&(a.epsilon=V.backend.epsilon()),a}return Bs(n,t),n.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Me(function(){var o=Lr(1,r.accBeta1),s=Hs(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(a,u){var c=V.registeredVariables[a];null==r.accumulatedFirstMoment[u]&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:Ft(c).variable(!1)}),null==r.accumulatedWeightedInfNorm[u]&&(r.accumulatedWeightedInfNorm[u]={originalName:a+"/v",variable:Ft(c).variable(!1)});var l=Array.isArray(e)?e[u].tensor:e[a];if(null!=l){var f=r.accumulatedFirstMoment[u].variable,p=r.accumulatedWeightedInfNorm[u].variable,g=f.mul(r.beta1).add(l.mul(1-r.beta1)),m=p.mul(r.beta2),y=l.abs(),w=m.maximum(y);f.assign(g),p.assign(w);var b=s.div(o).mul(g.div(w.add(r.epsilon))).add(c);c.assign(b)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&io(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedWeightedInfNorm&&io(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(Dd);Yc(w4);var nS=function(t){function n(e){var r=t.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return Bs(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=Array.isArray(e)?e[o].tensor:e[i];if(null!=s){var a=V.registeredVariables[i];Me(function(){var u=r.c.mul(s).add(a);a.assign(u)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function AY(t){return V.keep(t)}(Ee(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},n.prototype.setWeights=function(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=r.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,r){return new e(r.learningRate)},n.className="SGD",n}(Dd);Yc(nS);var b4=function(t){function n(e,r,i){void 0===i&&(i=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=Ee(o.momentum),o}return Bs(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=V.registeredVariables[i];null==r.accumulations[o]&&(r.accumulations[o]={originalName:i+"/momentum",variable:Me(function(){return Ft(s).variable(!1)})});var a=r.accumulations[o].variable,u=Array.isArray(e)?e[o].tensor:e[i];null!=u&&Me(function(){var c,l=r.m.mul(a).add(u);c=r.useNesterov?r.c.mul(u.add(l.mul(r.m))).add(s):r.c.mul(l).add(s),a.assign(l),s.assign(c)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&io(this.accumulations.map(function(e){return e.variable}))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(nS);Yc(b4);var A4=function(t){function n(e,r,i,o,s){void 0===r&&(r=.9),void 0===i&&(i=0),void 0===o&&(o=null),void 0===s&&(s=!1);var a=t.call(this)||this;if(a.learningRate=e,a.decay=r,a.momentum=i,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=s,null==o&&(a.epsilon=V.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return Bs(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=V.registeredVariables[i];null==r.accumulatedMeanSquares[o]&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:Me(function(){return Ft(s).variable(!1)})}),null==r.accumulatedMoments[o]&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:Me(function(){return Ft(s).variable(!1)})}),null==r.accumulatedMeanGrads[o]&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:Me(function(){return Ft(s).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(null!=a){var u=r.accumulatedMeanSquares[o].variable,c=r.accumulatedMoments[o].variable;Me(function(){var l=u.mul(r.decay).add(a.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[o].variable,p=f.mul(r.decay).add(a.mul(1-r.decay)),g=c.mul(r.momentum).add(a.mul(r.learningRate).div(l.sub(p.square().add(r.epsilon)).sqrt()));u.assign(l),f.assign(p),c.assign(g);var m=s.sub(g);s.assign(m)}else{var y=u.mul(r.decay).add(a.square().mul(1-r.decay));g=c.mul(r.momentum).add(a.mul(r.learningRate).div(y.add(r.epsilon).sqrt())),u.assign(y),c.assign(g),m=s.sub(g),s.assign(m)}})}}),this.incrementIterations()},n.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&io(this.accumulatedMeanSquares.map(function(e){return e.variable})),null!=this.accumulatedMeanGrads&&this.centered&&io(this.accumulatedMeanGrads.map(function(e){return e.variable})),null!=this.accumulatedMoments&&io(this.accumulatedMoments.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){var e;return Oe(this,function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),this.accumulatedMeanSquares=e.slice(0,r=this.centered?e.length/3:e.length/2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(Dd);Yc(A4),function(){function t(){}t.sgd=function(n){return new nS(n)},t.momentum=function(n,e,r){return void 0===r&&(r=!1),new b4(n,e,r)},t.rmsprop=function(n,e,r,i,o){return void 0===e&&(e=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=!1),new A4(n,e,r,i,o)},t.adam=function(n,e,r,i){return void 0===n&&(n=.001),void 0===e&&(e=.9),void 0===r&&(r=.999),void 0===i&&(i=null),new y4(n,e,r,i)},t.adadelta=function(n,e,r){return void 0===n&&(n=.001),void 0===e&&(e=.95),void 0===r&&(r=null),new m4(n,e,r)},t.adamax=function(n,e,r,i,o){return void 0===n&&(n=.002),void 0===e&&(e=.9),void 0===r&&(r=.999),void 0===i&&(i=null),void 0===o&&(o=0),new w4(n,e,r,i,o)},t.adagrad=function(n,e){return void 0===e&&(e=.1),new v4(n,e)}}(),typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"&&setImmediate,hn.prototype.squaredDifference=function(t){return hL(this,t)},se=oee;var rS=function(t,n){return(rS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function ut(t,n){function e(){this.constructor=t}rS(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var xi=function(){return xi=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},xi.apply(this,arguments)};function ze(t,n,e,r){return new(e||(e=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(f){s(f)}}function u(l){try{c(r.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):function i(o){return o instanceof e?o:new e(function(s){s(o)})}(l.value).then(a,u)}c((r=r.apply(t,n||[])).next())})}function Ve(t,n){var r,i,o,s,e={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return function u(c){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=2&c[0]?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(!(o=(o=e.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(6===c[0]&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=n.call(t,e)}catch(l){c=[6,l],i=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function Dv(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Td=function(){function t(n,e){if(!Md(n)||!Md(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:e}));this._width=n,this._height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function Iv(t,n){return t instanceof hn&&t.shape.length===n}function IA(t){return Iv(t,3)}function Xc(t){return Iv(t,4)}function C4(t){return t%2==0}function iS(t,n){void 0===n&&(n=2);var e=Math.pow(10,n);return Math.floor(t*e)/e}function _4(t){return t&&t.width&&t.height}function oS(t){return t.reduce(function(n,e){return n.add(e)},new zt(0,0)).div(new zt(t.length,t.length))}function Sv(t,n,e){return Array(t).fill(0).map(function(r,i){return n+i*e})}function Md(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||0===t}function E4(t){return Md(t)&&0<=t&&t<=1}var zt=function(){function t(n,e){this._x=n,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(n){return new t(this.x+n.x,this.y+n.y)},t.prototype.sub=function(n){return new t(this.x-n.x,this.y-n.y)},t.prototype.mul=function(n){return new t(this.x*n.x,this.y*n.y)},t.prototype.div=function(n){return new t(this.x/n.x,this.y/n.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),xa=function(){function t(n,e){void 0===e&&(e=!0);var r=n||{},i=[r.left,r.top,r.right,r.bottom].every(Md),o=[r.x,r.y,r.width,r.height].every(Md);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var s=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],a=s[0],u=s[1],c=s[2],l=s[3];t.assertIsValidBox({x:a,y:u,width:c,height:l},"Box.constructor",e),this._x=a,this._y=u,this._width=c,this._height=l}return t.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(Md)},t.assertIsValidBox=function(n,e,r){if(void 0===r&&(r=!1),!t.isRect(n))throw new Error(e+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!r&&(n.width<0||n.height<0))throw new Error(e+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new zt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new zt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new zt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new zt(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(s){return Math.round(s)});return new t({x:n[0],y:n[1],width:n[2],height:n[3]})},t.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(s){return Math.floor(s)});return new t({x:n[0],y:n[1],width:n[2],height:n[3]})},t.prototype.toSquare=function(){var n=this,e=n.x,r=n.y,i=n.width,o=n.height,s=Math.abs(i-o);return i<o&&(e-=s/2,i+=s),o<i&&(r-=s/2,o+=s),new t({x:e,y:r,width:i,height:o})},t.prototype.rescale=function(n){var e=_4(n)?n.width:n,r=_4(n)?n.height:n;return new t({x:this.x*e,y:this.y*r,width:this.width*e,height:this.height*r})},t.prototype.pad=function(n,e){var r=[this.x-n/2,this.y-e/2,this.width+n,this.height+e];return new t({x:r[0],y:r[1],width:r[2],height:r[3]})},t.prototype.clipAtImageBorders=function(n,e){var r=this,o=r.y,s=r.right,a=r.bottom,u=Math.max(r.x,0),c=Math.max(o,0),f=a-c;return new t({x:u,y:c,width:Math.min(s-u,n-u),height:Math.min(f,e-c)}).floor()},t.prototype.shift=function(n,e){return new t({x:this.x+n,y:this.y+e,width:this.width,height:this.height})},t.prototype.padAtBorders=function(n,e){var r=this.width+1,i=this.height+1,a=r,u=i,c=this.left,l=this.top,f=this.right,p=this.bottom;return f>e&&(a=-f+e+r,f=e),p>n&&(u=-p+n+i,p=n),c<1&&(u=2-c,c=1),l<1&&(u=2-l,l=1),{dy:1,edy:u,dx:1,edx:a,y:l,ey:p,x:c,ex:f,w:r,h:i}},t.prototype.calibrate=function(n){return new t({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},t}(),SA=function(t){function n(e,r,i,o,s){return void 0===s&&(s=!1),t.call(this,{left:e,top:r,right:i,bottom:o},s)||this}return ut(n,t),n}(xa),D4=function(){function t(n,e,r,i,o){this._imageDims=new Td(o.width,o.height),this._score=n,this._classScore=e,this._className=r,this._box=new xa(i).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new xa(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:e})},t}(),Ro=function(t){function n(e,r,i){return t.call(this,e,e,"",r,i)||this}return ut(n,t),n.prototype.forSize=function(e,r){var i=t.prototype.forSize.call(this,e,r);return new n(i.score,i.relativeBox,i.imageDims)},n}(D4);function Oee(t,n,e){void 0===e&&(e=!0);var o=Math.max(0,Math.min(t.right,n.right)-Math.max(t.left,n.left))*Math.max(0,Math.min(t.bottom,n.bottom)-Math.max(t.top,n.top));return e?o/(t.area+n.area-o):o/Math.min(t.area,n.area)}function Tv(t,n,e,r){void 0===r&&(r=!0);for(var i=n.map(function(a,u){return{score:a,boxIndex:u}}).sort(function(a,u){return a.score-u.score}).map(function(a){return a.boxIndex}),o=[],s=function(){var a=i.pop();o.push(a);for(var u=i,c=[],l=0;l<u.length;l++)c.push(Oee(t[a],t[u[l]],r));i=i.filter(function(m,y){return c[y]<=e})};i.length>0;)s();return o}function Mv(t,n){return Me(function(){var e=n[0],r=n[1],i=n[2],o=ba(Dv(t.shape.slice(0,3),[1]),e),s=ba(Dv(t.shape.slice(0,3),[1]),r),a=ba(Dv(t.shape.slice(0,3),[1]),i),u=Fr([o,s,a],3);return Lr(t,u)})}function sS(t){return 1/(1+Math.exp(-t))}var Ur,aS=function(t){function n(e,r,i,o,s){return void 0===s&&(s=!1),t.call(this,{x:e,y:r,width:i,height:o},s)||this}return ut(n,t),n}(xa),cp=function(){function t(n,e,r){void 0===r&&(r=new zt(0,0));var i=e.width,o=e.height;this._imgDims=new Td(i,o),this._shift=r,this._positions=n.map(function(s){return s.mul(new zt(i,o)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new zt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(e){return e.sub(n._shift).div(new zt(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new this.constructor(this.relativePositions,{width:n,height:e})},t.prototype.shiftBy=function(n,e){return new this.constructor(this.relativePositions,this._imgDims,new zt(n,e))},t.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},t.prototype.align=function(n,e){if(void 0===e&&(e={}),n){var r=n instanceof Ro?n.box.floor():new xa(n);return this.shiftBy(r.x,r.y).align(null,e)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),s=i.minBoxPadding;return i.useDlibAlignment?this.alignDlib():this.alignMinBbox(s)},t.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),r=n[1],i=n[2],o=function(f){return i.sub(f).magnitude()},s=(o(n[0])+o(r))/2,a=Math.floor(s/.45),u=oS(n),c=Math.floor(Math.max(0,u.x-.5*a)),l=Math.floor(Math.max(0,u.y-.43*a));return new aS(c,l,Math.min(a,this.imageWidth+c),Math.min(a,this.imageHeight+l))},t.prototype.alignMinBbox=function(n){var e=function Pee(t){var n=t.map(function(a){return a.x}),e=t.map(function(a){return a.y}),r=n.reduce(function(a,u){return u<a?u:a},1/0),i=e.reduce(function(a,u){return u<a?u:a},1/0),o=n.reduce(function(a,u){return a<u?u:a},0),s=e.reduce(function(a,u){return a<u?u:a},0);return new SA(r,i,o,s)}(this.positions);return e.pad(e.width*n,e.height*n)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),Uee=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],oS([e[3],e[4]])]},n}(cp),I4=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(oS)},n}(cp),S4=function(){function t(n,e){this._label=n,this._distance=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(n){return void 0===n&&(n=!0),this.label+(n?" ("+iS(this.distance)+")":"")},t}(),T4=function(t){function n(e,r){var i=t.call(this,e)||this;return i._label=r,i}return ut(n,t),n.assertIsValidLabeledBox=function(e,r){if(xa.assertIsValidBox(e,r),!Md(e.label))throw new Error(r+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(xa),TA=function(){function t(n,e){if("string"!=typeof n)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},t.fromJSON=function(n){var e=n.descriptors.map(function(r){return new Float32Array(r)});return new t(n.label,e)},t}();function Rv(t){return t.detection instanceof Ro}function kv(t,n){return Object.assign({},t,{detection:n})}function M4(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function R4(t){var n="";if(!t)try{t=Oa(Object(function(){var i=new Error("Cannot find module 'fs'");throw i.code="MODULE_NOT_FOUND",i}()))}catch(r){n=r.toString()}return{readFile:t?function(r){return new Promise(function(i,o){t.readFile(r,function(s,a){return s?o(s):i(a)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)}}}function k4(){var t=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=R4();return xi({Canvas:t||function(){return function s(){}}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){return function s(){}}(),Image:n||function(){return function s(){}}(),ImageData:global.ImageData||function(){return function s(){}}(),Video:global.HTMLVideoElement||function(){return function s(){}}(),createCanvasElement:function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:i},o)}function P4(){return"object"==typeof window&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function O4(){return"object"==typeof global&&typeof process<"u"&&!!process.version}function uS(t){Ur=t}function cS(){P4()&&uS(M4()),O4()&&uS(k4())}!function(t){function n(e,r,i,o){var s=t.call(this,e,r)||this;return s._score=i,s._classScore=o,s}ut(n,t),n.assertIsValidPredictedBox=function(e,r){if(T4.assertIsValidLabeledBox(e,r),!E4(e.score)||!E4(e.classScore))throw new Error(r+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(T4);var Ci={getEnv:function jee(){if(!Ur)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Ur},setEnv:uS,initialize:cS,createBrowserEnv:M4,createFileSystem:R4,createNodejsEnv:k4,monkeyPatch:function zee(t){if(Ur||cS(),!Ur)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=t.Canvas,e=void 0===n?Ur.Canvas:n,r=t.Image,i=void 0===r?Ur.Image:r;Ur.Canvas=e,Ur.Image=i,Ur.createCanvasElement=t.createCanvasElement||function(){return new e},Ur.createImageElement=t.createImageElement||function(){return new i},Ur.ImageData=t.ImageData||Ur.ImageData,Ur.Video=t.Video||Ur.Video,Ur.fetch=t.fetch||Ur.fetch,Ur.readFile=t.readFile||Ur.readFile},isBrowser:P4,isNodejs:O4};function lS(t){return Ci.isNodejs()||"string"!=typeof t?t:document.getElementById(t)}function Ca(t){var n=Ci.getEnv(),e=n.Canvas;if(t instanceof n.CanvasRenderingContext2D)return t;var i=lS(t);if(!(i instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}cS();var Rd=function(t){return t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT",t}(Rd||{}),N4=function(){return function t(n){void 0===n&&(n={});var r=n.backgroundColor,i=n.fontColor,o=n.fontSize,s=n.fontStyle,a=n.padding;this.anchorPosition=n.anchorPosition||Rd.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=i||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=s||"Georgia",this.padding=a||4}}(),F4=function(){function t(n,e,r){void 0===r&&(r={}),this.text="string"==typeof n?[n]:n instanceof t?n.text:n,this.anchor=e,this.options=new N4(r)}return t.prototype.measureWidth=function(n){var e=this.options.padding;return this.text.map(function(r){return n.measureText(r).width}).reduce(function(r,i){return r<i?i:r},0)+2*e},t.prototype.measureHeight=function(){var n=this.options;return this.text.length*n.fontSize+2*n.padding},t.prototype.getUpperLeft=function(n,e){var r=this.options.anchorPosition,i=r===Rd.BOTTOM_RIGHT||r===Rd.TOP_RIGHT,o=r===Rd.BOTTOM_LEFT||r===Rd.BOTTOM_RIGHT,s=this.measureWidth(n),a=this.measureHeight(),u=i?this.anchor.x-s:this.anchor.x,c=o?this.anchor.y-a:this.anchor.y;if(e){var f=e.height;return{x:Math.max(Math.min(u,e.width-s),0),y:Math.max(Math.min(c,f-a),0)}}return{x:u,y:c}},t.prototype.draw=function(n){var e=lS(n),r=Ca(e),i=this.options,o=i.backgroundColor,s=i.fontColor,a=i.fontSize,c=i.padding;r.font=a+"px "+i.fontStyle;var l=this.measureWidth(r),f=this.measureHeight();r.fillStyle=o;var p=this.getUpperLeft(r,e);r.fillRect(p.x,p.y,l,f),r.fillStyle=s,this.text.forEach(function(g,m){r.fillText(g,c+p.x,c+p.y+(m+1)*a)})},t}(),Vee=function(){return function t(n){void 0===n&&(n={});var r=n.lineWidth,i=n.label,o=n.drawLabelOptions;this.boxColor=n.boxColor||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=i,this.drawLabelOptions=new N4(Object.assign({},{anchorPosition:Rd.BOTTOM_LEFT,backgroundColor:this.boxColor},o))}}(),Wee=function(){function t(n,e){void 0===e&&(e={}),this.box=new xa(n),this.options=new Vee(e)}return t.prototype.draw=function(n){var e=Ca(n),r=this.options,o=r.lineWidth,s=this.box,a=s.x,u=s.y,c=s.width,l=s.height;e.strokeStyle=r.boxColor,e.lineWidth=o,e.strokeRect(a,u,c,l);var f=this.options.label;f&&new F4([f],{x:a-o/2,y:u},this.options.drawLabelOptions).draw(n)},t}();function B4(t){var n=Ci.getEnv();return t instanceof n.Image&&t.complete||t instanceof n.Video&&t.readyState>=3}function dS(t){var n=Ci.getEnv(),r=n.Video;return t instanceof n.Image?new Td(t.naturalWidth,t.naturalHeight):t instanceof r?new Td(t.videoWidth,t.videoHeight):new Td(t.width,t.height)}function MA(t){var n=t.width,e=t.height,i=(0,Ci.getEnv().createCanvasElement)();return i.width=n,i.height=e,i}function fS(t,n){var e=Ci.getEnv().ImageData;if(!(t instanceof e||B4(t)))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=n||dS(t),i=r.width,o=r.height,s=MA({width:i,height:o});return t instanceof e?Ca(s).putImageData(t,0,0):Ca(s).drawImage(t,0,0,i,o),s}function Gee(t,n){return ze(this,void 0,void 0,function(){var e,r,i,o,s,a;return Ve(this,function(u){switch(u.label){case 0:return e=n||Ci.getEnv().createCanvasElement(),r=t.shape.slice(Xc(t)?1:0),i=r[0],o=r[1],s=r[2],a=Me(function(){return t.as3D(i,o,s).toInt()}),[4,ZI.toPixels(a,e)];case 1:return u.sent(),a.dispose(),[2,e]}})})}function L4(t){var n=Ci.getEnv();return t instanceof n.Image||t instanceof n.Canvas||t instanceof n.Video}var RA=function(){function t(n,e){var r=this;if(void 0===e&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=e,this._batchSize=n.length,n.forEach(function(i,o){if(IA(i))return r._imageTensors[o]=i,void(r._inputDimensions[o]=i.shape);if(Xc(i)){var s=i.shape[0];if(1!==s)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");return r._imageTensors[o]=i,void(r._inputDimensions[o]=i.shape.slice(1))}var a=i instanceof Ci.getEnv().Canvas?i:fS(i);r._canvases[o]=a,r._inputDimensions[o]=[a.height,a.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var n=this;return Sv(this.batchSize,0,1).map(function(e,r){return n.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},t.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},t.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},t.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},t.prototype.getReshapedInputDimensions=function(n){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function kee(t,n){var e=t.width,r=t.height,i=n/Math.max(r,e);return new Td(Math.round(e*i),Math.round(r*i))}({width:this.getInputWidth(n),height:this.getInputHeight(n)},this.inputSize)},t.prototype.toBatchTensor=function(n,e){var r=this;return void 0===e&&(e=!0),this._inputSize=n,Me(function(){var i=Sv(r.batchSize,0,1).map(function(s){var a=r.getInput(s);if(a instanceof hn){var u=Xc(a)?a:a.expandDims();return u=function Nee(t,n){return void 0===n&&(n=!1),Me(function(){var e=t.shape.slice(1),r=e[0],i=e[1];if(r===i)return t;var o=Math.abs(r-i),s=Math.round(o*(n?.5:1)),a=r>i?2:1,u=function(g){var m=t.shape.slice();return m[a]=g,ba(m,0)},c=u(s),l=o-c.shape[a],p=[n&&l?u(l):null,t,c].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return Fr(p,a)})}(u,e),(u.shape[1]!==n||u.shape[2]!==n)&&(u=OI.resizeBilinear(u,[n,n])),u.as3D(n,n,3)}if(a instanceof Ci.getEnv().Canvas)return ZI.fromPixels(function Kee(t,n,e){void 0===e&&(e=!1);var r=Ci.getEnv(),o=r.Canvas;if(!(t instanceof r.Image||t instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=dS(t),a=n/Math.max(s.height,s.width),u=a*s.width,c=a*s.height,l=MA({width:n,height:n}),f=t instanceof o?t:fS(t),p=Math.abs(u-c)/2,g=e&&u<c?p:0,m=e&&c<u?p:0;return Ca(l).drawImage(f,g,m,u,c),l}(a,n,e));throw new Error("toBatchTensor - at batchIdx "+s+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)});return To(i.map(function(s){return s.toFloat()})).as4D(r.batchSize,n,n,3)})},t}();function Kr(t){return ze(this,void 0,void 0,function(){var n,e,r;return Ve(this,function(i){switch(i.label){case 0:if(t instanceof RA)return[2,t];if(!(n=Array.isArray(t)?t:[t]).length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(t)?" at input index "+o+":":""},(r=n.map(lS)).forEach(function(o,s){if(!L4(o)&&!IA(o)&&!Xc(o))throw"string"==typeof n[s]?new Error("toNetInput -"+e(s)+" string passed, but could not resolve HTMLElement for element id "+n[s]):new Error("toNetInput -"+e(s)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Xc(o)){var a=o.shape[0];if(1!==a)throw new Error("toNetInput -"+e(s)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return L4(o)&&function qee(t){return new Promise(function(n,e){if(t instanceof Ci.getEnv().Canvas||B4(t))return n();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),n(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),e(o))}t.addEventListener("load",r),t.addEventListener("error",i)})}(o)}))];case 1:return i.sent(),[2,new RA(r,Array.isArray(t))]}})})}function hS(t,n){return ze(this,void 0,void 0,function(){var e,r,i,o,s,a;return Ve(this,function(c){switch(c.label){case 0:return e=Ci.getEnv().Canvas,r=t,t instanceof e?[3,5]:[4,Kr(t)];case 1:if((i=c.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(o=i.getInput(0))instanceof e?(s=o,[3,4]):[3,2];case 2:return[4,Gee(o)];case 3:s=c.sent(),c.label=4;case 4:r=s,c.label=5;case 5:return a=Ca(r),[2,n.map(function(l){return l instanceof Ro?l.forSize(r.width,r.height).box.floor():l}).map(function(l){return l.clipAtImageBorders(r.width,r.height)}).map(function(l){var f=l.x,p=l.y,g=l.width,m=l.height,y=MA({width:g,height:m});return Ca(y).putImageData(a.getImageData(f,p,g,m),0,0),y})]}})})}function pS(t,n){return ze(this,void 0,void 0,function(){return Ve(this,function(e){if(!IA(t)&&!Xc(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Xc(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Me(function(){var r=t.shape.slice(Xc(t)?1:0),i=r[0],o=r[1],s=r[2];return n.map(function(c){return c instanceof Ro?c.forSize(o,i).box:c}).map(function(c){return c.clipAtImageBorders(o,i)}).map(function(c){var l=c.x,f=c.y,p=c.width,g=c.height;return FL(t.as3D(i,o,s),[f,l,0],[g,p,s])})})]})})}function Qee(t,n){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return[4,(0,Ci.getEnv().fetch)(t,n)];case 1:if(!((r=i.sent()).status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Yee(t){return ze(this,void 0,void 0,function(){return Ve(this,function(n){switch(n.label){case 0:return[4,Qee(t)];case 1:return[2,n.sent().json()]}})})}function U4(t,n){var e=n+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:e};if("/"===t)return{modelBaseUri:"/",manifestUri:"/"+e};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"",i=(t=t.replace(r,"")).split("/").filter(function(a){return a}),o=t.endsWith(".json")?i[i.length-1]:e,s=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return{modelBaseUri:s=t.startsWith("/")?"/"+s:s,manifestUri:"/"===s?"/"+o:s+"/"+o}}function Xee(t,n){return ze(this,void 0,void 0,function(){var e,i,o;return Ve(this,function(s){switch(s.label){case 0:return e=U4(t,n),i=e.modelBaseUri,[4,Yee(e.manifestUri)];case 1:return o=s.sent(),[2,f4.loadWeights(o,i)]}})})}var Su=function(){function t(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(n){var e=this.traversePropertyPath(n);return e.obj[e.objProp]},t.prototype.reassignParamFromPath=function(n,e){var r=this.traversePropertyPath(n),i=r.obj,o=r.objProp;i[o].dispose(),i[o]=e},t.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(e){var r=e.paramPath;return{path:r,tensor:n.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof Qh})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof Qh)})},t.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(e){n.reassignParamFromPath(e.path,e.tensor.variable())})},t.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(e){var r=e.path,i=e.tensor,o=ti(i.dataSync());i.dispose(),n.reassignParamFromPath(r,o)})},t.prototype.dispose=function(n){void 0===n&&(n=!0),this.getParamList().forEach(function(e){if(n&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){return Array.from(n.tensor.dataSync())}).reduce(function(n,e){return n.concat(e)}))},t.prototype.load=function(n){return ze(this,void 0,void 0,function(){return Ve(this,function(e){switch(e.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return e.sent(),[2]}})})},t.prototype.loadFromUri=function(n){return ze(this,void 0,void 0,function(){var e;return Ve(this,function(r){switch(r.label){case 0:if(n&&"string"!=typeof n)throw new Error(this._name+".loadFromUri - expected model uri");return[4,Xee(n,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},t.prototype.loadFromDisk=function(n){return ze(this,void 0,void 0,function(){var e,r,i,o,a,u,c,l,f;return Ve(this,function(p){switch(p.label){case 0:if(n&&"string"!=typeof n)throw new Error(this._name+".loadFromDisk - expected model file path");return e=Ci.getEnv().readFile,r=U4(n,this.getDefaultModelName()),i=r.manifestUri,o=r.modelBaseUri,a=f4.weightsLoaderFactory(function(g){return Promise.all(g.map(function(m){return e(m).then(function(y){return y.buffer})}))}),l=(c=JSON).parse,[4,e(i)];case 1:return u=l.apply(c,[p.sent().toString()]),[4,a(u,o)];case 2:return f=p.sent(),this.loadFromWeightMap(f),[2]}})})},t.prototype.loadFromWeightMap=function(n){var e=this.extractParamsFromWeigthMap(n),i=e.params;this._paramMappings=e.paramMappings,this._params=i},t.prototype.extractWeights=function(n){var e=this.extractParams(n),i=e.params;this._paramMappings=e.paramMappings,this._params=i},t.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=n.split("/").reduce(function(o,s){if(!o.nextObj.hasOwnProperty(s))throw new Error("traversePropertyPath - object does not have property "+s+", for path "+n);return{obj:o.nextObj,objProp:s,nextObj:o.nextObj[s]}},{nextObj:this.params}),r=e.obj,i=e.objProp;if(!(r&&i&&r[i]instanceof hn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:r,objProp:i}},t}();function ko(t,n,e){return Me(function(){var r=TI(t,n.depthwise_filter,n.pointwise_filter,e,"same");return Tt(r,n.bias)})}function gS(t,n,e){return void 0===e&&(e=!1),Me(function(){var r=qn(e?Tt(rs(t,n.conv0.filters,[2,2],"same"),n.conv0.bias):ko(t,n.conv0,[2,2])),i=ko(r,n.conv1,[1,1]),s=ko(qn(Tt(r,i)),n.conv2,[1,1]);return qn(Tt(r,Tt(i,s)))})}function kA(t,n,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!0),Me(function(){var i=qn(e?Tt(rs(t,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):ko(t,n.conv0,r?[2,2]:[1,1])),o=ko(i,n.conv1,[1,1]),a=ko(qn(Tt(i,o)),n.conv2,[1,1]),c=ko(qn(Tt(i,Tt(o,a))),n.conv3,[1,1]);return qn(Tt(i,Tt(o,Tt(a,c))))})}function qs(t,n,e,r){return void 0===e&&(e="same"),void 0===r&&(r=!1),Me(function(){var i=Tt(rs(t,n.filters,[1,1],e),n.bias);return r?qn(i):i})}function Tu(t,n){Object.keys(t).forEach(function(e){n.some(function(r){return r.originalPath===e})||t[e].dispose()})}function PA(t,n){return function(e,r,i,o){var s=so(t(e*r*i*i),[i,i,e,r]),a=Cr(t(r));return n.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:s,bias:a}}}function mS(t,n){return function(e,r,i){var o=Hc(t(e*r),[e,r]),s=Cr(t(r));return n.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:s}}}var j4=function(){return function t(n,e,r){this.depthwise_filter=n,this.pointwise_filter=e,this.bias=r}}();function vS(t,n){return function(e,r,i){var o=so(t(9*e),[3,3,e,1]),s=so(t(e*r),[1,1,e,r]),a=Cr(t(r));return n.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new j4(o,s,a)}}function yS(t){return function(n){var e=t(n+"/depthwise_filter",4),r=t(n+"/pointwise_filter",4),i=t(n+"/bias",1);return new j4(e,r,i)}}function Jc(t,n){return function(e,r,i){var o=t[e];if(!Iv(o,r))throw new Error("expected weightMap["+e+"] to be a Tensor"+r+"D, instead have "+o);return n.push({originalPath:e,paramPath:i||e}),o}}function Mu(t){var n=t;return{extractWeights:function e(i){var o=n.slice(0,i);return n=n.slice(i),o},getRemainingWeights:function r(){return n}}}function z4(t,n){var e=PA(t,n),r=vS(t,n);function i(s,a,u,c){return void 0===c&&(c=!1),{conv0:c?e(s,a,3,u+"/conv0"):r(s,a,u+"/conv0"),conv1:r(a,a,u+"/conv1"),conv2:r(a,a,u+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function o(s,a,u,c){void 0===c&&(c=!1);var l=i(s,a,u,c);return{conv0:l.conv0,conv1:l.conv1,conv2:l.conv2,conv3:r(a,a,u+"/conv3")}}}}function V4(t){return function(n){return{filters:t(n+"/filters",4),bias:t(n+"/bias",1)}}}function W4(t,n){var e=Jc(t,n),r=V4(e),i=yS(e);return{extractDenseBlock3Params:function o(a,u){return void 0===u&&(u=!1),{conv0:u?r(a+"/conv0"):i(a+"/conv0"),conv1:i(a+"/conv1"),conv2:i(a+"/conv2")}},extractDenseBlock4Params:function s(a,u){return void 0===u&&(u=!1),{conv0:u?r(a+"/conv0"):i(a+"/conv0"),conv1:i(a+"/conv1"),conv2:i(a+"/conv2"),conv3:i(a+"/conv3")}}}}var H4=function(t){function n(){return t.call(this,"FaceFeatureExtractor")||this}return ut(n,t),n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Me(function(){var a=kA(Mv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ee(255)),r.dense0,!0);return a=kA(a,r.dense1),a=kA(a,r.dense2),a=kA(a,r.dense3),_v(a,[7,7],[2,2],"valid")})},n.prototype.forward=function(e){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Kr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(e){return function $ee(t){var n=[],e=W4(t,n).extractDenseBlock4Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return Tu(t,n),{params:r,paramMappings:n}}(e)},n.prototype.extractParams=function(e){return function Zee(t){var n=[],e=Mu(t),i=e.getRemainingWeights,o=z4(e.extractWeights,n).extractDenseBlock4Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),u=o(64,128,"dense2"),c=o(128,256,"dense3");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:s,dense1:a,dense2:u,dense3:c}}}(e)},n}(Su);function _a(t,n){return Me(function(){return Tt(bA(t,n.weights),n.bias)})}function q4(t){var n={},e={};return Object.keys(t).forEach(function(r){(r.startsWith("fc")?e:n)[r]=t[r]}),{featureExtractorMap:n,classifierMap:e}}var G4=function(t){function n(e,r){var i=t.call(this,e)||this;return i._faceFeatureExtractor=r,i}return ut(n,t),Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return Me(function(){var o=e instanceof RA?r.faceFeatureExtractor.forwardInput(e):e;return _a(o.as2D(o.shape[0],-1),i.fc)})},n.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),o=r.paramMappings;this._params=r.params,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return function ete(t,n,e){var r=[],i=Mu(t),s=i.getRemainingWeights,u=mS(i.extractWeights,r)(n,e,"fc");if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:u}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(e){var r=q4(e),o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(r.featureExtractorMap),function tte(t){var n=[],e=Jc(t,n),i={fc:function r(o){return{weights:e(o+"/weights",2),bias:e(o+"/bias",1)}}("fc")};return Tu(t,n),{params:i,paramMappings:n}}(o)},n.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*r+i,s=e.slice(0,e.length-o),a=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(a)},n}(Su),K4=["neutral","happy","sad","angry","fearful","disgusted","surprised"],wS=function(){function t(n){var e=this;if(7!==n.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);K4.forEach(function(r,i){e[r]=n[i]})}return t.prototype.asSortedArray=function(){var n=this;return K4.map(function(e){return{expression:e,probability:n[e]}}).sort(function(e,r){return r.probability-e.probability})},t}(),nte=function(t){function n(e){return void 0===e&&(e=new H4),t.call(this,"FaceExpressionNet",e)||this}return ut(n,t),n.prototype.forwardInput=function(e){var r=this;return Me(function(){return Cu(r.runNet(e))})},n.prototype.forward=function(e){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Kr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.predictExpressions=function(e){return ze(this,void 0,void 0,function(){var r,i,o,s,a=this;return Ve(this,function(u){switch(u.label){case 0:return[4,Kr(e)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(Br(i).map(function(c){return ze(a,void 0,void 0,function(){var l;return Ve(this,function(f){switch(f.label){case 0:return[4,c.data()];case 1:return l=f.sent(),c.dispose(),[2,l]}})})}))];case 3:return o=u.sent(),i.dispose(),s=o.map(function(c){return new wS(c)}),[2,r.isBatchInput?s:s[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(G4);function Q4(t,n){return Object.assign({},t,{expressions:n})}function bS(t){return Rv(t)&&t.landmarks instanceof cp&&t.unshiftedLandmarks instanceof cp&&t.alignedRect instanceof Ro}function OA(t,n){var e=t.detection.box,r=n.shiftBy(e.x,e.y),i=r.align(),o=t.detection.imageDims,s=new Ro(t.detection.score,i.rescale(o.reverse()),o);return Object.assign({},t,{landmarks:r,unshiftedLandmarks:n,alignedRect:s})}function Y4(t,n,e){return Tt(rs(t,n.filters,e,"same"),n.bias)}function AS(t,n,e){void 0===e&&(e=!0);var r=e?qn(t):t;return r=ko(r,n.separable_conv0,[1,1]),r=ko(qn(r),n.separable_conv1,[1,1]),r=Gr(r,[3,3],[2,2],"same"),Tt(r,Y4(t,n.expansion_conv,[2,2]))}var dte=function(t){function n(e){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return ut(n,t),n.prototype.forwardInput=function(e){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return Me(function(){var a=Mv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ee(256)),u=qn(Y4(a,i.entry_flow.conv_in,[2,2]));return u=AS(u,i.entry_flow.reduction_block_0,!1),u=AS(u,i.entry_flow.reduction_block_1),Sv(r._numMainBlocks,0,1).forEach(function(c){u=function lte(t,n){var e=ko(qn(t),n.separable_conv0,[1,1]);return e=ko(qn(e),n.separable_conv1,[1,1]),e=ko(qn(e),n.separable_conv2,[1,1]),Tt(e,t)}(u,i.middle_flow["main_block_"+c])}),u=AS(u,i.exit_flow.reduction_block),u=qn(ko(u,i.exit_flow.separable_conv,[1,1]))})},n.prototype.forward=function(e){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Kr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(e){return function cte(t,n){var e=[],r=function ute(t,n){var e=Jc(t,n),r=V4(e),i=yS(e);return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function o(a){return{separable_conv0:i(a+"/separable_conv0"),separable_conv1:i(a+"/separable_conv1"),expansion_conv:r(a+"/expansion_conv")}},extractMainBlockParams:function s(a){return{separable_conv0:i(a+"/separable_conv0"),separable_conv1:i(a+"/separable_conv1"),separable_conv2:i(a+"/separable_conv2")}}}}(t,e),o=r.extractSeparableConvParams,s=r.extractReductionBlockParams,a=r.extractMainBlockParams,f={conv_in:(0,r.extractConvParams)("entry_flow/conv_in"),reduction_block_0:s("entry_flow/reduction_block_0"),reduction_block_1:s("entry_flow/reduction_block_1")},p={};Sv(n,0,1).forEach(function(w){p["main_block_"+w]=a("middle_flow/main_block_"+w)});var y={reduction_block:s("exit_flow/reduction_block"),separable_conv:o("exit_flow/separable_conv")};return Tu(t,e),{params:{entry_flow:f,middle_flow:p,exit_flow:y},paramMappings:e}}(e,this._numMainBlocks)},n.prototype.extractParams=function(e){return function ate(t,n){var e=[],r=Mu(t),o=r.getRemainingWeights,s=function ste(t,n){var e=PA(t,n),r=vS(t,n);return{extractConvParams:e,extractSeparableConvParams:r,extractReductionBlockParams:function i(s,a,u){return{separable_conv0:r(s,a,u+"/separable_conv0"),separable_conv1:r(a,a,u+"/separable_conv1"),expansion_conv:e(s,a,1,u+"/expansion_conv")}},extractMainBlockParams:function o(s,a){return{separable_conv0:r(s,s,a+"/separable_conv0"),separable_conv1:r(s,s,a+"/separable_conv1"),separable_conv2:r(s,s,a+"/separable_conv2")}}}}(r.extractWeights,e),u=s.extractSeparableConvParams,c=s.extractReductionBlockParams,l=s.extractMainBlockParams,m={conv_in:(0,s.extractConvParams)(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},y={};Sv(n,0,1).forEach(function(C){y["main_block_"+C]=l(128,"middle_flow/main_block_"+C)});var A={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:m,middle_flow:y,exit_flow:A}}}(e,this._numMainBlocks)},n}(Su),xS=function(t){return t.FEMALE="female",t.MALE="male",t}(xS||{}),pte=function(t){function n(e){void 0===e&&(e=new dte(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return ut(n,t),Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return Me(function(){var o=e instanceof RA?r.faceFeatureExtractor.forwardInput(e):e,s=_v(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1);return{age:_a(s,i.fc.age).as1D(),gender:_a(s,i.fc.gender)}})},n.prototype.forwardInput=function(e){var r=this;return Me(function(){var i=r.runNet(e);return{age:i.age,gender:Cu(i.gender)}})},n.prototype.forward=function(e){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Kr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.predictAgeAndGender=function(e){return ze(this,void 0,void 0,function(){var r,i,o,s,a,u,c=this;return Ve(this,function(l){switch(l.label){case 0:return[4,Kr(e)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return i=l.sent(),o=Br(i.age),s=Br(i.gender),a=o.map(function(f,p){return{ageTensor:f,genderTensor:s[p]}}),[4,Promise.all(a.map(function(f){var p=f.ageTensor,g=f.genderTensor;return ze(c,void 0,void 0,function(){var m,y,w,b,A;return Ve(this,function(C){switch(C.label){case 0:return[4,p.data()];case 1:return m=C.sent()[0],[4,g.data()];case 2:return y=C.sent()[0],b=(w=y>.5)?xS.MALE:xS.FEMALE,A=w?y:1-y,p.dispose(),g.dispose(),[2,{age:m,gender:b,genderProbability:A}]}})})}))];case 3:return u=l.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),o=r.paramMappings;this._params=r.params,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return function fte(t){var n=[],e=Mu(t),i=e.getRemainingWeights,o=mS(e.extractWeights,n),s=o(512,1,"fc/age"),a=o(512,2,"fc/gender");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{fc:{age:s,gender:a}}}}(e)},n.prototype.extractParamsFromWeigthMap=function(e){var r=q4(e),o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(r.featureExtractorMap),function hte(t){var n=[],e=Jc(t,n);function r(o){return{weights:e(o+"/weights",2),bias:e(o+"/bias",1)}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Tu(t,n),{params:i,paramMappings:n}}(o)},n.prototype.extractParams=function(e){var i=e.slice(0,e.length-1539),o=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},n}(Su),X4=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.postProcess=function(e,r,i){var o=i.map(function(a){var u=a.width,c=a.height,l=r/Math.max(c,u);return{width:u*l,height:c*l}}),s=o.length;return Me(function(){var a=function(p,g){return To([ba([68],p),ba([68],g)],1).as2D(1,136).as1D()},u=function(p,g){var m=o[p],y=m.width,w=m.height;return g(y,w)?Math.abs(y-w)/2:0};return e.mul(ba([s,136],r)).sub(To(Array.from(Array(s),function(p,g){return a(function(p){return u(p,function(g,m){return g<m})}(g),function(p){return u(p,function(g,m){return m<g})}(g))}))).div(To(Array.from(Array(s),function(p,g){return a(o[g].width,o[g].height)})))})},n.prototype.forwardInput=function(e){var r=this;return Me(function(){var i=r.runNet(e);return r.postProcess(i,e.inputSize,e.inputDimensions.map(function(o){return{height:o[0],width:o[1]}}))})},n.prototype.forward=function(e){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Kr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.detectLandmarks=function(e){return ze(this,void 0,void 0,function(){var r,i,o,s=this;return Ve(this,function(a){switch(a.label){case 0:return[4,Kr(e)];case 1:return r=a.sent(),i=Me(function(){return Br(s.forwardInput(r))}),[4,Promise.all(i.map(function(u,c){return ze(s,void 0,void 0,function(){var l,f,p,g,m;return Ve(this,function(y){switch(y.label){case 0:return p=(f=Array).from,[4,u.data()];case 1:return l=p.apply(f,[y.sent()]),g=l.filter(function(w,b){return C4(b)}),m=l.filter(function(w,b){return!C4(b)}),[2,new I4(Array(68).fill(0).map(function(w,b){return new zt(g[b],m[b])}),{height:r.getInputHeight(c),width:r.getInputWidth(c)})]}})})}))];case 2:return o=a.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(G4),J4=function(t){function n(e){return void 0===e&&(e=new H4),t.call(this,"FaceLandmark68Net",e)||this}return ut(n,t),n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(X4),vte=function(t){function n(){return t.call(this,"TinyFaceFeatureExtractor")||this}return ut(n,t),n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Me(function(){var a=gS(Mv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ee(255)),r.dense0,!0);return a=gS(a,r.dense1),a=gS(a,r.dense2),_v(a,[14,14],[2,2],"valid")})},n.prototype.forward=function(e){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Kr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(e){return function gte(t){var n=[],e=W4(t,n).extractDenseBlock3Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return Tu(t,n),{params:r,paramMappings:n}}(e)},n.prototype.extractParams=function(e){return function mte(t){var n=[],e=Mu(t),i=e.getRemainingWeights,o=z4(e.extractWeights,n).extractDenseBlock3Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),u=o(64,128,"dense2");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{dense0:s,dense1:a,dense2:u}}}(e)},n}(Su),yte=function(t){function n(e){return void 0===e&&(e=new vte),t.call(this,"FaceLandmark68TinyNet",e)||this}return ut(n,t),n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(X4);function CS(t,n,e,r,i){void 0===i&&(i="same");var o=n.conv,a=o.bias,u=rs(t,o.filters,e,i);return u=function wte(t,n){return Tt(bi(t,n.weights),n.biases)}(u=Tt(u,a),n.scale),r?qn(u):u}function Z4(t,n){return CS(t,n,[1,1],!1)}function $4(t,n){return CS(t,n,[2,2],!0,"valid")}function Ate(t,n){function o(a,u,c,l){var f=function r(a,u,c,l){var f=function e(a,u,c){var l=t(a),f=l.length/(u*c*c);if(function Ree(t){return t%1!=0}(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+l.length+", numFilters: "+u+", filterSize: "+c);return Me(function(){return Gc(so(l,[u,f,c,c]),[2,3,1,0])})}(a,u,c),p=Cr(t(u));return n.push({paramPath:l+"/filters"},{paramPath:l+"/bias"}),{filters:f,bias:p}}(a,u,c,l+"/conv"),p=function i(a,u){var c=Cr(t(a)),l=Cr(t(a));return n.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:c,biases:l}}(u,l+"/scale");return{conv:f,scale:p}}return{extractConvLayerParams:o,extractResidualLayerParams:function s(a,u,c,l,f){return void 0===f&&(f=!1),{conv1:o((f?.5:1)*a,u,c,l+"/conv1"),conv2:o(a,u,c,l+"/conv2")}}}}function _te(t){var n=[],e=function Cte(t,n){var e=Jc(t,n);function i(s){var a=e(s+"/conv/filters",4),u=e(s+"/conv/bias",1),c=function r(s){return{weights:e(s+"/scale/weights",1),biases:e(s+"/scale/biases",1)}}(s);return{conv:{filters:a,bias:u},scale:c}}return{extractConvLayerParams:i,extractResidualLayerParams:function o(s){return{conv1:i(s+"/conv1"),conv2:i(s+"/conv2")}}}}(t,n),i=e.extractResidualLayerParams,o=(0,e.extractConvLayerParams)("conv32_down"),s=i("conv32_1"),a=i("conv32_2"),u=i("conv32_3"),c=i("conv64_down"),l=i("conv64_1"),f=i("conv64_2"),p=i("conv64_3"),g=i("conv128_down"),m=i("conv128_1"),y=i("conv128_2"),w=i("conv256_down"),b=i("conv256_1"),A=i("conv256_2"),C=i("conv256_down_out"),_=t.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!function Mee(t){return Iv(t,2)}(_))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+_);var E={conv32_down:o,conv32_1:s,conv32_2:a,conv32_3:u,conv64_down:c,conv64_1:l,conv64_2:f,conv64_3:p,conv128_down:g,conv128_1:m,conv128_2:y,conv256_down:w,conv256_1:b,conv256_2:A,conv256_down_out:C,fc:_};return Tu(t,n),{params:E,paramMappings:n}}function Ea(t,n){var e=function bte(t,n){return CS(t,n,[1,1],!0)}(t,n.conv1);return e=Z4(e,n.conv2),e=Tt(e,t),qn(e)}function NA(t,n){var e=$4(t,n.conv1);e=Z4(e,n.conv2);var r=_v(t,2,2,"valid"),i=Tn(r.shape),o=r.shape[3]!==e.shape[3];if(r.shape[1]!==e.shape[1]||r.shape[2]!==e.shape[2]){var a=Dv(e.shape);a[1]=1;var u=Tn(a),c=Dv((e=Fr([e,u],1)).shape);c[2]=1;var l=Tn(c);e=Fr([e,l],2)}return r=o?Fr([r,i],3):r,e=Tt(r,e),qn(e)}!function(t){ut(function n(){return null!==t&&t.apply(this,arguments)||this},t)}(J4);var Ete=function(t){function n(){return t.call(this,"FaceRecognitionNet")||this}return ut(n,t),n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Me(function(){var a=$4(Mv(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(Ee(256)),r.conv32_down);a=Ea(a=Gr(a,3,2,"valid"),r.conv32_1),a=Ea(a,r.conv32_2),a=Ea(a,r.conv32_3),a=Ea(a=NA(a,r.conv64_down),r.conv64_1),a=Ea(a,r.conv64_2),a=Ea(a,r.conv64_3),a=Ea(a=NA(a,r.conv128_down),r.conv128_1),a=Ea(a,r.conv128_2),a=Ea(a=NA(a,r.conv256_down),r.conv256_1);var u=(a=NA(a=Ea(a,r.conv256_2),r.conv256_down_out)).mean([1,2]);return bA(u,r.fc)})},n.prototype.forward=function(e){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Kr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.computeFaceDescriptor=function(e){return ze(this,void 0,void 0,function(){var r,i,o,s=this;return Ve(this,function(a){switch(a.label){case 0:return[4,Kr(e)];case 1:return r=a.sent(),i=Me(function(){return Br(s.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return o=a.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(e){return _te(e)},n.prototype.extractParams=function(e){return function xte(t){var n=Mu(t),e=n.extractWeights,r=n.getRemainingWeights,i=[],o=Ate(e,i),a=o.extractResidualLayerParams,u=(0,o.extractConvLayerParams)(4704,32,7,"conv32_down"),c=a(9216,32,3,"conv32_1"),l=a(9216,32,3,"conv32_2"),f=a(9216,32,3,"conv32_3"),p=a(36864,64,3,"conv64_down",!0),g=a(36864,64,3,"conv64_1"),m=a(36864,64,3,"conv64_2"),y=a(36864,64,3,"conv64_3"),w=a(147456,128,3,"conv128_down",!0),b=a(147456,128,3,"conv128_1"),A=a(147456,128,3,"conv128_2"),C=a(589824,256,3,"conv256_down",!0),_=a(589824,256,3,"conv256_1"),E=a(589824,256,3,"conv256_2"),I=a(589824,256,3,"conv256_down_out"),P=Me(function(){return Gc(Hc(e(32768),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:u,conv32_1:c,conv32_2:l,conv32_3:f,conv64_down:p,conv64_1:g,conv64_2:m,conv64_3:y,conv128_down:w,conv128_1:b,conv128_2:A,conv256_down:C,conv256_1:_,conv256_2:E,conv256_down_out:I,fc:P},paramMappings:i}}(e)},n}(Su);function eU(t,n,e){return Object.assign({},t,{gender:n,genderProbability:e})}var tU=function(){function t(n){var e=void 0===n?{}:n,r=e.minFaceSize,i=e.scaleFactor,o=e.maxNumScales,s=e.scoreThresholds,a=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=a,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(u){return"number"!=typeof u}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return"number"!=typeof u})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function Da(t,n,e){return Me(function(){var r=rs(t,n.filters,e,"same");return r=Tt(r,n.batch_norm_offset),CI(r,0,6)})}function Nte(t,n,e){var r=t.arraySync(),i=Math.min(r[n][0],r[n][2]),o=Math.min(r[n][1],r[n][3]),s=Math.max(r[n][0],r[n][2]),a=Math.max(r[n][1],r[n][3]),u=Math.min(r[e][0],r[e][2]),c=Math.min(r[e][1],r[e][3]),l=Math.max(r[e][0],r[e][2]),f=Math.max(r[e][1],r[e][3]),p=(s-i)*(a-o),g=(l-u)*(f-c);if(p<=0||g<=0)return 0;var m=Math.max(i,u),y=Math.max(o,c),w=Math.min(s,l),b=Math.min(a,f),A=Math.max(w-m,0)*Math.max(b-y,0);return A/(p+g-A)}function lp(t,n){return Me(function(){var e=t.shape[0];return{boxPredictionEncoding:Vs(qs(t,n.box_encoding_predictor),[e,-1,1,4]),classPrediction:Vs(qs(t,n.class_predictor),[e,-1,3])}})}var FA=function(){function t(n){var e=void 0===n?{}:n,r=e.minConfidence,i=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),nU=function(t){function n(){return t.call(this,"SsdMobilenetv1")||this}return ut(n,t),n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Me(function(){var i=e.toBatchTensor(512,!1).toFloat(),s=function Pte(t,n){return Me(function(){var e=null,r=Da(t,n.conv_0,[2,2]);if([n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13].forEach(function(o,s){var a=s+1,u=function kte(t){return[2,4,6,12].some(function(n){return n===t})?[2,2]:[1,1]}(a);r=function Rte(t,n,e){return Me(function(){var r=wA(t,n.filters,e,"same");return r=wL(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,.0010000000474974513),CI(r,0,6)})}(r,o.depthwise_conv,u),r=Da(r,o.pointwise_conv,[1,1]),11===a&&(e=r)}),null===e)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:e}})}(Lr(bi(i,Ee(.007843137718737125)),Ee(1)),r.mobilenetv1),a=function Ute(t,n,e){return Me(function(){var r=Da(t,e.conv_0,[1,1]),i=Da(r,e.conv_1,[2,2]),o=Da(i,e.conv_2,[1,1]),s=Da(o,e.conv_3,[2,2]),a=Da(s,e.conv_4,[1,1]),u=Da(a,e.conv_5,[2,2]),c=Da(u,e.conv_6,[1,1]),l=Da(c,e.conv_7,[2,2]),f=lp(n,e.box_predictor_0),p=lp(t,e.box_predictor_1),g=lp(i,e.box_predictor_2),m=lp(s,e.box_predictor_3),y=lp(u,e.box_predictor_4),w=lp(l,e.box_predictor_5);return{boxPredictions:Fr([f.boxPredictionEncoding,p.boxPredictionEncoding,g.boxPredictionEncoding,m.boxPredictionEncoding,y.boxPredictionEncoding,w.boxPredictionEncoding],1),classPredictions:Fr([f.classPrediction,p.classPrediction,g.classPrediction,m.classPrediction,y.classPrediction,w.classPrediction],1)}})}(s.out,s.conv11,r.prediction_layer);return function Lte(t,n,e){return Me(function(){var r=t.shape[0],i=function Bte(t,n){var e=function Fte(t){var n=Br(Gc(t,[1,0])),e=[Lr(n[2],n[0]),Lr(n[3],n[1])];return{sizes:e,centers:[Tt(n[0],Hs(e[0],Ee(2))),Tt(n[1],Hs(e[1],Ee(2)))]}}(t),r=e.sizes,i=e.centers,o=Br(Gc(n,[1,0])),s=Hs(bi(_I(Hs(o[2],Ee(5))),r[0]),Ee(2)),a=Tt(bi(Hs(o[0],Ee(10)),r[0]),i[0]),u=Hs(bi(_I(Hs(o[3],Ee(5))),r[1]),Ee(2)),c=Tt(bi(Hs(o[1],Ee(10)),r[1]),i[1]);return Gc(To([Lr(a,s),Lr(c,u),Tt(a,s),Tt(c,u)]),[1,0])}(Vs(Xh(e.extra_dim,[r,1,1]),[-1,4]),Vs(t,[-1,4]));i=Vs(i,[r,i.shape[0]/r,4]);var o=gL(Aa(n,[0,0,1],[-1,-1,-1])),s=Aa(o,[0,0,0],[-1,-1,1]);return s=Vs(s,[r,s.shape[1]]),{boxes:Br(i),scores:Br(s)}})}(a.boxPredictions,a.classPredictions,r.output_layer)})},n.prototype.forward=function(e){return ze(this,void 0,void 0,function(){var r;return Ve(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Kr(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},n.prototype.locateFaces=function(e,r){return void 0===r&&(r={}),ze(this,void 0,void 0,function(){var i,o,s,a,u,c,l,f,p,g,m,y,w,A,C,_,E,I,P,O;return Ve(this,function(F){switch(F.label){case 0:return i=new FA(r),o=i.maxResults,s=i.minConfidence,[4,Kr(e)];case 1:for(a=F.sent(),u=this.forwardInput(a),f=(c=u.boxes)[0],p=(l=u.scores)[0],g=1;g<c.length;g++)c[g].dispose(),l[g].dispose();return w=(y=Array).from,[4,p.data()];case 2:return m=w.apply(y,[F.sent()]),A=function Ote(t,n,e,r,i){var s=Math.min(e,t.shape[0]),a=n.map(function(l,f){return{score:l,boxIndex:f}}).filter(function(l){return l.score>i}).sort(function(l,f){return f.score-l.score}),u=function(l){return l<=r?1:0},c=[];return a.forEach(function(l){if(!(c.length>=s)){for(var f=l.score,p=c.length-1;p>=0;--p){var g=Nte(t,l.boxIndex,c[p]);if(0!==g&&(l.score*=u(g),l.score<=i))break}f===l.score&&c.push(l.boxIndex)}}),c}(f,m,o,.5,s),C=a.getReshapedInputDimensions(0),E=(_=a.inputSize)/C.width,I=_/C.height,P=f.arraySync(),O=A.map(function(N){var Q=[Math.max(0,P[N][0]),Math.min(1,P[N][2])].map(function(J){return J*I}),q=Q[0],$=Q[1],ce=[Math.max(0,P[N][1]),Math.min(1,P[N][3])].map(function(J){return J*E}),de=ce[0];return new Ro(m[N],new aS(de,q,ce[1]-de,$-q),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),f.dispose(),p.dispose(),[2,O]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(e){return function Tte(t){var n=[],e=function Ste(t,n){var e=Jc(t,n);function r(c,l,f){return{filters:e(c+"/Conv2d_"+l+"_pointwise/weights",4,f+"/filters"),batch_norm_offset:e(c+"/Conv2d_"+l+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset")}}function i(c){var l="mobilenetv1/conv_"+c,f="MobilenetV1/Conv2d_"+c+"_depthwise",p=l+"/depthwise_conv",g=l+"/pointwise_conv";return{depthwise_conv:{filters:e(f+"/depthwise_weights",4,p+"/filters"),batch_norm_scale:e(f+"/BatchNorm/gamma",1,p+"/batch_norm_scale"),batch_norm_offset:e(f+"/BatchNorm/beta",1,p+"/batch_norm_offset"),batch_norm_mean:e(f+"/BatchNorm/moving_mean",1,p+"/batch_norm_mean"),batch_norm_variance:e(f+"/BatchNorm/moving_variance",1,p+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",c,g)}}function s(c,l){return{filters:e(c+"/weights",4,l+"/filters"),bias:e(c+"/biases",1,l+"/bias")}}function a(c){return{box_encoding_predictor:s("Prediction/BoxPredictor_"+c+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+c+"/box_encoding_predictor"),class_predictor:s("Prediction/BoxPredictor_"+c+"/ClassPredictor","prediction_layer/box_predictor_"+c+"/class_predictor")}}return{extractMobilenetV1Params:function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}}}(t,n),r=e.extractMobilenetV1Params,i=e.extractPredictionLayerParams,o=t["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!IA(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var s={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return Tu(t,n),{params:s,paramMappings:n}}(e)},n.prototype.extractParams=function(e){return function Ite(t){var n=[],e=Mu(t),r=e.extractWeights,i=e.getRemainingWeights,o=function Dte(t,n){function r(u,c,l,f,p){var g=so(t(u*c*l*l),[l,l,u,c]),m=Cr(t(c));return n.push({paramPath:f+"/filters"},{paramPath:f+"/"+(p?"batch_norm_offset":"bias")}),{filters:g,bias:m}}function i(u,c,l,f){var p=r(u,c,l,f,!0);return{filters:p.filters,batch_norm_offset:p.bias}}function o(u,c,l){var f=function e(u,c){var l=so(t(9*u),[3,3,u,1]),f=Cr(t(u)),p=Cr(t(u)),g=Cr(t(u)),m=Cr(t(u));return n.push({paramPath:c+"/filters"},{paramPath:c+"/batch_norm_scale"},{paramPath:c+"/batch_norm_offset"},{paramPath:c+"/batch_norm_mean"},{paramPath:c+"/batch_norm_variance"}),{filters:l,batch_norm_scale:f,batch_norm_offset:p,batch_norm_mean:g,batch_norm_variance:m}}(u,l+"/depthwise_conv");return{depthwise_conv:f,pointwise_conv:i(u,c,1,l+"/pointwise_conv")}}return{extractMobilenetV1Params:function s(){return{conv_0:i(3,32,3,"mobilenetv1/conv_0"),conv_1:o(32,64,"mobilenetv1/conv_1"),conv_2:o(64,128,"mobilenetv1/conv_2"),conv_3:o(128,128,"mobilenetv1/conv_3"),conv_4:o(128,256,"mobilenetv1/conv_4"),conv_5:o(256,256,"mobilenetv1/conv_5"),conv_6:o(256,512,"mobilenetv1/conv_6"),conv_7:o(512,512,"mobilenetv1/conv_7"),conv_8:o(512,512,"mobilenetv1/conv_8"),conv_9:o(512,512,"mobilenetv1/conv_9"),conv_10:o(512,512,"mobilenetv1/conv_10"),conv_11:o(512,512,"mobilenetv1/conv_11"),conv_12:o(512,1024,"mobilenetv1/conv_12"),conv_13:o(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function a(){return{conv_0:i(1024,256,1,"prediction_layer/conv_0"),conv_1:i(256,512,3,"prediction_layer/conv_1"),conv_2:i(512,128,1,"prediction_layer/conv_2"),conv_3:i(128,256,3,"prediction_layer/conv_3"),conv_4:i(256,128,1,"prediction_layer/conv_4"),conv_5:i(128,256,3,"prediction_layer/conv_5"),conv_6:i(256,64,1,"prediction_layer/conv_6"),conv_7:i(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:r(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:r(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:r(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:r(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:r(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(r,n),a=o.extractPredictionLayerParams,u=(0,o.extractMobilenetV1Params)(),c=a(),f={extra_dim:JD(r(20472),[1,5118,4])};if(n.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:f},paramMappings:n}}(e)},n}(Su);!function(t){ut(function n(){return null!==t&&t.apply(this,arguments)||this},t)}(nU);var Vte=[new zt(.738768,.874946),new zt(2.42204,2.65704),new zt(4.30971,7.04493),new zt(10.246,4.59428),new zt(12.6868,11.8741)],Wte=[new zt(1.603231,2.094468),new zt(6.041143,7.080126),new zt(2.882459,3.518061),new zt(4.266906,5.178857),new zt(9.041765,10.66308)],Hte=[117.001,114.697,97.404],BA=function(t){return"number"==typeof t};function _S(t){return Me(function(){var n=bi(t,Ee(.10000000149011612));return Tt(qn(Lr(t,n)),n)})}function Zc(t,n){return Me(function(){var e=bd(t,[[0,0],[1,1],[1,1],[0,0]]);return e=rs(e,n.conv.filters,[1,1],"valid"),e=Lr(e,n.bn.sub),e=bi(e,n.bn.truediv),_S(e=Tt(e,n.conv.bias))})}function $c(t,n){return Me(function(){var e=bd(t,[[0,0],[1,1],[1,1],[0,0]]);return e=TI(e,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),_S(e=Tt(e,n.bias))})}var ES=function(){function t(n){var e=void 0===n?{}:n,r=e.inputSize,i=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),rU=function(t){function n(e){var r=t.call(this,"TinyYolov2")||this;return function Kte(t){if(!t)throw new Error("invalid config: "+t);if("boolean"!=typeof t.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!BA(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(n){return"string"==typeof n}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(n){return n||{}}).every(function(n){return BA(n.x)&&BA(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||3!==t.meanRgb.length||!t.meanRgb.every(BA)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}(e),r._config=e,r}return ut(n,t),Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(e,r){var i=Zc(e,r.conv0);return i=Zc(i=Gr(i,[2,2],[2,2],"same"),r.conv1),i=Zc(i=Gr(i,[2,2],[2,2],"same"),r.conv2),i=Zc(i=Gr(i,[2,2],[2,2],"same"),r.conv3),i=Zc(i=Gr(i,[2,2],[2,2],"same"),r.conv4),i=Zc(i=Gr(i,[2,2],[2,2],"same"),r.conv5),i=Zc(i=Gr(i,[2,2],[1,1],"same"),r.conv6),qs(i=Zc(i,r.conv7),r.conv8,"valid",!1)},n.prototype.runMobilenet=function(e,r){var i=this.config.isFirstLayerConv2d?_S(qs(e,r.conv0,"valid",!1)):$c(e,r.conv0);return i=$c(i=Gr(i,[2,2],[2,2],"same"),r.conv1),i=$c(i=Gr(i,[2,2],[2,2],"same"),r.conv2),i=$c(i=Gr(i,[2,2],[2,2],"same"),r.conv3),i=$c(i=Gr(i,[2,2],[2,2],"same"),r.conv4),i=$c(i=Gr(i,[2,2],[2,2],"same"),r.conv5),i=Gr(i,[2,2],[1,1],"same"),i=r.conv6?$c(i,r.conv6):i,qs(i=r.conv7?$c(i,r.conv7):i,r.conv8,"valid",!1)},n.prototype.forwardInput=function(e,r){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return Me(function(){var s=e.toBatchTensor(r,!1).toFloat();return s=(s=i.config.meanRgb?Mv(s,i.config.meanRgb):s).div(Ee(256)),i.config.withSeparableConvs?i.runMobilenet(s,o):i.runTinyYolov2(s,o)})},n.prototype.forward=function(e,r){return ze(this,void 0,void 0,function(){var i;return Ve(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Kr(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},n.prototype.detect=function(e,r){return void 0===r&&(r={}),ze(this,void 0,void 0,function(){var i,o,s,a,u,c,l,f,p,g,m,y,A=this;return Ve(this,function(C){switch(C.label){case 0:return i=new ES(r),o=i.inputSize,s=i.scoreThreshold,[4,Kr(e)];case 1:return a=C.sent(),[4,this.forwardInput(a,o)];case 2:return u=C.sent(),c=Me(function(){return Br(u)[0].expandDims()}),l={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(c,a.getReshapedInputDimensions(0),s)];case 3:return f=C.sent(),u.dispose(),c.dispose(),p=f.map(function(_){return _.box}),g=f.map(function(_){return _.score}),m=f.map(function(_){return _.classScore}),y=f.map(function(_){return A.config.classes[_.label]}),[2,Tv(p.map(function(_){return _.rescale(o)}),g,this.config.iouThreshold,!0).map(function(_){return new D4(g[_],m[_],y[_],p[_],l)})]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(e){return function Jte(t,n){var a,e=[],r=function Xte(t,n){var e=Jc(t,n);function i(a){return{filters:e(a+"/filters",4),bias:e(a+"/bias",1)}}return{extractConvParams:i,extractConvWithBatchNormParams:function o(a){var u=i(a+"/conv"),c=function r(a){return{sub:e(a+"/sub",1),truediv:e(a+"/truediv",1)}}(a+"/bn");return{conv:u,bn:c}},extractSeparableConvParams:yS(e)}}(t,e),i=r.extractConvParams,o=r.extractConvWithBatchNormParams,s=r.extractSeparableConvParams;if(n.withSeparableConvs){var u=n.filterSizes&&n.filterSizes.length||9;a={conv0:n.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else a={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return Tu(t,e),{params:a,paramMappings:e}}(e,this.config)},n.prototype.extractParams=function(e){var r=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(7!==i&&8!==i&&9!==i)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return function Yte(t,n,e,r){var p,i=Mu(t),s=i.getRemainingWeights,a=[],u=function Qte(t,n){var e=PA(t,n),o=vS(t,n);return{extractConvParams:e,extractConvWithBatchNormParams:function i(s,a,u){var c=e(s,a,3,u+"/conv"),l=function r(s,a){var u=Cr(t(s)),c=Cr(t(s));return n.push({paramPath:a+"/sub"},{paramPath:a+"/truediv"}),{sub:u,truediv:c}}(a,u+"/bn");return{conv:c,bn:l}},extractSeparableConvParams:o}}(i.extractWeights,a),c=u.extractConvParams,l=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams;if(n.withSeparableConvs){var g=r[0],m=r[1],y=r[2],w=r[3],b=r[4],A=r[5],C=r[6],_=r[7],E=r[8];p={conv0:n.isFirstLayerConv2d?c(g,m,3,"conv0"):f(g,m,"conv0"),conv1:f(m,y,"conv1"),conv2:f(y,w,"conv2"),conv3:f(w,b,"conv3"),conv4:f(b,A,"conv4"),conv5:f(A,C,"conv5"),conv6:_?f(C,_,"conv6"):void 0,conv7:E?f(_,E,"conv7"):void 0,conv8:c(E||_||C,5*e,1,"conv8")}}else y=r[2],w=r[3],b=r[4],A=r[5],C=r[6],_=r[7],E=r[8],p={conv0:l(g=r[0],m=r[1],"conv0"),conv1:l(m,y,"conv1"),conv2:l(y,w,"conv2"),conv3:l(w,b,"conv3"),conv4:l(b,A,"conv4"),conv5:l(A,C,"conv5"),conv6:l(C,_,"conv6"),conv7:l(_,E,"conv7"),conv8:c(E,5*e,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:p,paramMappings:a}}(e,this.config,this.boxEncodingSize,r)},n.prototype.extractBoxes=function(e,r,i){return ze(this,void 0,void 0,function(){var o,s,a,u,c,l,f,p,g,m,y,w,b,A,C,_,E,I,P,O,F,N,Q,q,$,ce,de,X,J,Z=this;return Ve(this,function(oe){switch(oe.label){case 0:return o=r.width,s=r.height,a=Math.max(o,s),u=a/o,c=a/s,l=e.shape[1],f=this.config.anchors.length,p=Me(function(){var pe=e.reshape([l,l,f,Z.boxEncodingSize]);return[pe.slice([0,0,0,0],[l,l,f,4]),pe.slice([0,0,0,4],[l,l,f,1]),Z.withClassScores?Cu(pe.slice([0,0,0,5],[l,l,f,Z.config.classes.length]),3):Ee(0)]}),g=p[0],y=p[2],w=[],[4,(m=p[1]).array()];case 1:return b=oe.sent(),[4,g.array()];case 2:A=oe.sent(),C=0,oe.label=3;case 3:if(!(C<l))return[3,12];_=0,oe.label=4;case 4:if(!(_<l))return[3,11];E=0,oe.label=5;case 5:return E<f?(I=sS(b[C][_][E][0]),!i||I>i?(P=(_+sS(A[C][_][E][0]))/l*u,O=(C+sS(A[C][_][E][1]))/l*c,F=Math.exp(A[C][_][E][2])*this.config.anchors[E].x/l*u,N=Math.exp(A[C][_][E][3])*this.config.anchors[E].y/l*c,Q=P-F/2,q=O-N/2,$={row:C,col:_,anchor:E},this.withClassScores?[4,this.extractPredictedClass(y,$)]:[3,7]):[3,9]):[3,10];case 6:return J=oe.sent(),[3,8];case 7:J={classScore:1,label:0},oe.label=8;case 8:de=(ce=J).classScore,X=ce.label,w.push(xi({box:new SA(Q,q,Q+F,q+N),score:I,classScore:I*de,label:X},$)),oe.label=9;case 9:return E++,[3,5];case 10:return _++,[3,4];case 11:return C++,[3,3];case 12:return g.dispose(),m.dispose(),y.dispose(),[2,w]}})})},n.prototype.extractPredictedClass=function(e,r){return ze(this,void 0,void 0,function(){var i,o,s,a;return Ve(this,function(u){switch(u.label){case 0:return i=r.row,o=r.col,s=r.anchor,[4,e.array()];case 1:return a=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(c,l){return a[i][o][s][l]}).map(function(c,l){return{classScore:c,label:l}}).reduce(function(c,l){return c.classScore>l.classScore?c:l})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(Su),$te=function(t){function n(e){void 0===e&&(e=!0);var i=Object.assign({},{withSeparableConvs:e,iouThreshold:.4,classes:["face"]},e?{anchors:Wte,meanRgb:Hte}:{anchors:Vte,withClassScores:!0});return t.call(this,i)||this}return ut(n,t),Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return ze(this,void 0,void 0,function(){return Ve(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return[2,o.sent().map(function(s){return new Ro(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n}(rU),iU=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return ut(n,t),n}(ES),Pv=function(){function t(){}return t.prototype.then=function(n){return ze(this,void 0,void 0,function(){var e;return Ve(this,function(r){switch(r.label){case 0:return e=n,[4,this.run()];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return ze(this,void 0,void 0,function(){return Ve(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},t}();function oU(t,n){return Object.assign({},t,{descriptor:n})}function LA(t,n,e,r,i){return void 0===i&&(i=function(o){return o.alignedRect}),ze(this,void 0,void 0,function(){var o,s,a,u,c;return Ve(this,function(l){switch(l.label){case 0:return o=t.map(function(f){return bS(f)?i(f):f.detection}),(a=r)?[3,5]:n instanceof hn?[4,pS(n,o)]:[3,2];case 1:return u=l.sent(),[3,4];case 2:return[4,hS(n,o)];case 3:u=l.sent(),l.label=4;case 4:a=u,l.label=5;case 5:return[4,e(s=a)];case 6:return c=l.sent(),s.forEach(function(f){return f instanceof hn&&f.dispose()}),[2,c]}})})}function DS(t,n,e,r,i){return ze(this,void 0,void 0,function(){var o=this;return Ve(this,function(s){return[2,LA([t],n,function(a){return ze(o,void 0,void 0,function(){return Ve(this,function(u){return[2,e(a[0])]})})},r,i)]})})}function IS(t,n){var r=n[1];return{height:Math.floor(n[0]*t),width:Math.floor(r*t)}}var SS=function(t){function n(e,r,i,o){return t.call(this,{left:e,top:r,right:i,bottom:o},!0)||this}return ut(n,t),n}(xa);function sU(t){return Me(function(){return bi(Lr(t,Ee(127.5)),Ee(.0078125))})}function dp(t,n){return Me(function(){return Tt(qn(t),bi(n,pA(qn(pA(t)))))})}function TS(t,n,e){return void 0===e&&(e=!1),Me(function(){var r=qs(t,n.conv1,"valid");return r=dp(r,n.prelu1_alpha),r=dp(r=qs(r=Gr(r,e?[2,2]:[3,3],[2,2],"same"),n.conv2,"valid"),n.prelu2_alpha),dp(r=qs(r=e?r:Gr(r,[3,3],[2,2],"valid"),n.conv3,"valid"),n.prelu3_alpha)})}function cne(t,n,e,r,i){i.stage1=[];var o=n.map(function(p){return Me(function(){var g={scale:p},m=function ane(t,n){return Me(function(){var e=IS(n,t.shape.slice(1)),s=sU(OI.resizeBilinear(t,[e.height,e.width]));return Gc(s,[0,2,1,3])})}(t,p),y=Date.now(),w=function sne(t,n){return Me(function(){var e=TS(t,n,!0),r=qs(e,n.conv4_1,"valid"),i=ns(AA(r,3),3);return{prob:Cu(Lr(r,i),3),regions:qs(e,n.conv4_2,"valid")}})}(m,r),b=w.prob,A=w.regions;return g.pnet=Date.now()-y,{scoresTensor:Br(Br(b,3)[1])[0],regionsTensor:Br(A)[0],scale:p,statsForScale:g}})}),s=o.map(function(p){var g=p.scoresTensor,m=p.regionsTensor,w=p.statsForScale,b=function une(t,n,e,r){for(var i=[],o=t.arraySync(),s=0;s<t.shape[0];s++)for(var a=0;a<t.shape[1];a++)o[s][a]>=r&&i.push(new zt(a,s));return i.map(function(c){var l=new SA(Math.round((2*c.y+1)/e),Math.round((2*c.x+1)/e),Math.round((2*c.y+12)/e),Math.round((2*c.x+12)/e)),f=o[c.y][c.x],p=n.arraySync();return{cell:l,score:f,region:new SS(p[c.y][c.x][0],p[c.y][c.x][1],p[c.y][c.x][2],p[c.y][c.x][3])}})}(g,m,p.scale,e);if(g.dispose(),m.dispose(),!b.length)return i.stage1.push(w),[];var A=Date.now(),C=Tv(b.map(function(_){return _.cell}),b.map(function(_){return _.score}),.5);return w.nms=Date.now()-A,w.numBoxes=C.length,i.stage1.push(w),C.map(function(_){return b[_]})}),a=s.reduce(function(p,g){return p.concat(g)},[]),u=[],c=[];if(a.length>0){var l=Date.now(),f=Tv(a.map(function(p){return p.cell}),a.map(function(p){return p.score}),.7);i.stage1_nms=Date.now()-l,c=f.map(function(p){return a[p].score}),u=f.map(function(p){return a[p]}).map(function(p){var g=p.cell,m=p.region;return new SA(g.left+m.left*g.width,g.top+m.top*g.height,g.right+m.right*g.width,g.bottom+m.bottom*g.height).toSquare().round()})}return{boxes:u,scores:c}}function aU(t,n,e){var r=e.width,i=e.height;return ze(this,void 0,void 0,function(){var o,s,a,u=this;return Ve(this,function(c){switch(c.label){case 0:return o=Ca(t),[4,Promise.all(n.map(function(l){return ze(u,void 0,void 0,function(){var f,w,b,A;return Ve(this,function(C){return f=l.padAtBorders(t.height,t.width),A=o.getImageData(w=f.x-1,b=f.y-1,f.ex-w,f.ey-b),[2,Ci.isNodejs()?fS(A):createImageBitmap(A)]})})}))];case 1:return s=c.sent(),a=[],s.forEach(function(l){var p=Ca(MA({width:r,height:i}));p.drawImage(l,0,0,r,i);for(var g=p.getImageData(0,0,r,i).data,m=[],y=0;y<g.length;y+=4)m.push(g[y+2]),m.push(g[y+1]),m.push(g[y]);a.push(m)}),[2,a.map(function(l){return Me(function(){return sU(Gc(so(l,[1,r,i,3]),[0,2,1,3]).toFloat())})})]}})})}function dne(t,n,e,r,i){return ze(this,void 0,void 0,function(){var o,s,a,u,c,l,f,p,g,m,y,w,b,A;return Ve(this,function(C){switch(C.label){case 0:return o=Date.now(),[4,aU(t,n,{width:24,height:24})];case 1:return s=C.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(_){var E=function lne(t,n){return Me(function(){var e=TS(t,n),o=dp(_a(Vs(e,[e.shape[0],n.fc1.weights.shape[0]]),n.fc1),n.prelu4_alpha),s=_a(o,n.fc2_1),a=ns(AA(s,1),1),u=Cu(Lr(s,a),1),c=_a(o,n.fc2_2);return{scores:Br(u,1)[1],regions:c}})}(_,r);return _.dispose(),E}),i.stage2_rnet=Date.now()-o,u=a.length>1?Fr(a.map(function(_){return _.scores})):a[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[C.sent()]),u.dispose(),p=c.map(function(_,E){return{score:_,idx:E}}).filter(function(_){return _.score>e}).map(function(_){return _.idx}),g=p.map(function(_){return n[_]}),m=p.map(function(_){return c[_]}),y=[],w=[],g.length>0&&(o=Date.now(),b=Tv(g,m,.7),i.stage2_nms=Date.now()-o,A=b.map(function(_){var E=a[p[_]].regions.arraySync();return new SS(E[0][0],E[0][1],E[0][2],E[0][3])}),w=b.map(function(_){return m[_]}),y=b.map(function(_,E){return g[_].calibrate(A[E])})),a.forEach(function(_){_.regions.dispose(),_.scores.dispose()}),[2,{boxes:y,scores:w}]}})})}function hne(t,n,e,r,i){return ze(this,void 0,void 0,function(){var o,s,a,u,c,l,f,p,g,m,y,w,b,A,C;return Ve(this,function(_){switch(_.label){case 0:return o=Date.now(),[4,aU(t,n,{width:48,height:48})];case 1:return s=_.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(E){var I=function fne(t,n){return Me(function(){var e=TS(t,n);e=dp(e=qs(e=Gr(e,[2,2],[2,2],"same"),n.conv4,"valid"),n.prelu4_alpha);var o=dp(_a(Vs(e,[e.shape[0],n.fc1.weights.shape[0]]),n.fc1),n.prelu5_alpha),s=_a(o,n.fc2_1),a=ns(AA(s,1),1),u=Cu(Lr(s,a),1),c=_a(o,n.fc2_2),l=_a(o,n.fc2_3);return{scores:Br(u,1)[1],regions:c,points:l}})}(E,r);return E.dispose(),I}),i.stage3_onet=Date.now()-o,u=a.length>1?Fr(a.map(function(E){return E.scores})):a[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[_.sent()]),u.dispose(),p=c.map(function(E,I){return{score:E,idx:I}}).filter(function(E){return E.score>e}).map(function(E){return E.idx}),g=p.map(function(E){var I=a[E].regions.arraySync();return new SS(I[0][0],I[0][1],I[0][2],I[0][3])}),m=p.map(function(E,I){return n[E].calibrate(g[I])}),y=p.map(function(E){return c[E]}),w=[],b=[],A=[],m.length>0&&(o=Date.now(),C=Tv(m,y,.7,!1),i.stage3_nms=Date.now()-o,w=C.map(function(E){return m[E]}),b=C.map(function(E){return y[E]}),A=C.map(function(E,I){return Array(5).fill(0).map(function(P,O){var F=a[E].points.arraySync();return new zt(F[0][O]*(w[I].width+1)+w[I].left,F[0][O+5]*(w[I].height+1)+w[I].top)})})),a.forEach(function(E){E.regions.dispose(),E.scores.dispose(),E.points.dispose()}),[2,{boxes:w,scores:b,points:A}]}})})}var pne=function(t){function n(){return t.call(this,"Mtcnn")||this}return ut(n,t),n.prototype.load=function(e){return ze(this,void 0,void 0,function(){return Ve(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,e)]})})},n.prototype.loadFromDisk=function(e){return ze(this,void 0,void 0,function(){return Ve(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,e)]})})},n.prototype.forwardInput=function(e,r){return void 0===r&&(r={}),ze(this,void 0,void 0,function(){var i,o,s,a,u,c,l,f,p,g,m,y,w,b,C,_,E,I,P,O;return Ve(this,function(F){switch(F.label){case 0:if(!(i=this.params))throw new Error("Mtcnn - load model before inference");if(!(o=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},a=Date.now(),u=Me(function(){return function ene(t){return Me(function(){return To(Br(t,3).reverse(),3)})}(ns(ZI.fromPixels(o)).toFloat())}),c=function(N){return u.dispose(),s.total=Date.now()-a,N},l=u.shape.slice(1),f=l[0],p=l[1],g=new tU(r),m=g.minFaceSize,y=g.scaleFactor,w=g.maxNumScales,b=g.scoreThresholds,C=(g.scaleSteps||function one(t,n,e){for(var o=12/t,s=[],a=Math.min(e[0],e[1])*o,u=0;a>=12;)s.push(o*Math.pow(n,u)),a*=n,u+=1;return s}(m,y,[f,p])).filter(function(N){var Q=IS(N,[f,p]);return Math.min(Q.width,Q.height)>12}).slice(0,w),s.scales=C,s.pyramid=C.map(function(N){return IS(N,[f,p])}),_=Date.now(),[4,cne(u,C,b[0],i.pnet,s)];case 1:return E=F.sent(),s.total_stage1=Date.now()-_,E.boxes.length?(s.stage2_numInputBoxes=E.boxes.length,_=Date.now(),[4,dne(o,E.boxes,b[1],i.rnet,s)]):[2,c({results:[],stats:s})];case 2:return I=F.sent(),s.total_stage2=Date.now()-_,I.boxes.length?(s.stage3_numInputBoxes=I.boxes.length,_=Date.now(),[4,hne(o,I.boxes,b[2],i.onet,s)]):[2,c({results:[],stats:s})];case 3:return P=F.sent(),s.total_stage3=Date.now()-_,O=P.boxes.map(function(N,Q){return OA(kv({},new Ro(P.scores[Q],new aS(N.left/p,N.top/f,N.width/p,N.height/f),{height:f,width:p})),new Uee(P.points[Q].map(function(q){return q.sub(new zt(N.left,N.top)).div(new zt(N.width,N.height))}),{width:N.width,height:N.height}))}),[2,c({results:O,stats:s})]}})})},n.prototype.forward=function(e,r){return void 0===r&&(r={}),ze(this,void 0,void 0,function(){var i;return Ve(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Kr(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},n.prototype.forwardWithStats=function(e,r){return void 0===r&&(r={}),ze(this,void 0,void 0,function(){var i;return Ve(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Kr(e)];case 1:return[2,i.apply(this,[o.sent(),r])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(e){return function ine(t){var n=[],e=function rne(t,n){var e=Jc(t,n);function r(l){return{filters:e(l+"/weights",4,l+"/filters"),bias:e(l+"/bias",1)}}function i(l){return{weights:e(l+"/weights",2),bias:e(l+"/bias",1)}}function o(l){return e(l,1)}function s(l){return{conv1:r(l+"/conv1"),prelu1_alpha:o(l+"/prelu1_alpha"),conv2:r(l+"/conv2"),prelu2_alpha:o(l+"/prelu2_alpha"),conv3:r(l+"/conv3"),prelu3_alpha:o(l+"/prelu3_alpha")}}return{extractPNetParams:function a(){var l=s("pnet"),f=r("pnet/conv4_1"),p=r("pnet/conv4_2");return xi(xi({},l),{conv4_1:f,conv4_2:p})},extractRNetParams:function u(){var l=s("rnet"),f=i("rnet/fc1"),p=o("rnet/prelu4_alpha"),g=i("rnet/fc2_1"),m=i("rnet/fc2_2");return xi(xi({},l),{fc1:f,prelu4_alpha:p,fc2_1:g,fc2_2:m})},extractONetParams:function c(){var l=s("onet"),f=r("onet/conv4"),p=o("onet/prelu4_alpha"),g=i("onet/fc1"),m=o("onet/prelu5_alpha"),y=i("onet/fc2_1"),w=i("onet/fc2_2"),b=i("onet/fc2_3");return xi(xi({},l),{conv4:f,prelu4_alpha:p,fc1:g,prelu5_alpha:m,fc2_1:y,fc2_2:w,fc2_3:b})}}}(t,n),i=e.extractRNetParams,o=e.extractONetParams,s=(0,e.extractPNetParams)(),a=i(),u=o();return Tu(t,n),{params:{pnet:s,rnet:a,onet:u},paramMappings:n}}(e)},n.prototype.extractParams=function(e){return function nne(t){var n=Mu(t),r=n.getRemainingWeights,i=[],o=function tne(t,n){var e=PA(t,n),r=mS(t,n);function i(c,l){var f=Cr(t(c));return n.push({paramPath:l}),f}function o(c,l,f){return void 0===f&&(f=!1),{conv1:e(c[0],c[1],3,l+"/conv1"),prelu1_alpha:i(c[1],l+"/prelu1_alpha"),conv2:e(c[1],c[2],3,l+"/conv2"),prelu2_alpha:i(c[2],l+"/prelu2_alpha"),conv3:e(c[2],c[3],f?2:3,l+"/conv3"),prelu3_alpha:i(c[3],l+"/prelu3_alpha")}}return{extractPNetParams:function s(){var c=o([3,10,16,32],"pnet"),l=e(32,2,1,"pnet/conv4_1"),f=e(32,4,1,"pnet/conv4_2");return xi(xi({},c),{conv4_1:l,conv4_2:f})},extractRNetParams:function a(){var c=o([3,28,48,64],"rnet",!0),l=r(576,128,"rnet/fc1"),f=i(128,"rnet/prelu4_alpha"),p=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return xi(xi({},c),{fc1:l,prelu4_alpha:f,fc2_1:p,fc2_2:g})},extractONetParams:function u(){var c=o([3,32,64,64],"onet"),l=e(64,128,2,"onet/conv4"),f=i(128,"onet/prelu4_alpha"),p=r(1152,256,"onet/fc1"),g=i(256,"onet/prelu5_alpha"),m=r(256,2,"onet/fc2_1"),y=r(256,4,"onet/fc2_2"),w=r(256,10,"onet/fc2_3");return xi(xi({},c),{conv4:l,prelu4_alpha:f,fc1:p,prelu5_alpha:g,fc2_1:m,fc2_2:y,fc2_3:w})}}}(n.extractWeights,i),a=o.extractRNetParams,u=o.extractONetParams,c=(0,o.extractPNetParams)(),l=a(),f=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:l,onet:f},paramMappings:i}}(e)},n}(Su),mne=[new zt(1.603231,2.094468),new zt(6.041143,7.080126),new zt(2.882459,3.518061),new zt(4.266906,5.178857),new zt(9.041765,10.66308)],vne=[117.001,114.697,97.404],yne=function(t){function n(){return t.call(this,{withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:mne,meanRgb:vne,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})||this}return ut(n,t),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return ze(this,void 0,void 0,function(){return Ve(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return[2,o.sent().map(function(s){return new Ro(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n}(rU),Ut={ssdMobilenetv1:new nU,tinyFaceDetector:new yne,tinyYolov2:new $te,mtcnn:new pne,faceLandmark68Net:new J4,faceLandmark68TinyNet:new yte,faceRecognitionNet:new Ete,faceExpressionNet:new nte,ageGenderNet:new pte};function uU(t,n){return Object.assign({},t,{age:n})}var cU=function(t){function n(e,r,i){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return ut(n,t),n}(Pv),MS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r,i=this;return Ve(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return[4,LA(e=o.sent(),this.input,function(s){return ze(i,void 0,void 0,function(){return Ve(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(u){return Ut.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,a){return Q4(s,r[a])})]}})})},n.prototype.withAgeAndGender=function(){return new OS(this,this.input)},n}(cU),RS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r;return Ve(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,DS(e,this.input,function(o){return Ut.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,Q4(e,r)]}})})},n.prototype.withAgeAndGender=function(){return new NS(this,this.input)},n}(cU),kS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.withAgeAndGender=function(){return new FS(this,this.input)},n.prototype.withFaceDescriptors=function(){return new LS(this,this.input)},n}(MS),PS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.withAgeAndGender=function(){return new BS(this,this.input)},n.prototype.withFaceDescriptor=function(){return new US(this,this.input)},n}(RS),lU=function(t){function n(e,r,i){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return ut(n,t),n}(Pv),OS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r,i=this;return Ve(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return[4,LA(e=o.sent(),this.input,function(s){return ze(i,void 0,void 0,function(){return Ve(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(u){return Ut.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,a){var u=r[a],c=u.age;return uU(eU(s,u.gender,u.genderProbability),c)})]}})})},n.prototype.withFaceExpressions=function(){return new MS(this,this.input)},n}(lU),NS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r,i;return Ve(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?[4,DS(e,this.input,function(u){return Ut.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=a.sent(),i=r.age,[2,uU(eU(e,r.gender,r.genderProbability),i)]}})})},n.prototype.withFaceExpressions=function(){return new RS(this,this.input)},n}(lU),FS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.withFaceExpressions=function(){return new kS(this,this.input)},n.prototype.withFaceDescriptors=function(){return new LS(this,this.input)},n}(OS),BS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.withFaceExpressions=function(){return new PS(this,this.input)},n.prototype.withFaceDescriptor=function(){return new US(this,this.input)},n}(NS),dU=function(t){function n(e,r){var i=t.call(this)||this;return i.parentTask=e,i.input=r,i}return ut(n,t),n}(Pv),LS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e;return Ve(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return[4,LA(e=i.sent(),this.input,function(o){return Promise.all(o.map(function(s){return Ut.faceRecognitionNet.computeFaceDescriptor(s)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,i.sent().map(function(o,s){return oU(e[s],o)})]}})})},n.prototype.withFaceExpressions=function(){return new kS(this,this.input)},n.prototype.withAgeAndGender=function(){return new FS(this,this.input)},n}(dU),US=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r;return Ve(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,DS(e,this.input,function(o){return Ut.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,oU(e,r)]}})})},n.prototype.withFaceExpressions=function(){return new PS(this,this.input)},n.prototype.withAgeAndGender=function(){return new BS(this,this.input)},n}(dU),fU=function(t){function n(e,r,i){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.useTinyLandmarkNet=i,o}return ut(n,t),Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Ut.faceLandmark68TinyNet:Ut.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(Pv),wne=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r,i,o,s,a=this;return Ve(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return e=u.sent(),r=e.map(function(c){return c.detection}),this.input instanceof hn?[4,pS(this.input,r)]:[3,3];case 2:return o=u.sent(),[3,5];case 3:return[4,hS(this.input,r)];case 4:o=u.sent(),u.label=5;case 5:return i=o,[4,Promise.all(i.map(function(c){return a.landmarkNet.detectLandmarks(c)}))];case 6:return s=u.sent(),i.forEach(function(c){return c instanceof hn&&c.dispose()}),[2,e.map(function(c,l){return OA(c,s[l])})]}})})},n.prototype.withFaceExpressions=function(){return new kS(this,this.input)},n.prototype.withAgeAndGender=function(){return new FS(this,this.input)},n.prototype.withFaceDescriptors=function(){return new LS(this,this.input)},n}(fU),bne=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r,i,o,s;return Ve(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?(r=e.detection,this.input instanceof hn?[4,pS(this.input,[r])]:[3,3]):[2];case 2:return o=a.sent(),[3,5];case 3:return[4,hS(this.input,[r])];case 4:o=a.sent(),a.label=5;case 5:return[4,this.landmarkNet.detectLandmarks((i=o)[0])];case 6:return s=a.sent(),i.forEach(function(u){return u instanceof hn&&u.dispose()}),[2,OA(e,s)]}})})},n.prototype.withFaceExpressions=function(){return new PS(this,this.input)},n.prototype.withAgeAndGender=function(){return new BS(this,this.input)},n.prototype.withFaceDescriptor=function(){return new US(this,this.input)},n}(fU),hU=function(t){function n(e,r){void 0===r&&(r=new FA);var i=t.call(this)||this;return i.input=e,i.options=r,i}return ut(n,t),n}(Pv),pU=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r,i,o;return Ve(this,function(s){switch(s.label){case 0:return r=(e=this).input,(i=e.options)instanceof tU?[4,Ut.mtcnn.forward(r,i)]:[3,2];case 1:return[2,s.sent().map(function(a){return a.detection})];case 2:if(!(o=i instanceof iU?function(a){return Ut.tinyFaceDetector.locateFaces(a,i)}:i instanceof FA?function(a){return Ut.ssdMobilenetv1.locateFaces(a,i)}:i instanceof ES?function(a){return Ut.tinyYolov2.locateFaces(a,i)}:null))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(r){return ze(e,void 0,void 0,function(){var i;return Ve(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i.map(function(s){return kv({},s)}))]}})})})},n.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new wne(this.runAndExtendWithFaceDetections(),this.input,e)},n.prototype.withFaceExpressions=function(){return new MS(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new OS(this.runAndExtendWithFaceDetections(),this.input)},n}(hU);function gU(t,n){var e=new Td(n.width,n.height),r=e.width,i=e.height;if(r<=0||i<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:i}));if(Array.isArray(t))return t.map(function(a){return gU(a,{width:r,height:i})});if(bS(t)){var o=t.detection.forSize(r,i),s=t.unshiftedLandmarks.forSize(o.box.width,o.box.height);return OA(kv(t,o),s)}return Rv(t)?kv(t,t.detection.forSize(r,i)):t instanceof cp||t instanceof Ro?t.forSize(r,i):t}!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}ut(n,t),n.prototype.run=function(){return ze(this,void 0,void 0,function(){var e,r;return Ve(this,function(i){switch(i.label){case 0:return[4,new pU(this.input,this.options)];case 1:return e=i.sent(),r=e[0],e.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(r){return ze(e,void 0,void 0,function(){var i;return Ve(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i?kv({},i):void 0)]}})})})},n.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new bne(this.runAndExtendWithFaceDetection(),this.input,e)},n.prototype.withFaceExpressions=function(){return new RS(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new NS(this.runAndExtendWithFaceDetection(),this.input)}}(hU),function(){function t(n,e){void 0===e&&(e=.6),this._distanceThreshold=e;var r=Array.isArray(n)?n:[n];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=r.map(function(s){if(s instanceof TA)return s;if(s instanceof Float32Array)return new TA(o(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new TA(o(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(n,e){return e.map(function(r){return function xne(t,n){if(t.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(t),r=Array.from(n);return Math.sqrt(e.map(function(i,o){return i-r[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}(r,n)}).reduce(function(r,i){return r+i},0)/(e.length||1)},t.prototype.matchDescriptor=function(n){var e=this;return this.labeledDescriptors.map(function(r){return new S4(r.label,e.computeMeanDistance(n,r.descriptors))}).reduce(function(r,i){return r.distance<i.distance?r:i})},t.prototype.findBestMatch=function(n){var e=this.matchDescriptor(n);return e.distance<this.distanceThreshold?e:new S4("unknown",e.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},t.fromJSON=function(n){return new t(n.labeledDescriptors.map(function(r){return TA.fromJSON(r)}),n.distanceThreshold)}}();const Cne=["webcam"];function _ne(t,n){if(1&t&&(Ae(0),z(1,"div",4)(2,"span"),we(3),G()(),xe()),2&t){const e=n.ngIf,r=j();M(3),nn(r.translation(e))}}function Ene(t,n){if(1&t&&(Ae(0),z(1,"h5",5),we(2),G(),xe()),2&t){const e=n.ngIf;M(2),Ts(" ",e,"")}}let mU=(()=>{class t{constructor(){this.KEY_MULTIPLE_FACE_FOUND="MultipleFaceFound",this.KEY_STAY_STILL="StayStillInstruction",this.KEY_TURN_RIGHT="TurnRightInstruction",this.KEY_TURN_LEFT="TurnLeftInstruction",this.KEY_TURN_STRAIGHT="TurnStraightInstruction",this.KEY_COME_BEFORE_CAMERA="NoFaceInstruction",this.KEY_POOR_DETECTION_SCORE="DetectionScorePoor",this.modelLoaded$=new Qe(!1),this.videoReady$=new Qe(!1),this.loadError$=new Qe(void 0),this.allowMultipleFace=!1,this._expectedFaceDirection=Fs.None,this.translation=e=>{switch(e){case this.KEY_MULTIPLE_FACE_FOUND:return"Multiple face found.";case this.KEY_COME_BEFORE_CAMERA:return"Please come infront of the camera";case this.KEY_STAY_STILL:return"Please stay still";case this.KEY_TURN_LEFT:return"Please turn to your left";case this.KEY_TURN_RIGHT:return"Please turn to your right";case this.KEY_TURN_STRAIGHT:return"Please look straight to the camera";case this.KEY_POOR_DETECTION_SCORE:return"Poor detection score. Ensure the face is clearly visible and try again."}return e},this.instructiontext$=new Qe(""),this.faceImageReceived=new Ie}get expectedFaceDirection(){return this._expectedFaceDirection}set expectedFaceDirection(e){this._expectedFaceDirection=e,this.setInstructionText()}ngOnInit(){this.loadModels().then(()=>{this.modelLoaded$.next(!0),this.loadError$.next(void 0)}).catch(e=>{this.loadError$.error(e&&e.message?e.message:e),this.modelLoaded$.next(!1)})}onVideoReady(e){var r=this;const i={width:e.video.videoWidth,height:e.video.videoHeight};!function Jee(t,n,e){void 0===e&&(e=!1);var r=e?dS(n):n,i=r.width,o=r.height;t.width=i,t.height=o}(e.canvas,i);const o=2e3;let s=0;this.videoReady$.next(!0),this.timer=setInterval(B(function*(){const a=yield function Ane(t,n){return void 0===n&&(n=new FA),new pU(t,n)}(e.video,new iU).withFaceLandmarks().withFaceDescriptors();if(e.canvas.getContext("2d")?.clearRect(0,0,e.canvas.width,e.canvas.height),gU(a,i).forEach(c=>{!function Hee(t,n){(Array.isArray(n)?n:[n]).forEach(function(r){var i=r instanceof Ro?r.score:Rv(r)?r.detection.score:void 0,o=r instanceof Ro?r.box:Rv(r)?r.detection.box:new xa(r),s=i?""+iS(i):void 0;new Wee(o,{label:s}).draw(t)})}(e.canvas,{x:c.detection.box.left,y:c.detection.box.top,width:c.detection.box.width,height:c.detection.box.height})}),a.length>0)if(r.expectedFaceDirection!==Fs.None)if(a.length>1)if(r.allowMultipleFace){let c;for(let l=0;l<a.length;l++){const f=r.checkDirection(a[l]);if(f===r.expectedFaceDirection){if(a[l].detection.score>.6){const p=s+100;p<o?s=p:r.webcam?.requestCaptureImage(),c=f}else r.instructiontext$.next(r.KEY_POOR_DETECTION_SCORE);break}}c?r.setInstructionText(c):(s=0,r.setInstructionText())}else r.instructiontext$.next(r.KEY_MULTIPLE_FACE_FOUND);else{const c=r.checkDirection(a[0]);if(r.setInstructionText(c),c===r.expectedFaceDirection){const l=s+100;l<o?s=l:r.webcam?.requestCaptureImage()}else s=0}else{r.setInstructionText(r.expectedFaceDirection);const c=s+100;c<o?s=c:r.webcam?.requestCaptureImage()}else s=0,r.setInstructionText()}),100)}setInstructionText(e){if(e)if(e===this.expectedFaceDirection)this.instructiontext$.next(this.KEY_STAY_STILL);else switch(this.expectedFaceDirection){case Fs.Left:this.instructiontext$.next(this.KEY_TURN_LEFT);break;case Fs.Right:this.instructiontext$.next(this.KEY_TURN_RIGHT);break;case Fs.Straight:this.instructiontext$.next(this.KEY_TURN_STRAIGHT);break;case Fs.None:this.instructiontext$.next(this.KEY_COME_BEFORE_CAMERA)}else this.instructiontext$.next(this.KEY_COME_BEFORE_CAMERA)}checkDirection(e){const r=e.landmarks.getLeftEye(),i=e.landmarks.getRightEye(),s=r[0].x+(r[3].x-r[0].x)/2,a=i[0].x+(i[3].x-i[0].x)/2,u=a-s,c=(s+a)/2-(e.alignedRect.box.x+e.alignedRect.box.width/2);return c<-.125*u?Fs.Right:c>.125*u?Fs.Left:Fs.Straight}onCaptured(e){this.faceImageReceived.next(e)}onVideoEnded(){this.videoReady$.next(!1),this.timer&&clearInterval(this.timer)}loadModels(){return new Promise((e,r)=>{Promise.all([Ut.tinyFaceDetector.loadFromUri("./assets/models"),Ut.faceLandmark68Net.loadFromUri("./assets/models"),Ut.faceRecognitionNet.loadFromUri("./assets/models")]).then(()=>e()).catch(i=>r(i))})}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["lib-face-camera-lib"]],viewQuery:function(r,i){if(1&r&&dr(Cne,5),2&r){let o;fr(o=hr())&&(i.webcam=o.first)}},inputs:{allowMultipleFace:"allowMultipleFace",expectedFaceDirection:"expectedFaceDirection",translation:"translation"},outputs:{faceImageReceived:"faceImageReceived"},standalone:!0,features:[pr],decls:9,vars:12,consts:[["webcam",""],[1,"camera-container"],[3,"videoReady","videoEnded","captureCompleted","autocapture","allowOverlay"],[4,"ngIf"],[1,"instruction"],[1,"error-view"]],template:function(r,i){if(1&r){const o=Te();z(0,"div",1)(1,"web-cam",2,0),me("videoReady",function(a){return ee(o),te(i.onVideoReady(a))})("videoEnded",function(){return ee(o),te(i.onVideoEnded())})("captureCompleted",function(a){return ee(o),te(i.onCaptured(a))}),G(),_e(3,_ne,4,1,"ng-container",3),Bt(4,"async"),Bt(5,"async"),Bt(6,"async"),_e(7,Ene,3,1,"ng-container",3),Bt(8,"async"),G()}2&r&&(M(),U("autocapture",!0)("allowOverlay",!0),M(2),U("ngIf",Lt(4,4,i.modelLoaded$)&&Lt(5,6,i.videoReady$)&&Lt(6,8,i.instructiontext$)),M(4),U("ngIf",Lt(8,10,i.loadError$)))},dependencies:[Zn,gr,Zo,Zm],styles:[".error-view[_ngcontent-%COMP%]{color:red;text-align:center;box-sizing:border-box;position:absolute;top:24px;left:50%;width:70%;transform:translate(-50%);min-height:48px;display:flex;align-items:center;justify-content:center}.camera-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.camera-container[_ngcontent-%COMP%]   web-cam[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.camera-container[_ngcontent-%COMP%]   .instruction[_ngcontent-%COMP%]{position:absolute;top:24px;left:50%;width:70%;transform:translate(-50%);min-height:48px;display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:6px}.instruction[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;color:#0d0f10;font-size:14px;font-weight:400}"],changeDetection:0})}return t})(),Dne=(()=>{class t{static#e=this.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"};getAvailableDevices(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((e,r)=>{navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(i=>{navigator.mediaDevices.enumerateDevices().then(o=>{i.getTracks().forEach(s=>s.stop()),setTimeout(()=>{e(o.filter(s=>"videoinput"===s.kind))},1e3)}).catch(o=>{r(o.message||o),i.getTracks().forEach(s=>s.stop())})})}):Promise.reject("Couldn't find camera information")}stopMediaTracks(e){const r=e.getTracks();r&&r.length&&r.forEach(i=>i.stop())}getMediaConstraintsForDevice(e,r){const i=r||t.DEFAULT_VIDEO_OPTIONS;return e&&(i.deviceId={exact:e}),i}getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){const r=e;if(r.exact)return String(r.exact);if(r.ideal)return String(r.ideal)}}}getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const r=e.getConstraints().deviceId||"";return this.getValueFromConstrainDOMString(r)}}initiateWebcam(e,r,i){return new Promise((o,s)=>{const a=this.getMediaConstraintsForDevice(r,i);navigator.mediaDevices.getUserMedia({video:a,audio:!0}).then(u=>{const c=u.getVideoTracks();let l=-1;if(c.length){const f=this.getDeviceIdFromMediaStreamTrack(c[0]);f&&(l=e.findIndex(p=>p.deviceId===f))}o({stream:u,activeDeviceIndex:l})}).catch(u=>{s(u.message||u)})})}turnOnTorch(e){return new Promise(r=>{const i=e.getVideoTracks();if(i.length>0)try{i[0].applyConstraints({advanced:[{torch:!0}]}),r(!0)}catch(o){console.error(o.message||o),r(!1)}else r(!0)})}turnOffTorch(e){return new Promise(r=>{const i=e.getVideoTracks();if(i.length>0)try{i[0].applyConstraints({advanced:[{torch:!1}]}),r(!0)}catch(o){console.error(o.message||o),r(!1)}else r(!0)})}getOutputMimetype(){return MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":MediaRecorder.isTypeSupported("video/x-matroska")?"video/x-matroska":MediaRecorder.isTypeSupported("video/3gp")?"video/3gp":MediaRecorder.isTypeSupported("video/quicktime")?"video/quicktime":"video/webm"}getFileExtensionFromMimeType(e){return e.startsWith("video/webm")?".webm":e.startsWith("video/mp4")?".mp4":e.startsWith("video/x-matroska")?".mkv":e.startsWith("video/3gp")?".3gp":e.startsWith("video/quicktime")?".mov":".wmv"}getFilename(e){const r=this.getFileExtensionFromMimeType(e);return"Recording-"+Date.now()+r}setupRecorder(e,r,i,o){const s=new MediaRecorder(e,{mimeType:this.getOutputMimetype()});return s.onstart=a=>{i()},s.onstop=a=>{o()},s.ondataavailable=a=>{r(a)},s}}return t})();class Ine{constructor(){this.CancelWhite="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAktJREFUaEPtmMtKVlEUx39LoTdoYpMMuuAoHPQEXcCgBlFCz+AlVEIaOYqQjG7PEFQ0KFBIfQIH4kg0QZ3oxDcQavmtWAe2H59y9rkQm/Y3/fZZ+3/b66x9hMR/kjh+MoF/7WB2IDtQU4EcoZoC1n48O1BbwpoF/k8HVPUCMAQcAYciolWEVFUTcAC4CGyKyHFsnWgHHPxoZ6M5YA14ISJ7sRvbelUdBF4Ct7ze51gSVQjcBL4BV4A/wA/guYjsxJBQ1avAPPAA6AN2gUcishFTpwqBS8DrjuVPfGOLzzLwTES2ymyuqjeAt8Bd+DtQmhBfgBkROShTo1hThYA9cxl4Azx0AL+dxJiImJJn/lTVnPvo4PstScB3YArYjz1P0QQKZB6BD8BtwICYihat2bNIOPhXFhV3z4ivAuOxEazsQCitR8GcuOeAjMRXJ7HftdZcM/CPg7U/Tfmy0etla2UHAicsEqGqRmIJmBaRX95trgELna41EoA/162y56A2AQdoJKwdFuoWB3vSgbzrOrDmkrXfc89LGRKNEHASFhE7E/eDzlK0RGu91iqN2KJn/lTEyoBtJUJdObeovAfuOODwb4vWCjBRRKsq6PC5xhwIzsR14FPnBTfcBXAdeCoi200Ab6QL9QKiqukSUNV0I6Sq6R5if8Om2UZ7jAfpvMiSHiWSHeb8GpjuOK2qyV9okr9S2heJdC/1Pnmm+1mlyUGsiVqNT6NNgIqpkQnEqNXG2uxAG6rG1MwOxKjVxtrsQBuqxtTMDsSo1cbaE7zcFkC5ZRRrAAAAAElFTkSuQmCC",this.FlashOnWhite="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAaBJREFUaEPtmL1KxEAUhb9TCHZ2gmAjiOBPK1rINhYWthY+gr6EjSj7CuoTWNiKItgsaieIjRY2CnbaWOmC4w6ssATFhLkzMTBThpvL+c65k0kiGr7UcP1kgLoTzAnkBAIdyCMUaGDw7TmBYAsDG+QEvIHOuRFgBxgraegtsCvpo2T9r2UmCTjnRoEOMFVCkANWJJ2VqP2zpA4AL9wDeJDgVQfAqqTjYOX9BqkBLoElK/c9Q2qAliS/V8xWSoAbYF5S10x9wgS86GlJD5biU47QHTBjOfvfRqQaoTZwP+D+C3BiMU6pAIqTs9k7tfcsEqkDoCOpZbUX6gDw58DFfwMYAmaB4b6wOeDgB5H7wIbF6Jhu4qJQ59xi733nqnD9E5iQ9GjlvtljtCTAmqQjS/EpAZ6ASYv3/6IBJpu4RALLvSfPubX7qRI4lLQeQ3wKAP/RMi7puakA25K2YomPncBp3/23JgIsAF1J1zHFx0zA/155lfTeSIDYogf7RzkHMkAFB3ICFcyKUpoTiGJrhaY5gQpmRSnNCUSxtULTxifwBWrzhzGvRgI8AAAAAElFTkSuQmCC",this.FlashOffWhite="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAArVJREFUaEPtl71qVFEUhb/lL/gGgoVEwUqxEvEJBAt9AFEr8Q9REkWJ/1FijCaFBgURBfEFBFuxtzBqZWOlFnaChRrjdpacgWHMyNw5994YuAcG7gzn3Nlrr7X23kcs8aUlHj8NgMVmsGGgYSAzA42EMhOYfbxhIDuFmS9oGOhMYESsB24VSOqMpOcF9v+1dWAGImIZsBl4K+mX3xwRW4DXfQb0Fdgk6VOf+xfcNhCAiFgF3AQOAo+BQ5LmI8KA3vQZ0BQwIin63F8qgBXAEeAG4Odp4Fzr8xMYBsYAg+y1PgIbJX3LCd5nB2Kg/acRcQKYTCDGWyq6KGmuJa8rwBlgZY8AJyWdzg2+DAD2wV7gYQrmnqSjyR8nk8y647T210n6sugAknGXJzm5+pjRu0lGNvbxDpm14z0lyf4pZWVJqKuEWjLWvgFdS8/2xIUkp9XAj5bpN0j6UEr0uR7oDiIijgG30+829rCrTESMJkBnJU2UFXy2BxYA0NkHnP37SUYulQcAe2au49yspNkcQKVJKPmhu5HNJw9cAvxsmZ0HLCeX0K2S3v3PANqx2RMusW52BmNJPZFkVrJW1Qy0g3P2XZ1clfyfe4Bnkr5nRV+BidcAllF7uTvvSl/sCRt71M0uN/D2+VIZWMDUj4D9Xb9fdpktC8RiAHBFmpbkmSl71Q3gBbCjs2NLsrQGXnUC+AwMpRH8ehoALafxHDnVCWCsdfHxWOGLz2HgTmpsV1OJ/XMpKrrqAvAK2C7Js5ABeF7alzq1PTEDeMgrXJ3qArBb0tPO7KaR20Y2KyPAg0H8UAeAtcDOXlfHiBiS9L6odOrqA55MJ8ocn7uBVs3AtlYnfpl7cf8XO5UCGFQWRc41AIpkq4q9DQNVZLXIOxsGimSrir0NA1Vktcg7GwaKZKuKvUuegd8gT9YxO5wlcQAAAABJRU5ErkJggg==",this.StartRecording="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAfBJREFUaEPtV88rRFEU/s6bMQyjmPIfWCCk/JyymIyUhZ2NLVE2lqKUtSxtWLCTHVtpyG7qGfE3sJTIMMzozdGbZjQYXdd10637tu+c757v++49516C4R8ZXj8sgf920DpgHVBUwG4hRQGV060DyhIqAlgHFAVUTrcOKEuoCCDtAAOEid4wcq/Sue+1ZhoKlEo9K9ZeTJcuIjvSN8BEiwyqUyjg1gnwSv3R2XUlBsfjdXR6+iKDK00gk+jfItCczCLVYokx33Dibpb/3cV7mmqCodlI0l2XwZYm8JgY2AYwLbNItVgmLDQm3Q3/38NYb5vjObsAXUaO3RkZ7H8nwOOttU+5aBqETgA7RhEoEB0GPN4vFe8Lbw4BAq0yCpMAdVVsGXMIAPC7zedOZhSBamfVEhB2sL9qowDyAEKfFjTHgeIhZkyBuM3IQ+wPMvYKR47jHABoL5Ewx4HyJC4Osnz0okTCPAK+8pnEYAeB9wCktU9iXZe5++Hh5mAoPxc5cdeEnaQiQPoulB0dHPKYl+jrEPr5uozbgOMth5PnVx+u07FYWPadIE2g+KAZ666/yUelc8vFtuRynmyh36nz6yJ+LrfeSEtAr75idOuAWCO9EdYBvfqK0a0DYo30RlgH9OorRrcOiDXSG2Ed0KuvGP0NrUSxMSixW7AAAAAASUVORK5CYII=",this.StopRecording="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAANtJREFUaEPtmLEKwjAURV9c7e+oY8EqfpJTF0f/x0Goi+CS37GzcRZqwuNCJXg6v/fSnHtzSRus8idU/v7GBn6tIAqggEgAC4kA5XYUkBGKA/5PgXG/6tJr0YrgJttDSI9miFfPbLcCz25zCpZ6zyKO2nNzi0dHvf8uxAbyeFGgaD8shIU+CRCjxUPjKyCFirxIIVKIFOI2mjsFxCgxWiRAjBKjlcfouFsfLNlW9PqX3yp2Xw7x4pnt/h7wDJ+jlg3MQTm3BgqggEgAC4kA5XYUkBGKA1BABCi3vwEGc5IxLOB5xwAAAABJRU5ErkJggg==",this.FlipCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAm1JREFUaEPtl0vITVEUx39/z6S8EjGQVxmYSCllqgghIxkwlaTkMZGZr0SUEGXkUR9h4gsDRZkzk+Q9koEMFR/LWTq3brdzzv322dc999Zek9vprr33/7H3WnuLIQ8NOX4SgaYdTA4kByIVSFsoUsDo4cmBaAkjJ0gORAoYPbynDpjZFGAPsKgE2VfglqTxaOT5BL0mcBg43wXccUlnGyWQK70KmNoGZFP2PQJM7gLuN3ASeNyW9wt4U8eZYAfMbDnwBPDfXsZnYKOkdyGT1iFwATgUskhA7hVJBwLyw98DZnYf2BWySEDuA0k7AvL/GwGvNn6YP+RgFgDHgKVdwI1J2j4IBG4D94DFORgn8gw4AXilmlECcmAIFOF7DawH9gOnodD9RgkcAU5VqOukvgHLgFFgawHLRgiYVyVJl8xsCfCpRN0W3t1ZH/BecHcQCDj4EUnemP6FmU3LSZRdJ64BV4EXg0DAMbiaHuuAg8A+YFKBC8+9UQHjkszMvGMvzPI/Ak7ao5Et1BJyM7ACuFxSYdytl040JzAfeJ+V21lt+Y0SuAicy7dPVSm/A5wBngKzOxIbJeAXsg3APMBBdoJrx+rXab96d0ajBBzMF2BNDu5mVmlW5whfAWuBOVXWNH0GWth+ZDfVG8DRrPO6Kx4zs/p/Hdg2DARaGB389/xjbsfboYxHX7aQK7m3i5J1/x6V5E/SCUed94CXy7GSQzjhhQsS/WDvlPQwZJI6BLxJrQS2ANNDFqvI/Qk8At5K+hMyZzCBkMn7kZsI9EPlqjWSA8mBSAXSFooUMHp4ciBawsgJkgORAkYPH3oH/gJFGLQxAT3ixgAAAABJRU5ErkJggg==",this.ReloadWhite="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA3ZJREFUaEPtl0+oVVUUxn+fmRX2hyaV6MCJYSZhBFGDaGCmIEIJimG8R9okEMwgyqAg0shRQjSoRC1BJCfZJKQ/6CBs4EQMIsU/oCIomqBkWbk6n+0nm6vvvXvOPlYPzoLLhXvX3nt961vr22uLMW4a4/HTAfivGewY6BgozEBXQoUJLF7eMVCcwsINOgZGSmBEPA68B6wDdkn6tTDh1yy/oQxExDPA50AAHwLvSzrWJogbBiAivPcLwEfAeOASsBd4XtKRtkC0BiAFfC/wJLAMeKIqnduuE6jLaDmwQ9LFUiCtAIiICcDTVZbfAB6DUafcX4BXJG3+vwB4HVgF3NNnQGeAFyV90af/sG5FDESEa/vtlPneQ/4EfgNuz/74CzgKvAR8I8nNXWSlAOYBXwI3Z1G4xr8FdgN3A6+lJr6QFOkdSQZBRPj/RfaV9HMTJI0BRMQk4DPgqZ6DVwMfSzqbyeg44GXgU0nnU/APAZuAB6xUklyCta0EwADwCeAGtrlkXpW0fiiKiHgEeLNiYI0kS+gVi4hpiY1Z6Sf3xDRJbu5aVgJgK/BcdtrXwHxJf4wWQUTMSAAezHxXS/KtXctKAPgymjqUVGu7JJfEqJZkdyOwNHPeKck9VcsaAUiXlpv11nTaWWCxJDdvXxYR7pV3M+eTVUlOrqtMTQFYdX7PLqzjVpMqgz/0Ff0/fbASuNovVa9YYm+R5O++rREA7x4R56rh7K50kiXSDHzV78kR8QGwIvM/JcmjSC0rAbAfmJmdtipXoJGiiIg7gO3A3MzvO0mza0Xfx8wy7H7XyeA+YI6k06MFERHzgQ3AfZnvoCTfK7WshIFngS3AxHSixwLPNu6FYes4jR/fA49mkRr01CYPnhIArlcDmNOTMpfGW8BhSX4DXLGIMNCH0+U3PVtjsB4vPFPVtsYAUlAuhW09A5uZ+NFPSOAQYImdnEYGj9x52XgbK9eApIO1oy/pgQTgJmAh4FvZk2mvmQF//LCxb69Zit24eyRd/tcBZOUxWE2ka1Om+4nDc9MBYIkkq1ljKyqhDIAvtqGnpMvqzhEiOpUY88T6U+PI08JWAGRArO/3Aws82FVSOSWBscp43rdKeeg70cZ72Oe2CqA0m03WdwCaZK3NNR0DbWazyV4dA02y1uaajoE2s9lkr46BJllrc82YZ+Bv1b71MUMcG18AAAAASUVORK5CYII=",this.DoneWhite="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAklJREFUaEPtlsurTXEUxz9f8o5/wV+AoYGJR0lRQsljaCIlIpKRxwiRGRnJn3EnCiW6A487IIqJ8oyBgdzBsletU7ub65y91z5nu/Xbdeq091q/3/f1W3uLBX5pgeOnEOjbweJAcSCpQIlQUsB0e3EgLWFygeJAUsB0e3EgLSFgZssl/WqzVu8OmNmyCvgF4L6kqaYkeiXgygMXgTPAd2CbpGdNSPRGwMx87xsV8BMVCf//Cdglafq/J2BmKyI2rryD/xLgnzYB77W9OGBmrvzJ2P8HsFvSg6bgJ04glL8MnKrFZkfT3NeJTtQBM7semV8MzAJbJT1qo/ygZyIEQvlLwOlQ/iOwRdKrDPjWETKzJcBaSW9HAWBmVyPz3mfAJkmPR+kdVtPYgeoArgHuAOuAvZJez7dJbc6fjRoflZu7UL51hMzsEHAXcDXfA3v+dghjzl8DjgNLQ/mN1bicluQudHK1cWA1cAs4CCwCXla/fZLeDBDVPg/Oxb3P8Zad6QR1bZHGBLy3yvRKwHN9LA7lB2CnpOeh/JWYNgPlNwAzXSrfOkI1ld2J28CBcOIFcDicOR91/obdnpnzwxxr5cCcqNwEjsa9b4ATc+V/A+v/dciHgRvleYpAxMkB+1TaH0747a/xbfNkFBCZmjSBIOETyQ/2EeAn4Jl/N47MzyXbCYEgsQrwON2T9DCjapPezggECc/+7CSUT0+hJiqNs7ZTB8YJdL61C4E+VK/vWRwoDiQVKBFKCphuLw6kJUwuUBxICphuX/AO/AEDr5Qxy/voWgAAAABJRU5ErkJggg=="}}class jS{constructor(){this.images=new Ine}static#e=this.shared=new jS}class Sne{constructor(n,e){this.name=n,this.data=e}}let Tne=(()=>{class t{constructor(e){this.cdr=e,this.timeString="",this.color="white",this.timeElapsed$=new Qe(0)}get timeElapsed(){return this.timeElapsed$.getValue()}set timeElapsed(e){this.timeElapsed$.next(e)}format(e,r){return e.toString().padStart(r,"0")}ngOnInit(){this.timeElapsed$.subscribe(e=>{let r=e,i=0,o=0,s=0;r>=3600&&(i=r%3600,r-=3600*i),r>=60&&(o=r%60,r-=60*o),s=r,this.timeString=this.format(i,2)+":"+this.format(o,2)+":"+this.format(s,2),this.cdr.markForCheck()})}ngOnDestroy(){this.timeElapsed$.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)(ve(km))};static#t=this.\u0275cmp=bt({type:t,selectors:[["time-span"]],inputs:{color:"color",timeElapsed:"timeElapsed"},decls:2,vars:3,consts:[[2,"font-size","14px","font-weight","400"]],template:function(r,i){1&r&&(z(0,"span",0),we(1),G()),2&r&&(Xn("color",i.color),M(),nn(i.timeString))},encapsulation:2,changeDetection:0})}return t})();const Mne=["videoLive"],Rne=["videoRecorded"];function kne(t,n){if(1&t){const e=Te();Ae(0),z(1,"img",8),me("click",function(){return ee(e),te(j(2).turnOnOffTorch2(!1))}),G(),xe()}if(2&t){const e=j(2);M(),U("src",e.Assets.shared.images.FlashOnWhite,He)}}function Pne(t,n){if(1&t){const e=Te();Ae(0),z(1,"img",9),me("click",function(){return ee(e),te(j(2).turnOnOffTorch2(!0))}),G(),xe()}if(2&t){const e=j(2);M(),U("src",e.Assets.shared.images.FlashOffWhite,He)}}function One(t,n){if(1&t&&(Ae(0),_e(1,kne,2,1,"ng-container",7)(2,Pne,2,1,"ng-container",7),xe()),2&t){const e=j();M(),U("ngIf",e.isFlashOn),M(),U("ngIf",!e.isFlashOn)}}function Nne(t,n){if(1&t){const e=Te();Ae(0),z(1,"img",13),me("click",function(){return ee(e),te(j(3).switchCamera())}),G(),xe()}if(2&t){const e=j(3);M(),U("src",e.Assets.shared.images.FlipCamera,He)}}function Fne(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",11),me("click",function(){return ee(e),te(j(2).startRecording2())}),Fe(2,"img",12),z(3,"span"),we(4,"Start Recording"),G()(),_e(5,Nne,2,1,"ng-container",7),xe()}if(2&t){const e=j(2);M(2),U("src",e.Assets.shared.images.StartRecording,He),M(3),U("ngIf",e.allowSwitchingCamera)}}function Bne(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",11),me("click",function(){return ee(e),te(j(2).stopRecording2())}),Fe(2,"img",14),z(3,"span"),we(4,"Stop"),G()(),Fe(5,"time-span",15),xe()}if(2&t){const e=j(2);M(2),U("src",e.Assets.shared.images.StopRecording,He),M(3),U("color","white")("timeElapsed",e.timeElapsed)}}function Lne(t,n){if(1&t&&(Ae(0),z(1,"div",10),_e(2,Fne,6,2,"ng-container",7)(3,Bne,6,3,"ng-container",7),G(),xe()),2&t){const e=j();M(2),U("ngIf",!e.isRecording),M(),U("ngIf",e.isRecording)}}function Une(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",10)(2,"div",11),me("click",function(){return ee(e),te(j().onSubmitFile())}),Fe(3,"img",16),z(4,"span"),we(5,"Submit"),G()(),z(6,"div",11),me("click",function(){return ee(e),te(j().tryAgain())}),z(7,"span"),we(8,"Try Again"),G(),Fe(9,"img",17),G()(),xe()}if(2&t){const e=j();M(3),U("src",e.Assets.shared.images.DoneWhite,He),M(6),U("src",e.Assets.shared.images.ReloadWhite,He)}}function jne(t,n){if(1&t&&(Ae(0),z(1,"div",18),we(2),G(),xe()),2&t){const e=n.ngIf;M(2),nn(e)}}let zne=(()=>{class t{constructor(e){this.cdr=e,this.videoService=new Dne,this.devices=[],this.error$=new Qe(void 0),this.stream=void 0,this.recorder=void 0,this.recordedBlobParts=[],this.recordedBlobSize=0,this.recordingTimer=void 0,this.activeDeviceIndex=0,this.isCameraRunning=!1,this.Assets=jS,this.isFlashOn=!1,this.isRecording=!1,this.timeElapsed=0,this.isMobileDevice=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),this.isReplaying=!1,this.allowSwitchingCamera=!1,this.isBackcamera=!1,this.videoLive=void 0,this.videoRecorded=void 0,this.maxSizeinByte=2e8,this._maxSizeInMb=200,this.maxDurationInSec=600,this.allowReplay=!0,this.recordCompleted=new Ie,this.recordingCanceled=new Ie}startCamera(e){this.stream&&this.stopCamera(this.stream),this.videoService.initiateWebcam(this.devices,e||this.devices[0].deviceId).then(i=>{this.isCameraRunning=!0,this.activeDeviceIndex=i.activeDeviceIndex,this.isBackcamera=!this.devices[this.activeDeviceIndex].label.toLowerCase().includes("front"),this.videoLive&&(this.videoLive.nativeElement.srcObject=i.stream,this.videoLive.nativeElement.muted=!0,this.videoLive.nativeElement.play()),this.stream=i.stream,this.cdr.detectChanges()}).catch(i=>{this.error$.next(i),this.isCameraRunning=!1,this.cdr.detectChanges()})}startRecording2(){this.stream&&this.startRecording(this.stream)}stopRecording2(){this.stream&&(this.recorder&&this.stopRecording(this.recorder),this.stopCamera(this.stream),this.recorder=void 0)}stopRecording(e){this.isReplaying=this.allowReplay,e.stop(),this.cdr.detectChanges()}onVideoDataRecived(e){this.processRecordedBytes(e.data)}processRecordedBytes(e){e&&e.size>0&&(this.recordedBlobParts.push(e),this.recordedBlobSize+=e.size,this.recordedBlobSize>=this.maxSizeinByte&&this.stopRecording2())}onVideoStarted(){this.recordingTimer=setInterval(()=>{this.recorder?.requestData(),this.timeElapsed+=1,this.timeElapsed>this.maxDurationInSec&&this.stopRecording2(),this.cdr.detectChanges()},1e3)}onVideoStopped(){this.recordingTimer&&clearInterval(this.recordingTimer),this.timeElapsed=0,this.isRecording&&(console.log("I am here"),this.processRecordedBlobs().then(e=>{this.isReplaying&&this.videoRecorded&&(this.videoRecorded.nativeElement.srcObject=null,this.videoRecorded.nativeElement.src=URL.createObjectURL(e.data),this.videoRecorded.nativeElement.muted=!1,this.cdr.detectChanges()),this.recordedBlob=e}).catch(e=>{this.error$.next(e.message||e),this.cdr.detectChanges()})),this.isRecording=!1,this.cdr.detectChanges()}processRecordedBlobs(){return new Promise((e,r)=>{if(this.recordedBlobParts.length>0){const i=this.recordedBlobParts[0].type,o=new Blob(this.recordedBlobParts,{type:i});this.recordedBlobParts=[],this.recordedBlobSize=0,e(new Sne(this.videoService.getFilename(i),o))}else r("Recording Failed")})}startRecording(e){this.recordedBlob=void 0,this.turnOnOffTorch(e,this.isFlashOn),this.timeElapsed=0,this.videoLive&&(this.videoLive.nativeElement.muted=!0,this.videoLive.nativeElement.srcObject=e,this.videoLive.nativeElement.play(),this.cdr.detectChanges());const r=this.videoService.setupRecorder(e,this.onVideoDataRecived.bind(this),this.onVideoStarted.bind(this),this.onVideoStopped.bind(this));this.recorder=r,r.start(),this.isRecording=!0,this.isReplaying=!1,this.cdr.detectChanges()}switchCamera(){this.startCamera(this.devices[(this.activeDeviceIndex+1)%this.devices.length].deviceId)}turnOnOffTorch2(e){this.stream&&this.turnOnOffTorch(this.stream,e)}turnOnOffTorch(e,r){this.isMobileDevice&&(r?this.videoService.turnOnTorch(e).then(i=>{i&&(this.isFlashOn=!0,this.cdr.detectChanges())}):this.videoService.turnOffTorch(e).then(i=>{i&&(this.isFlashOn=!1,this.cdr.detectChanges())}))}stopCamera(e){this.isCameraRunning&&(this.turnOnOffTorch(e,!1),this.videoService.stopMediaTracks(e),this.videoLive&&(this.videoLive.nativeElement.srcObject=null),this.stream=void 0,this.isCameraRunning=!1,this.cdr.detectChanges())}onCancelRecording(){this.isRecording=!1,this.stopRecording2(),this.cdr.detectChanges(),this.recordingCanceled.emit()}ngOnDestroy(){this.isRecording=!1,this.stopRecording2(),this.recordedBlobParts=[],this.recordedBlobSize=0}ngOnInit(){this.videoService.getAvailableDevices().then(e=>{this.devices=e,this.allowSwitchingCamera=e.length>1,this.error$.next(void 0),this.startCamera(),this.cdr.detectChanges()}).catch(e=>{this.allowSwitchingCamera=!1,console.error(e),this.devices=[],this.error$.next(e),this.cdr.detectChanges()})}onSubmitFile(){this.recordedBlob&&this.recordCompleted.next(this.recordedBlob)}tryAgain(){this.devices.length>this.activeDeviceIndex&&(this.isReplaying=!1,this.isRecording=!1,this.startCamera(this.devices[this.activeDeviceIndex].deviceId))}get maxSizeInMb(){return this._maxSizeInMb}set maxSizeInMb(e){this._maxSizeInMb=e,this.maxSizeinByte=1024*e*1024}static#e=this.\u0275fac=function(r){return new(r||t)(ve(km))};static#t=this.\u0275cmp=bt({type:t,selectors:[["ca-video-recorder"]],viewQuery:function(r,i){if(1&r&&(dr(Mne,5),dr(Rne,5)),2&r){let o;fr(o=hr())&&(i.videoLive=o.first),fr(o=hr())&&(i.videoRecorded=o.first)}},inputs:{maxSizeInMb:"maxSizeInMb",maxDurationInSec:"maxDurationInSec",allowReplay:"allowReplay"},outputs:{recordCompleted:"recordCompleted",recordingCanceled:"recordingCanceled"},decls:12,vars:11,consts:[["videoLive",""],["videoRecorded",""],[1,"container"],["autoplay","","muted","","playsInline","",1,"video-element"],["controls","","playsInline","",1,"video-element"],[1,"top-panel"],["alt","Cancel Recording","srcset","",3,"click","src"],[4,"ngIf"],["alt","Turn off Flashlight","srcset","",3,"click","src"],["alt","Turn on Flashlight","srcset","",3,"click","src"],[1,"bottom-panel"],[1,"button",3,"click"],["alt","Start Recording",3,"src"],["alt","Switch camera",3,"click","src"],["alt","Stop Recording",3,"src"],[3,"color","timeElapsed"],["alt","Done",3,"src"],["alt","Try again",3,"src"],[1,"error-element"]],template:function(r,i){if(1&r){const o=Te();z(0,"div",2),Fe(1,"video",3,0)(3,"video",4,1),z(5,"div",5)(6,"img",6),me("click",function(){return ee(o),te(i.onCancelRecording())}),G(),_e(7,One,3,2,"ng-container",7),G(),_e(8,Lne,4,2,"ng-container",7)(9,Une,10,2,"ng-container",7)(10,jne,3,1,"ng-container",7),Bt(11,"async"),G()}2&r&&(M(),Xn("display",i.isReplaying?"none":"block"),M(2),Xn("display",i.isReplaying?"block":"none"),M(3),U("src",i.Assets.shared.images.CancelWhite,He),M(),U("ngIf",i.isMobileDevice&&i.isBackcamera),M(),U("ngIf",i.isCameraRunning),M(),U("ngIf",!i.isCameraRunning&&i.isReplaying),M(),U("ngIf",Lt(11,9,i.error$)))},dependencies:[gr,Tne,Zo],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:hidden;display:block}.video-element[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:calc(100% - 56px);object-fit:cover}.top-panel[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:48px;background:linear-gradient(to bottom,#000,#000a,#0008,#0004);display:flex;align-items:center;justify-content:space-between;gap:10px;padding:0 16px;box-sizing:border-box}.bottom-panel[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:56px;background:linear-gradient(to top,#000,#000a,#0008,#0004);display:flex;align-items:center;justify-content:space-between;gap:10px;padding:0 16px;box-sizing:border-box}.top-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;cursor:pointer;-webkit-user-select:none;user-select:none}.bottom-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;cursor:pointer;-webkit-user-select:none;user-select:none}.top-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .bottom-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .bottom-panel[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border-radius:50%;background-color:#0004}.error-element[_ngcontent-%COMP%]{color:red;font-size:15px;font-weight:400;text-align:center;position:absolute;top:50%;left:50%;width:80%;transform:translate(-50%,-50%)}.button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;-webkit-user-select:none;user-select:none;cursor:pointer;color:#fff}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:15px}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}"],changeDetection:0})}return t})();const Vne=["iframeElement"];function Wne(t,n){if(1&t&&(Ae(0),z(1,"div",4),Fe(2,"img",5),z(3,"span"),we(4,"Please Wait"),G()(),xe()),2&t){const e=j();M(2),U("src",e.Assets.Gifs.Loading,He)}}function Hne(t,n){if(1&t&&(Ae(0),z(1,"div",4),Fe(2,"img",6),z(3,"span"),we(4),G()(),xe()),2&t){const e=n.ngIf,r=j();M(2),U("src",r.Assets.Images.Warning,He),M(2),nn(e)}}let zA=class P2{get openingLink(){return this._openingLink}set openingLink(n){this._openingLink=n,this.trustedurl=this.sanitizer.bypassSecurityTrustResourceUrl(this.openingLink)}constructor(n){this.sanitizer=n,this.Assets=yi,this._openingLink="https://www.cloudapper.com",this.trustedurl="",this.errorReceived=new Ie,this.isLoading$=new Qe(!0),this.error$=new Qe(null)}ngOnInit(){this.error$.pipe(Xt(this)).subscribe(n=>{n&&setTimeout(()=>{this.errorReceived.next(n)},500)})}onLoad(){this.isLoading$.next(!1)}static#e=this.\u0275fac=function(e){return new(e||P2)(ve(Fh))};static#t=this.\u0275cmp=bt({type:P2,selectors:[["iframe-preview"]],viewQuery:function(e,r){if(1&e&&dr(Vne,5),2&e){let i;fr(i=hr())&&(r.iframeRef=i.first)}},inputs:{openingLink:"openingLink"},outputs:{errorReceived:"errorReceived"},standalone:!0,features:[pr],decls:7,vars:7,consts:[["iframeElement",""],[1,"iframe-container"],["id","iframe-preview","frameborder","0",3,"loadstart","load","error","src"],[4,"ngIf"],[1,"overlay"],["alt","Loading",3,"src"],["alt","Warning sign",3,"src"]],template:function(e,r){if(1&e){const i=Te();z(0,"div",1)(1,"iframe",2,0),me("loadstart",function(){return ee(i),r.isLoading$.next(!0),te(r.error$.next(null))})("load",function(){return ee(i),te(r.onLoad())})("error",function(s){return ee(i),r.isLoading$.next(!1),te(r.error$.next(s.message))}),G(),_e(3,Wne,5,1,"ng-container",3),Bt(4,"async"),_e(5,Hne,5,2,"ng-container",3),Bt(6,"async"),G()}2&e&&(M(),U("src",r.trustedurl,qg),M(2),U("ngIf",Lt(4,3,r.isLoading$)),M(2),U("ngIf",Lt(6,5,r.error$)))},dependencies:[Zn,gr,Zo],styles:[".iframe-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;box-sizing:border-box;overflow:hidden;background-color:#fff}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fff3;display:flex;align-items:center;justify-content:center}.overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:84px}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:400;text-align:center;color:#c71927}"]})};zA=vi([ji()],zA);class is extends Di{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(n){const{hasError:e,_hasValue:r,_value:i,thrownError:o,isStopped:s,_isComplete:a}=this;e?n.error(o):(s||a)&&(r&&n.next(i),n.complete())}next(n){this.isStopped||(this._value=n,this._hasValue=!0)}complete(){const{_hasValue:n,_value:e,_isComplete:r}=this;r||(this._isComplete=!0,n&&super.next(e),super.complete())}}const qne=["video"],Gne=["canvas"],Kne=["resultsPanel"],zS="assets/wasm/index.js",Ov="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.9/wasm/index.js",vU={audio:!1,video:!0},VS={lineWidth:1,strokeStyle:"green",fillStyle:"#55f02880"},WS={font:"15px serif",strokeStyle:"#fff0",fillStyle:"#ff0000"},Ru={src:"",fps:30,vibrate:300,decode:"utf-8",isBeep:!0,constraints:vU,canvasStyles:[VS,WS]};var VA=()=>"zbarWasm"in window;const Vt=(t,n,e)=>{e?t.error(e):t.next(n),t.complete()},HS=(t=!1)=>{if(!1===t)return;const n=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");n.oncanplaythrough=()=>{const e=n.play();e&&e.catch(r=>{})}},yU=(t,n,e,r)=>{let i,o,s=n.width,a=n.height,u=s/a,c=parseInt(getComputedStyle(n).width),l=parseInt(getComputedStyle(n).height),f=c/l;e.innerHTML="",u>f?(i=c/s,o=c/u/a):(o=l/a,i=l*u/s);for(let p=0;p<t.length;p++){const g=t[p];let m=document.createElement("canvas"),y=m.getContext("2d",{willReadFrequently:!0}),w={},b=[],A=[],C=0,_=0,E=2===r.length&&r[1]?.font?.replace(/[^0-9]/g,"");E&&/[0-9]/g.test(E)&&(C=parseFloat(E),_=(i||1)*C,Number.isNaN(_)&&(_=C));const I=g.points;for(let $=0;$<I.length;$++){const ce=I?.[$]?.x??0,de=I?.[$]?.y??0;w[`x${$+1}`]=ce,w[`y${$+1}`]=de,b.push(ce),A.push(de)}let P=Math.max(...b),O=Math.min(...b),F=Math.max(...A),N=Math.min(...A);m.setAttribute("class","qrcode-polygon"),u>f?(m.style.top=N*o+.5*(l-c/u)+"px",m.style.left=O*i+"px",m.width=(P-O)*i,m.height=(F-N)*i):(m.style.top=N*o+"px",m.style.left=O*i+.5*(c-l*u)+"px",m.width=(P-O)*o,m.height=(F-N)*o);for(const $ in r[0])y[$]=r[0][$];const Q=[];for(let $=0;$<b.length;$++)Q.push((w[`x${$+1}`]-O)*o),Q.push((w[`y${$+1}`]-N)*i);const q=Q.slice(0);for(y.beginPath(),y.moveTo(q.shift(),q.shift());q.length;)y.lineTo(q.shift(),q.shift());if(y.closePath(),y.fill(),y.stroke(),C){const $=document.createElement("div");$.setAttribute("class","qrcode-tooltip-temp"),$.innerText=g.value,$.style.maxWidth=(s>window.innerWidth?.9*window.innerWidth:s)+"px",$.style.borderRadius=`clamp(1px, ${i*C-10}px, 3px)`,$.style.paddingBlock=`clamp(1px, ${i*C-10}px, 3px)`,$.style.paddingInline=`clamp(2.5px, ${i*C-6}px, 10px)`;const ce=`<svg xmlns="http://www.w3.org/2000/svg" width="${_}" height="${_}" viewBox="0 0 512 512"><rect x="128" y="128" width="336" height="336" rx="57" ry="57"></rect><path d="M383.5,128l.5-24a56.16,56.16,0,0,0-56-56H112a64.19,64.19,0,0,0-64,64V328a56.16,56.16,0,0,0,56,56h24"></path></svg>`,de=(new DOMParser).parseFromString(ce,"application/xml"),X=$.ownerDocument.importNode(de.documentElement,!0);X.style.marginLeft=`clamp(1px, ${i*C-10}px, 3px)`,$.appendChild(X),X.addEventListener("click",()=>window.navigator.clipboard.writeText(g.value)),$.addEventListener("click",()=>window.navigator.clipboard.writeText(g.value));const J=document.createElement("div");J.setAttribute("class","qrcode-tooltip"),J.appendChild($),o=l/a,i=l*u/s,J.style.fontSize=i*C+"px",J.style.top=N*o+"px",J.style.left=O*i+.5*(c-l*u)+"px",J.style.width=(P-O)*o+"px",J.style.height=(F-N)*o+"px";const Z=document.createElement("span");Z.innerText=g.value,Z.style.top=N*o+-20*o+"px",Z.style.left=O*i+.5*(c-l*u)+"px";const oe=r[1]?.font?.split(" ")?.[1];Z.style.fontFamily=oe,Z.style.fontSize=i*C+"px",Z.style.color=r?.[1]?.fillStyle,e?.appendChild(J),e?.appendChild(Z)}e?.appendChild(m)}},wU=(t,n)=>new Promise((e,r)=>t.toBlob(i=>e(i),n)),bU=(t=[],n,e,r,i=new is)=>(AU(t,e,r).then(o=>{Promise.all(Object.assign([],o).map(s=>((t,n)=>{let e=n?.decode??Ru.decode,r=2===n?.canvasStyles?.length?n?.canvasStyles:[VS,WS],i=n?.isBeep??Ru.isBeep;return new Promise((o,s)=>{const a=new FileReader;a.onload=()=>{const u={name:t.name,file:t,url:URL.createObjectURL(t)},c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=B(function*(){const l=document.createElement("canvas");l.width=c.naturalWidth||c.width,l.height=c.naturalHeight||c.height;const f=l.getContext("2d");f.drawImage(c,0,0,l.width,l.height);const p=f.getImageData(0,0,l.width,l.height);if(VA()){const g=yield zbarWasm.scanImageData(p);if(g?.length){g.forEach(b=>b.value=b.decode(e?.toLocaleLowerCase())),((t,n,e)=>{let r=n.getContext("2d",{willReadFrequently:!0});for(let i=0;i<t.length;i++){const o=t[i];let s={},a=[],u=[],c=0,f=e[1]?.font?.split(" ")?.[0]?.replace(/[^0-9]/g,"");f&&/[0-9]/g.test(f)&&(c=parseFloat(f));const p=o.points;for(let A=0;A<p.length;A++){const C=p?.[A]?.x??0,_=p?.[A]?.y??0;s[`x${A+1}`]=C,s[`y${A+1}`]=_,a.push(C),u.push(_)}let g=Math.min(...a),m=Math.min(...u);const y=()=>{for(const _ in e[0])r[_]=e[0][_];const A=[];for(let _=0;_<a.length;_++)A.push(s[`x${_+1}`]),A.push(s[`y${_+1}`]);const C=A.slice(0);for(r.beginPath(),r.moveTo(C.shift(),C.shift());C.length;)r.lineTo(C.shift(),C.shift());r.closePath(),r.fill(),r.stroke()};let w=document.createElement("canvas");const b=()=>{const A=e[1]?.font?.split(" ")?.[1];w.height=n.height,w.width=n.width;let C=w.getContext("2d",{willReadFrequently:!0});C.font=c+"px "+A;for(const _ in e[1])C[_]=e[1][_];ere(C,o.value,g,m-5)};y(),b(),r.drawImage(w,0,0)}})(g,l,r);const m=yield wU(l),y=URL.createObjectURL(m);o(Object.assign({},u,{data:g,url:y,canvas:l,file:(b=m,A=u.name,new File([b],A,{lastModified:(new Date).getTime(),type:b.type}))})),HS(i)}else o(Object.assign({},u,{data:g,canvas:l}))}var b,A}),c.src=u.url},a.onerror=u=>s(u),a.readAsDataURL(t)})})(s,n))).then(s=>{Vt(i,s)}).catch(s=>Vt(i,null,s))}),i),ere=(t,n,e,r)=>{let i=1.2*t.measureText("M").width,o=n.split("\n");for(var s=0;s<o.length;++s)t.fillText(o[s],e,r),t.strokeText(o[s],e,r),r+=i},AU=(t=[],n=100,e=100)=>{if(t.length&&(n<100||e<100)){const r=[];return new Promise((i,o)=>{for(const s of t){const a=new Image,u=new FileReader;u.onload=function(c){a.onload=function(){const l=document.createElement("canvas"),f=l.getContext("2d"),p=Math.round(a.width*(n/100)),g=Math.round(a.height*(n/100));l.width=p,l.height=g,f.drawImage(a,0,0,p,g),l.toBlob(m=>{const y=new File([m],s.name,{type:s.type});r.push(y),t.length===r.length&&i(r)},s.type,e/100)},a.src=c.target.result},u.onerror=c=>o(c),u.readAsDataURL(s)}})}return Promise.resolve(t)},xU=t=>{Object.assign([],t.childNodes).forEach(n=>t.removeChild(n))},qS=(t,n)=>{t.style.width=n.offsetWidth+"px",t.style.height=n.offsetHeight+"px"},CU=(t=300)=>{t&&nre()&&window?.navigator?.vibrate(t)},nre=()=>{const t=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4))||/^((?!chrome|android).)*safari/i.test(t))};let rre=(()=>{class t{loadFiles(e=[],r,i){const o=new is;return AU(e,r,i).then(s=>{Promise.all(Object.assign([],s).map(a=>this.readAsDataURL(a))).then(a=>Vt(o,a)).catch(a=>Vt(o,null,a))}),o}loadFilesToScan(e=[],r,i,o){return bU(e,r,i,o)}readAsDataURL(e){return new Promise((r,i)=>{const o=new FileReader;o.onload=()=>{const s={name:e.name,file:e,url:URL.createObjectURL(e)};r(s)},o.onerror=s=>i(s),o.readAsDataURL(e)})}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ore=(()=>{class t{constructor(e,r){this.renderer=e,this.elementRef=r,this.event=new Ie,this.src=Ru.src,this.fps=Ru.fps,this.vibrate=Ru.vibrate,this.decode=Ru.decode,this.isBeep=Ru.isBeep,this.config=Ru,this.constraints=Ru.constraints,this.canvasStyles=[VS,WS],this.isStart=!1,this.isPause=!1,this.isLoading=!1,this.isTorch=!1,this.data=new Qe([]),this.devices=new Qe([]),this.deviceIndexActive=0,this.dataForResize=[],this.ready=new is,this.STATUS={startON:()=>this.isStart=!0,pauseON:()=>this.isPause=!0,loadingON:()=>this.isLoading=!0,startOFF:()=>this.isStart=!1,pauseOFF:()=>this.isPause=!1,loadingOFF:()=>this.isLoading=!1,torchOFF:()=>this.isTorch=!1}}ngOnInit(){this.overrideConfig(),((t=new is,n)=>{let e=0;const r=(i=!1)=>{const o=()=>{let u;try{const c=()=>{clearTimeout(u),VA()?setTimeout(()=>Vt(t,!0)):u=setTimeout(()=>c())};setTimeout(()=>c()),setTimeout(()=>clearTimeout(u),3e3)}catch{clearTimeout(u)}},s=document.querySelectorAll(`script[src="${Ov}"]`),a=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js"]');if(s.length||a.length)o();else{const u=document.querySelectorAll(`script[src="${zS}"]`);if(1===u.length)o();else if(u.forEach(c=>c.remove()),n){const c=n.createElement("script");n.setAttribute(c,"src",i?Ov:zS),n.setAttribute(c,"type","text/javascript"),n.setAttribute(c,"async",""),n.appendChild(document.head,c),c.onload=()=>o(),c.onerror=()=>{e<2?(document.head.removeChild(c),r(!0)):Vt(t,!1,Ov)},e+=1}else{const c=document.createElement("script");c.setAttribute("src",i?Ov:zS),c.setAttribute("type","text/javascript"),c.setAttribute("async",""),document.head.appendChild(c),c.onload=()=>o(),c.onerror=()=>{e<2?(document.head.removeChild(c),r(!0)):Vt(t,!1,Ov)},e+=1}}};return r(),t})(this.ready,this.renderer).subscribe(()=>{this.src&&this.loadImage(this.src),this.resize()})}start(e){const r=new is;return this.isStart?Vt(r,!1):this.safariWebRTC(r,e),r}stop(){this.STATUS.pauseOFF(),this.STATUS.startOFF(),this.STATUS.torchOFF(),this.STATUS.loadingOFF();const e=new is;try{clearTimeout(this.rAF_ID),this.video.nativeElement.srcObject.getTracks().forEach(r=>{r.stop(),Vt(e,!0)}),this.dataForResize=[],(t=>{t.getContext("2d",{willReadFrequently:!0}).clearRect(0,0,t.width,t.height)})(this.canvas.nativeElement),xU(this.resultsPanel.nativeElement)}catch(r){Vt(e,!1,r)}return e}play(){const e=new is;return this.isPause?(this.video.nativeElement.play(),this.STATUS.pauseOFF(),this.requestAnimationFrame(),Vt(e,!0)):Vt(e,!1),e}pause(){const e=new is;return this.isStart?(clearTimeout(this.rAF_ID),this.video.nativeElement.pause(),this.STATUS.pauseON(),Vt(e,!0)):Vt(e,!1),e}playDevice(e,r=new is){const i=this.getConstraints();switch(!0){case"null"===e||"undefined"===e||!e:stop(),this.stop(),Vt(r,!1);break;case e&&(!this.isStart||!i||i.deviceId!==e):stop(),this.stop(),this.STATUS.loadingON(),this.deviceIndexActive=this.devices.value.findIndex(a=>a.deviceId===e);const s={...this.constraints,audio:!1,video:{deviceId:e,...this.constraints.video}};navigator.mediaDevices.getUserMedia(s).then(a=>{this.video.nativeElement.srcObject=a,this.video.nativeElement.onloadedmetadata=()=>{this.video.nativeElement.play(),this.requestAnimationFrame(),Vt(r,!0),this.STATUS.startON(),this.STATUS.loadingOFF()}}).catch(a=>{this.eventEmit(!1),Vt(r,!1,a),this.STATUS.startOFF(),this.STATUS.loadingOFF()});break;default:Vt(r,!1),this.STATUS.loadingOFF()}return r}loadImage(e){const r=new is;this.STATUS.startOFF(),this.STATUS.loadingON();const i=new Image;return i.setAttribute("crossOrigin","anonymous"),i.onload=()=>{VA()&&this.drawImage(i,o=>{Vt(r,o),this.STATUS.startOFF(),this.STATUS.loadingOFF()})},i.src=e,r}torcher(){const e=this.applyConstraints({advanced:[{torch:this.isTorch}]});return e.subscribe(()=>!1,()=>this.isTorch=!this.isTorch),e}applyConstraints(e,r=0){var i=this;const o=new is;if(this.isStart){const s=this.video.nativeElement.srcObject;if(null===r&&void 0===r&&Number.isNaN(r))Vt(o,!1,"Please check again deviceIndex");else{const a=s.getVideoTracks()[r];new window.ImageCapture(a).getPhotoCapabilities().then(B(function*(){yield a.applyConstraints(e),qS(i.video.nativeElement,i.canvas.nativeElement),Vt(o,!0)})).catch(c=>{switch(c?.name){case"NotFoundError":case"DevicesNotFoundError":Vt(o,!1,"Required track is missing");break;case"NotReadableError":case"TrackStartError":Vt(o,!1,"Webcam or mic are already in use");break;case"OverconstrainedError":case"ConstraintNotSatisfiedError":Vt(o,!1,"Constraints can not be satisfied by avb. devices");break;case"NotAllowedError":case"PermissionDeniedError":Vt(o,!1,"Permission denied in browser");break;case"TypeError":Vt(o,!1,"Empty constraints object");break;default:Vt(o,!1,c)}})}}else Vt(o,!1,"Please start the scanner");return o}getConstraints(e=0){return this.video.nativeElement.srcObject?.getVideoTracks()[e]?.getConstraints()}download(e=`ngx_scanner_qrcode_${Date.now()}.png`,r,i){var o=this;const s=new is;return B(function*(){const u=((t,n)=>new File([t],n,{lastModified:(new Date).getTime(),type:t.type}))(yield wU(o.canvas.nativeElement),e);bU([u],o.config,r,i,s).subscribe(c=>{c.forEach(l=>{if(l?.data?.length){const f=document.createElement("a");f.href=l.url,f.download=l.name,f.click(),f.remove()}})})})(),s}resize(){window.addEventListener("resize",()=>{yU(this.dataForResize,this.canvas.nativeElement,this.resultsPanel.nativeElement,this.canvasStyles),qS(this.video.nativeElement,this.canvas.nativeElement)})}overrideConfig(){"src"in this.config&&(this.src=this.config.src),"fps"in this.config&&(this.fps=this.config.fps),"vibrate"in this.config&&(this.vibrate=this.config.vibrate),"decode"in this.config&&(this.decode=this.config.decode),"isBeep"in this.config&&(this.isBeep=this.config.isBeep),"constraints"in this.config&&(this.constraints=((t,n,e)=>{if(n&&Object.keys(n[t]).length){for(const r in e){const i=JSON.parse(JSON.stringify({...n[t],[r]:e[r]}));n[t]=n[t].hasOwnProperty(r)?n[t]:i}return n[t]}return e})("constraints",this.config,vU)),"canvasStyles"in this.config&&2===this.config?.canvasStyles?.length&&(this.canvasStyles=this.config.canvasStyles)}safariWebRTC(e,r){this.STATUS.startOFF(),this.STATUS.loadingON(),navigator.mediaDevices.getUserMedia(this.constraints).then(i=>{i.getTracks().forEach(o=>o.stop()),this.loadAllDevices(e,r)}).catch(i=>{Vt(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}loadAllDevices(e,r){navigator.mediaDevices.enumerateDevices().then(i=>{let o=i.filter(s=>"videoinput"==s.kind);this.devices.next(o),o?.length>0?(Vt(e,o),r?r(o):this.playDevice(o[0].deviceId)):(Vt(e,!1,"No camera detected."),this.STATUS.startOFF(),this.STATUS.loadingOFF())}).catch(i=>{Vt(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}drawImage(e,r=(()=>{})){var i=this;return B(function*(){const o=i.canvas.nativeElement,s=o.getContext("2d",{willReadFrequently:!0});e instanceof HTMLImageElement&&(o.width=e.naturalWidth,o.height=e.naturalHeight,e.style.visibility="",i.video.nativeElement.style.visibility="hidden",i.renderer.setStyle(i.elementRef.nativeElement,"width",o.width+"px"),i.renderer.setStyle(i.elementRef.nativeElement,"maxWidth","100%"),i.renderer.setStyle(i.elementRef.nativeElement,"display","inline-block")),e instanceof HTMLVideoElement&&(o.width=e.videoWidth,o.height=e.videoHeight,e.style.visibility="",i.canvas.nativeElement.style.visibility="hidden"),qS(i.video.nativeElement,o),s.clearRect(0,0,o.width,o.height),s.drawImage(e,0,0,o.width,o.height);const a=s.getImageData(0,0,o.width,o.height),u=yield zbarWasm.scanImageData(a);if(u?.length){u.forEach(l=>l.value=l.decode(i.decode?.toLocaleLowerCase())),yU(u,Object.freeze(i.canvas.nativeElement),i.resultsPanel.nativeElement,i.canvasStyles);const c=()=>{i.eventEmit(u),i.dataForResize=u};e instanceof HTMLImageElement&&(r(!0),c(),CU(i.vibrate),HS(i.isBeep)),e instanceof HTMLVideoElement&&(c(),CU(i.vibrate),HS(i.isBeep))}else r(!1),xU(i.resultsPanel.nativeElement),i.dataForResize=[]})()}eventEmit(e=!1){!1!==e&&this.data.next(e||[]),!1!==e&&this.event.emit(e||[])}requestAnimationFrame(e=100){try{clearTimeout(this.rAF_ID),this.rAF_ID=setTimeout(()=>{this.video.nativeElement.readyState===this.video.nativeElement.HAVE_ENOUGH_DATA&&(e=0,VA()&&this.drawImage(this.video.nativeElement),this.isStart&&!this.isPause&&this.requestAnimationFrame(e))},e||this.fps)}catch{clearTimeout(this.rAF_ID)}}get isReady(){return this.ready}ngOnDestroy(){this.pause()}static#e=this.\u0275fac=function(r){return new(r||t)(ve(Dw),ve(qo))};static#t=this.\u0275cmp=bt({type:t,selectors:[["ngx-scanner-qrcode"]],viewQuery:function(r,i){if(1&r&&(dr(qne,5),dr(Gne,5),dr(Kne,5)),2&r){let o;fr(o=hr())&&(i.video=o.first),fr(o=hr())&&(i.canvas=o.first),fr(o=hr())&&(i.resultsPanel=o.first)}},hostAttrs:[1,"ngx-scanner-qrcode"],inputs:{src:"src",fps:"fps",vibrate:"vibrate",decode:"decode",isBeep:"isBeep",config:"config",constraints:"constraints",canvasStyles:"canvasStyles"},outputs:{event:"event"},exportAs:["scanner"],decls:6,vars:0,consts:[["resultsPanel",""],["canvas",""],["video",""],[1,"origin-overlay"],[1,"origin-canvas"],["playsinline","",1,"origin-video"]],template:function(r,i){1&r&&Fe(0,"div",3,0)(2,"canvas",4,1)(4,"video",5,2)},styles:[".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp svg:active path{stroke:#afafaf}\n"],encapsulation:2})}return t})();var pn=function(t){return t[t.ScannerQRCode_NONE=0]="ScannerQRCode_NONE",t[t.ScannerQRCode_PARTIAL=1]="ScannerQRCode_PARTIAL",t[t.ScannerQRCode_EAN2=2]="ScannerQRCode_EAN2",t[t.ScannerQRCode_EAN5=5]="ScannerQRCode_EAN5",t[t.ScannerQRCode_EAN8=8]="ScannerQRCode_EAN8",t[t.ScannerQRCode_UPCE=9]="ScannerQRCode_UPCE",t[t.ScannerQRCode_ISBN10=10]="ScannerQRCode_ISBN10",t[t.ScannerQRCode_UPCA=12]="ScannerQRCode_UPCA",t[t.ScannerQRCode_EAN13=13]="ScannerQRCode_EAN13",t[t.ScannerQRCode_ISBN13=14]="ScannerQRCode_ISBN13",t[t.ScannerQRCode_COMPOSITE=15]="ScannerQRCode_COMPOSITE",t[t.ScannerQRCode_I25=25]="ScannerQRCode_I25",t[t.ScannerQRCode_DATABAR=34]="ScannerQRCode_DATABAR",t[t.ScannerQRCode_DATABAR_EXP=35]="ScannerQRCode_DATABAR_EXP",t[t.ScannerQRCode_CODABAR=38]="ScannerQRCode_CODABAR",t[t.ScannerQRCode_CODE39=39]="ScannerQRCode_CODE39",t[t.ScannerQRCode_PDF417=57]="ScannerQRCode_PDF417",t[t.ScannerQRCode_QRCODE=64]="ScannerQRCode_QRCODE",t[t.ScannerQRCode_SQCODE=80]="ScannerQRCode_SQCODE",t[t.ScannerQRCode_CODE93=93]="ScannerQRCode_CODE93",t[t.ScannerQRCode_CODE128=128]="ScannerQRCode_CODE128",t[t.ScannerQRCode_SYMBOL=255]="ScannerQRCode_SYMBOL",t[t.ScannerQRCode_ADDON2=512]="ScannerQRCode_ADDON2",t[t.ScannerQRCode_ADDON5=1280]="ScannerQRCode_ADDON5",t[t.ScannerQRCode_ADDON=1792]="ScannerQRCode_ADDON",t}(pn||{});let cre=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({providers:[rre]})}return t})();const lre=["scanner"];function dre(t,n){1&t&&Jn(0)}function fre(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",9)(2,"img",10),me("click",function(){return ee(e),te(j(2).rotateCameraClicked())}),G()(),xe()}if(2&t){const e=j(2);M(2),U("src",e.Assets.Images.RotateCamera,He)}}function hre(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",6)(2,"ngx-scanner-qrcode",7,3),me("event",function(i){return ee(e),te(j().onScannedACode(i))}),G()(),_e(4,dre,1,0,"ng-container",8)(5,fre,3,1,"ng-container",5),xe()}if(2&t){const e=n.ngIf;j();const r=gt(1),i=gt(5);M(4),U("ngIf",r.clientWidth>=r.clientHeight)("ngIfElse",i),M(),U("ngIf",e.length>1)}}function pre(t,n){1&t&&(z(0,"div",11),Fe(1,"div",12),G()),2&t&&(j(),Xn("width",.7*gt(1).clientWidth,"px"))}function gre(t,n){1&t&&(z(0,"div",11),Fe(1,"div",12),G()),2&t&&(j(),Xn("width",.7*gt(1).clientHeight,"px"))}let WA=class O2{constructor(){this.devices$=new Qe([]),this.deviceIndex=-1,this.Assets=yi,this.scanCompleted=new Ie}getAvailableDevices(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((n,e)=>{navigator.mediaDevices.enumerateDevices().then(r=>{n(r.filter(i=>"videoinput"===i.kind))}).catch(r=>{e(r.message||r)})}):Promise.reject("Couldn't find camera information")}rotateCameraClicked(){const n=this.devices$.getValue();n.length>1&&this.startScanning((this.deviceIndex+1)%n.length)}ngOnInit(){this.getAvailableDevices().then(n=>{this.devices$.next(n)}).catch(n=>{console.error(n.message||n)})}ngAfterViewInit(){this.devices$.pipe(Xt(this)).subscribe(n=>{this.scanner&&!this.scanner.isStart&&n.length>0&&this.startScanning(0)})}stopScanning(){this.scanner&&(this.scanner.isPause||this.scanner.pause(),this.scanner.isStart&&this.scanner.stop())}startScanning(n){if(this.scanner){const e=this.devices$.getValue();e.length>n&&(this.scanner.isStart?(this.stopScanning(),this.scanner.start(()=>{this.scanner&&this.scanner.playDevice(e[n].deviceId),this.deviceIndex=n})):this.scanner.start())}}ngOnDestroy(){this.stopScanning()}onScannedACode(n){if(n.length>0){const e=n[n.length-1],r=new mre(e.value,this.formatFromScanResult(e.type));this.scanCompleted.next(r)}}formatFromScanResult(n){switch(n){case pn.ScannerQRCode_NONE:return xn.NONE;case pn.ScannerQRCode_PARTIAL:return xn.PARTIAL;case pn.ScannerQRCode_EAN2:return xn.EAN2;case pn.ScannerQRCode_EAN5:return xn.EAN5;case pn.ScannerQRCode_EAN8:return xn.EAN8;case pn.ScannerQRCode_UPCE:return xn.UPCA;case pn.ScannerQRCode_ISBN10:return xn.ISBN10;case pn.ScannerQRCode_UPCA:return xn.UPCA;case pn.ScannerQRCode_EAN13:return xn.EAN13;case pn.ScannerQRCode_ISBN13:return xn.ISBN13;case pn.ScannerQRCode_COMPOSITE:return xn.COMPOSITE;case pn.ScannerQRCode_I25:return xn.I25;case pn.ScannerQRCode_DATABAR:return xn.DATABAR;case pn.ScannerQRCode_DATABAR_EXP:return xn.DATABAR_EXP;case pn.ScannerQRCode_CODABAR:return xn.CODABAR;case pn.ScannerQRCode_CODE39:return xn.CODE39;case pn.ScannerQRCode_PDF417:return xn.PDF417;case pn.ScannerQRCode_QRCODE:return xn.QRCODE;case pn.ScannerQRCode_SQCODE:return xn.SQCODE;case pn.ScannerQRCode_CODE93:return xn.CODE93;case pn.ScannerQRCode_CODE128:return xn.CODE128;case pn.ScannerQRCode_SYMBOL:return xn.SYMBOL;case pn.ScannerQRCode_ADDON2:return xn.EAN2;case pn.ScannerQRCode_ADDON5:return xn.EAN5;case pn.ScannerQRCode_ADDON:return xn.COMPOSITE}}static#e=this.\u0275fac=function(e){return new(e||O2)};static#t=this.\u0275cmp=bt({type:O2,selectors:[["scan-code"]],viewQuery:function(e,r){if(1&e&&dr(lre,5),2&e){let i;fr(i=hr())&&(r.scanner=i.first)}},outputs:{scanCompleted:"scanCompleted"},standalone:!0,features:[pr],decls:8,vars:3,consts:[["container",""],["biggerHeight",""],["smallerHeight",""],["scanner",""],[1,"container"],[4,"ngIf"],[1,"scanner"],[3,"event"],[4,"ngIf","ngIfElse"],[1,"rotate-camera"],["alt","Rotate Camera","srcset","",3,"click","src"],[1,"scanner-animation"],[1,"scanner-view"]],template:function(e,r){1&e&&(z(0,"div",4,0),_e(2,hre,6,3,"ng-container",5),Bt(3,"async"),_e(4,pre,2,2,"ng-template",null,1,Mt)(6,gre,2,2,"ng-template",null,2,Mt),G()),2&e&&(M(2),U("ngIf",Lt(3,1,r.devices$)))},dependencies:[Zn,gr,Zo,cre,ore],styles:[".container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:block;overflow:hidden}.scanner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:100%;max-height:100%;transform:translate(-50%,-50%);overflow:hidden}.scanner-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;aspect-ratio:1/1;transform:translate(-50%,-50%);overflow:hidden;background-color:#00c8001a;border-left:2px solid #00ff00;border-right:2px solid #00ff00}.scanner-view[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:2%;background-color:#00ff0080;animation:_ngcontent-%COMP%_scan 1s ease-in-out alternate-reverse infinite}@keyframes _ngcontent-%COMP%_scan{0%{transform:translateY(-100%)}to{transform:translateY(5000%)}}.rotate-camera[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:64px;background-color:#fff8;display:flex;align-items:center;justify-content:flex-end;box-sizing:border-box;padding:8px}"]})};WA=vi([ji()],WA);var xn=function(t){return t.NONE="NONE",t.PARTIAL="PARTIAL",t.EAN2="EAN2",t.EAN5="EAN5",t.EAN8="EAN8",t.Upce="UPCE",t.ISBN10="ISBN10",t.UPCA="UPCA",t.EAN13="EAN13",t.ISBN13="ISBN13",t.COMPOSITE="COMPOSITE",t.I25="I25",t.DATABAR="DATABAR",t.DATABAR_EXP="DATABAR_EXP",t.CODABAR="CODABAR",t.CODE39="CODE39",t.PDF417="PDF417",t.QRCODE="QRCODE",t.SQCODE="SQCODE",t.CODE93="CODE93",t.CODE128="CODE128",t.SYMBOL="SYMBOL",t}(xn||{});class mre{constructor(n,e){this.code=n,this.format=e}}const vre=["passcode"];function yre(t,n){if(1&t&&(Ae(0),z(1,"div",3)(2,"span"),we(3),G()(),xe()),2&t){const e=j();M(3),nn(e.subtitle)}}function wre(t,n){if(1&t){const e=Te();Ae(0),z(1,"span",8),me("click",function(){return ee(e),te(j().onSubmit())}),we(2,"Submit"),G(),xe()}}let EU=(()=>{class t{constructor(){this.title="Enter your pin",this.subtitle=void 0,this.length=4,this.dismiss=new Ie,this.pinReady=new Ie,this.currentPin="",this.showSubmitButton=!1,this.CloseButton="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFNSURBVEiJzZGxSkJhGIaf79Ml7+FAWRHUGETS0KBX0aB0AwotOdbWVNjoUgaCN+HQUEHQmCAdRBTOLbic838NhhIGisdDvtPPz/8/D7yvAFgQZCCsAmfAJpBiuURAH7MmTm/E80ZiQZDBwjbC8ZLQvyP2Rqh5hbC6cjiASQ51l2LBwAe2Vy4AEHxl3HkyMbaU5QddJClNEA7A/wtcq475nZl78zu4Vj2+QI5OcY0a9vU5hfe6uEYNOTyZKxALBjbvkfW6uIdbtFiGVHpylt2D1Qjgp5JGDQAtVZCd/UW+rcHIMO1ci2X0/GJmk1gC63Vxj3eTziW7N5Y83S8kmS94f0aLlV+DSnYPLVWwj5e5goVHXjbrMXJcQZQgP1Kgn6Cgp5g1E8OLNMWGww3Sro1JbsX0VyIKKp43ItQ8ZtcIPvE2iRB8RK6IKIjnjb4BKVqHRs2egwcAAAAASUVORK5CYII="}ngAfterViewInit(){this.passcodeInput?.nativeElement.focus()}onDismiss(){this.dismiss.next()}verifyInput(e){let r=10;this.length>0&&this.length<10&&(r=this.length);const i=this.currentPin,o=e.substring(0,Math.min(r,e.length)),s=o.length;return s<=r?(this.currentPin=o,0===this.length?(this.showSubmitButton=!0,!0):(s===this.length&&this.pinReady.next(this.currentPin),this.showSubmitButton=!1,!0)):(this.currentPin=i,!1)}onSubmit(){this.pinReady.next(this.currentPin)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["alpha-numeric-pin"]],viewQuery:function(r,i){if(1&r&&dr(vre,5),2&r){let o;fr(o=hr())&&(i.passcodeInput=o.first)}},inputs:{title:"title",subtitle:"subtitle",length:"length"},outputs:{dismiss:"dismiss",pinReady:"pinReady"},standalone:!0,features:[pr],decls:12,vars:6,consts:[["passcode",""],[1,"page-container"],[1,"container"],[1,"item"],[4,"ngIf"],["inputMode","password","type","password",1,"pass-code",3,"paste","keyup","value","autocomplete"],[1,"header"],["alt","Cancel","srcset","",1,"button","fade-in",3,"click","src"],[1,"button",3,"click"]],template:function(r,i){if(1&r){const o=Te();z(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3"),we(4),G()(),_e(5,yre,4,1,"ng-container",4),z(6,"div",3)(7,"input",5,0),me("paste",function(a){return ee(o),te(a.preventDefault())})("keyup",function(){ee(o);const a=gt(8);return te(i.verifyInput(a.value))}),G()()(),z(9,"div",6)(10,"img",7),me("click",function(){return ee(o),te(i.onDismiss())}),G(),_e(11,wre,3,0,"ng-container",4),G()()}2&r&&(M(4),nn(i.title),M(),U("ngIf",i.subtitle),M(2),U("value",i.currentPin)("autocomplete",!1),M(3),U("src",i.CloseButton,He),M(),U("ngIf",i.showSubmitButton))},dependencies:[Zn,gr],styles:[".page-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:#fff;overflow:auto;pointer-events:all}.container[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box;padding:24px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:20px}h3[_ngcontent-%COMP%]{margin:0}.item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;text-align:center;max-width:320px;font-size:14px;color:var(--default-text-color-lighter);-webkit-user-select:none;user-select:none}.pass-code[_ngcontent-%COMP%]{width:90%;height:40px;border-radius:4px;border:1px solid #ddd;outline:none;text-align:center;font-size:40px}.header[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;gap:10px;justify-content:space-between;align-items:center;position:absolute;top:0;left:0;width:100%;height:40px;padding:8px}@keyframes _ngcontent-%COMP%_fade-in-anim{0%{opacity:0}to{opacity:1}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-anim .5s ease-in}.button[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;text-transform:uppercase;color:#04a6f4}"]})}return t})();const bre=["numpad"],Are=(t,n)=>({landscape:t,portrait:n});function xre(t,n){if(1&t&&(Ae(0),z(1,"div",6)(2,"span"),we(3),G()(),xe()),2&t){const e=j();M(3),nn(e.subtitle)}}function Cre(t,n){1&t&&Jn(0,13),2&t&&(j(),U("ngTemplateOutlet",gt(20)))}function _re(t,n){if(1&t){const e=Te();Ae(0),z(1,"span",14),me("click",function(){return ee(e),te(j().onSubmit())}),we(2,"Submit"),G(),xe()}}function Ere(t,n){if(1&t){const e=Te();z(0,"div",15)(1,"div",16),me("click",function(){return ee(e),te(j().verifyInput("1"))}),we(2,"1"),G(),z(3,"div",16),me("click",function(){return ee(e),te(j().verifyInput("2"))}),we(4,"2"),G(),z(5,"div",16),me("click",function(){return ee(e),te(j().verifyInput("3"))}),we(6,"3"),G(),z(7,"div",16),me("click",function(){return ee(e),te(j().verifyInput("4"))}),we(8,"4"),G()(),z(9,"div",15)(10,"div",16),me("click",function(){return ee(e),te(j().verifyInput("5"))}),we(11,"5"),G(),z(12,"div",16),me("click",function(){return ee(e),te(j().verifyInput("6"))}),we(13,"6"),G(),z(14,"div",16),me("click",function(){return ee(e),te(j().verifyInput("7"))}),we(15,"7"),G(),z(16,"div",16),me("click",function(){return ee(e),te(j().verifyInput("8"))}),we(17,"8"),G()(),z(18,"div",15),Fe(19,"div",17),z(20,"div",16),me("click",function(){return ee(e),te(j().verifyInput("9"))}),we(21,"9"),G(),z(22,"div",16),me("click",function(){return ee(e),te(j().verifyInput("0"))}),we(23,"0"),G(),z(24,"div",18),me("click",function(){return ee(e),te(j().clearInput())}),Fe(25,"img",19),G()()}if(2&t){const e=j();M(25),U("src",e.BackspaceIcon,He)}}function Dre(t,n){if(1&t){const e=Te();z(0,"div",15)(1,"div",16),me("click",function(){return ee(e),te(j().verifyInput("1"))}),we(2,"1"),G(),z(3,"div",16),me("click",function(){return ee(e),te(j().verifyInput("2"))}),we(4,"2"),G(),z(5,"div",16),me("click",function(){return ee(e),te(j().verifyInput("3"))}),we(6,"3"),G()(),z(7,"div",15)(8,"div",16),me("click",function(){return ee(e),te(j().verifyInput("4"))}),we(9,"4"),G(),z(10,"div",16),me("click",function(){return ee(e),te(j().verifyInput("5"))}),we(11,"5"),G(),z(12,"div",16),me("click",function(){return ee(e),te(j().verifyInput("6"))}),we(13,"6"),G()(),z(14,"div",15)(15,"div",16),me("click",function(){return ee(e),te(j().verifyInput("7"))}),we(16,"7"),G(),z(17,"div",16),me("click",function(){return ee(e),te(j().verifyInput("8"))}),we(18,"8"),G(),z(19,"div",16),me("click",function(){return ee(e),te(j().verifyInput("9"))}),we(20,"9"),G()(),z(21,"div",15),Fe(22,"div",17),z(23,"div",16),me("click",function(){return ee(e),te(j().verifyInput("0"))}),we(24,"0"),G(),z(25,"div",18),me("click",function(){return ee(e),te(j().clearInput())}),Fe(26,"img",19),G()()}if(2&t){const e=j();M(26),U("src",e.BackspaceIcon,He)}}let DU=(()=>{class t{constructor(){this.length=0,this.title="Enter your pin",this.subtitle=void 0,this.pinReady=new Ie,this.dismiss=new Ie,this.isLandscape$=new Qe(!1),this.currentPin="",this.showSubmitButton=!1,this.BackspaceIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAACxAAAAsQHGLUmNAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAPhJREFUSInt1LFKA0EUBdATJVa2glpYi3+gjQj+hrWV32D+wCK1oIWVkLQKfopomWBhMGVEN8VOwIzOZmMcbHJhYOftfffOvDc8lvhvNGb838L2nJoDPM0ireISxS/XPdaqDC4WEJ+sk5T46R+IFziHlUj8GO2E8Sf6UewdLwl+IzbYxS2aiYQb7KAb9kMc4ijBn8I6HlVfeYiDcIBr7IfvboLf+mpQt+4TE0G8U8Ft8b0H2ZC9RJRNHlQYXJkuy1sw2atrQPlMR4mED/Si2Ej5TGv34AFnPzkH7mYUa2IjwS8ScWQeFSw+7O6EYZdjXL/iec6cJTJiDAcltYzv8i8ZAAAAAElFTkSuQmCC",this.CloseButton="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFNSURBVEiJzZGxSkJhGIaf79Ml7+FAWRHUGETS0KBX0aB0AwotOdbWVNjoUgaCN+HQUEHQmCAdRBTOLbic838NhhIGisdDvtPPz/8/D7yvAFgQZCCsAmfAJpBiuURAH7MmTm/E80ZiQZDBwjbC8ZLQvyP2Rqh5hbC6cjiASQ51l2LBwAe2Vy4AEHxl3HkyMbaU5QddJClNEA7A/wtcq475nZl78zu4Vj2+QI5OcY0a9vU5hfe6uEYNOTyZKxALBjbvkfW6uIdbtFiGVHpylt2D1Qjgp5JGDQAtVZCd/UW+rcHIMO1ci2X0/GJmk1gC63Vxj3eTziW7N5Y83S8kmS94f0aLlV+DSnYPLVWwj5e5goVHXjbrMXJcQZQgP1Kgn6Cgp5g1E8OLNMWGww3Sro1JbsX0VyIKKp43ItQ8ZtcIPvE2iRB8RK6IKIjnjb4BKVqHRs2egwcAAAAASUVORK5CYII="}ngAfterViewInit(){this.checkOrientation()}checkOrientation(){setTimeout(()=>{if(this.numpad){const e=this.numpad.nativeElement.offsetHeight<420;console.log("isLandscape: ",e,this.numpad.nativeElement.offsetWidth,this.numpad.nativeElement.offsetHeight),this.isLandscape$.next(e)}},500)}onOrientationChange(e){this.checkOrientation()}onKeyUp(e){["0","1","2","3","4","5","6","7","8","9"].includes(e.key)&&this.verifyInput(e.key)}verifyInput(e){let r=10;this.length>0&&this.length<10&&(r=this.length);const i=this.currentPin+e,o=i.length;if(o<=r){if(this.currentPin=i,0===this.length)return void(this.showSubmitButton=!0);o===this.length&&this.pinReady.next(this.currentPin),this.showSubmitButton=!1}}clearInput(){this.showSubmitButton=!1,this.currentPin=""}onClose(){this.dismiss.next()}onSubmit(){this.pinReady.next(this.currentPin)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["numeric-pin"]],viewQuery:function(r,i){if(1&r&&dr(bre,5),2&r){let o;fr(o=hr())&&(i.numpad=o.first)}},hostBindings:function(r,i){1&r&&me("orientationchange",function(s){return i.onOrientationChange(s)},0,Yg)("keyup",function(s){return i.onKeyUp(s)},!1,$0)},inputs:{length:"length",title:"title",subtitle:"subtitle"},outputs:{pinReady:"pinReady",dismiss:"dismiss"},standalone:!0,features:[pr],decls:23,vars:22,consts:[["numpad",""],["landscape",""],["portrait",""],[1,"container"],[1,"body"],[1,"body-top"],[1,"top-item"],[4,"ngIf"],["type","password","disabled","",1,"pass-code",3,"value","autocomplete"],[1,"body-down",3,"ngClass"],[3,"ngTemplateOutlet",4,"ngIf","ngIfElse"],[1,"header"],["alt","Cancel","srcset","",1,"button","fade-in",3,"click","src"],[3,"ngTemplateOutlet"],[1,"button",3,"click"],[1,"numpad-row"],[1,"numpad-item","numberpad-item-number",3,"click"],[1,"numpad-item"],[1,"numpad-item",3,"click"],["alt","clear","srcset","",2,"cursor","pointer","user-select","none",3,"src"]],template:function(r,i){if(1&r){const o=Te();z(0,"div",3,0)(2,"div",4),Bt(3,"async"),z(4,"div",5)(5,"div",6)(6,"h3"),we(7),G()(),_e(8,xre,4,1,"ng-container",7),z(9,"div",6),Fe(10,"input",8),G()(),z(11,"div",9),Bt(12,"async"),Bt(13,"async"),_e(14,Cre,1,1,"ng-container",10),Bt(15,"async"),G()(),z(16,"div",11)(17,"img",12),me("click",function(){return ee(o),te(i.onClose())}),G(),_e(18,_re,3,0,"ng-container",7),G()(),_e(19,Ere,26,1,"ng-template",null,1,Mt)(21,Dre,27,1,"ng-template",null,2,Mt)}if(2&r){const o=gt(22);M(2),Xn("flex-direction",Lt(3,11,i.isLandscape$)?"row":"column"),M(5),nn(i.title),M(),U("ngIf",i.subtitle),M(2),U("value",i.currentPin)("autocomplete",!1),M(),U("ngClass",K1(19,Are,!1===Lt(12,13,i.isLandscape$),Lt(13,15,i.isLandscape$))),M(3),U("ngIf",Lt(15,17,i.isLandscape$))("ngIfElse",o),M(3),U("src",i.CloseButton,He),M(),U("ngIf",i.showSubmitButton)}},dependencies:[Zn,$O,gr,Fm,Zo],styles:[".container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:#fff;overflow:hidden;pointer-events:all}h3[_ngcontent-%COMP%]{margin:0;color:var(--default-text-color)}.body[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;width:100%;height:100%;justify-content:center;align-items:center;background-color:#f8fbff}.body-top[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:20px;align-items:center;justify-content:center;box-sizing:border-box;padding:40px 24px;max-width:320px}.top-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;text-align:center;font-size:14px;color:var(--default-text-color-lighter)}.pass-code[_ngcontent-%COMP%]{width:90%;height:40px;border-radius:4px;border:1px solid #ddd;outline:none;text-align:center;font-size:40px}.pass-code[_ngcontent-%COMP%]:focus{outline:none}.body-down[_ngcontent-%COMP%]{flex:0 1 auto;background-color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;box-sizing:border-box;padding:32px;max-height:-moz-fit-content;max-height:fit-content}.body-down.landscape[_ngcontent-%COMP%]{width:100%}.body-down.portrait[_ngcontent-%COMP%]{flex:1;height:100%}.numpad-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;justify-content:center}.numpad-item[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center}.numpad-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.numberpad-item-number[_ngcontent-%COMP%]{border-radius:20px;background-color:#fff;-webkit-user-select:none;user-select:none;cursor:pointer;box-shadow:#0003 0 4px 10px 3px}.header[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;gap:10px;justify-content:space-between;align-items:center;position:absolute;top:0;left:0;width:100%;height:40px;padding:8px}@keyframes _ngcontent-%COMP%_fade-in-anim{0%{opacity:0}to{opacity:1}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-anim .5s ease-in}.button[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;text-transform:uppercase;color:#04a6f4}"]})}return t})();function HA(t){const e=t.match(/\.([^.\/?#]+)(?:[?#]|$)/);return e?e[1].toLowerCase():null}function IU(t){return["png","jpeg","jpg","gif","bmp","webp"].includes(t)}const SU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAABTVBMVEUAAAASoIcWooUVn4dRwZtWw5wVoIVVxJwUn4UUoIUUoIUUoIUUoIUUoIUVoIUWoYYYoYcZoocaoogao4gbo4kco4kepIogpYshpYwipowmp44mp48nqI8pqZAuro4yrJU0rZY3rpc5r5g6r5k8sJo9sZs+sZtAspxCs51FtJ5KtqFMt6JSuaVTuaZUuqZVuqdWu6dXu6hdyKBevqteyKBfvqxgv6xgv61jwK5lwa9owrFqw7FsxLNv0qZwxbVw0aZy06dzxrZ1x7d9yryEzb+Hz8GJz8KK0MKT08eU1MeW1ciX1cmZ1sqb1sui2c+k2tCv39Wz4Ni14dm24tm44tq85Ny95N2+5d7C5t/F6OHH6OLK6ePP7ObR7OfV7unW7unY7+vZ8Ovh8+/j9PHl9fLm9fLr9/Ts9/Xt+PXt+Pb5/Pz5/fz6/f3+//////9wh9oEAAAADXRSTlMARkdIxMTHx8jJ+Pn+qBQQ8QAAAAFiS0dEbiIPURcAAAF3SURBVEjH7dZXUwIxEAdwBBtlFezo2fUUe8NeDjtibygqVvREb7//o8kNw4wnWRJefOH/cnnIb26ym2TicuXi8fpBkCoXEU8AhDEo6QUCUtJHQkICDY2aUqFQFoUiWRwKpAQsLGVgQUnBjbysVINzBiEp2GUQEkg5syaUIJ0y/E+oDWqlwEjKQisVUYbRLPJkJxXh/Ddi8iCN+N6qBJmzNgGC14irSrB77CrGv9OIiZLasYgYl4eNszvbE/V81MIWuSANxzO8nI+9AM03iM8hWcjryZLugKYkotkv2w7uToZHjzVouET80GU3AHe79ih04XQUzDn9YSt2/8cRcIq5PYAB016m04lh2LQdhE8t5u56pI/VOqtLbucsrQwpnMdDRHt6qF3xIO8jjnB39hZfrlOBUcRUGNrOWd91pT8GnxA/b02RI9rRZ29TzOjKl5WWePl6Peos3+RlKAF9ss6n8LT+lWoHdAfkXKDC+bRy1/qLM3913v0A1u29arg/SHIAAAAASUVORK5CYII=",TU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABuwAAAbsBOuzj4gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANWSURBVHic7Zm9TxRBHIbf2U9vveNOOQ1HJGckaOkVNFZgZUwkUUNBY2FjTCy0sDPRymBBwX9AiSYmWplQmEBJpLDUmAMCChhOPA5Y2NvdWwuQZDG5uY+Zm1mzT7dzO/N798nO7twOCYIANEolu1fRvYkgwDCAHLUDQ0rlytyVixeGeY1PaAJKJbuXaN5nAOd4hajH6s9NJEyTmwSFeoLuTUDQxf9l33GGvi5/n+UxNlXA0W0vHF4SqALQ4TlfDx4SGhEgFawlRE4AwFZCJAUA7CREVgDARkKkBQDtS4i8AKA9Cf+FAKB1CdILUJXGI7YiQXoBpqE3dX6zEqQXkEkloTRxFwDNSZBegKoo6Ok+A+uUyWU6UP8O/ypX6B8MJKY700Xq/S79HcCbWIDoAKKJBYgOIJpYgOgAotGEB7AXYG2MQ3WKcJNDqKZvwk1dR0DMjtQXvhBKF0eg7c2H2mp6DnbuBZzM3bbHl34hdPLiAUBx15FceYh0cQTqwReu9YULqIe2N4/04m2o1SVuNaQTEChW6Jh4W0gtjoF4W1zqSSdg+/Ic3NPXQm1qdQldy/cA1JjXk06Ab+RR6X8Pu+dZqF2zP8GofGReTzoBhxDsn3+MavpWqNX8/YZ5JUkFHHLQfT90zOONILUAL1EAiHp8rLg/mNeQWkCgplDtunF87KaGmNcQvhSmsdf7Cr5xCQBwkH3AfHzpBdT0Hti559zGl3oKdIJYgOgAookFiA4gmliA6ACi4bwOqMEsv4O+MwvVKUJ1iggUA16iAC9xFb5V4Fu+AbgJMLY/wNp4CdX5FmonPmC4MzAqM7xKNwUXAWb5LZIrjwDIv7HM/Bmg2QtIrj5BFC4e4CDA3HoNBFXWw3KDuQB9d471kFyR6jXoG/mO12QuwE22/tGinb6twlyAc3YMIEbzHYlx2LfDMBfgWYPY7ZsEUHdL7gQEu32T8KxB1nGocHkGOJlR7OSn4JsD1HN9cwA7+Sk4mVEeUahw3h3+dykMAL7ZD9/sh5sahpO5A57PYtrusPDtcd5Ivz0umliA6ACiaUTAOvcU/KBmpwogBLNMogigkexUATVXewpgk0WgDrN5lL0uVAHZrLUWeFqBEEwjGtNhnRBMB55WyGatNdrJfwCH4jfLMLBkWAAAAABJRU5ErkJggg==",KS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB2AAAAdgB+lymcgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASySURBVHic7ZtdaFRHGIafObvZdM0Gk9biPyWmRlqkJCn0SqhBQaMS/CmIqJTai4ogNCQBLwra9rLSG68s1BtJKkJpAiKhKC30VhKvFI0aA/7GnxasLp4z53y9sFVMs3vm7M7Zk4R9YO+++eb93j0zc+YMAxERaPSg14U/XLjnQuCC2Px58+e7eu3aPVG1lYITJdiFzzy4JvAdsAZYCCjbosRxaqiv/1GvW/eJ7dxTMTbgOXwLnADejE/Oa2TIZk/qjo7NcXZiZIALexV8FaeQaVHqDXK509769evj6iLUAIEcLx75pJhHbe2g19HxcRzJQw3wYC8vxnpiKMepU7ncoLthw0e2c5s8AVtsd1oiDU4mc/b5xo0f2EwaaoCCFpsdlslbqXT6nHR2vm8rockkWKlZ3wyl3vZTqV9l8+YVNtKZGGB9nS8bpZb6jvO7bNr0TrmpIr0IzTCW+6nUedm+fXE5SWazAQDN2vPOy65dC0pNMNsNQMF7+smT32Tr1oZS2s96AwCUUqt1EJyTffvqo7adEwYAKJEP9cOHZ6W7Oxul3ZwxAECJrPFv3DgrBw/WmraZUwYAEARr9cTEL3LkSNokfO4ZACiRTn909Gc5fToVGhsW4MJjoNGKMlNyOdTq1WWnEa1/yFy48EWxmJlpgD3+zIS8ys/JIRCFqgFJC0iaqgFJC0iaqgFJC0iaqgFJC0gaow2DNTIZnM5OVFcXqr0dtWgRAHL3LjIyggwNEQwPg+dVVFZRXHhs48RX79wpwfXrEkYwNiZ6xw5bJ82PkzcgnRb/2LHQwqfiHz8ubk3NLDdAKfFPnYpc/EsTBgbEVWr2GqAPHSq5+P/QfX2xGhDbdlgtWUJ6bAzmzYva9HXyeXRLC3LrVimtk9sOO729BYuXS5fgwQOzRNksTne3RWURKWkIKCXBxETBx9pduFDcujrRfX0ik5OhwyAYH59dc4C3cmXRgtz6+lfxdXWie3tF7t8v2sZrbo7FgHiGwNKl5rFPnxIcPYq3YgV+Xx88ezZ93LJldrRNIRYDVEMJp1T/GhEMD0+fszGez5KxGCCTk5HbqPZ2UkNDONu2WctpQjx7gZs3jUNVWxvO4cM4XV2gCqzKIsj4uB1tUSn1RSgYHS08oa1aJV5rq/iDgyJBEL4KjIzEtgrEthsMBgZItbZO3+nly4X/7QK54iK+g5FslvSVK6jly0vR9RK5fRvd0lJ4dShOggcj+Tz+gQMQBKXnCAL8/ftLLd4O5WyGXBDd0xM6xguhe3rK2Qgl9yb4PxN27xbJ580rz+dF79lTbvEzxwAXxGtqEr+/X0TrIn+5Fr+/X7ymJhvFGxlQ+dPhBQtwtmxBtbXB4sUvVoM7d5CLFwnOnDHfJZoROglWj8crpWSmUjUgaQFJUzXAIEZiVxEfodpNDHhkQUhShH5EMLkyc9WOlsojcC0sxuTKzBk7ciqPifbQFyGBnAtjChbZkVUxJmvgXQVPigWZPAF/Az3WZFUIgS/DigfDZbAWBgS+KV9WZRD4uhZ+MomNdCHKhU+B75lpN8le8QjozsBJ0waRb4QJNGj4XKBLoEXFdIPcVI7AfQVXFQyl4YSCv6Ik+AfpZ/69uXAKlwAAAABJRU5ErkJggg==",MU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAACPVBMVEUAAADc3Nze3tPg4Mzr6+DbnZ3bnprq6uHo6N/p6d/WhIHVgH3k49jo6ODc2s3c2s7QYGDQYWDMS0zMTE3MTk/NTU7NTk/NT0/NUFHNUVLNUlPOUVLOUlPOU1POU1TOVlbOVlfOWFjOWVjPVlfPWVnPWlrPXFzPXl7PX17QWFnQX1/QYWHQZGTRW1zRXV7RXl/RY2LRZGPRZWXRZmbRZ2bRZ2fSX2DSaWjSbmzTYmPTY2TTZGXTcG/TcXDTdHLUZmfUaWnUdXTUenjUennVamvVeXfVe3rVfHnVfXvVfnzWb3DWgn/Wg4DWhILXc3PXhYPXiYbXiYfXiojYjYnYkI3ZeHnZenvZjovZkY3ZkY7Zk4/Z18ralJHamJTamJXamZXbgYLbm5fbnJjcgoPcg4PdpJ/dqaTdrKfeqqTerqner6nfjo/fsavfsq3fs63fs67ftK7fta/gkpPgk5Tgt7HguLLgurThurThvbfh4NXiwbriwrziw7zixL3ixb7jxr/jxsDjyMHjycHjysPjy8TkzMXkzcbk0MrlpKTl0srl1Mzl1c3l18/mpabm1s7m2NDm2dHnqannqqvnq6vnrKzn3NTn3tXn39fn4Njorq7o5Nvo5t3o597p5dzp5t3p6N/p6eDqs7TqtLXrt7fruLjrurrtwMHvxcXwycnxzc3xzs/z1NT129v239/34uL34+T45+f56On56en56+v67e367+/78PD78vL89PT89vb9+Pj9+fn+/f3//v7///86cIymAAAAEnRSTlMAFhcZGUZHbnCAvMDJ1/Hx+vp2gHwLAAAAAWJLR0S+pNyDwwAAAjFJREFUSMfl1OdTE0EYBvBYEbDgc5KAGIgFwYaK/VAEBUvsXUAj9i5qVFRUELChsSEYkSSrBhGJvbf929wjxpkke9zufXLG58vuvTO/eWd33zmLpSf9h5DeMriPRSeDenXk3NC+OjDRAFYM62cS6kljqCMFIF9yof9xFORKHtwxIr8lCvIkB15THNgYDTmSA0+henxpDIyXHFiHK7NWxMI4yYFe23qlPA5WxMwQ73KKgWOccoIh3A/c4JQTDWFbVlrAFPTZcdoUPAPMaDcD12Ep9pqAgezctskjb8vDSygndcqCdmlYhlpCtsIlC/2jJ7HH8M1RjrOHafWJwyrs0pbLSvpcB2Bb5hWFxam3SMPO+VYA1tLF07FPEDYp+a5pwJiVB2smYvnRQtSLwcAG1inX1ajNXOsqBSgTO2P1TNjXXvg7qU1HLgpdTssS1u6A3h9PH14dh0W2HL80vJOdfmILDhFpuB1VZ5XCgDzchjX2rJtEHt7NgaOGmIDEe/4hMQUN8v/BZAgn+V+Baao6W9E2qqqODZdG5WmZYgCdlNIfnRMAttJP9zNZya1t6UdD2Lzn0a8uBrudm69/CWVo8LBQRzfQSeeBvmBfBV+bNVgpcMYe+IAWhCE6vmdKwIzQK/yB92gJg13BYLDSEL4PfX5dFIFPWG83fe7xeDYZwme7S1IRgS+/WWXOiAhc+LMD0rDbufrkh3dTpeFbljdP8yAKZWc1SRwmRcGBKaJu+ICw+A0HHwFVOzhn8gAAAABJRU5ErkJggg==",RU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAABgFBMVEUAAADc3Nze3tPg4Mzr6+B8weJ6wubq6uHo6N/p6d9Ts+RUtONNsePk49jo6ODc2s3c2s4foeYgoeYAluYBluYCl+YEmOYFmOYGmOcJmucLm+cOnOcRnegSnegUnugVn+gWn+gYoOgcoukdoukgo+kipOkjpOknpuopp+oqp+ouqesvqeszq+s0q+s2rOs3res8r+w9r+w/sOxBsexDsu1Ntu5SuO5Uue5Wue5Xuu9Yuu9eve9fve9ivvBmwPBnwPBpwfBqwvBrwvBswvFtw/FxxfF1xvF5yPKBy/OGl8uHzvOImMuLm8yMnMyU0/WX1PWY1fWb1vWe1/Wp3Per3Pev3vew3vex3/ey3/e74/i/5fnC5vnF5/nKz9rL0NnL0NrL6vrM0drM6vrP6/rQ7PrT7fvV7vvZ18rc8fzd8fzf8vzh4NXl9Pzm9f3n9f3o9v3p6eDp9v3q9v3s9/3u+P3x+f7z+v70+v72+/74/P75/f77/f/8/v/9/v/+//////9u6OF6AAAAE3RSTlMAFhcZGUZHbnCAvLzAydfx8fr6DaE62QAAAAFiS0dEf0i/ceUAAAG3SURBVEjH3dP5NwJRFAfw7IasLxLZRdkJSSF7yb7vSShJyC7cf92beZKpmTePn9L9Yc73vXM+Z+7cc0elEiq7+IZWRRkqmcqnupvLkkwZyClAf2nWH6GcVIYykgFKSxYoKZmglGSDEpIRJktWmCQFeOh28eX2UKA/YYcE6PmCR9S35/2m1Z/FpQL8Gg6Zj3fRG7/AZ5zJ1DjZ4ZD58PD7Ap9xJlPj0mQ4onJ7RCtFHY4YHolWKg2GQ5bEJVqZ+IEyHLIkLtHKxA//fjjeBfGfxA4T/qQU/sY0h2rEXOpUgY0GQ0Nl7NDcXhOLtToFuAMAzxttfDT5AKIrWj6OhyG63kSHkc6+qcBDB0L1V8FBo/NjCV86YHnAtm+iwxB+1JydapETBnHcemtGuvs95W8UIJrA6OBWg5MNbMgMVlY4BHMo6ONTP0526GaFozCDAhd86oFZ/FYzK5yHAbT7ohVateBW7YywOhTSokkYRkhz/KRHurstBhjp7LIev1sQqjq5d9i3YRpfjn04jSObLVS4eoFrp5ePdWvXr+ekyakwPG63/mlX9RXSrRawL3mhCOaWsbryHCI+AWNX7FRc84wGAAAAAElFTkSuQmCC",kU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAA+VBMVEUAAADc3Nze3tPg4Mzr6+Dpq47prIzq6uHo6N/p6d/rlG/rlW/qkWrk49jo6ODc2s3c2s7sd0fsd0jZ18rh4NXpwqzpw63p6eDqspbqspfqtJnqtZrqwqvqw67rtpvrt5zsZjDsZzHsZzLsaDLsaDPsaTTsbTnsbzvtbTntbjvtbzzudEPudkXvekzvfVDwhVnxjmbylG/ylW/ylnHznnv0o4L0o4P0qIn0qYr1spb2s5j3u6L3vKX3wq35zLr50cD50cH508P61MX61cb61sf618n62cz85dz85t385t786OD86eL97ef97uj+9PD+9vP//v3//v7///9+RY3vAAAAE3RSTlMAFhcZGUZHbnCAvLzAydfx8fr6DaE62QAAAAFiS0dEUg1gLZAAAAFgSURBVEjH7dPZUoMwFAZg3K3WtWK1VE1Q24LUirsogtZ9J+//MKYw04GQkNOMM+2F/0WGLN9MOBw0Lc7kYrUoC2OaILOFrrq2NC6AJQmsLE8oQpGUQ4EEQL6EQK4EQZ6EQY4EwryEwpwEwwrTQxKYzowqLI0WNBpb/ef1hgGGNYz1/kTHuAaE2ybeTE13TLwBgoxjpRDmHCNFkOOyUgDrTCny5RJAXRWyNczfX1gcjsy8t/hz5GS2XgUNwEimzuCWq8NbjjZ5M9XkTWOU/8d/OFxYRuCUhw/3HYsum3S0nSQmah/EZ1tti27YAtghHl126OiTJA4iX63e2RtyTjd8KaTxqaIh5IyO1rcCfMYIXZLB4Wt0hMz3Fwl8C8PwIQuDboCOfy4k8MnzvGsGnkSHj3fu4FcN9j67kasC0RX52FWCzu0pSuC9S2ODYS8JjNP5q16dg8P5DJxegbrVqUT8AtJhCM2EImaPAAAAAElFTkSuQmCC",PU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAY1BMVEUAAADc3Nze3tPg4Mzr6+DX08zb1NDq6uHo6N/p6d/UzcbSy8Xk49jo6ODc2s3c2s7Mw77IvbjOxMDUzMjVzMjZ18re19Te2NXh4NXp6eDz8O/z8e/z8fD8+/v8/Pv9/Pz////6siNEAAAAEXRSTlMAFhcZGUZHbnCAvMDJ1/Hx+lNX65wAAAABYktHRCCzaz2AAAAAn0lEQVRIx+3Syw6CQBBE0fEt4AMRRBRk/v8rjZAYla6eCisTulZ3c5LOZJzrttxX2nYzB7ZVXXU9zAGMArA4LkZCJMMQSALKkoGipKAkOShIEg4lCweShsXPHwrAz23GwsigQYMGDf4jTE70kgnDvG7rHBaG2cN732SgFFj610pQQXgBpZ3avA8USn2ce3s7w5rkz4l5GH/Bdcq6dNWLJ9gnz/RKwb+GAAAAAElFTkSuQmCC";function OU(t=1/0){return Vh(Va,t)}function NU(...t){const n=Km(t),e=function AQ(t,n){return"number"==typeof mD(t)?t.pop():n}(t,1/0),r=t;return r.length?1===r.length?ga(r[0]):OU(e)(Uc(r,n)):Fb}function QS(t,n){return jr((e,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();e.subscribe(Yr(r,u=>{i?.unsubscribe();let c=0;const l=o++;ga(t(u,l)).subscribe(i=Yr(r,f=>r.next(n?n(u,f,l,c++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}class FU extends Di{constructor(n=1/0,e=1/0,r=wD){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;e||(r.push(n),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!n.closed;s+=r?1:2)n.next(o[s]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){const{_bufferSize:n,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*n;if(n<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=e.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function YS(t,n,...e){if(!0===n)return void t();if(!1===n)return;const r=new za({next:()=>{r.unsubscribe(),t()}});return ga(n(...e)).subscribe(r)}function BU(...t){return function zre(){return OU(1)}()(Uc(t,Km(t)))}Ei(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});let kd={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function jU(t){kd=t}const zU=/[&<>"']/,Kre=new RegExp(zU.source,"g"),VU=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Qre=new RegExp(VU.source,"g"),Yre={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},WU=t=>Yre[t];function Po(t,n){if(n){if(zU.test(t))return t.replace(Kre,WU)}else if(VU.test(t))return t.replace(Qre,WU);return t}const Xre=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Jre(t){return t.replace(Xre,(n,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const Zre=/(^|[^\[])\^/g;function sn(t,n){let e="string"==typeof t?t:t.source;n=n||"";const r={replace:(i,o)=>{let s="string"==typeof o?o:o.source;return s=s.replace(Zre,"$1"),e=e.replace(i,s),r},getRegex:()=>new RegExp(e,n)};return r}function HU(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Nv={exec:()=>null};function qU(t,n){const r=t.replace(/\|/g,(o,s,a)=>{let u=!1,c=s;for(;--c>=0&&"\\"===a[c];)u=!u;return u?"|":" |"}).split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),n)if(r.length>n)r.splice(n);else for(;r.length<n;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function qA(t,n,e){const r=t.length;if(0===r)return"";let i=0;for(;i<r;){const o=t.charAt(r-i-1);if(o!==n||e){if(o===n||!e)break;i++}else i++}return t.slice(0,r-i)}function GU(t,n,e,r){const i=n.href,o=n.title?Po(n.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){r.state.inLink=!0;const a={type:"link",raw:e,href:i,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,a}return{type:"image",raw:e,href:i,title:o,text:Po(s)}}class GA{options;rules;lexer;constructor(n){this.options=n||kd}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const r=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:qA(r,"\n")}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const r=e[0],i=function eie(t,n){const e=t.match(/^(\s+)(?:```)/);if(null===e)return n;const r=e[1];return n.split("\n").map(i=>{const o=i.match(/^\s+/);if(null===o)return i;const[s]=o;return s.length>=r.length?i.slice(r.length):i}).join("\n")}(r,e[3]||"");return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let r=e[2].trim();if(/#$/.test(r)){const i=qA(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:e[0]}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){let r=e[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1");r=qA(r.replace(/^ *>[ \t]?/gm,""),"\n");const i=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:o,text:r}}}list(n){let e=this.rules.block.list.exec(n);if(e){let r=e[1].trim();const i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=new RegExp(`^( {0,3}${r})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",u="",c=!1;for(;n;){let l=!1;if(!(e=s.exec(n))||this.rules.block.hr.test(n))break;a=e[0],n=n.substring(a.length);let f=e[2].split("\n",1)[0].replace(/^\t+/,b=>" ".repeat(3*b.length)),p=n.split("\n",1)[0],g=0;this.options.pedantic?(g=2,u=f.trimStart()):(g=e[2].search(/[^ ]/),g=g>4?1:g,u=f.slice(g),g+=e[1].length);let m=!1;if(!f&&/^ *$/.test(p)&&(a+=p+"\n",n=n.substring(p.length+1),l=!0),!l){const b=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),A=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),C=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),_=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;n;){const E=n.split("\n",1)[0];if(p=E,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),C.test(p)||_.test(p)||b.test(p)||A.test(n))break;if(p.search(/[^ ]/)>=g||!p.trim())u+="\n"+p.slice(g);else{if(m||f.search(/[^ ]/)>=4||C.test(f)||_.test(f)||A.test(f))break;u+="\n"+p}!m&&!p.trim()&&(m=!0),a+=E+"\n",n=n.substring(E.length+1),f=p.slice(g)}}o.loose||(c?o.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let w,y=null;this.options.gfm&&(y=/^\[[ xX]\] /.exec(u),y&&(w="[ ] "!==y[0],u=u.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!y,checked:w,loose:!1,text:u,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=u.trimEnd(),o.raw=o.raw.trimEnd();for(let l=0;l<o.items.length;l++)if(this.lexer.state.top=!1,o.items[l].tokens=this.lexer.blockTokens(o.items[l].text,[]),!o.loose){const f=o.items[l].tokens.filter(g=>"space"===g.type),p=f.length>0&&f.some(g=>/\n.*\n/.test(g.raw));o.loose=p}if(o.loose)for(let l=0;l<o.items.length;l++)o.items[l].loose=!0;return o}}html(n){const e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(n){const e=this.rules.block.def.exec(n);if(e){const r=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:i,title:o}}}table(n){const e=this.rules.block.table.exec(n);if(!e||!/[:|]/.test(e[2]))return;const r=qU(e[1]),i=e[2].replace(/^\||\| *$/g,"").split("|"),o=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const a of i)/^ *-+: *$/.test(a)?s.align.push("right"):/^ *:-+: *$/.test(a)?s.align.push("center"):/^ *:-+ *$/.test(a)?s.align.push("left"):s.align.push(null);for(const a of r)s.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)s.rows.push(qU(a,s.header.length).map(u=>({text:u,tokens:this.lexer.inline(u)})));return s}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const r="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(n){const e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:Po(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const r=e[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=qA(r.slice(0,-1),"\\");if((r.length-s.length)%2==0)return}else{const s=function $re(t,n){if(-1===t.indexOf(n[1]))return-1;let e=0;for(let r=0;r<t.length;r++)if("\\"===t[r])r++;else if(t[r]===n[0])e++;else if(t[r]===n[1]&&(e--,e<0))return r;return-1}(e[2],"()");if(s>-1){const u=(0===e[0].indexOf("!")?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,u).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],o=s[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(r)?i.slice(1):i.slice(1,-1)),GU(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(n,e){let r;if((r=this.rules.inline.reflink.exec(n))||(r=this.rules.inline.nolink.exec(n))){const o=e[(r[2]||r[1]).replace(/\s+/g," ").toLowerCase()];if(!o){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return GU(r,o,r[0],this.lexer)}}emStrong(n,e,r=""){let i=this.rules.inline.emStrongLDelim.exec(n);if(!(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))&&(!i[1]&&!i[2]||!r||this.rules.inline.punctuation.exec(r))){const s=[...i[0]].length-1;let a,u,c=s,l=0;const f="*"===i[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*n.length+s);null!=(i=f.exec(e));){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(u=[...a].length,i[3]||i[4]){c+=u;continue}if((i[5]||i[6])&&s%3&&!((s+u)%3)){l+=u;continue}if(c-=u,c>0)continue;u=Math.min(u,u+c+l);const p=[...i[0]][0].length,g=n.slice(0,s+i.index+p+u);if(Math.min(s,u)%2){const y=g.slice(1,-1);return{type:"em",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}const m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let r=e[2].replace(/\n/g," ");const i=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return i&&o&&(r=r.substring(1,r.length-1)),r=Po(r,!0),{type:"codespan",raw:e[0],text:r}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){const e=this.rules.inline.autolink.exec(n);if(e){let r,i;return"@"===e[2]?(r=Po(e[1]),i="mailto:"+r):(r=Po(e[1]),i=r),{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let r,i;if("@"===e[2])r=Po(e[0]),i="mailto:"+r;else{let o;do{o=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(o!==e[0]);r=Po(e[0]),i="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(n){const e=this.rules.inline.text.exec(n);if(e){let r;return r=this.lexer.state.inRawBlock?e[0]:Po(e[0]),{type:"text",raw:e[0],text:r}}}}const Fv=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,KU=/(?:[*+-]|\d{1,9}[.)])/,QU=sn(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,KU).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),JS=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ZS=/(?!\s*\])(?:\\.|[^\[\]\\])+/,sie=sn(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ZS).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),aie=sn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,KU).getRegex(),KA="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$S=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,uie=sn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",$S).replace("tag",KA).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),YU=sn(JS).replace("hr",Fv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",KA).getRegex(),e2={blockquote:sn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",YU).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:sie,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Fv,html:uie,lheading:QU,list:aie,newline:/^(?: *(?:\n|$))+/,paragraph:YU,table:Nv,text:/^[^\n]+/},XU=sn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Fv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",KA).getRegex(),cie={...e2,table:XU,paragraph:sn(JS).replace("hr",Fv).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",XU).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",KA).getRegex()},lie={...e2,html:sn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",$S).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Nv,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:sn(JS).replace("hr",Fv).replace("heading"," *#{1,6} *[^\n]").replace("lheading",QU).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},JU=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ZU=/^( {2,}|\\)\n(?!\s*$)/,Bv="\\p{P}\\p{S}",hie=sn(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Bv).getRegex(),gie=sn(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Bv).getRegex(),mie=sn("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Bv).getRegex(),vie=sn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Bv).getRegex(),yie=sn(/\\([punct])/,"gu").replace(/punct/g,Bv).getRegex(),wie=sn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),bie=sn($S).replace("(?:--\x3e|$)","--\x3e").getRegex(),Aie=sn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",bie).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),QA=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xie=sn(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",QA).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$U=sn(/^!?\[(label)\]\[(ref)\]/).replace("label",QA).replace("ref",ZS).getRegex(),ej=sn(/^!?\[(ref)\](?:\[\])?/).replace("ref",ZS).getRegex(),t2={_backpedal:Nv,anyPunctuation:yie,autolink:wie,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:ZU,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Nv,emStrongLDelim:gie,emStrongRDelimAst:mie,emStrongRDelimUnd:vie,escape:JU,link:xie,nolink:ej,punctuation:hie,reflink:$U,reflinkSearch:sn("reflink|nolink(?!\\()","g").replace("reflink",$U).replace("nolink",ej).getRegex(),tag:Aie,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Nv},_ie={...t2,link:sn(/^!?\[(label)\]\((.*?)\)/).replace("label",QA).getRegex(),reflink:sn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",QA).getRegex()},n2={...t2,escape:sn(JU).replace("])","~|])").getRegex(),url:sn(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Eie={...n2,br:sn(ZU).replace("{2,}","*").getRegex(),text:sn(n2.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},YA={normal:e2,gfm:cie,pedantic:lie},Lv={normal:t2,gfm:n2,breaks:Eie,pedantic:_ie};class Ia{tokens;options;state;tokenizer;inlineQueue;constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||kd,this.options.tokenizer=this.options.tokenizer||new GA,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:YA.normal,inline:Lv.normal};this.options.pedantic?(e.block=YA.pedantic,e.inline=Lv.pedantic):this.options.gfm&&(e.block=YA.gfm,e.inline=this.options.breaks?Lv.breaks:Lv.gfm),this.tokenizer.rules=e}static get rules(){return{block:YA,inline:Lv}}static lex(n,e){return new Ia(e).lex(n)}static lexInline(n,e){return new Ia(e).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,"\n"),this.blockTokens(n,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const r=this.inlineQueue[e];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(n,e=[]){let r,i,o,s;for(n=this.options.pedantic?n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n.replace(/^( *)(\t+)/gm,(a,u,c)=>u+"    ".repeat(c.length));n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(r=a.call({lexer:this},n,e))&&(n=n.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.space(n)){n=n.substring(r.raw.length),1===r.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(r);continue}if(r=this.tokenizer.code(n)){n=n.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?e.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.fences(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(n)){n=n.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.table(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(n)){n=n.substring(r.raw.length),e.push(r);continue}if(o=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=n.slice(1);let c;this.options.extensions.startBlock.forEach(l=>{c=l.call({lexer:this},u),"number"==typeof c&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=n.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=e[e.length-1],s&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r),s=o.length!==n.length,n=n.substring(r.raw.length);continue}if(r=this.tokenizer.text(n)){n=n.substring(r.raw.length),i=e[e.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(n){const a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,e}inline(n,e=[]){return this.inlineQueue.push({src:n,tokens:e}),e}inlineTokens(n,e=[]){let r,i,o,a,u,c,s=n;if(this.tokens.links){const l=Object.keys(this.tokens.links);if(l.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)l.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(s));)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;n;)if(u||(c=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(l=>!!(r=l.call({lexer:this},n,e))&&(n=n.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.escape(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(n)){n=n.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.link(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(n,s,c)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(n)){n=n.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(n)){n=n.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(n))){n=n.substring(r.raw.length),e.push(r);continue}if(o=n,this.options.extensions&&this.options.extensions.startInline){let l=1/0;const f=n.slice(1);let p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},f),"number"==typeof p&&p>=0&&(l=Math.min(l,p))}),l<1/0&&l>=0&&(o=n.substring(0,l+1))}if(r=this.tokenizer.inlineText(o)){n=n.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(c=r.raw.slice(-1)),u=!0,i=e[e.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(n){const l="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(l);break}throw new Error(l)}}return e}}class Pd{options;constructor(n){this.options=n||kd}code(n,e,r){const i=(e||"").match(/^\S*/)?.[0];return n=n.replace(/\n$/,"")+"\n",i?'<pre><code class="language-'+Po(i)+'">'+(r?n:Po(n,!0))+"</code></pre>\n":"<pre><code>"+(r?n:Po(n,!0))+"</code></pre>\n"}blockquote(n){return`<blockquote>\n${n}</blockquote>\n`}html(n,e){return n}heading(n,e,r){return`<h${e}>${n}</h${e}>\n`}hr(){return"<hr>\n"}list(n,e,r){const i=e?"ol":"ul";return"<"+i+(e&&1!==r?' start="'+r+'"':"")+">\n"+n+"</"+i+">\n"}listitem(n,e,r){return`<li>${n}</li>\n`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(n){return`<p>${n}</p>\n`}table(n,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+n+"</thead>\n"+e+"</table>\n"}tablerow(n){return`<tr>\n${n}</tr>\n`}tablecell(n,e){const r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>\n`}strong(n){return`<strong>${n}</strong>`}em(n){return`<em>${n}</em>`}codespan(n){return`<code>${n}</code>`}br(){return"<br>"}del(n){return`<del>${n}</del>`}link(n,e,r){const i=HU(n);if(null===i)return r;let o='<a href="'+(n=i)+'"';return e&&(o+=' title="'+e+'"'),o+=">"+r+"</a>",o}image(n,e,r){const i=HU(n);if(null===i)return r;let o=`<img src="${n=i}" alt="${r}"`;return e&&(o+=` title="${e}"`),o+=">",o}text(n){return n}}class r2{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,e,r){return""+r}image(n,e,r){return""+r}br(){return""}}class Sa{options;renderer;textRenderer;constructor(n){this.options=n||kd,this.options.renderer=this.options.renderer||new Pd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new r2}static parse(n,e){return new Sa(e).parse(n)}static parseInline(n,e){return new Sa(e).parseInline(n)}parse(n,e=!0){let r="";for(let i=0;i<n.length;i++){const o=n[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){r+=a||"";continue}}switch(o.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":{const s=o;r+=this.renderer.heading(this.parseInline(s.tokens),s.depth,Jre(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue;case"table":{const s=o;let a="",u="";for(let l=0;l<s.header.length;l++)u+=this.renderer.tablecell(this.parseInline(s.header[l].tokens),{header:!0,align:s.align[l]});a+=this.renderer.tablerow(u);let c="";for(let l=0;l<s.rows.length;l++){const f=s.rows[l];u="";for(let p=0;p<f.length;p++)u+=this.renderer.tablecell(this.parseInline(f[p].tokens),{header:!1,align:s.align[p]});c+=this.renderer.tablerow(u)}r+=this.renderer.table(a,c);continue}case"blockquote":{const a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{const s=o,a=s.ordered,u=s.start,c=s.loose;let l="";for(let f=0;f<s.items.length;f++){const p=s.items[f],g=p.checked,m=p.task;let y="";if(p.task){const w=this.renderer.checkbox(!!g);c?p.tokens.length>0&&"paragraph"===p.tokens[0].type?(p.tokens[0].text=w+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&"text"===p.tokens[0].tokens[0].type&&(p.tokens[0].tokens[0].text=w+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:w+" "}):y+=w+" "}y+=this.parse(p.tokens,c),l+=this.renderer.listitem(y,m,!!g)}r+=this.renderer.list(l,a,u);continue}case"html":r+=this.renderer.html(o.text,o.block);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(o.tokens));continue;case"text":{let s=o,a=s.tokens?this.parseInline(s.tokens):s.text;for(;i+1<n.length&&"text"===n[i+1].type;)s=n[++i],a+="\n"+(s.tokens?this.parseInline(s.tokens):s.text);r+=e?this.renderer.paragraph(a):a;continue}default:{const s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}parseInline(n,e){e=e||this.renderer;let r="";for(let i=0;i<n.length;i++){const o=n[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const s=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=s||"";continue}}switch(o.type){case"escape":case"text":r+=e.text(o.text);break;case"html":r+=e.html(o.text);break;case"link":r+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break;case"image":r+=e.image(o.href,o.title,o.text);break;case"strong":r+=e.strong(this.parseInline(o.tokens,e));break;case"em":r+=e.em(this.parseInline(o.tokens,e));break;case"codespan":r+=e.codespan(o.text);break;case"br":r+=e.br();break;case"del":r+=e.del(this.parseInline(o.tokens,e));break;default:{const s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}}class XA{options;constructor(n){this.options=n||kd}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}}const Od=new class Die{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(Ia.lex,Sa.parse);parseInline=this.#e(Ia.lexInline,Sa.parseInline);Parser=Sa;Renderer=Pd;TextRenderer=r2;Lexer=Ia;Tokenizer=GA;Hooks=XA;constructor(...n){this.use(...n)}walkTokens(n,e){let r=[];for(const i of n)switch(r=r.concat(e.call(this,i)),i.type){case"table":{const o=i;for(const s of o.header)r=r.concat(this.walkTokens(s.tokens,e));for(const s of o.rows)for(const a of s)r=r.concat(this.walkTokens(a.tokens,e));break}case"list":r=r.concat(this.walkTokens(i.items,e));break;default:{const o=i;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{const a=o[s].flat(1/0);r=r.concat(this.walkTokens(a,e))}):o.tokens&&(r=r.concat(this.walkTokens(o.tokens,e)))}}return r}use(...n){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=e.renderers[o.name];e.renderers[o.name]=s?function(...a){let u=o.renderer.apply(this,a);return!1===u&&(u=s.apply(this,a)),u}:o.renderer}if("tokenizer"in o){if(!o.level||"block"!==o.level&&"inline"!==o.level)throw new Error("extension level must be 'block' or 'inline'");const s=e[o.level];s?s.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&("block"===o.level?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:"inline"===o.level&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),i.extensions=e),r.renderer){const o=this.defaults.renderer||new Pd(this.defaults);for(const s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if("options"===s)continue;const u=r.renderer[s],c=o[s];o[s]=(...l)=>{let f=u.apply(o,l);return!1===f&&(f=c.apply(o,l)),f||""}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new GA(this.defaults);for(const s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const u=r.tokenizer[s],c=o[s];o[s]=(...l)=>{let f=u.apply(o,l);return!1===f&&(f=c.apply(o,l)),f}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new XA;for(const s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if("options"===s)continue;const u=r.hooks[s],c=o[s];o[s]=XA.passThroughHooks.has(s)?l=>{if(this.defaults.async)return Promise.resolve(u.call(o,l)).then(p=>c.call(o,p));const f=u.call(o,l);return c.call(o,f)}:(...l)=>{let f=u.apply(o,l);return!1===f&&(f=c.apply(o,l)),f}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let u=[];return u.push(s.call(this,a)),o&&(u=u.concat(o.call(this,a))),u}}this.defaults={...this.defaults,...i}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return Ia.lex(n,e??this.defaults)}parser(n,e){return Sa.parse(n,e??this.defaults)}#e(n,e){return(r,i)=>{const o={...i},s={...this.defaults,...o};!0===this.defaults.async&&!1===o.async&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const a=this.#t(!!s.silent,!!s.async);if(typeof r>"u"||null===r)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof r)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(u=>n(u,s)).then(u=>s.hooks?s.hooks.processAllTokens(u):u).then(u=>s.walkTokens?Promise.all(this.walkTokens(u,s.walkTokens)).then(()=>u):u).then(u=>e(u,s)).then(u=>s.hooks?s.hooks.postprocess(u):u).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let u=n(r,s);s.hooks&&(u=s.hooks.processAllTokens(u)),s.walkTokens&&this.walkTokens(u,s.walkTokens);let c=e(u,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(u){return a(u)}}}#t(n,e){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const i="<p>An error occurred:</p><pre>"+Po(r.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(r);throw r}}};function Wt(t,n){return Od.parse(t,n)}function tj(t){return jr((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}Wt.options=Wt.setOptions=function(t){return Od.setOptions(t),jU(Wt.defaults=Od.defaults),Wt},Wt.getDefaults=function XS(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Wt.defaults=kd,Wt.use=function(...t){return Od.use(...t),jU(Wt.defaults=Od.defaults),Wt},Wt.walkTokens=function(t,n){return Od.walkTokens(t,n)},Wt.parseInline=Od.parseInline,Wt.Parser=Sa,Wt.parser=Sa.parse,Wt.Renderer=Pd,Wt.TextRenderer=r2,Wt.Lexer=Ia,Wt.lexer=Ia.lex,Wt.Tokenizer=GA,Wt.Hooks=XA,Wt.parse=Wt;class JA{}class ZA{}class os{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof os?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new os;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof os?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,e);const i=("a"===n.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=n.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class Iie{encodeKey(n){return nj(n)}encodeValue(n){return nj(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const Tie=/%(\d[a-f0-9])/gi,Mie={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nj(t){return encodeURIComponent(t).replace(Tie,(n,e)=>Mie[e]??n)}function $A(t){return`${t}`}class el{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Iie,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Sie(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],u=e.get(s)||[];u.push(a),e.set(s,u)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const r=n.fromObject[e],i=Array.isArray(r)?r.map($A):[$A(r)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new el({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push($A(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf($A(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class Rie{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function rj(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function ij(t){return typeof Blob<"u"&&t instanceof Blob}function oj(t){return typeof FormData<"u"&&t instanceof FormData}class Uv{constructor(n,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function kie(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new os,this.context??=new Rie,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new el,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||rj(this.body)||ij(this.body)||oj(this.body)||function Pie(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof el?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oj(this.body)?null:ij(this.body)?this.body.type||null:rj(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof el?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=n.transferCache??this.transferCache,s=void 0!==n.body?n.body:this.body,a=n.withCredentials??this.withCredentials,u=n.reportProgress??this.reportProgress;let c=n.headers||this.headers,l=n.params||this.params;const f=n.context??this.context;return void 0!==n.setHeaders&&(c=Object.keys(n.setHeaders).reduce((p,g)=>p.set(g,n.setHeaders[g]),c)),n.setParams&&(l=Object.keys(n.setParams).reduce((p,g)=>p.set(g,n.setParams[g]),l)),new Uv(e,r,s,{params:l,headers:c,context:f,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}}var Ta=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ta||{});class i2{constructor(n,e=jv.Ok,r="OK"){this.headers=n.headers||new os,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class ex extends i2{constructor(n={}){super(n),this.type=Ta.ResponseHeader}clone(n={}){return new ex({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Nd extends i2{constructor(n={}){super(n),this.type=Ta.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Nd({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class fp extends i2{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}var jv=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(jv||{});function o2(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let s2=(()=>{class t{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Uv)o=e;else{let u,c;u=i.headers instanceof os?i.headers:new os(i.headers),i.params&&(c=i.params instanceof el?i.params:new el({fromObject:i.params})),o=new Uv(e,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const s=Bb(o).pipe(LF(u=>this.handler.handle(u)));if(e instanceof Uv||"events"===i.observe)return s;const a=s.pipe(function UU(t,n){return jr((e,r)=>{let i=0;e.subscribe(Yr(r,o=>t.call(n,o,i++)&&r.next(o)))})}(u=>u instanceof Nd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ii(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(Ii(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(Ii(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(Ii(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new el).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,o2(i,r))}post(e,r,i={}){return this.request("POST",e,o2(i,r))}put(e,r,i={}){return this.request("PUT",e,o2(i,r))}static#e=this.\u0275fac=function(r){return new(r||t)(je(JA))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();function aj(t,n){return n(t)}function Lie(t,n){return(e,r)=>n.intercept(e,{handle:i=>t(i,r)})}const jie=new ke(""),zv=new ke(""),uj=new ke(""),cj=new ke("");function zie(){let t=null;return(n,e)=>{null===t&&(t=(qe(jie,{optional:!0})??[]).reduceRight(Lie,aj));const r=qe(od),i=r.add();return t(n,e).pipe(tj(()=>r.remove(i)))}}let lj=(()=>{class t extends JA{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null,this.pendingTasks=qe(od);const i=qe(cj,{optional:!0});this.backend=i??e}handle(e){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(zv),...this.injector.get(uj,[])]));this.chain=i.reduceRight((o,s)=>function Uie(t,n,e){return(r,i)=>function ui(t,n){t instanceof nc&&t.assertNotDestroyed();const r=fs(t),i=zr(void 0);try{return n()}finally{fs(r),zr(i)}}(e,()=>n(r,o=>t(o,i)))}(o,s,this.injector),aj)}const r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(tj(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||t)(je(ZA),je(ho))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();const Gie=/^\)\]\}',?\n/;let fj=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new ge(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Uc(r.\u0275loadImpl()):Bb(null)).pipe(QS(()=>new Ln(o=>{const s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((y,w)=>s.setRequestHeader(y,w.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const y=e.detectContentTypeHeader();null!==y&&s.setRequestHeader("Content-Type",y)}if(e.responseType){const y=e.responseType.toLowerCase();s.responseType="json"!==y?y:"text"}const a=e.serializeBody();let u=null;const c=()=>{if(null!==u)return u;const y=s.statusText||"OK",w=new os(s.getAllResponseHeaders()),b=function Kie(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(s)||e.url;return u=new ex({headers:w,status:s.status,statusText:y,url:b}),u},l=()=>{let{headers:y,status:w,statusText:b,url:A}=c(),C=null;w!==jv.NoContent&&(C=typeof s.response>"u"?s.responseText:s.response),0===w&&(w=C?jv.Ok:0);let _=w>=200&&w<300;if("json"===e.responseType&&"string"==typeof C){const E=C;C=C.replace(Gie,"");try{C=""!==C?JSON.parse(C):null}catch(I){C=E,_&&(_=!1,C={error:I,text:C})}}_?(o.next(new Nd({body:C,headers:y,status:w,statusText:b,url:A||void 0})),o.complete()):o.error(new fp({error:C,headers:y,status:w,statusText:b,url:A||void 0}))},f=y=>{const{url:w}=c(),b=new fp({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});o.error(b)};let p=!1;const g=y=>{p||(o.next(c()),p=!0);let w={type:Ta.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),"text"===e.responseType&&s.responseText&&(w.partialText=s.responseText),o.next(w)},m=y=>{let w={type:Ta.UploadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),o.next(w)};return s.addEventListener("load",l),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),e.reportProgress&&(s.addEventListener("progress",g),null!==a&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Ta.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",l),s.removeEventListener("timeout",f),e.reportProgress&&(s.removeEventListener("progress",g),null!==a&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||t)(je(uN))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();const c2=new ke(""),hj=new ke("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),pj=new ke("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class gj{}let Xie=(()=>{class t{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=JO(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||t)(je(fa),je(xs),je(hj))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})();function Jie(t,n){const e=t.url.toLowerCase();if(!qe(c2)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const r=qe(gj).getToken(),i=qe(pj);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),n(t)}var tl=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(tl||{});function Zie(...t){const n=[s2,fj,lj,{provide:JA,useExisting:lj},{provide:ZA,useExisting:fj},{provide:zv,useValue:Jie,multi:!0},{provide:c2,useValue:!0},{provide:gj,useClass:Xie}];for(const e of t)n.push(...e.\u0275providers);return function xl(t){return{\u0275providers:t}}(n)}const mj=new ke("");function $ie(){return function Fd(t,n){return{\u0275kind:t,\u0275providers:n}}(tl.LegacyInterceptors,[{provide:mj,useFactory:zie},{provide:zv,useExisting:mj,multi:!0}])}let eoe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({providers:[Zie($ie())]})}return t})();const soe=["*"];let _j=(()=>{class t{constructor(){this._buttonClick$=new Di,this.copied$=this._buttonClick$.pipe(QS(()=>NU(Bb(!0),FF(3e3).pipe(function Lre(t){return Ii(()=>t)}(!1)))),Wh(),function jre(t,n,e){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:n=1/0,refCount:i=!1,scheduler:e}=t):r=t??1/0,function Ure(t={}){const{connector:n=(()=>new Di),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,l=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=u=void 0,l=f=!1},m=()=>{const y=s;g(),y?.unsubscribe()};return jr((y,w)=>{c++,!f&&!l&&p();const b=u=u??n();w.add(()=>{c--,0===c&&!f&&!l&&(a=YS(m,i))}),b.subscribe(w),!s&&c>0&&(s=new za({next:A=>b.next(A),error:A=>{f=!0,p(),a=YS(g,e,A),b.error(A)},complete:()=>{l=!0,p(),a=YS(g,r),b.complete()}}),ga(y).subscribe(s))})(o)}}({connector:()=>new FU(r,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}(1)),this.copiedText$=this.copied$.pipe(function Vre(...t){const n=Km(t);return jr((e,r)=>{(n?BU(t,e,n):BU(t,e)).subscribe(r)})}(!1),Ii(e=>e?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["markdown-clipboard"]],standalone:!0,features:[pr],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(r,i){1&r&&(z(0,"button",0),Bt(1,"async"),me("click",function(){return i.onCopyToClipboardClick()}),we(2),Bt(3,"async"),G()),2&r&&(P1("copied",Lt(1,3,i.copied$)),M(2),nn(Lt(3,5,i.copiedText$)))},dependencies:[Zo],encapsulation:2,changeDetection:0})}return t})();const coe=new ke("CLIPBOARD_OPTIONS");var l2=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(l2||{});const Ej=new ke("MARKED_EXTENSIONS"),doe=new ke("MARKED_OPTIONS"),Dj=new ke("SECURITY_CONTEXT");let nx=(()=>{class t{get options(){return this._options}set options(e){this._options={...this.DEFAULT_MARKED_OPTIONS,...e}}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}constructor(e,r,i,o,s,a,u){this.clipboardOptions=e,this.extensions=r,this.platform=o,this.securityContext=s,this.http=a,this.sanitizer=u,this.DEFAULT_MARKED_OPTIONS={renderer:new Pd},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Di,this.reload$=this._reload$.asObservable(),this.options=i}parse(e,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:i,inline:o,emoji:s,mermaid:a,disableSanitizer:u}=r,c={...this.options,...r.markedOptions},l=c.renderer||this.renderer||new Pd;this.extensions&&(this.renderer=this.extendsRendererForExtensions(l)),a&&(this.renderer=this.extendsRendererForMermaid(l));const f=this.trimIndentation(e),p=i?this.decodeHtml(f):f,g=s?this.parseEmoji(p):p,m=this.parseMarked(g,c,o);return(u?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(e,r=this.DEFAULT_RENDER_OPTIONS,i){const{clipboard:o,clipboardOptions:s,katex:a,katexOptions:u,mermaid:c,mermaidOptions:l}=r;o&&this.renderClipboard(e,i,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...s}),a&&this.renderKatex(e,{...this.DEFAULT_KATEX_OPTIONS,...u}),c&&this.renderMermaid(e,{...this.DEFAULT_MERMAID_OPTIONS,...l}),this.highlight(e)}reload(){this._reload$.next()}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe(Ii(r=>this.handleExtension(e,r)))}highlight(e){if(!Nh(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;e||(e=document);const r=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,i=>i.classList.add("language-none")),Prism.highlightAllUnder(e)}decodeHtml(e){if(!Nh(this.platform))return e;const r=document.createElement("textarea");return r.innerHTML=e,r.value}extendsRendererForExtensions(e){const r=e;return!0===r.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&Wt.use(...this.extensions),r.\u0275NgxMarkdownRendererExtendedForExtensions=!0),e}extendsRendererForMermaid(e){const r=e;if(!0===r.\u0275NgxMarkdownRendererExtendedForMermaid)return e;const i=e.code;return e.code=function(o,s,a){return"mermaid"===s?`<div class="mermaid">${o}</div>`:i.call(this,o,s,a)},r.\u0275NgxMarkdownRendererExtendedForMermaid=!0,e}handleExtension(e,r){const i=e.lastIndexOf("://"),o=i>-1?e.substring(i+4):e,s=o.lastIndexOf("/"),a=s>-1?o.substring(s+1).split("?")[0]:"",u=a.lastIndexOf("."),c=u>-1?a.substring(u+1):"";return c&&"md"!==c?"```"+c+"\n"+r+"\n```":r}parseMarked(e,r,i=!1){if(r.renderer){const o={...r.renderer};delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete r.renderer,Wt.use({renderer:o})}return i?Wt.parseInline(e,r):Wt.parse(e,r)}parseEmoji(e){if(!Nh(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}renderKatex(e,r){if(Nh(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(e,r)}}renderClipboard(e,r,i){if(!Nh(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:s}=i,a=e.querySelectorAll("pre");for(let u=0;u<a.length;u++){const c=a.item(u),l=document.createElement("div");l.style.position="relative",c.parentNode.insertBefore(l,c),l.appendChild(c);const f=document.createElement("div");let p,g;f.style.position="absolute",f.style.top=".5em",f.style.right=".5em",f.style.opacity="0",f.style.transition="opacity 250ms ease-out",l.insertAdjacentElement("beforeend",f),c.onmouseover=()=>f.style.opacity="1",c.onmouseout=()=>f.style.opacity="0",p=o?r.createComponent(o).hostView:s?r.createEmbeddedView(s):r.createComponent(_j).hostView,p.rootNodes.forEach(m=>{m.onmouseover=()=>f.style.opacity="1",f.appendChild(m),g=new ClipboardJS(m,{text:()=>c.innerText})}),p.onDestroy(()=>g.destroy())}}renderMermaid(e,r=this.DEFAULT_MERMAID_OPTIONS){if(!Nh(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const i=e.querySelectorAll(".mermaid");0!==i.length&&(mermaid.initialize(r),mermaid.run({nodes:i}))}trimIndentation(e){if(!e)return"";let r;return e.split("\n").map(i=>{let o=r;return i.length>0&&(o=isNaN(o)?i.search(/\S|$/):Math.min(i.search(/\S|$/),o)),isNaN(r)&&(r=o),o?i.substring(o):i}).join("\n")}static#e=this.\u0275fac=function(r){return new(r||t)(je(coe,8),je(Ej,8),je(doe,8),je(xs),je(Dj),je(s2,8),je(Fh))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})(),Ij=(()=>{class t{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(e){this._disableSanitizer=this.coerceBooleanProperty(e)}get inline(){return this._inline}set inline(e){this._inline=this.coerceBooleanProperty(e)}get clipboard(){return this._clipboard}set clipboard(e){this._clipboard=this.coerceBooleanProperty(e)}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get mermaid(){return this._mermaid}set mermaid(e){this._mermaid=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}get commandLine(){return this._commandLine}set commandLine(e){this._commandLine=this.coerceBooleanProperty(e)}constructor(e,r,i){this.element=e,this.markdownService=r,this.viewContainerRef=i,this.error=new Ie,this.load=new Ie,this.ready=new Ie,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Di}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(VF(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(e,r=!1){var i=this;return B(function*(){const o={decodeHtml:r,inline:i.inline,emoji:i.emoji,mermaid:i.mermaid,disableSanitizer:i.disableSanitizer},s={clipboard:i.clipboard,clipboardOptions:{buttonComponent:i.clipboardButtonComponent,buttonTemplate:i.clipboardButtonTemplate},katex:i.katex,katexOptions:i.katexOptions,mermaid:i.mermaid,mermaidOptions:i.mermaidOptions},a=yield i.markdownService.parse(e,o);i.element.nativeElement.innerHTML=a,i.handlePlugins(),i.markdownService.render(i.element.nativeElement,s,i.viewContainerRef),i.ready.emit()})()}coerceBooleanProperty(e){return null!=e&&"false"!=`${String(e)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:e=>{this.render(e).then(()=>{this.load.emit(e)})},error:e=>this.error.emit(e)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,l2.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,l2.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,r){const i=e.querySelectorAll("pre");for(let o=0;o<i.length;o++){const s=r instanceof Array?r:[r];i.item(o).classList.add(...s)}}setPluginOptions(e,r){const i=e.querySelectorAll("pre");for(let o=0;o<i.length;o++)Object.keys(r).forEach(s=>{const a=r[s];if(a){const u=this.toLispCase(s);i.item(o).setAttribute(u,a.toString())}})}toLispCase(e){const r=e.match(/([A-Z])/g);if(!r)return e;let i=e.toString();for(let o=0,s=r.length;o<s;o++)i=i.replace(new RegExp(r[o]),"-"+r[o].toLowerCase());return"-"===i.slice(0,1)&&(i=i.slice(1)),i}static#e=this.\u0275fac=function(r){return new(r||t)(ve(qo),ve(nx),ve(Qo))};static#t=this.\u0275cmp=bt({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[nu,pr],ngContentSelectors:soe,decls:1,vars:0,template:function(r,i){1&r&&(function Kk(t){const n=le()[vn][kn];if(!n.projection){const r=n.projection=function rf(t,n){const e=[];for(let r=0;r<t;r++)e.push(n);return e}(t?t.length:1,null),i=r.slice();let o=n.child;for(;null!==o;){const s=t?T5(o,t):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),function Qk(t,n=0,e){const r=le(),i=xt(),o=yr(i,Ke+t,16,null,e||null);null===o.projection&&(o.projection=n),sg(),(!r[ki]||dc())&&32&~o.flags&&function D(t,n,e){T(n[et],0,n,e,$g(t,e,n),fw(e.parent||n[kn],e,n))}(i,r,o)}(0))},encapsulation:2})}return t})();function woe(t){return[nx,t?.loader??[],t?.clipboardOptions??[],t?.markedOptions??[],{provide:Ej,useValue:t?.markedExtensions??[]},{provide:Dj,useValue:t?.sanitize??gi.HTML}]}let boe=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[woe(e)]}}static forChild(){return{ngModule:t}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({imports:[Zn]})}return t})();var Sj;!function(t){let n;var i;let e,r;(i=n=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox",function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"}(e=t.Theme||(t.Theme={})),function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"}(r=t.LogLevel||(t.LogLevel={}))}(Sj||(Sj={}));let Tj=(()=>{class t{transform(e,...r){return e&&e.trim().length?e.trim().split(";").filter(i=>!Ub(i)).map(i=>i.trim()):[]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275pipe=gn({name:"choices",type:t,pure:!0,standalone:!0})}return t})(),Aoe=(()=>{class t{transform(e,...r){return e.split(";").map(i=>i.trim()).filter(i=>!UF(i))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275pipe=gn({name:"attachments",type:t,pure:!0,standalone:!0})}return t})(),xoe=(()=>{class t{transform(e,...r){const i=e.split(",").map(o=>Number(o.trim())).filter(o=>!Number.isNaN(o));return 2===i.length?{lat:i[0],lng:i[1]}:null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275pipe=gn({name:"geolocation",type:t,pure:!0,standalone:!0})}return t})();function rx(t,n=bD){return jr((e,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function u(){const c=s+t,l=n.now();if(l<c)return i=this.schedule(void 0,c-l),void r.add(i);a()}e.subscribe(Yr(r,c=>{o=c,s=n.now(),i||(i=n.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Coe(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",4),me("click",function(){const i=ee(e).$implicit;return te(j().selected$.next(i))}),we(2),G(),xe()}if(2&t){const e=n.$implicit,r=n.index,i=j();M(),Xn("--delay",.1*r+"s"),U("classList",i.isSelected(e)?"item-center chat-choice-selected":"item-center chat-choice"),M(),Ts(" ",e,"")}}function _oe(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",5),me("click",function(){return ee(e),te(j().onSubmitMultiChoice())}),Fe(2,"img",6),z(3,"span",7),we(4,"Submit"),G()(),xe()}if(2&t){const e=j();M(2),U("src",e.Assets.Images.SubmitGreen,He)}}let d2=class N2{constructor(){this.Assets=yi,this.choices=[],this.primaryColor$=new Qe("#255db8"),this.isMultiChoice=!1,this.choiceSelected=new Ie,this.selectedMap=new Map,this.selected$=new Qe(void 0),this.choiceColor="#255db8",this.choiceBackgroundColor="#a6c8ff",this.choiceSelectedColor="#a6c8ff",this.choiceSelectedBackgroundColor="#255db8",this.choiceHoverColor="#255db8",this.choiceHoverBackgroundColor="#629eff",this.submitButton$=new Qe("")}ngOnInit(){this.selected$.pipe(Xt(this),rx(25)).subscribe(n=>{n&&(this.isMultiChoice?this.selectedMap.get(n)?this.selectedMap.delete(n):this.selectedMap.set(n,n):(this.selectedMap=new Map,this.selectedMap.set(n,n),setTimeout(()=>{this.choiceSelected.next(n)},10)))}),this.primaryColor$.pipe(Xt(this)).subscribe(n=>{this.choiceColor=AD(n,25),this.choiceBackgroundColor="#fff",this.choiceSelectedColor=AD(n,25),this.choiceSelectedBackgroundColor=jF(n,40),this.choiceHoverColor=AD(n,25),this.choiceHoverBackgroundColor=jF(n,60)}),this.submitButton$.pipe(Xt(this),rx(50),Wh()).subscribe(n=>{n&&n.length>0&&this.choiceSelected.next(n)})}get primaryColor(){return this.primaryColor$.getValue()}set primaryColor(n){this.primaryColor$.next(n)}trackChoice(n,e){return`${n}-${e}-${this.isSelected(e)}`}isSelected(n){return!!this.selectedMap.get(n)}onSubmitMultiChoice(){let n="";this.selectedMap.forEach(e=>{n.length>0&&(n+="; "),n+=e}),this.submitButton$.next(n)}static#e=this.\u0275fac=function(e){return new(e||N2)};static#t=this.\u0275cmp=bt({type:N2,selectors:[["chat-choice"]],inputs:{choices:"choices",primaryColor:"primaryColor",isMultiChoice:"isMultiChoice"},outputs:{choiceSelected:"choiceSelected"},standalone:!0,features:[pr],decls:4,vars:9,consts:[[1,"choice-container"],[1,"chat-choices"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"click","classList"],[1,"button","horizontal-contents",2,"margin-top","8px",3,"click"],["alt","submit audio record",3,"src"],[2,"color","#237558"]],template:function(e,r){1&e&&(z(0,"div",0)(1,"div",1),_e(2,Coe,3,4,"ng-container",2),G(),_e(3,_oe,5,1,"ng-container",3),G()),2&e&&(Xn("--primary-color",r.primaryColor),M(),Xn("flex-direction",r.choices.length>5?"row":"column")("align-items",r.choices.length>10?"center":"flex-start"),M(),U("ngForOf",r.choices)("ngForTrackBy",r.trackChoice.bind(r)),M(),U("ngIf",r.isMultiChoice&&r.selectedMap.size))},dependencies:[Zn,Ph,gr],styles:[".choice-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:8px;--primary-color: #36109d}.chat-choices[_ngcontent-%COMP%]{flex:1;display:flex;gap:8px;padding:4px;align-items:center;justify-content:flex-start;box-sizing:border-box;flex-wrap:wrap;overflow:hidden}.item-center[_ngcontent-%COMP%]{height:36px;display:flex;align-items:center;justify-content:flex-start;padding:0 16px;-webkit-user-select:none;user-select:none}.chat-choice[_ngcontent-%COMP%]{font-size:14px;border:1px solid var(--primary-color);font-weight:400;cursor:pointer;border-radius:6px;background-color:#f9f9ff;color:var(--default-text-color-light);opacity:0;animation:_ngcontent-%COMP%_scale-up .15s ease-in forwards;animation-delay:var(--delay);overflow:hidden}@keyframes _ngcontent-%COMP%_scale-up{0%{opacity:0;transform:translateY(50%) scale(0)}to{opacity:1;transform:translateY(0) scale(1)}}.chat-choice[_ngcontent-%COMP%]:hover{background-color:var(--primary-color);color:#fff}.chat-choice-selected[_ngcontent-%COMP%]{font-size:14px;font-weight:400;cursor:pointer;border-radius:6px;color:#fff;background-color:var(--default-text-color-light)}.button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:-moz-fit-content;width:fit-content;padding:16px 16px 16px 8px;height:40px;border-radius:6px;background-color:#fff;z-index:5;box-shadow:#0003 0 1px 3px 1px;box-sizing:border-box;margin:4px}.button[_ngcontent-%COMP%]:hover{box-shadow:#0003 0 1px 1px 1px}.horizontal-contents[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.horizontal-contents[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:28px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}@media screen and (max-width: 768px){.chat-choice[_ngcontent-%COMP%], .chat-choice-selected[_ngcontent-%COMP%], .button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}}"]})};function Eoe(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",2),me("click",function(){const i=ee(e).$implicit;return te(j().onRecordClicked(i))}),z(2,"span"),we(3),G()(),xe()}if(2&t){const e=n.$implicit;M(3),nn(e.DisplayName)}}d2=vi([ji()],d2);let f2=class F2{constructor(){this.primaryColor="#154881",this.records$=new Qe([]),this.recordSelected=new Ie,this.recordClicked$=new Qe(void 0),this.recordlist=[]}get records(){return this.records$.getValue()}set records(n){this.records$.next(n)}ngOnInit(){this.records$.pipe(Xt(this)).subscribe(n=>{this.recordlist=[];let e=0;n.forEach(r=>{setTimeout(()=>{const i=yD.get(r);i&&this.recordlist.push(i)},50*e),e+=1})}),this.recordClicked$.pipe(Xt(this),rx(25),Wh()).subscribe(n=>{n&&this.recordSelected.next(n)})}onRecordClicked(n){this.recordClicked$.next(n)}trackRecord(n,e){return e.Id}static#e=this.\u0275fac=function(e){return new(e||F2)};static#t=this.\u0275cmp=bt({type:F2,selectors:[["chat-record"]],inputs:{primaryColor:"primaryColor",records:"records"},outputs:{recordSelected:"recordSelected"},standalone:!0,features:[pr],decls:2,vars:8,consts:[[1,"record-cards"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"record-card",3,"click"]],template:function(e,r){1&e&&(z(0,"div",0),_e(1,Eoe,4,1,"ng-container",1),G()),2&e&&(Xn("--primary-color",r.primaryColor)("flex-direction",r.records.length>10?"row":"column")("align-items",r.records.length>10?"center":"flex-start"),M(),U("ngForOf",r.recordlist)("ngForTrackBy",r.trackRecord))},dependencies:[Zn,Ph],styles:[".record-cards[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:flex-start;padding:8px;box-sizing:border-box;--primary-color: #154881}.record-card[_ngcontent-%COMP%]{cursor:pointer;width:100%;max-width:200px;padding:6px 12px;display:flex;align-items:center;justify-content:flex-start;border-radius:6px;background-color:#fff;border:1px solid var(--primary-color);box-shadow:#0000004d 0 1px 3px 1px;opacity:0;animation:_ngcontent-%COMP%_scale-up .15s ease-in forwards;overflow:hidden}@keyframes _ngcontent-%COMP%_scale-up{0%{opacity:0;transform:translate(-100%) scale(0)}to{opacity:1;transform:translate(0) scale(1)}}.record-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}.record-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}.record-card[_ngcontent-%COMP%]:hover{background-color:var(--primary-color)}.record-card[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#fff}"]})};var Oo;f2=vi([ji()],f2);let h2=class B2{static#e=Oo=this;static#t=this.cache=new Map;get file(){return this.file$.getValue()}set file(n){this.file$.next(n)}constructor(n,e){if(this.el=n,this.renderer=e,this.file$=new Qe(void 0),!n.nativeElement)throw new Error("This directive is only allowed in a image element")}ngOnInit(){Oo.cache=new Map,this.file$.pipe(Xt(this)).subscribe(n=>{if(!n)return void(this.el.nativeElement.hidden=!0);const e=`${n.size}-${n.name}`,r=Oo.cache.get(e);if(r)this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",r);else{const i=HA(n.name);if(i)if(IU(i)){const o=new FileReader;o.onload=()=>{const s=o.result;Oo.cache.set(e,s),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",s)},o.readAsDataURL(n)}else!function Ore(t){return["mp3","wav","m4a","aiff","flac","ogg","wma","alac","midi"].includes(t)}(i)?function Nre(t){return["mp4","avi","mov","wmv","mkv","flv","mpeg","mpg","webm","3gp","m4v"].includes(t)}(i)?(Oo.cache.set(e,KS),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",KS)):function Rre(t){return["doc","docx","txt","rtf"].includes(t)}(i)?(Oo.cache.set(e,RU),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",RU)):function kre(t){return"pdf"===t}(i)?(Oo.cache.set(e,MU),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",MU)):function Pre(t){return"htm"===t||"html"===t}(i)?(Oo.cache.set(e,kU),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",kU)):(Oo.cache.set(e,PU),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",PU)):(Oo.cache.set(e,TU),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",TU));else Oo.cache.set(e,SU),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",SU)}})}ngOnDestroy(){Oo.cache.clear()}static#n=this.\u0275fac=function(e){return new(e||B2)(ve(qo),ve(Dw))};static#r=this.\u0275dir=ai({type:B2,selectors:[["","file-to-image",""]],inputs:{file:"file"},standalone:!0})};h2=Oo=vi([ji()],h2);let Doe=(()=>{class t{transform(e,...r){if(e<1024)return`${e.toFixed(2)} Byte`;{const i=e/1024;if(i>=1024){const o=i/1024;return o>=1024?`${(o/1024).toFixed(2)} GB`:`${o.toFixed(2)} MB`}return`${i.toFixed(2)} KB`}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275pipe=gn({name:"filesize",type:t,pure:!0,standalone:!0})}return t})();const Ioe=["fileInput"];function Soe(t,n){1&t&&Jn(0,10),2&t&&(j(2),U("ngTemplateOutlet",gt(6)))}function Toe(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",5),me("drop",function(i){return ee(e),te(j().onDrop(i))})("dragover",function(i){return ee(e),te(j().onDragOver(i))}),Fe(2,"img",6),z(3,"div")(4,"div",7),we(5,"Drag and drop your files"),G(),z(6,"div",7),we(7,"Or "),z(8,"span",8),me("click",function(){return ee(e),j(),te(gt(2).click())}),we(9,"Upload files"),G()()()(),_e(10,Soe,1,1,"ng-container",9),xe()}if(2&t){const e=j();M(2),U("src",e.Assets.Images.FileUpload,He),M(8),U("ngIf",e.fileSelectionError)}}function Moe(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",18),me("click",function(){ee(e);const i=j().$implicit;return te(j(2).removeFileFromlist(i))}),Fe(2,"img",19),G(),xe()}if(2&t){const e=j(3);M(2),U("src",e.Assets.Images.Delete,He)}}function Roe(t,n){if(1&t&&(Ae(0),Fe(1,"img",20),xe()),2&t){const e=j(3);M(),U("src",e.Assets.Gifs.Loading,He)}}function koe(t,n){if(1&t&&(Ae(0),z(1,"div",13),Fe(2,"img",14),z(3,"div",15)(4,"span",16),we(5),G(),z(6,"span",17),we(7),Bt(8,"filesize"),G()(),_e(9,Moe,3,1,"ng-container",4)(10,Roe,2,1,"ng-container",4),G(),xe()),2&t){const e=n.$implicit,r=j(2);M(2),U("file",e.file),M(3),nn(e.file.name),M(2),nn(Lt(8,5,e.file.size)),M(2),U("ngIf",e.uploadStatus===r.UploadStatus.None||e.uploadStatus===r.UploadStatus.UploadFailed),M(),U("ngIf",e.uploadStatus===r.UploadStatus.Uploading)}}function Poe(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",21),me("click",function(){return ee(e),te(j(2).onSubmitFile())}),we(2," Upload "),G(),xe()}}function Ooe(t,n){if(1&t&&(Ae(0),z(1,"div",11),_e(2,koe,11,7,"ng-container",12)(3,Poe,3,0,"ng-container",4),G(),xe()),2&t){const e=j();M(2),U("ngForOf",e.filelist)("ngForTrackBy",e.trackfilelist),M(),U("ngIf",!e.isUploading)}}function Noe(t,n){if(1&t&&(z(0,"div",22)(1,"span",23),we(2),G()()),2&t){const e=j();M(2),nn(e.fileSelectionError)}}let p2=class L2{constructor(){this.Assets=yi,this.maxFileSize=200,this.supportedFiles="*/*",this.data$=new Qe({MaxFileSizeInMb:200}),this.primaryColor="#434",this.fileSelectionError=void 0,this.fileSubmitted=new Ie,this.isUploading=!1,this.subject=new Qe(void 0),this.selectedFile=null,this.filelist=[],this.UploadStatus=ro}ngOnInit(){this.data$.pipe(Xt(this)).subscribe(n=>{if(n.SupportedFileTypes&&n.SupportedFileTypes.length){let e="";"*/*"!==n.SupportedFileTypes&&n.SupportedFileTypes.split(new RegExp("[,;]","gi")).map(r=>r.trim()).filter(r=>!Ub(r)).forEach(r=>{e.length>0&&(e+=","),r.startsWith(".")?e+=r:e+=`.${r}`}),this.supportedFiles=e}else this.supportedFiles="*/*";this.maxFileSize=n.MaxFileSizeInMb||200})}get data(){return this.data$.getValue()}set data(n){this.data$.next(n)}onFileSelected(n){this.addFilesinList(n.target.files)}verifyAndAddAfile(n){if(n.size/1024/1024>this.maxFileSize)this.setErrorMessage("File size limit exceeded.");else{const e=HA(n.name);this.supportedFiles&&"*/*"!==this.supportedFiles&&e&&!this.supportedFiles.includes(e)?this.setErrorMessage("The supported formats does not include this file format."):this.filelist.find(i=>i.file.name===n.name&&i.file.type===n.type&&i.file.size===n.size)||this.filelist.push(new Jm(n))}}setErrorMessage(n){this.fileSelectionError=n,setTimeout(()=>{this.fileSelectionError=void 0},3e3)}onDrop(n){this.addFilesinList(n.dataTransfer.files),n.preventDefault()}addFilesinList(n){if(n&&n.length)for(let e=0;e<n.length;e++){const r=n.item(e);r&&setTimeout(()=>{this.verifyAndAddAfile(r)},100*e)}this.fileInput&&(this.fileInput.nativeElement.value="")}onDragOver(n){n.preventDefault()}onSubmitFile(){this.filelist.length<1||(this.isUploading=!0,this.subject.unsubscribe(),this.subject=new Qe(void 0),this.subject.pipe(Xt(this)).subscribe(n=>{if(n){const e=this.filelist.findIndex(r=>r.id===n.id);-1!==e&&this.filelist.splice(e,1,n)}this.isUploading=void 0!==this.filelist.find(e=>e.uploadStatus===ro.Uploading)}),this.fileSubmitted.next({files:this.filelist,subscriber:this.subject}))}removeFileFromlist(n){const e=this.filelist.findIndex(r=>r.id===n.id);-1!==e&&this.filelist.splice(e,1)}trackfilelist(n,e){return e.id}static#e=this.\u0275fac=function(e){return new(e||L2)};static#t=this.\u0275cmp=bt({type:L2,selectors:[["chat-upload"]],viewQuery:function(e,r){if(1&e&&dr(Ioe,5),2&e){let i;fr(i=hr())&&(r.fileInput=i.first)}},inputs:{data:"data",primaryColor:"primaryColor"},outputs:{fileSubmitted:"fileSubmitted"},standalone:!0,features:[pr],decls:7,vars:5,consts:[["fileInput",""],["error",""],[1,"upload-container"],["type","file","multiple","multiple",2,"display","none",3,"change","accept"],[4,"ngIf"],[1,"file-upload",3,"drop","dragover"],["alt","Upload file icon","srcset","",3,"src"],[1,"text-block"],[1,"button-span",3,"click"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"files-selected"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"file-card"],["file-to-image","","alt","",1,"file-asset",3,"file"],[1,"file-data"],[1,"highlighted-data"],[1,"data"],[1,"file-action",3,"click"],["alt","Remove file icon","srcset","",3,"src"],["alt","Uploading file animation","srcset","",1,"file-asset",3,"src"],[1,"upload-button",3,"click"],[2,"width","100%","height","100%","display","flex","align-items","center","justify-content","center"],[2,"color","red","text-align","center","width","80%","text-align","center","text-align","center","overflow","hidden","word-wrap","break-word"]],template:function(e,r){if(1&e){const i=Te();z(0,"div",2)(1,"input",3,0),me("change",function(s){return ee(i),te(r.onFileSelected(s))}),G(),_e(3,Toe,11,2,"ng-container",4)(4,Ooe,4,3,"ng-container",4),G(),_e(5,Noe,3,1,"ng-template",null,1,Mt)}2&e&&(Xn("--primary-color",r.primaryColor),M(),U("accept",r.supportedFiles),M(2),U("ngIf",!r.isUploading),M(),U("ngIf",r.filelist.length))},dependencies:[Zn,Ph,gr,Fm,h2,Doe],styles:[".upload-container[_ngcontent-%COMP%]{width:100%;max-width:370px;overflow:hidden;box-sizing:border-box;--primary-color: #434;padding:2px}.file-upload[_ngcontent-%COMP%]{border-radius:4px;border:1px solid rgba(129,129,129,.3);padding:32px 16px;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;color:var(--default-text-color);cursor:grab;gap:16px}.file-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;-webkit-user-select:none;user-select:none}.file-upload[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{margin:0;-webkit-user-select:none;user-select:none;font-size:14px;font-weight:500}.file-upload[_ngcontent-%COMP%]   .button-span[_ngcontent-%COMP%]{color:var(--primary-color);-webkit-user-select:none;user-select:none;cursor:pointer}.files-selected[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center;margin-top:8px}.file-card[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;border-radius:4px;border:1px solid rgba(129,129,129,.3);gap:8px;padding:8px;box-sizing:border-box;cursor:pointer;animation:_ngcontent-%COMP%_slide-up .25s ease-in}@keyframes _ngcontent-%COMP%_slide-up{0%{opacity:0;transform:translateY(50%)}to{opacity:1;transform:translateY(0)}}.file-asset[_ngcontent-%COMP%]{width:40px;height:40px}.file-data[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px;color:var(--default-text-color);overflow:hidden}.highlighted-data[_ngcontent-%COMP%]{line-height:1.1rem;font-size:12px;font-weight:400;-webkit-user-select:none;user-select:none;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.data[_ngcontent-%COMP%]{font-size:12px;font-weight:300;-webkit-user-select:none;user-select:none}.file-action[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer}.file-action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:16px;height:16px}.upload-button[_ngcontent-%COMP%]{box-sizing:border-box;padding:6px 32px;border-radius:4px;border:1px solid var(--primary-color);color:var(--primary-color);display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:400}.upload-button[_ngcontent-%COMP%]:hover{border-color:var(--default-text-color);background-color:var(--default-text-color);color:#fff}"]})};function Foe(t,n){if(1&t&&(Ae(0),z(1,"div",3)(2,"span",4),we(3),G()(),xe()),2&t){const e=j();M(3),nn(e.error)}}function Boe(t,n){if(1&t){const e=Te();z(0,"div",5),me("click",function(){return ee(e),te(j().onRequestOpenAppointment())}),Fe(1,"img",6),z(2,"span"),we(3,"Make an Appointment"),G()()}if(2&t){const e=j();M(),U("src",e.Assets.Images.Schedular,He)}}p2=vi([ji()],p2);let g2=class U2{constructor(){this.Assets=yi,this.primaryColor="#dda",this.attribute={},this.requestOpenAppointment=new Ie,this.error=void 0,this.subject=new Qe(es.ok(!0)),this.submitReply=new Ie,this.isProcessing=!1}onRequestOpenAppointment(){this.subject.unsubscribe(),this.subject=new Qe(es.ok(!1)),this.subject.pipe(Xt(this)).subscribe(n=>{n.isError&&n.error?(this.error=n.error.message,setTimeout(()=>{this.error=void 0},3e3),this.subject.unsubscribe()):n.result&&(this.submitReply.next(this.attribute.OnCompleteMessageFormat&&this.attribute.OnCompleteMessageFormat.length?this.attribute.OnCompleteMessageFormat:"I have made an appointment. Please confirm."),this.subject.unsubscribe())}),this.requestOpenAppointment.next({attribute:this.attribute,subject:this.subject})}static#e=this.\u0275fac=function(e){return new(e||U2)};static#t=this.\u0275cmp=bt({type:U2,selectors:[["chat-schedular-view"]],inputs:{primaryColor:"primaryColor",attribute:"attribute"},outputs:{requestOpenAppointment:"requestOpenAppointment",submitReply:"submitReply"},standalone:!0,features:[pr],decls:4,vars:2,consts:[["buttonview",""],[2,"padding","16px"],[4,"ngIf","ngIfElse"],[2,"width","100%","height","100%","display","flex","align-items","center","justify-content","center"],[2,"color","red","text-align","center","max-width","80%"],[1,"button","horizontal-contents",3,"click"],["alt","Create Schedule",3,"src"]],template:function(e,r){if(1&e&&(z(0,"div",1),_e(1,Foe,4,1,"ng-container",2)(2,Boe,4,1,"ng-template",null,0,Mt),G()),2&e){const i=gt(3);M(),U("ngIf",r.error)("ngIfElse",i)}},dependencies:[Zn,gr],styles:[".button-containers[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;gap:10px;padding:8px;align-items:center;width:400px;max-width:100%}.buttons-left[_ngcontent-%COMP%]{justify-content:flex-start}.buttons-middle[_ngcontent-%COMP%]{justify-content:center}.button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:-moz-fit-content;width:fit-content;padding:16px;height:40px;border-radius:6px;background-color:#fff;z-index:5;box-shadow:#0003 0 1px 3px 1px;box-sizing:border-box}.button[_ngcontent-%COMP%]:hover{box-shadow:#0003 0 1px 1px 1px}.horizontal-contents[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.horizontal-contents[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:28px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}"]})};g2=vi([ji()],g2);let Loe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({imports:[Zn]})}return t})();class Uoe{constructor(n,e){this.mediaRecorder=null,this.recordedChunks=[],this.isRecording=!1,this.isPaused=!1,this.isStopped=!1,this.maxDurationInSeconds=60,this.maxFileSizeInBytes=10485760,this.startTime=0,this.pausedTime=0,this.audioContext=null,this.audioAnalyser=null,this.dataArray=null,this.soundWaveCanvas=null,this.canvasContext=null,this.recordingStarted=new Ie,this.recordingPaused=new Ie,this.recordingResumed=new Ie,this.recordingStopped=new Ie,this.elapsedRecordingTime=new Qe(0),this.maxDurationInSeconds=n,this.maxFileSizeInBytes=1024*e*1024}getFileExtensionFromMimeType(n){return n.startsWith("audio/wav")?".wav":n.startsWith("audio/webm")?".webm":n.startsWith("audio/ogg")?".ogg":n.startsWith("audio/mpeg")?".mp3":""}filename(n){return this.getFileExtensionFromMimeType(n),"Recording-"+Date.now()+".mp3"}startRecording(n){var e=this;return B(function*(){navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{e.isStopped=!1,e.recordedChunks=[],e.mediaRecorder=new MediaRecorder(r),e.mediaRecorder.ondataavailable=o=>{e.isPaused||(e.recordedChunks.push(o.data),e.getTotalSize()>e.maxFileSizeInBytes&&e.stopRecording())},e.mediaRecorder.onstop=()=>{setTimeout(()=>{const o=e.mediaRecorder?e.mediaRecorder.mimeType:"audio/wav",s=new Blob(e.recordedChunks,{type:o}),a=new File([s],e.filename(o),{type:o,lastModified:Date.now()});setTimeout(()=>{e.recordingStopped.next(a)},10)},100)},e.mediaRecorder.start(),e.isRecording=!0,e.startTime=Date.now(),e.elapsedRecordingTime.next(0),e.audioContext=new AudioContext;const i=e.audioContext.createMediaStreamSource(r);e.audioAnalyser=e.audioContext.createAnalyser(),i.connect(e.audioAnalyser),e.audioAnalyser.fftSize=2048,e.dataArray=new Uint8Array(e.audioAnalyser.frequencyBinCount),e.soundWaveCanvas=n,e.canvasContext=e.soundWaveCanvas.getContext("2d"),e.canvasContext&&(e.canvasContext.fillStyle="rgb(200, 200, 200)",e.canvasContext.lineWidth=2,e.canvasContext.strokeStyle="rgb(0, 0, 0)"),e.recordingStarted.emit(),setTimeout(()=>{e.drawRepeatedly()},10)}).catch(r=>{console.error("Error starting recording:",r)})})()}drawRepeatedly(){var n=this;return B(function*(){if(n.isStopped)return;const e=(Date.now()-n.startTime)/1e3;e>n.maxDurationInSeconds?n.stopRecording():(n.elapsedRecordingTime.next(e),n.isRecording&&!n.isPaused&&(yield n.drawSoundWave(),setTimeout(()=>{n.drawRepeatedly()},100)))})()}stopRecording(){(this.isRecording||this.isPaused)&&(this.isStopped=!0,this.isRecording=!1,this.isPaused=!1,this.startTime=0,this.pausedTime=0,this.soundWaveCanvas=null,this.audioAnalyser&&(this.audioAnalyser.disconnect(),this.audioAnalyser=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null),setTimeout(()=>{this.mediaRecorder&&this.mediaRecorder.stop()},10))}releaseRecorder(){this.mediaRecorder&&this.mediaRecorder.stream&&this.mediaRecorder.stream.getTracks().forEach(n=>{n.stop()})}pauseRecording(){this.mediaRecorder&&this.isRecording&&!this.isPaused&&(this.mediaRecorder.pause(),this.isPaused=!0,this.pausedTime=Date.now(),this.recordingPaused.emit())}resumeRecording(){this.mediaRecorder&&this.isPaused&&(this.mediaRecorder.resume(),this.isPaused=!1,this.startTime+=Date.now()-this.pausedTime,this.pausedTime=0,this.drawRepeatedly(),this.recordingResumed.emit())}getTotalSize(){return this.recordedChunks.reduce((n,e)=>n+e.size,0)}drawSoundWave(){var n=this;return B(function*(){return new Promise(e=>{if(!(n.audioContext&&n.audioAnalyser&&n.dataArray&&n.canvasContext))return;n.audioAnalyser.getByteFrequencyData(n.dataArray);const r=n.soundWaveCanvas.width/n.dataArray.length*2.5;let i,o=0;n.canvasContext.clearRect(0,0,n.soundWaveCanvas.width,n.soundWaveCanvas.height);for(let s=0;s<n.dataArray.length;s++)i=n.dataArray[s]/2,n.canvasContext.fillStyle="rgb("+(i+100)+",50,50)",n.canvasContext.fillRect(o,n.soundWaveCanvas.height-i/2,r,i),o+=r+1;e()})})()}}let joe=(()=>{class t{transform(e){const r=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%60);return r>0?`${this.pad(r)}:${this.pad(i)}:${this.pad(o)}`:`${this.pad(i)}:${this.pad(o)}`}pad(e){return e.toString().padStart(2,"0")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275pipe=gn({name:"secondsToTime",type:t,pure:!0,standalone:!0})}return t})();const zoe=["soundWaveCanvas"];function Voe(t,n){1&t&&(Ae(0),Fe(1,"div"),xe())}function Woe(t,n){if(1&t){const e=Te();Ae(0),z(1,"img",8),me("click",function(){return ee(e),te(j(2).pauseRecording())}),G(),xe()}if(2&t){const e=j(2);M(),U("src",e.Assets.Images.PauseAudioRecording,He)}}function Hoe(t,n){if(1&t){const e=Te();Ae(0),z(1,"img",9),me("click",function(){return ee(e),te(j(2).resumeRecording())}),G(),xe()}if(2&t){const e=j(2);M(),U("src",e.Assets.Images.ResumeAudioRecording,He)}}function qoe(t,n){if(1&t&&(Ae(0),_e(1,Woe,2,1,"ng-container",4)(2,Hoe,2,1,"ng-container",4),xe()),2&t){const e=j();M(),U("ngIf",!e.isPaused),M(),U("ngIf",e.isPaused)}}function Goe(t,n){if(1&t&&(Ae(0),Fe(1,"img",10),xe()),2&t){const e=j();M(),U("src",e.Assets.Images.DisabledStart,He)}}function Koe(t,n){if(1&t){const e=Te();Ae(0),z(1,"img",11),me("click",function(){return ee(e),te(j().startRecording())}),G(),xe()}if(2&t){const e=j();M(),U("src",e.Assets.Images.StartAudioRecording,He)}}function Qoe(t,n){if(1&t){const e=Te();Ae(0),z(1,"img",12),me("click",function(){return ee(e),te(j().stopRecording())}),G(),xe()}if(2&t){const e=j();M(),U("src",e.Assets.Images.StopAudioRecoding,He)}}function Yoe(t,n){1&t&&(Ae(0),Fe(1,"div"),xe())}function Xoe(t,n){1&t&&(Ae(0),z(1,"h4",13),we(2," Tap to start recording"),G(),xe())}function Joe(t,n){1&t&&(we(0),Bt(1,"secondsToTime")),2&t&&Ts(" ",Lt(1,1,j().timeElapsed)," ")}let m2=class j2{constructor(n){this.zone=n,this.Assets=yi,this.isRecording=!1,this.isPaused=!1,this.timeElapsed=0,this.maxRecordingDurationInSec=60,this.maxFileSizeInMb=200,this.started=new Ie,this.audioRecordingService=null,this.recordCompleted=new Ie}ngOnDestroy(){this.releaseAudioService()}releaseAudioService(){this.audioRecordingService&&(this.audioRecordingService.releaseRecorder(),this.audioRecordingService.recordingStarted.unsubscribe(),this.audioRecordingService.recordingPaused.unsubscribe(),this.audioRecordingService.recordingResumed.unsubscribe(),this.audioRecordingService.recordingStopped.unsubscribe(),this.audioRecordingService.elapsedRecordingTime.unsubscribe(),this.audioRecordingService=null)}startRecording(){this.audioRecordingService=new Uoe(this.maxRecordingDurationInSec,this.maxFileSizeInMb),this.audioRecordingService.recordingStarted.pipe(Xt(this)).subscribe(()=>{this.isRecording=!0,this.started.next()}),this.audioRecordingService.recordingPaused.pipe(Xt(this)).subscribe(()=>{this.isPaused=!0}),this.audioRecordingService.recordingResumed.pipe(Xt(this)).subscribe(()=>{this.isPaused=!1}),this.audioRecordingService.elapsedRecordingTime.pipe(Xt(this),Wh()).subscribe(e=>{this.zone.run(()=>{this.timeElapsed=e})}),this.audioRecordingService.recordingStopped.pipe(Xt(this)).subscribe(e=>{this.zone.run(()=>{this.isRecording=!1,this.isPaused=!1,this.recordCompleted.next(e)}),this.releaseAudioService()}),this.audioRecordingService.startRecording(this.soundWaveCanvas.nativeElement)}stopRecording(){this.audioRecordingService?.stopRecording()}pauseRecording(){this.audioRecordingService?.pauseRecording()}resumeRecording(){this.audioRecordingService?.resumeRecording()}static#e=this.\u0275fac=function(e){return new(e||j2)(ve(tn))};static#t=this.\u0275cmp=bt({type:j2,selectors:[["audio-recorder"]],viewQuery:function(e,r){if(1&e&&dr(zoe,5),2&e){let i;fr(i=hr())&&(r.soundWaveCanvas=i.first)}},inputs:{maxRecordingDurationInSec:"maxRecordingDurationInSec",maxFileSizeInMb:"maxFileSizeInMb"},outputs:{started:"started",recordCompleted:"recordCompleted"},decls:14,vars:9,consts:[["showTime",""],["soundWaveCanvas",""],[1,"recorder"],[1,"button-container"],[4,"ngIf"],[1,"info-section"],[4,"ngIf","ngIfElse"],[1,"wave",3,"height"],["alt","Pause Recording button","srcset","",1,"button",3,"click","src"],["alt","Resume recording button","srcset","",1,"button",3,"click","src"],["alt","Start Button Disabled","srcset","",1,"button-big",3,"src"],["alt","Start button","srcset","",1,"button-big",3,"click","src"],["alt","Stop recoding button","srcset","",1,"button",3,"click","src"],[2,"margin","0","text-align","center","font-weight","400","font-size","14px","; color","#a6a6a6"]],template:function(e,r){if(1&e&&(z(0,"div",2)(1,"div",3),_e(2,Voe,2,0,"ng-container",4)(3,qoe,3,2,"ng-container",4)(4,Goe,2,1,"ng-container",4)(5,Koe,2,1,"ng-container",4)(6,Qoe,2,1,"ng-container",4)(7,Yoe,2,0,"ng-container",4),G(),z(8,"div",5),_e(9,Xoe,3,0,"ng-container",6)(10,Joe,2,3,"ng-template",null,0,Mt),G(),Fe(12,"canvas",7,1),G()),2&e){const i=gt(11);M(2),U("ngIf",!r.isRecording),M(),U("ngIf",r.isRecording),M(),U("ngIf",r.isRecording),M(),U("ngIf",!r.isRecording),M(),U("ngIf",r.isRecording),M(),U("ngIf",!r.isRecording),M(2),U("ngIf",!r.isRecording&&!r.isPaused)("ngIfElse",i),M(3),U("height",r.isRecording?64:0)}},dependencies:[gr,joe],styles:[".recorder[_ngcontent-%COMP%]{width:100%;height:100%}.wave[_ngcontent-%COMP%]{width:100%}.button-container[_ngcontent-%COMP%]{width:100%;height:84px;display:flex;align-items:center;justify-content:center;gap:24px}.button[_ngcontent-%COMP%]{width:48px}.button-big[_ngcontent-%COMP%]{width:64px}.info-section[_ngcontent-%COMP%]{width:100%;text-align:center}"]})};m2=vi([ji()],m2);const Zoe=t=>({color:t});function $oe(t,n){if(1&t&&(Ae(0),z(1,"div",5)(2,"span",6),we(3),G()(),xe()),2&t){const e=n.ngIf;M(3),nn(e)}}function ese(t,n){if(1&t&&(Ae(0),z(1,"div",7),Fe(2,"img",8),z(3,"h5",9),we(4,"We are uploading your file. This may take some time. Please be patient"),G()(),xe()),2&t){const e=j(2);M(2),U("src",e.Assets.Gifs.Loading,He),M(),U("ngStyle",Wn(2,Zoe,e.primaryColor))}}function tse(t,n){if(1&t&&_e(0,ese,5,4,"ng-container",4),2&t){const e=j(),r=gt(6);U("ngIf",e.isUploading)("ngIfElse",r)}}function nse(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",10)(2,"audio",11),Fe(3,"source",12),G()(),z(4,"div",13)(5,"div",14),me("click",function(){return ee(e),te(j(2).reset())}),Fe(6,"img",15),z(7,"span",16),we(8,"Change"),G()(),z(9,"div",14),me("click",function(){return ee(e),te(j(2).onSubmitFile())}),Fe(10,"img",17),z(11,"span",18),we(12,"Submit"),G()()(),xe()}if(2&t){const e=n.ngIf,r=j(2);M(3),U("src",e,He),M(3),U("src",r.Assets.Images.Edit,He),M(4),U("src",r.Assets.Images.SubmitGreen,He)}}function rse(t,n){if(1&t&&(_e(0,nse,13,3,"ng-container",4),Bt(1,"async")),2&t){const e=j(),r=gt(8);U("ngIf",Lt(1,2,e.audioUrl$))("ngIfElse",r)}}function ise(t,n){if(1&t){const e=Te();z(0,"audio-recorder",19),me("started",function(){return ee(e),te(j().onReceiveFile(null))})("recordCompleted",function(i){return ee(e),te(j().onReceiveFile(i))}),G()}if(2&t){const e=j();U("maxFileSizeInMb",e.maxFileSizeInMb)("maxRecordingDurationInSec",e.maxRecordingDurationInSec)}}let v2=class z2{constructor(){this.Assets=yi,this.isUploading=!1,this.audioUrl$=new Qe(null),this.error$=new Qe(null),this.file$=new Qe(null),this.fileSubmitted=new Ie,this.subject=new Qe(void 0),this.primaryColor="#ddd",this.maxRecordingDurationInSec=60,this.maxFileSizeInMb=200}ngOnInit(){this.error$.pipe(Xt(this)).subscribe(n=>{n&&setTimeout(()=>{this.error$.next(null)},3e3)}),this.file$.pipe(Xt(this)).subscribe(n=>{this.isUploading=!1,n?(this.error$.next(null),this.getContentUrl(n).then(e=>this.audioUrl$.next(e)).catch(e=>{this.audioUrl$.next(null),this.error$.error(e)})):(this.error$.next(null),this.audioUrl$.next(null))})}getContentUrl(n){return new Promise((e,r)=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=()=>{r("Unable to read file content")},i.readAsDataURL(n)})}reset(){this.isUploading=!1,this.error$.next(null),this.audioUrl$.next(null)}onReceiveFile(n){this.file$.next(n)}onSubmitFile(){const n=this.file$.getValue();n&&(this.isUploading||(this.isUploading=!0,this.subject.unsubscribe(),this.subject.unsubscribe(),this.subject=new Qe(void 0),this.subject.pipe(Xt(this)).subscribe(e=>{if(e){this.isUploading=e.uploadStatus===ro.Uploading;const r=e.uploadError||null;r&&this.error$.next(r)}}),this.fileSubmitted.next({files:[new Jm(n)],subscriber:this.subject})))}static#e=this.\u0275fac=function(e){return new(e||z2)};static#t=this.\u0275cmp=bt({type:z2,selectors:[["chat-audio-recorder"]],inputs:{primaryColor:"primaryColor",maxRecordingDurationInSec:"maxRecordingDurationInSec",maxFileSizeInMb:"maxFileSizeInMb"},outputs:{fileSubmitted:"fileSubmitted"},standalone:!0,features:[pr],decls:9,vars:6,consts:[["uploading",""],["showFile",""],["showRecorder",""],[1,"chat-audio-container"],[4,"ngIf","ngIfElse"],[2,"width","100%","height","100%","display","flex","align-items","center","justify-content","center"],[2,"color","red","text-align","center","width","80%","text-align","center","overflow","hidden","word-wrap","break-word"],[2,"margin-top","16px","width","100%","height","100%","display","flex","align-items","center","justify-content","center","flex-direction","column"],["alt","loading","srcset","",2,"height","48px",3,"src"],[2,"text-align","center","max-width","80%","margin","16px 0 0 0","font-weight","400","font-size","14px",3,"ngStyle"],[2,"width","100%","height","64px"],["controls","",2,"width","100%","height","100%"],[3,"src"],[1,"button-containers","buttons-middle"],[1,"button","horizontal-contents",3,"click"],["alt","change",3,"src"],[2,"color","#D37242"],["alt","submit audio record",3,"src"],[2,"color","#237558"],[3,"started","recordCompleted","maxFileSizeInMb","maxRecordingDurationInSec"]],template:function(e,r){if(1&e&&(z(0,"div",3),_e(1,$oe,4,1,"ng-container",4),Bt(2,"async"),_e(3,tse,1,2,"ng-template",null,0,Mt)(5,rse,2,4,"ng-template",null,1,Mt)(7,ise,1,2,"ng-template",null,2,Mt),G()),2&e){const i=gt(4);Xn("--primarycolor",r.primaryColor),M(),U("ngIf",Lt(2,4,r.error$))("ngIfElse",i)}},dependencies:[Zn,gr,Oh,Zo,Loe,m2],styles:[".chat-audio-container[_ngcontent-%COMP%]{width:100%;max-width:300px;height:-moz-fit-content;height:fit-content;padding:8px 0;--primarycolor: #ddd;box-sizing:border-box}.button-containers[_ngcontent-%COMP%]{display:flex;gap:8px;padding:8px;align-items:center;width:100%;box-sizing:border-box}.buttons-left[_ngcontent-%COMP%]{justify-content:flex-start}.buttons-middle[_ngcontent-%COMP%]{justify-content:center}.button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:-moz-fit-content;width:fit-content;padding:16px 16px 16px 8px;height:40px;border-radius:6px;background-color:#fff;z-index:5;box-shadow:#0003 0 1px 3px 1px;box-sizing:border-box}.button[_ngcontent-%COMP%]:hover{box-shadow:#0003 0 1px 1px 1px}.horizontal-contents[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.horizontal-contents[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:28px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}"]})};v2=vi([ji()],v2);const ose=["videoElement"],Mj=t=>({$implicit:t}),sse=t=>({color:t});function ase(t,n){if(1&t&&Jn(0,7),2&t){const e=j();U("ngTemplateOutlet",gt(9))("ngTemplateOutletContext",Wn(2,Mj,e.error))}}function use(t,n){if(1&t&&Jn(0,7),2&t){const e=j();U("ngTemplateOutlet",gt(11))("ngTemplateOutletContext",Wn(2,Mj,e.contentUrl))}}function cse(t,n){1&t&&Jn(0,8),2&t&&(j(),U("ngTemplateOutlet",gt(7)))}function lse(t,n){1&t&&Jn(0,8),2&t&&(j(),U("ngTemplateOutlet",gt(13)))}function dse(t,n){if(1&t&&(z(0,"div",9),Fe(1,"img",10),z(2,"span",11),we(3,"We are uploading your file. This may take some time. Please be patient"),G()()),2&t){const e=j();M(),U("src",e.Assets.Gifs.Loading,He),M(),U("ngStyle",Wn(2,sse,e.primaryColor))}}function fse(t,n){if(1&t&&(z(0,"div",12)(1,"span"),we(2),G()()),2&t){const e=n.$implicit;M(2),nn(e)}}function hse(t,n){if(1&t){const e=Te();z(0,"div",13)(1,"div",14)(2,"video",15),Fe(3,"source",16),we(4," Unfortunately your browser doesn't playing this video format. "),G()(),z(5,"div",17),Fe(6,"img",18),G(),z(7,"div",19)(8,"div",20),me("click",function(){return ee(e),te(j().startRecording())}),Fe(9,"img",21),z(10,"span",22),we(11,"Change"),G()(),z(12,"div",20),me("click",function(){return ee(e),te(j().onSubmitFile())}),Fe(13,"img",23),z(14,"span",24),we(15,"Submit"),G()()()()}if(2&t){const e=n.$implicit,r=j();M(),Xn("display",r.showImagepreview?"none":"block"),M(2),U("src",e,He),M(2),Xn("display",r.showImagepreview?"flex":"none"),M(),U("src",r.VideoFileIcon,He),M(3),U("src",r.Assets.Images.Edit,He),M(4),U("src",r.Assets.Images.SubmitGreen,He)}}function pse(t,n){if(1&t){const e=Te();z(0,"div",25)(1,"div",20),me("click",function(){return ee(e),te(j().startRecording())}),Fe(2,"img",26),z(3,"span"),we(4,"Start recording"),G()()()}if(2&t){const e=j();M(2),U("src",e.Assets.Images.VideoCamera,He)}}let y2=class V2{constructor(){this.Assets=yi,this.primaryColor="#ddd",this.durationInSec=300,this.maximumFileSizeInMb=200,this.readyToRecordVideo=new Ie,this.videoFile$=new Qe(null),this.fileSubmitted=new Ie,this.subject=new Qe(void 0),this.isUploading=!1,this.isRecording=!1,this.contentUrl=null,this.showImagepreview=!1,this.error=null,this.VideoFileIcon=KS}ngOnDestroy(){this.contentUrl&&URL.revokeObjectURL(this.contentUrl)}get videoFile(){return this.videoFile$.getValue()}set videoFile(n){this.videoFile$.next(n)}onSubmitFile(){const n=this.videoFile;n&&(this.isUploading||(this.isUploading=!0,this.subject.unsubscribe(),this.subject=new Qe(void 0),this.subject.pipe(Xt(this)).subscribe(e=>{e&&(this.isUploading=e.uploadStatus===ro.Uploading,this.error=e.uploadError||null,this.error&&setTimeout(()=>{this.error=null},3e3))}),this.fileSubmitted.next({files:[new Jm(n)],subscriber:this.subject})))}startRecording(){this.videoFile$.next(null),this.isRecording=!0,this.readyToRecordVideo.next(this.videoFile$)}ngOnInit(){this.videoFile$.pipe(Xt(this)).subscribe({next:n=>{this.contentUrl&&URL.revokeObjectURL(this.contentUrl),this.isRecording=!1,this.isUploading=!1,this.showImagepreview=!1,n?(this.element&&(this.showImagepreview=!this.element.nativeElement.canPlayType(n.type)),this.readFileAsUrl(n).then(e=>{this.contentUrl=e,this.error=null})):(this.contentUrl=null,this.error=null)},error:n=>{this.error=n,this.contentUrl=null,setTimeout(()=>{this.error=null},3e3)}})}readFileAsUrl(n){return new Promise(e=>{e(URL.createObjectURL(n))})}static#e=this.\u0275fac=function(e){return new(e||V2)};static#t=this.\u0275cmp=bt({type:V2,selectors:[["chat-video-recorder"]],viewQuery:function(e,r){if(1&e&&dr(ose,5),2&e){let i;fr(i=hr())&&(r.element=i.first)}},inputs:{primaryColor:"primaryColor",durationInSec:"durationInSec",maximumFileSizeInMb:"maximumFileSizeInMb",videoFile:"videoFile"},outputs:{readyToRecordVideo:"readyToRecordVideo",fileSubmitted:"fileSubmitted"},standalone:!0,features:[pr],decls:14,vars:10,consts:[["videoElement",""],["uploadingFile",""],["errorSection",""],["recordPreview",""],["recordStartSection",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[1,"upload-section"],["alt","loading","srcset","",2,"height","48px",3,"src"],[3,"ngStyle"],[1,"error-section"],[2,"width","100%","box-sizing","border-box","padding","8px","overflow","hidden"],[1,"video-preview"],["controls",""],[3,"src"],[1,"attachment-messages"],["alt","uploaded video file",3,"src"],[1,"button-containers","buttons-middle"],[1,"button","horizontal-contents",3,"click"],["alt","change",3,"src"],[2,"color","#D37242"],["alt","submit audio record",3,"src"],[2,"color","#237558"],[1,"button-containers","buttons-left"],["alt","record video","srcset","",3,"src"]],template:function(e,r){1&e&&(Fe(0,"video",null,0),_e(2,ase,1,4,"ng-container",5)(3,use,1,4,"ng-container",5)(4,cse,1,1,"ng-container",6)(5,lse,1,1,"ng-container",6)(6,dse,4,4,"ng-template",null,1,Mt)(8,fse,3,1,"ng-template",null,2,Mt)(10,hse,16,8,"ng-template",null,3,Mt)(12,pse,5,1,"ng-template",null,4,Mt)),2&e&&(Xn("display","none")("width",0,"px")("height",0,"px"),M(2),U("ngIf",r.error),M(),U("ngIf",r.contentUrl&&!r.isUploading&&!r.error),M(),U("ngIf",r.contentUrl&&r.isUploading),M(),U("ngIf",!r.contentUrl&&!r.error&&!r.isUploading))},dependencies:[Zn,gr,Fm,Oh],styles:[".button-containers[_ngcontent-%COMP%]{display:flex;gap:8px;padding:8px;align-items:center;width:100%;height:100%;max-width:300px;max-height:500px;box-sizing:border-box}.buttons-left[_ngcontent-%COMP%]{justify-content:flex-start}.buttons-middle[_ngcontent-%COMP%]{justify-content:center}.button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:-moz-fit-content;width:fit-content;padding:16px 16px 16px 8px;height:40px;border-radius:6px;background-color:#fff;z-index:5;box-shadow:#0003 0 1px 3px 1px;box-sizing:border-box}.button[_ngcontent-%COMP%]:hover{box-shadow:#0003 0 1px 1px 1px}.horizontal-contents[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.horizontal-contents[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:28px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}.video-preview[_ngcontent-%COMP%]{width:100%;height:100%;max-width:300px;max-height:500px;box-sizing:border-box;box-shadow:#0003 0 1px 2px 1px;border-radius:4px;display:flex;align-items:center;justify-content:center;padding:8px}.video-preview[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000}.error-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;max-width:300px;max-height:500px;box-sizing:border-box;padding:8px;text-align:center}.error-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:red}.upload-section[_ngcontent-%COMP%]{margin-top:16px;width:100%;height:100%;max-width:300px;display:flex;align-items:center;justify-content:center;flex-direction:column}.upload-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;max-width:80%;margin:16px 0 0;font-weight:400;font-size:14px}.attachment-messages[_ngcontent-%COMP%]{width:100%;height:100%;max-width:300px;max-height:500px;box-sizing:border-box;padding:8px;display:flex;align-items:center;justify-content:center}.attachment-messages[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:120px}@media screen and (max-width: 768px){.upload-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .error-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}}"]})};function gse(t,n){if(1&t&&(Ae(0),z(1,"h3",4),we(2),G(),xe()),2&t){const e=n.ngIf;M(2),nn(e)}}function mse(t,n){if(1&t&&(Ae(0),z(1,"div",5),Fe(2,"img",6),z(3,"span"),we(4,"Uploading..."),G()(),xe()),2&t){const e=j(2);M(2),U("src",e.Assets.Gifs.Loading,He)}}function vse(t,n){if(1&t&&_e(0,mse,5,1,"ng-container",3),2&t){const e=j(),r=gt(6);U("ngIf",e.isUploading)("ngIfElse",r)}}function yse(t,n){if(1&t){const e=Te();z(0,"div",7),me("click",function(){return ee(e),te(j().requestPhotoCapture())}),Fe(1,"img",8),z(2,"span",9),we(3,"Capture Photo"),G()()}if(2&t){const e=j();M(),U("src",e.Assets.Images.PhotoCamera,He)}}y2=vi([ji()],y2);let w2=class W2{constructor(n){this.sanitizer=n,this.disableSwitchingCamera=!1,this.capturePhotoRequested=new Ie,this.submitPhoto=new Ie,this.error$=new Qe(void 0),this.Assets=yi,this.subject=new Qe(void 0),this.isUploading=!1,this.uploadSubject=new Qe(void 0)}get error(){return this.error$.getValue()}set error(n){this.error$.next(n),setTimeout(()=>{this.error$.next(void 0)},3e3)}requestPhotoCapture(){this.subject.unsubscribe(),this.subject=new Qe(void 0),this.subject.pipe(Xt(this)).subscribe({next:n=>{n&&(this.subject.unsubscribe(),this.submitPhotoFile(n))},error:n=>{this.error=n.message||n}}),this.capturePhotoRequested.next(this.subject)}submitPhotoFile(n){this.uploadSubject.unsubscribe(),this.uploadSubject=new Qe(void 0),this.uploadSubject.pipe(Xt(this)).subscribe(e=>{if(e){this.isUploading=e.uploadStatus===ro.Uploading;const r=e.uploadError||null;r&&(this.error=r)}}),this.submitPhoto.next({files:[new Jm(n)],subscriber:this.uploadSubject})}static#e=this.\u0275fac=function(e){return new(e||W2)(ve(Fh))};static#t=this.\u0275cmp=bt({type:W2,selectors:[["chat-photo"]],inputs:{disableSwitchingCamera:"disableSwitchingCamera"},outputs:{capturePhotoRequested:"capturePhotoRequested",submitPhoto:"submitPhoto"},standalone:!0,features:[pr],decls:7,vars:4,consts:[["noerror",""],["startcapture",""],[2,"width","100%","height","100%","box-sizing","border-box","max-width","300px","padding","4px"],[4,"ngIf","ngIfElse"],[2,"color","#cc0000","margin","0"],[1,"uploading"],["alt","Loading","srcset","",3,"src"],[1,"button",3,"click"],["alt","Camera icon","srcset","",3,"src"],[2,"color","var(--default-text-color)"]],template:function(e,r){if(1&e&&(z(0,"div",2),_e(1,gse,3,1,"ng-container",3),Bt(2,"async"),_e(3,vse,1,2,"ng-template",null,0,Mt)(5,yse,4,1,"ng-template",null,1,Mt),G()),2&e){const i=gt(4);M(),U("ngIf",Lt(2,2,r.error$))("ngIfElse",i)}},dependencies:[Zn,gr,Zo],styles:[".buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:16px}.button[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;padding:8px 16px 8px 8px;border-radius:4px;box-shadow:#0000001a 0 1px 3px 1px;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}.uploading[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.uploading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.uploading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}"]})};function wse(t,n){if(1&t&&(Ae(0),z(1,"h3",4),we(2),G(),xe()),2&t){const e=n.ngIf;M(2),nn(e)}}function bse(t,n){if(1&t&&(Ae(0),Fe(1,"img",6),xe()),2&t){const e=j(2);M(),U("src",e.Assets.Gifs.Loading,He)}}function Ase(t,n){1&t&&Fe(0,"img",7),2&t&&U("src",j(2).Assets.Images.PlaceMarker,He)}function xse(t,n){if(1&t){const e=Te();z(0,"div",5),me("click",function(){return ee(e),te(j().getlocationClicked())}),_e(1,bse,2,1,"ng-container",3)(2,Ase,1,1,"ng-template",null,1,Mt),z(4,"span"),we(5,"Share current location"),G()()}if(2&t){const e=gt(3),r=j();M(),U("ngIf",r.isFetching)("ngIfElse",e)}}w2=vi([ji()],w2);let Cse=(()=>{class t{constructor(){this.Assets=yi,this.error$=new Qe(void 0),this.isFetching=!1,this.geoLocationReceived=new Ie}get error(){return this.error$.getValue()}set error(e){this.error$.next(e),e&&setTimeout(()=>{this.error$.next(void 0)},3e3)}getlocationClicked(){this.isFetching||(navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(e=>{if("granted"===e.state||"prompt"===e.state)return this.isFetching=!0,void navigator.geolocation.getCurrentPosition(r=>{this.geoLocationReceived.next({lat:r.coords.latitude,lng:r.coords.longitude})},r=>{this.error=`Error getting location: ${r.message}`});"denied"===e.state&&(this.error="Geolocation permission has been denied.You can enable it in your browser settings."),this.isFetching=!1}):(this.error="Geolocation API is not supported in this browser.",this.isFetching=!1))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["chat-location"]],outputs:{geoLocationReceived:"geoLocationReceived"},standalone:!0,features:[pr],decls:5,vars:4,consts:[["getlocation",""],["marker",""],[1,"location-container"],[4,"ngIf","ngIfElse"],[2,"color","#cc0000","margin","0"],[1,"button",3,"click"],["alt","","srcset","",3,"src"],["alt","Location icon","srcset","",3,"src"]],template:function(r,i){if(1&r&&(z(0,"div",2),_e(1,wse,3,1,"ng-container",3),Bt(2,"async"),_e(3,xse,6,2,"ng-template",null,0,Mt),G()),2&r){const o=gt(4);M(),U("ngIf",Lt(2,2,i.error$))("ngIfElse",o)}},dependencies:[Zn,gr,Zo],styles:[".location-container[_ngcontent-%COMP%]{width:100%;height:100%;padding:4px}.button[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;padding:8px 16px 8px 8px;border-radius:4px;box-shadow:#0000001a 0 1px 3px 1px;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400;color:var(--default-text-color)}"]})}return t})(),_se=(()=>{class t{constructor(){this.requestCodeScan=new Ie,this.Assets=yi}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["chat-scan"]],outputs:{requestCodeScan:"requestCodeScan"},standalone:!0,features:[pr],decls:4,vars:1,consts:[[1,"button",3,"click"],["alt","Code scanner icon","srcset","",3,"src"],[2,"color","var(--default-text-color)"]],template:function(r,i){1&r&&(z(0,"div",0),me("click",function(){return i.requestCodeScan.next()}),Fe(1,"img",1),z(2,"span",2),we(3,"Scan code"),G()()),2&r&&(M(),U("src",i.Assets.Images.CodeScanner,He))},dependencies:[Zn],styles:[".button[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;padding:8px 16px 8px 8px;border-radius:4px;box-shadow:#0000001a 0 1px 3px 1px;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%;margin:2px}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}"]})}return t})(),Ese=(()=>{class t{constructor(){this.setting={Title:"Enter your pin",PinLength:4,IsAlphaNumericPin:!1},this.requestPin=new Ie,this.Assets=yi}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["chat-pin"]],inputs:{setting:"setting"},outputs:{requestPin:"requestPin"},standalone:!0,features:[pr],decls:4,vars:2,consts:[[1,"button",3,"click"],["alt","Pin code","srcset","",3,"src"]],template:function(r,i){1&r&&(z(0,"div",0),me("click",function(){return i.requestPin.next(i.setting)}),Fe(1,"img",1),z(2,"span"),we(3),G()()),2&r&&(M(),U("src",i.Assets.Images.PinCode,He),M(2),nn(i.setting.Title))},dependencies:[Zn],styles:[".button[_ngcontent-%COMP%]{margin:2px;box-sizing:border-box;padding:8px;-webkit-user-select:none;user-select:none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:16px;width:-moz-fit-content;width:fit-content;background:#fff;box-shadow:#0000004d 0 1px 3px 1px;border-radius:6px}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:var(--default-text-color)}"]})}return t})();function Dse(t,n){if(1&t&&(Ae(0),z(1,"h3",4),we(2),G(),xe()),2&t){const e=n.ngIf;M(2),nn(e)}}function Ise(t,n){if(1&t&&(Ae(0),z(1,"div",5),Fe(2,"img",6),z(3,"span"),we(4,"Uploading..."),G()(),xe()),2&t){const e=j(2);M(2),U("src",e.Assets.Gifs.Loading,He)}}function Sse(t,n){if(1&t&&_e(0,Ise,5,1,"ng-container",3),2&t){const e=j(),r=gt(6);U("ngIf",e.isUploading)("ngIfElse",r)}}function Tse(t,n){if(1&t){const e=Te();z(0,"div",7),me("click",function(){return ee(e),te(j().requestPhotoCapture())}),Fe(1,"img",8),z(2,"span",9),we(3,"Capture Face Photo"),G()()}if(2&t){const e=j();M(),U("src",e.Assets.Images.FaceScan,He)}}let b2=class H2{constructor(){this.setting={IsDefaultToFrontCamera:!0,DisableSwitchingCamera:!1},this.requestFacescan=new Ie,this.submitPhoto=new Ie,this.error$=new Qe(void 0),this.Assets=yi,this.subject=new Qe(void 0),this.isUploading=!1,this.uploadSubject=new Qe(void 0)}get error(){return this.error$.getValue()}set error(n){this.error$.next(n),setTimeout(()=>{this.error$.next(void 0)},3e3)}requestPhotoCapture(){this.subject.unsubscribe(),this.subject=new Qe(void 0),this.subject.pipe(Xt(this)).subscribe({next:n=>{n&&(this.subject.unsubscribe(),this.submitPhotoFile(n))},error:n=>{this.error=n.message||n}}),this.requestFacescan.next({setting:this.setting,subject:this.subject})}submitPhotoFile(n){this.uploadSubject.unsubscribe(),this.uploadSubject=new Qe(void 0),this.uploadSubject.pipe(Xt(this)).subscribe(e=>{if(e){this.isUploading=e.uploadStatus===ro.Uploading;const r=e.uploadError||null;r&&(this.error=r)}}),this.submitPhoto.next({files:[new Jm(n)],subscriber:this.uploadSubject})}static#e=this.\u0275fac=function(e){return new(e||H2)};static#t=this.\u0275cmp=bt({type:H2,selectors:[["chat-face"]],inputs:{setting:"setting"},outputs:{requestFacescan:"requestFacescan",submitPhoto:"submitPhoto"},standalone:!0,features:[pr],decls:7,vars:4,consts:[["noerror",""],["startcapture",""],[2,"width","100%","height","100%","box-sizing","border-box","max-width","300px","padding","4px"],[4,"ngIf","ngIfElse"],[2,"color","#cc0000","margin","0"],[1,"uploading"],["alt","Loading","srcset","",3,"src"],[1,"button",3,"click"],["alt","Camera icon","srcset","",3,"src"],[2,"color","var(--default-text-color)"]],template:function(e,r){if(1&e&&(z(0,"div",2),_e(1,Dse,3,1,"ng-container",3),Bt(2,"async"),_e(3,Sse,1,2,"ng-template",null,0,Mt)(5,Tse,4,1,"ng-template",null,1,Mt),G()),2&e){const i=gt(4);M(),U("ngIf",Lt(2,2,r.error$))("ngIfElse",i)}},dependencies:[Zn,gr,Zo],styles:[".buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:16px}.button[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;padding:8px 16px 8px 8px;border-radius:4px;box-shadow:#0000001a 0 1px 3px 1px;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}.uploading[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.uploading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.uploading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}"]})};b2=vi([ji()],b2);const Mse=()=>({$implicit:!1}),Rse=()=>({$implicit:!0}),kse=()=>({MaxFileSizeInMb:200}),Bd=t=>({$implicit:t}),Rj=()=>({MaxFileSizeInMb:200,DurationInSec:60}),Pse=()=>({ScheduleEventLink:"",ScheduleCompleteRedirectionLink:"",OnCompleteMessageFormat:""}),Ose=()=>({DisableSwitchingCamera:!1,IsDefaultToFrontCamera:!0}),Nse=()=>({Title:"Enter your pin",PinLength:4,IsAlphaNumericPin:!1}),Fse=()=>({IsDefaultToFrontCamera:!0,DisableSwitchingCamera:!1}),Bse=()=>[];function Lse(t,n){1&t&&Jn(0,18),2&t&&(j(),U("ngTemplateOutlet",gt(19))("ngTemplateOutletContext",Ms(2,Mse)))}function Use(t,n){1&t&&Jn(0,18),2&t&&(j(),U("ngTemplateOutlet",gt(19))("ngTemplateOutletContext",Ms(2,Rse)))}function jse(t,n){1&t&&Jn(0,19),2&t&&(j(),U("ngTemplateOutlet",gt(21)))}function zse(t,n){1&t&&Jn(0,19),2&t&&(j(),U("ngTemplateOutlet",gt(21)))}function Vse(t,n){if(1&t&&Jn(0,18),2&t){const e=j();U("ngTemplateOutlet",gt(23))("ngTemplateOutletContext",Wn(3,Bd,e.action.ActionAttachmentAttributes||Ms(2,kse)))}}function Wse(t,n){if(1&t&&Jn(0,18),2&t){const e=j();U("ngTemplateOutlet",gt(25))("ngTemplateOutletContext",Wn(3,Bd,e.action.ActionAttachmentAttributes||Ms(2,Rj)))}}function Hse(t,n){if(1&t&&Jn(0,18),2&t){const e=j();U("ngTemplateOutlet",gt(27))("ngTemplateOutletContext",Wn(3,Bd,e.action.ActionAttachmentAttributes||Ms(2,Rj)))}}function qse(t,n){if(1&t&&Jn(0,18),2&t){const e=j();U("ngTemplateOutlet",gt(29))("ngTemplateOutletContext",Wn(3,Bd,e.action.ActionScheduleAttributes||Ms(2,Pse)))}}function Gse(t,n){if(1&t&&Jn(0,18),2&t){const e=j();U("ngTemplateOutlet",gt(31))("ngTemplateOutletContext",Wn(3,Bd,e.action.CaptureImageDataAttributes||Ms(2,Ose)))}}function Kse(t,n){1&t&&Jn(0,19),2&t&&(j(),U("ngTemplateOutlet",gt(33)))}function Qse(t,n){1&t&&Jn(0,19),2&t&&(j(),U("ngTemplateOutlet",gt(35)))}function Yse(t,n){if(1&t&&Jn(0,18),2&t){const e=j();U("ngTemplateOutlet",gt(37))("ngTemplateOutletContext",Wn(3,Bd,e.action.ReadPinCodeAttributes||Ms(2,Nse)))}}function Xse(t,n){if(1&t&&Jn(0,18),2&t){const e=j();U("ngTemplateOutlet",gt(39))("ngTemplateOutletContext",Wn(3,Bd,e.action.CaptureImageDataAttributes||Ms(2,Fse)))}}function Jse(t,n){if(1&t){const e=Te();Ae(0),z(1,"span",20),me("click",function(){return ee(e),te(j().onSubmitReply("SKIP"))}),we(2,"SKIP"),G(),xe()}}function Zse(t,n){if(1&t){const e=Te();Ae(0),z(1,"chat-choice",21),Bt(2,"choices"),me("choiceSelected",function(i){ee(e);const o=j(2);return te(o.onSubmitReply(i,o.PreviewTypes.Pill))}),G(),xe()}if(2&t){const e=j().$implicit,r=j();M(),U("primaryColor",r.primaryColor)("choices",Lt(2,3,r.action.ActionChoiceAttributes.Choices))("isMultiChoice",e)}}function $se(t,n){if(1&t&&_e(0,Zse,3,5,"ng-container",17),2&t){const e=j();U("ngIf",e.action.ActionChoiceAttributes&&e.action.ActionChoiceAttributes.Choices)}}function eae(t,n){if(1&t&&Fe(0,"chat-record",22),2&t){const e=j();U("primaryColor",e.primaryColor)("records",(null==e.action.ActionListAttributes?null:e.action.ActionListAttributes.RecordList)||Ms(2,Bse))}}function tae(t,n){if(1&t){const e=Te();z(0,"chat-upload",23),me("fileSubmitted",function(i){return ee(e),te(j().onFileSelected(i))}),G()}if(2&t){const e=n.$implicit,r=j();U("data",e)("primaryColor",r.primaryColor)}}function nae(t,n){if(1&t){const e=Te();z(0,"chat-audio-recorder",24),me("fileSubmitted",function(i){return ee(e),te(j().onFileSelected(i))}),G()}if(2&t){const e=n.$implicit;U("primaryColor",j().primaryColor)("maxFileSizeInMb",e.MaxFileSizeInMb)("maxRecordingDurationInSec",e.DurationInSec)}}function rae(t,n){if(1&t){const e=Te();z(0,"chat-video-recorder",25),me("readyToRecordVideo",function(i){return ee(e),te(j().startRecordingVideo(i))})("fileSubmitted",function(i){return ee(e),te(j().onFileSelected(i))}),G()}if(2&t){const e=n.$implicit;U("primaryColor",j().primaryColor)("maximumFileSizeInMb",e.MaxFileSizeInMb)("durationInSec",e.DurationInSec)}}function iae(t,n){if(1&t){const e=Te();z(0,"chat-schedular-view",26),me("requestOpenAppointment",function(i){return ee(e),te(j().onOpenAppointmentWindowRequest(i))})("submitReply",function(i){return ee(e),te(j().onReceiveScheduleRequest(i))}),G()}2&t&&U("attribute",n.$implicit)}function oae(t,n){if(1&t){const e=Te();z(0,"chat-photo",27),me("capturePhotoRequested",function(i){return ee(e),te(j().onPhotoCaptureRequested(i))})("submitPhoto",function(i){return ee(e),te(j().onFileSelected(i))}),G()}2&t&&U("disableSwitchingCamera",n.$implicit.DisableSwitchingCamera)}function sae(t,n){if(1&t){const e=Te();z(0,"chat-location",28),me("geoLocationReceived",function(i){return ee(e),te(j().onGeoLocationReceived(i))}),G()}}function aae(t,n){if(1&t){const e=Te();z(0,"chat-scan",29),me("requestCodeScan",function(){return ee(e),te(j().onRequestCodeScan())}),G()}}function uae(t,n){if(1&t){const e=Te();z(0,"chat-pin",30),me("requestPin",function(i){return ee(e),te(j().onRequestPin(i))}),G()}2&t&&U("setting",n.$implicit)}function cae(t,n){if(1&t){const e=Te();z(0,"chat-face",31),me("requestFacescan",function(i){return ee(e),te(j().onRequestFacescan(i))})("submitPhoto",function(i){return ee(e),te(j().onFileSelected(i))}),G()}2&t&&U("setting",n.$implicit)}let kj=(()=>{class t{constructor(){this.ChatActionTypes=zh,this.primaryColor="#215484",this.action={ActionType:zh.None},this.PreviewTypes=Os,this.replyReceived=new Ie,this.fileSubmitted=new Ie,this.recordVideoRequested=new Ie,this.openAppointmentWindow=new Ie,this.scheduleRequest=new Ie,this.capturePhotoRequested=new Ie,this.geoLocationReceived=new Ie,this.requestCodeScan=new Ie,this.requestPin=new Ie,this.requestFaceScan=new Ie}trackChoice(e,r){return`${e}-${r}`}onSubmitReply(e,r){this.replyReceived.next({reply:e,type:r||Os.Default})}onFileSelected(e){this.fileSubmitted.next(e)}startRecordingVideo(e){this.action.ActionAttachmentAttributes&&this.recordVideoRequested.next({subject:e,attribute:this.action.ActionAttachmentAttributes})}onOpenAppointmentWindowRequest(e){this.openAppointmentWindow.next(e)}onReceiveScheduleRequest(e){this.scheduleRequest.next(e)}onPhotoCaptureRequested(e){this.capturePhotoRequested.next({attribute:this.action.CaptureImageDataAttributes||{DisableSwitchingCamera:!1,IsDefaultToFrontCamera:!0},subject:e})}onGeoLocationReceived(e){this.geoLocationReceived.next(e)}onRequestCodeScan(){this.requestCodeScan.next()}onRequestPin(e){this.requestPin.next(e)}onRequestFacescan(e){this.requestFaceScan.next(e)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["chat-action"]],inputs:{primaryColor:"primaryColor",action:"action"},outputs:{replyReceived:"replyReceived",fileSubmitted:"fileSubmitted",recordVideoRequested:"recordVideoRequested",openAppointmentWindow:"openAppointmentWindow",scheduleRequest:"scheduleRequest",capturePhotoRequested:"capturePhotoRequested",geoLocationReceived:"geoLocationReceived",requestCodeScan:"requestCodeScan",requestPin:"requestPin",requestFaceScan:"requestFaceScan"},standalone:!0,features:[pr],decls:40,vars:15,consts:[["choiceview",""],["recordview",""],["uploadfile",""],["recordaudio",""],["recordVideo",""],["makeAppointment",""],["takephoto",""],["takelocation",""],["codescan",""],["readpin",""],["facescan",""],[1,"action-container"],[2,"width","100%","height","100%","display","flex","flex-direction","column","gap","8px"],[2,"flex","1"],[3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[1,"skip-button",2,"flex","0 1 auto","padding","0 8px","box-sizing","border-box",3,"click"],[3,"choiceSelected","primaryColor","choices","isMultiChoice"],[3,"primaryColor","records"],[3,"fileSubmitted","data","primaryColor"],[3,"fileSubmitted","primaryColor","maxFileSizeInMb","maxRecordingDurationInSec"],[3,"readyToRecordVideo","fileSubmitted","primaryColor","maximumFileSizeInMb","durationInSec"],[3,"requestOpenAppointment","submitReply","attribute"],[3,"capturePhotoRequested","submitPhoto","disableSwitchingCamera"],[3,"geoLocationReceived"],[3,"requestCodeScan"],[3,"requestPin","setting"],[3,"requestFacescan","submitPhoto","setting"]],template:function(r,i){1&r&&(z(0,"div",11)(1,"div",12)(2,"div",13),Ae(3,14),_e(4,Lse,1,3,"ng-container",15)(5,Use,1,3,"ng-container",15)(6,jse,1,1,"ng-container",16)(7,zse,1,1,"ng-container",16)(8,Vse,1,5,"ng-container",15)(9,Wse,1,5,"ng-container",15)(10,Hse,1,5,"ng-container",15)(11,qse,1,5,"ng-container",15)(12,Gse,1,5,"ng-container",15)(13,Kse,1,1,"ng-container",16)(14,Qse,1,1,"ng-container",16)(15,Yse,1,5,"ng-container",15)(16,Xse,1,5,"ng-container",15),xe(),G(),_e(17,Jse,3,0,"ng-container",17),G()(),_e(18,$se,1,1,"ng-template",null,0,Mt)(20,eae,1,3,"ng-template",null,1,Mt)(22,tae,1,2,"ng-template",null,2,Mt)(24,nae,1,3,"ng-template",null,3,Mt)(26,rae,1,3,"ng-template",null,4,Mt)(28,iae,1,1,"ng-template",null,5,Mt)(30,oae,1,1,"ng-template",null,6,Mt)(32,sae,1,0,"ng-template",null,7,Mt)(34,aae,1,0,"ng-template",null,8,Mt)(36,uae,1,1,"ng-template",null,9,Mt)(38,cae,1,1,"ng-template",null,10,Mt)),2&r&&(M(3),U("ngSwitch",i.action.ActionType),M(),U("ngSwitchCase",i.ChatActionTypes.ChooseOption),M(),U("ngSwitchCase",i.ChatActionTypes.ChooseOptions),M(),U("ngSwitchCase",i.ChatActionTypes.ShowRecord),M(),U("ngSwitchCase",i.ChatActionTypes.ShowRecords),M(),U("ngSwitchCase",i.ChatActionTypes.UploadFile),M(),U("ngSwitchCase",i.ChatActionTypes.RecordAudio),M(),U("ngSwitchCase",i.ChatActionTypes.RecordVideo),M(),U("ngSwitchCase",i.ChatActionTypes.CreateSchedule),M(),U("ngSwitchCase",i.ChatActionTypes.TakePicture),M(),U("ngSwitchCase",i.ChatActionTypes.ShareLocation),M(),U("ngSwitchCase",i.ChatActionTypes.ScanQRCode),M(),U("ngSwitchCase",i.ChatActionTypes.ReadPIN),M(),U("ngSwitchCase",i.ChatActionTypes.FaceCapture),M(),U("ngIf",i.action.ActionType!==i.ChatActionTypes.ShowRecord&&i.action.ActionType!==i.ChatActionTypes.ShowRecords||!i.action.IsOptional))},dependencies:[Zn,gr,Fm,yb,rN,b2,Ese,_se,w2,Cse,g2,y2,p2,f2,Tj,d2,v2],styles:[".action-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow-x:hidden;margin-top:8px}.skip-button[_ngcontent-%COMP%]{color:var(--default-text-color-lighter);font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:400;width:-moz-fit-content;width:fit-content}.skip-button[_ngcontent-%COMP%]:hover{color:var(--default-text-color)}"]})}return t})(),lae=(()=>{class t{constructor(){this.message="",this._queryText=void 0,this.onMessageSelected=new Qe(void 0)}get queryText(){return this._queryText?this._queryText:this.message}set queryText(e){this._queryText=e}onSelection(){this.onMessageSelected.next({message:this.message,queryText:this.queryText})}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["suggestion-item"]],inputs:{message:"message",queryText:"queryText"},outputs:{onMessageSelected:"onMessageSelected"},decls:2,vars:1,consts:[[1,"chat-suggestion",3,"click"]],template:function(r,i){1&r&&(z(0,"div",0),me("click",function(){return i.onSelection()}),we(1),G()),2&r&&(M(),Ts(" ",i.message,"\n"))},styles:[".chat-suggestion[_ngcontent-%COMP%]{border-radius:12px 6px 0 0;border:1px solid;padding:6px 8px;margin:4px;border-color:var(--suggestion-border-color);color:var(--suggestion-foreground-color);font-weight:300;font-size:12px;line-height:16px}.chat-suggestion[_ngcontent-%COMP%]:hover{border-color:var(--suggestion-border-color-hover);color:var(--suggestion-foreground-color-hover);font-weight:400;cursor:pointer}"]})}return t})();const ix=t=>({"background-color":t}),A2=t=>({color:t});function dae(t,n){if(1&t&&(Ae(0),z(1,"div",8),Fe(2,"markdown",9),G(),xe()),2&t){const e=j(2);M(2),U("data",e.message.message)}}function fae(t,n){if(1&t&&(Ae(0),z(1,"div",12),we(2),G(),xe()),2&t){const e=n.$implicit;M(2),nn(e)}}function hae(t,n){if(1&t&&(Ae(0),z(1,"div",10),_e(2,fae,3,1,"ng-container",11),G(),xe()),2&t){const e=n.ngIf,r=j(2);M(2),U("ngForOf",e)("ngForTrackBy",r.trackChoice.bind(r))}}function pae(t,n){if(1&t&&(Ae(0),we(1),xe()),2&t){const e=j().ngIf;M(),Ts(" Submitted ",e.length," files. ")}}function gae(t,n){1&t&&we(0," Submitted 1 file. ")}function mae(t,n){if(1&t&&(Ae(0),z(1,"span",13),_e(2,pae,2,1,"ng-container",14)(3,gae,1,0,"ng-template",null,2,Mt),G(),xe()),2&t){const e=n.ngIf,r=gt(4);M(2),U("ngIf",e.length>1)("ngIfElse",r)}}function vae(t,n){if(1&t&&(Ae(0),z(1,"div",15)(2,"div",16),we(3),G()(),xe()),2&t){const e=j(2);M(3),Ts(" ",e.message.message," ")}}function yae(t,n){1&t&&(Ae(0),z(1,"span",13),we(2," Shared current location. "),G(),xe())}function wae(t,n){1&t&&(Ae(0),Fe(1,"div",19),xe())}function bae(t,n){if(1&t&&(Ae(0),z(1,"div",17),_e(2,wae,2,0,"ng-container",18),G(),xe()),2&t){const e=n.ngIf;M(2),U("ngForOf",e)}}function Aae(t,n){if(1&t&&(Ae(0),z(1,"div",5)(2,"div",6)(3,"span",7),we(4),G()(),_e(5,dae,3,1,"ng-container",4)(6,hae,3,2,"ng-container",4),Bt(7,"choices"),_e(8,mae,5,2,"ng-container",4),Bt(9,"attachments"),_e(10,vae,4,1,"ng-container",4)(11,yae,3,0,"ng-container",4),Bt(12,"geolocation"),_e(13,bae,3,1,"ng-container",4),G(),xe()),2&t){const e=j();M(),U("@item",void 0)("ngStyle",Wn(16,ix,e.userColorProfile.backgroundColor)),M(2),U("ngStyle",Wn(18,A2,e.userColorProfile.labelColor)),M(),nn(e.user),M(),U("ngIf",e.message.style===e.MessagePreviewTypes.Default),M(),U("ngIf",e.message.style===e.MessagePreviewTypes.Pill&&Lt(7,10,e.message.message)),M(2),U("ngIf",e.message.style===e.MessagePreviewTypes.Attachment&&Lt(9,12,e.message.message)),M(2),U("ngIf",e.message.style===e.MessagePreviewTypes.Code&&e.message.message),M(),U("ngIf",e.message.style===e.MessagePreviewTypes.Location&&Lt(12,14,e.message.message)),M(2),U("ngIf",e.message.style===e.MessagePreviewTypes.Secret&&e.message.message&&e.getLengthRange(e.message.message.length))}}function xae(t,n){if(1&t&&(Ae(0),z(1,"div",6)(2,"span",7),we(3),G(),Fe(4,"img",20),G(),xe()),2&t){const e=j(2);M(),U("@item",void 0),M(),U("ngStyle",Wn(4,A2,e.botColorProfile.labelColor)),M(),nn(e.bot),M(),U("src",e.Assets.Gifs.Loading,He)}}function Cae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",21),Fe(2,"img",22),z(3,"div",8),we(4),G()(),z(5,"div",23),me("click",function(){return ee(e),te(j(2).retryClicked())}),Fe(6,"img",24),z(7,"span"),we(8,"Retry"),G()(),xe()}if(2&t){const e=j(2);M(2),U("src",e.Assets.Images.Warning,He),M(),Xn("color","#cc0000")("font-weight",500),M(),Ts(" ",e.message.message," "),M(2),U("src",e.Assets.Images.Refresh,He)}}function _ae(t,n){if(1&t){const e=Te();Ae(0),z(1,"suggestion-item",26),me("onMessageSelected",function(i){return ee(e),te(j(3).onSuggestionSelected(i))}),G(),xe()}if(2&t){const e=n.$implicit;M(),U("message",e)}}function Eae(t,n){if(1&t&&(Ae(0),z(1,"div",25),_e(2,_ae,2,1,"ng-container",18),G(),xe()),2&t){const e=j(2);M(),U("ngStyle",Wn(2,ix,e.botColorProfile.backgroundColor)),M(),U("ngForOf",e.message.suggestions)}}function Dae(t,n){if(1&t){const e=Te();Ae(0),z(1,"suggestion-item",27),me("onMessageSelected",function(i){return ee(e),te(j(3).onSuggestionSelected(i))}),G(),xe()}if(2&t){const e=n.$implicit;M(),U("queryText",e.query_text)("message",e.display_text)}}function Iae(t,n){if(1&t&&(Ae(0),z(1,"div",25),_e(2,Dae,2,2,"ng-container",18),G(),xe()),2&t){const e=j(2);M(),U("ngStyle",Wn(2,ix,e.botColorProfile.backgroundColor)),M(),U("ngForOf",e.message.suggestionObjects)}}function Sae(t,n){if(1&t&&(Ae(0),z(1,"div",5),_e(2,xae,5,6,"ng-container",14)(3,Cae,9,7,"ng-container",14),G(),_e(4,Eae,3,4,"ng-container",4)(5,Iae,3,4,"ng-container",4),xe()),2&t){const e=j(),r=gt(4),i=gt(6);M(),U("ngStyle",Wn(7,ix,e.botColorProfile.backgroundColor)),M(),U("ngIf",e.message.loading)("ngIfElse",r),M(),U("ngIf",e.message.warning)("ngIfElse",i),M(),U("ngIf",e.message.suggestions&&e.message.suggestions.length>0),M(),U("ngIf",e.message.suggestionObjects&&e.message.suggestionObjects.length>0)}}function Tae(t,n){if(1&t&&(z(0,"div",6)(1,"span",7),we(2),G()()),2&t){const e=j();M(),U("ngStyle",Wn(2,A2,e.botColorProfile.labelColor)),M(),nn(e.bot)}}function Mae(t,n){if(1&t&&(Ae(0),z(1,"div",8),Fe(2,"markdown",9),G(),xe()),2&t){const e=j(2);M(2),U("data",e.message.message)}}function Rae(t,n){if(1&t&&(Ae(0),z(1,"div",12),we(2),G(),xe()),2&t){const e=n.$implicit;M(2),nn(e)}}function kae(t,n){if(1&t&&(Ae(0),z(1,"div",10),_e(2,Rae,3,1,"ng-container",11),G(),xe()),2&t){const e=n.ngIf,r=j(2);M(2),U("ngForOf",e)("ngForTrackBy",r.trackChoice.bind(r))}}function Pae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",3)(2,"chat-action",28),me("scheduleRequest",function(i){return ee(e),te(j(2).onRequestSearchSchedule(i))})("replyReceived",function(i){return ee(e),te(j(2).onActionReplied(i))})("recordVideoRequested",function(i){return ee(e),te(j(2).onRecordVideoRequested(i))})("fileSubmitted",function(i){return ee(e),te(j(2).onFileSelected(i))})("capturePhotoRequested",function(i){return ee(e),te(j(2).onCapturePhotoRequested(i))})("geoLocationReceived",function(i){return ee(e),te(j(2).onGeolocationReceived(i))})("requestCodeScan",function(){return ee(e),te(j(2).onRequestCodeScan())})("requestPin",function(i){return ee(e),te(j(2).onRequestPin(i))})("requestFaceScan",function(i){return ee(e),te(j(2).onRequestFaceScan(i))})("openAppointmentWindow",function(i){return ee(e),te(j(2).onOpenAppointmentWindowRequest(i))}),G()(),xe()}if(2&t){const e=j(2);M(2),U("primaryColor",e.botColorProfile.labelColor)("action",e.message.action)}}function Oae(t,n){if(1&t&&(_e(0,Mae,3,1,"ng-container",4)(1,kae,3,2,"ng-container",4),Bt(2,"choices"),_e(3,Pae,3,2,"ng-container",4)),2&t){const e=j();U("ngIf",e.message.style===e.MessagePreviewTypes.Default),M(),U("ngIf",e.message.style===e.MessagePreviewTypes.Pill&&Lt(2,3,e.message.message)),M(2),U("ngIf",e.allowActionInteraction&&e.message.action)}}let Nae=(()=>{class t{constructor(e){this.mdService=e,this.Assets=yi,this.MessagePreviewTypes=Os,this.userColorProfile=new Uh("#38383b","#0e1221","#c7c7c9"),this.botColorProfile=new Uh("#1a1a9c","#0e1221","#FFFFFF"),this.user="user0123",this.bot="AI Assistant",this.isBotReply=!1,this.allowActionInteraction=!1,this._message=new jh("","",""),this.suggestionSelected=new Qe(void 0),this.actionReplyReceived=new Ie,this.searchScheduleRequest=new Ie,this.fileSubmitted=new Ie,this.recordVideoRequested=new Ie,this.openAppointmentWindow=new Ie,this.capturePhotoRequested=new Ie,this.geolocationReceived=new Ie,this.retryRequested=new Ie,this.requestCodeScan=new Ie,this.requestPin=new Ie,this.requestFacescan=new Ie}ngOnInit(){this.mdService.renderer.image=(e,r,i)=>`\n                <div class="linked-messages">\n                    <a target="_blank" href="${e}">\n                        <img src="${e}" alt="${i}" >\n                    </a>\n                </div>\n            `,this.mdService.renderer.link=(e,r,i)=>{const o=HA(e);return function Bre(t){return/(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(?:channels\/[\w]+\/)?([\d]+)/.test(t)}(e)?`\n                            <div class="video-attachment">\n                                <iframe src="${function Tre(t){const e=/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i.exec(t),r=t.split?.("/")[4]?.split?.("?")[0];return e&&"https://player.vimeo.com/video/"+e[1]+"?h="+r}(e)}" frameborder="0" allowfullscreen></iframe>\n\n                            </div>\n                        `:function Fre(t){return/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})$/.test(t)}(e)&&function Ire(t){const e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=|shorts\/)([^#&?]*).*/);return!!e&&11===e[2].length}(e)?`\n                            <div class="video-attachment">\n                                <iframe src="${function Mre(t){return"https://www.youtube.com/embed/"+function Sre(t){const e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=|shorts\/)([^#&?]*).*/);return e&&11===e[2].length?e[2].trim():null}(t)}(e)}" \n                                 frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>\n                            </div>\n                        `:o&&IU(o)?`\n                    <div class="linked-messages">\n                        <a target="_blank" href="${e}">\n                            <img src="${e}" alt="${i}" >\n                        </a>\n                    </div>\n                `:`<a target="_blank" href=${e}>${r??i}</a>`}}trackChoice(e,r){return`${e}-${r}`}trackAttachment(e,r){return e}set colorProfiles(e){e[Ui.UserId]&&(this.userColorProfile=e[Ui.UserId]),e[Ui.BotId]&&(this.botColorProfile=e[Ui.BotId])}set message(e){this._message=e,this.isBotReply=e.userId===Ui.BotId}get message(){return this._message}onSuggestionSelected(e){this.suggestionSelected.next(e)}onActionReplied(e){this.actionReplyReceived.next(e)}onRequestSearchSchedule(e){this.searchScheduleRequest.next(e)}onFileSelected(e){this.fileSubmitted.next(e)}onRecordVideoRequested(e){this.recordVideoRequested.next(e)}onOpenAppointmentWindowRequest(e){this.openAppointmentWindow.next(e)}onCapturePhotoRequested(e){this.capturePhotoRequested.next(e)}retryClicked(){this.retryRequested.next()}onGeolocationReceived(e){this.geolocationReceived.next(e)}onRequestCodeScan(){this.requestCodeScan.next()}onRequestPin(e){this.requestPin.next(e)}getLengthRange(e){return Array.from({length:e},(r,i)=>i)}onRequestFaceScan(e){this.requestFacescan.next(e)}static#e=this.\u0275fac=function(r){return new(r||t)(ve(nx))};static#t=this.\u0275cmp=bt({type:t,selectors:[["chat-item"]],inputs:{user:"user",bot:"bot",colorProfiles:"colorProfiles",allowActionInteraction:"allowActionInteraction",message:"message"},outputs:{suggestionSelected:"suggestionSelected",actionReplyReceived:"actionReplyReceived",searchScheduleRequest:"searchScheduleRequest",fileSubmitted:"fileSubmitted",recordVideoRequested:"recordVideoRequested",openAppointmentWindow:"openAppointmentWindow",capturePhotoRequested:"capturePhotoRequested",geolocationReceived:"geolocationReceived",retryRequested:"retryRequested",requestCodeScan:"requestCodeScan",requestPin:"requestPin",requestFacescan:"requestFacescan"},decls:7,vars:2,consts:[["botLabel",""],["botMessage",""],["singlefile",""],[2,"width","100%"],[4,"ngIf"],[1,"chat-box",3,"ngStyle"],[2,"display","flex","flex-direction","row","flex-wrap","wrap","align-items","center"],[1,"chat-box-user",2,"margin","auto 0",3,"ngStyle"],[1,"chat-box-message"],[3,"data"],[1,"chat-choices"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"item-center","chat-choice"],[2,"flex","1","color","var(--default-text-color)","font-size","14px","font-weight","300"],[4,"ngIf","ngIfElse"],[1,"code-block",2,"flex","1"],[1,"code-content"],[1,"secret-container"],[4,"ngFor","ngForOf"],[1,"secret-item"],["alt","loading","srcset","",2,"margin-left","8px","height","48px",3,"src"],[1,"chat-box-error-section"],["alt","Warning sign",3,"src"],[1,"reload-button","mt-2",3,"click"],["alt","Refresh",3,"src"],[1,"chat-suggestion",3,"ngStyle"],[3,"onMessageSelected","message"],[3,"onMessageSelected","queryText","message"],[3,"scheduleRequest","replyReceived","recordVideoRequested","fileSubmitted","capturePhotoRequested","geoLocationReceived","requestCodeScan","requestPin","requestFaceScan","openAppointmentWindow","primaryColor","action"]],template:function(r,i){1&r&&(z(0,"div",3),_e(1,Aae,14,20,"ng-container",4)(2,Sae,6,9,"ng-container",4),G(),_e(3,Tae,3,4,"ng-template",null,0,Mt)(5,Oae,4,5,"ng-template",null,1,Mt)),2&r&&(M(),U("ngIf",!i.isBotReply),M(),U("ngIf",i.isBotReply))},dependencies:[Ph,gr,Oh,kj,Ij,lae,Tj,Aoe,xoe],styles:[".chat-box[_ngcontent-%COMP%]{box-sizing:border-box;padding:16px 32px;--codeblockcolor: #e4f9ff;--highlightedtextcolor: #090d1a}.chat-box-user[_ngcontent-%COMP%]{font-size:12px;font-weight:400}.chat-box-error-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:16px}.chat-box-error-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:72px;padding:8px}.reload-button[_ngcontent-%COMP%]{display:flex;width:-moz-fit-content;width:fit-content;box-sizing:border-box;gap:8px;align-items:center;justify-content:flex-start;-webkit-user-select:none;user-select:none;cursor:pointer}.reload-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;box-sizing:border-box}.reload-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--default-text-color-light);-webkit-user-select:none;user-select:none}.reload-button[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:var(--default-text-color)}.chat-box-message[_ngcontent-%COMP%]{width:100%;font-size:14px;color:var(--default-text-color);font-weight:300}.chat-box-message-center[_ngcontent-%COMP%]{text-align:center}  .chat-box-message p{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;line-height:26px;font-weight:300}.chat-suggestion[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;padding:0 32px 16px;margin:-8px 0 0}  .chat-box-message .linked-messages{margin-top:8px;border-radius:8px;padding:8px;background-color:#f4f4f4;width:-moz-fit-content;width:fit-content}  .chat-box-message .linked-messages a{text-decoration:none}  .chat-box-message .linked-messages a img{margin:auto;max-height:400px;border-radius:8px;display:block}  .chat-box-message h1{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:26px!important;font-weight:600!important}  .chat-box-message h2{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:24px!important;font-weight:600!important}  .chat-box-message h3{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:22px!important;font-weight:600!important}  .chat-box-message h4{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:20px!important;font-weight:600!important}  .chat-box-message h5{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:18px!important;font-weight:600!important}  .chat-box-message strong{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-weight:600!important}  .chat-box-message b{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-weight:600!important}  .chat-box-message em{margin:0!important;padding:4px;box-sizing:border-box;border:1px solid lightgray;border-radius:4px;background-color:var(--codeblockcolor);color:var(--highlightedtextcolor);overflow-wrap:break-word!important;word-break:break-word!important;font-weight:400!important}  .chat-box-message table{padding:8px;background:var(--codeblockcolor);border-radius:8px;margin:8px 0}  .chat-box-message table th{padding:4px 8px;text-align:left;font-weight:400}  .chat-box-message table td{padding:4px 8px;text-align:left}  .chat-box-message pre{padding:16px;background-color:var(--codeblockcolor);border-radius:8px}  .chat-box-message .attachment-messages{border-radius:8px;padding:4px;background-color:#fff;max-width:-moz-fit-content;max-width:fit-content;margin-top:8px;width:-moz-fit-content;width:fit-content;max-width:370px}  .chat-box-message .attachment-messages a{text-decoration:none;display:block;max-width:-moz-fit-content;max-width:fit-content}  .chat-box-message .attachment-messages a .message-body{display:flex;padding:8px;gap:10px;align-items:center;justify-content:flex-start;border-radius:4px}  .chat-box-message .attachment-messages a .message-body img{width:40px}  .chat-box-message .attachment-messages a .message-body span{text-overflow:ellipsis;overflow:hidden;width:90%;color:var(--default-text-color)}  .chat-box-message .video-attachment{width:100%;max-width:300px;padding:8px;box-shadow:#0002 0 1px 2px 1px;border-radius:4px;background-color:#fff;aspect-ratio:4/3;display:flex;align-items:center;justify-content:center;background-color:#000;margin-top:8px}  .chat-box-message .video-attachment video{width:calc(100% - 16px);height:calc(100% - 16px)}  .chat-box-message .video-attachment iframe{width:100%;height:100%;border-radius:4px;background-color:#fff}  .chat-box-message .audio-attachment{width:100%;max-width:300px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:30px;background:#fff;overflow:hidden;margin-top:8px}  .chat-box-message .audio-attachment audio{width:calc(100% - 16px);height:calc(100% - 16px)}.chat-choices[_ngcontent-%COMP%]{flex:1;display:flex;gap:8px;align-items:center;justify-content:flex-start;box-sizing:border-box;flex-wrap:wrap;margin-top:8px}.item-center[_ngcontent-%COMP%]{height:36px;display:flex;align-items:center;justify-content:flex-start;padding:0 16px;-webkit-user-select:none;user-select:none}.chat-choice[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;color:#fff;background-color:var(--default-text-color);box-shadow:#0000004d 0 1px 3px 1px;border-radius:6px;font-weight:400}.chat-attachments[_ngcontent-%COMP%]{flex:1;display:flex;gap:8px;align-items:center;justify-content:flex-start;box-sizing:border-box;flex-wrap:wrap;margin-top:8px}@media screen and (max-width: 768px){.chat-box[_ngcontent-%COMP%]{padding:16px 24px}.chat-box-user[_ngcontent-%COMP%]{font-size:14px}.chat-box-message[_ngcontent-%COMP%], .chat-choice[_ngcontent-%COMP%]{font-size:16px}}.code-block[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border-radius:5px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;gap:10px;cursor:pointer}.code-content[_ngcontent-%COMP%]{padding:10px;font-size:14px;font-weight:400;color:var(--default-text-color);box-sizing:border-box;word-wrap:break-word;border-left:5px solid var(--default-text-color)}.secret-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:flex-start;gap:8px;margin-top:8px}.secret-item[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:6px;background-color:var(--default-text-color)}"],data:{animation:[BG("item",[ON(":enter",[Bh({opacity:0}),PN(150,Bh({opacity:1}))]),ON(":leave",[Bh({opacity:1}),PN(100,Bh({opacity:0}))])])]}})}return t})();const Fae=["chatUserInput"],Bae=["chatbody"],Lae=t=>({"background-color":t});function Uae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",10),me("click",function(){return ee(e),te(j().minimizeChatWindow())}),Fe(2,"img",11),G(),xe()}if(2&t){const e=j();M(2),U("src",e.Assets.Images.Minimize,He)}}function jae(t,n){if(1&t){const e=Te();Ae(0),z(1,"chat-item",12),me("suggestionSelected",function(i){return ee(e),te(j().onSuggsetionSelected(i))})("actionReplyReceived",function(i){return ee(e),te(j().onActionSelected(i))})("recordVideoRequested",function(i){return ee(e),te(j().onRecordVideoRequested(i))})("fileSubmitted",function(i){return ee(e),te(j().onFileMessageReceived(i))})("retryRequested",function(){return ee(e),te(j().onRetryRequested())})("openAppointmentWindow",function(i){return ee(e),te(j().onMakeAppointmentRequested(i))})("capturePhotoRequested",function(i){return ee(e),te(j().openCapturePhoto(i))})("geolocationReceived",function(i){return ee(e),te(j().addGeolocationResponseFromUser(i))})("requestCodeScan",function(){return ee(e),te(j().onCodeScanRequested())})("requestPin",function(i){return ee(e),te(j().requestReadPin(i))})("requestFacescan",function(i){return ee(e),te(j().onRequestFaceScan(i))})("searchScheduleRequest",function(i){return ee(e),te(j().onScheduleSearchRequested(i))}),G(),xe()}if(2&t){const e=n.$implicit,r=n.index,i=j();M(),U("id",e.id)("user",i.initialParameters.userName)("bot",i.initialParameters.botName)("colorProfiles",i.initialParameters.userColors)("allowActionInteraction",r===i.messages.length-1||void 0!==e.action&&(e.action.ActionType===i.ChatActionTypes.ShowRecord||e.action.ActionType===i.ChatActionTypes.ShowRecords))("message",e)}}function zae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",13)(2,"textarea",14,1),me("input",function(i){return ee(e),te(j().onInputChange(i))})("keydown.enter",function(i){return ee(e),te(i.preventDefault())})("keyup.enter",function(){return ee(e),te(j().onSubmitReplyEvent())}),G(),z(4,"img",15),me("click",function(){return ee(e),te(j().onSubmitReplyEvent())}),G(),z(5,"img",16),me("click",function(){return ee(e),te(j().onCancelUserRequest())}),G()(),xe()}if(2&t){const e=j();M(4),U("hidden",e.isLoading),M(),U("hidden",!e.isLoading)}}function Vae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",17),me("click",function(i){return ee(e),te(i.stopImmediatePropagation())}),z(2,"div",18)(3,"ca-video-recorder",19),me("recordCompleted",function(i){return ee(e),te(j().onRecordCompleted(i))})("recordingCanceled",function(){return ee(e),te(j().cancelRecording())}),G()()(),xe()}if(2&t){const e=j();M(3),U("allowReplay",!0)("maxDurationInSec",e.videoRecordAttributes.DurationInSec)("maxSizeInMb",e.videoRecordAttributes.MaxFileSizeInMb)}}function Wae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",20)(2,"div",21)(3,"div",22)(4,"span"),we(5,"Make An Appointment"),G(),z(6,"img",23),me("click",function(){return ee(e),te(j().closeAppointment())}),G()(),z(7,"div",24)(8,"iframe-preview",25),me("errorReceived",function(i){return ee(e),te(j().onErrorfromIframe(i))}),G()()()(),xe()}if(2&t){const e=j();M(8),U("openingLink",e.scheduleAttributes.ScheduleEventLink)}}function Hae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",20)(2,"div",21)(3,"div",22)(4,"span"),we(5,"Capture Photo"),G(),z(6,"img",23),me("click",function(){return ee(e),te(j().closeCapturePhoto())}),G()(),z(7,"div",24)(8,"web-cam",26),me("captureCompleted",function(i){return ee(e),te(j().onCaptureCompleted(i))}),G()()()(),xe()}2&t&&(M(8),U("autocapture",!1)("allowOverlay",!1))}function qae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",20)(2,"div",21)(3,"div",22)(4,"span"),we(5,"Scan Code"),G(),z(6,"img",23),me("click",function(){return ee(e),te(j().closeCodeScanning())}),G()(),z(7,"div",24)(8,"scan-code",27),me("scanCompleted",function(i){return ee(e),te(j().onScanCompleted(i))}),G()()()(),xe()}}function Gae(t,n){if(1&t){const e=Te();Ae(0),z(1,"alpha-numeric-pin",28),me("dismiss",function(){return ee(e),te(j(2).onCanceledReadPin())})("pinReady",function(i){return ee(e),te(j(2).onPinready(i))}),G(),xe()}if(2&t){const e=j(2);M(),U("title",e.pinSetting.Title)("subtitle",e.pinSetting.Subtitle)("length",e.pinSetting.PinLength)}}function Kae(t,n){if(1&t){const e=Te();Ae(0),z(1,"numeric-pin",28),me("dismiss",function(){return ee(e),te(j(2).onCanceledReadPin())})("pinReady",function(i){return ee(e),te(j(2).onPinready(i))}),G(),xe()}if(2&t){const e=j(2);M(),U("title",e.pinSetting.Title)("subtitle",e.pinSetting.Subtitle)("length",e.pinSetting.PinLength)}}function Qae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",17),me("click",function(i){return ee(e),te(i.stopImmediatePropagation())}),z(2,"div",18),_e(3,Gae,2,3,"ng-container",7)(4,Kae,2,3,"ng-container",7),G()(),xe()}if(2&t){const e=j();M(3),U("ngIf",e.pinSetting.IsAlphaNumericPin),M(),U("ngIf",!e.pinSetting.IsAlphaNumericPin)}}function Yae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",20)(2,"div",21)(3,"div",22)(4,"span"),we(5,"Capture Face Photo"),G(),z(6,"img",23),me("click",function(){return ee(e),te(j().onFaceScanCanceled())}),G()(),z(7,"div",24)(8,"lib-face-camera-lib",29),me("faceImageReceived",function(i){return ee(e),te(j().onFaceScanCompleted(i))}),G()()()(),xe()}if(2&t){const e=j();M(8),U("allowMultipleFace",!1)("expectedFaceDirection",e.FaceDirections.Straight)}}let Pj=(()=>{class t{constructor(){this.initialParameters=new pD("CloudApper AI","user0123","AI Assistant",new hD("#1960d1","#ffffff","#f2f2f2"),{},!1),this.messages=[],this.isLoading=!1,this.allowChatInput=!0,this.ChatActionTypes=zh,this.submitFileMessage=new Ie,this.cancelUserRequest=new Ie,this.userReplySubmitted=new Qe(void 0),this.chatMinimizeRequestReceived=new Qe(!1),this.allowMinimize=!0,this.isRecordingVideo=!1,this.isOpenAppointment=!1,this.fileUploadObserver=void 0,this.Assets=yi,this.isPhotoCapturing=!1,this.capturePhotoObserver=void 0,this.isScanningCode=!1,this.isRequestingReadPin=!1,this.pinSetting={Title:"Enter your pin",PinLength:4,IsAlphaNumericPin:!1},this.isScanningFace=!1,this.FaceDirections=Fs}addWarningfromBot(e,r){const i=new jh(e,Ui.BotId,r);i.warning=!0,this.updateMessageQueue(i)}reset(){this.messages=[],this.setReadyForUserReply(!0)}addReplyFromBot(e,r,i,o){const s=new jh(e,Ui.BotId,r);s.suggestions=i,s.suggestionObjects=o,this.updateMessageQueue(s)}addActionReplyFromBot(e,r,i){const o=new jh(e,Ui.BotId,r);o.action=i,this.updateMessageQueue(o)}setReadyForUserReply(e){this.isLoading=!e}addReplyFromUser(e,r,i){const o=new jh(pa(),Ui.UserId,e);if(o.QueryText=r,o.style=i||Os.Default,this.updateMessageQueue(o))return o}addGeolocationResponseFromUser(e){this.postUserReply(`${e.lat},${e.lng}`,void 0,Os.Location)}addFileResponseFromUser(e){let r="";for(let i=0;i<e.length;i++)0!==i&&(r+=";"),r+=`${e[i].url}`;this.postUserReply(r,void 0,Os.Attachment)}onRetryRequested(){this._lastQuery&&this.submitMessageWithoutShowing(this._lastQuery)}addLoadingMessage(){const e=new jh(pa(),Ui.BotId,"");e.loading=!0,this.updateMessageQueue(e)}trackBy(e,r){return`${r.id}-${r.updateCount}`}updateMessageQueue(e){if(this.isLoading&&e.userId!==Ui.BotId)return!1;const r=[...this.messages],i=r.findIndex(o=>o.loading);if(-1!==i)r[i]=e;else{const o=r.findIndex(s=>s.id===e.id);-1!==o?(r[o].updateCount+=1,r[o].message=e.message,r[o].warning=e.warning,r[o].action=e.action,r[o].suggestionObjects=e.suggestionObjects,r[o].suggestions=e.suggestions):r.push(e)}return this.action=r.length?r[r.length-1].action:void 0,this.allowChatInput=!this.action||this.action.ActionType===zh.ShowRecord||this.action.ActionType===zh.ShowRecords||this.action.IsOptional,this.messages=r,setTimeout(()=>{this.chatbody&&this.chatbody.nativeElement.scroll({top:this.chatbody.nativeElement.scrollHeight,left:0,behavior:"smooth"})},250),!0}submitMessageWithoutShowing(e){setTimeout(()=>{this.addLoadingMessage(),this.setReadyForUserReply(!1),this._lastQuery=e,this.userReplySubmitted.next(e)},250),this.chatUserInput&&(this.chatUserInput.nativeElement.value="")}postUserReply(e,r,i=Os.Default){let o=e;const s=o.split("\n").map(u=>u.trim()).filter(u=>u.length);s.length&&(o=s.join("<br>"));const a=this.addReplyFromUser(o,r,i);a&&(setTimeout(()=>{this.addLoadingMessage(),this.setReadyForUserReply(!1),this._lastQuery=a.QueryText,this.userReplySubmitted.next(a.QueryText)},500),this.chatUserInput&&(this.chatUserInput.nativeElement.value="",this.chatUserInput.nativeElement.style.height="36px"))}onSubmitReplyEvent(){if(this.chatUserInput){const e=this.chatUserInput.nativeElement.value;e&&e.length>0&&this.postUserReply(e)}}onCancelUserRequest(){this.cancelUserRequest.next()}onSuggsetionSelected(e){e&&e.message.length>0&&this.postUserReply(e.message,e.queryText)}onActionSelected(e){this.postUserReply(e.reply,void 0,e.type)}minimizeChatWindow(){this.chatMinimizeRequestReceived.next(!0)}onInputChange(e){const r=e.target;r&&(r.style.height=r.value.length>0?`${Math.min(160,Math.max(36,r.scrollHeight))}px`:"36px")}onScheduleSearchRequested(e){this.isLoading||this.submitMessageWithoutShowing(e)}onRecordVideoRequested(e){this.videoRecordAttributes=e.attribute,this.videoRecordObserver=e.subject,this.isRecordingVideo=!0}cancelRecording(){this.isRecordingVideo=!1,this.videoRecordObserver?.next(null)}onRecordCompleted(e){this.isRecordingVideo=!1,this.videoRecordObserver?.next(new File([e.data],e.name))}onMakeAppointmentRequested(e){this.scheduleAttributes=e.attribute,this.scheduleObserver=e.subject,this.isOpenAppointment=!0}closeAppointment(){this.isOpenAppointment=!1,this.scheduleAttributes=void 0,this.scheduleObserver?.next(es.ok(!0))}onErrorfromIframe(e){this.scheduleObserver?.next(es.error(new Error(e))),this.isOpenAppointment=!1,this.scheduleAttributes=void 0}onFileMessageReceived(e){this.isLoading||(this.fileUploadObserver=e.subscriber,this.submitFileMessage.next(e.files))}updateFileInformation(e){this.fileUploadObserver?.next(e)}openCapturePhoto(e){this.photoAttributes=e.attribute,this.capturePhotoObserver=e.subject,this.isPhotoCapturing=!0}closeCapturePhoto(){this.isOpenAppointment=!1,this.photoAttributes=void 0,this.capturePhotoObserver?.next(void 0)}onCaptureCompleted(e){this.capturePhotoObserver?.next(e),this.isOpenAppointment=!1,this.photoAttributes=void 0}onCodeScanRequested(){this.scanResult=void 0,this.isScanningCode=!0}onScanCompleted(e){this.scanResult=e,this.isScanningCode=!0,this.postUserReply(e.code,void 0,Os.Code)}closeCodeScanning(){this.scanResult=void 0,this.isScanningCode=!1}onCanceledReadPin(){this.isRequestingReadPin=!1}onPinready(e){this.postUserReply(e,void 0,Os.Secret),this.isRequestingReadPin=!1}requestReadPin(e){this.pinSetting=e,this.isRequestingReadPin=!0}onRequestFaceScan(e){this.faceScanAttributes=e.setting,this.faceScanObserver=e.subject,this.isScanningFace=!0}onFaceScanCanceled(){this.faceScanAttributes=void 0,this.faceScanObserver=void 0,this.isScanningFace=!1}onFaceScanCompleted(e){this.faceScanObserver?.next(e),this.faceScanAttributes=void 0,this.faceScanObserver=void 0,this.isScanningFace=!1}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=bt({type:t,selectors:[["ca-chat-box"]],viewQuery:function(r,i){if(1&r&&(dr(Fae,5),dr(Bae,5)),2&r){let o;fr(o=hr())&&(i.chatUserInput=o.first),fr(o=hr())&&(i.chatbody=o.first)}},inputs:{initialParameters:"initialParameters",allowMinimize:"allowMinimize"},outputs:{submitFileMessage:"submitFileMessage",cancelUserRequest:"cancelUserRequest",userReplySubmitted:"userReplySubmitted",chatMinimizeRequestReceived:"chatMinimizeRequestReceived"},decls:18,vars:14,consts:[["chatbody",""],["chatUserInput",""],[1,"chat-area"],[1,"chat-box-title"],[2,"width","100%"],[1,"chat-box-title-medium"],[1,"chat-box-title-small"],[4,"ngIf"],[1,"chat-box-body",3,"ngStyle"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"chat-minimize",3,"click"],["alt","minimize window",3,"src"],[3,"suggestionSelected","actionReplyReceived","recordVideoRequested","fileSubmitted","retryRequested","openAppointmentWindow","capturePhotoRequested","geolocationReceived","requestCodeScan","requestPin","requestFacescan","searchScheduleRequest","id","user","bot","colorProfiles","allowActionInteraction","message"],[1,"chat-box-input"],["placeholder","Type here to search","spellcheck","true",1,"text",3,"input","keydown.enter","keyup.enter"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAddJREFUaEPtV0tKA0EQfT1JzE8HElCXbvQC3kMQPIAH8BSiYCC6caur4ErFhVvBS4iiOxeC+CGdGZJMEk2XRFGjZDH9GbWxZ931qt571T1VDJZ/zPL64Qj8toPOAeeApgKuhTQF1A53DmhLqAngHNAUUDtcwYHJceChqZ3ZEIA0gWyhfMSIrjo5VMB5CIAM1aIEI00gXygdE7AAoAuwM+FhudesXyhlNxCkQ+A9vQBwScB2t813AfQN1BUbwgSBoWR0x8AOSNBWp9O4jl2FxkHDBIa5YI88Vuu26qdJupIcgQ8u7J4RVqIcnYDzQEPskaE/QOBL3o1sRlSDIGiYer2kCeSKpX0QlgB4imo+AWgwYvNRVL9RxPj0VxWgWJyaFqI/A4gxIkrB8+YAWgPgA8gDsfbtc8ZQi1q8quqItANxCfu+X+49pxcBShOQ9hgmiDAgmBrh3uAp3vGQWm23H2/j5hic+78ERrTQLEDrf76FrL/EQ7OQTKu+nSVUxjL9ahiGXPXSfk8qfQfkCdj6IyMrR4nXYe6QBG3aNMxZO07budBYv1ICli/18o9/shHS/4Fky5FHdwTkNTMb4Rwwq6c8mnNAXjOzEc4Bs3rKozkH5DUzG2G9Ay+zitkxUTv04QAAAABJRU5ErkJggg==","alt","Send Button",3,"click","hidden"],["src","data:image/png;base64,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","alt","Send Button",3,"click","hidden"],[1,"popup-window",3,"click"],[1,"popup-body"],[3,"recordCompleted","recordingCanceled","allowReplay","maxDurationInSec","maxSizeInMb"],[1,"video-record-window"],[1,"video-record-body"],[1,"video-record-title"],["src","data:image/png;base64,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","alt","cancel-icon","srcset","",2,"width","32px",3,"click"],[1,"video-record-section"],[3,"errorReceived","openingLink"],[3,"captureCompleted","autocapture","allowOverlay"],[3,"scanCompleted"],[3,"dismiss","pinReady","title","subtitle","length"],[3,"faceImageReceived","allowMultipleFace","expectedFaceDirection"]],template:function(r,i){1&r&&(z(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),we(4),G(),z(5,"div",6),we(6,"Powered by CloudApper AI"),G()(),_e(7,Uae,3,1,"ng-container",7),G(),z(8,"div",8,0),_e(10,jae,2,6,"ng-container",9),G(),_e(11,zae,6,2,"ng-container",7)(12,Vae,4,3,"ng-container",7)(13,Wae,9,1,"ng-container",7)(14,Hae,9,2,"ng-container",7)(15,qae,9,0,"ng-container",7)(16,Qae,5,2,"ng-container",7)(17,Yae,9,2,"ng-container",7),G()),2&r&&(M(4),nn(i.initialParameters.title),M(3),U("ngIf",i.allowMinimize),M(),U("ngStyle",Wn(12,Lae,i.initialParameters.windowColors.secondaryColor)),M(2),U("ngForOf",i.messages)("ngForTrackBy",i.trackBy),M(),U("ngIf",i.allowChatInput),M(),U("ngIf",i.isRecordingVideo&&i.videoRecordAttributes),M(),U("ngIf",i.isOpenAppointment&&i.scheduleAttributes),M(),U("ngIf",i.isPhotoCapturing&&i.photoAttributes),M(),U("ngIf",i.isScanningCode&&!i.scanResult),M(),U("ngIf",i.isRequestingReadPin),M(),U("ngIf",i.isScanningFace))},dependencies:[Ph,gr,Oh,Zm,mU,zne,zA,WA,EU,DU,Nae],styles:[".chat-area[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;position:relative}.chat-box-title[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 24px;border-bottom:1px solid #e1e1e1;background-color:var(--chat-box-primary-color);color:var(--chat-box-on-primary-color)}.chat-box-title-medium[_ngcontent-%COMP%]{font-size:14px}.chat-box-title-small[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.chat-box-body[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 0 16px;background:#fafafa;overflow-y:auto}.chat-box-input[_ngcontent-%COMP%]{display:flex;padding:8px 16px;flex-direction:row;background:#fff;border-top:1px solid #f0f0f0}.chat-box-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;outline:none!important;border:none!important;height:36px;min-height:36px!important;max-height:160px!important;padding:0 16px!important;font-size:14px!important;font-weight:300!important;margin:0!important;resize:vertical;font-family:Be Vietnam Pro,sans-serif!important}.chat-box-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none!important;margin:0!important}.chat-box-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:36px;background-color:transparent;border:none;margin:0 0 0 8px}.chat-minimize[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:-16px}.chat-minimize[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:36px}.video-record-window[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:500;background-color:#ffffffc7;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_move-in{0%{opacity:0;height:0}90%{height:95%}to{opacity:1;height:90%}}.video-record-body[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:90%;box-sizing:border-box;background-color:#fff;box-shadow:#0002 0 1px 5px 1px;border-radius:24px;overflow:hidden;z-index:5;opacity:1;animation:_ngcontent-%COMP%_move-in .4s ease-in}.video-record-title[_ngcontent-%COMP%]{height:48px;width:100%;z-index:5;box-sizing:border-box;box-shadow:#0002 0 1px 3px 1px;display:flex;align-items:center;justify-content:space-between;padding:0 16px;background-color:#fff;background-color:var(--chat-box-primary-color)}.video-record-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--chat-box-on-primary-color)}.video-record-title[_ngcontent-%COMP%]   tinted-img[_ngcontent-%COMP%]{width:32px;height:32px}.video-record-section[_ngcontent-%COMP%]{width:100%;height:calc(100% - 48px);background-color:#000}.popup-window[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:500;background-color:#ffffffc7;display:flex;align-items:center;justify-content:center}.popup-body[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;width:100%;max-width:480px;height:90%;box-sizing:border-box;background-color:#fff;box-shadow:#0002 0 1px 5px 1px;border-radius:12px;overflow:hidden;z-index:5;opacity:1;transform:translate(-50%);animation:_ngcontent-%COMP%_move-in .4s ease-in}@media screen and (max-width: 480px){.chat-box-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:16px!important}}"]})}return t})();const Xae=["chatBox"],x2=t=>({display:t}),Jae=(t,n)=>({background:t,display:n});function Zae(t,n){if(1&t){const e=Te();Ae(0),z(1,"div",10),me("click",function(){return ee(e),te(j().tryToCloseWindow())}),G(),xe()}}let C2=class q2{constructor(n){this.fileService=n,this._windowWidth=0,this.isBubbleDelayCompleted=!1,this._bubblestyle=gD.Callout,this._bubbletext="",this.bubblebackgroundcolor="#edefef",this.bubbleforegroundcolor="#414042",this._bubbledelay=3,this._addgloweffect=!1,this._brandlogo="data:image/png;base64,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",this.identifier="",this.knowledgebaseid="",this.instanceurl="",this._title="CloudApper AI",this._userName="user123",this._botName="AI Assistant",this._userTextColor="#414042",this._botTextColor="#414042",this._userLabelColor="#939598",this._botLabelColor="#00aaff",this._userBackgroundColor="#edefef",this._botBackgroundColor="#FFFFFF",this._chatWindowColor="#f2f2f2",this._chatPrimaryColor="#f2f2f2",this._chatOnPrimaryColor="#f2f2f2",this._cancelOnTouchOutside=!1,this.initialParameter=new pD("CloudApper AI","user0123","AI Assistant",new hD("#1960d1","#ffffff","#FFFFFF"),{},!1),this.chatBoxClass="chat-box-container",this.chatBoxBubbleClass="chat-box-bubble",this.chatBubbleTextClass="chat-box-bubble-text",this.chatContainerBubbleClass="chat-container-bubble",this._windowPosition=Ob.BottomRight,this.welcomemessages=[],this.showChatWindow=!1,this.minimized=!1,this.closed=!1,this.Assets=yi,this.chatDataService=new Lb,this.chatService=new Qm(this.chatDataService),this.setupChatWindowClass(this.windowposition),this.updateUserColorProfile(),this.updateBotColorProfile()}get windowWidth(){return this._windowWidth}set windowWidth(n){this._windowWidth=n,this.changeScrollState(!(this.showChatWindow&&n>480&&this.cancelontouchoutside))}onResize(n){this.windowWidth=window.innerWidth}ngAfterViewInit(){setTimeout(()=>{this.isBubbleDelayCompleted=!0,this.bubbletext.trim().length>0&&this.resetGlowEffect()},1e3*this.bubbledelay),this.windowWidth=window.innerWidth}ngOnChanges(n){(n.identifier||n.knowledgebaseId||n.aiURL)&&(this.identifier&&this.identifier.trim().length>0&&this.instanceurl&&this.instanceurl.trim()?(this.chatDataService=new zF(this.instanceurl.trim(),this.identifier.trim(),this.knowledgebaseid?this.knowledgebaseid.trim():""),this.fileService.updateEndpoint(this.instanceurl.trim(),this.identifier.trim())):this.chatDataService=new Lb,this.chatService=new Qm(this.chatDataService))}get bubblestyle(){return this._bubblestyle}set bubblestyle(n){this._bubblestyle=n,this.setupChatWindowClass(this.windowposition)}get bubbletext(){return this._bubbletext}set bubbletext(n){this._bubbletext=n,n.trim().length>0&&this.resetGlowEffect()}get bubbledelay(){return this._bubbledelay}set bubbledelay(n){n>1&&(this._bubbledelay=n)}get addgloweffect(){return this._addgloweffect}set addgloweffect(n){this._addgloweffect=n,this.setupChatWindowClass(this.windowposition)}get brandlogo(){return this._brandlogo}set brandlogo(n){this._brandlogo=n}get title(){return this._title}set title(n){this._title=n,this.initialParameter.title=n}get username(){return this._userName}set username(n){this._userName=n,this.initialParameter.userName=n}get botname(){return this._botName}set botname(n){this._botName=n,this.initialParameter.botName=n}get usertextcolor(){return this._userTextColor}set usertextcolor(n){this._userTextColor=n,this.updateUserColorProfile()}get bottextcolor(){return this._botTextColor}set bottextcolor(n){this._botTextColor=n,this.updateBotColorProfile()}get userlabelcolor(){return this._userLabelColor}set userlabelcolor(n){this._userLabelColor=n,this.updateUserColorProfile()}get botlabelcolor(){return this._botLabelColor}set botlabelcolor(n){this._botLabelColor=n,this.updateBotColorProfile()}get userbackgroundcolor(){return this._userBackgroundColor}set userbackgroundcolor(n){this._userBackgroundColor=n,this.updateUserColorProfile()}get botbackgroundcolor(){return this._botBackgroundColor}set botbackgroundcolor(n){this._botBackgroundColor=n,this.updateBotColorProfile()}get chatwindowcolor(){return this._chatWindowColor}set chatwindowcolor(n){this._chatWindowColor=n,this.initialParameter.windowColors.secondaryColor=n}get chatprimarycolor(){return this._chatPrimaryColor}set chatprimarycolor(n){this._chatPrimaryColor=n,this.initialParameter.windowColors.primaryColor=n}get chatonprimarycolor(){return this._chatOnPrimaryColor}set chatonprimarycolor(n){this._chatOnPrimaryColor=n,this.initialParameter.windowColors.onPrimaryColor=n}get cancelontouchoutside(){return this._cancelOnTouchOutside}set cancelontouchoutside(n){this._cancelOnTouchOutside=n,this.initialParameter.cancelOnClickOutside=n}changeScrollState(n){if(n)window.onscroll=function(){};else{const e=window.pageYOffset||document.documentElement.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(r,e)}}}get initmsg(){return this._initMsg}set initmsg(n){this._initMsg=n}get windowposition(){return this._windowPosition}set windowposition(n){this._windowPosition=n,this.setupChatWindowClass(n)}setupChatWindowClass(n){switch(this.chatBoxBubbleClass=this.bubblestyle===gD.Callout?"chat-box-bubble-callout":"chat-box-bubble",n){case Ob.BottomLeft:this.chatBoxClass="chat-box-container chat-box-container-left",this.chatBoxBubbleClass+=" chat-box-bubble-left",this.chatBubbleTextClass="chat-box-bubble-text chat-box-bubble-text-left",this.chatContainerBubbleClass="chat-container-bubble chat-container-bubble-left";break;case Ob.BottomRight:this.chatBoxClass="chat-box-container chat-box-container-right",this.chatBoxBubbleClass+=" chat-box-bubble-right",this.chatBubbleTextClass="chat-box-bubble-text chat-box-bubble-text-right",this.chatContainerBubbleClass="chat-container-bubble chat-container-bubble-right"}this.addgloweffect&&(this.chatBoxBubbleClass+=" chat-box-bubble-animation")}resetGlowEffect(){this.addgloweffect&&(this.showChatWindow||this.isBubbleDelayCompleted&&this.bubbletext.trim().length>0)&&(this.addgloweffect=!1,this.setupChatWindowClass(this.windowposition))}updateUserColorProfile(){this.initialParameter.userColors[Ui.UserId]=new Uh(this.userlabelcolor,this.usertextcolor,this.userbackgroundcolor)}updateBotColorProfile(){this.initialParameter.userColors[Ui.BotId]=new Uh(this.botlabelcolor,this.bottextcolor,this.botbackgroundcolor)}onReceiveUserReply(n){if(n&&this.chatService){const e=pa();let r=!1;this.replyId=e,this.replyMessage=void 0;const i=this.chatService.submitUserReplyToBOT(n,()=>{r=!0,this.replyId=void 0,this.chatBox&&this.chatBox.setReadyForUserReply(!0),this.subscription=void 0});this.subscription=i.pipe(yF(()=>!r||this.closed),Xt(this)).subscribe({next:o=>{switch(o.isError){case!0:this.chatBox&&this.chatBox.addWarningfromBot(e,o.error.message);break;case!1:this.chatBox&&o.result&&(this.replyMessage=o.result.message,o.result.action?this.chatBox.addActionReplyFromBot(e,o.result.message,o.result.action):this.chatBox.addReplyFromBot(e,o.result.message,void 0,o.result.suggestions))}}})}}onSubmitFileMessage(n){const e=[...n],r=[];e.forEach(i=>{i.uploadStatus!==ro.Uploaded&&r.push(this.fileService.uploadfile(i))}),PF(r.map(i=>i.pipe(Ii(o=>({value:o,timestamp:Date.now()}))))).pipe(Xt(this)).subscribe({next:i=>{const o=i.reduce((a,u)=>!a||u.timestamp>a.timestamp?u:a),s=e.findIndex(a=>a.id===o.value.id);-1!==s&&e.splice(s,1,o.value),this.chatBox&&this.chatBox.updateFileInformation(o.value)},complete:()=>{void 0!==e.find(o=>o.uploadError)||this.chatBox&&this.chatBox.addFileResponseFromUser(e)}})}onCancelUserRequest(){this.chatBox&&this.replyId&&(this.replyMessage=this.replyMessage||"",this.chatBox.addReplyFromBot(this.replyId,this.replyMessage)),this.subscription?.unsubscribe(),this.subscription=void 0}tryToCloseWindow(){this.initialParameter.cancelOnClickOutside&&this.closeChatWindow()}openChatWindow(){this.showChatWindow=!0,this.resetGlowEffect(),this.bubbletext="",this.changeScrollState(this.windowWidth>480&&!this.cancelontouchoutside),setTimeout(()=>{if(this.chatBox&&!this.minimized){this.closed=!1,this.chatBox.reset(),this.chatService?.clearChatHistory();let n="";if(this.initmsg&&!Ub(this.initmsg))return void this.chatBox.submitMessageWithoutShowing(this.initmsg);if(this.welcomemessages.length>0){const e=Math.floor(Math.random()*(this.welcomemessages.length-1));n=this.welcomemessages[e]}else n="Hello, how can I help you today?";this.chatBox.addReplyFromBot(pa(),n,this.suggestionmessages)}},100)}closeChatWindow(n=!1){this.chatBox&&(n?this.minimized=!0:(this.chatBox.reset(),this.minimized=!1,this.closed=!0),this.showChatWindow=!1,this.changeScrollState(!0))}static#e=this.\u0275fac=function(e){return new(e||q2)(ve(e3))};static#t=this.\u0275cmp=bt({type:q2,selectors:[["ca-ai-chat-popup-container"]],viewQuery:function(e,r){if(1&e&&dr(Xae,5),2&e){let i;fr(i=hr())&&(r.chatBox=i.first)}},hostBindings:function(e,r){1&e&&me("resize",function(o){return r.onResize(o)},0,Yg)},inputs:{bubblestyle:"bubblestyle",bubbletext:"bubbletext",bubblebackgroundcolor:"bubblebackgroundcolor",bubbleforegroundcolor:"bubbleforegroundcolor",bubbledelay:"bubbledelay",addgloweffect:"addgloweffect",brandlogo:"brandlogo",identifier:"identifier",knowledgebaseid:"knowledgebaseid",instanceurl:"instanceurl",title:"title",username:"username",botname:"botname",usertextcolor:"usertextcolor",bottextcolor:"bottextcolor",userlabelcolor:"userlabelcolor",botlabelcolor:"botlabelcolor",userbackgroundcolor:"userbackgroundcolor",botbackgroundcolor:"botbackgroundcolor",chatwindowcolor:"chatwindowcolor",chatprimarycolor:"chatprimarycolor",chatonprimarycolor:"chatonprimarycolor",cancelontouchoutside:"cancelontouchoutside",initmsg:"initmsg",windowposition:"windowposition",welcomemessages:"welcomemessages",suggestionmessages:"suggestionmessages"},features:[nu],decls:13,vars:40,consts:[["chatBox",""],[4,"ngIf"],[1,"container"],[3,"className"],[3,"click","className","ngStyle"],["alt","brand-logo","srcset","",3,"src"],[3,"className","ngStyle"],["alt","cancel-icon","srcset","",3,"src"],[2,"width","100%","height","100%"],[3,"cancelUserRequest","userReplySubmitted","submitFileMessage","chatMinimizeRequestReceived","initialParameters","allowMinimize"],[1,"chat-container-background",3,"click"]],template:function(e,r){if(1&e){const i=Te();_e(0,Zae,2,0,"ng-container",1),z(1,"div",2)(2,"div",3)(3,"div",4),me("click",function(){return ee(i),te(r.openChatWindow())}),Fe(4,"img",5),G(),z(5,"div",6),we(6),G(),z(7,"div",4),me("click",function(){return ee(i),te(r.closeChatWindow())}),Fe(8,"img",7),G()(),z(9,"div",6)(10,"div",8)(11,"ca-chat-box",9,0),me("cancelUserRequest",function(){return ee(i),te(r.onCancelUserRequest())})("userReplySubmitted",function(s){return ee(i),te(r.onReceiveUserReply(s))})("submitFileMessage",function(s){return ee(i),te(r.onSubmitFileMessage(s))})("chatMinimizeRequestReceived",function(){return ee(i),te(r.closeChatWindow(!0))}),G()()()()}2&e&&(U("ngIf",r.showChatWindow&&r.initialParameter.cancelOnClickOutside),M(),Xn("--chat-box-primary-color",r.initialParameter.windowColors.primaryColor)("--chat-box-on-primary-color",r.initialParameter.windowColors.onPrimaryColor)("--bubble-background-color",r.bubblebackgroundcolor)("--bubble-foreground-color",r.bubbleforegroundcolor)("--suggestion-border-color",r.botlabelcolor)("--suggestion-foreground-color",r.bottextcolor)("--suggestion-border-color-hover",r.bottextcolor)("--suggestion-foreground-color-hover",r.botlabelcolor),M(),U("className",r.chatContainerBubbleClass),M(),U("className",r.chatBoxBubbleClass)("ngStyle",Wn(31,x2,r.showChatWindow?"none":"flex")),M(),U("src",r.brandlogo,He),M(),U("className",r.chatBubbleTextClass)("ngStyle",Wn(33,x2,r.showChatWindow||!r.isBubbleDelayCompleted||r.bubbletext.trim().length<1?"none":"inline-block")),M(),Ts(" ",r.bubbletext," "),M(),U("className",r.chatBoxBubbleClass)("ngStyle",K1(35,Jae,r.initialParameter.windowColors.primaryColor,r.showChatWindow?"flex":"none")),M(),U("src",r.Assets.Images.Cancel,He),M(),U("className",r.chatBoxClass)("ngStyle",Wn(38,x2,r.showChatWindow?"block":"none")),M(2),U("initialParameters",r.initialParameter)("allowMinimize",!0))},dependencies:[gr,Oh,Pj],styles:['@import"https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600&display=swap";html{font-weight:300;font-size:14px}.container{all:initial;--bubble-background-color: "#edefef";--bubble-foreground-color: "#414042";--chat-box-primary-color: "#edefef";--chat-box-on-primary-color: "white";--suggestion-border-color: blue;--suggestion-foreground-color: black;--suggestion-border-color-hover: blue;--suggestion-foreground-color-hover: black;--font-family: "Be Vietnam Pro", sans-serif;--default-text-color: #0a0a11;--default-text-color-light: #090910cc;--default-text-color-lighter: #09091080;font-size:14px;line-height:24px}*{font-family:var(--font-family)!important;-webkit-font-smoothing:antialiased!important;font-variation-settings:normal!important}h1{font-size:26px!important;font-weight:400!important;color:var(--default-text-color)!important}h2{font-size:24px;font-weight:400!important;color:var(--default-text-color)!important}h3{font-size:22px;font-weight:400!important;color:var(--default-text-color)!important}h4{font-size:20px;font-weight:400!important;color:var(--default-text-color)!important}h5{font-size:18px;font-weight:400!important;color:var(--default-text-color)!important}.chat-container-background{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff1;z-index:18000}@media screen and (max-width: 480px){.container{font-size:16px;line-height:22px!important}}\n',".chat-box-container{height:80%;aspect-ratio:1.2/2;position:fixed;z-index:20000;border-radius:16px;overflow:hidden;animation:chat-container-grow .5s ease;box-shadow:#64646f33 0 7px 29px;min-width:360px}.chat-box-container-left{bottom:120px;left:64px}.chat-box-container-right{bottom:120px;right:64px}@keyframes chat-container-grow{0%{height:0%;transform:scale(0) translate(100%,100%)}10%{height:0%;transform:scale(.01) translateY(100%)}to{height:80%;transform:scale(1) translate(0)}}@media screen and (max-width:480px){.chat-box-container{width:100%;height:100%;border-radius:0;animation:chat-container-grow-small .5s ease}.chat-box-container-left{bottom:0;left:0}.chat-box-container-right{bottom:0;right:0}@keyframes chat-container-grow-small{0%{height:0%;transform:scale(0) translate(100%,100%)}10%{height:0%;transform:scale(.01) translateY(100%)}to{height:100%;transform:scale(1) translate(0)}}}\n",'.chat-box-bubble,.chat-box-bubble-callout{display:flex;position:absolute;justify-content:center;align-items:center;width:56px;height:56px;border-radius:50%;box-shadow:#6b6b6e33 0 7px 29px;transform:scale(1);transition:all .3s ease-in-out;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;background-color:var(--chat-box-primary-color)}.chat-box-bubble-callout:before{content:"";position:absolute;bottom:0;left:0;border-width:16px;border-radius:25%;border-style:solid;border-color:transparent transparent var(--chat-box-primary-color) transparent}.chat-box-bubble:hover,.chat-box-bubble-callout:hover{transform:scale(1.1)}@keyframes glow-bubble{0%{opacity:.9;transform:scale(1)}50%{opacity:1;transform:scale(1.1)}to{opacity:.9;transform:scale(1)}}.chat-box-bubble-animation{animation-name:glow-bubble;animation-duration:2s;animation-delay:.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite}.chat-box-bubble img,.chat-box-bubble-callout img{max-width:36px;animation:chat-box-bubble-img-animation .3s linear}@keyframes chat-box-bubble-img-animation{to{transform:scale(1)}0%{transform:scale(0)}}.chat-box-bubble-left{bottom:0;left:-12px}.chat-box-bubble-right{bottom:0;right:-12px}.chat-box-bubble-text{z-index:20000;position:absolute;bottom:50%;transform:translateY(50%);background-color:var(--bubble-background-color);color:var(--bubble-foreground-color);padding:10px 20px;border-radius:10px;width:max-content;max-width:200px}.chat-box-bubble-text-left{left:64px;animation:chat-bubble-text-grow-left .5s ease-in-out}.chat-box-bubble-text-right{right:64px;animation:chat-bubble-text-grow-right .5s ease-in-out}.chat-box-bubble-text-left:before{content:"";position:absolute;left:-10px;top:50%;border-width:10px;border-style:solid;border-color:var(--bubble-background-color) transparent transparent transparent;transform:translateY(-50%)}.chat-box-bubble-text-right:before{content:"";position:absolute;right:-10px;top:50%;border-width:10px;border-style:solid;border-color:var(--bubble-background-color) transparent transparent transparent;transform:translateY(-50%)}@keyframes chat-bubble-text-grow-left{0%{transform:scaleX(0) translateY(50%);opacity:0}10%{opacity:0;transform:scaleX(0) translate(-100%)}to{opacity:1;transform:scaleX(1) translate(0) translateY(50%)}}@keyframes chat-bubble-text-grow-right{0%{transform:scaleX(0) translateY(50%);opacity:0}10%{opacity:0;transform:scaleX(0) translate(100%)}to{opacity:1;transform:scaleX(1) translate(0) translateY(50%)}}.chat-container-bubble{width:48px;height:48px;position:fixed;z-index:20000}.chat-container-bubble-left{bottom:48px;left:64px}.chat-container-bubble-right{bottom:48px;right:64px}@media screen and (max-width:480px){.chat-container-bubble-left{bottom:24px;left:32px}.chat-container-bubble-right{bottom:24px;right:32px}}\n'],encapsulation:3})};C2=vi([ji()],C2);const ox={schedule(t,n){const e=setTimeout(t,n);return()=>clearTimeout(e)},scheduleBeforeRender(t){if(typeof window>"u")return ox.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return ox.schedule(t,16);const n=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(n)}};let _2;function aue(t,n,e){let r=e;return function eue(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&n.some((i,o)=>!("*"===i||!function nue(t,n){if(!_2){const e=Element.prototype;_2=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&_2.call(t,n)}(t,i)||(r=o,0))),r}class cue{constructor(n,e){this.componentFactory=e.get(ch).resolveComponentFactory(n)}create(n){return new lue(this.componentFactory,n)}}class lue{constructor(n,e){this.componentFactory=n,this.injector=e,this.eventEmitters=new FU(1),this.events=this.eventEmitters.pipe(QS(r=>NU(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(tn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(n){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(n)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=ox.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(n){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(n):this.componentRef.instance[n])}setInputValue(n,e,r){this.runInZone(()=>{r&&(e=r.call(this.componentRef?.instance,e)),null!==this.componentRef?function rue(t,n){return t===n||t!=t&&n!=n}(e,this.getInputValue(n))&&(void 0!==e||!this.unchangedInputs.has(n))||(this.recordInputChange(n,e),this.unchangedInputs.delete(n),this.hasInputChanges=!0,this.componentRef.instance[n]=e,this.scheduleDetectChanges()):this.initialInputValues.set(n,e)})}initializeComponent(n){const e=cn.create({providers:[],parent:this.injector}),r=function sue(t,n){const e=t.childNodes,r=n.map(()=>[]);let i=-1;n.some((o,s)=>"*"===o&&(i=s,!0));for(let o=0,s=e.length;o<s;++o){const a=e[o],u=aue(a,n,i);-1!==u&&r[u].push(a)}return r}(n,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(e,r,n),this.viewChangeDetectorRef=this.componentRef.injector.get(km),this.implementsOnChanges=function tue(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Nc).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:n,transform:e})=>{this.initialInputValues.has(n)&&this.setInputValue(n,this.initialInputValues.get(n),e)}),this.initialInputValues.clear()}initializeOutputs(n){const e=this.componentFactory.outputs.map(({propName:r,templateName:i})=>n.instance[r].pipe(Ii(s=>({name:i,value:s}))));this.eventEmitters.next(e)}callNgOnChanges(n){if(!this.implementsOnChanges||null===this.inputChanges)return;const e=this.inputChanges;this.inputChanges=null,n.instance.ngOnChanges(e)}markViewForCheck(n){this.hasInputChanges&&(this.hasInputChanges=!1,n.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=ox.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(n,e){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const r=this.inputChanges[n];if(r)return void(r.currentValue=e);const i=this.unchangedInputs.has(n),o=i?void 0:this.getInputValue(n);this.inputChanges[n]=new Ty(o,e,i)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(n){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(n):n()}}class due extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function Oj(t,n){const e=function oue(t,n){return n.get(ch).resolveComponentFactory(t).inputs}(t,n.injector),r=n.strategyFactory||new cue(t,n.injector),i=function iue(t){const n={};return t.forEach(({propName:e,templateName:r,transform:i})=>{n[function $ae(t){return t.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}(r)]=[e,i]}),n}(e);class o extends due{static#e=this.observedAttributes=Object.keys(i);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=r.create(this.injector||n.injector);e.forEach(({propName:u,transform:c})=>{if(!this.hasOwnProperty(u))return;const l=this[u];delete this[u],a.setInputValue(u,l,c)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,u,c,l){const[f,p]=i[a];this.ngElementStrategy.setInputValue(f,c,p)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const u=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(u)})}}return e.forEach(({propName:s,transform:a})=>{Object.defineProperty(o.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(u){this.ngElementStrategy.setInputValue(s,u,a)},configurable:!0,enumerable:!0})}),o}const fue=["simplechatBox"];let E2=class G2{constructor(n){this.fileService=n,this._identifier="",this._knowledgebaseid="",this._instanceurl="",this._title="CloudApper AI",this._userName="user123",this._botName="AI Assistant",this._userTextColor="#414042",this._botTextColor="#414042",this._userLabelColor="#939598",this._botLabelColor="#0393db",this._userBackgroundColor="#edefef",this._botBackgroundColor="#FFFFFF",this.initialParameter=new pD("CloudApper AI","user0123","AI Assistant",new hD("#0393db","#ffffff","#FFFFFF"),{},!1),this._welcomemessages=[],this._suggestionmessages=void 0,this.initateRequest=new Qe(void 0),this.chatService=new Qm(new Lb),this.updateUserColorProfile(),this.updateBotColorProfile()}ngOnInit(){this.initateRequest.pipe(Xt(this),rx(100),Wh()).subscribe(()=>{if(this.chatBox?.reset(),this.initmsg&&this.initmsg.length)this.chatBox?.submitMessageWithoutShowing(this.initmsg);else if(this.welcomemessages.length){const n=Math.round(Math.random()*(this.welcomemessages.length-1));this.chatBox?.addReplyFromBot(pa(),this.welcomemessages[n],this.suggestionmessages)}})}ngAfterViewInit(){this.initiateChatMessages()}setupChatDataService(){this.instanceurl.trim().length>0&&this.identifier.trim().length>0?(this.chatService=new Qm(new zF(this.instanceurl,this.identifier,this.knowledgebaseid)),this.fileService.updateEndpoint(this.instanceurl,this.identifier)):this.chatService=new Qm(new Lb)}get identifier(){return this._identifier}set identifier(n){this._identifier=n,this.setupChatDataService()}get knowledgebaseid(){return this._knowledgebaseid}set knowledgebaseid(n){this._knowledgebaseid=n,this.setupChatDataService()}get instanceurl(){return this._instanceurl}set instanceurl(n){this._instanceurl=n,this.setupChatDataService()}get title(){return this._title}set title(n){this._title=n,this.initialParameter.title=n}get username(){return this._userName}set username(n){this._userName=n,this.initialParameter.userName=n}get botname(){return this._botName}set botname(n){this._botName=n,this.initialParameter.botName=n}get usertextcolor(){return this._userTextColor}set usertextcolor(n){this._userTextColor=n,this.updateUserColorProfile()}get bottextcolor(){return this._botTextColor}set bottextcolor(n){this._botTextColor=n,this.updateBotColorProfile()}get userlabelcolor(){return this._userLabelColor}set userlabelcolor(n){this._userLabelColor=n,this.updateUserColorProfile()}get botlabelcolor(){return this._botLabelColor}set botlabelcolor(n){this._botLabelColor=n,this.updateBotColorProfile()}get userbackgroundcolor(){return this._userBackgroundColor}set userbackgroundcolor(n){this._userBackgroundColor=n,this.updateUserColorProfile()}get botbackgroundcolor(){return this._botBackgroundColor}set botbackgroundcolor(n){this._botBackgroundColor=n,this.updateBotColorProfile()}get initmsg(){return this._initMsg}set initmsg(n){this._initMsg=n,this.initiateChatMessages()}updateUserColorProfile(){this.initialParameter.userColors[Ui.UserId]=new Uh(this.userlabelcolor,this.usertextcolor,this.userbackgroundcolor)}updateBotColorProfile(){this.initialParameter.userColors[Ui.BotId]=new Uh(this.botlabelcolor,this.bottextcolor,this.botbackgroundcolor)}onReceiveUserReply(n){if(n&&this.chatService){const e=pa();let r=!1;this.replyId=e,this.replyMessage=void 0;const i=this.chatService.submitUserReplyToBOT(n,()=>{r=!0,this.replyId=void 0,this.chatBox&&this.chatBox.setReadyForUserReply(!0),this.subscription=void 0});this.subscription=i.pipe(yF(()=>!r)).subscribe({next:o=>{switch(o.isError){case!0:this.chatBox&&this.chatBox.addWarningfromBot(e,o.error.message);break;case!1:this.chatBox&&o.result&&(this.replyMessage=o.result.message,o.result.action?this.chatBox.addActionReplyFromBot(e,o.result.message,o.result.action):this.chatBox.addReplyFromBot(e,o.result.message,void 0,o.result.suggestions))}}})}}onSubmitFileMessage(n){const e=[...n],r=[];e.forEach(i=>{i.uploadStatus!==ro.Uploaded&&r.push(this.fileService.uploadfile(i))}),PF(r.map(i=>i.pipe(Ii(o=>({value:o,timestamp:Date.now()}))))).pipe(Xt(this)).subscribe({next:i=>{const o=i.reduce((a,u)=>!a||u.timestamp>a.timestamp?u:a),s=e.findIndex(a=>a.id===o.value.id);-1!==s&&e.splice(s,1,o.value),this.chatBox&&this.chatBox.updateFileInformation(o.value)},complete:()=>{void 0!==e.find(o=>o.uploadError)||this.chatBox&&this.chatBox.addFileResponseFromUser(e)}})}onCancelUserRequest(){this.chatBox&&this.replyId&&(this.replyMessage=this.replyMessage||"",this.chatBox.addReplyFromBot(this.replyId,this.replyMessage)),this.subscription?.unsubscribe(),this.subscription=void 0}get welcomemessages(){return this._welcomemessages}set welcomemessages(n){this._welcomemessages=n,this.initiateChatMessages()}get suggestionmessages(){return this._suggestionmessages}set suggestionmessages(n){this._suggestionmessages=n,this.initiateChatMessages()}initiateChatMessages(){this.initateRequest.next(pa())}static#e=this.\u0275fac=function(e){return new(e||G2)(ve(e3))};static#t=this.\u0275cmp=bt({type:G2,selectors:[["ca-chat-container"]],viewQuery:function(e,r){if(1&e&&dr(fue,5),2&e){let i;fr(i=hr())&&(r.chatBox=i.first)}},inputs:{identifier:"identifier",knowledgebaseid:"knowledgebaseid",instanceurl:"instanceurl",title:"title",username:"username",botname:"botname",usertextcolor:"usertextcolor",bottextcolor:"bottextcolor",userlabelcolor:"userlabelcolor",botlabelcolor:"botlabelcolor",userbackgroundcolor:"userbackgroundcolor",botbackgroundcolor:"botbackgroundcolor",initmsg:"initmsg",welcomemessages:"welcomemessages",suggestionmessages:"suggestionmessages"},decls:3,vars:14,consts:[["simplechatBox",""],[1,"chat-box-container"],[3,"userReplySubmitted","cancelUserRequest","submitFileMessage","initialParameters","allowMinimize"]],template:function(e,r){if(1&e){const i=Te();z(0,"div",1)(1,"ca-chat-box",2,0),me("userReplySubmitted",function(s){return ee(i),te(r.onReceiveUserReply(s))})("cancelUserRequest",function(){return ee(i),te(r.onCancelUserRequest())})("submitFileMessage",function(s){return ee(i),te(r.onSubmitFileMessage(s))}),G()()}2&e&&(Xn("--chat-box-primary-color",r.initialParameter.windowColors.primaryColor)("--chat-box-on-primary-color",r.initialParameter.windowColors.onPrimaryColor)("--suggestion-border-color",r.botlabelcolor)("--suggestion-foreground-color",r.bottextcolor)("--suggestion-border-color-hover",r.bottextcolor)("--suggestion-foreground-color-hover",r.botlabelcolor),M(),U("initialParameters",r.initialParameter)("allowMinimize",!1))},dependencies:[Pj],styles:['@import"https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600&display=swap";html{font-weight:300;font-size:14px}.chat-box-container{box-shadow:#64646f33 0 7px 29px;border-radius:16px;overflow:hidden;height:100%;width:100%;--chat-box-primary-color: "#edefef";--chat-box-on-primary-color: "white";--suggestion-border-color: blue;--suggestion-foreground-color: black;--suggestion-border-color-hover: blue;--suggestion-foreground-color-hover: black;--font-family: "Be Vietnam Pro", sans-serif;--default-text-color: #0a0a11;--default-text-color-light: #090910cc;--default-text-color-lighter: #09091080;font-size:14px;line-height:24px}*{font-family:var(--font-family)!important;-webkit-font-smoothing:antialiased!important;font-variation-settings:normal!important}h1{font-size:26px!important;font-weight:400!important;color:var(--default-text-color)!important}h2{font-size:24px;font-weight:400!important;color:var(--default-text-color)!important}h3{font-size:22px;font-weight:400!important;color:var(--default-text-color)!important}h4{font-size:20px;font-weight:400!important;color:var(--default-text-color)!important}h5{font-size:18px;font-weight:400!important;color:var(--default-text-color)!important}@media screen and (max-width: 480px){.chat-box-container{border-radius:0}}@media screen and (max-width: 768px){.chat-box-container{font-size:16px}}\n'],encapsulation:3})};E2=vi([ji()],E2);let hue=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({imports:[Zn]})}return t})();class Ma{constructor(n,e,r,i){this.value=n,this.serverError=e,this.networkError=r,this.localError=i}static ok(n){return new Ma(n)}static serverError(n){return new Ma(void 0,n)}static networkError(n){return new Ma(void 0,void 0,n)}static localError(n){return new Ma(void 0,void 0,void 0,n)}getError(){return this.serverError?this.serverError:this.networkError?this.networkError:this.localError?this.localError:null}}class Ld{constructor(n,e){switch(this.code=n,this.message=e,this.errorType=Gn.UnKnown,n){case 1e3:case 4e3:this.errorType=Gn.EmailAlreadyTaken;break;case 1008:this.errorType=Gn.UnableToClearUserRecord;break;case 1001:this.errorType=Gn.UnableToStoreUserRecord;break;case 404:this.errorType=Gn.ResourceUnavailable;break;case 409:this.errorType=Gn.UniqueDataViolation;break;case 401:this.errorType=Gn.Unauthorized;break;case 400:this.errorType=Gn.InvalidRequestFormat;break;case 413:this.errorType=Gn.PayloadTooLargeError;break;case 415:this.errorType=Gn.UnsupportedFileFormatError;break;case 500:this.errorType=Gn.InternalServerError;break;case 1009:this.errorType=Gn.UserCountLimitReached;break;case 2e3:this.errorType=Gn.QueueLimitReached;break;case 2001:this.errorType=Gn.ActiveQueueItemFound;break;case 297:this.errorType=Gn.CompanyNameIsAlreadyTaken;break;case 502:this.errorType=Gn.ServiceIsUnavailable;break;case 2007:this.errorType=Gn.UpdatedVersionOfRecordAvailable;break;case 4003:this.errorType=Gn.DeviceIdisAlreadyRegistered;break;case 5004:this.errorType=Gn.SubscriptionHasExpired;break;case 2011:this.errorType=Gn.NoLayoutMapAvailable;break;case 3002:this.errorType=Gn.RecordWasSavedAndDeleted;break;case 2013:this.errorType=Gn.OneToOneRelationViolation}}getErrorMessage(){switch(this.code){case 1e3:case 4e3:return"This email address is already taken.";case 1008:return"We were unable to remove this user record";case 1001:return"We were unable to save this user record.";case 401:return"You are not authorized for this operation.";case 404:return"The data you are looking for isn't available.";case 413:return"Exceeds maximum file size.";case 415:return"Unsupported file format.";case 409:return"We encountered problem with unique property validation.";case 400:return"The request format isn't in the correct format.";case 500:return"Sorry we encountered an internal server error. Please try again later.";case 1009:return"You have reached the limit of user count";case 2e3:return"You have reached the limit of item in the queue";case 2001:return"There is already an active item in the queue";case 297:return"This company name is already taken";case 404:return"The data you requested is not available.";case 502:return"Service is unavailable, please try again later";case 2007:return"There is an updated version of this record";case 4001:return"User found but not attached yet.";case 4003:return"Device is already registered";case 5004:return"Subscription expired. Please update your subscription.";case 2e3:return"Queue limit reached. Please try again later.";case 2001:return"This queue is not available.";case 2011:return"There is no linkable layout map data.";case 3002:return"Record saved successfully";case 2013:return"Parent record already has a child.";case 3002:return"Record was saved sucessfully, and then removed after that.";default:return this.message&&this.message.trim()&&this.message.trim().length>0?this.message:0===this.code?"We encounted an internal problem. Please try again later.":`${this.code} - We encounted an internal problem. Please try again later.`}}}var Gn=function(t){return t[t.UnKnown=-1]="UnKnown",t[t.EmailAlreadyTaken=1e3]="EmailAlreadyTaken",t[t.UnableToClearUserRecord=1008]="UnableToClearUserRecord",t[t.UnableToStoreUserRecord=1001]="UnableToStoreUserRecord",t[t.Unauthorized=401]="Unauthorized",t[t.ResourceUnavailable=404]="ResourceUnavailable",t[t.UniqueDataViolation=409]="UniqueDataViolation",t[t.InvalidRequestFormat=400]="InvalidRequestFormat",t[t.PayloadTooLargeError=413]="PayloadTooLargeError",t[t.UnsupportedFileFormatError=415]="UnsupportedFileFormatError",t[t.InternalServerError=500]="InternalServerError",t[t.UserCountLimitReached=1009]="UserCountLimitReached",t[t.QueueLimitReached=2e3]="QueueLimitReached",t[t.ActiveQueueItemFound=2001]="ActiveQueueItemFound",t[t.CompanyNameIsAlreadyTaken=297]="CompanyNameIsAlreadyTaken",t[t.ServiceIsUnavailable=502]="ServiceIsUnavailable",t[t.UpdatedVersionOfRecordAvailable=2007]="UpdatedVersionOfRecordAvailable",t[t.EmailAlreadyTaken2=4e3]="EmailAlreadyTaken2",t[t.UserFoundButNotAttachedYet=4001]="UserFoundButNotAttachedYet",t[t.EmailIsNotRegistered=4002]="EmailIsNotRegistered",t[t.DeviceIdisAlreadyRegistered=4003]="DeviceIdisAlreadyRegistered",t[t.SubscriptionHasExpired=5004]="SubscriptionHasExpired",t[t.NoLayoutMapAvailable=2011]="NoLayoutMapAvailable",t[t.OneToOneRelationViolation=2013]="OneToOneRelationViolation",t[t.RecordWasSavedAndDeleted=3002]="RecordWasSavedAndDeleted",t}(Gn||{});class pue{constructor(n,e){switch(this.code=n,this.message=e,this.errorType=Ud.Unknown,n){case 0:this.errorType=Ud.CORS_ERROR;break;case 404:this.errorType=Ud.ResourceUnavailable;break;case 401:this.errorType=Ud.Unauthorized;break;case 500:this.errorType=Ud.InternalServerError;break;case 502:this.errorType=Ud.ServiceIsUnavailable}}getErrorMessage(){switch(this.code){case 0:return"Oops! It seems there was an issue reaching the server. Our team is actively working to resolve this problem. In the meantime, if you need immediate assistance, please don't hesitate to get in touch with our support team. Thank you for your patience!";case 404:return"The requested resource is not available.";case 401:return"You are not authorized for this";case 500:return"We have encountered an internal problem. Please try again later.";case 502:return"The service is temporarily unavailable. Please try again later.";default:return this.message&&this.message.trim()&&this.message.trim().length>0?this.message:`${this.code} - There is something wrong with the network. Please try again later.`}}}var Ud=function(t){return t[t.CORS_ERROR=0]="CORS_ERROR",t[t.ResourceUnavailable=404]="ResourceUnavailable",t[t.Unauthorized=401]="Unauthorized",t[t.InternalServerError=500]="InternalServerError",t[t.ServiceIsUnavailable=502]="ServiceIsUnavailable",t[t.Unknown=-1]="Unknown",t}(Ud||{});class hp{constructor(n,e,r,i){this.Success=n,this.ResponseCode=e,this.Result=r,this.Message=i}toApiResult(){return this.Success?Ma.ok(this.Result??void 0):Ma.serverError(new Ld(this.ResponseCode,this.Message??void 0))}static from(n){return new hp(n.Success,n.ResponseCode,n.Result,n.Message)}}class D2{constructor(n){this.name=n}getErrorMessage(){switch(this.name){case"NoUserDataIsSet":return"User information not found. Please try again after re-login.";case"NoZoneDataAvailable":return"User zone information was not found. Please try again after re-login.";default:throw new Error("Unknown local error occurred.")}}static#e=this.NoUserDataIsSet=new D2("NoUserDataIsSet");static#t=this.NoZoneDataAvailable=new D2("NoZoneDataAvailable")}let gue=(()=>{class t{constructor(e){this.http=e,this.UploadAPI="api/v2.0/hook/upload-file",this.identifier="",this.FileUploadEndpoint=this.UploadAPI}updateEndpointSetting(e,r){this.FileUploadEndpoint=e.endsWith("/")?`${e}${this.UploadAPI}`:`${e}/${this.UploadAPI}`,this.identifier=r}uploadFile(e){const r=new KQ;r.id=pa(),r.OriginalFileName=e.name,r.FileExtension=HA(e.name)??"",r.FileSizeInKB=parseInt((e.size/1024).toString()),r.FileType=e.type,r.CloudFileType=ZF.RepositoryFile;const i=new Blob([JSON.stringify(r)],{type:"application/json"}),o=new FormData;return o.append("file",e,e.name),o.append("FileInfo",i,"Info"),new Ln(a=>{this.http.post(this.FileUploadEndpoint,o,{headers:{identifier:this.identifier},reportProgress:!0,observe:"events"}).subscribe({next:u=>{if(u){let c;if(u.type===Ta.UploadProgress){const l=Math.round(100*u.loaded/(u.total||0));c=hp.from({Success:!0,ResponseCode:200,Message:`${l}%`,Result:{isUploadProgress:!0,uploadPercent:l}}),a.next(c)}else if(u.type===Ta.Response){if(u.body){const l=hp.from(u.body);if(l.Success){const f={isUploadProgress:!1,url:l.Result?l.Result:""};f.url?(c=hp.from({Success:!0,ResponseCode:200,Message:"File is uploaded successfully.",Result:f}),a.next(c)):a.error(new Ld(400).getErrorMessage())}else a.error(new Ld(l.ResponseCode,l.Message??void 0).getErrorMessage())}else a.error(new Ld(500).getErrorMessage());a.complete()}else c=hp.from({Success:!0,ResponseCode:200,Message:"",Result:null}),a.next(c)}else a.error(new Ld(500).getErrorMessage()),a.complete()},error:u=>{a.error(new pue(u.status,u.message).getErrorMessage()),a.complete()}})})}static#e=this.\u0275fac=function(r){return new(r||t)(je(s2))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mue=(()=>{class t{constructor(e){const r=Oj(C2,{injector:e});customElements.define("chat-popup-container",r);const i=Oj(E2,{injector:e});customElements.define("chat-container",i)}ngDoBootstrap(e){}static#e=this.\u0275fac=function(r){return new(r||t)(je(cn))};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=Si({providers:[{provide:$F,useClass:gue}],imports:[TN,eoe,RK,kj,Zm,mU,hue,zA,boe.forRoot({sanitize:gi.NONE}),WA,EU,DU]})}return t})();RG().bootstrapModule(mue).catch(t=>console.error(t))},376:function(ss,Nu,Oa){var Fu;ss=Oa.nmd(ss),function(){var B,Qr="Expected a function",ct="__lodash_hash_undefined__",jd="__lodash_placeholder__",Uu=1/0,as=9007199254740991,Hi=4294967295,Z2=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ju="[object Arguments]",yp="[object Array]",ol="[object Boolean]",Vd="[object Date]",Wd="[object Error]",wp="[object Function]",Mn="[object GeneratorFunction]",Ei="[object Map]",ja="[object Number]",Bn="[object Object]",bp="[object Promise]",zu="[object RegExp]",Er="[object Set]",Ys="[object String]",sl="[object Symbol]",al="[object WeakMap]",ul="[object ArrayBuffer]",Xs="[object DataView]",us="[object Float32Array]",Vu="[object Float64Array]",xp="[object Int8Array]",cl="[object Int16Array]",Cp="[object Int32Array]",ll="[object Uint8Array]",_p="[object Uint8ClampedArray]",za="[object Uint16Array]",Wu="[object Uint32Array]",fx=/\b__p \+= '';/g,Ep=/\b(__p \+=) '' \+/g,hx=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qd=/&(?:amp|lt|gt|quot|#39);/g,Va=/[&<>"']/g,$2=RegExp(qd.source),Kv=RegExp(Va.source),Ln=/<%-([\s\S]+?)%>/g,Qv=/<%([\s\S]+?)%>/g,Yv=/<%=([\s\S]+?)%>/g,px=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gx=/^\w*$/,Di=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gd=/[\\^$.*+?()[\]{}|]/g,Qe=RegExp(Gd.source),Dp=/^\s+/,jr=/\s/,Yr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mx=/\{\n\/\* \[wrapped with (.+)\] \*/,Ii=/,? & /,eT=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xv=/[()=,{}\[\]\/\s]/,ge=/\\(\\)?/g,Hu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dl=/\w*$/,Jv=/^[-+]0x[0-9a-f]+$/i,tT=/^0b[01]+$/i,nT=/^\[object .+?Constructor\]$/,Zv=/^0o[0-7]+$/i,cs=/^(?:0|[1-9]\d*)$/,qu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ls=/($^)/,Gu=/['\n\r\u2028\u2029\\]/g,fl="\\ud800-\\udfff",kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",vx="\\u2700-\\u27bf",yx="a-z\\xdf-\\xf6\\xf8-\\xff",bx="A-Z\\xc0-\\xd6\\xd8-\\xde",$v="\\ufe0e\\ufe0f",Kd="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qd="["+fl+"]",ni="["+Kd+"]",Tp="["+kt+"]",ey="\\d+",iT="["+vx+"]",ds="["+yx+"]",Ax="[^"+fl+Kd+ey+vx+yx+bx+"]",ty="\\ud83c[\\udffb-\\udfff]",xx="[^"+fl+"]",Mp="(?:\\ud83c[\\udde6-\\uddff]){2}",ny="[\\ud800-\\udbff][\\udc00-\\udfff]",Qu="["+bx+"]",ri="(?:"+ds+"|"+Ax+")",Ze="(?:"+Qu+"|"+Ax+")",_x="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ex="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Dx="(?:"+Tp+"|"+ty+")?",Ix="["+$v+"]?",Si=Ix+Dx+"(?:\\u200d(?:"+[xx,Mp,ny].join("|")+")"+Ix+Dx+")*",Yd="(?:"+[iT,Mp,ny].join("|")+")"+Si,uT="(?:"+[xx+Tp+"?",Tp,Mp,ny,Qd].join("|")+")",ry=RegExp("['\u2019]","g"),Sx=RegExp(Tp,"g"),Yu=RegExp(ty+"(?="+ty+")|"+uT+Si,"g"),Xd=RegExp([Qu+"?"+ds+"+"+_x+"(?="+[ni,Qu,"$"].join("|")+")",Ze+"+"+Ex+"(?="+[ni,Qu+ri,"$"].join("|")+")",Qu+"?"+ri+"+"+_x,Qu+"+"+Ex,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ey,Yd].join("|"),"g"),Rp=RegExp("[\\u200d"+fl+kt+$v+"]"),iy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Tx=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ke=-1,en={};en[us]=en[Vu]=en[xp]=en[cl]=en[Cp]=en[ll]=en[_p]=en[za]=en[Wu]=!0,en[ju]=en[yp]=en[ul]=en[ol]=en[Xs]=en[Vd]=en[Wd]=en[wp]=en[Ei]=en[ja]=en[Bn]=en[zu]=en[Er]=en[Ys]=en[al]=!1;var Zt={};Zt[ju]=Zt[yp]=Zt[ul]=Zt[Xs]=Zt[ol]=Zt[Vd]=Zt[us]=Zt[Vu]=Zt[xp]=Zt[cl]=Zt[Cp]=Zt[Ei]=Zt[ja]=Zt[Bn]=Zt[zu]=Zt[Er]=Zt[Ys]=Zt[sl]=Zt[ll]=Zt[_p]=Zt[za]=Zt[Wu]=!0,Zt[Wd]=Zt[wp]=Zt[al]=!1;var Pp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cT=parseFloat,lT=parseInt,Rx="object"==typeof global&&global&&global.Object===Object&&global,dT="object"==typeof self&&self&&self.Object===Object&&self,nr=Rx||dT||Function("return this")(),Xu=Nu&&!Nu.nodeType&&Nu,Wa=Xu&&ss&&!ss.nodeType&&ss,hl=Wa&&Wa.exports===Xu,Jd=hl&&Rx.process,Yn=function(){try{return Wa&&Wa.require&&Wa.require("util").types||Jd&&Jd.binding&&Jd.binding("util")}catch{}}(),Ju=Yn&&Yn.isArrayBuffer,Op=Yn&&Yn.isDate,nt=Yn&&Yn.isMap,Pt=Yn&&Yn.isRegExp,kx=Yn&&Yn.isSet,sy=Yn&&Yn.isTypedArray;function Ti(K,ae,ie){switch(ie.length){case 0:return K.call(ae);case 1:return K.call(ae,ie[0]);case 2:return K.call(ae,ie[0],ie[1]);case 3:return K.call(ae,ie[0],ie[1],ie[2])}return K.apply(ae,ie)}function fT(K,ae,ie,Se){for(var it=-1,Ot=null==K?0:K.length;++it<Ot;){var _n=K[it];ae(Se,_n,ie(_n),K)}return Se}function qi(K,ae){for(var ie=-1,Se=null==K?0:K.length;++ie<Se&&!1!==ae(K[ie],ie,K););return K}function Np(K,ae){for(var ie=null==K?0:K.length;ie--&&!1!==ae(K[ie],ie,K););return K}function Dt(K,ae){for(var ie=-1,Se=null==K?0:K.length;++ie<Se;)if(!ae(K[ie],ie,K))return!1;return!0}function Bo(K,ae){for(var ie=-1,Se=null==K?0:K.length,it=0,Ot=[];++ie<Se;){var _n=K[ie];ae(_n,ie,K)&&(Ot[it++]=_n)}return Ot}function pl(K,ae){return!(null==K||!K.length)&&co(K,ae,0)>-1}function zr(K,ae,ie){for(var Se=-1,it=null==K?0:K.length;++Se<it;)if(ie(ae,K[Se]))return!0;return!1}function un(K,ae){for(var ie=-1,Se=null==K?0:K.length,it=Array(Se);++ie<Se;)it[ie]=ae(K[ie],ie,K);return it}function Ha(K,ae){for(var ie=-1,Se=ae.length,it=K.length;++ie<Se;)K[it+ie]=ae[ie];return K}function ay(K,ae,ie,Se){var it=-1,Ot=null==K?0:K.length;for(Se&&Ot&&(ie=K[++it]);++it<Ot;)ie=ae(ie,K[it],it,K);return ie}function gl(K,ae,ie,Se){var it=null==K?0:K.length;for(Se&&it&&(ie=K[--it]);it--;)ie=ae(ie,K[it],it,K);return ie}function ml(K,ae){for(var ie=-1,Se=null==K?0:K.length;++ie<Se;)if(ae(K[ie],ie,K))return!0;return!1}var Zd=je("length");function uy(K,ae,ie){var Se;return ie(K,function(it,Ot,_n){if(ae(it,Ot,_n))return Se=Ot,!1}),Se}function vl(K,ae,ie,Se){for(var it=K.length,Ot=ie+(Se?1:-1);Se?Ot--:++Ot<it;)if(ae(K[Ot],Ot,K))return Ot;return-1}function co(K,ae,ie){return ae==ae?function Lp(K,ae,ie){for(var Se=ie-1,it=K.length;++Se<it;)if(K[Se]===ae)return Se;return-1}(K,ae,ie):vl(K,fs,ie)}function Nx(K,ae,ie,Se){for(var it=ie-1,Ot=K.length;++it<Ot;)if(Se(K[it],ae))return it;return-1}function fs(K){return K!=K}function cy(K,ae){var ie=null==K?0:K.length;return ie?yl(K,ae)/ie:NaN}function je(K){return function(ae){return null==ae?B:ae[K]}}function $d(K){return function(ae){return null==K?B:K[ae]}}function qe(K,ae,ie,Se,it){return it(K,function(Ot,_n,$t){ie=Se?(Se=!1,Ot):ae(ie,Ot,_n,$t)}),ie}function yl(K,ae){for(var ie,Se=-1,it=K.length;++Se<it;){var Ot=ae(K[Se]);Ot!==B&&(ie=ie===B?Ot:ie+Ot)}return ie}function qa(K,ae){for(var ie=-1,Se=Array(K);++ie<K;)Se[ie]=ae(ie);return Se}function ly(K){return K&&K.slice(0,lo(K)+1).replace(Dp,"")}function Mi(K){return function(ae){return K(ae)}}function Fp(K,ae){return un(ae,function(ie){return K[ie]})}function Ga(K,ae){return K.has(ae)}function dy(K,ae){for(var ie=-1,Se=K.length;++ie<Se&&co(ae,K[ie],0)>-1;);return ie}function tf(K,ae){for(var ie=K.length;ie--&&co(ae,K[ie],0)>-1;);return ie}var Ka=$d({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Lx=$d({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ii(K){return"\\"+Pp[K]}function Qa(K){return Rp.test(K)}function wl(K){var ae=-1,ie=Array(K.size);return K.forEach(function(Se,it){ie[++ae]=[it,Se]}),ie}function Ux(K,ae){return function(ie){return K(ae(ie))}}function hs(K,ae){for(var ie=-1,Se=K.length,it=0,Ot=[];++ie<Se;){var _n=K[ie];(_n===ae||_n===jd)&&(K[ie]=jd,Ot[it++]=ie)}return Ot}function Bp(K){var ae=-1,ie=Array(K.size);return K.forEach(function(Se){ie[++ae]=Se}),ie}function bl(K){return Qa(K)?function ec(K){for(var ae=Yu.lastIndex=0;Yu.test(K);)++ae;return ae}(K):Zd(K)}function Gi(K){return Qa(K)?function fy(K){return K.match(Yu)||[]}(K):function Px(K){return K.split("")}(K)}function lo(K){for(var ae=K.length;ae--&&jr.test(K.charAt(ae)););return ae}var Rt=$d({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ya=function K(ae){var d,ie=(ae=null==ae?nr:Ya.defaults(nr.Object(),ae,Ya.pick(nr,Tx))).Array,Se=ae.Date,it=ae.Error,Ot=ae.Function,_n=ae.Math,$t=ae.Object,af=ae.RegExp,jx=ae.String,oi=ae.TypeError,uf=ie.prototype,Vr=$t.prototype,cf=ae["__core-js_shared__"],Al=Ot.prototype.toString,qt=Vr.hasOwnProperty,Vx=0,hy=(d=/[^.]+$/.exec(cf&&cf.keys&&cf.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",lf=Vr.toString,py=Al.call($t),Wx=nr._,Hx=af("^"+Al.call(qt).replace(Gd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),df=hl?ae.Buffer:B,bt=ae.Symbol,ff=ae.Uint8Array,gy=df?df.allocUnsafe:B,si=Ux($t.getPrototypeOf,$t),jp=$t.create,ai=Vr.propertyIsEnumerable,gn=uf.splice,ht=bt?bt.isConcatSpreadable:B,En=bt?bt.iterator:B,Dn=bt?bt.toStringTag:B,Lo=function(){try{var d=As($t,"defineProperty");return d({},"",{}),d}catch{}}(),Wr=ae.clearTimeout!==nr.clearTimeout&&ae.clearTimeout,my=Se&&Se.now!==nr.Date.now&&Se.now,vy=ae.setTimeout!==nr.setTimeout&&ae.setTimeout,Xa=_n.ceil,hf=_n.floor,zp=$t.getOwnPropertySymbols,xl=df?df.isBuffer:B,yy=ae.isFinite,Vp=uf.join,wy=Ux($t.keys,$t),Rn=_n.max,Xr=_n.min,Wp=Se.now,qx=ae.parseInt,pf=_n.random,by=uf.reverse,gf=As(ae,"DataView"),fo=As(ae,"Map"),Hp=As(ae,"Promise"),Js=As(ae,"Set"),Zs=As(ae,"WeakMap"),Cl=As($t,"create"),tc=Zs&&new Zs,ps={},ho=ia(gf),nc=ia(fo),qp=ia(Hp),Gx=ia(Js),Kx=ia(Zs),_l=bt?bt.prototype:B,Uo=_l?_l.valueOf:B,Ay=_l?_l.toString:B;function S(d){if(dn(d)&&!at(d)&&!(d instanceof At)){if(d instanceof ui)return d;if(qt.call(d,"__wrapped__"))return au(d)}return new ui(d)}var rc=function(){function d(){}return function(h){if(!on(h))return{};if(jp)return jp(h);d.prototype=h;var v=new d;return d.prototype=B,v}}();function ic(){}function ui(d,h){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=B}function At(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Hi,this.__views__=[]}function Ja(d){var h=-1,v=null==d?0:d.length;for(this.clear();++h<v;){var x=d[h];this.set(x[0],x[1])}}function gs(d){var h=-1,v=null==d?0:d.length;for(this.clear();++h<v;){var x=d[h];this.set(x[0],x[1])}}function Ki(d){var h=-1,v=null==d?0:d.length;for(this.clear();++h<v;){var x=d[h];this.set(x[0],x[1])}}function kn(d){var h=-1,v=null==d?0:d.length;for(this.__data__=new Ki;++h<v;)this.add(d[h])}function It(d){var h=this.__data__=new gs(d);this.size=h.size}function Za(d,h){var v=at(d),x=!v&&Cs(d),D=!v&&!x&&Go(d),T=!v&&!x&&!D&&$i(d),L=v||x||D||T,H=L?qa(d.length,jx):[],Y=H.length;for(var fe in d)(h||qt.call(d,fe))&&(!L||!("length"==fe||D&&("offset"==fe||"parent"==fe)||T&&("buffer"==fe||"byteLength"==fe||"byteOffset"==fe)||bo(fe,Y)))&&H.push(fe);return H}function vn(d){var h=d.length;return h?d[Rl(0,h-1)]:B}function Il(d,h){return su(Sn(d),vo(h,0,d.length))}function ac(d){return su(Sn(d))}function mo(d,h,v){(v!==B&&!Zi(d[h],v)||v===B&&!(h in d))&&Ke(d,h,v)}function ms(d,h,v){var x=d[h];(!qt.call(d,h)||!Zi(x,v)||v===B&&!(h in d))&&Ke(d,h,v)}function Sl(d,h){for(var v=d.length;v--;)if(Zi(d[v][0],h))return v;return-1}function $s(d,h,v,x){return In(d,function(D,T,L){h(x,D,v(D),L)}),x}function Tl(d,h){return d&&Xi(h,vr(h),d)}function Ke(d,h,v){"__proto__"==h&&Lo?Lo(d,h,{configurable:!0,enumerable:!0,value:v,writable:!0}):d[h]=v}function Ml(d,h){for(var v=-1,x=h.length,D=ie(x),T=null==d;++v<x;)D[v]=T?B:z0(d,h[v]);return D}function vo(d,h,v){return d==d&&(v!==B&&(d=d<=v?d:v),h!==B&&(d=d>=h?d:h)),d}function jn(d,h,v,x,D,T){var L,H=1&h,Y=2&h,fe=4&h;if(v&&(L=D?v(d,x,D,T):v(d)),L!==B)return L;if(!on(d))return d;var he=at(d);if(he){if(L=function hC(d){var h=d.length,v=new d.constructor(h);return h&&"string"==typeof d[0]&&qt.call(d,"index")&&(v.index=d.index,v.input=d.input),v}(d),!H)return Sn(d,L)}else{var ne=Vn(d),M=ne==wp||ne==Mn;if(Go(d))return Uy(d,H);if(ne==Bn||ne==ju||M&&!D){if(L=Y||M?{}:Yy(d),!H)return Y?function cC(d,h){return Xi(d,Qy(d),h)}(d,function $a(d,h){return d&&Xi(h,pi(h),d)}(L,d)):function sg(d,h){return Xi(d,Of(d),h)}(d,Tl(L,d))}else{if(!Zt[ne])return D?d:{};L=function pC(d,h,v){var x=d.constructor;switch(h){case ul:return ig(d);case ol:case Vd:return new x(+d);case Xs:return function uC(d,h){var v=h?ig(d.buffer):d.buffer;return new d.constructor(v,d.byteOffset,d.byteLength)}(d,v);case us:case Vu:case xp:case cl:case Cp:case ll:case _p:case za:case Wu:return ee(d,v);case Ei:return new x;case ja:case Ys:return new x(d);case zu:return function le(d){var h=new d.constructor(d.source,dl.exec(d));return h.lastIndex=d.lastIndex,h}(d);case Er:return new x;case sl:return function xt(d){return Uo?$t(Uo.call(d)):{}}(d)}}(d,ne,H)}}T||(T=new It);var Ne=T.get(d);if(Ne)return Ne;T.set(d,L),Vg(d)?d.forEach(function(Je){L.add(jn(Je,h,v,Je,d,T))}):Ug(d)&&d.forEach(function(Je,Ct){L.set(Ct,jn(Je,h,v,Ct,d,T))});var pt=he?B:(fe?Y?Pf:kf:Y?pi:vr)(d);return qi(pt||d,function(Je,Ct){pt&&(Je=d[Ct=Je]),ms(L,Ct,jn(Je,h,v,Ct,d,T))}),L}function eu(d,h,v){var x=v.length;if(null==d)return!x;for(d=$t(d);x--;){var D=v[x],L=d[D];if(L===B&&!(D in d)||!(0,h[D])(L))return!1}return!0}function Pn(d,h,v){if("function"!=typeof d)throw new oi(Qr);return wc(function(){d.apply(B,v)},h)}function tu(d,h,v,x){var D=-1,T=pl,L=!0,H=d.length,Y=[],fe=h.length;if(!H)return Y;v&&(h=un(h,Mi(v))),x?(T=zr,L=!1):h.length>=200&&(T=Ga,L=!1,h=new kn(h));e:for(;++D<H;){var he=d[D],ne=null==v?he:v(he);if(he=x||0!==he?he:0,L&&ne==ne){for(var M=fe;M--;)if(h[M]===ne)continue e;Y.push(he)}else T(h,ne,x)||Y.push(he)}return Y}S.templateSettings={escape:Ln,evaluate:Qv,interpolate:Yv,variable:"",imports:{_:S}},(S.prototype=ic.prototype).constructor=S,(ui.prototype=rc(ic.prototype)).constructor=ui,(At.prototype=rc(ic.prototype)).constructor=At,Ja.prototype.clear=function rr(){this.__data__=Cl?Cl(null):{},this.size=0},Ja.prototype.delete=function xy(d){var h=this.has(d)&&delete this.__data__[d];return this.size-=h?1:0,h},Ja.prototype.get=function Yx(d){var h=this.__data__;if(Cl){var v=h[d];return v===ct?B:v}return qt.call(h,d)?h[d]:B},Ja.prototype.has=function El(d){var h=this.__data__;return Cl?h[d]!==B:qt.call(h,d)},Ja.prototype.set=function Xx(d,h){var v=this.__data__;return this.size+=this.has(d)?0:1,v[d]=Cl&&h===B?ct:h,this},gs.prototype.clear=function Jx(){this.__data__=[],this.size=0},gs.prototype.delete=function Zx(d){var h=this.__data__,v=Sl(h,d);return!(v<0||(v==h.length-1?h.pop():gn.call(h,v,1),--this.size,0))},gs.prototype.get=function $x(d){var h=this.__data__,v=Sl(h,d);return v<0?B:h[v][1]},gs.prototype.has=function eC(d){return Sl(this.__data__,d)>-1},gs.prototype.set=function Gp(d,h){var v=this.__data__,x=Sl(v,d);return x<0?(++this.size,v.push([d,h])):v[x][1]=h,this},Ki.prototype.clear=function mn(){this.size=0,this.__data__={hash:new Ja,map:new(fo||gs),string:new Ja}},Ki.prototype.delete=function be(d){var h=ou(this,d).delete(d);return this.size-=h?1:0,h},Ki.prototype.get=function We(d){return ou(this,d).get(d)},Ki.prototype.has=function Un(d){return ou(this,d).has(d)},Ki.prototype.set=function po(d,h){var v=ou(this,d),x=v.size;return v.set(d,h),this.size+=v.size==x?0:1,this},kn.prototype.add=kn.prototype.push=function ki(d){return this.__data__.set(d,ct),this},kn.prototype.has=function sc(d){return this.__data__.has(d)},It.prototype.clear=function Dr(){this.__data__=new gs,this.size=0},It.prototype.delete=function go(d){var h=this.__data__,v=h.delete(d);return this.size=h.size,v},It.prototype.get=function et(d){return this.__data__.get(d)},It.prototype.has=function Dl(d){return this.__data__.has(d)},It.prototype.set=function Cy(d,h){var v=this.__data__;if(v instanceof gs){var x=v.__data__;if(!fo||x.length<199)return x.push([d,h]),this.size=++v.size,this;v=this.__data__=new Ki(x)}return v.set(d,h),this.size=v.size,this};var In=Hr(Yi),Ir=Hr(wf,!0);function Kp(d,h){var v=!0;return In(d,function(x,D,T){return v=!!h(x,D,T)}),v}function jo(d,h,v){for(var x=-1,D=d.length;++x<D;){var T=d[x],L=h(T);if(null!=L&&(H===B?L==L&&!fi(L):v(L,H)))var H=L,Y=T}return Y}function Qi(d,h){var v=[];return In(d,function(x,D,T){h(x,D,T)&&v.push(x)}),v}function ir(d,h,v,x,D){var T=-1,L=d.length;for(v||(v=xT),D||(D=[]);++T<L;){var H=d[T];h>0&&v(H)?h>1?ir(H,h-1,v,x,D):Ha(D,H):x||(D[D.length]=H)}return D}var Qp=zo(),_y=zo(!0);function Yi(d,h){return d&&Qp(d,h,vr)}function wf(d,h){return d&&_y(d,h,vr)}function bf(d,h){return Bo(h,function(v){return _s(d[v])})}function vs(d,h){for(var v=0,x=(h=ys(h,d)).length;null!=d&&v<x;)d=d[Wo(h[v++])];return v&&v==x?d:B}function tC(d,h,v){var x=h(d);return at(d)?x:Ha(x,v(d))}function ci(d){return null==d?d===B?"[object Undefined]":"[object Null]":Dn&&Dn in $t(d)?function Ky(d){var h=qt.call(d,Dn),v=d[Dn];try{d[Dn]=B;var x=!0}catch{}var D=lf.call(d);return x&&(h?d[Dn]=v:delete d[Dn]),D}(d):function dg(d){return lf.call(d)}(d)}function Ey(d,h){return d>h}function hT(d,h){return null!=d&&qt.call(d,h)}function pT(d,h){return null!=d&&h in $t(d)}function Dy(d,h,v){for(var x=v?zr:pl,D=d[0].length,T=d.length,L=T,H=ie(T),Y=1/0,fe=[];L--;){var he=d[L];L&&h&&(he=un(he,Mi(h))),Y=Xr(he.length,Y),H[L]=!v&&(h||D>=120&&he.length>=120)?new kn(L&&he):B}he=d[0];var ne=-1,M=H[0];e:for(;++ne<D&&fe.length<Y;){var Ne=he[ne],ve=h?h(Ne):Ne;if(Ne=v||0!==Ne?Ne:0,!(M?Ga(M,ve):x(fe,ve,v))){for(L=T;--L;){var pt=H[L];if(!(pt?Ga(pt,ve):x(d[L],ve,v)))continue e}M&&M.push(ve),fe.push(Ne)}}return fe}function Af(d,h,v){var x=null==(d=jl(d,h=ys(h,d)))?d:d[Wo(cn(h))];return null==x?B:Ti(x,d,v)}function nC(d){return dn(d)&&ci(d)==ju}function uc(d,h,v,x,D){return d===h||(null==d||null==h||!dn(d)&&!dn(h)?d!=d&&h!=h:function Iy(d,h,v,x,D,T){var L=at(d),H=at(h),Y=L?yp:Vn(d),fe=H?yp:Vn(h),he=(Y=Y==ju?Bn:Y)==Bn,ne=(fe=fe==ju?Bn:fe)==Bn,M=Y==fe;if(M&&Go(d)){if(!Go(h))return!1;L=!0,he=!1}if(M&&!he)return T||(T=new It),L||$i(d)?Gy(d,h,v,x,D,T):function lC(d,h,v,x,D,T,L){switch(v){case Xs:if(d.byteLength!=h.byteLength||d.byteOffset!=h.byteOffset)return!1;d=d.buffer,h=h.buffer;case ul:return!(d.byteLength!=h.byteLength||!T(new ff(d),new ff(h)));case ol:case Vd:case ja:return Zi(+d,+h);case Wd:return d.name==h.name&&d.message==h.message;case zu:case Ys:return d==h+"";case Ei:var H=wl;case Er:if(H||(H=Bp),d.size!=h.size&&!(1&x))return!1;var fe=L.get(d);if(fe)return fe==h;x|=2,L.set(d,h);var he=Gy(H(d),H(h),x,D,T,L);return L.delete(d),he;case sl:if(Uo)return Uo.call(d)==Uo.call(h)}return!1}(d,h,Y,v,x,D,T);if(!(1&v)){var Ne=he&&qt.call(d,"__wrapped__"),ve=ne&&qt.call(h,"__wrapped__");if(Ne||ve){var pt=Ne?d.value():d,Je=ve?h.value():h;return T||(T=new It),D(pt,Je,v,x,T)}}return!!M&&(T||(T=new It),function dC(d,h,v,x,D,T){var L=1&v,H=kf(d),Y=H.length;if(Y!=kf(h).length&&!L)return!1;for(var ne=Y;ne--;){var M=H[ne];if(!(L?M in h:qt.call(h,M)))return!1}var Ne=T.get(d),ve=T.get(h);if(Ne&&ve)return Ne==h&&ve==d;var pt=!0;T.set(d,h),T.set(h,d);for(var Je=L;++ne<Y;){var Ct=d[M=H[ne]],wt=h[M];if(x)var yr=L?x(wt,Ct,M,h,d,T):x(Ct,wt,M,d,h,T);if(!(yr===B?Ct===wt||D(Ct,wt,v,x,T):yr)){pt=!1;break}Je||(Je="constructor"==M)}if(pt&&!Je){var kr=d.constructor,Pr=h.constructor;kr!=Pr&&"constructor"in d&&"constructor"in h&&!("function"==typeof kr&&kr instanceof kr&&"function"==typeof Pr&&Pr instanceof Pr)&&(pt=!1)}return T.delete(d),T.delete(h),pt}(d,h,v,x,D,T))}(d,h,v,x,uc,D))}function Sy(d,h,v,x){var D=v.length,T=D,L=!x;if(null==d)return!T;for(d=$t(d);D--;){var H=v[D];if(L&&H[2]?H[1]!==d[H[0]]:!(H[0]in d))return!1}for(;++D<T;){var Y=(H=v[D])[0],fe=d[Y],he=H[1];if(L&&H[2]){if(fe===B&&!(Y in d))return!1}else{var ne=new It;if(x)var M=x(fe,he,Y,d,h,ne);if(!(M===B?uc(he,fe,3,x,ne):M))return!1}}return!0}function rC(d){return!(!on(d)||function Ff(d){return!!hy&&hy in d}(d))&&(_s(d)?Hx:nT).test(ia(d))}function nu(d){return"function"==typeof d?d:null==d?Oi:"object"==typeof d?at(d)?Ry(d[0],d[1]):Jp(d):aw(d)}function xf(d){if(!yc(d))return wy(d);var h=[];for(var v in $t(d))qt.call(d,v)&&"constructor"!=v&&h.push(v);return h}function Yp(d,h){return d<h}function Xp(d,h){var v=-1,x=di(d)?ie(d.length):[];return In(d,function(D,T,L){x[++v]=h(D,T,L)}),x}function Jp(d){var h=vc(d);return 1==h.length&&h[0][2]?Xy(h[0][0],h[0][1]):function(v){return v===d||Sy(v,d,h)}}function Ry(d,h){return cg(d)&&lg(h)?Xy(Wo(d),h):function(v){var x=z0(v,d);return x===B&&x===h?Zf(v,d):uc(h,x,3)}}function cc(d,h,v,x,D){d!==h&&Qp(h,function(T,L){if(D||(D=new It),on(T))!function oC(d,h,v,x,D,T,L){var H=pg(d,v),Y=pg(h,v),fe=L.get(Y);if(fe)mo(d,v,fe);else{var he=T?T(H,Y,v+"",d,h,L):B,ne=he===B;if(ne){var M=at(Y),Ne=!M&&Go(Y),ve=!M&&!Ne&&$i(Y);he=Y,M||Ne||ve?at(H)?he=H:ln(H)?he=Sn(H):Ne?(ne=!1,he=Uy(Y,!0)):ve?(ne=!1,he=ee(Y,!0)):he=[]:Yf(Y)||Cs(Y)?(he=H,Cs(H)?he=N0(H):(!on(H)||_s(H))&&(he=Yy(Y))):ne=!1}ne&&(L.set(Y,he),D(he,Y,x,T,L),L.delete(Y)),mo(d,v,he)}}(d,h,L,v,cc,x,D);else{var H=x?x(pg(d,L),T,L+"",d,h,D):B;H===B&&(H=T),mo(d,L,H)}},pi)}function yo(d,h){var v=d.length;if(v)return bo(h+=h<0?v:0,v)?d[h]:B}function Zp(d,h,v){h=h.length?un(h,function(T){return at(T)?function(L){return vs(L,1===T.length?T[0]:T)}:T}):[Oi];var x=-1;return h=un(h,Mi(Ge())),function ef(K,ae){var ie=K.length;for(K.sort(ae);ie--;)K[ie]=K[ie].value;return K}(Xp(d,function(T,L,H){return{criteria:un(h,function(fe){return fe(T)}),index:++x,value:T}}),function(T,L){return function Kt(d,h,v){for(var x=-1,D=d.criteria,T=h.criteria,L=D.length,H=v.length;++x<L;){var Y=te(D[x],T[x]);if(Y)return x>=H?Y:Y*("desc"==v[x]?-1:1)}return d.index-h.index}(T,L,v)})}function $p(d,h,v){for(var x=-1,D=h.length,T={};++x<D;){var L=h[x],H=vs(d,L);v(H,L)&&Tr(T,ys(L,d),H)}return T}function Py(d,h,v,x){var D=x?Nx:co,T=-1,L=h.length,H=d;for(d===h&&(h=Sn(h)),v&&(H=un(d,Mi(v)));++T<L;)for(var Y=0,fe=h[T],he=v?v(fe):fe;(Y=D(H,he,Y,x))>-1;)H!==d&&gn.call(H,Y,1),gn.call(d,Y,1);return d}function Gt(d,h){for(var v=d?h.length:0,x=v-1;v--;){var D=h[v];if(v==x||D!==T){var T=D;bo(D)?gn.call(d,D,1):Ol(d,D)}}return d}function Rl(d,h){return d+hf(pf()*(h-d+1))}function Sr(d,h){var v="";if(!d||h<1||h>as)return v;do{h%2&&(v+=d),(h=hf(h/2))&&(d+=d)}while(h);return v}function vt(d,h){return Lf(fg(d,h,Oi),d+"")}function Pl(d){return vn(Tc(d))}function lc(d,h){var v=Tc(d);return su(v,vo(h,0,v.length))}function Tr(d,h,v,x){if(!on(d))return d;for(var D=-1,T=(h=ys(h,d)).length,L=T-1,H=d;null!=H&&++D<T;){var Y=Wo(h[D]),fe=v;if("__proto__"===Y||"constructor"===Y||"prototype"===Y)return d;if(D!=L){var he=H[Y];(fe=x?x(he,Y,H):B)===B&&(fe=on(he)?he:bo(h[D+1])?[]:{})}ms(H,Y,fe),H=H[Y]}return d}var Oy=tc?function(d,h){return tc.set(d,h),d}:Oi,eg=Lo?function(d,h){return Lo(d,"toString",{configurable:!0,enumerable:!1,value:nw(h),writable:!0})}:Oi;function aC(d){return su(Tc(d))}function zn(d,h,v){var x=-1,D=d.length;h<0&&(h=-h>D?0:D+h),(v=v>D?D:v)<0&&(v+=D),D=h>v?0:v-h>>>0,h>>>=0;for(var T=ie(D);++x<D;)T[x]=d[x+h];return T}function Ny(d,h){var v;return In(d,function(x,D,T){return!(v=h(x,D,T))}),!!v}function Cf(d,h,v){var x=0,D=null==d?x:d.length;if("number"==typeof h&&h==h&&D<=2147483647){for(;x<D;){var T=x+D>>>1,L=d[T];null!==L&&!fi(L)&&(v?L<=h:L<h)?x=T+1:D=T}return D}return _f(d,h,Oi,v)}function _f(d,h,v,x){var D=0,T=null==d?0:d.length;if(0===T)return 0;for(var L=(h=v(h))!=h,H=null===h,Y=fi(h),fe=h===B;D<T;){var he=hf((D+T)/2),ne=v(d[he]),M=ne!==B,Ne=null===ne,ve=ne==ne,pt=fi(ne);if(L)var Je=x||ve;else Je=fe?ve&&(x||M):H?ve&&M&&(x||!Ne):Y?ve&&M&&!Ne&&(x||!pt):!Ne&&!pt&&(x?ne<=h:ne<h);Je?D=he+1:T=he}return Xr(T,4294967294)}function Ef(d,h){for(var v=-1,x=d.length,D=0,T=[];++v<x;){var L=d[v],H=h?h(L):L;if(!v||!Zi(H,Y)){var Y=H;T[D++]=0===L?0:L}}return T}function Df(d){return"number"==typeof d?d:fi(d)?NaN:+d}function Mr(d){if("string"==typeof d)return d;if(at(d))return un(d,Mr)+"";if(fi(d))return Ay?Ay.call(d):"";var h=d+"";return"0"==h&&1/d==-Uu?"-0":h}function wo(d,h,v){var x=-1,D=pl,T=d.length,L=!0,H=[],Y=H;if(v)L=!1,D=zr;else if(T>=200){var fe=h?null:qy(d);if(fe)return Bp(fe);L=!1,D=Ga,Y=new kn}else Y=h?[]:H;e:for(;++x<T;){var he=d[x],ne=h?h(he):he;if(he=v||0!==he?he:0,L&&ne==ne){for(var M=Y.length;M--;)if(Y[M]===ne)continue e;h&&Y.push(ne),H.push(he)}else D(Y,ne,v)||(Y!==H&&Y.push(ne),H.push(he))}return H}function Ol(d,h){return null==(d=jl(d,h=ys(h,d)))||delete d[Wo(cn(h))]}function ea(d,h,v,x){return Tr(d,h,v(vs(d,h)),x)}function Xe(d,h,v,x){for(var D=d.length,T=x?D:-1;(x?T--:++T<D)&&h(d[T],T,d););return v?zn(d,x?0:T,x?T+1:D):zn(d,x?T+1:0,x?D:T)}function tg(d,h){var v=d;return v instanceof At&&(v=v.value()),ay(h,function(x,D){return D.func.apply(D.thisArg,Ha([x],D.args))},v)}function Fy(d,h,v){var x=d.length;if(x<2)return x?wo(d[0]):[];for(var D=-1,T=ie(x);++D<x;)for(var L=d[D],H=-1;++H<x;)H!=D&&(T[D]=tu(T[D]||L,d[H],h,v));return wo(ir(T,1),h,v)}function By(d,h,v){for(var x=-1,D=d.length,T=h.length,L={};++x<D;)v(L,d[x],x<T?h[x]:B);return L}function ng(d){return ln(d)?d:[]}function rg(d){return"function"==typeof d?d:Oi}function ys(d,h){return at(d)?d:cg(d,h)?[d]:ra(jt(d))}var dc=vt;function ta(d,h,v){var x=d.length;return v=v===B?x:v,!h&&v>=x?d:zn(d,h,v)}var Ly=Wr||function(d){return nr.clearTimeout(d)};function Uy(d,h){if(h)return d.slice();var v=d.length,x=gy?gy(v):new d.constructor(v);return d.copy(x),x}function ig(d){var h=new d.constructor(d.byteLength);return new ff(h).set(new ff(d)),h}function ee(d,h){var v=h?ig(d.buffer):d.buffer;return new d.constructor(v,d.byteOffset,d.length)}function te(d,h){if(d!==h){var v=d!==B,x=null===d,D=d==d,T=fi(d),L=h!==B,H=null===h,Y=h==h,fe=fi(h);if(!H&&!fe&&!T&&d>h||T&&L&&Y&&!H&&!fe||x&&L&&Y||!v&&Y||!D)return 1;if(!x&&!T&&!fe&&d<h||fe&&v&&D&&!x&&!T||H&&v&&D||!L&&D||!Y)return-1}return 0}function og(d,h,v,x){for(var D=-1,T=d.length,L=v.length,H=-1,Y=h.length,fe=Rn(T-L,0),he=ie(Y+fe),ne=!x;++H<Y;)he[H]=h[H];for(;++D<L;)(ne||D<T)&&(he[v[D]]=d[D]);for(;fe--;)he[H++]=d[D++];return he}function fc(d,h,v,x){for(var D=-1,T=d.length,L=-1,H=v.length,Y=-1,fe=h.length,he=Rn(T-H,0),ne=ie(he+fe),M=!x;++D<he;)ne[D]=d[D];for(var Ne=D;++Y<fe;)ne[Ne+Y]=h[Y];for(;++L<H;)(M||D<T)&&(ne[Ne+v[L]]=d[D++]);return ne}function Sn(d,h){var v=-1,x=d.length;for(h||(h=ie(x));++v<x;)h[v]=d[v];return h}function Xi(d,h,v,x){var D=!v;v||(v={});for(var T=-1,L=h.length;++T<L;){var H=h[T],Y=x?x(v[H],d[H],H,v,d):B;Y===B&&(Y=d[H]),D?Ke(v,H,Y):ms(v,H,Y)}return v}function ag(d,h){return function(v,x){var D=at(v)?fT:$s,T=h?h():{};return D(v,d,Ge(x,2),T)}}function ru(d){return vt(function(h,v){var x=-1,D=v.length,T=D>1?v[D-1]:B,L=D>2?v[2]:B;for(T=d.length>3&&"function"==typeof T?(D--,T):B,L&&or(v[0],v[1],L)&&(T=D<3?B:T,D=1),h=$t(h);++x<D;){var H=v[x];H&&d(h,H,x,T)}return h})}function Hr(d,h){return function(v,x){if(null==v)return v;if(!di(v))return d(v,x);for(var D=v.length,T=h?D:-1,L=$t(v);(h?T--:++T<D)&&!1!==x(L[T],T,L););return v}}function zo(d){return function(h,v,x){for(var D=-1,T=$t(h),L=x(h),H=L.length;H--;){var Y=L[d?H:++D];if(!1===v(T[Y],Y,T))break}return h}}function Ji(d){return function(h){var v=Qa(h=jt(h))?Gi(h):B,x=v?v[0]:h.charAt(0),D=v?ta(v,1).join(""):h.slice(1);return x[d]()+D}}function li(d){return function(h){return ay(mi(Y0(h).replace(ry,"")),d,"")}}function Nl(d){return function(){var h=arguments;switch(h.length){case 0:return new d;case 1:return new d(h[0]);case 2:return new d(h[0],h[1]);case 3:return new d(h[0],h[1],h[2]);case 4:return new d(h[0],h[1],h[2],h[3]);case 5:return new d(h[0],h[1],h[2],h[3],h[4]);case 6:return new d(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new d(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var v=rc(d.prototype),x=d.apply(v,h);return on(x)?x:v}}function Vy(d){return function(h,v,x){var D=$t(h);if(!di(h)){var T=Ge(v,3);h=vr(h),v=function(H){return T(D[H],H,D)}}var L=d(h,v,x);return L>-1?D[T?h[L]:L]:B}}function Wy(d){return bs(function(h){var v=h.length,x=v,D=ui.prototype.thru;for(d&&h.reverse();x--;){var T=h[x];if("function"!=typeof T)throw new oi(Qr);if(D&&!L&&"wrapper"==Pi(T))var L=new ui([],!0)}for(x=L?x:v;++x<v;){var H=Pi(T=h[x]),Y="wrapper"==H?iu(T):B;L=Y&&Ul(Y[0])&&424==Y[1]&&!Y[4].length&&1==Y[9]?L[Pi(Y[0])].apply(L,Y[3]):1==T.length&&Ul(T)?L[H]():L.thru(T)}return function(){var fe=arguments,he=fe[0];if(L&&1==fe.length&&at(he))return L.plant(he).value();for(var ne=0,M=v?h[ne].apply(this,fe):he;++ne<v;)M=h[ne].call(this,M);return M}})}function hc(d,h,v,x,D,T,L,H,Y,fe){var he=128&h,ne=1&h,M=2&h,Ne=24&h,ve=512&h,pt=M?B:Nl(d);return function Je(){for(var Ct=arguments.length,wt=ie(Ct),yr=Ct;yr--;)wt[yr]=arguments[yr];if(Ne)var kr=mc(Je),Pr=function Bx(K,ae){for(var ie=K.length,Se=0;ie--;)K[ie]===ae&&++Se;return Se}(wt,kr);if(x&&(wt=og(wt,x,D,Ne)),T&&(wt=fc(wt,T,L,Ne)),Ct-=Pr,Ne&&Ct<fe){var On=hs(wt,kr);return ug(d,h,hc,Je.placeholder,v,wt,On,H,Y,fe-Ct)}var Ni=ne?v:this,Ao=M?Ni[d]:d;return Ct=wt.length,H?wt=function hg(d,h){for(var v=d.length,x=Xr(h.length,v),D=Sn(d);x--;){var T=h[x];d[x]=bo(T,v)?D[T]:B}return d}(wt,H):ve&&Ct>1&&wt.reverse(),he&&Y<Ct&&(wt.length=Y),this&&this!==nr&&this instanceof Je&&(Ao=pt||Nl(Ao)),Ao.apply(Ni,wt)}}function If(d,h){return function(v,x){return function mT(d,h,v,x){return Yi(d,function(D,T,L){h(x,v(D),T,L)}),x}(v,d,h(x),{})}}function pc(d,h){return function(v,x){var D;if(v===B&&x===B)return h;if(v!==B&&(D=v),x!==B){if(D===B)return x;"string"==typeof v||"string"==typeof x?(v=Mr(v),x=Mr(x)):(v=Df(v),x=Df(x)),D=d(v,x)}return D}}function gc(d){return bs(function(h){return h=un(h,Mi(Ge())),vt(function(v){var x=this;return d(h,function(D){return Ti(D,x,v)})})})}function Sf(d,h){var v=(h=h===B?" ":Mr(h)).length;if(v<2)return v?Sr(h,d):h;var x=Sr(h,Xa(d/bl(h)));return Qa(h)?ta(Gi(x),0,d).join(""):x.slice(0,d)}function Tf(d){return function(h,v,x){return x&&"number"!=typeof x&&or(h,v,x)&&(v=x=B),h=mr(h),v===B?(v=h,h=0):v=mr(v),function kl(d,h,v,x){for(var D=-1,T=Rn(Xa((h-d)/(v||1)),0),L=ie(T);T--;)L[x?T:++D]=d,d+=v;return L}(h,v,x=x===B?h<v?1:-1:mr(x),d)}}function Fl(d){return function(h,v){return"string"==typeof h&&"string"==typeof v||(h=eo(h),v=eo(v)),d(h,v)}}function ug(d,h,v,x,D,T,L,H,Y,fe){var he=8&h;h|=he?32:64,4&(h&=~(he?64:32))||(h&=-4);var pt=[d,h,D,he?T:B,he?L:B,he?B:T,he?B:L,H,Y,fe],Je=v.apply(B,pt);return Ul(d)&&gg(Je,pt),Je.placeholder=x,mg(Je,d,h)}function Mf(d){var h=_n[d];return function(v,x){if(v=eo(v),(x=null==x?0:Xr(dt(x),292))&&yy(v)){var D=(jt(v)+"e").split("e");return+((D=(jt(h(D[0]+"e"+(+D[1]+x)))+"e").split("e"))[0]+"e"+(+D[1]-x))}return h(v)}}var qy=Js&&1/Bp(new Js([,-0]))[1]==Uu?function(d){return new Js(d)}:ed;function Rf(d){return function(h){var v=Vn(h);return v==Ei?wl(h):v==Er?function Ri(K){var ae=-1,ie=Array(K.size);return K.forEach(function(Se){ie[++ae]=[Se,Se]}),ie}(h):function Fx(K,ae){return un(ae,function(ie){return[ie,K[ie]]})}(h,d(h))}}function ws(d,h,v,x,D,T,L,H){var Y=2&h;if(!Y&&"function"!=typeof d)throw new oi(Qr);var fe=x?x.length:0;if(fe||(h&=-97,x=D=B),L=L===B?L:Rn(dt(L),0),H=H===B?H:dt(H),fe-=D?D.length:0,64&h){var he=x,ne=D;x=D=B}var M=Y?B:iu(d),Ne=[d,h,v,x,D,he,ne,T,L,H];if(M&&function gC(d,h){var v=d[1],x=h[1],D=v|x;if(!(D<131)&&!(128==x&&8==v||128==x&&256==v&&d[7].length<=h[8]||384==x&&h[7].length<=h[8]&&8==v))return d;1&x&&(d[2]=h[2],D|=1&v?0:4);var H=h[3];if(H){var Y=d[3];d[3]=Y?og(Y,H,h[4]):H,d[4]=Y?hs(d[3],jd):h[4]}(H=h[5])&&(d[5]=(Y=d[5])?fc(Y,H,h[6]):H,d[6]=Y?hs(d[5],jd):h[6]),(H=h[7])&&(d[7]=H),128&x&&(d[8]=null==d[8]?h[8]:Xr(d[8],h[8])),null==d[9]&&(d[9]=h[9]),d[0]=h[0],d[1]=D}(Ne,M),d=Ne[0],h=Ne[1],v=Ne[2],x=Ne[3],D=Ne[4],!(H=Ne[9]=Ne[9]===B?Y?0:d.length:Rn(Ne[9]-fe,0))&&24&h&&(h&=-25),h&&1!=h)ve=8==h||16==h?function zy(d,h,v){var x=Nl(d);return function D(){for(var T=arguments.length,L=ie(T),H=T,Y=mc(D);H--;)L[H]=arguments[H];var fe=T<3&&L[0]!==Y&&L[T-1]!==Y?[]:hs(L,Y);return(T-=fe.length)<v?ug(d,h,hc,D.placeholder,B,L,fe,B,B,v-T):Ti(this&&this!==nr&&this instanceof D?x:d,this,L)}}(d,h,H):32!=h&&33!=h||D.length?hc.apply(B,Ne):function Hy(d,h,v,x){var D=1&h,T=Nl(d);return function L(){for(var H=-1,Y=arguments.length,fe=-1,he=x.length,ne=ie(he+Y),M=this&&this!==nr&&this instanceof L?T:d;++fe<he;)ne[fe]=x[fe];for(;Y--;)ne[fe++]=arguments[++H];return Ti(M,D?v:this,ne)}}(d,h,v,x);else var ve=function jy(d,h,v){var x=1&h,D=Nl(d);return function T(){return(this&&this!==nr&&this instanceof T?D:d).apply(x?v:this,arguments)}}(d,h,v);return mg((M?Oy:gg)(ve,Ne),d,h)}function Rr(d,h,v,x){return d===B||Zi(d,Vr[v])&&!qt.call(x,v)?h:d}function na(d,h,v,x,D,T){return on(d)&&on(h)&&(T.set(h,d),cc(d,h,B,na,T),T.delete(h)),d}function rn(d){return Yf(d)?B:d}function Gy(d,h,v,x,D,T){var L=1&v,H=d.length,Y=h.length;if(H!=Y&&!(L&&Y>H))return!1;var fe=T.get(d),he=T.get(h);if(fe&&he)return fe==h&&he==d;var ne=-1,M=!0,Ne=2&v?new kn:B;for(T.set(d,h),T.set(h,d);++ne<H;){var ve=d[ne],pt=h[ne];if(x)var Je=L?x(pt,ve,ne,h,d,T):x(ve,pt,ne,d,h,T);if(Je!==B){if(Je)continue;M=!1;break}if(Ne){if(!ml(h,function(Ct,wt){if(!Ga(Ne,wt)&&(ve===Ct||D(ve,Ct,v,x,T)))return Ne.push(wt)})){M=!1;break}}else if(ve!==pt&&!D(ve,pt,v,x,T)){M=!1;break}}return T.delete(d),T.delete(h),M}function bs(d){return Lf(fg(d,B,t0),d+"")}function kf(d){return tC(d,vr,Of)}function Pf(d){return tC(d,pi,Qy)}var iu=tc?function(d){return tc.get(d)}:ed;function Pi(d){for(var h=d.name+"",v=ps[h],x=qt.call(ps,h)?v.length:0;x--;){var D=v[x],T=D.func;if(null==T||T==d)return D.name}return h}function mc(d){return(qt.call(S,"placeholder")?S:d).placeholder}function Ge(){var d=S.iteratee||Ko;return d=d===Ko?nu:d,arguments.length?d(arguments[0],arguments[1]):d}function ou(d,h){var v=d.__data__;return function Ll(d){var h=typeof d;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==d:null===d}(h)?v["string"==typeof h?"string":"hash"]:v.map}function vc(d){for(var h=vr(d),v=h.length;v--;){var x=h[v],D=d[x];h[v]=[x,D,lg(D)]}return h}function As(d,h){var v=function Zu(K,ae){return null==K?B:K[ae]}(d,h);return rC(v)?v:B}var Of=zp?function(d){return null==d?[]:(d=$t(d),Bo(zp(d),function(h){return ai.call(d,h)}))}:lu,Qy=zp?function(d){for(var h=[];d;)Ha(h,Of(d)),d=si(d);return h}:lu,Vn=ci;function Nf(d,h,v){for(var x=-1,D=(h=ys(h,d)).length,T=!1;++x<D;){var L=Wo(h[x]);if(!(T=null!=d&&v(d,L)))break;d=d[L]}return T||++x!=D?T:!!(D=null==d?0:d.length)&&Dc(D)&&bo(L,D)&&(at(d)||Cs(d))}function Yy(d){return"function"!=typeof d.constructor||yc(d)?{}:rc(si(d))}function xT(d){return at(d)||Cs(d)||!!(ht&&d&&d[ht])}function bo(d,h){var v=typeof d;return!!(h=h??as)&&("number"==v||"symbol"!=v&&cs.test(d))&&d>-1&&d%1==0&&d<h}function or(d,h,v){if(!on(v))return!1;var x=typeof h;return!!("number"==x?di(v)&&bo(h,v.length):"string"==x&&h in v)&&Zi(v[h],d)}function cg(d,h){if(at(d))return!1;var v=typeof d;return!("number"!=v&&"symbol"!=v&&"boolean"!=v&&null!=d&&!fi(d))||gx.test(d)||!px.test(d)||null!=h&&d in $t(h)}function Ul(d){var h=Pi(d),v=S[h];if("function"!=typeof v||!(h in At.prototype))return!1;if(d===v)return!0;var x=iu(v);return!!x&&d===x[0]}(gf&&Vn(new gf(new ArrayBuffer(1)))!=Xs||fo&&Vn(new fo)!=Ei||Hp&&Vn(Hp.resolve())!=bp||Js&&Vn(new Js)!=Er||Zs&&Vn(new Zs)!=al)&&(Vn=function(d){var h=ci(d),v=h==Bn?d.constructor:B,x=v?ia(v):"";if(x)switch(x){case ho:return Xs;case nc:return Ei;case qp:return bp;case Gx:return Er;case Kx:return al}return h});var CT=cf?_s:Rc;function yc(d){var h=d&&d.constructor;return d===("function"==typeof h&&h.prototype||Vr)}function lg(d){return d==d&&!on(d)}function Xy(d,h){return function(v){return null!=v&&v[d]===h&&(h!==B||d in $t(v))}}function fg(d,h,v){return h=Rn(h===B?d.length-1:h,0),function(){for(var x=arguments,D=-1,T=Rn(x.length-h,0),L=ie(T);++D<T;)L[D]=x[h+D];D=-1;for(var H=ie(h+1);++D<h;)H[D]=x[D];return H[h]=v(L),Ti(d,this,H)}}function jl(d,h){return h.length<2?d:vs(d,zn(h,0,-1))}function pg(d,h){if(("constructor"!==h||"function"!=typeof d[h])&&"__proto__"!=h)return d[h]}var gg=Jy(Oy),wc=vy||function(d,h){return nr.setTimeout(d,h)},Lf=Jy(eg);function mg(d,h,v){var x=h+"";return Lf(d,function AT(d,h){var v=h.length;if(!v)return d;var x=v-1;return h[x]=(v>1?"& ":"")+h[x],h=h.join(v>2?", ":" "),d.replace(Yr,"{\n/* [wrapped with "+h+"] */\n")}(x,function Zy(d,h){return qi(Z2,function(v){var x="_."+v[0];h&v[1]&&!pl(d,x)&&d.push(x)}),d.sort()}(function fC(d){var h=d.match(mx);return h?h[1].split(Ii):[]}(x),v)))}function Jy(d){var h=0,v=0;return function(){var x=Wp(),D=16-(x-v);if(v=x,D>0){if(++h>=800)return arguments[0]}else h=0;return d.apply(B,arguments)}}function su(d,h){var v=-1,x=d.length,D=x-1;for(h=h===B?x:h;++v<h;){var T=Rl(v,D),L=d[T];d[T]=d[v],d[v]=L}return d.length=h,d}var ra=function Vo(d){var h=Mg(d,function(x){return 500===v.size&&v.clear(),x}),v=h.cache;return h}(function(d){var h=[];return 46===d.charCodeAt(0)&&h.push(""),d.replace(Di,function(v,x,D,T){h.push(D?T.replace(ge,"$1"):x||v)}),h});function Wo(d){if("string"==typeof d||fi(d))return d;var h=d+"";return"0"==h&&1/d==-Uu?"-0":h}function ia(d){if(null!=d){try{return Al.call(d)}catch{}try{return d+""}catch{}}return""}function au(d){if(d instanceof At)return d.clone();var h=new ui(d.__wrapped__,d.__chain__);return h.__actions__=Sn(d.__actions__),h.__index__=d.__index__,h.__values__=d.__values__,h}var vC=vt(function(d,h){return ln(d)?tu(d,ir(h,1,ln,!0)):[]}),vg=vt(function(d,h){var v=cn(h);return ln(v)&&(v=B),ln(d)?tu(d,ir(h,1,ln,!0),Ge(v,2)):[]}),yC=vt(function(d,h){var v=cn(h);return ln(v)&&(v=B),ln(d)?tu(d,ir(h,1,ln,!0),B,v):[]});function zl(d,h,v){var x=null==d?0:d.length;if(!x)return-1;var D=null==v?0:dt(v);return D<0&&(D=Rn(x+D,0)),vl(d,Ge(h,3),D)}function wg(d,h,v){var x=null==d?0:d.length;if(!x)return-1;var D=x-1;return v!==B&&(D=dt(v),D=v<0?Rn(x+D,0):Xr(D,x-1)),vl(d,Ge(h,3),D,!0)}function t0(d){return null!=d&&d.length?ir(d,1):[]}function r0(d){return d&&d.length?d[0]:B}var CC=vt(function(d){var h=un(d,ng);return h.length&&h[0]===d[0]?Dy(h):[]}),_T=vt(function(d){var h=cn(d),v=un(d,ng);return h===cn(v)?h=B:v.pop(),v.length&&v[0]===d[0]?Dy(v,Ge(h,2)):[]}),s0=vt(function(d){var h=cn(d),v=un(d,ng);return(h="function"==typeof h?h:B)&&v.pop(),v.length&&v[0]===d[0]?Dy(v,B,h):[]});function cn(d){var h=null==d?0:d.length;return h?d[h-1]:B}var DT=vt(jf);function jf(d,h){return d&&d.length&&h&&h.length?Py(d,h):d}var Ac=bs(function(d,h){var v=null==d?0:d.length,x=Ml(d,h);return Gt(d,un(h,function(D){return bo(D,v)?+D:D}).sort(te)),x});function bg(d){return null==d?d:by.call(d)}var xg=vt(function(d){return wo(ir(d,1,ln,!0))}),Vl=vt(function(d){var h=cn(d);return ln(h)&&(h=B),wo(ir(d,1,ln,!0),Ge(h,2))}),SC=vt(function(d){var h=cn(d);return h="function"==typeof h?h:B,wo(ir(d,1,ln,!0),B,h)});function Cc(d){if(!d||!d.length)return[];var h=0;return d=Bo(d,function(v){if(ln(v))return h=Rn(v.length,h),!0}),qa(h,function(v){return un(d,je(v))})}function Vf(d,h){if(!d||!d.length)return[];var v=Cc(d);return null==h?v:un(v,function(x){return Ti(h,B,x)})}var TC=vt(function(d,h){return ln(d)?tu(d,h):[]}),MC=vt(function(d){return Fy(Bo(d,ln))}),RC=vt(function(d){var h=cn(d);return ln(h)&&(h=B),Fy(Bo(d,ln),Ge(h,2))}),p0=vt(function(d){var h=cn(d);return h="function"==typeof h?h:B,Fy(Bo(d,ln),B,h)}),kC=vt(Cc),Cg=vt(function(d){var h=d.length,v=h>1?d[h-1]:B;return v="function"==typeof v?(d.pop(),v):B,Vf(d,v)});function _g(d){var h=S(d);return h.__chain__=!0,h}function ar(d,h){return h(d)}var Wl=bs(function(d){var h=d.length,v=h?d[0]:0,x=this.__wrapped__,D=function(T){return Ml(T,d)};return!(h>1||this.__actions__.length)&&x instanceof At&&bo(v)?((x=x.slice(v,+v+(h?1:0))).__actions__.push({func:ar,args:[D],thisArg:B}),new ui(x,this.__chain__).thru(function(T){return h&&!T.length&&T.push(B),T})):this.thru(D)}),w0=ag(function(d,h,v){qt.call(d,v)?++d[v]:Ke(d,v,1)}),UC=Vy(zl),jC=Vy(wg);function Hl(d,h){return(at(d)?qi:In)(d,Ge(h,3))}function Dg(d,h){return(at(d)?Np:Ir)(d,Ge(h,3))}var C0=ag(function(d,h,v){qt.call(d,v)?d[v].push(h):Ke(d,v,[h])}),E0=vt(function(d,h,v){var x=-1,D="function"==typeof h,T=di(d)?ie(d.length):[];return In(d,function(L){T[++x]=D?Ti(h,L,v):Af(L,h,v)}),T}),zC=ag(function(d,h,v){Ke(d,v,h)});function Wf(d,h){return(at(d)?un:Xp)(d,Ge(h,3))}var WC=ag(function(d,h,v){d[v?0:1].push(h)},function(){return[[],[]]}),Ig=vt(function(d,h){if(null==d)return[];var v=h.length;return v>1&&or(d,h[0],h[1])?h=[]:v>2&&or(h[0],h[1],h[2])&&(h=[h[0]]),Zp(d,ir(h,1),[])}),Hf=my||function(){return nr.Date.now()};function ql(d,h,v){return h=v?B:h,ws(d,128,B,B,B,B,h=d&&null==h?d.length:h)}function T0(d,h){var v;if("function"!=typeof h)throw new oi(Qr);return d=dt(d),function(){return--d>0&&(v=h.apply(this,arguments)),d<=1&&(h=B),v}}var qf=vt(function(d,h,v){var x=1;if(v.length){var D=hs(v,mc(qf));x|=32}return ws(d,x,h,v,D)}),xs=vt(function(d,h,v){var x=3;if(v.length){var D=hs(v,mc(xs));x|=32}return ws(h,x,d,v,D)});function Tg(d,h,v){var x,D,T,L,H,Y,fe=0,he=!1,ne=!1,M=!0;if("function"!=typeof d)throw new oi(Qr);function Ne(On){var Ni=x,Ao=D;return x=D=B,fe=On,L=d.apply(Ao,Ni)}function Je(On){var Ni=On-Y;return Y===B||Ni>=h||Ni<0||ne&&On-fe>=T}function Ct(){var On=Hf();if(Je(On))return wt(On);H=wc(Ct,function pt(On){var sh=h-(On-Y);return ne?Xr(sh,T-(On-fe)):sh}(On))}function wt(On){return H=B,M&&x?Ne(On):(x=D=B,L)}function Pr(){var On=Hf(),Ni=Je(On);if(x=arguments,D=this,Y=On,Ni){if(H===B)return function ve(On){return fe=On,H=wc(Ct,h),he?Ne(On):L}(Y);if(ne)return Ly(H),H=wc(Ct,h),Ne(Y)}return H===B&&(H=wc(Ct,h)),L}return h=eo(h)||0,on(v)&&(he=!!v.leading,T=(ne="maxWait"in v)?Rn(eo(v.maxWait)||0,h):T,M="trailing"in v?!!v.trailing:M),Pr.cancel=function yr(){H!==B&&Ly(H),fe=0,x=Y=D=H=B},Pr.flush=function kr(){return H===B?L:wt(Hf())},Pr}var QC=vt(function(d,h){return Pn(d,1,h)}),YC=vt(function(d,h,v){return Pn(d,eo(h)||0,v)});function Mg(d,h){if("function"!=typeof d||null!=h&&"function"!=typeof h)throw new oi(Qr);var v=function(){var x=arguments,D=h?h.apply(this,x):x[0],T=v.cache;if(T.has(D))return T.get(D);var L=d.apply(this,x);return v.cache=T.set(D,L)||T,L};return v.cache=new(Mg.Cache||Ki),v}function uu(d){if("function"!=typeof d)throw new oi(Qr);return function(){var h=arguments;switch(h.length){case 0:return!d.call(this);case 1:return!d.call(this,h[0]);case 2:return!d.call(this,h[0],h[1]);case 3:return!d.call(this,h[0],h[1],h[2])}return!d.apply(this,h)}}Mg.Cache=Ki;var Rg=dc(function(d,h){var v=(h=1==h.length&&at(h[0])?un(h[0],Mi(Ge())):un(ir(h,1),Mi(Ge()))).length;return vt(function(x){for(var D=-1,T=Xr(x.length,v);++D<T;)x[D]=h[D].call(this,x[D]);return Ti(d,this,x)})}),Gl=vt(function(d,h){var v=hs(h,mc(Gl));return ws(d,32,B,h,v)}),cu=vt(function(d,h){var v=hs(h,mc(cu));return ws(d,64,B,h,v)}),kg=bs(function(d,h){return ws(d,256,B,B,B,h)});function Zi(d,h){return d===h||d!=d&&h!=h}var ZC=Fl(Ey),$C=Fl(function(d,h){return d>=h}),Cs=nC(function(){return arguments}())?nC:function(d){return dn(d)&&qt.call(d,"callee")&&!ai.call(d,"callee")},at=ie.isArray,e_=Ju?Mi(Ju):function vT(d){return dn(d)&&ci(d)==ul};function di(d){return null!=d&&Dc(d.length)&&!_s(d)}function ln(d){return dn(d)&&di(d)}var Go=xl||Rc,t_=Op?Mi(Op):function yT(d){return dn(d)&&ci(d)==Vd};function Ec(d){if(!dn(d))return!1;var h=ci(d);return h==Wd||"[object DOMException]"==h||"string"==typeof d.message&&"string"==typeof d.name&&!Yf(d)}function _s(d){if(!on(d))return!1;var h=ci(d);return h==wp||h==Mn||"[object AsyncFunction]"==h||"[object Proxy]"==h}function Lg(d){return"number"==typeof d&&d==dt(d)}function Dc(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=as}function on(d){var h=typeof d;return null!=d&&("object"==h||"function"==h)}function dn(d){return null!=d&&"object"==typeof d}var Ug=nt?Mi(nt):function wT(d){return dn(d)&&Vn(d)==Ei};function P0(d){return"number"==typeof d||dn(d)&&ci(d)==ja}function Yf(d){if(!dn(d)||ci(d)!=Bn)return!1;var h=si(d);if(null===h)return!0;var v=qt.call(h,"constructor")&&h.constructor;return"function"==typeof v&&v instanceof v&&Al.call(v)==py}var Sc=Pt?Mi(Pt):function bT(d){return dn(d)&&ci(d)==zu},Vg=kx?Mi(kx):function Ty(d){return dn(d)&&Vn(d)==Er};function Xl(d){return"string"==typeof d||!at(d)&&dn(d)&&ci(d)==Ys}function fi(d){return"symbol"==typeof d||dn(d)&&ci(d)==sl}var $i=sy?Mi(sy):function My(d){return dn(d)&&Dc(d.length)&&!!en[ci(d)]},a_=Fl(Yp),u_=Fl(function(d,h){return d<=h});function hi(d){if(!d)return[];if(di(d))return Xl(d)?Gi(d):Sn(d);if(En&&d[En])return function rf(K){for(var ae,ie=[];!(ae=K.next()).done;)ie.push(ae.value);return ie}(d[En]());var h=Vn(d);return(h==Ei?wl:h==Er?Bp:Tc)(d)}function mr(d){return d?(d=eo(d))===Uu||d===-Uu?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function dt(d){var h=mr(d),v=h%1;return h==h?v?h-v:h:0}function O0(d){return d?vo(dt(d),0,Hi):0}function eo(d){if("number"==typeof d)return d;if(fi(d))return NaN;if(on(d)){var h="function"==typeof d.valueOf?d.valueOf():d;d=on(h)?h+"":h}if("string"!=typeof d)return 0===d?d:+d;d=ly(d);var v=tT.test(d);return v||Zv.test(d)?lT(d.slice(2),v?2:8):Jv.test(d)?NaN:+d}function N0(d){return Xi(d,pi(d))}function jt(d){return null==d?"":Mr(d)}var F0=ru(function(d,h){if(yc(h)||di(h))Xi(h,vr(h),d);else for(var v in h)qt.call(h,v)&&ms(d,v,h[v])}),B0=ru(function(d,h){Xi(h,pi(h),d)}),Xf=ru(function(d,h,v,x){Xi(h,pi(h),d,x)}),l_=ru(function(d,h,v,x){Xi(h,vr(h),d,x)}),d_=bs(Ml),Es=vt(function(d,h){d=$t(d);var v=-1,x=h.length,D=x>2?h[2]:B;for(D&&or(h[0],h[1],D)&&(x=1);++v<x;)for(var T=h[v],L=pi(T),H=-1,Y=L.length;++H<Y;){var fe=L[H],he=d[fe];(he===B||Zi(he,Vr[fe])&&!qt.call(d,fe))&&(d[fe]=T[fe])}return d}),Jl=vt(function(d){return d.push(B,na),Ti(H0,B,d)});function z0(d,h,v){var x=null==d?B:vs(d,h);return x===B?v:x}function Zf(d,h){return null!=d&&Nf(d,h,pT)}var f_=If(function(d,h,v){null!=h&&"function"!=typeof h.toString&&(h=lf.call(h)),d[h]=v},nw(Oi)),h_=If(function(d,h,v){null!=h&&"function"!=typeof h.toString&&(h=lf.call(h)),qt.call(d,h)?d[h].push(v):d[h]=[v]},Ge),p_=vt(Af);function vr(d){return di(d)?Za(d):xf(d)}function pi(d){return di(d)?Za(d,!0):function iC(d){if(!on(d))return function Bf(d){var h=[];if(null!=d)for(var v in $t(d))h.push(v);return h}(d);var h=yc(d),v=[];for(var x in d)"constructor"==x&&(h||!qt.call(d,x))||v.push(x);return v}(d)}var g_=ru(function(d,h,v){cc(d,h,v)}),H0=ru(function(d,h,v,x){cc(d,h,v,x)}),q0=bs(function(d,h){var v={};if(null==d)return v;var x=!1;h=un(h,function(T){return T=ys(T,d),x||(x=T.length>1),T}),Xi(d,Pf(d),v),x&&(v=jn(v,7,rn));for(var D=h.length;D--;)Ol(v,h[D]);return v}),G0=bs(function(d,h){return null==d?{}:function ky(d,h){return $p(d,h,function(v,x){return Zf(d,x)})}(d,h)});function eh(d,h){if(null==d)return{};var v=un(Pf(d),function(x){return[x]});return h=Ge(h),$p(d,v,function(x,D){return h(x,D[0])})}var K0=Rf(vr),He=Rf(pi);function Tc(d){return null==d?[]:Fp(d,vr(d))}var x_=li(function(d,h,v){return h=h.toLowerCase(),d+(v?Q0(h):h)});function Q0(d){return sa(jt(d).toLowerCase())}function Y0(d){return(d=jt(d))&&d.replace(qu,Ka).replace(Sx,"")}var E_=li(function(d,h,v){return d+(v?"-":"")+h.toLowerCase()}),D_=li(function(d,h,v){return d+(v?" ":"")+h.toLowerCase()}),I_=Ji("toLowerCase"),KT=li(function(d,h,v){return d+(v?"_":"")+h.toLowerCase()}),YT=li(function(d,h,v){return d+(v?" ":"")+sa(h)}),ew=li(function(d,h,v){return d+(v?" ":"")+h.toUpperCase()}),sa=Ji("toUpperCase");function mi(d,h,v){return d=jt(d),(h=v?B:h)===B?function nf(K){return iy.test(K)}(d)?function Up(K){return K.match(Xd)||[]}(d):function Ox(K){return K.match(eT)||[]}(d):d.match(h)||[]}var Ds=vt(function(d,h){try{return Ti(d,B,h)}catch(v){return Ec(v)?v:new it(v)}}),tw=bs(function(d,h){return qi(h,function(v){v=Wo(v),Ke(d,v,qf(d[v],d))}),d});function nw(d){return function(){return d}}var rw=Wy(),iw=Wy(!0);function Oi(d){return d}function Ko(d){return nu("function"==typeof d?d:jn(d,1))}var R_=vt(function(d,h){return function(v){return Af(v,d,h)}}),Mc=vt(function(d,h){return function(v){return Af(d,v,h)}});function $l(d,h,v){var x=vr(h),D=bf(h,x);null==v&&(!on(h)||!D.length&&x.length)&&(v=h,h=d,d=this,D=bf(h,vr(h)));var T=!(on(v)&&"chain"in v&&!v.chain),L=_s(d);return qi(D,function(H){var Y=h[H];d[H]=Y,L&&(d.prototype[H]=function(){var fe=this.__chain__;if(T||fe){var he=d(this.__wrapped__);return(he.__actions__=Sn(this.__actions__)).push({func:Y,args:arguments,thisArg:d}),he.__chain__=fe,he}return Y.apply(d,Ha([this.value()],arguments))})}),d}function ed(){}var k_=gc(un),P_=gc(Dt),sw=gc(ml);function aw(d){return cg(d)?je(Wo(d)):function sC(d){return function(h){return vs(h,d)}}(d)}var N_=Tf(),uw=Tf(!0);function lu(){return[]}function Rc(){return!1}var lw=pc(function(d,h){return d+h},0),dw=Mf("ceil"),L_=pc(function(d,h){return d/h},1),$T=Mf("floor"),gw=pc(function(d,h){return d*h},1),oh=Mf("round"),td=pc(function(d,h){return d-h},0);return S.after=function oa(d,h){if("function"!=typeof h)throw new oi(Qr);return d=dt(d),function(){if(--d<1)return h.apply(this,arguments)}},S.ary=ql,S.assign=F0,S.assignIn=B0,S.assignInWith=Xf,S.assignWith=l_,S.at=d_,S.before=T0,S.bind=qf,S.bindAll=tw,S.bindKey=xs,S.castArray=function Ng(){if(!arguments.length)return[];var d=arguments[0];return at(d)?d:[d]},S.chain=_g,S.chunk=function bc(d,h,v){h=(v?or(d,h,v):h===B)?1:Rn(dt(h),0);var x=null==d?0:d.length;if(!x||h<1)return[];for(var D=0,T=0,L=ie(Xa(x/h));D<x;)L[T++]=zn(d,D,D+=h);return L},S.compact=function sr(d){for(var h=-1,v=null==d?0:d.length,x=0,D=[];++h<v;){var T=d[h];T&&(D[x++]=T)}return D},S.concat=function mC(){var d=arguments.length;if(!d)return[];for(var h=ie(d-1),v=arguments[0],x=d;x--;)h[x-1]=arguments[x];return Ha(at(v)?Sn(v):[v],ir(h,1))},S.cond=function JT(d){var h=null==d?0:d.length,v=Ge();return d=h?un(d,function(x){if("function"!=typeof x[1])throw new oi(Qr);return[v(x[0]),x[1]]}):[],vt(function(x){for(var D=-1;++D<h;){var T=d[D];if(Ti(T[0],this,x))return Ti(T[1],this,x)}})},S.conforms=function M_(d){return function vf(d){var h=vr(d);return function(v){return eu(v,d,h)}}(jn(d,1))},S.constant=nw,S.countBy=w0,S.create=function Jf(d,h){var v=rc(d);return null==h?v:Tl(v,h)},S.curry=function KC(d,h,v){var x=ws(d,8,B,B,B,B,B,h=v?B:h);return x.placeholder=KC.placeholder,x},S.curryRight=function Sg(d,h,v){var x=ws(d,16,B,B,B,B,B,h=v?B:h);return x.placeholder=Sg.placeholder,x},S.debounce=Tg,S.defaults=Es,S.defaultsDeep=Jl,S.defer=QC,S.delay=YC,S.difference=vC,S.differenceBy=vg,S.differenceWith=yC,S.drop=function $y(d,h,v){var x=null==d?0:d.length;return x?zn(d,(h=v||h===B?1:dt(h))<0?0:h,x):[]},S.dropRight=function Uf(d,h,v){var x=null==d?0:d.length;return x?zn(d,0,(h=x-(h=v||h===B?1:dt(h)))<0?0:h):[]},S.dropRightWhile=function wC(d,h){return d&&d.length?Xe(d,Ge(h,3),!0,!0):[]},S.dropWhile=function e0(d,h){return d&&d.length?Xe(d,Ge(h,3),!0):[]},S.fill=function yg(d,h,v,x){var D=null==d?0:d.length;return D?(v&&"number"!=typeof v&&or(d,h,v)&&(v=0,x=D),function yf(d,h,v,x){var D=d.length;for((v=dt(v))<0&&(v=-v>D?0:D+v),(x=x===B||x>D?D:dt(x))<0&&(x+=D),x=v>x?0:O0(x);v<x;)d[v++]=h;return d}(d,h,v,x)):[]},S.filter=function LC(d,h){return(at(d)?Bo:Qi)(d,Ge(h,3))},S.flatMap=function b0(d,h){return ir(Wf(d,h),1)},S.flatMapDeep=function A0(d,h){return ir(Wf(d,h),Uu)},S.flatMapDepth=function x0(d,h,v){return v=v===B?1:dt(v),ir(Wf(d,h),v)},S.flatten=t0,S.flattenDeep=function bC(d){return null!=d&&d.length?ir(d,Uu):[]},S.flattenDepth=function AC(d,h){return null!=d&&d.length?ir(d,h=h===B?1:dt(h)):[]},S.flip=function OT(d){return ws(d,512)},S.flow=rw,S.flowRight=iw,S.fromPairs=function n0(d){for(var h=-1,v=null==d?0:d.length,x={};++h<v;){var D=d[h];x[D[0]]=D[1]}return x},S.functions=function Wg(d){return null==d?[]:bf(d,vr(d))},S.functionsIn=function Hg(d){return null==d?[]:bf(d,pi(d))},S.groupBy=C0,S.initial=function xC(d){return null!=d&&d.length?zn(d,0,-1):[]},S.intersection=CC,S.intersectionBy=_T,S.intersectionWith=s0,S.invert=f_,S.invertBy=h_,S.invokeMap=E0,S.iteratee=Ko,S.keyBy=zC,S.keys=vr,S.keysIn=pi,S.map=Wf,S.mapKeys=function V0(d,h){var v={};return h=Ge(h,3),Yi(d,function(x,D,T){Ke(v,h(x,D,T),x)}),v},S.mapValues=function W0(d,h){var v={};return h=Ge(h,3),Yi(d,function(x,D,T){Ke(v,D,h(x,D,T))}),v},S.matches=function Xg(d){return Jp(jn(d,1))},S.matchesProperty=function Jg(d,h){return Ry(d,jn(h,1))},S.memoize=Mg,S.merge=g_,S.mergeWith=H0,S.method=R_,S.methodOf=Mc,S.mixin=$l,S.negate=uu,S.nthArg=function rh(d){return d=dt(d),vt(function(h){return yo(h,d)})},S.omit=q0,S.omitBy=function $f(d,h){return eh(d,uu(Ge(h)))},S.once=function XC(d){return T0(2,d)},S.orderBy=function VC(d,h,v,x){return null==d?[]:(at(h)||(h=null==h?[]:[h]),at(v=x?B:v)||(v=null==v?[]:[v]),Zp(d,h,v))},S.over=k_,S.overArgs=Rg,S.overEvery=P_,S.overSome=sw,S.partial=Gl,S.partialRight=cu,S.partition=WC,S.pick=G0,S.pickBy=eh,S.property=aw,S.propertyOf=function O_(d){return function(h){return null==d?B:vs(d,h)}},S.pull=DT,S.pullAll=jf,S.pullAllBy=function Ho(d,h,v){return d&&d.length&&h&&h.length?Py(d,h,Ge(v,2)):d},S.pullAllWith=function c0(d,h,v){return d&&d.length&&h&&h.length?Py(d,h,B,v):d},S.pullAt=Ac,S.range=N_,S.rangeRight=uw,S.rearg=kg,S.reject=function I0(d,h){return(at(d)?Bo:Qi)(d,uu(Ge(h,3)))},S.remove=function _C(d,h){var v=[];if(!d||!d.length)return v;var x=-1,D=[],T=d.length;for(h=Ge(h,3);++x<T;){var L=d[x];h(L,x,d)&&(v.push(L),D.push(x))}return Gt(d,D),v},S.rest=function Pg(d,h){if("function"!=typeof d)throw new oi(Qr);return vt(d,h=h===B?h:dt(h))},S.reverse=bg,S.sampleSize=function qC(d,h,v){return h=(v?or(d,h,v):h===B)?1:dt(h),(at(d)?Il:lc)(d,h)},S.set=function gi(d,h,v){return null==d?d:Tr(d,h,v)},S.setWith=function v_(d,h,v,x){return x="function"==typeof x?x:B,null==d?d:Tr(d,h,v,x)},S.shuffle=function PT(d){return(at(d)?ac:aC)(d)},S.slice=function l0(d,h,v){var x=null==d?0:d.length;return x?(v&&"number"!=typeof v&&or(d,h,v)?(h=0,v=x):(h=null==h?0:dt(h),v=v===B?x:dt(v)),zn(d,h,v)):[]},S.sortBy=Ig,S.sortedUniq=function xc(d){return d&&d.length?Ef(d):[]},S.sortedUniqBy=function qo(d,h){return d&&d.length?Ef(d,Ge(h,2)):[]},S.split=function QT(d,h,v){return v&&"number"!=typeof v&&or(d,h,v)&&(h=v=B),(v=v===B?Hi:v>>>0)?(d=jt(d))&&("string"==typeof h||null!=h&&!Sc(h))&&!(h=Mr(h))&&Qa(d)?ta(Gi(d),0,v):d.split(h,v):[]},S.spread=function Kl(d,h){if("function"!=typeof d)throw new oi(Qr);return h=null==h?0:Rn(dt(h),0),vt(function(v){var x=v[h],D=ta(v,0,h);return x&&Ha(D,x),Ti(d,this,D)})},S.tail=function d0(d){var h=null==d?0:d.length;return h?zn(d,1,h):[]},S.take=function DC(d,h,v){return d&&d.length?zn(d,0,(h=v||h===B?1:dt(h))<0?0:h):[]},S.takeRight=function Ag(d,h,v){var x=null==d?0:d.length;return x?zn(d,(h=x-(h=v||h===B?1:dt(h)))<0?0:h,x):[]},S.takeRightWhile=function Ie(d,h){return d&&d.length?Xe(d,Ge(h,3),!1,!0):[]},S.takeWhile=function IC(d,h){return d&&d.length?Xe(d,Ge(h,3)):[]},S.tap=function Eg(d,h){return h(d),d},S.throttle=function Gf(d,h,v){var x=!0,D=!0;if("function"!=typeof d)throw new oi(Qr);return on(v)&&(x="leading"in v?!!v.leading:x,D="trailing"in v?!!v.trailing:D),Tg(d,h,{leading:x,maxWait:h,trailing:D})},S.thru=ar,S.toArray=hi,S.toPairs=K0,S.toPairsIn=He,S.toPath=function cw(d){return at(d)?un(d,Wo):fi(d)?[d]:Sn(ra(jt(d)))},S.toPlainObject=N0,S.transform=function qg(d,h,v){var x=at(d),D=x||Go(d)||$i(d);if(h=Ge(h,4),null==v){var T=d&&d.constructor;v=D?x?new T:[]:on(d)&&_s(T)?rc(si(d)):{}}return(D?qi:Yi)(d,function(L,H,Y){return h(v,L,H,Y)}),v},S.unary=function _c(d){return ql(d,1)},S.union=xg,S.unionBy=Vl,S.unionWith=SC,S.uniq=function f0(d){return d&&d.length?wo(d):[]},S.uniqBy=function h0(d,h){return d&&d.length?wo(d,Ge(h,2)):[]},S.uniqWith=function zf(d,h){return h="function"==typeof h?h:B,d&&d.length?wo(d,B,h):[]},S.unset=function y_(d,h){return null==d||Ol(d,h)},S.unzip=Cc,S.unzipWith=Vf,S.update=function w_(d,h,v){return null==d?d:ea(d,h,rg(v))},S.updateWith=function b_(d,h,v,x){return x="function"==typeof x?x:B,null==d?d:ea(d,h,rg(v),x)},S.values=Tc,S.valuesIn=function A_(d){return null==d?[]:Fp(d,pi(d))},S.without=TC,S.words=mi,S.wrap=function Og(d,h){return Gl(rg(h),d)},S.xor=MC,S.xorBy=RC,S.xorWith=p0,S.zip=kC,S.zipObject=function PC(d,h){return By(d||[],h||[],ms)},S.zipObjectDeep=function Jr(d,h){return By(d||[],h||[],Tr)},S.zipWith=Cg,S.entries=K0,S.entriesIn=He,S.extend=B0,S.extendWith=Xf,$l(S,S),S.add=lw,S.attempt=Ds,S.camelCase=x_,S.capitalize=Q0,S.ceil=dw,S.clamp=function VT(d,h,v){return v===B&&(v=h,h=B),v!==B&&(v=(v=eo(v))==v?v:0),h!==B&&(h=(h=eo(h))==h?h:0),vo(eo(d),h,v)},S.clone=function Kf(d){return jn(d,4)},S.cloneDeep=function Fg(d){return jn(d,5)},S.cloneDeepWith=function Ql(d,h){return jn(d,5,h="function"==typeof h?h:B)},S.cloneWith=function NT(d,h){return jn(d,4,h="function"==typeof h?h:B)},S.conformsTo=function JC(d,h){return null==h||eu(d,h,vr(h))},S.deburr=Y0,S.defaultTo=function ZT(d,h){return null==d||d!=d?h:d},S.divide=L_,S.endsWith=function X0(d,h,v){d=jt(d),h=Mr(h);var x=d.length,D=v=v===B?x:vo(dt(v),0,x);return(v-=h.length)>=0&&d.slice(v,D)==h},S.eq=Zi,S.escape=function C_(d){return(d=jt(d))&&Kv.test(d)?d.replace(Va,Lx):d},S.escapeRegExp=function __(d){return(d=jt(d))&&Qe.test(d)?d.replace(Gd,"\\$&"):d},S.every=function BC(d,h,v){var x=at(d)?Dt:Kp;return v&&or(d,h,v)&&(h=B),x(d,Ge(h,3))},S.find=UC,S.findIndex=zl,S.findKey=function L0(d,h){return uy(d,Ge(h,3),Yi)},S.findLast=jC,S.findLastIndex=wg,S.findLastKey=function U0(d,h){return uy(d,Ge(h,3),wf)},S.floor=$T,S.forEach=Hl,S.forEachRight=Dg,S.forIn=function j0(d,h){return null==d?d:Qp(d,Ge(h,3),pi)},S.forInRight=function LT(d,h){return null==d?d:_y(d,Ge(h,3),pi)},S.forOwn=function UT(d,h){return d&&Yi(d,Ge(h,3))},S.forOwnRight=function jT(d,h){return d&&wf(d,Ge(h,3))},S.get=z0,S.gt=ZC,S.gte=$C,S.has=function zT(d,h){return null!=d&&Nf(d,h,hT)},S.hasIn=Zf,S.head=r0,S.identity=Oi,S.includes=function _0(d,h,v,x){d=di(d)?d:Tc(d),v=v&&!x?dt(v):0;var D=d.length;return v<0&&(v=Rn(D+v,0)),Xl(d)?v<=D&&d.indexOf(h,v)>-1:!!D&&co(d,h,v)>-1},S.indexOf=function o0(d,h,v){var x=null==d?0:d.length;if(!x)return-1;var D=null==v?0:dt(v);return D<0&&(D=Rn(x+D,0)),co(d,h,D)},S.inRange=function WT(d,h,v){return h=mr(h),v===B?(v=h,h=0):v=mr(v),function gT(d,h,v){return d>=Xr(h,v)&&d<Rn(h,v)}(d=eo(d),h,v)},S.invoke=p_,S.isArguments=Cs,S.isArray=at,S.isArrayBuffer=e_,S.isArrayLike=di,S.isArrayLikeObject=ln,S.isBoolean=function M0(d){return!0===d||!1===d||dn(d)&&ci(d)==ol},S.isBuffer=Go,S.isDate=t_,S.isElement=function FT(d){return dn(d)&&1===d.nodeType&&!Yf(d)},S.isEmpty=function BT(d){if(null==d)return!0;if(di(d)&&(at(d)||"string"==typeof d||"function"==typeof d.splice||Go(d)||$i(d)||Cs(d)))return!d.length;var h=Vn(d);if(h==Ei||h==Er)return!d.size;if(yc(d))return!xf(d).length;for(var v in d)if(qt.call(d,v))return!1;return!0},S.isEqual=function Yl(d,h){return uc(d,h)},S.isEqualWith=function n_(d,h,v){var x=(v="function"==typeof v?v:B)?v(d,h):B;return x===B?uc(d,h,B,v):!!x},S.isError=Ec,S.isFinite=function Bg(d){return"number"==typeof d&&yy(d)},S.isFunction=_s,S.isInteger=Lg,S.isLength=Dc,S.isMap=Ug,S.isMatch=function R0(d,h){return d===h||Sy(d,h,vc(h))},S.isMatchWith=function k0(d,h,v){return v="function"==typeof v?v:B,Sy(d,h,vc(h),v)},S.isNaN=function Qf(d){return P0(d)&&d!=+d},S.isNative=function jg(d){if(CT(d))throw new it("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return rC(d)},S.isNil=function r_(d){return null==d},S.isNull=function Ic(d){return null===d},S.isNumber=P0,S.isObject=on,S.isObjectLike=dn,S.isPlainObject=Yf,S.isRegExp=Sc,S.isSafeInteger=function zg(d){return Lg(d)&&d>=-as&&d<=as},S.isSet=Vg,S.isString=Xl,S.isSymbol=fi,S.isTypedArray=$i,S.isUndefined=function i_(d){return d===B},S.isWeakMap=function o_(d){return dn(d)&&Vn(d)==al},S.isWeakSet=function s_(d){return dn(d)&&"[object WeakSet]"==ci(d)},S.join=function a0(d,h){return null==d?"":Vp.call(d,h)},S.kebabCase=E_,S.last=cn,S.lastIndexOf=function ET(d,h,v){var x=null==d?0:d.length;if(!x)return-1;var D=x;return v!==B&&(D=(D=dt(v))<0?Rn(x+D,0):Xr(D,x-1)),h==h?function $u(K,ae,ie){for(var Se=ie+1;Se--;)if(K[Se]===ae)return Se;return Se}(d,h,D):vl(d,fs,D,!0)},S.lowerCase=D_,S.lowerFirst=I_,S.lt=a_,S.lte=u_,S.max=function ih(d){return d&&d.length?jo(d,Oi,Ey):B},S.maxBy=function U_(d,h){return d&&d.length?jo(d,Ge(h,2),Ey):B},S.mean=function fw(d){return cy(d,Oi)},S.meanBy=function hw(d,h){return cy(d,Ge(h,2))},S.min=function pw(d){return d&&d.length?jo(d,Oi,Yp):B},S.minBy=function em(d,h){return d&&d.length?jo(d,Ge(h,2),Yp):B},S.stubArray=lu,S.stubFalse=Rc,S.stubObject=function Zg(){return{}},S.stubString=function F_(){return""},S.stubTrue=function B_(){return!0},S.multiply=gw,S.nth=function u0(d,h){return d&&d.length?yo(d,dt(h)):B},S.noConflict=function ow(){return nr._===this&&(nr._=Wx),this},S.noop=ed,S.now=Hf,S.pad=function S_(d,h,v){d=jt(d);var x=(h=dt(h))?bl(d):0;if(!h||x>=h)return d;var D=(h-x)/2;return Sf(hf(D),v)+d+Sf(Xa(D),v)},S.padEnd=function Gg(d,h,v){d=jt(d);var x=(h=dt(h))?bl(d):0;return h&&x<h?d+Sf(h-x,v):d},S.padStart=function HT(d,h,v){d=jt(d);var x=(h=dt(h))?bl(d):0;return h&&x<h?Sf(h-x,v)+d:d},S.parseInt=function qT(d,h,v){return v||null==h?h=0:h&&(h=+h),qx(jt(d).replace(Dp,""),h||0)},S.random=function Zl(d,h,v){if(v&&"boolean"!=typeof v&&or(d,h,v)&&(h=v=B),v===B&&("boolean"==typeof h?(v=h,h=B):"boolean"==typeof d&&(v=d,d=B)),d===B&&h===B?(d=0,h=1):(d=mr(d),h===B?(h=d,d=0):h=mr(h)),d>h){var x=d;d=h,h=x}if(v||d%1||h%1){var D=pf();return Xr(d+D*(h-d+cT("1e-"+((D+"").length-1))),h)}return Rl(d,h)},S.reduce=function D0(d,h,v){var x=at(d)?ay:qe,D=arguments.length<3;return x(d,Ge(h,4),v,D,In)},S.reduceRight=function kT(d,h,v){var x=at(d)?gl:qe,D=arguments.length<3;return x(d,Ge(h,4),v,D,Ir)},S.repeat=function Kg(d,h,v){return h=(v?or(d,h,v):h===B)?1:dt(h),Sr(jt(d),h)},S.replace=function GT(){var d=arguments,h=jt(d[0]);return d.length<3?h:h.replace(d[1],d[2])},S.result=function m_(d,h,v){var x=-1,D=(h=ys(h,d)).length;for(D||(D=1,d=B);++x<D;){var T=null==d?B:d[Wo(h[x])];T===B&&(x=D,T=v),d=_s(T)?T.call(d):T}return d},S.round=oh,S.runInContext=K,S.sample=function HC(d){return(at(d)?vn:Pl)(d)},S.size=function GC(d){if(null==d)return 0;if(di(d))return Xl(d)?bl(d):d.length;var h=Vn(d);return h==Ei||h==Er?d.size:xf(d).length},S.snakeCase=KT,S.some=function S0(d,h,v){var x=at(d)?ml:Ny;return v&&or(d,h,v)&&(h=B),x(d,Ge(h,3))},S.sortedIndex=function IT(d,h){return Cf(d,h)},S.sortedIndexBy=function ST(d,h,v){return _f(d,h,Ge(v,2))},S.sortedIndexOf=function TT(d,h){var v=null==d?0:d.length;if(v){var x=Cf(d,h);if(x<v&&Zi(d[x],h))return x}return-1},S.sortedLastIndex=function MT(d,h){return Cf(d,h,!0)},S.sortedLastIndexBy=function RT(d,h,v){return _f(d,h,Ge(v,2),!0)},S.sortedLastIndexOf=function EC(d,h){if(null!=d&&d.length){var x=Cf(d,h,!0)-1;if(Zi(d[x],h))return x}return-1},S.startCase=YT,S.startsWith=function XT(d,h,v){return d=jt(d),v=null==v?0:vo(dt(v),0,d.length),h=Mr(h),d.slice(v,v+h.length)==h},S.subtract=td,S.sum=function mw(d){return d&&d.length?yl(d,Oi):0},S.sumBy=function tm(d,h){return d&&d.length?yl(d,Ge(h,2)):0},S.template=function T_(d,h,v){var x=S.templateSettings;v&&or(d,h,v)&&(h=B),d=jt(d),h=Xf({},h,x,Rr);var H,Y,D=Xf({},h.imports,x.imports,Rr),T=vr(D),L=Fp(D,T),fe=0,he=h.interpolate||ls,ne="__p += '",M=af((h.escape||ls).source+"|"+he.source+"|"+(he===Yv?Hu:ls).source+"|"+(h.evaluate||ls).source+"|$","g"),Ne="//# sourceURL="+(qt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ke+"]")+"\n";d.replace(M,function(Je,Ct,wt,yr,kr,Pr){return wt||(wt=yr),ne+=d.slice(fe,Pr).replace(Gu,ii),Ct&&(H=!0,ne+="' +\n__e("+Ct+") +\n'"),kr&&(Y=!0,ne+="';\n"+kr+";\n__p += '"),wt&&(ne+="' +\n((__t = ("+wt+")) == null ? '' : __t) +\n'"),fe=Pr+Je.length,Je}),ne+="';\n";var ve=qt.call(h,"variable")&&h.variable;if(ve){if(Xv.test(ve))throw new it("Invalid `variable` option passed into `_.template`")}else ne="with (obj) {\n"+ne+"\n}\n";ne=(Y?ne.replace(fx,""):ne).replace(Ep,"$1").replace(hx,"$1;"),ne="function("+(ve||"obj")+") {\n"+(ve?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(H?", __e = _.escape":"")+(Y?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ne+"return __p\n}";var pt=Ds(function(){return Ot(T,Ne+"return "+ne).apply(B,L)});if(pt.source=ne,Ec(pt))throw pt;return pt},S.times=function $g(d,h){if((d=dt(d))<1||d>as)return[];var v=Hi,x=Xr(d,Hi);h=Ge(h),d-=Hi;for(var D=qa(x,h);++v<d;)h(v);return D},S.toFinite=mr,S.toInteger=dt,S.toLength=O0,S.toLower=function th(d){return jt(d).toLowerCase()},S.toNumber=eo,S.toSafeInteger=function c_(d){return d?vo(dt(d),-as,as):0===d?d:0},S.toString=jt,S.toUpper=function nh(d){return jt(d).toUpperCase()},S.trim=function Qg(d,h,v){if((d=jt(d))&&(v||h===B))return ly(d);if(!d||!(h=Mr(h)))return d;var x=Gi(d),D=Gi(h);return ta(x,dy(x,D),tf(x,D)+1).join("")},S.trimEnd=function J0(d,h,v){if((d=jt(d))&&(v||h===B))return d.slice(0,lo(d)+1);if(!d||!(h=Mr(h)))return d;var x=Gi(d);return ta(x,0,tf(x,Gi(h))+1).join("")},S.trimStart=function Z0(d,h,v){if((d=jt(d))&&(v||h===B))return d.replace(Dp,"");if(!d||!(h=Mr(h)))return d;var x=Gi(d);return ta(x,dy(x,Gi(h))).join("")},S.truncate=function Yg(d,h){var v=30,x="...";if(on(h)){var D="separator"in h?h.separator:D;v="length"in h?dt(h.length):v,x="omission"in h?Mr(h.omission):x}var T=(d=jt(d)).length;if(Qa(d)){var L=Gi(d);T=L.length}if(v>=T)return d;var H=v-bl(x);if(H<1)return x;var Y=L?ta(L,0,H).join(""):d.slice(0,H);if(D===B)return Y+x;if(L&&(H+=Y.length-H),Sc(D)){if(d.slice(H).search(D)){var fe,he=Y;for(D.global||(D=af(D.source,jt(dl.exec(D))+"g")),D.lastIndex=0;fe=D.exec(he);)var ne=fe.index;Y=Y.slice(0,ne===B?H:ne)}}else if(d.indexOf(Mr(D),H)!=H){var M=Y.lastIndexOf(D);M>-1&&(Y=Y.slice(0,M))}return Y+x},S.unescape=function $0(d){return(d=jt(d))&&$2.test(d)?d.replace(qd,Rt):d},S.uniqueId=function du(d){var h=++Vx;return jt(d)+h},S.upperCase=ew,S.upperFirst=sa,S.each=Hl,S.eachRight=Dg,S.first=r0,$l(S,function(){var d={};return Yi(S,function(h,v){qt.call(S.prototype,v)||(d[v]=h)}),d}(),{chain:!1}),S.VERSION="4.17.21",qi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){S[d].placeholder=S}),qi(["drop","take"],function(d,h){At.prototype[d]=function(v){v=v===B?1:Rn(dt(v),0);var x=this.__filtered__&&!h?new At(this):this.clone();return x.__filtered__?x.__takeCount__=Xr(v,x.__takeCount__):x.__views__.push({size:Xr(v,Hi),type:d+(x.__dir__<0?"Right":"")}),x},At.prototype[d+"Right"]=function(v){return this.reverse()[d](v).reverse()}}),qi(["filter","map","takeWhile"],function(d,h){var v=h+1,x=1==v||3==v;At.prototype[d]=function(D){var T=this.clone();return T.__iteratees__.push({iteratee:Ge(D,3),type:v}),T.__filtered__=T.__filtered__||x,T}}),qi(["head","last"],function(d,h){var v="take"+(h?"Right":"");At.prototype[d]=function(){return this[v](1).value()[0]}}),qi(["initial","tail"],function(d,h){var v="drop"+(h?"":"Right");At.prototype[d]=function(){return this.__filtered__?new At(this):this[v](1)}}),At.prototype.compact=function(){return this.filter(Oi)},At.prototype.find=function(d){return this.filter(d).head()},At.prototype.findLast=function(d){return this.reverse().find(d)},At.prototype.invokeMap=vt(function(d,h){return"function"==typeof d?new At(this):this.map(function(v){return Af(v,d,h)})}),At.prototype.reject=function(d){return this.filter(uu(Ge(d)))},At.prototype.slice=function(d,h){d=dt(d);var v=this;return v.__filtered__&&(d>0||h<0)?new At(v):(d<0?v=v.takeRight(-d):d&&(v=v.drop(d)),h!==B&&(v=(h=dt(h))<0?v.dropRight(-h):v.take(h-d)),v)},At.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},At.prototype.toArray=function(){return this.take(Hi)},Yi(At.prototype,function(d,h){var v=/^(?:filter|find|map|reject)|While$/.test(h),x=/^(?:head|last)$/.test(h),D=S[x?"take"+("last"==h?"Right":""):h],T=x||/^find/.test(h);D&&(S.prototype[h]=function(){var L=this.__wrapped__,H=x?[1]:arguments,Y=L instanceof At,fe=H[0],he=Y||at(L),ne=function(Ct){var wt=D.apply(S,Ha([Ct],H));return x&&M?wt[0]:wt};he&&v&&"function"==typeof fe&&1!=fe.length&&(Y=he=!1);var M=this.__chain__,ve=T&&!M,pt=Y&&!this.__actions__.length;if(!T&&he){L=pt?L:new At(this);var Je=d.apply(L,H);return Je.__actions__.push({func:ar,args:[ne],thisArg:B}),new ui(Je,M)}return ve&&pt?d.apply(this,H):(Je=this.thru(ne),ve?x?Je.value()[0]:Je.value():Je)})}),qi(["pop","push","shift","sort","splice","unshift"],function(d){var h=uf[d],v=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",x=/^(?:pop|shift)$/.test(d);S.prototype[d]=function(){var D=arguments;if(x&&!this.__chain__){var T=this.value();return h.apply(at(T)?T:[],D)}return this[v](function(L){return h.apply(at(L)?L:[],D)})}}),Yi(At.prototype,function(d,h){var v=S[h];if(v){var x=v.name+"";qt.call(ps,x)||(ps[x]=[]),ps[x].push({name:h,func:v})}}),ps[hc(B,2).name]=[{name:"wrapper",func:B}],At.prototype.clone=function mf(){var d=new At(this.__wrapped__);return d.__actions__=Sn(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Sn(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Sn(this.__views__),d},At.prototype.reverse=function oc(){if(this.__filtered__){var d=new At(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},At.prototype.value=function Qx(){var d=this.__wrapped__.value(),h=this.__dir__,v=at(d),x=h<0,D=v?d.length:0,T=function Bl(d,h,v){for(var x=-1,D=v.length;++x<D;){var T=v[x],L=T.size;switch(T.type){case"drop":d+=L;break;case"dropRight":h-=L;break;case"take":h=Xr(h,d+L);break;case"takeRight":d=Rn(d,h-L)}}return{start:d,end:h}}(0,D,this.__views__),L=T.start,H=T.end,Y=H-L,fe=x?H:L-1,he=this.__iteratees__,ne=he.length,M=0,Ne=Xr(Y,this.__takeCount__);if(!v||!x&&D==Y&&Ne==Y)return tg(d,this.__actions__);var ve=[];e:for(;Y--&&M<Ne;){for(var pt=-1,Je=d[fe+=h];++pt<ne;){var Ct=he[pt],yr=Ct.type,kr=(0,Ct.iteratee)(Je);if(2==yr)Je=kr;else if(!kr){if(1==yr)continue e;break e}}ve[M++]=Je}return ve},S.prototype.at=Wl,S.prototype.chain=function g0(){return _g(this)},S.prototype.commit=function m0(){return new ui(this.value(),this.__chain__)},S.prototype.next=function OC(){this.__values__===B&&(this.__values__=hi(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?B:this.__values__[this.__index__++]}},S.prototype.plant=function NC(d){for(var h,v=this;v instanceof ic;){var x=au(v);x.__index__=0,x.__values__=B,h?D.__wrapped__=x:h=x;var D=x;v=v.__wrapped__}return D.__wrapped__=d,h},S.prototype.reverse=function y0(){var d=this.__wrapped__;if(d instanceof At){var h=d;return this.__actions__.length&&(h=new At(this)),(h=h.reverse()).__actions__.push({func:ar,args:[bg],thisArg:B}),new ui(h,this.__chain__)}return this.thru(bg)},S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=function FC(){return tg(this.__wrapped__,this.__actions__)},S.prototype.first=S.prototype.head,En&&(S.prototype[En]=function v0(){return this}),S}();nr._=Ya,(Fu=function(){return Ya}.call(Nu,Oa,Nu,ss))!==B&&(ss.exports=Fu)}.call(this)},82:()=>{},318:()=>{},745:()=>{}},ss=>{ss(ss.s=350)}]);