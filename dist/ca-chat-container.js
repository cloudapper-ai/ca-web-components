(()=>{"use strict";var e,_={},p={};function a(e){var l=p[e];if(void 0!==l)return l.exports;var r=p[e]={id:e,loaded:!1,exports:{}};return _[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=_,e=[],a.O=(l,r,s,c)=>{if(!r){var t=1/0;for(n=0;n<e.length;n++){for(var[r,s,c]=e[n],i=!0,f=0;f<r.length;f++)(!1&c||t>=c)&&Object.keys(a.O).every(h=>a.O[h](r[f]))?r.splice(f--,1):(i=!1,c<t&&(t=c));if(i){e.splice(n--,1);var o=s();void 0!==o&&(l=o)}}return l}c=c||0;for(var n=e.length;n>0&&e[n-1][2]>c;n--)e[n]=e[n-1];e[n]=[r,s,c]},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};a.O.j=s=>0===e[s];var l=(s,c)=>{var f,o,[n,t,i]=c,u=0;if(n.some(d=>0!==e[d])){for(f in t)a.o(t,f)&&(a.m[f]=t[f]);if(i)var v=i(a)}for(s&&s(c);u<n.length;u++)a.o(e,o=n[u])&&e[o]&&e[o][0](),e[o]=0;return a.O(v)},r=self.webpackChunkca_web_components=self.webpackChunkca_web_components||[];r.forEach(l.bind(null,0)),r.push=l.bind(null,r.push.bind(r))})()})();
"use strict";(self.webpackChunkca_web_components=self.webpackChunkca_web_components||[]).push([[429],{332:()=>{!function(e){const n=e.performance;function i(L){n&&n.mark&&n.mark(L)}function o(L,T){n&&n.measure&&n.measure(L,T)}i("Zone");const c=e.__Zone_symbol_prefix||"__zone_symbol__";function a(L){return c+L}const y=!0===e[a("forceDuplicateZoneCheck")];if(e.Zone){if(y||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let d=(()=>{class L{static#e=this.__symbol__=a;static assertZonePatched(){if(e.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=L.current;for(;t.parent;)t=t.parent;return t}static get current(){return U.zone}static get currentTask(){return re}static __load_patch(t,r,k=!1){if(oe.hasOwnProperty(t)){if(!k&&y)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const C="Zone:"+t;i(C),oe[t]=r(e,L,z),o(C,C)}}get parent(){return this._parent}get name(){return this._name}constructor(t,r){this._parent=t,this._name=r?r.name||"unnamed":"<root>",this._properties=r&&r.properties||{},this._zoneDelegate=new v(this,this._parent&&this._parent._zoneDelegate,r)}get(t){const r=this.getZoneWith(t);if(r)return r._properties[t]}getZoneWith(t){let r=this;for(;r;){if(r._properties.hasOwnProperty(t))return r;r=r._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,r){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const k=this._zoneDelegate.intercept(this,t,r),C=this;return function(){return C.runGuarded(k,this,arguments,r)}}run(t,r,k,C){U={parent:U,zone:this};try{return this._zoneDelegate.invoke(this,t,r,k,C)}finally{U=U.parent}}runGuarded(t,r=null,k,C){U={parent:U,zone:this};try{try{return this._zoneDelegate.invoke(this,t,r,k,C)}catch($){if(this._zoneDelegate.handleError(this,$))throw $}}finally{U=U.parent}}runTask(t,r,k){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||J).name+"; Execution: "+this.name+")");if(t.state===x&&(t.type===Q||t.type===w))return;const C=t.state!=E;C&&t._transitionTo(E,A),t.runCount++;const $=re;re=t,U={parent:U,zone:this};try{t.type==w&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,r,k)}catch(l){if(this._zoneDelegate.handleError(this,l))throw l}}finally{t.state!==x&&t.state!==h&&(t.type==Q||t.data&&t.data.isPeriodic?C&&t._transitionTo(A,E):(t.runCount=0,this._updateTaskCount(t,-1),C&&t._transitionTo(x,E,x))),U=U.parent,re=$}}scheduleTask(t){if(t.zone&&t.zone!==this){let k=this;for(;k;){if(k===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);k=k.parent}}t._transitionTo(X,x);const r=[];t._zoneDelegates=r,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(k){throw t._transitionTo(h,X,x),this._zoneDelegate.handleError(this,k),k}return t._zoneDelegates===r&&this._updateTaskCount(t,1),t.state==X&&t._transitionTo(A,X),t}scheduleMicroTask(t,r,k,C){return this.scheduleTask(new p(I,t,r,k,C,void 0))}scheduleMacroTask(t,r,k,C,$){return this.scheduleTask(new p(w,t,r,k,C,$))}scheduleEventTask(t,r,k,C,$){return this.scheduleTask(new p(Q,t,r,k,C,$))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||J).name+"; Execution: "+this.name+")");if(t.state===A||t.state===E){t._transitionTo(G,A,E);try{this._zoneDelegate.cancelTask(this,t)}catch(r){throw t._transitionTo(h,G),this._zoneDelegate.handleError(this,r),r}return this._updateTaskCount(t,-1),t._transitionTo(x,G),t.runCount=0,t}}_updateTaskCount(t,r){const k=t._zoneDelegates;-1==r&&(t._zoneDelegates=null);for(let C=0;C<k.length;C++)k[C]._updateTaskCount(t.type,r)}}return L})();const b={name:"",onHasTask:(L,T,t,r)=>L.hasTask(t,r),onScheduleTask:(L,T,t,r)=>L.scheduleTask(t,r),onInvokeTask:(L,T,t,r,k,C)=>L.invokeTask(t,r,k,C),onCancelTask:(L,T,t,r)=>L.cancelTask(t,r)};class v{constructor(T,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=T,this._parentDelegate=t,this._forkZS=r&&(r&&r.onFork?r:t._forkZS),this._forkDlgt=r&&(r.onFork?t:t._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:t._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:t._interceptZS),this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:t._invokeZS),this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const k=r&&r.onHasTask;(k||t&&t._hasTaskZS)&&(this._hasTaskZS=k?r:b,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=T,r.onScheduleTask||(this._scheduleTaskZS=b,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=b,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=b,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(T,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,T,t):new d(T,t)}intercept(T,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,T,t,r):t}invoke(T,t,r,k,C){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,T,t,r,k,C):t.apply(r,k)}handleError(T,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,T,t)}scheduleTask(T,t){let r=t;if(this._scheduleTaskZS)this._hasTaskZS&&r._zoneDelegates.push(this._hasTaskDlgtOwner),r=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,T,t),r||(r=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=I)throw new Error("Task is missing scheduleFn.");R(t)}return r}invokeTask(T,t,r,k){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,T,t,r,k):t.callback.apply(r,k)}cancelTask(T,t){let r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,T,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");r=t.cancelFn(t)}return r}hasTask(T,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,T,t)}catch(r){this.handleError(T,r)}}_updateTaskCount(T,t){const r=this._taskCounts,k=r[T],C=r[T]=k+t;if(C<0)throw new Error("More tasks executed then were scheduled.");0!=k&&0!=C||this.hasTask(this.zone,{microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:T})}}class p{constructor(T,t,r,k,C,$){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=T,this.source=t,this.data=k,this.scheduleFn=C,this.cancelFn=$,!r)throw new Error("callback is not defined");this.callback=r;const l=this;this.invoke=T===Q&&k&&k.useG?p.invokeTask:function(){return p.invokeTask.call(e,l,this,arguments)}}static invokeTask(T,t,r){T||(T=this),ee++;try{return T.runCount++,T.zone.runTask(T,t,r)}finally{1==ee&&_(),ee--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(x,X)}_transitionTo(T,t,r){if(this._state!==t&&this._state!==r)throw new Error(`${this.type} '${this.source}': can not transition to '${T}', expecting state '${t}'${r?" or '"+r+"'":""}, was '${this._state}'.`);this._state=T,T==x&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const M=a("setTimeout"),O=a("Promise"),N=a("then");let K,B=[],H=!1;function q(L){if(K||e[O]&&(K=e[O].resolve(0)),K){let T=K[N];T||(T=K.then),T.call(K,L)}else e[M](L,0)}function R(L){0===ee&&0===B.length&&q(_),L&&B.push(L)}function _(){if(!H){for(H=!0;B.length;){const L=B;B=[];for(let T=0;T<L.length;T++){const t=L[T];try{t.zone.runTask(t,null,null)}catch(r){z.onUnhandledError(r)}}}z.microtaskDrainDone(),H=!1}}const J={name:"NO ZONE"},x="notScheduled",X="scheduling",A="scheduled",E="running",G="canceling",h="unknown",I="microTask",w="macroTask",Q="eventTask",oe={},z={symbol:a,currentZoneFrame:()=>U,onUnhandledError:W,microtaskDrainDone:W,scheduleMicroTask:R,showUncaughtError:()=>!d[a("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:W,patchMethod:()=>W,bindArguments:()=>[],patchThen:()=>W,patchMacroTask:()=>W,patchEventPrototype:()=>W,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>W,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>W,wrapWithCurrentZone:()=>W,filterProperties:()=>[],attachOriginToPatched:()=>W,_redefineProperty:()=>W,patchCallbacks:()=>W,nativeScheduleMicroTask:q};let U={parent:null,zone:new d(null,null)},re=null,ee=0;function W(){}o("Zone","Zone"),e.Zone=d}(typeof window<"u"&&window||typeof self<"u"&&self||global);const ue=Object.getOwnPropertyDescriptor,pe=Object.defineProperty,ve=Object.getPrototypeOf,Se=Object.create,it=Array.prototype.slice,Ze="addEventListener",De="removeEventListener",Oe=Zone.__symbol__(Ze),Ne=Zone.__symbol__(De),ie="true",ce="false",me=Zone.__symbol__("");function Ie(e,n){return Zone.current.wrap(e,n)}function Me(e,n,i,o,c){return Zone.current.scheduleMacroTask(e,n,i,o,c)}const j=Zone.__symbol__,be=typeof window<"u",_e=be?window:void 0,Y=be&&_e||"object"==typeof self&&self||global,ct="removeAttribute";function Le(e,n){for(let i=e.length-1;i>=0;i--)"function"==typeof e[i]&&(e[i]=Ie(e[i],n+"_"+i));return e}function Ve(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const Fe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,we=!("nw"in Y)&&typeof Y.process<"u"&&"[object process]"==={}.toString.call(Y.process),Ae=!we&&!Fe&&!(!be||!_e.HTMLElement),Be=typeof Y.process<"u"&&"[object process]"==={}.toString.call(Y.process)&&!Fe&&!(!be||!_e.HTMLElement),Pe={},Ue=function(e){if(!(e=e||Y.event))return;let n=Pe[e.type];n||(n=Pe[e.type]=j("ON_PROPERTY"+e.type));const i=this||e.target||Y,o=i[n];let c;return Ae&&i===_e&&"error"===e.type?(c=o&&o.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===c&&e.preventDefault()):(c=o&&o.apply(this,arguments),null!=c&&!c&&e.preventDefault()),c};function We(e,n,i){let o=ue(e,n);if(!o&&i&&ue(i,n)&&(o={enumerable:!0,configurable:!0}),!o||!o.configurable)return;const c=j("on"+n+"patched");if(e.hasOwnProperty(c)&&e[c])return;delete o.writable,delete o.value;const a=o.get,y=o.set,d=n.slice(2);let b=Pe[d];b||(b=Pe[d]=j("ON_PROPERTY"+d)),o.set=function(v){let p=this;!p&&e===Y&&(p=Y),p&&("function"==typeof p[b]&&p.removeEventListener(d,Ue),y&&y.call(p,null),p[b]=v,"function"==typeof v&&p.addEventListener(d,Ue,!1))},o.get=function(){let v=this;if(!v&&e===Y&&(v=Y),!v)return null;const p=v[b];if(p)return p;if(a){let M=a.call(this);if(M)return o.set.call(this,M),"function"==typeof v[ct]&&v.removeAttribute(n),M}return null},pe(e,n,o),e[c]=!0}function qe(e,n,i){if(n)for(let o=0;o<n.length;o++)We(e,"on"+n[o],i);else{const o=[];for(const c in e)"on"==c.slice(0,2)&&o.push(c);for(let c=0;c<o.length;c++)We(e,o[c],i)}}const ne=j("originalInstance");function ge(e){const n=Y[e];if(!n)return;Y[j(e)]=n,Y[e]=function(){const c=Le(arguments,e);switch(c.length){case 0:this[ne]=new n;break;case 1:this[ne]=new n(c[0]);break;case 2:this[ne]=new n(c[0],c[1]);break;case 3:this[ne]=new n(c[0],c[1],c[2]);break;case 4:this[ne]=new n(c[0],c[1],c[2],c[3]);break;default:throw new Error("Arg list too long.")}},le(Y[e],n);const i=new n(function(){});let o;for(o in i)"XMLHttpRequest"===e&&"responseBlob"===o||function(c){"function"==typeof i[c]?Y[e].prototype[c]=function(){return this[ne][c].apply(this[ne],arguments)}:pe(Y[e].prototype,c,{set:function(a){"function"==typeof a?(this[ne][c]=Ie(a,e+"."+c),le(this[ne][c],a)):this[ne][c]=a},get:function(){return this[ne][c]}})}(o);for(o in n)"prototype"!==o&&n.hasOwnProperty(o)&&(Y[e][o]=n[o])}function ae(e,n,i){let o=e;for(;o&&!o.hasOwnProperty(n);)o=ve(o);!o&&e[n]&&(o=e);const c=j(n);let a=null;if(o&&(!(a=o[c])||!o.hasOwnProperty(c))&&(a=o[c]=o[n],Ve(o&&ue(o,n)))){const d=i(a,c,n);o[n]=function(){return d(this,arguments)},le(o[n],a)}return a}function lt(e,n,i){let o=null;function c(a){const y=a.data;return y.args[y.cbIdx]=function(){a.invoke.apply(this,arguments)},o.apply(y.target,y.args),a}o=ae(e,n,a=>function(y,d){const b=i(y,d);return b.cbIdx>=0&&"function"==typeof d[b.cbIdx]?Me(b.name,d[b.cbIdx],b,c):a.apply(y,d)})}function le(e,n){e[j("OriginalDelegate")]=n}let Xe=!1,je=!1;function ft(){if(Xe)return je;Xe=!0;try{const e=_e.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(je=!0)}catch{}return je}Zone.__load_patch("ZoneAwarePromise",(e,n,i)=>{const o=Object.getOwnPropertyDescriptor,c=Object.defineProperty,y=i.symbol,d=[],b=!0===e[y("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],v=y("Promise"),p=y("then"),M="__creationTrace__";i.onUnhandledError=l=>{if(i.showUncaughtError()){const u=l&&l.rejection;u?console.error("Unhandled Promise rejection:",u instanceof Error?u.message:u,"; Zone:",l.zone.name,"; Task:",l.task&&l.task.source,"; Value:",u,u instanceof Error?u.stack:void 0):console.error(l)}},i.microtaskDrainDone=()=>{for(;d.length;){const l=d.shift();try{l.zone.runGuarded(()=>{throw l.throwOriginal?l.rejection:l})}catch(u){N(u)}}};const O=y("unhandledPromiseRejectionHandler");function N(l){i.onUnhandledError(l);try{const u=n[O];"function"==typeof u&&u.call(this,l)}catch{}}function B(l){return l&&l.then}function H(l){return l}function K(l){return t.reject(l)}const q=y("state"),R=y("value"),_=y("finally"),J=y("parentPromiseValue"),x=y("parentPromiseState"),X="Promise.then",A=null,E=!0,G=!1,h=0;function I(l,u){return s=>{try{z(l,u,s)}catch(f){z(l,!1,f)}}}const w=function(){let l=!1;return function(s){return function(){l||(l=!0,s.apply(null,arguments))}}},Q="Promise resolved with itself",oe=y("currentTaskTrace");function z(l,u,s){const f=w();if(l===s)throw new TypeError(Q);if(l[q]===A){let g=null;try{("object"==typeof s||"function"==typeof s)&&(g=s&&s.then)}catch(P){return f(()=>{z(l,!1,P)})(),l}if(u!==G&&s instanceof t&&s.hasOwnProperty(q)&&s.hasOwnProperty(R)&&s[q]!==A)re(s),z(l,s[q],s[R]);else if(u!==G&&"function"==typeof g)try{g.call(s,f(I(l,u)),f(I(l,!1)))}catch(P){f(()=>{z(l,!1,P)})()}else{l[q]=u;const P=l[R];if(l[R]=s,l[_]===_&&u===E&&(l[q]=l[x],l[R]=l[J]),u===G&&s instanceof Error){const m=n.currentTask&&n.currentTask.data&&n.currentTask.data[M];m&&c(s,oe,{configurable:!0,enumerable:!1,writable:!0,value:m})}for(let m=0;m<P.length;)ee(l,P[m++],P[m++],P[m++],P[m++]);if(0==P.length&&u==G){l[q]=h;let m=s;try{throw new Error("Uncaught (in promise): "+function a(l){return l&&l.toString===Object.prototype.toString?(l.constructor&&l.constructor.name||"")+": "+JSON.stringify(l):l?l.toString():Object.prototype.toString.call(l)}(s)+(s&&s.stack?"\n"+s.stack:""))}catch(S){m=S}b&&(m.throwOriginal=!0),m.rejection=s,m.promise=l,m.zone=n.current,m.task=n.currentTask,d.push(m),i.scheduleMicroTask()}}}return l}const U=y("rejectionHandledHandler");function re(l){if(l[q]===h){try{const u=n[U];u&&"function"==typeof u&&u.call(this,{rejection:l[R],promise:l})}catch{}l[q]=G;for(let u=0;u<d.length;u++)l===d[u].promise&&d.splice(u,1)}}function ee(l,u,s,f,g){re(l);const P=l[q],m=P?"function"==typeof f?f:H:"function"==typeof g?g:K;u.scheduleMicroTask(X,()=>{try{const S=l[R],Z=!!s&&_===s[_];Z&&(s[J]=S,s[x]=P);const D=u.run(m,void 0,Z&&m!==K&&m!==H?[]:[S]);z(s,!0,D)}catch(S){z(s,!1,S)}},s)}const L=function(){},T=e.AggregateError;class t{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(u){return z(new this(null),E,u)}static reject(u){return z(new this(null),G,u)}static any(u){if(!u||"function"!=typeof u[Symbol.iterator])return Promise.reject(new T([],"All promises were rejected"));const s=[];let f=0;try{for(let m of u)f++,s.push(t.resolve(m))}catch{return Promise.reject(new T([],"All promises were rejected"))}if(0===f)return Promise.reject(new T([],"All promises were rejected"));let g=!1;const P=[];return new t((m,S)=>{for(let Z=0;Z<s.length;Z++)s[Z].then(D=>{g||(g=!0,m(D))},D=>{P.push(D),f--,0===f&&(g=!0,S(new T(P,"All promises were rejected")))})})}static race(u){let s,f,g=new this((S,Z)=>{s=S,f=Z});function P(S){s(S)}function m(S){f(S)}for(let S of u)B(S)||(S=this.resolve(S)),S.then(P,m);return g}static all(u){return t.allWithCallback(u)}static allSettled(u){return(this&&this.prototype instanceof t?this:t).allWithCallback(u,{thenCallback:f=>({status:"fulfilled",value:f}),errorCallback:f=>({status:"rejected",reason:f})})}static allWithCallback(u,s){let f,g,P=new this((D,V)=>{f=D,g=V}),m=2,S=0;const Z=[];for(let D of u){B(D)||(D=this.resolve(D));const V=S;try{D.then(F=>{Z[V]=s?s.thenCallback(F):F,m--,0===m&&f(Z)},F=>{s?(Z[V]=s.errorCallback(F),m--,0===m&&f(Z)):g(F)})}catch(F){g(F)}m++,S++}return m-=2,0===m&&f(Z),P}constructor(u){const s=this;if(!(s instanceof t))throw new Error("Must be an instanceof Promise.");s[q]=A,s[R]=[];try{const f=w();u&&u(f(I(s,E)),f(I(s,G)))}catch(f){z(s,!1,f)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return t}then(u,s){let f=this.constructor?.[Symbol.species];(!f||"function"!=typeof f)&&(f=this.constructor||t);const g=new f(L),P=n.current;return this[q]==A?this[R].push(P,g,u,s):ee(this,P,g,u,s),g}catch(u){return this.then(null,u)}finally(u){let s=this.constructor?.[Symbol.species];(!s||"function"!=typeof s)&&(s=t);const f=new s(L);f[_]=_;const g=n.current;return this[q]==A?this[R].push(g,f,u,u):ee(this,g,f,u,u),f}}t.resolve=t.resolve,t.reject=t.reject,t.race=t.race,t.all=t.all;const r=e[v]=e.Promise;e.Promise=t;const k=y("thenPatched");function C(l){const u=l.prototype,s=o(u,"then");if(s&&(!1===s.writable||!s.configurable))return;const f=u.then;u[p]=f,l.prototype.then=function(g,P){return new t((S,Z)=>{f.call(this,S,Z)}).then(g,P)},l[k]=!0}return i.patchThen=C,r&&(C(r),ae(e,"fetch",l=>function $(l){return function(u,s){let f=l.apply(u,s);if(f instanceof t)return f;let g=f.constructor;return g[k]||C(g),f}}(l))),Promise[n.__symbol__("uncaughtPromiseErrors")]=d,t}),Zone.__load_patch("toString",e=>{const n=Function.prototype.toString,i=j("OriginalDelegate"),o=j("Promise"),c=j("Error"),a=function(){if("function"==typeof this){const v=this[i];if(v)return"function"==typeof v?n.call(v):Object.prototype.toString.call(v);if(this===Promise){const p=e[o];if(p)return n.call(p)}if(this===Error){const p=e[c];if(p)return n.call(p)}}return n.call(this)};a[i]=n,Function.prototype.toString=a;const y=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":y.call(this)}});let Ee=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){Ee=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{Ee=!1}const ht={useG:!0},te={},ze={},Ye=new RegExp("^"+me+"(\\w+)(true|false)$"),$e=j("propagationStopped");function Je(e,n){const i=(n?n(e):e)+ce,o=(n?n(e):e)+ie,c=me+i,a=me+o;te[e]={},te[e][ce]=c,te[e][ie]=a}function dt(e,n,i,o){const c=o&&o.add||Ze,a=o&&o.rm||De,y=o&&o.listeners||"eventListeners",d=o&&o.rmAll||"removeAllListeners",b=j(c),v="."+c+":",p="prependListener",M="."+p+":",O=function(R,_,J){if(R.isRemoved)return;const x=R.callback;let X;"object"==typeof x&&x.handleEvent&&(R.callback=E=>x.handleEvent(E),R.originalDelegate=x);try{R.invoke(R,_,[J])}catch(E){X=E}const A=R.options;return A&&"object"==typeof A&&A.once&&_[a].call(_,J.type,R.originalDelegate?R.originalDelegate:R.callback,A),X};function N(R,_,J){if(!(_=_||e.event))return;const x=R||_.target||e,X=x[te[_.type][J?ie:ce]];if(X){const A=[];if(1===X.length){const E=O(X[0],x,_);E&&A.push(E)}else{const E=X.slice();for(let G=0;G<E.length&&(!_||!0!==_[$e]);G++){const h=O(E[G],x,_);h&&A.push(h)}}if(1===A.length)throw A[0];for(let E=0;E<A.length;E++){const G=A[E];n.nativeScheduleMicroTask(()=>{throw G})}}}const B=function(R){return N(this,R,!1)},H=function(R){return N(this,R,!0)};function K(R,_){if(!R)return!1;let J=!0;_&&void 0!==_.useG&&(J=_.useG);const x=_&&_.vh;let X=!0;_&&void 0!==_.chkDup&&(X=_.chkDup);let A=!1;_&&void 0!==_.rt&&(A=_.rt);let E=R;for(;E&&!E.hasOwnProperty(c);)E=ve(E);if(!E&&R[c]&&(E=R),!E||E[b])return!1;const G=_&&_.eventNameToString,h={},I=E[b]=E[c],w=E[j(a)]=E[a],Q=E[j(y)]=E[y],oe=E[j(d)]=E[d];let z;_&&_.prepend&&(z=E[j(_.prepend)]=E[_.prepend]);const t=J?function(s){if(!h.isExisting)return I.call(h.target,h.eventName,h.capture?H:B,h.options)}:function(s){return I.call(h.target,h.eventName,s.invoke,h.options)},r=J?function(s){if(!s.isRemoved){const f=te[s.eventName];let g;f&&(g=f[s.capture?ie:ce]);const P=g&&s.target[g];if(P)for(let m=0;m<P.length;m++)if(P[m]===s){P.splice(m,1),s.isRemoved=!0,0===P.length&&(s.allRemoved=!0,s.target[g]=null);break}}if(s.allRemoved)return w.call(s.target,s.eventName,s.capture?H:B,s.options)}:function(s){return w.call(s.target,s.eventName,s.invoke,s.options)},C=_&&_.diff?_.diff:function(s,f){const g=typeof f;return"function"===g&&s.callback===f||"object"===g&&s.originalDelegate===f},$=Zone[j("UNPATCHED_EVENTS")],l=e[j("PASSIVE_EVENTS")],u=function(s,f,g,P,m=!1,S=!1){return function(){const Z=this||e;let D=arguments[0];_&&_.transferEventName&&(D=_.transferEventName(D));let V=arguments[1];if(!V)return s.apply(this,arguments);if(we&&"uncaughtException"===D)return s.apply(this,arguments);let F=!1;if("function"!=typeof V){if(!V.handleEvent)return s.apply(this,arguments);F=!0}if(x&&!x(s,V,Z,arguments))return;const fe=Ee&&!!l&&-1!==l.indexOf(D),se=function U(s,f){return!Ee&&"object"==typeof s&&s?!!s.capture:Ee&&f?"boolean"==typeof s?{capture:s,passive:!0}:s?"object"==typeof s&&!1!==s.passive?{...s,passive:!0}:s:{passive:!0}:s}(arguments[2],fe);if($)for(let de=0;de<$.length;de++)if(D===$[de])return fe?s.call(Z,D,V,se):s.apply(this,arguments);const xe=!!se&&("boolean"==typeof se||se.capture),tt=!(!se||"object"!=typeof se)&&se.once,kt=Zone.current;let Ge=te[D];Ge||(Je(D,G),Ge=te[D]);const nt=Ge[xe?ie:ce];let Ce,ye=Z[nt],rt=!1;if(ye){if(rt=!0,X)for(let de=0;de<ye.length;de++)if(C(ye[de],V))return}else ye=Z[nt]=[];const ot=Z.constructor.name,st=ze[ot];st&&(Ce=st[D]),Ce||(Ce=ot+f+(G?G(D):D)),h.options=se,tt&&(h.options.once=!1),h.target=Z,h.capture=xe,h.eventName=D,h.isExisting=rt;const ke=J?ht:void 0;ke&&(ke.taskData=h);const he=kt.scheduleEventTask(Ce,V,ke,g,P);return h.target=null,ke&&(ke.taskData=null),tt&&(se.once=!0),!Ee&&"boolean"==typeof he.options||(he.options=se),he.target=Z,he.capture=xe,he.eventName=D,F&&(he.originalDelegate=V),S?ye.unshift(he):ye.push(he),m?Z:void 0}};return E[c]=u(I,v,t,r,A),z&&(E[p]=u(z,M,function(s){return z.call(h.target,h.eventName,s.invoke,h.options)},r,A,!0)),E[a]=function(){const s=this||e;let f=arguments[0];_&&_.transferEventName&&(f=_.transferEventName(f));const g=arguments[2],P=!!g&&("boolean"==typeof g||g.capture),m=arguments[1];if(!m)return w.apply(this,arguments);if(x&&!x(w,m,s,arguments))return;const S=te[f];let Z;S&&(Z=S[P?ie:ce]);const D=Z&&s[Z];if(D)for(let V=0;V<D.length;V++){const F=D[V];if(C(F,m))return D.splice(V,1),F.isRemoved=!0,0===D.length&&(F.allRemoved=!0,s[Z]=null,"string"==typeof f)&&(s[me+"ON_PROPERTY"+f]=null),F.zone.cancelTask(F),A?s:void 0}return w.apply(this,arguments)},E[y]=function(){const s=this||e;let f=arguments[0];_&&_.transferEventName&&(f=_.transferEventName(f));const g=[],P=Ke(s,G?G(f):f);for(let m=0;m<P.length;m++){const S=P[m];g.push(S.originalDelegate?S.originalDelegate:S.callback)}return g},E[d]=function(){const s=this||e;let f=arguments[0];if(f){_&&_.transferEventName&&(f=_.transferEventName(f));const g=te[f];if(g){const S=s[g[ce]],Z=s[g[ie]];if(S){const D=S.slice();for(let V=0;V<D.length;V++){const F=D[V];this[a].call(this,f,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}if(Z){const D=Z.slice();for(let V=0;V<D.length;V++){const F=D[V];this[a].call(this,f,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}}}else{const g=Object.keys(s);for(let P=0;P<g.length;P++){const S=Ye.exec(g[P]);let Z=S&&S[1];Z&&"removeListener"!==Z&&this[d].call(this,Z)}this[d].call(this,"removeListener")}if(A)return this},le(E[c],I),le(E[a],w),oe&&le(E[d],oe),Q&&le(E[y],Q),!0}let q=[];for(let R=0;R<i.length;R++)q[R]=K(i[R],o);return q}function Ke(e,n){if(!n){const a=[];for(let y in e){const d=Ye.exec(y);let b=d&&d[1];if(b&&(!n||b===n)){const v=e[y];if(v)for(let p=0;p<v.length;p++)a.push(v[p])}}return a}let i=te[n];i||(Je(n),i=te[n]);const o=e[i[ce]],c=e[i[ie]];return o?c?o.concat(c):o.slice():c?c.slice():[]}function _t(e,n){const i=e.Event;i&&i.prototype&&n.patchMethod(i.prototype,"stopImmediatePropagation",o=>function(c,a){c[$e]=!0,o&&o.apply(c,a)})}function Et(e,n,i,o,c){const a=Zone.__symbol__(o);if(n[a])return;const y=n[a]=n[o];n[o]=function(d,b,v){return b&&b.prototype&&c.forEach(function(p){const M=`${i}.${o}::`+p,O=b.prototype;try{if(O.hasOwnProperty(p)){const N=e.ObjectGetOwnPropertyDescriptor(O,p);N&&N.value?(N.value=e.wrapWithCurrentZone(N.value,M),e._redefineProperty(b.prototype,p,N)):O[p]&&(O[p]=e.wrapWithCurrentZone(O[p],M))}else O[p]&&(O[p]=e.wrapWithCurrentZone(O[p],M))}catch{}}),y.call(n,d,b,v)},e.attachOriginToPatched(n[o],y)}function Qe(e,n,i){if(!i||0===i.length)return n;const o=i.filter(a=>a.target===e);if(!o||0===o.length)return n;const c=o[0].ignoreProperties;return n.filter(a=>-1===c.indexOf(a))}function et(e,n,i,o){e&&qe(e,Qe(e,n,i),o)}function He(e){return Object.getOwnPropertyNames(e).filter(n=>n.startsWith("on")&&n.length>2).map(n=>n.substring(2))}Zone.__load_patch("util",(e,n,i)=>{const o=He(e);i.patchOnProperties=qe,i.patchMethod=ae,i.bindArguments=Le,i.patchMacroTask=lt;const c=n.__symbol__("BLACK_LISTED_EVENTS"),a=n.__symbol__("UNPATCHED_EVENTS");e[a]&&(e[c]=e[a]),e[c]&&(n[c]=n[a]=e[c]),i.patchEventPrototype=_t,i.patchEventTarget=dt,i.isIEOrEdge=ft,i.ObjectDefineProperty=pe,i.ObjectGetOwnPropertyDescriptor=ue,i.ObjectCreate=Se,i.ArraySlice=it,i.patchClass=ge,i.wrapWithCurrentZone=Ie,i.filterProperties=Qe,i.attachOriginToPatched=le,i._redefineProperty=Object.defineProperty,i.patchCallbacks=Et,i.getGlobalObjects=()=>({globalSources:ze,zoneSymbolEventNames:te,eventNames:o,isBrowser:Ae,isMix:Be,isNode:we,TRUE_STR:ie,FALSE_STR:ce,ZONE_SYMBOL_PREFIX:me,ADD_EVENT_LISTENER_STR:Ze,REMOVE_EVENT_LISTENER_STR:De})});const Re=j("zoneTask");function Te(e,n,i,o){let c=null,a=null;i+=o;const y={};function d(v){const p=v.data;return p.args[0]=function(){return v.invoke.apply(this,arguments)},p.handleId=c.apply(e,p.args),v}function b(v){return a.call(e,v.data.handleId)}c=ae(e,n+=o,v=>function(p,M){if("function"==typeof M[0]){const O={isPeriodic:"Interval"===o,delay:"Timeout"===o||"Interval"===o?M[1]||0:void 0,args:M},N=M[0];M[0]=function(){try{return N.apply(this,arguments)}finally{O.isPeriodic||("number"==typeof O.handleId?delete y[O.handleId]:O.handleId&&(O.handleId[Re]=null))}};const B=Me(n,M[0],O,d,b);if(!B)return B;const H=B.data.handleId;return"number"==typeof H?y[H]=B:H&&(H[Re]=B),H&&H.ref&&H.unref&&"function"==typeof H.ref&&"function"==typeof H.unref&&(B.ref=H.ref.bind(H),B.unref=H.unref.bind(H)),"number"==typeof H||H?H:B}return v.apply(e,M)}),a=ae(e,i,v=>function(p,M){const O=M[0];let N;"number"==typeof O?N=y[O]:(N=O&&O[Re],N||(N=O)),N&&"string"==typeof N.type?"notScheduled"!==N.state&&(N.cancelFn&&N.data.isPeriodic||0===N.runCount)&&("number"==typeof O?delete y[O]:O&&(O[Re]=null),N.zone.cancelTask(N)):v.apply(e,M)})}Zone.__load_patch("legacy",e=>{const n=e[Zone.__symbol__("legacyPatch")];n&&n()}),Zone.__load_patch("timers",e=>{const n="set",i="clear";Te(e,n,i,"Timeout"),Te(e,n,i,"Interval"),Te(e,n,i,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{Te(e,"request","cancel","AnimationFrame"),Te(e,"mozRequest","mozCancel","AnimationFrame"),Te(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,n)=>{const i=["alert","prompt","confirm"];for(let o=0;o<i.length;o++)ae(e,i[o],(a,y,d)=>function(b,v){return n.current.run(a,e,v,d)})}),Zone.__load_patch("EventTarget",(e,n,i)=>{(function gt(e,n){n.patchEventPrototype(e,n)})(e,i),function mt(e,n){if(Zone[n.symbol("patchEventTarget")])return;const{eventNames:i,zoneSymbolEventNames:o,TRUE_STR:c,FALSE_STR:a,ZONE_SYMBOL_PREFIX:y}=n.getGlobalObjects();for(let b=0;b<i.length;b++){const v=i[b],O=y+(v+a),N=y+(v+c);o[v]={},o[v][a]=O,o[v][c]=N}const d=e.EventTarget;d&&d.prototype&&n.patchEventTarget(e,n,[d&&d.prototype])}(e,i);const o=e.XMLHttpRequestEventTarget;o&&o.prototype&&i.patchEventTarget(e,i,[o.prototype])}),Zone.__load_patch("MutationObserver",(e,n,i)=>{ge("MutationObserver"),ge("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,n,i)=>{ge("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,n,i)=>{ge("FileReader")}),Zone.__load_patch("on_property",(e,n,i)=>{!function Tt(e,n){if(we&&!Be||Zone[e.symbol("patchEvents")])return;const i=n.__Zone_ignore_on_properties;let o=[];if(Ae){const c=window;o=o.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const a=function ut(){try{const e=_e.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:c,ignoreProperties:["error"]}]:[];et(c,He(c),i&&i.concat(a),ve(c))}o=o.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let c=0;c<o.length;c++){const a=n[o[c]];a&&a.prototype&&et(a.prototype,He(a.prototype),i)}}(i,e)}),Zone.__load_patch("customElements",(e,n,i)=>{!function pt(e,n){const{isBrowser:i,isMix:o}=n.getGlobalObjects();(i||o)&&e.customElements&&"customElements"in e&&n.patchCallbacks(n,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,i)}),Zone.__load_patch("XHR",(e,n)=>{!function b(v){const p=v.XMLHttpRequest;if(!p)return;const M=p.prototype;let N=M[Oe],B=M[Ne];if(!N){const h=v.XMLHttpRequestEventTarget;if(h){const I=h.prototype;N=I[Oe],B=I[Ne]}}const H="readystatechange",K="scheduled";function q(h){const I=h.data,w=I.target;w[a]=!1,w[d]=!1;const Q=w[c];N||(N=w[Oe],B=w[Ne]),Q&&B.call(w,H,Q);const oe=w[c]=()=>{if(w.readyState===w.DONE)if(!I.aborted&&w[a]&&h.state===K){const U=w[n.__symbol__("loadfalse")];if(0!==w.status&&U&&U.length>0){const re=h.invoke;h.invoke=function(){const ee=w[n.__symbol__("loadfalse")];for(let W=0;W<ee.length;W++)ee[W]===h&&ee.splice(W,1);!I.aborted&&h.state===K&&re.call(h)},U.push(h)}else h.invoke()}else!I.aborted&&!1===w[a]&&(w[d]=!0)};return N.call(w,H,oe),w[i]||(w[i]=h),E.apply(w,I.args),w[a]=!0,h}function R(){}function _(h){const I=h.data;return I.aborted=!0,G.apply(I.target,I.args)}const J=ae(M,"open",()=>function(h,I){return h[o]=0==I[2],h[y]=I[1],J.apply(h,I)}),X=j("fetchTaskAborting"),A=j("fetchTaskScheduling"),E=ae(M,"send",()=>function(h,I){if(!0===n.current[A]||h[o])return E.apply(h,I);{const w={target:h,url:h[y],isPeriodic:!1,args:I,aborted:!1},Q=Me("XMLHttpRequest.send",R,w,q,_);h&&!0===h[d]&&!w.aborted&&Q.state===K&&Q.invoke()}}),G=ae(M,"abort",()=>function(h,I){const w=function O(h){return h[i]}(h);if(w&&"string"==typeof w.type){if(null==w.cancelFn||w.data&&w.data.aborted)return;w.zone.cancelTask(w)}else if(!0===n.current[X])return G.apply(h,I)})}(e);const i=j("xhrTask"),o=j("xhrSync"),c=j("xhrListener"),a=j("xhrScheduled"),y=j("xhrURL"),d=j("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function at(e,n){const i=e.constructor.name;for(let o=0;o<n.length;o++){const c=n[o],a=e[c];if(a){if(!Ve(ue(e,c)))continue;e[c]=(d=>{const b=function(){return d.apply(this,Le(arguments,i+"."+c))};return le(b,d),b})(a)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,n)=>{function i(o){return function(c){Ke(e,o).forEach(y=>{const d=e.PromiseRejectionEvent;if(d){const b=new d(o,{promise:c.promise,reason:c.rejection});y.invoke(b)}})}}e.PromiseRejectionEvent&&(n[j("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),n[j("rejectionHandledHandler")]=i("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(e,n,i)=>{!function yt(e,n){n.patchMethod(e,"queueMicrotask",i=>function(o,c){Zone.current.scheduleMicroTask("queueMicrotask",c[0])})}(e,i)})}},ue=>{ue(ue.s=332)}]);
!function(d,y){"object"==typeof exports&&typeof module<"u"?y(exports):"function"==typeof define&&define.amd?define(["exports"],y):y((d=typeof globalThis<"u"?globalThis:d||self).marked={})}(this,function(d){"use strict";function y(a,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,"symbol"==typeof(e=function(u,r){if("object"!=typeof u||null===u)return u;var o=u[Symbol.toPrimitive];if(void 0===o)return String(u);if("object"!=typeof(o=o.call(u,"string")))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(e=n.key))?e:String(e),n)}var e}function b(){return(b=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var t,n=arguments[s];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a}).apply(this,arguments)}function Q(a,s){(null==s||s>a.length)&&(s=a.length);for(var t=0,n=new Array(s);t<s;t++)n[t]=a[t];return n}function A(a,s){var t,n=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(n)return(n=n.call(a)).next.bind(n);if(Array.isArray(a)||(n=function(e,u){var r;if(e)return"string"==typeof e?Q(e,u):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,u):void 0}(a))||s&&a&&"number"==typeof a.length)return n&&(a=n),t=0,function(){return t>=a.length?{done:!0}:{done:!1,value:a[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function U(a){return W[a]}d.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var T=/[&<>"']/,R=new RegExp(T.source,"g"),j=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Z=new RegExp(j.source,"g"),W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function z(a,s){if(s){if(T.test(a))return a.replace(R,U)}else if(j.test(a))return a.replace(Z,U);return a}var P=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function M(a){return a.replace(P,function(s,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var l=/(^|[^\[])\^/g;function i(a,s){a="string"==typeof a?a:a.source,s=s||"";var t={replace:function(n,e){return e=(e=e.source||e).replace(l,"$1"),a=a.replace(n,e),t},getRegex:function(){return new RegExp(a,s)}};return t}var p=/[^\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function f(a,s,t){if(a){try{n=decodeURIComponent(M(t)).replace(p,"").toLowerCase()}catch{return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}var n;s&&!g.test(t)&&(a=t,E[" "+(n=s)]||(E[" "+n]=I.test(n)?n+"/":Y(n,"/",!0)),s=-1===(n=E[" "+n]).indexOf(":"),t="//"===a.substring(0,2)?s?a:n.replace(k,"$1")+a:"/"===a.charAt(0)?s?a:n.replace(q,"$1")+a:n+a);try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var E={},I=/^[^:]+:\/*[^/]*$/,k=/^([^:]+:)[\s\S]*$/,q=/^([^:]+:\/*[^/]*)[\s\S]*$/,ue={exec:function(){}};function N(a,s){var t=a.replace(/\|/g,function(e,u,r){for(var o=!1,m=u;0<=--m&&"\\"===r[m];)o=!o;return o?"|":" |"}).split(/ \|/),n=0;if(t[0].trim()||t.shift(),0<t.length&&!t[t.length-1].trim()&&t.pop(),t.length>s)t.splice(s);else for(;t.length<s;)t.push("");for(;n<t.length;n++)t[n]=t[n].trim().replace(/\\\|/g,"|");return t}function Y(a,s,t){var n=a.length;if(0===n)return"";for(var e=0;e<n;){var u=a.charAt(n-e-1);if((u!==s||t)&&(u===s||!t))break;e++}return a.slice(0,n-e)}function le(a,s){if(s<1)return"";for(var t="";1<s;)1&s&&(t+=a),s>>=1,a+=a;return t+a}function oe(a,u,t,n){var e=u.href,r=(u=u.title?z(u.title):null,a[1].replace(/\\([\[\]])/g,"$1"));return"!"!==a[0].charAt(0)?(n.state.inLink=!0,a={type:"link",raw:t,href:e,title:u,text:r,tokens:n.inlineTokens(r)},n.state.inLink=!1,a):{type:"image",raw:t,href:e,title:u,text:z(r)}}var re=function(){function a(t){this.options=t||d.defaults}var s=a.prototype;return s.space=function(t){if((t=this.rules.block.newline.exec(t))&&0<t[0].length)return{type:"space",raw:t[0]}},s.code=function(e){var n;if(e=this.rules.block.code.exec(e))return n=e[0].replace(/^ {1,4}/gm,""),{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Y(n,"\n")}},s.fences=function(o){var n,e,u,r;if(o=this.rules.block.fences.exec(o))return e=n=o[0],u=o[3]||"",e=null===(e=n.match(/^(\s+)(?:```)/))?u:(r=e[1],u.split("\n").map(function(m){var v=m.match(/^\s+/);return null!==v&&v[0].length>=r.length?m.slice(r.length):m}).join("\n")),{type:"code",raw:n,lang:o[2]&&o[2].trim().replace(this.rules.inline._escapes,"$1"),text:e}},s.heading=function(u){var n,e;if(u=this.rules.block.heading.exec(u))return n=u[2].trim(),/#$/.test(n)&&(e=Y(n,"#"),!this.options.pedantic&&e&&!/ $/.test(e)||(n=e.trim())),{type:"heading",raw:u[0],depth:u[1].length,text:n,tokens:this.lexer.inline(n)}},s.hr=function(t){if(t=this.rules.block.hr.exec(t))return{type:"hr",raw:t[0]}},s.blockquote=function(r){var n,e,u;if(r=this.rules.block.blockquote.exec(r))return n=r[0].replace(/^ *>[ \t]?/gm,""),e=this.lexer.state.top,this.lexer.state.top=!0,u=this.lexer.blockTokens(n),this.lexer.state.top=e,{type:"blockquote",raw:r[0],tokens:u,text:n}},s.list=function(t){var n=this.rules.block.list.exec(t);if(n){var e,u,r,o,m,v,w,c,B,h,L,_=1<($=n[1].trim()).length,D={type:"list",raw:"",ordered:_,start:_?+$.slice(0,-1):"",loose:!1,items:[]},$=_?"\\d{1,9}\\"+$.slice(-1):"\\"+$;this.options.pedantic&&($=_?$:"[*+-]");for(var O=new RegExp("^( {0,3}"+$+")((?:[\t ][^\\n]*)?(?:\\n|$))");t&&(L=!1,n=O.exec(t))&&!this.rules.block.hr.test(t);){if(t=t.substring((e=n[0]).length),w=n[2].split("\n",1)[0].replace(/^\t+/,function(fe){return" ".repeat(3*fe.length)}),c=t.split("\n",1)[0],this.options.pedantic?(o=2,h=w.trimLeft()):(o=n[2].search(/[^ ]/),h=w.slice(o=4<o?1:o),o+=n[1].length),m=!1,!w&&/^ *$/.test(c)&&(e+=c+"\n",t=t.substring(c.length+1),L=!0),!L)for(var he=new RegExp("^ {0,"+Math.min(3,o-1)+"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))"),ee=new RegExp("^ {0,"+Math.min(3,o-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),de=new RegExp("^ {0,"+Math.min(3,o-1)+"}(?:```|~~~)"),ie=new RegExp("^ {0,"+Math.min(3,o-1)+"}#");t&&(c=B=t.split("\n",1)[0],this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!de.test(c))&&!ie.test(c)&&!he.test(c)&&!ee.test(t);){if(c.search(/[^ ]/)>=o||!c.trim())h+="\n"+c.slice(o);else{if(m||4<=w.search(/[^ ]/)||de.test(w)||ie.test(w)||ee.test(w))break;h+="\n"+c}m||c.trim()||(m=!0),e+=B+"\n",t=t.substring(B.length+1),w=c.slice(o)}D.loose||(v?D.loose=!0:/\n *\n *$/.test(e)&&(v=!0)),this.options.gfm&&(u=/^\[[ xX]\] /.exec(h))&&(r="[ ] "!==u[0],h=h.replace(/^\[[ xX]\] +/,"")),D.items.push({type:"list_item",raw:e,task:!!u,checked:r,loose:!1,text:h}),D.raw+=e}D.items[D.items.length-1].raw=e.trimRight(),D.items[D.items.length-1].text=h.trimRight(),D.raw=D.raw.trimRight();for(var se,me=D.items.length,ae=0;ae<me;ae++)this.lexer.state.top=!1,D.items[ae].tokens=this.lexer.blockTokens(D.items[ae].text,[]),D.loose||(se=0<(se=D.items[ae].tokens.filter(function(fe){return"space"===fe.type})).length&&se.some(function(fe){return/\n.*\n/.test(fe.raw)}),D.loose=se);if(D.loose)for(ae=0;ae<me;ae++)D.items[ae].loose=!0;return D}},s.html=function(e){var n;if(e=this.rules.block.html.exec(e))return n={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]},this.options.sanitize&&(e=this.options.sanitizer?this.options.sanitizer(e[0]):z(e[0]),n.type="paragraph",n.text=e,n.tokens=this.lexer.inline(e)),n},s.def=function(r){var n,e,u;if(r=this.rules.block.def.exec(r))return n=r[1].toLowerCase().replace(/\s+/g," "),e=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",u=r[3]&&r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"),{type:"def",tag:n,raw:r[0],href:e,title:u}},s.table=function(t){if(t=this.rules.block.table.exec(t)){var n={type:"table",header:N(t[1]).map(function(v){return{text:v}}),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];for(var e,u,r,o=n.align.length,m=0;m<o;m++)n.align[m]=/^ *-+: *$/.test(n.align[m])?"right":/^ *:-+: *$/.test(n.align[m])?"center":/^ *:-+ *$/.test(n.align[m])?"left":null;for(o=n.rows.length,m=0;m<o;m++)n.rows[m]=N(n.rows[m],n.header.length).map(function(v){return{text:v}});for(o=n.header.length,e=0;e<o;e++)n.header[e].tokens=this.lexer.inline(n.header[e].text);for(o=n.rows.length,e=0;e<o;e++)for(r=n.rows[e],u=0;u<r.length;u++)r[u].tokens=this.lexer.inline(r[u].text);return n}}},s.lheading=function(t){if(t=this.rules.block.lheading.exec(t))return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}},s.paragraph=function(e){var n;if(e=this.rules.block.paragraph.exec(e))return n="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1],{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}},s.text=function(t){if(t=this.rules.block.text.exec(t))return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}},s.escape=function(t){if(t=this.rules.inline.escape.exec(t))return{type:"escape",raw:t[0],text:z(t[1])}},s.tag=function(t){if(t=this.rules.inline.tag.exec(t))return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):z(t[0]):t[0]}},s.link=function(t){if(t=this.rules.inline.link.exec(t)){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var u=Y(n.slice(0,-1),"\\");if((n.length-u.length)%2==0)return}else-1<(u=function(o,m){if(-1!==o.indexOf(m[1]))for(var v=o.length,w=0,c=0;c<v;c++)if("\\"===o[c])c++;else if(o[c]===m[0])w++;else if(o[c]===m[1]&&--w<0)return c;return-1}(t[2],"()"))&&(r=(0===t[0].indexOf("!")?5:4)+t[1].length+u,t[2]=t[2].substring(0,u),t[0]=t[0].substring(0,r).trim(),t[3]="");u=t[2];var e,r="";return this.options.pedantic?(e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u))&&(u=e[1],r=e[3]):r=t[3]?t[3].slice(1,-1):"",u=u.trim(),oe(t,{href:(u=/^</.test(u)?this.options.pedantic&&!/>$/.test(n)?u.slice(1):u.slice(1,-1):u)&&u.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}},s.reflink=function(t,n){var e;if(e=(e=this.rules.inline.reflink.exec(t))||this.rules.inline.nolink.exec(t))return(t=n[(t=(e[2]||e[1]).replace(/\s+/g," ")).toLowerCase()])?oe(e,t,e[0],this.lexer):{type:"text",raw:n=e[0].charAt(0),text:n}},s.emStrong=function(t,n,e){void 0===e&&(e="");var u=this.rules.inline.emStrong.lDelim.exec(t);if(u&&(!u[3]||!e.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))&&(!u[1]&&!u[2]||""===e||this.rules.inline.punctuation.exec(e))){var o=u[0].length-1,m=o,v=0,w="*"===u[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(w.lastIndex=0,n=n.slice(-1*t.length+o);null!=(u=w.exec(n));){var c,B=u[1]||u[2]||u[3]||u[4]||u[5]||u[6];if(B)if(c=B.length,u[3]||u[4])m+=c;else if((u[5]||u[6])&&o%3&&!((o+c)%3))v+=c;else if(!(0<(m-=c)))return c=Math.min(c,c+m+v),B=t.slice(0,o+u.index+(u[0].length-B.length)+c),Math.min(o,c)%2?(c=B.slice(1,-1),{type:"em",raw:B,text:c,tokens:this.lexer.inlineTokens(c)}):(c=B.slice(2,-2),{type:"strong",raw:B,text:c,tokens:this.lexer.inlineTokens(c)})}}},s.codespan=function(r){var n,e,u;if(r=this.rules.inline.code.exec(r))return u=r[2].replace(/\n/g," "),n=/[^ ]/.test(u),e=/^ /.test(u)&&/ $/.test(u),u=z(u=n&&e?u.substring(1,u.length-1):u,!0),{type:"codespan",raw:r[0],text:u}},s.br=function(t){if(t=this.rules.inline.br.exec(t))return{type:"br",raw:t[0]}},s.del=function(t){if(t=this.rules.inline.del.exec(t))return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}},s.autolink=function(u,n){var e;if(u=this.rules.inline.autolink.exec(u))return n="@"===u[2]?"mailto:"+(e=z(this.options.mangle?n(u[1]):u[1])):e=z(u[1]),{type:"link",raw:u[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}},s.url=function(t,n){var e,u,r,o;if(e=this.rules.inline.url.exec(t)){if("@"===e[2])r="mailto:"+(u=z(this.options.mangle?n(e[0]):e[0]));else{for(;o=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])[0],o!==e[0];);u=z(e[0]),r="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:u,href:r,tokens:[{type:"text",raw:u,text:u}]}}},s.inlineText=function(t,n){if(t=this.rules.inline.text.exec(t))return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):z(t[0]):t[0]:z(this.options.smartypants?n(t[0]):t[0]),{type:"text",raw:t[0],text:n}},a}(),C={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ue,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/},F=(C.def=i(C.def).replace("label",C._label).replace("title",C._title).getRegex(),C.bullet=/(?:[*+-]|\d{1,9}[.)])/,C.listItemStart=i(/^( *)(bull) */).replace("bull",C.bullet).getRegex(),C.list=i(C.list).replace(/bull/g,C.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+C.def.source+")").getRegex(),C._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",C._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,C.html=i(C.html,"i").replace("comment",C._comment).replace("tag",C._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),C.paragraph=i(C._paragraph).replace("hr",C.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C._tag).getRegex(),C.blockquote=i(C.blockquote).replace("paragraph",C.paragraph).getRegex(),C.normal=b({},C),C.gfm=b({},C.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),C.gfm.table=i(C.gfm.table).replace("hr",C.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C._tag).getRegex(),C.gfm.paragraph=i(C._paragraph).replace("hr",C.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",C.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",C._tag).getRegex(),C.pedantic=b({},C.normal,{html:i("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",C._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ue,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:i(C.normal._paragraph).replace("hr",C.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",C.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),{escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ue,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ue,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/});function G(a){return a.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function J(a){for(var s,t="",n=a.length,e=0;e<n;e++)s=a.charCodeAt(e),t+="&#"+(s=.5<Math.random()?"x"+s.toString(16):s)+";";return t}F._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",F.punctuation=i(F.punctuation).replace(/punctuation/g,F._punctuation).getRegex(),F.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,F.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,F._comment=i(C._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),F.emStrong.lDelim=i(F.emStrong.lDelim).replace(/punct/g,F._punctuation).getRegex(),F.emStrong.rDelimAst=i(F.emStrong.rDelimAst,"g").replace(/punct/g,F._punctuation).getRegex(),F.emStrong.rDelimUnd=i(F.emStrong.rDelimUnd,"g").replace(/punct/g,F._punctuation).getRegex(),F._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,F._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,F._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,F.autolink=i(F.autolink).replace("scheme",F._scheme).replace("email",F._email).getRegex(),F._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,F.tag=i(F.tag).replace("comment",F._comment).replace("attribute",F._attribute).getRegex(),F._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,F._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,F._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,F.link=i(F.link).replace("label",F._label).replace("href",F._href).replace("title",F._title).getRegex(),F.reflink=i(F.reflink).replace("label",F._label).replace("ref",C._label).getRegex(),F.nolink=i(F.nolink).replace("ref",C._label).getRegex(),F.reflinkSearch=i(F.reflinkSearch,"g").replace("reflink",F.reflink).replace("nolink",F.nolink).getRegex(),F.normal=b({},F),F.pedantic=b({},F.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:i(/^!?\[(label)\]\((.*?)\)/).replace("label",F._label).getRegex(),reflink:i(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",F._label).getRegex()}),F.gfm=b({},F.normal,{escape:i(F.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),F.gfm.url=i(F.gfm.url,"i").replace("email",F.gfm._extended_email).getRegex(),F.breaks=b({},F.gfm,{br:i(F.br).replace("{2,}","*").getRegex(),text:i(F.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var K=function(){function a(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||d.defaults,this.options.tokenizer=this.options.tokenizer||new re,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,(this.tokenizer.lexer=this).inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0},e={block:C.normal,inline:F.normal},this.options.pedantic?(e.block=C.pedantic,e.inline=F.pedantic):this.options.gfm&&(e.block=C.gfm,e.inline=this.options.breaks?F.breaks:F.gfm),this.tokenizer.rules=e}a.lex=function(e,u){return new a(u).lex(e)},a.lexInline=function(e,u){return new a(u).inlineTokens(e)};var t,n=a.prototype;return n.lex=function(e){var u;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);u=this.inlineQueue.shift();)this.inlineTokens(u.src,u.tokens);return this.tokens},n.blockTokens=function(e,u){var r,o,m,v,w=this;for(void 0===u&&(u=[]),e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,function(B,h,L){return h+"    ".repeat(L.length)});e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(B){return!!(r=B.call({lexer:w},e,u))&&(e=e.substring(r.raw.length),u.push(r),!0)})))if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),1===r.raw.length&&0<u.length?u[u.length-1].raw+="\n":u.push(r);else if(r=this.tokenizer.code(e))e=e.substring(r.raw.length),!(o=u[u.length-1])||"paragraph"!==o.type&&"text"!==o.type?u.push(r):(o.raw+="\n"+r.raw,o.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.list(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.def(e))e=e.substring(r.raw.length),!(o=u[u.length-1])||"paragraph"!==o.type&&"text"!==o.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(o.raw+="\n"+r.raw,o.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text);else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),u.push(r);else if(m=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var B=1/0,h=e.slice(1),L=void 0;w.options.extensions.startBlock.forEach(function(_){"number"==typeof(L=_.call({lexer:this},h))&&0<=L&&(B=Math.min(B,L))}),B<1/0&&0<=B&&(m=e.substring(0,B+1))}(),this.state.top&&(r=this.tokenizer.paragraph(m)))o=u[u.length-1],v&&"paragraph"===o.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):u.push(r),v=m.length!==e.length,e=e.substring(r.raw.length);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),(o=u[u.length-1])&&"text"===o.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):u.push(r);else if(e){var c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}return this.state.top=!0,u},n.inline=function(e,u){return this.inlineQueue.push({src:e,tokens:u=void 0===u?[]:u}),u},n.inlineTokens=function(e,u){var r,o,m,v,w,c,B=this,h=(void 0===u&&(u=[]),e);if(this.tokens.links){var L=Object.keys(this.tokens.links);if(0<L.length)for(;null!=(v=this.tokenizer.rules.inline.reflinkSearch.exec(h));)L.includes(v[0].slice(v[0].lastIndexOf("[")+1,-1))&&(h=h.slice(0,v.index)+"["+le("a",v[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(v=this.tokenizer.rules.inline.blockSkip.exec(h));)h=h.slice(0,v.index)+"["+le("a",v[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(v=this.tokenizer.rules.inline.escapedEmSt.exec(h));)h=h.slice(0,v.index+v[0].length-2)+"++"+h.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(w||(c=""),w=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(D){return!!(r=D.call({lexer:B},e,u))&&(e=e.substring(r.raw.length),u.push(r),!0)})))if(r=this.tokenizer.escape(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.tag(e))e=e.substring(r.raw.length),(o=u[u.length-1])&&"text"===r.type&&"text"===o.type?(o.raw+=r.raw,o.text+=r.text):u.push(r);else if(r=this.tokenizer.link(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(r.raw.length),(o=u[u.length-1])&&"text"===r.type&&"text"===o.type?(o.raw+=r.raw,o.text+=r.text):u.push(r);else if(r=this.tokenizer.emStrong(e,h,c))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.codespan(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.br(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.del(e))e=e.substring(r.raw.length),u.push(r);else if(r=this.tokenizer.autolink(e,J))e=e.substring(r.raw.length),u.push(r);else if(!this.state.inLink&&(r=this.tokenizer.url(e,J)))e=e.substring(r.raw.length),u.push(r);else if(m=e,this.options.extensions&&this.options.extensions.startInline&&function(){var D=1/0,$=e.slice(1),O=void 0;B.options.extensions.startInline.forEach(function(he){"number"==typeof(O=he.call({lexer:this},$))&&0<=O&&(D=Math.min(D,O))}),D<1/0&&0<=D&&(m=e.substring(0,D+1))}(),r=this.tokenizer.inlineText(m,G))e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(c=r.raw.slice(-1)),w=!0,(o=u[u.length-1])&&"text"===o.type?(o.raw+=r.raw,o.text+=r.text):u.push(r);else if(e){var _="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(_);break}throw new Error(_)}return u},n=a,(t=[{key:"rules",get:function(){return{block:C,inline:F}}}])&&y(n,t),Object.defineProperty(n,"prototype",{writable:!1}),a}(),ne=function(){function a(t){this.options=t||d.defaults}var s=a.prototype;return s.code=function(t,r,e){var u;return r=(r||"").match(/\S*/)[0],this.options.highlight&&null!=(u=this.options.highlight(t,r))&&u!==t&&(e=!0,t=u),t=t.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+z(r)+'">'+(e?t:z(t,!0))+"</code></pre>\n":"<pre><code>"+(e?t:z(t,!0))+"</code></pre>\n"},s.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},s.html=function(t){return t},s.heading=function(t,n,e,u){return this.options.headerIds?"<h"+n+' id="'+(this.options.headerPrefix+u.slug(e))+'">'+t+"</h"+n+">\n":"<h"+n+">"+t+"</h"+n+">\n"},s.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.list=function(t,n,e){var u=n?"ol":"ul";return"<"+u+(n&&1!==e?' start="'+e+'"':"")+">\n"+t+"</"+u+">\n"},s.listitem=function(t){return"<li>"+t+"</li>\n"},s.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},s.paragraph=function(t){return"<p>"+t+"</p>\n"},s.table=function(t,n){return"<table>\n<thead>\n"+t+"</thead>\n"+(n=n&&"<tbody>"+n+"</tbody>")+"</table>\n"},s.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},s.tablecell=function(t,n){var e=n.header?"th":"td";return(n.align?"<"+e+' align="'+n.align+'">':"<"+e+">")+t+"</"+e+">\n"},s.strong=function(t){return"<strong>"+t+"</strong>"},s.em=function(t){return"<em>"+t+"</em>"},s.codespan=function(t){return"<code>"+t+"</code>"},s.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.del=function(t){return"<del>"+t+"</del>"},s.link=function(t,n,e){return null===(t=f(this.options.sanitize,this.options.baseUrl,t))?e:(t='<a href="'+t+'"',n&&(t+=' title="'+n+'"'),t+">"+e+"</a>")},s.image=function(t,n,e){return null===(t=f(this.options.sanitize,this.options.baseUrl,t))?e:(t='<img src="'+t+'" alt="'+e+'"',n&&(t+=' title="'+n+'"'),t+(this.options.xhtml?"/>":">"))},s.text=function(t){return t},a}(),V=function(){function a(){}var s=a.prototype;return s.strong=function(t){return t},s.em=function(t){return t},s.codespan=function(t){return t},s.del=function(t){return t},s.html=function(t){return t},s.text=function(t){return t},s.link=function(t,n,e){return""+e},s.image=function(t,n,e){return""+e},s.br=function(){return""},a}(),ce=function(){function a(){this.seen={}}var s=a.prototype;return s.serialize=function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},s.getNextSafeSlug=function(t,n){var e=t,u=0;if(this.seen.hasOwnProperty(e))for(u=this.seen[t];e=t+"-"+ ++u,this.seen.hasOwnProperty(e););return n||(this.seen[t]=u,this.seen[e]=0),e},s.slug=function(t,n){return void 0===n&&(n={}),t=this.serialize(t),this.getNextSafeSlug(t,n.dryrun)},a}(),H=function(){function a(t){this.options=t||d.defaults,this.options.renderer=this.options.renderer||new ne,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new V,this.slugger=new ce}a.parse=function(t,n){return new a(n).parse(t)},a.parseInline=function(t,n){return new a(n).parseInline(t)};var s=a.prototype;return s.parse=function(t,n){void 0===n&&(n=!0);for(var e,u,r,o,m,v,w,c,B,h,L,_,D,$,O,he,ee="",de=t.length,ie=0;ie<de;ie++)if(c=t[ie],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[c.type]&&(!1!==(he=this.options.extensions.renderers[c.type].call({parser:this},c))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)))ee+=he||"";else switch(c.type){case"space":continue;case"hr":ee+=this.renderer.hr();continue;case"heading":ee+=this.renderer.heading(this.parseInline(c.tokens),c.depth,M(this.parseInline(c.tokens,this.textRenderer)),this.slugger);continue;case"code":ee+=this.renderer.code(c.text,c.lang,c.escaped);continue;case"table":for(v=B="",r=c.header.length,e=0;e<r;e++)v+=this.renderer.tablecell(this.parseInline(c.header[e].tokens),{header:!0,align:c.align[e]});for(B+=this.renderer.tablerow(v),w="",r=c.rows.length,e=0;e<r;e++){for(v="",o=(m=c.rows[e]).length,u=0;u<o;u++)v+=this.renderer.tablecell(this.parseInline(m[u].tokens),{header:!1,align:c.align[u]});w+=this.renderer.tablerow(v)}ee+=this.renderer.table(B,w);continue;case"blockquote":w=this.parse(c.tokens),ee+=this.renderer.blockquote(w);continue;case"list":for(B=c.ordered,se=c.start,h=c.loose,r=c.items.length,w="",e=0;e<r;e++)D=(_=c.items[e]).checked,$=_.task,L="",_.task&&(O=this.renderer.checkbox(D),h?0<_.tokens.length&&"paragraph"===_.tokens[0].type?(_.tokens[0].text=O+" "+_.tokens[0].text,_.tokens[0].tokens&&0<_.tokens[0].tokens.length&&"text"===_.tokens[0].tokens[0].type&&(_.tokens[0].tokens[0].text=O+" "+_.tokens[0].tokens[0].text)):_.tokens.unshift({type:"text",text:O}):L+=O),L+=this.parse(_.tokens,h),w+=this.renderer.listitem(L,$,D);ee+=this.renderer.list(w,B,se);continue;case"html":ee+=this.renderer.html(c.text);continue;case"paragraph":ee+=this.renderer.paragraph(this.parseInline(c.tokens));continue;case"text":for(w=c.tokens?this.parseInline(c.tokens):c.text;ie+1<de&&"text"===t[ie+1].type;)w+="\n"+((c=t[++ie]).tokens?this.parseInline(c.tokens):c.text);ee+=n?this.renderer.paragraph(w):w;continue;default:var se='Token with "'+c.type+'" type was not found.';if(this.options.silent)return void console.error(se);throw new Error(se)}return ee},s.parseInline=function(t,n){n=n||this.renderer;for(var e,u,r="",o=t.length,m=0;m<o;m++)if(e=t[m],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[e.type]&&(!1!==(u=this.options.extensions.renderers[e.type].call({parser:this},e))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(e.type)))r+=u||"";else switch(e.type){case"escape":case"text":r+=n.text(e.text);break;case"html":r+=n.html(e.text);break;case"link":r+=n.link(e.href,e.title,this.parseInline(e.tokens,n));break;case"image":r+=n.image(e.href,e.title,e.text);break;case"strong":r+=n.strong(this.parseInline(e.tokens,n));break;case"em":r+=n.em(this.parseInline(e.tokens,n));break;case"codespan":r+=n.codespan(e.text);break;case"br":r+=n.br();break;case"del":r+=n.del(this.parseInline(e.tokens,n));break;default:var v='Token with "'+e.type+'" type was not found.';if(this.options.silent)return void console.error(v);throw new Error(v)}return r},a}(),X=function(){function a(t){this.options=t||d.defaults}var s=a.prototype;return s.preprocess=function(t){return t},s.postprocess=function(t){return t},a}();function te(a,s){return function(t,n,e){"function"==typeof n&&(e=n,n=null);var u,r,o,m=b({},n),v=(n=b({},x.defaults,m),u=n.silent,r=n.async,o=e,function(D){var $;if(D.message+="\nPlease report this to https://github.com/markedjs/marked.",u)return $="<p>An error occurred:</p><pre>"+z(D.message+"",!0)+"</pre>",r?Promise.resolve($):o?void o(null,$):$;if(r)return Promise.reject(D);if(!o)throw D;o(D)});if(null==t)return v(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return v(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if((m=n)&&m.sanitize&&!m.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),n.hooks&&(n.hooks.options=n),e){var w,c=n.highlight;try{n.hooks&&(t=n.hooks.preprocess(t)),w=a(t,n)}catch(D){return v(D)}var B,h=function(D){var $;if(!D)try{n.walkTokens&&x.walkTokens(w,n.walkTokens),$=s(w,n),n.hooks&&($=n.hooks.postprocess($))}catch(O){D=O}return n.highlight=c,D?v(D):e(null,$)};return!c||c.length<3?h():(delete n.highlight,w.length?(B=0,x.walkTokens(w,function(D){"code"===D.type&&(B++,setTimeout(function(){c(D.text,D.lang,function($,O){if($)return h($);null!=O&&O!==D.text&&(D.text=O,D.escaped=!0),0==--B&&h()})},0))}),void(0===B&&h())):h())}if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(t):t).then(function(D){return a(D,n)}).then(function(D){return n.walkTokens?Promise.all(x.walkTokens(D,n.walkTokens)).then(function(){return D}):D}).then(function(D){return s(D,n)}).then(function(D){return n.hooks?n.hooks.postprocess(D):D}).catch(v);try{n.hooks&&(t=n.hooks.preprocess(t));var L=a(t,n),_=(n.walkTokens&&x.walkTokens(L,n.walkTokens),s(L,n));return n.hooks?n.hooks.postprocess(_):_}catch(D){return v(D)}}}function x(a,s,t){return te(K.lex,H.parse)(a,s,t)}X.passThroughHooks=new Set(["preprocess","postprocess"]),x.options=x.setOptions=function(a){return x.defaults=b({},x.defaults,a),d.defaults=a=x.defaults,x},x.getDefaults=S,x.defaults=d.defaults,x.use=function(){for(var a=x.defaults.extensions||{renderers:{},childTokens:{}},s=arguments.length,t=new Array(s),n=0;n<s;n++)t[n]=arguments[n];t.forEach(function(e){var u,r=b({},e);if(r.async=x.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(function(h){if(!h.name)throw new Error("extension name required");var L;if(h.renderer&&(a.renderers[h.name]=(L=a.renderers[h.name])?function(){for(var _=arguments.length,D=new Array(_),$=0;$<_;$++)D[$]=arguments[$];var O=h.renderer.apply(this,D);return!1===O?L.apply(this,D):O}:h.renderer),h.tokenizer){if(!h.level||"block"!==h.level&&"inline"!==h.level)throw new Error("extension level must be 'block' or 'inline'");a[h.level]?a[h.level].unshift(h.tokenizer):a[h.level]=[h.tokenizer],h.start&&("block"===h.level?a.startBlock?a.startBlock.push(h.start):a.startBlock=[h.start]:"inline"===h.level&&(a.startInline?a.startInline.push(h.start):a.startInline=[h.start]))}h.childTokens&&(a.childTokens[h.name]=h.childTokens)}),r.extensions=a),e.renderer){var o,m=x.defaults.renderer||new ne;for(o in e.renderer)!function(h){var L=m[h];m[h]=function(){for(var _=arguments.length,D=new Array(_),$=0;$<_;$++)D[$]=arguments[$];var O=e.renderer[h].apply(m,D);return!1===O?L.apply(m,D):O}}(o);r.renderer=m}if(e.tokenizer){var v,w=x.defaults.tokenizer||new re;for(v in e.tokenizer)!function(h){var L=w[h];w[h]=function(){for(var _=arguments.length,D=new Array(_),$=0;$<_;$++)D[$]=arguments[$];var O=e.tokenizer[h].apply(w,D);return!1===O?L.apply(w,D):O}}(v);r.tokenizer=w}if(e.hooks){var c,B=x.defaults.hooks||new X;for(c in e.hooks)!function(h){var L=B[h];B[h]=X.passThroughHooks.has(h)?function(_){return x.defaults.async?Promise.resolve(e.hooks[h].call(B,_)).then(function(D){return L.call(B,D)}):(_=e.hooks[h].call(B,_),L.call(B,_))}:function(){for(var _=arguments.length,D=new Array(_),$=0;$<_;$++)D[$]=arguments[$];var O=e.hooks[h].apply(B,D);return!1===O?L.apply(B,D):O}}(c);r.hooks=B}e.walkTokens&&(u=x.defaults.walkTokens,r.walkTokens=function(h){var L=[];return L.push(e.walkTokens.call(this,h)),u?L.concat(u.call(this,h)):L}),x.setOptions(r)})},x.walkTokens=function(a,s){for(var t,n=[],e=A(a);!(t=e()).done;)!function(){var u=t.value;switch(n=n.concat(s.call(x,u)),u.type){case"table":for(var r=A(u.header);!(o=r()).done;){var o=o.value;n=n.concat(x.walkTokens(o.tokens,s))}for(var m,v=A(u.rows);!(m=v()).done;)for(var w=A(m.value);!(c=w()).done;){var c=c.value;n=n.concat(x.walkTokens(c.tokens,s))}break;case"list":n=n.concat(x.walkTokens(u.items,s));break;default:x.defaults.extensions&&x.defaults.extensions.childTokens&&x.defaults.extensions.childTokens[u.type]?x.defaults.extensions.childTokens[u.type].forEach(function(B){n=n.concat(x.walkTokens(u[B],s))}):u.tokens&&(n=n.concat(x.walkTokens(u.tokens,s)))}}();return n},x.parseInline=te(K.lexInline,H.parseInline),x.Parser=H,x.parser=H.parse,x.Renderer=ne,x.TextRenderer=V,x.Lexer=K,x.lexer=K.lex,x.Tokenizer=re,x.Slugger=ce,x.Hooks=X,ue=(x.parse=x).options;var Fe=x.setOptions,De=x.use,pe=x.walkTokens,Ae=x.parseInline,ge=x,ke=H.parse,be=K.lex;d.Hooks=X,d.Lexer=K,d.Parser=H,d.Renderer=ne,d.Slugger=ce,d.TextRenderer=V,d.Tokenizer=re,d.getDefaults=S,d.lexer=be,d.marked=x,d.options=ue,d.parse=ge,d.parseInline=Ae,d.parser=ke,d.setOptions=Fe,d.use=De,d.walkTokens=pe});var _self=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Prism=function(d){var y=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,b=0,Q={},A={manual:d.Prism&&d.Prism.manual,disableWorkerMessageHandler:d.Prism&&d.Prism.disableWorkerMessageHandler,util:{encode:function l(i){return i instanceof S?new S(i.type,l(i.content),i.alias):Array.isArray(i)?i.map(l):i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(l){return Object.prototype.toString.call(l).slice(8,-1)},objId:function(l){return l.__id||Object.defineProperty(l,"__id",{value:++b}),l.__id},clone:function l(i,p){var g,f;switch(p=p||{},A.util.type(i)){case"Object":if(f=A.util.objId(i),p[f])return p[f];for(var E in p[f]=g={},i)i.hasOwnProperty(E)&&(g[E]=l(i[E],p));return g;case"Array":return f=A.util.objId(i),p[f]?p[f]:(p[f]=g=[],i.forEach(function(I,k){g[k]=l(I,p)}),g);default:return i}},getLanguage:function(l){for(;l;){var i=y.exec(l.className);if(i)return i[1].toLowerCase();l=l.parentElement}return"none"},setLanguage:function(l,i){l.className=l.className.replace(RegExp(y,"gi"),""),l.classList.add("language-"+i)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(g){var l=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(g.stack)||[])[1];if(l){var i=document.getElementsByTagName("script");for(var p in i)if(i[p].src==l)return i[p]}return null}},isActive:function(l,i,p){for(var g="no-"+i;l;){var f=l.classList;if(f.contains(i))return!0;if(f.contains(g))return!1;l=l.parentElement}return!!p}},languages:{plain:Q,plaintext:Q,text:Q,txt:Q,extend:function(l,i){var p=A.util.clone(A.languages[l]);for(var g in i)p[g]=i[g];return p},insertBefore:function(l,i,p,g){var f=(g=g||A.languages)[l],E={};for(var I in f)if(f.hasOwnProperty(I)){if(I==i)for(var k in p)p.hasOwnProperty(k)&&(E[k]=p[k]);p.hasOwnProperty(I)||(E[I]=f[I])}var q=g[l];return g[l]=E,A.languages.DFS(A.languages,function(N,Y){Y===q&&N!=l&&(this[N]=E)}),E},DFS:function l(i,p,g,f){f=f||{};var E=A.util.objId;for(var I in i)if(i.hasOwnProperty(I)){p.call(i,I,i[I],g||I);var k=i[I],q=A.util.type(k);"Object"!==q||f[E(k)]?"Array"===q&&!f[E(k)]&&(f[E(k)]=!0,l(k,p,I,f)):(f[E(k)]=!0,l(k,p,null,f))}}},plugins:{},highlightAll:function(l,i){A.highlightAllUnder(document,l,i)},highlightAllUnder:function(l,i,p){var g={callback:p,container:l,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};A.hooks.run("before-highlightall",g),g.elements=Array.prototype.slice.apply(g.container.querySelectorAll(g.selector)),A.hooks.run("before-all-elements-highlight",g);for(var E,f=0;E=g.elements[f++];)A.highlightElement(E,!0===i,g.callback)},highlightElement:function(l,i,p){var g=A.util.getLanguage(l),f=A.languages[g];A.util.setLanguage(l,g);var E=l.parentElement;E&&"pre"===E.nodeName.toLowerCase()&&A.util.setLanguage(E,g);var k={element:l,language:g,grammar:f,code:l.textContent};function q(Y){k.highlightedCode=Y,A.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,A.hooks.run("after-highlight",k),A.hooks.run("complete",k),p&&p.call(k.element)}if(A.hooks.run("before-sanity-check",k),(E=k.element.parentElement)&&"pre"===E.nodeName.toLowerCase()&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!k.code)return A.hooks.run("complete",k),void(p&&p.call(k.element));if(A.hooks.run("before-highlight",k),k.grammar)if(i&&d.Worker){var N=new Worker(A.filename);N.onmessage=function(Y){q(Y.data)},N.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else q(A.highlight(k.code,k.grammar,k.language));else q(A.util.encode(k.code))},highlight:function(l,i,p){var g={code:l,grammar:i,language:p};if(A.hooks.run("before-tokenize",g),!g.grammar)throw new Error('The language "'+g.language+'" has no grammar.');return g.tokens=A.tokenize(g.code,g.grammar),A.hooks.run("after-tokenize",g),S.stringify(A.util.encode(g.tokens),g.language)},tokenize:function(l,i){var p=i.rest;if(p){for(var g in p)i[g]=p[g];delete i.rest}var f=new R;return j(f,f.head,l),T(l,f,i,f.head,0),function W(l){for(var i=[],p=l.head.next;p!==l.tail;)i.push(p.value),p=p.next;return i}(f)},hooks:{all:{},add:function(l,i){var p=A.hooks.all;p[l]=p[l]||[],p[l].push(i)},run:function(l,i){var p=A.hooks.all[l];if(p&&p.length)for(var f,g=0;f=p[g++];)f(i)}},Token:S};function S(l,i,p,g){this.type=l,this.content=i,this.alias=p,this.length=0|(g||"").length}function U(l,i,p,g){l.lastIndex=i;var f=l.exec(p);if(f&&g&&f[1]){var E=f[1].length;f.index+=E,f[0]=f[0].slice(E)}return f}function T(l,i,p,g,f,E){for(var I in p)if(p.hasOwnProperty(I)&&p[I]){var k=p[I];k=Array.isArray(k)?k:[k];for(var q=0;q<k.length;++q){if(E&&E.cause==I+","+q)return;var N=k[q],Y=N.inside,le=!!N.lookbehind,oe=!!N.greedy,re=N.alias;if(oe&&!N.pattern.global){var C=N.pattern.toString().match(/[imsuy]*$/)[0];N.pattern=RegExp(N.pattern.source,C+"g")}for(var F=N.pattern||N,G=g.next,J=f;G!==i.tail&&!(E&&J>=E.reach);J+=G.value.length,G=G.next){var K=G.value;if(i.length>l.length)return;if(!(K instanceof S)){var V,ne=1;if(oe){if(!(V=U(F,J,l,le))||V.index>=l.length)break;var te=V.index,ce=V.index+V[0].length,H=J;for(H+=G.value.length;te>=H;)H+=(G=G.next).value.length;if(J=H-=G.value.length,G.value instanceof S)continue;for(var X=G;X!==i.tail&&(H<ce||"string"==typeof X.value);X=X.next)ne++,H+=X.value.length;ne--,K=l.slice(J,H),V.index-=J}else if(!(V=U(F,0,K,le)))continue;var x=V[0],ue=K.slice(0,te=V.index),Fe=K.slice(te+x.length),De=J+K.length;E&&De>E.reach&&(E.reach=De);var pe=G.prev;if(ue&&(pe=j(i,pe,ue),J+=ue.length),Z(i,pe,ne),G=j(i,pe,new S(I,Y?A.tokenize(x,Y):x,re,x)),Fe&&j(i,G,Fe),ne>1){var ge={cause:I+","+q,reach:De};T(l,i,p,G.prev,J,ge),E&&ge.reach>E.reach&&(E.reach=ge.reach)}}}}}}function R(){var l={value:null,prev:null,next:null},i={value:null,prev:l,next:null};l.next=i,this.head=l,this.tail=i,this.length=0}function j(l,i,p){var g=i.next,f={value:p,prev:i,next:g};return i.next=f,g.prev=f,l.length++,f}function Z(l,i,p){for(var g=i.next,f=0;f<p&&g!==l.tail;f++)g=g.next;i.next=g,g.prev=i,l.length-=f}if(d.Prism=A,S.stringify=function l(i,p){if("string"==typeof i)return i;if(Array.isArray(i)){var g="";return i.forEach(function(q){g+=l(q,p)}),g}var f={type:i.type,content:l(i.content,p),tag:"span",classes:["token",i.type],attributes:{},language:p},E=i.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(f.classes,E):f.classes.push(E)),A.hooks.run("wrap",f);var I="";for(var k in f.attributes)I+=" "+k+'="'+(f.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'"'+I+">"+f.content+"</"+f.tag+">"},!d.document)return d.addEventListener&&(A.disableWorkerMessageHandler||d.addEventListener("message",function(l){var i=JSON.parse(l.data),p=i.language,f=i.immediateClose;d.postMessage(A.highlight(i.code,A.languages[p],p)),f&&d.close()},!1)),A;var z=A.util.currentScript();function P(){A.manual||A.highlightAll()}if(z&&(A.filename=z.src,z.hasAttribute("data-manual")&&(A.manual=!0)),!A.manual){var M=document.readyState;"loading"===M||"interactive"===M&&z&&z.defer?document.addEventListener("DOMContentLoaded",P):window.requestAnimationFrame?window.requestAnimationFrame(P):window.setTimeout(P,16)}return A}(_self);typeof module<"u"&&module.exports&&(module.exports=Prism),typeof global<"u"&&(global.Prism=Prism),Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(d){"entity"===d.type&&(d.attributes.title=d.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(y,b){var Q={};Q["language-"+b]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[b]},Q.cdata=/^<!\[CDATA\[|\]\]>$/i;var A={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Q}};A["language-"+b]={pattern:/[\s\S]+/,inside:Prism.languages[b]};var S={};S[y]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return y}),"i"),lookbehind:!0,greedy:!0,inside:A},Prism.languages.insertBefore("markup","cdata",S)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(d,y){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+d+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[y,"language-"+y],inside:Prism.languages[y]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(d){var y=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;d.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+y.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+y.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+y.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+y.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:y,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},d.languages.css.atrule.inside.rest=d.languages.css;var b=d.languages.markup;b&&(b.tag.addInlined("style","css"),b.tag.addAttribute("style","css"))}(Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,function(){if(!(typeof Prism>"u"||typeof document>"u")){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var Q={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},A="data-src-status",S="loading",U="loaded",R="pre[data-src]:not(["+A+'="'+U+'"]):not(['+A+'="'+S+'"])';Prism.hooks.add("before-highlightall",function(z){z.selector+=", "+R}),Prism.hooks.add("before-sanity-check",function(z){var P=z.element;if(P.matches(R)){z.code="",P.setAttribute(A,S);var M=P.appendChild(document.createElement("CODE"));M.textContent="Loading\u2026";var l=P.getAttribute("data-src"),i=z.language;if("none"===i){var p=(/\.(\w+)$/.exec(l)||[,"none"])[1];i=Q[p]||p}Prism.util.setLanguage(M,i),Prism.util.setLanguage(P,i);var g=Prism.plugins.autoloader;g&&g.loadLanguages(i),function j(z,P,M){var l=new XMLHttpRequest;l.open("GET",z,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?P(l.responseText):M(l.status>=400?function(z,P){return"\u2716 Error "+z+" while fetching file: "+P}(l.status,l.statusText):"\u2716 Error: File does not exist or is empty"))},l.send(null)}(l,function(f){P.setAttribute(A,U);var E=function Z(z){var P=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(z||"");if(P){var M=Number(P[1]),i=P[3];return P[2]?i?[M,Number(i)]:[M,void 0]:[M,M]}}(P.getAttribute("data-range"));if(E){var I=f.split(/\r\n?|\n/g),k=E[0],q=null==E[1]?I.length:E[1];k<0&&(k+=I.length),k=Math.max(0,Math.min(k-1,I.length)),q<0&&(q+=I.length),q=Math.max(0,Math.min(q,I.length)),f=I.slice(k,q).join("\n"),P.hasAttribute("data-start")||P.setAttribute("data-start",String(k+1))}M.textContent=f,Prism.highlightElement(M)},function(f){P.setAttribute(A,"failed"),M.textContent=f})}}),Prism.plugins.fileHighlight={highlight:function(P){for(var i,M=(P||document).querySelectorAll(R),l=0;i=M[l++];)Prism.highlightElement(i)}};var W=!1;Prism.fileHighlight=function(){W||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),W=!0),Prism.plugins.fileHighlight.highlight.apply(this,arguments)}}}(),function(d){function y(H,X){return H.replace(/<<(\d+)>>/g,function(te,x){return"(?:"+X[+x]+")"})}function b(H,X,te){return RegExp(y(H,X),te||"")}function Q(H,X){for(var te=0;te<X;te++)H=H.replace(/<<self>>/g,function(){return"(?:"+H+")"});return H.replace(/<<self>>/g,"[^\\s\\S]")}var A="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",S="class enum interface record struct",U="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",T="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function R(H){return"\\b(?:"+H.trim().replace(/ /g,"|")+")\\b"}var j=R(S),Z=RegExp(R(A+" "+S+" "+U+" "+T)),W=R(S+" "+U+" "+T),z=R(A+" "+S+" "+T),P=Q("<(?:[^<>;=+\\-*/%&|^]|<<self>>)*>",2),M=Q("\\((?:[^()]|<<self>>)*\\)",2),l="@?\\b[A-Za-z_]\\w*\\b",i=y("<<0>>(?:\\s*<<1>>)?",[l,P]),p=y("(?!<<0>>)<<1>>(?:\\s*\\.\\s*<<1>>)*",[W,i]),g="\\[\\s*(?:,\\s*)*\\]",f=y("<<0>>(?:\\s*(?:\\?\\s*)?<<1>>)*(?:\\s*\\?)?",[p,g]),E=y("[^,()<>[\\];=+\\-*/%&|^]|<<0>>|<<1>>|<<2>>",[P,M,g]),I=y("\\(<<0>>+(?:,<<0>>+)+\\)",[E]),k=y("(?:<<0>>|<<1>>)(?:\\s*(?:\\?\\s*)?<<2>>)*(?:\\s*\\?)?",[I,p,g]),q={keyword:Z,punctuation:/[<>()?,.:[\]]/},N="'(?:[^\r\n'\\\\]|\\\\.|\\\\[Uux][\\da-fA-F]{1,8})'",Y='"(?:\\\\.|[^\\\\"\r\n])*"';d.languages.csharp=d.languages.extend("clike",{string:[{pattern:b("(^|[^$\\\\])<<0>>",['@"(?:""|\\\\[^]|[^\\\\"])*"(?!")']),lookbehind:!0,greedy:!0},{pattern:b("(^|[^@$\\\\])<<0>>",[Y]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:b("(\\busing\\s+static\\s+)<<0>>(?=\\s*;)",[p]),lookbehind:!0,inside:q},{pattern:b("(\\busing\\s+<<0>>\\s*=\\s*)<<1>>(?=\\s*;)",[l,k]),lookbehind:!0,inside:q},{pattern:b("(\\busing\\s+)<<0>>(?=\\s*=)",[l]),lookbehind:!0},{pattern:b("(\\b<<0>>\\s+)<<1>>",[j,i]),lookbehind:!0,inside:q},{pattern:b("(\\bcatch\\s*\\(\\s*)<<0>>",[p]),lookbehind:!0,inside:q},{pattern:b("(\\bwhere\\s+)<<0>>",[l]),lookbehind:!0},{pattern:b("(\\b(?:is(?:\\s+not)?|as)\\s+)<<0>>",[f]),lookbehind:!0,inside:q},{pattern:b("\\b<<0>>(?=\\s+(?!<<1>>|with\\s*\\{)<<2>>(?:\\s*[=,;:{)\\]]|\\s+(?:in|when)\\b))",[k,z,l]),inside:q}],keyword:Z,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),d.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),d.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:b("([(,]\\s*)<<0>>(?=\\s*:)",[l]),lookbehind:!0,alias:"punctuation"}}),d.languages.insertBefore("csharp","class-name",{namespace:{pattern:b("(\\b(?:namespace|using)\\s+)<<0>>(?:\\s*\\.\\s*<<0>>)*(?=\\s*[;{])",[l]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:b("(\\b(?:default|sizeof|typeof)\\s*\\(\\s*(?!\\s))(?:[^()\\s]|\\s(?!\\s)|<<0>>)*(?=\\s*\\))",[M]),lookbehind:!0,alias:"class-name",inside:q},"return-type":{pattern:b("<<0>>(?=\\s+(?:<<1>>\\s*(?:=>|[({]|\\.\\s*this\\s*\\[)|this\\s*\\[))",[k,p]),inside:q,alias:"class-name"},"constructor-invocation":{pattern:b("(\\bnew\\s+)<<0>>(?=\\s*[[({])",[k]),lookbehind:!0,inside:q,alias:"class-name"},"generic-method":{pattern:b("<<0>>\\s*<<1>>(?=\\s*\\()",[l,P]),inside:{function:b("^<<0>>",[l]),generic:{pattern:RegExp(P),alias:"class-name",inside:q}}},"type-list":{pattern:b("\\b((?:<<0>>\\s+<<1>>|record\\s+<<1>>\\s*<<5>>|where\\s+<<2>>)\\s*:\\s*)(?:<<3>>|<<4>>|<<1>>\\s*<<5>>|<<6>>)(?:\\s*,\\s*(?:<<3>>|<<4>>|<<6>>))*(?=\\s*(?:where|[{;]|=>|$))",[j,i,l,k,Z.source,M,"\\bnew\\s*\\(\\s*\\)"]),lookbehind:!0,inside:{"record-arguments":{pattern:b("(^(?!new\\s*\\()<<0>>\\s*)<<1>>",[i,M]),lookbehind:!0,greedy:!0,inside:d.languages.csharp},keyword:Z,"class-name":{pattern:RegExp(k),greedy:!0,inside:q},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var le=Y+"|"+N,oe=y("/(?![*/])|//[^\r\n]*[\r\n]|/\\*(?:[^*]|\\*(?!/))*\\*/|<<0>>",[le]),re=Q(y("[^\"'/()]|<<0>>|\\(<<self>>*\\)",[oe]),2),C="\\b(?:assembly|event|field|method|module|param|property|return|type)\\b",F=y("<<0>>(?:\\s*\\(<<1>>*\\))?",[p,re]);d.languages.insertBefore("csharp","class-name",{attribute:{pattern:b("((?:^|[^\\s\\w>)?])\\s*\\[\\s*)(?:<<0>>\\s*:\\s*)?<<1>>(?:\\s*,\\s*<<1>>)*(?=\\s*\\])",[C,F]),lookbehind:!0,greedy:!0,inside:{target:{pattern:b("^<<0>>(?=\\s*:)",[C]),alias:"keyword"},"attribute-arguments":{pattern:b("\\(<<0>>*\\)",[re]),inside:d.languages.csharp},"class-name":{pattern:RegExp(p),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var G=":[^}\r\n]+",J=Q(y("[^\"'/()]|<<0>>|\\(<<self>>*\\)",[oe]),2),K=y("\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}",[J,G]),ne=Q(y("[^\"'/()]|/(?!\\*)|/\\*(?:[^*]|\\*(?!/))*\\*/|<<0>>|\\(<<self>>*\\)",[le]),2),V=y("\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}",[ne,G]);function ce(H,X){return{interpolation:{pattern:b("((?:^|[^{])(?:\\{\\{)*)<<0>>",[H]),lookbehind:!0,inside:{"format-string":{pattern:b("(^\\{(?:(?![}:])<<0>>)*)<<1>>(?=\\}$)",[X,G]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:d.languages.csharp}}},string:/[\s\S]+/}}d.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:b('(^|[^\\\\])(?:\\$@|@\\$)"(?:""|\\\\[^]|\\{\\{|<<0>>|[^\\\\{"])*"',[K]),lookbehind:!0,greedy:!0,inside:ce(K,J)},{pattern:b('(^|[^@\\\\])\\$"(?:\\\\.|\\{\\{|<<0>>|[^\\\\"{])*"',[V]),lookbehind:!0,greedy:!0,inside:ce(V,ne)}],char:{pattern:RegExp(N),greedy:!0}}),d.languages.dotnet=d.languages.cs=d.languages.csharp}(Prism),function(d){var y=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;d.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:[^;{\\s\"']|\\s+(?!\\s)|"+y.source+")*?(?:;|(?=\\s*\\{))"),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+y.source+"|(?:[^\\\\\r\n()\"']|\\\\[^])*)\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+y.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+y.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:y,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},d.languages.css.atrule.inside.rest=d.languages.css;var b=d.languages.markup;b&&(b.tag.addInlined("style","css"),b.tag.addAttribute("style","css"))}(Prism),function(){if(typeof Prism<"u"&&typeof document<"u"){var d="line-numbers",y=/\n(?!$)/g,b=Prism.plugins.lineNumbers={getLine:function(S,U){if("PRE"===S.tagName&&S.classList.contains(d)){var T=S.querySelector(".line-numbers-rows");if(T){var R=parseInt(S.getAttribute("data-start"),10)||1,j=R+(T.children.length-1);return U<R&&(U=R),U>j&&(U=j),T.children[U-R]}}},resize:function(S){A([S])},assumeViewportIndependence:!0},Q=void 0;window.addEventListener("resize",function(){b.assumeViewportIndependence&&Q===window.innerWidth||(Q=window.innerWidth,A(Array.prototype.slice.call(document.querySelectorAll("pre.line-numbers"))))}),Prism.hooks.add("complete",function(S){if(S.code){var U=S.element,T=U.parentNode;if(T&&/pre/i.test(T.nodeName)&&!U.querySelector(".line-numbers-rows")&&Prism.util.isActive(U,d)){U.classList.remove(d),T.classList.add(d);var R,j=S.code.match(y),W=new Array((j?j.length+1:1)+1).join("<span></span>");(R=document.createElement("span")).setAttribute("aria-hidden","true"),R.className="line-numbers-rows",R.innerHTML=W,T.hasAttribute("data-start")&&(T.style.counterReset="linenumber "+(parseInt(T.getAttribute("data-start"),10)-1)),S.element.appendChild(R),A([T]),Prism.hooks.run("line-numbers",S)}}}),Prism.hooks.add("line-numbers",function(S){S.plugins=S.plugins||{},S.plugins.lineNumbers=!0})}function A(S){if(0!=(S=S.filter(function(T){var R,j=(R=T,R?window.getComputedStyle?getComputedStyle(R):R.currentStyle||null:null)["white-space"];return"pre-wrap"===j||"pre-line"===j})).length){var U=S.map(function(T){var R=T.querySelector("code"),j=T.querySelector(".line-numbers-rows");if(R&&j){var Z=T.querySelector(".line-numbers-sizer"),W=R.textContent.split(y);Z||((Z=document.createElement("span")).className="line-numbers-sizer",R.appendChild(Z)),Z.innerHTML="0",Z.style.display="block";var z=Z.getBoundingClientRect().height;return Z.innerHTML="",{element:T,lines:W,lineHeights:[],oneLinerHeight:z,sizer:Z}}}).filter(Boolean);U.forEach(function(T){var R=T.sizer,j=T.lines,Z=T.lineHeights,W=T.oneLinerHeight;Z[j.length-1]=void 0,j.forEach(function(z,P){if(z&&z.length>1){var M=R.appendChild(document.createElement("span"));M.style.display="block",M.textContent=z}else Z[P]=W})}),U.forEach(function(T){for(var R=T.sizer,j=T.lineHeights,Z=0,W=0;W<j.length;W++)void 0===j[W]&&(j[W]=R.children[Z++].getBoundingClientRect().height)}),U.forEach(function(T){var R=T.sizer,j=T.element.querySelector(".line-numbers-rows");R.style.display="none",R.innerHTML="",T.lineHeights.forEach(function(Z,W){j.children[W].style.height=Z+"px"})})}}}();
(self.webpackChunkca_web_components=self.webpackChunkca_web_components||[]).push([[179],{676:(Oi,ta,Ni)=>{"use strict";function an(n){return"function"==typeof n}function k(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Ic=k(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Na(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class ci{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(an(r))try{r()}catch(o){t=o instanceof Ic?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Su(o)}catch(s){t=t??[],s instanceof Ic?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Ic(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Su(t);else{if(t instanceof ci){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Na(e,t)}remove(t){const{_finalizers:e}=this;e&&Na(e,t),t instanceof ci&&t._removeParent(this)}}ci.EMPTY=(()=>{const n=new ci;return n.closed=!0,n})();const Ai=ci.EMPTY;function Zo(n){return n instanceof ci||n&&"closed"in n&&an(n.remove)&&an(n.add)&&an(n.unsubscribe)}function Su(n){an(n)?n():n.unsubscribe()}const xi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},no={setTimeout(n,t,...e){const{delegate:r}=no;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=no;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Sn(n){no.setTimeout(()=>{const{onUnhandledError:t}=xi;if(!t)throw n;t(n)})}function Fa(){}const $o=Sr("C",void 0,void 0);function Sr(n,t,e){return{kind:n,value:t,error:e}}let qn=null;function ra(n){if(xi.useDeprecatedSynchronousErrorHandling){const t=!qn;if(t&&(qn={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=qn;if(qn=null,e)throw r}}else n()}class es extends ci{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Zo(t)&&t.add(this)):this.destination=Sc}static create(t,e,r){return new li(t,e,r)}next(t){this.isStopped?Ba(function ro(n){return Sr("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Ba(function na(n){return Sr("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ba($o,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const pn=Function.prototype.bind;function ts(n,t){return pn.call(n,t)}class ns{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Fi(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Fi(r)}else Fi(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Fi(e)}}}class li extends es{constructor(t,e,r){let i;if(super(),an(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&xi.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&ts(t.next,o),error:t.error&&ts(t.error,o),complete:t.complete&&ts(t.complete,o)}):i=t}this.destination=new ns(i)}}function Fi(n){xi.useDeprecatedSynchronousErrorHandling?function io(n){xi.useDeprecatedSynchronousErrorHandling&&qn&&(qn.errorThrown=!0,qn.error=n)}(n):Sn(n)}function Ba(n,t){const{onStoppedNotification:e}=xi;e&&no.setTimeout(()=>e(n,t))}const Sc={closed:!0,next:Fa,error:function Bi(n){throw n},complete:Fa},La="function"==typeof Symbol&&Symbol.observable||"@@observable";function rs(n){return n}let ln=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){const o=function Is(n){return n&&n instanceof es||function zp(n){return n&&an(n.next)&&an(n.error)&&an(n.complete)}(n)&&Zo(n)}(e)?e:new li(e,r,i);return ra(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=Do(r))((i,o)=>{const s=new li({next:a=>{try{e(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[La](){return this}pipe(...e){return function Tu(n){return 0===n.length?rs:1===n.length?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}(e)(this)}toPromise(e){return new(e=Do(e))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function Do(n){var t;return null!==(t=n??xi.Promise)&&void 0!==t?t:Promise}const K=k(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let D=(()=>{class n extends ln{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new Q(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new K}next(e){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Ai:(this.currentObservers=null,o.push(e),new ci(()=>{this.currentObservers=null,Na(o,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){const e=new ln;return e.source=this,e}}return n.create=(t,e)=>new Q(t,e),n})();class Q extends D{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:Ai}}function ge(n){return t=>{if(function pe(n){return an(n?.lift)}(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(n,t,e,r,i){return new Re(n,t,e,r,i)}class Re extends es{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function ne(n,t){return ge((e,r)=>{let i=0;e.subscribe(ie(r,o=>{r.next(n.call(t,o,i++))}))})}function ke(n,t,e,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(n,t,e,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}function Tr(n){return this instanceof Tr?(this.v=n,this):new Tr(n)}function Ci(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function Ye(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Mu=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function _f(n){return an(n?.then)}function Tc(n){return an(n[La])}function yr(n){return Symbol.asyncIterator&&an(n?.[Symbol.asyncIterator])}function Ef(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const If=function Df(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ua(n){return an(n?.[If])}function dr(n){return function rr(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=e.apply(n,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(p){r[p]&&(i[p]=function(g){return new Promise(function(v,y){o.push([p,g,v,y])>1||a(p,g)})})}function a(p,g){try{!function u(p){p.value instanceof Tr?Promise.resolve(p.value.v).then(c,d):f(o[0][2],p)}(r[p](g))}catch(v){f(o[0][3],v)}}function c(p){a("next",p)}function d(p){a("throw",p)}function f(p,g){p(g),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:i}=yield Tr(e.read());if(i)return yield Tr(void 0);yield yield Tr(r)}}finally{e.releaseLock()}})}function _i(n){return an(n?.getReader)}function ir(n){if(n instanceof ln)return n;if(null!=n){if(Tc(n))return function Ui(n){return new ln(t=>{const e=n[La]();if(an(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Mu(n))return function Xr(n){return new ln(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(_f(n))return function os(n){return new ln(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Sn)})}(n);if(yr(n))return Rc(n);if(Ua(n))return function oa(n){return new ln(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(_i(n))return function Sf(n){return Rc(dr(n))}(n)}throw Ef(n)}function Rc(n){return new ln(t=>{(function jp(n,t){var e,r,i,o;return function Le(n,t,e,r){return new(e||(e=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(f){s(f)}}function u(d){try{c(r.throw(d))}catch(f){s(f)}}function c(d){d.done?o(d.value):function i(o){return o instanceof e?o:new e(function(s){s(o)})}(d.value).then(a,u)}c((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Ci(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function So(n,t,e,r=0,i=!1){const o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Mc(n,t,e=1/0){return an(t)?Mc((r,i)=>ne((o,s)=>t(r,o,i,s))(ir(n(r,i))),e):("number"==typeof t&&(e=t),ge((r,i)=>function yA(n,t,e,r,i,o,s,a){const u=[];let c=0,d=0,f=!1;const p=()=>{f&&!u.length&&!c&&t.complete()},g=y=>c<r?v(y):u.push(y),v=y=>{o&&t.next(y),c++;let w=!1;ir(e(y,d++)).subscribe(ie(t,b=>{i?.(b),o?g(b):t.next(b)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;u.length&&c<r;){const b=u.shift();s?So(t,s,()=>v(b)):v(b)}p()}catch(b){t.error(b)}}))};return n.subscribe(ie(t,g,()=>{f=!0,p()})),()=>{a?.()}}(r,i,n,e)))}function Gv(n=1/0){return Mc(rs,n)}const Tf=new ln(n=>n.complete());function Vl(n){return n&&an(n.schedule)}function Hp(n){return n[n.length-1]}function ql(n){return Vl(Hp(n))?n.pop():void 0}function Kv(n,t=0){return ge((e,r)=>{e.subscribe(ie(r,i=>So(r,n,()=>r.next(i),t),()=>So(r,n,()=>r.complete(),t),i=>So(r,n,()=>r.error(i),t)))})}function Wp(n,t=0){return ge((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Xv(n,t){if(!n)throw new Error("Iterable cannot be null");return new ln(e=>{So(e,t,()=>{const r=n[Symbol.asyncIterator]();So(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function sa(n,t){return t?function Jv(n,t){if(null!=n){if(Tc(n))return function Qv(n,t){return ir(n).pipe(Wp(t),Kv(t))}(n,t);if(Mu(n))return function AA(n,t){return new ln(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(_f(n))return function Yv(n,t){return ir(n).pipe(Wp(t),Kv(t))}(n,t);if(yr(n))return Xv(n,t);if(Ua(n))return function xA(n,t){return new ln(e=>{let r;return So(e,t,()=>{r=n[If](),So(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void e.error(s)}o?e.complete():e.next(i)},0,!0)}),()=>an(r?.return)&&r.return()})}(n,t);if(_i(n))return function CA(n,t){return Xv(dr(n),t)}(n,t)}throw Ef(n)}(n,t):ir(n)}function Mf(...n){const t=ql(n),e=function bA(n,t){return"number"==typeof Hp(n)?n.pop():t}(n,1/0),r=n;return r.length?1===r.length?ir(r[0]):Gv(e)(sa(r,t)):Tf}class bt extends D{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function Gl(...n){return sa(n,ql(n))}function kf(n={}){const{connector:t=(()=>new D),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,c=0,d=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),s=u=void 0,d=f=!1},v=()=>{const y=s;g(),y?.unsubscribe()};return ge((y,w)=>{c++,!f&&!d&&p();const b=u=u??t();w.add(()=>{c--,0===c&&!f&&!d&&(a=kc(v,i))}),b.subscribe(w),!s&&c>0&&(s=new li({next:A=>b.next(A),error:A=>{f=!0,p(),a=kc(g,e,A),b.error(A)},complete:()=>{d=!0,p(),a=kc(g,r),b.complete()}}),ir(y).subscribe(s))})(o)}}function kc(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new li({next:()=>{r.unsubscribe(),n()}});return ir(t(...e)).subscribe(r)}function Kl(n,t){return ge((e,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();e.subscribe(ie(r,u=>{i?.unsubscribe();let c=0;const d=o++;ir(n(u,d)).subscribe(i=ie(r,f=>r.next(t?t(u,f,d,c++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ku(n,t=rs){return n=n??Zv,ge((e,r)=>{let i,o=!0;e.subscribe(ie(r,s=>{const a=t(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Zv(n,t){return n===t}function vn(n){for(let t in n)if(n[t]===vn)return t;throw Error("Could not find renamed property on target object.")}function Rr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Rr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Pf(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Vp=vn({__forward_ref__:vn});function Ql(n){return n.__forward_ref__=Ql,n.toString=function(){return Rr(this())},n}function vt(n){return function Of(n){return"function"==typeof n&&n.hasOwnProperty(Vp)&&n.__forward_ref__===Ql}(n)?n():n}function Nf(n){return n&&!!n.\u0275providers}const qp="https://g.co/ng/security#xss";class Ee extends Error{constructor(t,e){super(function Yl(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}function Tt(n){return"string"==typeof n?n:null==n?"":String(n)}function Gp(n,t){throw new Ee(-201,!1)}function To(n,t){null==n&&function Et(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function Nt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ao(n){return{providers:n.providers||[],imports:n.imports||[]}}function za(n){return Ff(n,Jl)||Ff(n,Kp)}function Ff(n,t){return n.hasOwnProperty(t)?n[t]:null}function Xl(n){return n&&(n.hasOwnProperty(Bf)||n.hasOwnProperty(ty))?n[Bf]:null}const Jl=vn({\u0275prov:vn}),Bf=vn({\u0275inj:vn}),Kp=vn({ngInjectableDef:vn}),ty=vn({ngInjectorDef:vn});var Zt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Zt||{});let Ei;function Bn(n){const t=Ei;return Ei=n,t}function ry(n,t,e){const r=za(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&Zt.Optional?null:void 0!==t?t:void Gp(Rr(n))}const on=globalThis;class ze{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Nt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Oc={},Lf="__NG_DI_FLAG__",Nc="ngTempTokenPath",sy=/\n/gm,Uf="__source";let ja;function aa(n){const t=ja;return ja=n,t}function uo(n,t=Zt.Default){if(void 0===ja)throw new Ee(-203,!1);return null===ja?ry(n,void 0,t):ja.get(n,t&Zt.Optional?null:void 0,t)}function Ze(n,t=Zt.Default){return(function ny(){return Ei}()||uo)(vt(n),t)}function un(n,t=Zt.Default){return Ze(n,td(t))}function td(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Zp(n){const t=[];for(let e=0;e<n.length;e++){const r=vt(n[e]);if(Array.isArray(r)){if(0===r.length)throw new Ee(900,!1);let i,o=Zt.Default;for(let s=0;s<r.length;s++){const a=r[s],u=OA(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}t.push(Ze(i,o))}else t.push(Ze(r))}return t}function nd(n,t){return n[Lf]=t,n.prototype[Lf]=t,n}function OA(n){return n[Lf]}function zi(n){return{toString:n}.toString()}var zf=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(zf||{}),Mo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Mo||{});const ko={},cn=[],ss=vn({\u0275cmp:vn}),Bc=vn({\u0275dir:vn}),jf=vn({\u0275pipe:vn}),ay=vn({\u0275mod:vn}),ua=vn({\u0275fac:vn}),Rs=vn({__NG_ELEMENT_ID__:vn}),Po=vn({__NG_ENV_ID__:vn});function $p(n,t,e){let r=n.length;for(;;){const i=n.indexOf(t,e);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}function eg(n,t,e){let r=0;for(;r<e.length;){const i=e[r];if("number"==typeof i){if(0!==i)break;r++;const o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{const o=i,s=e[++r];cy(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function uy(n){return 3===n||4===n||6===n}function cy(n){return 64===n.charCodeAt(0)}function rd(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?e=i:0===e||ly(n,e,i,null,-1===e||2===e?t[++r]:null)}}return n}function ly(n,t,e,r,i){let o=0,s=n.length;if(-1===t)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const id="ng-template";function J(n,t,e){let r=0,i=!0;for(;r<n.length;){let o=n[r++];if("string"==typeof o&&i){const s=n[r++];if(e&&"class"===o&&-1!==$p(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function ye(n){return 4===n.type&&n.value!==id}function se(n,t,e){return t===(4!==n.type||e?n.value:id)}function Xe(n,t,e){let r=4;const i=n.attrs||[],o=function tg(n){for(let t=0;t<n.length;t++)if(uy(n[t]))return t;return n.length}(i);let s=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!se(n,u,e)||""===u&&1===t.length){if(mt(r))return!1;s=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==n.attrs){if(!J(n.attrs,c,e)){if(mt(r))return!1;s=!0}continue}const f=gn(8&r?"class":u,i,ye(n),e);if(-1===f){if(mt(r))return!1;s=!0;continue}if(""!==c){let p;p=f>o?"":i[f+1].toLowerCase();const g=8&r?p:null;if(g&&-1!==$p(g,c,0)||2&r&&c!==p){if(mt(r))return!1;s=!0}}}}else{if(!s&&!mt(r)&&!mt(u))return!1;if(s&&mt(u))continue;s=!1,r=u|1&r}}return mt(r)||s}function mt(n){return 0==(1&n)}function gn(n,t,e,r){if(null===t)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){const s=t[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function BA(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function wr(n,t,e=!1){for(let r=0;r<t.length;r++)if(Xe(n,t[r],e))return!0;return!1}function Oo(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function od(n,t){return n?":not("+t.trim()+")":t}function LA(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&r){const a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!mt(s)&&(t+=od(o,i),i=""),r=s,o=o||!mt(r);e++}return""!==i&&(t+=od(o,i)),t}function dn(n){return zi(()=>{const t=ng(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Mo.Emulated,styles:n.styles||cn,_:null,schemas:n.schemas||null,tView:null,id:""};sd(e);const r=n.dependencies;return e.directiveDefs=ad(r,!1),e.pipeDefs=ad(r,!0),e.id=function Ou(n){let t=0;const e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of e)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(e),e})}function UA(n){return Ut(n)||br(n)}function dy(n){return null!==n}function ji(n){return zi(()=>({type:n.type,bootstrap:n.bootstrap||cn,declarations:n.declarations||cn,imports:n.imports||cn,exports:n.exports||cn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function fy(n,t){if(null==n)return ko;const e={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),e[i]=r,t&&(t[i]=o)}return e}function co(n){return zi(()=>{const t=ng(n);return sd(t),t})}function Gn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ut(n){return n[ss]||null}function br(n){return n[Bc]||null}function fi(n){return n[jf]||null}function ng(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||ko,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||cn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fy(n.inputs,t),outputs:fy(n.outputs)}}function sd(n){n.features?.forEach(t=>t(n))}function ad(n,t){if(!n)return null;const e=t?fi:UA;return()=>("function"==typeof n?n():n).map(r=>e(r)).filter(dy)}const Ln=0,Ge=1,kt=2,Kn=3,Wi=4,Wa=5,Lr=6,Uc=7,ur=8,Va=9,zc=10,tt=11,Ar=12,hy=13,jc=14,cr=15,cd=16,qa=17,Vi=18,Nu=19,Fu=20,No=21,lo=22,Ga=23,Ms=24,Yt=25,rg=1,py=2,ks=7,Ps=9,S=11;function Jr(n){return Array.isArray(n)&&"object"==typeof n[rg]}function kn(n){return Array.isArray(n)&&!0===n[rg]}function Qt(n){return 0!=(4&n.flags)}function Lu(n){return n.componentOffset>-1}function Wf(n){return 1==(1&n.flags)}function as(n){return!!n.template}function ca(n){return 0!=(512&n[kt])}function Uu(n,t){return n.hasOwnProperty(ua)?n[ua]:null}let Ur=null,dd=!1;function Fo(n){const t=Ur;return Ur=n,t}const my={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Wc(n){if(!Vc(n)||n.dirty){if(!n.producerMustRecompute(n)&&!qf(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function og(n){n.dirty=!0,function fd(n){if(void 0===n.liveConsumerNode)return;const t=dd;dd=!0;try{for(const e of n.liveConsumerNode)e.dirty||og(e)}finally{dd=t}}(n),n.consumerMarkedDirty?.(n)}function sg(n){return n&&(n.nextProducerIndex=0),Fo(n)}function us(n,t){if(Fo(t),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Vc(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Gf(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qf(n){zu(n);for(let t=0;t<n.producerNode.length;t++){const e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(Wc(e),r!==e.version))return!0}return!1}function Ja(n){if(zu(n),Vc(n))for(let t=0;t<n.producerNode.length;t++)Gf(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Gf(n,t){if(function qc(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),zu(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Gf(n.producerNode[r],n.producerIndexOfThis[r]);const e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[t],i=n.liveConsumerNode[t];zu(i),i.producerIndexOfThis[r]=t}}function Vc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function zu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let zr=null;function wy(n){const t=Fo(null);try{return n()}finally{Fo(t)}}const by=()=>{},pd=(()=>({...my,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:by}))();class Ay{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function Gc(){return Kc}function Kc(n){return n.type.prototype.ngOnChanges&&(n.setInput=ZA),JA}function JA(){const n=dg(this),t=n?.current;if(t){const e=n.previous;if(e===ko)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function ZA(n,t,e,r){const i=this.declaredInputs[e],o=dg(n)||function $A(n,t){return n[Qf]=t}(n,{previous:ko,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new Ay(u&&u.currentValue,t,a===ko),n[r]=t}Gc.ngInherit=!0;const Qf="__ngSimpleChanges__";function dg(n){return n[Qf]||null}const cs=function(n,t,e){};function Tn(n){for(;Array.isArray(n);)n=n[Ln];return n}function gd(n,t){return Tn(t[n])}function Di(n,t){return Tn(t[n.index])}function Cy(n,t){return n.data[t]}function Wu(n,t){return n[t]}function qi(n,t){const e=t[n];return Jr(e)?e:e[Ln]}function Ns(n,t){return null==t?null:n[t]}function hg(n){n[qa]=0}function pg(n){1024&n[kt]||(n[kt]|=1024,Zf(n,1))}function Ey(n){1024&n[kt]&&(n[kt]&=-1025,Zf(n,-1))}function Zf(n,t){let e=n[Kn];if(null===e)return;e[Wa]+=t;let r=e;for(e=e[Kn];null!==e&&(1===t&&1===r[Wa]||-1===t&&0===r[Wa]);)e[Wa]+=t,r=e,e=e[Kn]}const Dt={lFrame:Ny(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Dy(){return Dt.bindingsEnabled}function la(){return null!==Dt.skipHydrationRootTNode}function Ce(){return Dt.lFrame.lView}function tn(){return Dt.lFrame.tView}function ve(n){return Dt.lFrame.contextLView=n,n[ur]}function we(n){return Dt.lFrame.contextLView=null,n}function Mr(){let n=mg();for(;null!==n&&64===n.type;)n=n.parent;return n}function mg(){return Dt.lFrame.currentTNode}function Uo(n,t){const e=Dt.lFrame;e.currentTNode=n,e.isParent=t}function Fs(){return Dt.lFrame.isParent}function vg(){Dt.lFrame.isParent=!1}function Zr(){const n=Dt.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Yc(){return Dt.lFrame.bindingIndex++}function ky(n,t){const e=Dt.lFrame;e.bindingIndex=e.bindingRootIndex=n,pi(t)}function pi(n){Dt.lFrame.currentDirectiveIndex=n}function Oy(){return Dt.lFrame.currentQueryIndex}function wg(n){Dt.lFrame.currentQueryIndex=n}function $f(n){const t=n[Ge];return 2===t.type?t.declTNode:1===t.type?n[Lr]:null}function qu(n,t,e){if(e&Zt.SkipSelf){let i=t,o=n;for(;!(i=i.parent,null!==i||e&Zt.Host||(i=$f(o),null===i||(o=o[jc],10&i.type))););if(null===i)return!1;t=i,n=o}const r=Dt.lFrame=bg();return r.currentTNode=t,r.lView=n,!0}function eh(n){const t=bg(),e=n[Ge];Dt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function bg(){const n=Dt.lFrame,t=null===n?null:n.child;return null===t?Ny(n):t}function Ny(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Ag(){const n=Dt.lFrame;return Dt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Gu=Ag;function Ku(){const n=Ag();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gi(){return Dt.lFrame.selectedIndex}function Ls(n){Dt.lFrame.selectedIndex=n}let md=!0;function vd(){return md}function Us(n){md=n}function yd(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),u&&(n.viewHooks??=[]).push(-e,u),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),null!=d&&(n.destroyHooks??=[]).push(e,d)}}function jo(n,t,e){By(n,t,3,e)}function wd(n,t,e,r){(3&n[kt])===e&&By(n,t,e,r)}function rh(n,t){let e=n[kt];(3&e)===t&&(e&=8191,e+=1,n[kt]=e)}function By(n,t,e,r){const o=r??-1,s=t.length-1;let a=0;for(let u=void 0!==r?65535&n[qa]:0;u<s;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(n[qa]+=65536),(a<o||-1==o)&&(dx(n,e,t,u),n[qa]=(4294901760&n[qa])+u+2),u++}function _g(n,t){cs(4,n,t);const e=Fo(null);try{t.call(n)}finally{Fo(e),cs(5,n,t)}}function dx(n,t,e,r){const i=e[r]<0,o=e[r+1],a=n[i?-e[r]:e[r]];i?n[kt]>>13<n[qa]>>16&&(3&n[kt])===t&&(n[kt]+=8192,_g(a,o)):_g(a,o)}const Xc=-1;class po{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function fa(n){return n!==Xc}function Ad(n){return 32767&n}function Zc(n,t){let e=function Sg(n){return n>>16}(n),r=t;for(;e>0;)r=r[jc],e--;return r}let jr=!0;function ih(n){const t=jr;return jr=n,t}const Tg=255,zy=5;let jy=0;const zs={};function oh(n,t){const e=mi(n,t);if(-1!==e)return e;const r=t[Ge];r.firstCreatePass&&(n.injectorIndex=t.length,ls(r.data,n),ls(t,null),ls(r.blueprint,null));const i=$c(n,t),o=n.injectorIndex;if(fa(i)){const s=Ad(i),a=Zc(i,t),u=a[Ge].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|u[s+c]}return t[o+8]=i,o}function ls(n,t){n.push(0,0,0,0,0,0,0,0,t)}function mi(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function $c(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;null!==i;){if(r=Og(i),null===r)return Xc;if(e++,i=i[jc],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return Xc}function Rg(n,t,e){!function fx(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(Rs)&&(r=e[Rs]),null==r&&(r=e[Rs]=jy++);const i=r&Tg;t.data[n+(i>>zy)]|=1<<i}(n,t,e)}function Hy(n,t,e){if(e&Zt.Optional||void 0!==n)return n;Gp()}function Wy(n,t,e,r){if(e&Zt.Optional&&void 0===r&&(r=null),!(e&(Zt.Self|Zt.Host))){const i=n[Va],o=Bn(void 0);try{return i?i.get(t,r,e&Zt.Optional):ry(t,r,e&Zt.Optional)}finally{Bn(o)}}return Hy(r,0,e)}function el(n,t,e,r=Zt.Default,i){if(null!==n){if(2048&t[kt]&&!(r&Zt.Self)){const s=function Ky(n,t,e,r,i){let o=n,s=t;for(;null!==o&&null!==s&&2048&s[kt]&&!(512&s[kt]);){const a=kg(o,s,e,r|Zt.Self,zs);if(a!==zs)return a;let u=o.parent;if(!u){const c=s[Fu];if(c){const d=c.get(e,zs,r);if(d!==zs)return d}u=Og(s),s=s[jc]}o=u}return i}(n,t,e,r,zs);if(s!==zs)return s}const o=kg(n,t,e,r,zs);if(o!==zs)return o}return Wy(t,e,r,i)}function kg(n,t,e,r,i){const o=function hx(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Rs)?n[Rs]:void 0;return"number"==typeof t?t>=0?t&Tg:Gy:t}(e);if("function"==typeof o){if(!qu(t,n,r))return r&Zt.Host?Hy(i,0,r):Wy(t,e,r,i);try{let s;if(s=o(r),null!=s||r&Zt.Optional)return s;Gp()}finally{Gu()}}else if("number"==typeof o){let s=null,a=mi(n,t),u=Xc,c=r&Zt.Host?t[cr][Lr]:null;for((-1===a||r&Zt.SkipSelf)&&(u=-1===a?$c(n,t):t[a+8],u!==Xc&&Pg(r,!1)?(s=t[Ge],a=Ad(u),t=Zc(u,t)):a=-1);-1!==a;){const d=t[Ge];if(qy(o,a,d.data)){const f=Vy(a,t,e,s,r,c);if(f!==zs)return f}u=t[a+8],u!==Xc&&Pg(r,t[Ge].data[a+8]===c)&&qy(o,a,t)?(s=d,a=Ad(u),t=Zc(u,t)):a=-1}}return i}function Vy(n,t,e,r,i,o){const s=t[Ge],a=s.data[n+8],d=sh(a,s,e,null==r?Lu(a)&&jr:r!=s&&0!=(3&a.type),i&Zt.Host&&o===a);return null!==d?Qu(t,s,d,a):zs}function sh(n,t,e,r,i){const o=n.providerIndexes,s=t.data,a=1048575&o,u=n.directiveStart,d=o>>20,p=i?a+d:n.directiveEnd;for(let g=r?a:a+d;g<p;g++){const v=s[g];if(g<u&&e===v||g>=u&&v.type===e)return g}if(i){const g=s[u];if(g&&as(g)&&g.type===e)return u}return null}function Qu(n,t,e,r){let i=n[e];const o=t.data;if(function Eg(n){return n instanceof po}(i)){const s=i;s.resolving&&function _A(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${n}${e}`)}(function yn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Tt(n)}(o[e]));const a=ih(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Bn(s.injectImpl):null;qu(n,r,Zt.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&function lx(n,t,e){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Kc(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}(e,o[e],t)}finally{null!==c&&Bn(c),ih(a),s.resolving=!1,Gu()}}return i}function qy(n,t,e){return!!(e[t+(n>>zy)]&1<<n)}function Pg(n,t){return!(n&Zt.Self||n&Zt.Host&&t)}class $r{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return el(this._tNode,this._lView,t,td(r),e)}}function Gy(){return new $r(Mr(),Ce())}function Og(n){const t=n[Ge],e=t.type;return 2===e?t.declTNode:1===e?n[Lr]:null}const Ii="__parameters__";function rl(n,t,e){return zi(()=>{const r=function ah(n){return function(...e){if(n){const r=n(...e);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,d){const f=u.hasOwnProperty(Ii)?u[Ii]:Object.defineProperty(u,Ii,{value:[]})[Ii];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Xu(n,t){n.forEach(e=>Array.isArray(e)?Xu(e,t):t(e))}function Jy(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function uh(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Ed(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}function go(n,t,e){let r=ol(n,t);return r>=0?n[1|r]=e:(r=~r,function wx(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(1===i)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;)n[i]=n[i-2],i--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function Ng(n,t){const e=ol(n,t);if(e>=0)return n[1|e]}function ol(n,t){return function Zy(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}(n,t,1)}const Lg=nd(rl("Optional"),8),Ug=nd(rl("SkipSelf"),4);function gh(n){return 128==(128&n.flags)}var eu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(eu||{});const vh=/^>|^->|<!--|-->|--!>|<!-$/g,Ux=/(<|>)/g,zx="\u200b$1\u200b";const Gg=new Map;let jx=0;const yh="__ngContext__";function ei(n,t){Jr(t)?(n[yh]=t[Nu],function Wx(n){Gg.set(n[Nu],n)}(t)):n[yh]=t}let Xg;function Sd(n,t){return Xg(n,t)}function Td(n){const t=n[Kn];return kn(t)?t[Kn]:t}function g0(n){return v0(n[Ar])}function m0(n){return v0(n[Wi])}function v0(n){for(;null!==n&&!kn(n);)n=n[Wi];return n}function ul(n,t,e,r,i){if(null!=r){let o,s=!1;kn(r)?o=r:Jr(r)&&(s=!0,r=r[Ln]);const a=Tn(r);0===n&&null!==e?null==i?A0(t,e,a):ec(t,e,a,i||null,!0):1===n&&null!==e?ec(t,e,a,i||null,!0):2===n?function kd(n,t,e){const r=Rd(n,t);r&&function t1(n,t,e,r){n.removeChild(t,e,r)}(n,r,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=o&&function mo(n,t,e,r,i){const o=e[ks];o!==Tn(e)&&ul(t,n,r,o,i);for(let a=S;a<e.length;a++){const u=e[a];Od(u[Ge],u,n,t,r,o)}}(t,n,o,e,i)}}function Jg(n,t){return n.createComment(function c0(n){return n.replace(vh,t=>t.replace(Ux,zx))}(t))}function Ah(n,t,e){return n.createElement(t,e)}function w0(n,t){const e=n[Ps],r=e.indexOf(t);Ey(t),e.splice(r,1)}function ti(n,t){if(n.length<=S)return;const e=S+t,r=n[e];if(r){const i=r[cd];null!==i&&i!==n&&w0(i,r),t>0&&(n[e-1][Wi]=r[Wi]);const o=uh(n,S+t);!function Jx(n,t){Od(n,t,t[tt],2,null,null),t[Ln]=null,t[Lr]=null}(r[Ge],r);const s=o[Vi];null!==s&&s.detachView(o[Ge]),r[Kn]=null,r[Wi]=null,r[kt]&=-129}return r}function or(n,t){if(!(256&t[kt])){const e=t[tt];t[Ga]&&Ja(t[Ga]),t[Ms]&&Ja(t[Ms]),e.destroyNode&&Od(n,t,e,3,null,null),function $x(n){let t=n[Ar];if(!t)return Zg(n[Ge],n);for(;t;){let e=null;if(Jr(t))e=t[Ar];else{const r=t[S];r&&(e=r)}if(!e){for(;t&&!t[Wi]&&t!==n;)Jr(t)&&Zg(t[Ge],t),t=t[Kn];null===t&&(t=n),Jr(t)&&Zg(t[Ge],t),e=t&&t[Wi]}t=e}}(t)}}function Zg(n,t){if(!(256&t[kt])){t[kt]&=-129,t[kt]|=256,function e1(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const i=t[e[r]];if(!(i instanceof po)){const o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];cs(4,a,u);try{u.call(a)}finally{cs(5,a,u)}}else{cs(4,i,o);try{o.call(i)}finally{cs(5,i,o)}}}}}(n,t),function tu(n,t){const e=n.cleanup,r=t[Uc];if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else e[o].call(r[e[o+1]]);null!==r&&(t[Uc]=null);const i=t[No];if(null!==i){t[No]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,t),1===t[Ge].type&&t[tt].destroy();const e=t[cd];if(null!==e&&kn(t[Kn])){e!==t[Kn]&&w0(e,t);const r=t[Vi];null!==r&&r.detachView(n)}!function Vx(n){Gg.delete(n[Nu])}(t)}}function $g(n,t,e){return function b0(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[Ln];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Mo.None||o===Mo.Emulated)return null}return Di(r,e)}}(n,t.parent,e)}function ec(n,t,e,r,i){n.insertBefore(t,e,r,i)}function A0(n,t,e){n.appendChild(t,e)}function xh(n,t,e,r,i){null!==r?ec(n,t,e,r,i):A0(n,t,e)}function Rd(n,t){return n.parentNode(t)}function Yn(n,t,e){return em(n,t,e)}let tm,Eh,Dh,Ih,em=function sr(n,t,e){return 40&n.type?Di(n,e):null};function _h(n,t,e,r){const i=$g(n,r,t),o=t[tt],a=Yn(r.parent||t[Lr],r,t);if(null!=i)if(Array.isArray(e))for(let u=0;u<e.length;u++)xh(o,i,e[u],a,!1);else xh(o,i,e,a,!1);void 0!==tm&&tm(o,r,t,e,i)}function Md(n,t){if(null!==t){const e=t.type;if(3&e)return Di(t,n);if(4&e)return nm(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return Md(n,r);{const i=n[t.index];return kn(i)?nm(-1,i):Tn(i)}}if(32&e)return Sd(t,n)()||Tn(n[t.index]);{const r=C0(n,t);return null!==r?Array.isArray(r)?r[0]:Md(Td(n[cr]),r):Md(n,t.next)}}return null}function C0(n,t){return null!==t?n[cr][Lr].projection[t.projection]:null}function nm(n,t){const e=S+n+1;if(e<t.length){const r=t[e],i=r[Ge].firstChild;if(null!==i)return Md(r,i)}return t[ks]}function Pd(n,t,e,r,i,o,s){for(;null!=e;){const a=r[e.index],u=e.type;if(s&&0===t&&(a&&ei(Tn(a),r),e.flags|=2),32!=(32&e.flags))if(8&u)Pd(n,t,e.child,r,i,o,!1),ul(t,n,i,a,o);else if(32&u){const c=Sd(e,r);let d;for(;d=c();)ul(t,n,i,d,o);ul(t,n,i,a,o)}else 16&u?Nd(n,t,r,e,i,o):ul(t,n,i,a,o);e=s?e.projectionNext:e.next}}function Od(n,t,e,r,i,o){Pd(e,r,n.firstChild,t,i,o,!1)}function Nd(n,t,e,r,i,o){const s=e[cr],u=s[Lr].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)ul(t,n,i,u[c],o);else{let c=u;const d=s[Kn];gh(r)&&(c.flags|=128),Pd(n,t,c,d,i,o,!0)}}function E0(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function D0(n,t,e){const{mergedAttrs:r,classes:i,styles:o}=e;null!==r&&eg(n,t,r),null!==i&&E0(n,t,i),null!==o&&function n1(n,t,e){n.setAttribute(t,"style",e)}(n,t,o)}function tc(n){return function rm(){if(void 0===Eh&&(Eh=null,on.trustedTypes))try{Eh=on.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Eh}()?.createHTML(n)||n}function S0(n){return function Sh(){if(void 0===Ih&&(Ih=null,on.trustedTypes))try{Ih=on.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ih}()?.createScriptURL(n)||n}class nc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qp})`}}class o1 extends nc{getTypeName(){return"HTML"}}class s1 extends nc{getTypeName(){return"Style"}}class a1 extends nc{getTypeName(){return"Script"}}class u1 extends nc{getTypeName(){return"URL"}}class c1 extends nc{getTypeName(){return"ResourceURL"}}function vo(n){return n instanceof nc?n.changingThisBreaksApplicationSecurity:n}function js(n,t){const e=function l1(n){return n instanceof nc&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${qp})`)}return e===t}class p1{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(tc(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class g1{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=tc(t),e}}const Gi=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Th(n){return(n=String(n)).match(Gi)?n:"unsafe:"+n}function pa(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Bd(...n){const t={};for(const e of n)for(const r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}const sm=pa("area,br,col,hr,img,wbr"),R0=pa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),M0=pa("rp,rt"),am=Bd(sm,Bd(R0,pa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bd(M0,pa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bd(M0,R0)),um=pa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),k0=Bd(um,pa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),pa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),w1=pa("script,style,template");class b1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,r=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let i=this.checkClobberedElement(e,e.nextSibling);if(i){e=i;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!am.hasOwnProperty(e))return this.sanitizedSomething=!0,!w1.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const r=t.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!k0.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;um[a]&&(u=Th(u)),this.buf.push(" ",s,'="',P0(u),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();am.hasOwnProperty(e)&&!sm.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(P0(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const A1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dl=/([^\#-~ |!])/g;function P0(n){return n.replace(/&/g,"&amp;").replace(A1,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(dl,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Rh;function O0(n,t){let e=null;try{Rh=Rh||function T0(n){const t=new g1(n);return function Hr(){try{return!!(new window.DOMParser).parseFromString(tc(""),"text/html")}catch{return!1}}()?new p1(t):t}(n);let r=t?String(t):"";e=Rh.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=e.innerHTML,e=Rh.getInertBodyElement(r)}while(r!==o);return tc((new b1).sanitizeChildren(cm(e)||e))}finally{if(e){const r=cm(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function cm(n){return"content"in n&&function x1(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ki=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ki||{});function It(n){const t=Ld();return t?t.sanitize(Ki.URL,n)||"":js(n,"URL")?vo(n):Th(Tt(n))}function lm(n){const t=Ld();if(t)return S0(t.sanitize(Ki.RESOURCE_URL,n)||"");if(js(n,"ResourceURL"))return S0(vo(n));throw new Ee(904,!1)}function Ld(){const n=Ce();return n&&n[zc].sanitizer}const Mh=new ze("ENVIRONMENT_INITIALIZER"),F0=new ze("INJECTOR",-1),B0=new ze("INJECTOR_DEF_TYPES");class dm{get(t,e=Oc){if(e===Oc){const r=new Error(`NullInjectorError: No provider for ${Rr(t)}!`);throw r.name="NullInjectorError",r}return e}}function T1(...n){return{\u0275providers:L0(0,n),\u0275fromNgModule:!0}}function L0(n,...t){const e=[],r=new Set;let i;const o=s=>{e.push(s)};return Xu(t,s=>{const a=s;kh(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&U0(i,o),e}function U0(n,t){for(let e=0;e<n.length;e++){const{ngModule:r,providers:i}=n[e];hm(i,o=>{t(o,r)})}}function kh(n,t,e,r){if(!(n=vt(n)))return!1;let i=null,o=Xl(n);const s=!o&&Ut(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const u=n.ngModule;if(o=Xl(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)kh(c,t,e,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Xu(o.imports,d=>{kh(d,t,e,r)&&(c||=[],c.push(d))})}finally{}void 0!==c&&U0(c,t)}if(!a){const c=Uu(i)||(()=>new i);t({provide:i,useFactory:c,deps:cn},i),t({provide:B0,useValue:i,multi:!0},i),t({provide:Mh,useValue:()=>Ze(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const c=n;hm(u,d=>{t(d,c)})}}}return i!==n&&void 0!==n.providers}function hm(n,t){for(let e of n)Nf(e)&&(e=e.\u0275providers),Array.isArray(e)?hm(e,t):t(e)}const R1=vn({provide:String,useValue:vn});function pm(n){return null!==n&&"object"==typeof n&&R1 in n}function ru(n){return"function"==typeof n}const gm=new ze("Set Injector scope."),Oh={},M1={};let Ud;function Nh(){return void 0===Ud&&(Ud=new dm),Ud}class Hs{}class fl extends Hs{get destroyed(){return this._destroyed}constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zd(t,s=>this.processProvider(s)),this.records.set(F0,hl(void 0,this)),i.has("environment")&&this.records.set(Hs,hl(void 0,this));const o=this.records.get(gm);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(B0.multi,cn,Zt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of t)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=aa(this),r=Bn(void 0);try{return t()}finally{aa(e),Bn(r)}}get(t,e=Oc,r=Zt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Po))return t[Po](this);r=td(r);const o=aa(this),s=Bn(void 0);try{if(!(r&Zt.SkipSelf)){let u=this.records.get(t);if(void 0===u){const c=function O1(n){return"function"==typeof n||"object"==typeof n&&n instanceof ze}(t)&&za(t);u=c&&this.injectableDefInScope(c)?hl(vi(t),Oh):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&Zt.Self?Nh():this.parent).get(t,e=r&Zt.Optional&&e===Oc?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Nc]=a[Nc]||[]).unshift(Rr(t)),o)throw a;return function NA(n,t,e,r){const i=n[Nc];throw t[Uf]&&i.unshift(t[Uf]),n.message=function FA(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Rr(t);if(Array.isArray(t))i=t.map(Rr).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Rr(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(sy,"\n  ")}`}("\n"+n.message,i,e,r),n.ngTokenPath=i,n[Nc]=null,n}(a,t,"R3InjectorError",this.source)}throw a}finally{Bn(s),aa(o)}}resolveInjectorInitializers(){const t=aa(this),e=Bn(void 0);try{const i=this.get(Mh.multi,cn,Zt.Self);for(const o of i)o()}finally{aa(t),Bn(e)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push(Rr(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(t){let e=ru(t=vt(t))?t:vt(t&&t.provide);const r=function k1(n){return pm(n)?hl(void 0,n.useValue):hl(function H0(n,t,e){let r;if(ru(n)){const i=vt(n);return Uu(i)||vi(i)}if(pm(n))r=()=>vt(n.useValue);else if(function Ph(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Zp(n.deps||[]));else if(function z0(n){return!(!n||!n.useExisting)}(n))r=()=>Ze(vt(n.useExisting));else{const i=vt(n&&(n.useClass||n.provide));if(!function P1(n){return!!n.deps}(n))return Uu(i)||vi(i);r=()=>new i(...Zp(n.deps))}return r}(n),Oh)}(t);if(ru(t)||!0!==t.multi)this.records.get(e);else{let i=this.records.get(e);i||(i=hl(void 0,Oh,!0),i.factory=()=>Zp(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){return e.value===Oh&&(e.value=M1,e.value=e.factory()),"object"==typeof e.value&&e.value&&function vm(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=vt(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function vi(n){const t=za(n),e=null!==t?t.factory:Uu(n);if(null!==e)return e;if(n instanceof ze)throw new Ee(204,!1);if(n instanceof Function)return function mm(n){const t=n.length;if(t>0)throw Ed(t,"?"),new Ee(204,!1);const e=function Ro(n){return n&&(n[Jl]||n[Kp])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Ee(204,!1)}function hl(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function zd(n,t){for(const e of n)Array.isArray(e)?zd(e,t):e&&Nf(e)?zd(e.\u0275providers,t):t(e)}const Fh=new ze("AppId",{providedIn:"root",factory:()=>N1}),N1="ng",W0=new ze("Platform Initializer"),iu=new ze("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),V0=new ze("AnimationModuleType"),q0=new ze("CSP nonce",{providedIn:"root",factory:()=>function nn(){if(void 0!==Dh)return Dh;if(typeof document<"u")return document;throw new Ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Q0=(n,t,e)=>null;function Em(n,t,e=!1){return Q0(n,t,e)}class Ie{}class He{}class At{resolveComponentFactory(t){throw function st(n){const t=Error(`No component factory found for ${Rr(n)}.`);return t.ngComponent=n,t}(t)}}let Ft=(()=>{class n{static#e=this.NULL=new At}return n})();function rn(){return Wr(Mr(),Ce())}function Wr(n,t){return new Xn(Di(n,t))}let Xn=(()=>{class n{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=rn}return n})();function yo(n){return n instanceof Xn?n.nativeElement:n}class Un{}let Qi=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function ga(){const n=Ce(),e=qi(Mr().index,n);return(Jr(e)?e:n)[tt]}()}return n})(),Y0=(()=>{class n{static#e=this.\u0275prov=Nt({token:n,providedIn:"root",factory:()=>null})}return n})();class X0{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ZL=new X0("16.2.12"),H1={};function I2(n,t=null,e=null,r){const i=S2(n,t,e,r);return i.resolveInjectorInitializers(),i}function S2(n,t=null,e=null,r,i=new Set){const o=[e||cn,T1(n)];return r=r||("object"==typeof n?void 0:Rr(n)),new fl(o,t||Nh(),r||null,i)}let hs=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Oc;static#t=this.NULL=new dm;static create(e,r){if(Array.isArray(e))return I2({name:""},r,e,"");{const i=e.name??"";return I2({name:i},e.parent,e.providers,i)}}static#n=this.\u0275prov=Nt({token:n,providedIn:"any",factory:()=>Ze(F0)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function V1(n){return n.ngOriginalError}class rc{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&V1(t);for(;e&&V1(e);)e=V1(e);return e||null}}function G1(n){return t=>{setTimeout(n,void 0,t)}}const Qe=class o4 extends D{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&"object"==typeof t){const u=t;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=G1(o),i&&(i=G1(i)),s&&(s=G1(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof ci&&t.add(a),a}};function R2(...n){}class Pn{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&e,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function s4(){const n="function"==typeof on.requestAnimationFrame;let t=on[n?"requestAnimationFrame":"setTimeout"],e=on[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function c4(n){const t=()=>{!function u4(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(on,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Q1(n),n.isCheckStableRunning=!0,K1(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Q1(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,i,o,s,a)=>{if(function d4(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(i,o,s,a);try{return M2(n),e.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&t(),k2(n)}},onInvoke:(e,r,i,o,s,a,u)=>{try{return M2(n),e.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&t(),k2(n)}},onHasTask:(e,r,i,o)=>{e.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Q1(n),K1(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,r,i,o)=>(e.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pn.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(Pn.isInAngularZone())throw new Ee(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,a4,R2,R2);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const a4={};function K1(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Q1(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function M2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function k2(n){n._nesting--,K1(n)}class l4{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}}const P2=new ze("",{providedIn:"root",factory:O2});function O2(){const n=un(Pn);let t=!0;return Mf(new ln(i=>{t=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(t),i.complete()})}),new ln(i=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{Pn.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=n.onUnstable.subscribe(()=>{Pn.assertInAngularZone(),t&&(t=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(kf()))}function Y1(n){return n.ownerDocument.defaultView}function N2(n){return n.ownerDocument}let X1=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Nt({token:n,providedIn:"root",factory:()=>new n})}return n})();function Dm(n){for(;n;){n[kt]|=64;const t=Td(n);if(ca(n)&&!t)return n;n=t}return null}const z2=new ze("",{providedIn:"root",factory:()=>!1});let Z0=null;function V2(n,t){return n[t]??K2()}function q2(n,t){const e=K2();e.producerNode?.length&&(n[t]=Z0,e.lView=n,Z0=G2())}const w4={...my,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Dm(n.lView)},lView:null};function G2(){return Object.create(w4)}function K2(){return Z0??=G2(),Z0}const Bt={};function U(n){Q2(tn(),Ce(),gi()+n,!1)}function Q2(n,t,e,r){if(!r)if(3==(3&t[kt])){const o=n.preOrderCheckHooks;null!==o&&jo(t,o,e)}else{const o=n.preOrderHooks;null!==o&&wd(t,o,0,e)}Ls(e)}function lt(n,t=Zt.Default){const e=Ce();return null===e?Ze(n,t):el(Mr(),e,vt(n),t)}function $0(n,t,e,r,i,o,s,a,u,c,d){const f=t.blueprint.slice();return f[Ln]=i,f[kt]=140|r,(null!==c||n&&2048&n[kt])&&(f[kt]|=2048),hg(f),f[Kn]=f[jc]=n,f[ur]=e,f[zc]=s||n&&n[zc],f[tt]=a||n&&n[tt],f[Va]=u||n&&n[Va]||null,f[Lr]=o,f[Nu]=function Hx(){return jx++}(),f[lo]=d,f[Fu]=c,f[cr]=2==t.type?n[cr]:f,f}function Hh(n,t,e,r,i){let o=n.data[t];if(null===o)o=function J1(n,t,e,r,i){const o=mg(),s=Fs(),u=n.data[t]=function S4(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return la()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,t,r,i);return null===n.firstChild&&(n.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(n,t,e,r,i),function Ry(){return Dt.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=r,o.attrs=i;const s=function Vu(){const n=Dt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Uo(o,!0),o}function Im(n,t,e,r){if(0===e)return-1;const i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function Y2(n,t,e,r,i){const o=V2(t,Ga),s=gi(),a=2&r;try{Ls(-1),a&&t.length>Yt&&Q2(n,t,Yt,!1),cs(a?2:0,i);const c=a?o:null,d=sg(c);try{null!==c&&(c.dirty=!1),e(r,i)}finally{us(c,d)}}finally{a&&null===t[Ga]&&q2(t,Ga),Ls(s),cs(a?3:1,i)}}function Z1(n,t,e){if(Qt(t)){const r=Fo(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,e[s],s)}}finally{Fo(r)}}}function $1(n,t,e){Dy()&&(function N4(n,t,e,r){const i=e.directiveStart,o=e.directiveEnd;Lu(e)&&function H4(n,t,e){const r=Di(t,n),i=X2(e);let s=16;e.signals?s=4096:e.onPush&&(s=64);const a=ew(n,$0(n,i,null,s,r,t,null,n[zc].rendererFactory.createRenderer(r,e),null,null,null));n[t.index]=a}(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||oh(e,t),ei(r,t);const s=e.initialInputs;for(let a=i;a<o;a++){const u=n.data[a],c=Qu(t,n,a,e);ei(c,t),null!==s&&W4(0,a-i,c,u,0,s),as(u)&&(qi(e.index,t)[ur]=Qu(t,n,a,e))}}(n,t,e,Di(e,t)),64==(64&e.flags)&&tT(n,t,e))}function eC(n,t,e=Di){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?e(t,n):n[s];n[i++]=a}}}function X2(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=tC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function tC(n,t,e,r,i,o,s,a,u,c,d){const f=Yt+r,p=f+i,g=function x4(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:Bt);return e}(f,p),v="function"==typeof c?c():c;return g[Ge]={type:n,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1,ssrId:d}}let J2=n=>null;function Z2(n,t,e,r){for(let i in n)if(n.hasOwnProperty(i)){e=null===e?{}:e;const o=n[i];null===r?$2(e,t,i,o):r.hasOwnProperty(i)&&$2(e,t,r[i],o)}return e}function $2(n,t,e,r){n.hasOwnProperty(e)?n[e].push(t,r):n[e]=[t,r]}function nC(n,t,e,r){if(Dy()){const i=null===r?null:{"":-1},o=function B4(n,t){const e=n.directiveRegistry;let r=null,i=null;if(e)for(let o=0;o<e.length;o++){const s=e[o];if(wr(t,s.selectors,!1))if(r||(r=[]),as(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),rC(n,t,a.length)}else r.unshift(s),rC(n,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,e);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&eT(n,t,e,s,i,a),i&&function L4(n,t,e){if(t){const r=n.localNames=[];for(let i=0;i<t.length;i+=2){const o=e[t[i+1]];if(null==o)throw new Ee(-301,!1);r.push(t[i],o)}}}(e,r,i)}e.mergedAttrs=rd(e.mergedAttrs,e.attrs)}function eT(n,t,e,r,i,o){for(let c=0;c<r.length;c++)Rg(oh(e,t),n,r[c].type);!function z4(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,r.length);for(let c=0;c<r.length;c++){const d=r[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=Im(n,t,r.length,null);for(let c=0;c<r.length;c++){const d=r[c];e.mergedAttrs=rd(e.mergedAttrs,d.hostAttrs),j4(n,e,t,u,d),U4(u,d,i),null!==d.contentQueries&&(e.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=64);const f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),u++}!function T4(n,t,e){const i=t.directiveEnd,o=n.data,s=t.attrs,a=[];let u=null,c=null;for(let d=t.directiveStart;d<i;d++){const f=o[d],p=e?e.get(f):null,v=p?p.outputs:null;u=Z2(f.inputs,d,u,p?p.inputs:null),c=Z2(f.outputs,d,c,v);const y=null===u||null===s||ye(t)?null:V4(u,d,s);a.push(y)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=c}(n,e,o)}function tT(n,t,e){const r=e.directiveStart,i=e.directiveEnd,o=e.index,s=function Py(){return Dt.lFrame.currentDirectiveIndex}();try{Ls(o);for(let a=r;a<i;a++){const u=n.data[a],c=t[a];pi(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&F4(u,c)}}finally{Ls(-1),pi(s)}}function F4(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function rC(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function U4(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;as(t)&&(e[""]=n)}}function j4(n,t,e,r,i){n.data[r]=i;const o=i.factory||(i.factory=Uu(i.type)),s=new po(o,as(i),lt);n.blueprint[r]=s,e[r]=s,function P4(n,t,e,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~t.index;(function O4(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,o)}}(n,t,r,Im(n,e,i.hostVars,Bt),i)}function W4(n,t,e,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)nT(r,e,s[a++],s[a++],s[a++])}function nT(n,t,e,r,i){const o=Fo(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==n.setInput?n.setInput(t,i,e,r):t[r]=i}finally{Fo(o)}}function V4(n,t,e){let r=null,i=0;for(;i<e.length;){const o=e[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],e[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function rT(n,t,e,r){return[n,!0,!1,t,null,0,r,e,null,null,null]}function iT(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const o=e[r+1];if(-1!==o){const s=n.data[o];wg(e[r]),s.contentQueries(2,t[o],o)}}}function ew(n,t){return n[Ar]?n[hy][Wi]=t:n[Ar]=t,n[hy]=t,t}function oC(n,t,e){wg(0);const r=Fo(null);try{t(n,e)}finally{Fo(r)}}function oT(n){return n[Uc]||(n[Uc]=[])}function sT(n){return n.cleanup||(n.cleanup=[])}function uT(n,t){const e=n[Va],r=e?e.get(rc,null):null;r&&r.handleError(t)}function sC(n,t,e,r,i){for(let o=0;o<e.length;){const s=e[o++],a=e[o++];nT(n.data[s],t[s],r,a,i)}}function q4(n,t){const e=qi(t,n),r=e[Ge];!function G4(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}(r,e);const i=e[Ln];null!==i&&null===e[lo]&&(e[lo]=Em(i,e[Va])),aC(r,e,e[ur])}function aC(n,t,e){eh(t);try{const r=n.viewQuery;null!==r&&oC(1,r,e);const i=n.template;null!==i&&Y2(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&iT(n,t),n.staticViewQueries&&oC(2,n.viewQuery,e);const o=n.components;null!==o&&function K4(n,t){for(let e=0;e<t.length;e++)q4(n,t[e])}(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[kt]&=-5,Ku()}}let cT=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(e,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function lg(n,t,e){const r=Object.create(pd);e&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=t;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>og(r),run:()=>{if(r.dirty=!1,r.hasRun&&!qf(r))return;r.hasRun=!0;const s=sg(r);try{r.cleanupFn(),r.cleanupFn=by,r.fn(i)}finally{us(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(e,c=>{this.all.has(c)&&this.queue.set(c,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[e,r]of this.queue)this.queue.delete(e),r?r.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Nt({token:n,providedIn:"root",factory:()=>new n})}return n})();function tw(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=Pf(i,a):2==o&&(r=Pf(r,a+": "+t[++s]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function Sm(n,t,e,r,i=!1){for(;null!==e;){const o=t[e.index];null!==o&&r.push(Tn(o)),kn(o)&&lT(o,r);const s=e.type;if(8&s)Sm(n,t,e.child,r);else if(32&s){const a=Sd(e,t);let u;for(;u=a();)r.push(u)}else if(16&s){const a=C0(t,e);if(Array.isArray(a))r.push(...a);else{const u=Td(t[cr]);Sm(u[Ge],u,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function lT(n,t){for(let e=S;e<n.length;e++){const r=n[e],i=r[Ge].firstChild;null!==i&&Sm(r[Ge],r,i,t)}n[ks]!==n[Ln]&&t.push(n[ks])}function nw(n,t,e,r=!0){const i=t[zc],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{dT(n,t,n.template,e)}catch(u){throw r&&uT(t,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function dT(n,t,e,r){const i=t[kt];if(256!=(256&i)){t[zc].effectManager?.flush(),eh(t);try{hg(t),function Ty(n){return Dt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&Y2(n,t,e,2,r);const s=3==(3&i);if(s){const c=n.preOrderCheckHooks;null!==c&&jo(t,c,null)}else{const c=n.preOrderHooks;null!==c&&wd(t,c,0,null),rh(t,0)}if(function X4(n){for(let t=g0(n);null!==t;t=m0(t)){if(!t[py])continue;const e=t[Ps];for(let r=0;r<e.length;r++){pg(e[r])}}}(t),fT(t,2),null!==n.contentQueries&&iT(n,t),s){const c=n.contentCheckHooks;null!==c&&jo(t,c)}else{const c=n.contentHooks;null!==c&&wd(t,c,1),rh(t,1)}!function A4(n,t){const e=n.hostBindingOpCodes;if(null===e)return;const r=V2(t,Ms);try{for(let i=0;i<e.length;i++){const o=e[i];if(o<0)Ls(~o);else{const s=o,a=e[++i],u=e[++i];ky(a,s),r.dirty=!1;const c=sg(r);try{u(2,t[s])}finally{us(r,c)}}}}finally{null===t[Ms]&&q2(t,Ms),Ls(-1)}}(n,t);const a=n.components;null!==a&&pT(t,a,0);const u=n.viewQuery;if(null!==u&&oC(2,u,r),s){const c=n.viewCheckHooks;null!==c&&jo(t,c)}else{const c=n.viewHooks;null!==c&&wd(t,c,2),rh(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[kt]&=-73,Ey(t)}finally{Ku()}}}function fT(n,t){for(let e=g0(n);null!==e;e=m0(e))for(let r=S;r<e.length;r++)hT(e[r],t)}function J4(n,t,e){hT(qi(t,n),e)}function hT(n,t){if(!function _y(n){return 128==(128&n[kt])}(n))return;const e=n[Ge],r=n[kt];if(80&r&&0===t||1024&r||2===t)dT(e,n,e.template,n[ur]);else if(n[Wa]>0){fT(n,1);const i=e.components;null!==i&&pT(n,i,1)}}function pT(n,t,e){for(let r=0;r<t.length;r++)J4(n,t[r],e)}class Tm{get rootNodes(){const t=this._lView,e=t[Ge];return Sm(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ur]}set context(t){this._lView[ur]=t}get destroyed(){return 256==(256&this._lView[kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Kn];if(kn(t)){const e=t[8],r=e?e.indexOf(this):-1;r>-1&&(ti(t,r),uh(e,r))}this._attachedToViewContainer=!1}or(this._lView[Ge],this._lView)}onDestroy(t){!function Ht(n,t){if(256==(256&n[kt]))throw new Ee(911,!1);null===n[No]&&(n[No]=[]),n[No].push(t)}(this._lView,t)}markForCheck(){Dm(this._cdRefInjectingView||this._lView)}detach(){this._lView[kt]&=-129}reattach(){this._lView[kt]|=128}detectChanges(){nw(this._lView[Ge],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zx(n,t){Od(n,t,t[tt],2,null,null)}(this._lView[Ge],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=t}}class Z4 extends Tm{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;nw(t[Ge],t,t[ur],!1)}checkNoChanges(){}get context(){return null}}class gT extends Ft{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ut(t);return new Rm(e,this.ngModule)}}function mT(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class eU{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=td(r);const i=this.injector.get(t,H1,r);return i!==H1||e===H1?i:this.parentInjector.get(t,e,r)}}class Rm extends He{get inputs(){const t=this.componentDef,e=t.inputTransforms,r=mT(t.inputs);if(null!==e)for(const i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return mT(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function Lc(n){return n.map(LA).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,i){let o=(i=i||this.ngModule)instanceof Hs?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new eU(t,o):t,a=s.get(Un,null);if(null===a)throw new Ee(407,!1);const f={rendererFactory:a,sanitizer:s.get(Y0,null),effectManager:s.get(cT,null),afterRenderEventManager:s.get(X1,null)},p=a.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",v=r?function C4(n,t,e,r){const o=r.get(z2,!1)||e===Mo.ShadowDom,s=n.selectRootElement(t,o);return function _4(n){J2(n)}(s),s}(p,r,this.componentDef.encapsulation,s):Ah(p,g,function $4(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(g)),b=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let A=null;null!==v&&(A=Em(v,s,!0));const _=tC(0,null,null,1,0,null,null,null,null,null,null),C=$0(null,_,null,b,null,null,f,p,s,null,A);let E,T;eh(C);try{const O=this.componentDef;let N,B=null;O.findHostDirectiveDefs?(N=[],B=new Map,O.findHostDirectiveDefs(O,N,B),N.push(O)):N=[O];const F=function nU(n,t){const e=n[Ge],r=Yt;return n[r]=t,Hh(e,r,2,"#host",null)}(C,v),X=function rU(n,t,e,r,i,o,s){const a=i[Ge];!function iU(n,t,e,r){for(const i of n)t.mergedAttrs=rd(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(tw(t,t.mergedAttrs,!0),null!==e&&D0(r,e,t))}(r,n,t,s);let u=null;null!==t&&(u=Em(t,i[Va]));const c=o.rendererFactory.createRenderer(t,e);let d=16;e.signals?d=4096:e.onPush&&(d=64);const f=$0(i,X2(e),null,d,i[n.index],n,o,c,null,null,u);return a.firstCreatePass&&rC(a,n,r.length-1),ew(i,f),i[n.index]=f}(F,v,O,N,C,f,p);T=Cy(_,Yt),v&&function sU(n,t,e,r){if(r)eg(n,e,["ng-version",ZL.full]);else{const{attrs:i,classes:o}=function Hf(n){const t=[],e=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&t.push(o,n[++r]):8===i&&e.push(o);else{if(!mt(i))break;i=o}r++}return{attrs:t,classes:e}}(t.selectors[0]);i&&eg(n,e,i),o&&o.length>0&&E0(n,e,o.join(" "))}}(p,O,v,r),void 0!==e&&function aU(n,t,e){const r=n.projection=[];for(let i=0;i<t.length;i++){const o=e[i];r.push(null!=o?Array.from(o):null)}}(T,this.ngContentSelectors,e),E=function oU(n,t,e,r,i,o){const s=Mr(),a=i[Ge],u=Di(s,i);eT(a,i,s,e,null,r);for(let d=0;d<e.length;d++)ei(Qu(i,a,s.directiveStart+d,s),i);tT(a,i,s),u&&ei(u,i);const c=Qu(i,a,s.directiveStart+s.componentOffset,s);if(n[ur]=i[ur]=c,null!==o)for(const d of o)d(c,t);return Z1(a,s,n),c}(X,O,N,B,C,[uU]),aC(_,C,null)}finally{Ku()}return new tU(this.componentType,E,Wr(T,C),C,T)}}class tU extends Ie{constructor(t,e,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new Z4(i),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const o=this._rootLView;sC(o[Ge],o,i,t,e),this.previousInputValues.set(t,e),Dm(qi(this._tNode.index,o))}}get injector(){return new $r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function uU(){const n=Mr();yd(Ce()[Ge],n)}function iw(n){return!!uC(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function uC(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function su(n,t,e){return n[t]=e}function Yi(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function ue(n,t,e,r,i,o,s,a){const u=Ce(),c=tn(),d=n+Yt,f=c.firstCreatePass?function LU(n,t,e,r,i,o,s,a,u){const c=t.consts,d=Hh(t,n,4,s||null,Ns(c,a));nC(t,e,d,Ns(c,u)),yd(t,d);const f=d.tView=tC(2,d,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,d),f.queries=t.queries.embeddedTView(d)),d}(d,c,u,t,e,r,i,o,s):c.data[d];Uo(f,!1);const p=NT(c,u,f,n);vd()&&_h(c,u,p,f),ei(p,u),ew(u,u[d]=rT(p,u,p,f)),Wf(f)&&$1(c,u,f),null!=s&&eC(u,f,a)}let NT=function FT(n,t,e,r){return Us(!0),t[tt].createComment("")};function Wt(n){return Wu(function $a(){return Dt.lFrame.contextLView}(),Yt+n)}function z(n,t,e){const r=Ce();return Yi(r,Yc(),t)&&function ps(n,t,e,r,i,o,s,a){const u=Di(t,e);let d,c=t.inputs;!a&&null!=c&&(d=c[r])?(sC(n,e,d,r,i),Lu(t)&&function M4(n,t){const e=qi(t,n);16&e[kt]||(e[kt]|=64)}(e,t.index)):3&t.type&&(r=function R4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(u,r,i))}(tn(),function Qn(){const n=Dt.lFrame;return Cy(n.tView,n.selectedIndex)}(),r,n,t,r[tt],e,!1),z}function pC(n,t,e,r,i){const s=i?"class":"style";sC(n,e,t.inputs[s],s,r)}function V(n,t,e,r){const i=Ce(),o=tn(),s=Yt+n,a=i[tt],u=o.firstCreatePass?function HU(n,t,e,r,i,o){const s=t.consts,u=Hh(t,n,2,r,Ns(s,i));return nC(t,e,u,Ns(s,o)),null!==u.attrs&&tw(u,u.attrs,!1),null!==u.mergedAttrs&&tw(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,i,t,e,r):o.data[s],c=BT(o,i,u,a,t,n);i[s]=c;const d=Wf(u);return Uo(u,!0),D0(a,c,u),32!=(32&u.flags)&&vd()&&_h(o,i,c,u),0===function ox(){return Dt.lFrame.elementDepthCount}()&&ei(c,i),function sx(){Dt.lFrame.elementDepthCount++}(),d&&($1(o,i,u),Z1(o,u,i)),null!==r&&eC(i,u),V}function Y(){let n=Mr();Fs()?vg():(n=n.parent,Uo(n,!1));const t=n;(function gg(n){return Dt.skipHydrationRootTNode===n})(t)&&function Za(){Dt.skipHydrationRootTNode=null}(),function Lo(){Dt.lFrame.elementDepthCount--}();const e=tn();return e.firstCreatePass&&(yd(e,n),Qt(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function Jc(n){return 0!=(8&n.flags)}(t)&&pC(e,t,Ce(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function yt(n){return 0!=(16&n.flags)}(t)&&pC(e,t,Ce(),t.stylesWithoutHost,!1),Y}function dt(n,t,e,r){return V(n,t,e,r),Y(),dt}let BT=(n,t,e,r,i,o)=>(Us(!0),Ah(r,i,function Cg(){return Dt.lFrame.currentNamespace}()));function Ne(n,t,e){const r=Ce(),i=tn(),o=n+Yt,s=i.firstCreatePass?function qU(n,t,e,r,i){const o=t.consts,s=Ns(o,r),a=Hh(t,n,8,"ng-container",s);return null!==s&&tw(a,s,!0),nC(t,e,a,Ns(o,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,i,r,t,e):i.data[o];Uo(s,!0);const a=LT(i,r,s,n);return r[o]=a,vd()&&_h(i,r,a,s),ei(a,r),Wf(s)&&($1(i,r,s),Z1(i,s,r)),null!=e&&eC(r,s),Ne}function Fe(){let n=Mr();const t=tn();return Fs()?vg():(n=n.parent,Uo(n,!1)),t.firstCreatePass&&(yd(t,n),Qt(n)&&t.queries.elementEnd(n)),Fe}function Cr(n,t,e){return Ne(n,t,e),Fe(),Cr}let LT=(n,t,e,r)=>(Us(!0),Jg(t[tt],""));function ft(){return Ce()}function gC(n){return!!n&&"function"==typeof n.then}function UT(n){return!!n&&"function"==typeof n.subscribe}function De(n,t,e,r){const i=Ce(),o=tn(),s=Mr();return function jT(n,t,e,r,i,o,s){const a=Wf(r),c=n.firstCreatePass&&sT(n),d=t[ur],f=oT(t);let p=!0;if(3&r.type||s){const y=Di(r,t),w=s?s(y):y,b=f.length,A=s?C=>s(Tn(C[r.index])):r.index;let _=null;if(!s&&a&&(_=function QU(n,t,e,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===e&&i[o+1]===r){const a=t[Uc],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(n,t,i,r.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=o,_.__ngLastListenerFn__=o,p=!1;else{o=WT(r,t,d,o,!1);const C=e.listen(w,i,o);f.push(o,C),c&&c.push(i,A,b,b+1)}}else o=WT(r,t,d,o,!1);const g=r.outputs;let v;if(p&&null!==g&&(v=g[i])){const y=v.length;if(y)for(let w=0;w<y;w+=2){const E=t[v[w]][v[w+1]].subscribe(o),T=f.length;f.push(o,E),c&&c.push(i,r.index,T,-(T+1))}}}(o,i,i[tt],s,n,t,r),De}function HT(n,t,e,r){try{return cs(6,t,e),!1!==e(r)}catch(i){return uT(n,i),!1}finally{cs(7,t,e)}}function WT(n,t,e,r,i){return function o(s){if(s===Function)return r;Dm(n.componentOffset>-1?qi(n.index,t):t);let u=HT(t,e,r,s),c=o.__ngNextListenerFn__;for(;c;)u=HT(t,e,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function j(n=1){return function ux(n){return(Dt.lFrame.contextLView=function Fy(n,t){for(;n>0;)t=t[jc],n--;return t}(n,Dt.lFrame.contextLView))[ur]}(n)}function YU(n,t){let e=null;const r=function Mn(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(n);for(let i=0;i<t.length;i++){const o=t[i];if("*"!==o){if(null===r?wr(n,o,!0):Oo(r,o))return i}else e=i}return e}function cw(n,t){return n<<17|t<<2}function ml(n){return n>>17&32767}function vC(n){return 2|n}function Vd(n){return(131068&n)>>2}function yC(n,t){return-131069&n|t<<2}function wC(n){return 1|n}function tR(n,t,e,r,i){const o=n[e+1],s=null===t;let a=r?ml(o):Vd(o),u=!1;for(;0!==a&&(!1===u||s);){const d=n[a+1];tz(n[a],t)&&(u=!0,n[a+1]=r?wC(d):vC(d)),a=r?ml(d):Vd(d)}u&&(n[e+1]=r?vC(o):wC(o))}function tz(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&ol(n,t)>=0}function ri(n,t,e){return ma(n,t,e,!1),ri}function bC(n,t){return ma(n,t,null,!0),bC}function ma(n,t,e,r){const i=Ce(),o=tn(),s=function Bs(n){const t=Dt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}(2);o.firstUpdatePass&&function cR(n,t,e,r){const i=n.data;if(null===i[e+1]){const o=i[gi()],s=function uR(n,t){return t>=n.expandoStartIndex}(n,e);(function hR(n,t){return 0!=(n.flags&(t?8:16))})(o,r)&&null===t&&!s&&(t=!1),t=function lz(n,t,e,r){const i=function zo(n){const t=Dt.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(e=Nm(e=AC(null,n,t,e,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==i)if(e=AC(i,n,t,e,r),null===o){let u=function dz(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==Vd(r))return n[ml(r)]}(n,t,r);void 0!==u&&Array.isArray(u)&&(u=AC(null,n,t,u[1],r),u=Nm(u,t.attrs,r),function fz(n,t,e,r){n[ml(e?t.classBindings:t.styleBindings)]=r}(n,t,r,u))}else o=function hz(n,t,e){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=Nm(r,n[o].hostAttrs,e);return Nm(r,t.attrs,e)}(n,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),e}(i,o,t,r),function $U(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=ml(s),u=Vd(s);n[r]=e;let d,c=!1;if(Array.isArray(e)?(d=e[1],(null===d||ol(e,d)>0)&&(c=!0)):d=e,i)if(0!==u){const p=ml(n[a+1]);n[r+1]=cw(p,a),0!==p&&(n[p+1]=yC(n[p+1],r)),n[a+1]=function JU(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=cw(a,0),0!==a&&(n[a+1]=yC(n[a+1],r)),a=r;else n[r+1]=cw(u,0),0===a?a=r:n[u+1]=yC(n[u+1],r),u=r;c&&(n[r+1]=vC(n[r+1])),tR(n,d,r,!0),tR(n,d,r,!1),function ez(n,t,e,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof t&&ol(o,t)>=0&&(e[r+1]=wC(e[r+1]))}(t,d,n,r,o),s=cw(a,u),o?t.classBindings=s:t.styleBindings=s}(i,o,t,e,s,r)}}(o,n,s,r),t!==Bt&&Yi(i,s,t)&&function dR(n,t,e,r,i,o,s,a){if(!(3&t.type))return;const u=n.data,c=u[a+1],d=function ZU(n){return 1==(1&n)}(c)?fR(u,t,e,i,Vd(c),s):void 0;lw(d)||(lw(o)||function XU(n){return 2==(2&n)}(c)&&(o=fR(u,null,e,i,a,s)),function ll(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=-1===r.indexOf("-")?void 0:eu.DashCase;null==i?n.removeStyle(e,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=eu.Important),n.setStyle(e,r,i,o))}}(r,s,gd(gi(),e),i,o))}(o,o.data[gi()],i,i[tt],n,i[s+1]=function vz(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Rr(vo(n)))),n}(t,e),r,s)}function AC(n,t,e,r,i){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=t[a],r=Nm(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function Nm(n,t,e){const r=e?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),go(n,s,!!e||t[++o]))}return void 0===n?null:n}function fR(n,t,e,r,i,o){const s=null===t;let a;for(;i>0;){const u=n[i],c=Array.isArray(u),d=c?u[1]:u,f=null===d;let p=e[i+1];p===Bt&&(p=f?cn:void 0);let g=f?Ng(p,r):d===r?p:void 0;if(c&&!lw(g)&&(g=Ng(u,r)),lw(g)&&(a=g,s))return a;const v=n[i+1];i=s?ml(v):Vd(v)}if(null!==t){let u=o?t.residualClasses:t.residualStyles;null!=u&&(a=Ng(u,r))}return a}function lw(n){return void 0!==n}function Pe(n,t=""){const e=Ce(),r=tn(),i=n+Yt,o=r.firstCreatePass?Hh(r,i,1,t,null):r.data[i],s=pR(r,e,o,t,n);e[i]=s,vd()&&_h(r,e,s,o),Uo(o,!1)}let pR=(n,t,e,r,i)=>(Us(!0),function bh(n,t){return n.createText(t)}(t[tt],r));function zn(n){return Vs("",n,""),zn}function Vs(n,t,e){const r=Ce(),i=function Vh(n,t,e,r){return Yi(n,Yc(),e)?t+Tt(e)+r:Bt}(r,n,t,e);return i!==Bt&&function oc(n,t,e){const r=gd(t,n);!function y0(n,t,e){n.setValue(t,e)}(n[tt],r,e)}(r,gi(),i),Vs}const ep="en-US";let FR=ep;class Gd{}class zj{}class SC extends Gd{constructor(t,e,r){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gT(this);const i=function Hi(n,t){const e=n[ay]||null;if(!e&&!0===t)throw new Error(`Type ${Rr(n)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function ic(n){return n instanceof Function?n():n}(i.bootstrap),this._r3Injector=S2(t,e,[{provide:Gd,useValue:this},{provide:Ft,useValue:this.componentFactoryResolver},...r],Rr(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class TC extends zj{constructor(t){super(),this.moduleType=t}create(t){return new SC(this.moduleType,t,[])}}class uM extends Gd{constructor(t){super(),this.componentFactoryResolver=new gT(this),this.instance=null;const e=new fl([...t.providers,{provide:Gd,useValue:this},{provide:Ft,useValue:this.componentFactoryResolver}],t.parent||Nh(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}let Vj=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const r=L0(0,e.type),i=r.length>0?function Wj(n,t,e=null){return new uM({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Nt({token:n,providedIn:"environment",factory:()=>new n(Ze(Hs))})}return n})();function ii(n){n.getStandaloneInjector=t=>t.get(Vj).getOrCreateStandaloneInjector(n)}function ya(n,t,e){const r=Zr()+n,i=Ce();return i[r]===Bt?su(i,r,e?t.call(e):t()):function Mm(n,t){return n[t]}(i,r)}function fr(n,t,e,r){return gM(Ce(),Zr(),n,t,e,r)}function MC(n,t,e,r,i){return function mM(n,t,e,r,i,o,s){const a=t+e;return function Wd(n,t,e,r){const i=Yi(n,t,e);return Yi(n,t+1,r)||i}(n,a,i,o)?su(n,a+2,s?r.call(s,i,o):r(i,o)):jm(n,a+2)}(Ce(),Zr(),n,t,e,r,i)}function jm(n,t){const e=n[t];return e===Bt?void 0:e}function gM(n,t,e,r,i,o){const s=t+e;return Yi(n,s,i)?su(n,s+1,o?r.call(o,i):r(i)):jm(n,s+1)}function wn(n,t){const e=tn();let r;const i=n+Yt;e.firstCreatePass?(r=function sH(n,t){if(t)for(let e=t.length-1;e>=0;e--){const r=t[e];if(n===r.name)return r}}(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];const o=r.factory||(r.factory=Uu(r.type)),a=Bn(lt);try{const u=ih(!1),c=o();return ih(u),function jU(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}(e,Ce(),i,c),c}finally{Bn(a)}}function bn(n,t,e){const r=n+Yt,i=Ce(),o=Wu(i,r);return function Hm(n,t){return n[Ge].data[t].pure}(i,r)?gM(i,Zr(),t,o.transform,e,o):o.transform(e)}function dH(){return this._results[Symbol.iterator]()}class kC{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Qe)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=kC.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=dH)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const i=function Wo(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function vx(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}(r._results,i,e))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function hH(n,t,e,r=!0){const i=t[Ge];if(function $u(n,t,e,r){const i=S+r,o=e.length;r>0&&(e[i-1][Wi]=t),r<o-S?(t[Wi]=e[i],Jy(e,S+r,t)):(e.push(t),t[Wi]=null),t[Kn]=e;const s=t[cd];null!==s&&e!==s&&function Pt(n,t){const e=n[Ps];t[cr]!==t[Kn][Kn][cr]&&(n[py]=!0),null===e?n[Ps]=[t]:e.push(t)}(s,t);const a=t[Vi];null!==a&&a.insertView(n),t[kt]|=128}(i,t,n,e),r){const o=nm(e,n),s=t[tt],a=Rd(s,n[ks]);null!==a&&function fs(n,t,e,r,i,o){r[Ln]=i,r[Lr]=t,Od(n,r,e,1,i,o)}(i,n[Lr],s,t,a,o)}}let sc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=mH}return n})();const pH=sc,gH=class extends pH{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){const i=function fH(n,t,e,r){const i=t.tView,a=$0(n,i,e,4096&n[kt]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[cd]=n[t.index];const c=n[Vi];return null!==c&&(a[Vi]=c.createEmbeddedView(i)),aC(i,a,e),a}(this._declarationLView,this._declarationTContainer,t,{injector:e,hydrationInfo:r});return new Tm(i)}};function mH(){return gw(Mr(),Ce())}function gw(n,t){return 4&n.type?new gH(t,n,Wr(n,t)):null}let qs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=xH}return n})();function xH(){return DM(Mr(),Ce())}const CH=qs,_M=class extends CH{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Wr(this._hostTNode,this._hostLView)}get injector(){return new $r(this._hostTNode,this._hostLView)}get parentInjector(){const t=$c(this._hostTNode,this._hostLView);if(fa(t)){const e=Zc(t,this._hostLView),r=Ad(t);return new $r(e[Ge].data[r+8],e)}return new $r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=EM(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-S}createEmbeddedView(t,e,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=t.createEmbeddedViewImpl(e||{},o,null);return this.insertImpl(a,i,false),a}createComponent(t,e,r,i,o){const s=t&&!function _d(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const y=e||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}const u=s?t:new Rm(Ut(t)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const w=(s?c:this.parentInjector).get(Hs,null);w&&(o=w)}Ut(u.componentType??{});const g=u.create(c,i,null,o);return this.insertImpl(g.hostView,a,false),g}insert(t,e){return this.insertImpl(t,e,!1)}insertImpl(t,e,r){const i=t._lView;if(function nx(n){return kn(n[Kn])}(i)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const c=i[Kn],d=new _M(c,c[Lr],c[Kn]);d.detach(d.indexOf(t))}}const s=this._adjustIndex(e),a=this._lContainer;return hH(a,i,s,!r),t.attachToViewContainerRef(),Jy(PC(a),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=EM(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=ti(this._lContainer,e);r&&(uh(PC(this._lContainer),e),or(r[Ge],r))}detach(t){const e=this._adjustIndex(t,-1),r=ti(this._lContainer,e);return r&&null!=uh(PC(this._lContainer),e)?new Tm(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function EM(n){return n[8]}function PC(n){return n[8]||(n[8]=[])}function DM(n,t){let e;const r=t[n.index];return kn(r)?e=r:(e=rT(r,t,null,n),t[n.index]=e,ew(t,e)),IM(e,t,n,r),new _M(e,n,t)}let IM=function SM(n,t,e,r){if(n[ks])return;let i;i=8&e.type?Tn(r):function _H(n,t){const e=n[tt],r=e.createComment(""),i=Di(t,n);return ec(e,Rd(e,i),r,function Ch(n,t){return n.nextSibling(t)}(e,i),!1),r}(t,e),n[ks]=i};class OC{constructor(t){this.queryList=t,this.matches=null}clone(){return new OC(this.queryList)}setDirty(){this.queryList.setDirty()}}class NC{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){const s=e.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new NC(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==PM(t,e).matches&&this.queries[e].setDirty()}}class TM{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class FC{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const i=null!==e?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==e?e.push(o):e=[o])}return null!==e?new FC(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class BC{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new BC(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,e,IH(e,o)),this.matchTNodeWithReadOption(t,e,sh(e,t,o,!1,!1))}else r===sc?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,sh(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Xn||i===qs||i===sc&&4&e.type)this.addMatch(e.index,-2);else{const o=sh(e,t,i,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function IH(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function TH(n,t,e,r){return-1===e?function SH(n,t){return 11&n.type?Wr(n,t):4&n.type?gw(n,t):null}(t,n):-2===e?function RH(n,t,e){return e===Xn?Wr(t,n):e===sc?gw(t,n):e===qs?DM(t,n):void 0}(n,t,r):Qu(n,n[Ge],e,t)}function RM(n,t,e,r){const i=t[Vi].queries[r];if(null===i.matches){const o=n.data,s=e.matches,a=[];for(let u=0;u<s.length;u+=2){const c=s[u];a.push(c<0?null:TH(t,o[c],s[u+1],e.metadata.read))}i.matches=a}return i.matches}function LC(n,t,e,r){const i=n.queries.getByIndex(e),o=i.matches;if(null!==o){const s=RM(n,t,i,e);for(let a=0;a<o.length;a+=2){const u=o[a];if(u>0)r.push(s[a/2]);else{const c=o[a+1],d=t[-u];for(let f=S;f<d.length;f++){const p=d[f];p[cd]===p[Kn]&&LC(p[Ge],p,c,r)}if(null!==d[Ps]){const f=d[Ps];for(let p=0;p<f.length;p++){const g=f[p];LC(g[Ge],g,c,r)}}}}}return r}function kr(n){const t=Ce(),e=tn(),r=Oy();wg(r+1);const i=PM(e,r);if(n.dirty&&function tx(n){return 4==(4&n[kt])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?LC(e,t,r,[]):RM(e,t,i,r);n.reset(o,yo),n.notifyOnChanges()}return!0}return!1}function Pr(n,t,e){const r=tn();r.firstCreatePass&&(function kM(n,t,e){null===n.queries&&(n.queries=new FC),n.queries.track(new BC(t,e))}(r,new TM(n,t,e),-1),2==(2&t)&&(r.staticViewQueries=!0)),function MM(n,t,e){const r=new kC(4==(4&e));(function I4(n,t,e,r){const i=oT(t);i.push(e),n.firstCreatePass&&sT(n).push(r,i.length-1)})(n,t,r,r.destroy),null===t[Vi]&&(t[Vi]=new NC),t[Vi].queries.push(new OC(r))}(r,Ce(),t)}function Or(){return function kH(n,t){return n[Vi].queries[t].queryList}(Ce(),Oy())}function PM(n,t){return n.queries.getByIndex(t)}function sn(n,t){return gw(n,t)}const e5=new ze("Application Initializer");let WC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),this.appInits=un(e5,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const i of this.appInits){const o=i();if(gC(o))e.push(o);else if(UT(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});e.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),0===e.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ac=new ze("LocaleId",{providedIn:"root",factory:()=>un(ac,Zt.Optional|Zt.SkipSelf)||function n5(){return typeof $localize<"u"&&$localize.locale||ep}()});let VC=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new bt(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ek=new ze(""),ww=new ze("");let YC,KC=(()=>{class n{constructor(e,r,i){this._ngZone=e,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,YC||(function I5(n){YC=n}(i),i.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:i})}whenStable(e,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Pn),Ze(QC),Ze(ww))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})(),QC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return YC?.findTestabilityInTree(this,e,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),vl=null;const tk=new ze("AllowMultipleToken"),XC=new ze("PlatformDestroyListeners"),nk=new ze("appBootstrapListener");function ok(n,t,e=[]){const r=`Platform: ${t}`,i=new ze(r);return(o=[])=>{let s=JC();if(!s||s.injector.get(tk,!1)){const a=[...e,...o,{provide:i,useValue:!0}];n?n(a):function R5(n){if(vl&&!vl.get(tk,!1))throw new Ee(400,!1);(function rk(){!function vy(n){zr=n}(()=>{throw new Ee(600,!1)})})(),vl=n;const t=n.get(ak);(function ik(n){n.get(W0,null)?.forEach(e=>e())})(n)}(function sk(n=[],t){return hs.create({name:t,providers:[{provide:gm,useValue:"platform"},{provide:XC,useValue:new Set([()=>vl=null])},...n]})}(a,r))}return function k5(n){const t=JC();if(!t)throw new Ee(401,!1);return t}()}}function JC(){return vl?.get(ak)??null}let ak=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const i=function P5(n="zone.js",t){return"noop"===n?new l4:"zone.js"===n?new Pn(t):n}(r?.ngZone,function uk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function Hj(n,t,e){return new SC(n,t,e)}(e.moduleType,this.injector,function hk(n){return[{provide:Pn,useFactory:n},{provide:Mh,multi:!0,useFactory:()=>{const t=un(N5,{optional:!0});return()=>t.initialize()}},{provide:fk,useFactory:O5},{provide:P2,useFactory:O2}]}(()=>i)),s=o.injector.get(rc,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{bw(this._modules,o),a.unsubscribe()})}),function ck(n,t,e){try{const r=e();return gC(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(WC);return a.runInitializers(),a.donePromise.then(()=>(function BR(n){To(n,"Expected localeId to be defined"),"string"==typeof n&&(FR=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(ac,ep)||ep),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,r=[]){const i=lk({},r);return function S5(n,t,e){const r=new TC(e);return Promise.resolve(r)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(e){const r=e.injector.get(Kd);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!e.instance.ngDoBootstrap)throw new Ee(-403,!1);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(XC,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(hs))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function lk(n,t){return Array.isArray(t)?t.reduce(lk,n):{...n,...t}}let Kd=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=un(fk),this.zoneIsStable=un(P2),this.componentTypes=[],this.components=[],this.isStable=un(VC).hasPendingTasks.pipe(Kl(e=>e?Gl(!1):this.zoneIsStable),ku(),kf()),this._injector=un(Hs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,r){const i=e instanceof He;if(!this._injector.get(WC).done)throw!i&&function Ha(n){const t=Ut(n)||br(n)||fi(n);return null!==t&&t.standalone}(e),new Ee(405,!1);let s;s=i?e:this._injector.get(Ft).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function T5(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Gd),c=s.create(hs.NULL,[],r||s.selector,a),d=c.location.nativeElement,f=c.injector.get(ek,null);return f?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),bw(this.components,c),f?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;bw(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(nk,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>bw(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ee(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bw(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const fk=new ze("",{providedIn:"root",factory:()=>un(rc).handleError.bind(void 0)});function O5(){const n=un(Pn),t=un(rc);return e=>n.runOutsideAngular(()=>t.handleError(e))}let N5=(()=>{class n{constructor(){this.zone=un(Pn),this.applicationRef=un(Kd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let gk=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=B5}return n})();function B5(n){return function L5(n,t,e){if(Lu(n)&&!e){const r=qi(n.index,t);return new Tm(r,r)}return 47&n.type?new Tm(t[cr],t):null}(Mr(),Ce(),16==(16&n))}class yk{constructor(){}supports(t){return iw(t)}create(t){return new V5(t)}}const W5=(n,t)=>t;class V5{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||W5}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){const s=!r||e&&e.currentIndex<bk(r,i,o)?e:r,a=bk(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,d=u-i;if(c!=d){for(let p=0;p<c;p++){const g=p<o.length?o[p]:o[p]=0,v=g+p;d<=v&&v<c&&(o[p]=g+1)}o[s.previousIndex]=d-c}}a!==u&&t(s,a,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!iw(t))throw new Ee(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),r=!0),e=e._next}else i=0,function bU(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(i,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,i),r=!0),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new q5(e,r),o,i),t}_verifyReinsertion(t,e,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new wk),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wk),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class q5{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class G5{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class wk{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new G5,this.map.set(e,r)),r.add(t)}get(t,e){const i=this.map.get(t);return i?i.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bk(n,t,e){const r=n.previousIndex;if(null===r)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}class Ak{constructor(){}supports(t){return t instanceof Map||uC(t)}create(){return new K5}}class K5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||uC(t)))throw new Ee(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,e);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new Q5(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class Q5{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xk(){return new Cw([new yk])}let Cw=(()=>{class n{static#e=this.\u0275prov=Nt({token:n,providedIn:"root",factory:xk});constructor(e){this.factories=e}static create(e,r){if(null!=r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||xk()),deps:[[n,new Ug,new Lg]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(null!=r)return r;throw new Ee(901,!1)}}return n})();function Ck(){return new qm([new Ak])}let qm=(()=>{class n{static#e=this.\u0275prov=Nt({token:n,providedIn:"root",factory:Ck});constructor(e){this.factories=e}static create(e,r){if(r){const i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||Ck()),deps:[[n,new Ug,new Lg]]}}find(e){const r=this.factories.find(i=>i.supports(e));if(r)return r;throw new Ee(901,!1)}}return n})();const J5=ok(null,"core",[]);let Z5=(()=>{class n{constructor(e){}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Kd))};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({})}return n})(),r_=null;function i_(){return r_}class dW{}const Gs=new ze("DocumentToken");function zk(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}const p_=/\s+/,jk=[];let Hk=(()=>{class n{constructor(e,r,i,o){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=jk,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(p_):jk}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(p_):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){const i=this.stateMap.get(e);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(p_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(lt(Cw),lt(qm),lt(Xn),lt(Qi))};static#t=this.\u0275dir=co({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class ZW{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ip=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ZW(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),Vk(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{Vk(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(lt(qs),lt(sc),lt(Cw))};static#t=this.\u0275dir=co({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Vk(n,t){n.context.$implicit=t.item}let Fr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new $W,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){qk("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){qk("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(lt(qs),lt(sc))};static#t=this.\u0275dir=co({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class $W{constructor(){this.$implicit=null,this.ngIf=null}}function qk(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Rr(t)}'.`)}class g_{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Nw=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=co({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),Gk=(()=>{class n{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new g_(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(r){return new(r||n)(lt(qs),lt(sc),lt(Nw,9))};static#t=this.\u0275dir=co({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),op=(()=>{class n{constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[i,o]=e.split("."),s=-1===i.indexOf("-")?void 0:eu.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static#e=this.\u0275fac=function(r){return new(r||n)(lt(Xn),lt(qm),lt(Qi))};static#t=this.\u0275dir=co({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),Qm=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=r.createEmbeddedView(i,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(r){return new(r||n)(lt(qs))};static#t=this.\u0275dir=co({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Gc]})}return n})();class nV{createSubscription(t,e){return wy(()=>t.subscribe({next:e,error:r=>{throw r}}))}dispose(t){wy(()=>t.unsubscribe())}}class rV{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}}const iV=new rV,oV=new nV;let Aa=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(gC(e))return iV;if(UT(e))return oV;throw function ba(n,t){return new Ee(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(lt(gk,16))};static#t=this.\u0275pipe=Gn({name:"async",type:n,pure:!1,standalone:!0})}return n})(),_r=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({})}return n})();const Yk="browser";function sp(n){return n===Yk}function Xk(n){return"server"===n}class Jk{}class YV extends dW{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class b_ extends YV{static makeCurrent(){!function lW(n){r_||(r_=n)}(new b_)}onAndCancel(t,e,r){return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function XV(){return Xm=Xm||document.querySelector("base"),Xm?Xm.getAttribute("href"):null}();return null==e?null:function JV(n){Lw=Lw||document.createElement("a"),Lw.setAttribute("href",n);const t=Lw.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Xm=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return zk(document.cookie,t)}}let Lw,Xm=null,$V=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();const A_=new ze("EventManagerPlugins");let nP=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new Ee(5101,!1);return this._eventNameToPlugin.set(e,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(A_),Ze(Pn))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();class rP{constructor(t){this._doc=t}}const x_="ng-app-id";let iP=(()=>{class n{constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xk(o),this.resetHostNodes()}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.elements?.forEach(i=>i.remove()),r.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${x_}="${this.appId}"]`);if(e?.length){const r=new Map;return e.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(e,r){const i=this.styleRef;if(i.has(e)){const o=i.get(e);return o.usage+=r,o.usage}return i.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===e)return i.delete(r),o.removeAttribute(x_),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(x_,this.appId),s}}addStyleToHost(e,r){const i=this.getStyleElement(e,r);e.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Gs),Ze(Fh),Ze(q0,8),Ze(iu))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();const C_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},__=/%COMP%/g,r6=new ze("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function sP(n,t){return t.map(e=>e.replace(__,n))}let E_=(()=>{class n{constructor(e,r,i,o,s,a,u,c=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Xk(a),this.defaultRenderer=new D_(e,s,u,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Mo.ShadowDom&&(r={...r,encapsulation:Mo.Emulated});const i=this.getOrCreateRenderer(e,r);return i instanceof uP?i.applyToHost(e):i instanceof I_&&i.applyStyles(),i}getOrCreateRenderer(e,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Mo.Emulated:o=new uP(u,c,r,this.appId,d,s,a,f);break;case Mo.ShadowDom:return new a6(u,c,e,r,s,a,this.nonce,f);default:o=new I_(u,c,r,d,s,a,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(nP),Ze(iP),Ze(Fh),Ze(r6),Ze(Gs),Ze(iu),Ze(Pn),Ze(q0))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();class D_{constructor(t,e,r,i){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(C_[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(aP(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(aP(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new Ee(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const o=C_[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=C_[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(eu.DashCase|eu.Important)?t.style.setProperty(e,r,i&eu.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&eu.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){if("string"==typeof t&&!(t=i_().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(r))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function aP(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class a6 extends D_{constructor(t,e,r,i,o,s,a,u){super(t,o,s,u),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=sP(i.id,i.styles);for(const d of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class I_ extends D_{constructor(t,e,r,i,o,s,a,u){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=u?sP(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class uP extends I_{constructor(t,e,r,i,o,s,a,u){const c=i+"-"+r.id;super(t,e,r,o,s,a,u,c),this.contentAttr=function i6(n){return"_ngcontent-%COMP%".replace(__,n)}(c),this.hostAttr=function o6(n){return"_nghost-%COMP%".replace(__,n)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let u6=(()=>{class n extends rP{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Gs))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();const cP=["alt","control","meta","shift"],c6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},l6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let d6=(()=>{class n extends rP{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>i_().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),cP.forEach(c=>{const d=r.indexOf(c);d>-1&&(r.splice(d,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(e,r){let i=c6[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),cP.forEach(s=>{s!==i&&(0,l6[s])(e)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Gs))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();const dP=[{provide:iu,useValue:Yk},{provide:W0,useValue:function f6(){b_.makeCurrent()},multi:!0},{provide:Gs,useFactory:function p6(){return function i1(n){Dh=n}(document),document},deps:[]}],g6=ok(J5,"browser",dP),m6=new ze(""),fP=[{provide:ww,useClass:class ZV{addToWindow(t){on.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Ee(5103,!1);return o},on.getAllAngularTestabilities=()=>t.getAllTestabilities(),on.getAllAngularRootElements=()=>t.getAllRootElements(),on.frameworkStabilizers||(on.frameworkStabilizers=[]),on.frameworkStabilizers.push(r=>{const i=on.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?i_().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:ek,useClass:KC,deps:[Pn,QC,ww]},{provide:KC,useClass:KC,deps:[Pn,QC,ww]}],hP=[{provide:gm,useValue:"root"},{provide:rc,useFactory:function h6(){return new rc},deps:[]},{provide:A_,useClass:u6,multi:!0,deps:[Gs,Pn,iu]},{provide:A_,useClass:d6,multi:!0,deps:[Gs]},E_,iP,nP,{provide:Un,useExisting:E_},{provide:Jk,useClass:$V,deps:[]},[]];let pP=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:Fh,useValue:e.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(m6,12))};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({providers:[...hP,...fP],imports:[_r,Z5]})}return n})();typeof window<"u"&&window;let ap=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:function(r){let i=null;return i=r?new(r||n):Ze(vP),i},providedIn:"root"})}return n})(),vP=(()=>{class n extends ap{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case Ki.NONE:return r;case Ki.HTML:return js(r,"HTML")?vo(r):O0(this._doc,String(r)).toString();case Ki.STYLE:return js(r,"Style")?vo(r):r;case Ki.SCRIPT:if(js(r,"Script"))return vo(r);throw new Ee(5200,!1);case Ki.URL:return js(r,"URL")?vo(r):Th(String(r));case Ki.RESOURCE_URL:if(js(r,"ResourceURL"))return vo(r);throw new Ee(5201,!1);default:throw new Ee(5202,!1)}}bypassSecurityTrustHtml(e){return function d1(n){return new o1(n)}(e)}bypassSecurityTrustStyle(e){return function f1(n){return new s1(n)}(e)}bypassSecurityTrustScript(e){return function im(n){return new a1(n)}(e)}bypassSecurityTrustUrl(e){return function h1(n){return new u1(n)}(e)}bypassSecurityTrustResourceUrl(e){return function om(n){return new c1(n)}(e)}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Gs))};static#t=this.\u0275prov=Nt({token:n,factory:function(r){let i=null;return i=r?new r:function x6(n){return new vP(n.get(Gs))}(Ze(hs)),i},providedIn:"root"})}return n})();class wP{}class C6{}const lc="*";function _6(n,t){return{type:7,name:n,definitions:t,options:{}}}function bP(n,t=null){return{type:4,styles:t,timings:n}}function AP(n,t=null){return{type:2,steps:n,options:t}}function up(n){return{type:6,styles:n,offset:null}}function xP(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}class Jm{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class CP{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}function _P(n){return new Ee(3e3,!1)}function wl(n){switch(n.length){case 0:return new Jm;case 1:return n[0];default:return new CP(n)}}function EP(n,t,e=new Map,r=new Map){const i=[],o=[];let s=-1,a=null;if(t.forEach(u=>{const c=u.get("offset"),d=c==s,f=d&&a||new Map;u.forEach((p,g)=>{let v=g,y=p;if("offset"!==g)switch(v=n.normalizePropertyName(v,i),y){case"!":y=e.get(g);break;case lc:y=r.get(g);break;default:y=n.normalizeStyleValue(g,v,y,i)}f.set(v,y)}),d||o.push(f),a=f,s=c}),i.length)throw function K6(n){return new Ee(3502,!1)}();return o}function R_(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&M_(e,"start",n)));break;case"done":n.onDone(()=>r(e&&M_(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&M_(e,"destroy",n)))}}function M_(n,t,e){const o=k_(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),s=n._data;return null!=s&&(o._data=s),o}function k_(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function ms(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function DP(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}const oq=(()=>typeof document>"u"?null:document.documentElement)();function P_(n){const t=n.parentNode||n.host||null;return t===oq?null:t}let Yd=null,IP=!1;function SP(n,t){for(;t;){if(t===n)return!0;t=P_(t)}return!1}function TP(n,t,e){if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]}let RP=(()=>{class n{validateStyleProperty(e){return function aq(n){Yd||(Yd=function uq(){return typeof document<"u"?document.body:null}()||{},IP=!!Yd.style&&"WebkitAppearance"in Yd.style);let t=!0;return Yd.style&&!function sq(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Yd.style,!t&&IP&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Yd.style)),t}(e)}matchesElement(e,r){return!1}containsElement(e,r){return SP(e,r)}getParentElement(e){return P_(e)}query(e,r,i){return TP(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],u){return new Jm(i,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})(),O_=(()=>{class n{static#e=this.NOOP=new RP}return n})();const cq=1e3,N_="ng-enter",Uw="ng-leave",zw="ng-trigger",jw=".ng-trigger",kP="ng-animating",F_=".ng-animating";function dc(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:B_(parseFloat(t[1]),t[2])}function B_(n,t){return"s"===t?n*cq:n}function Hw(n,t,e){return n.hasOwnProperty("duration")?n:function dq(n,t,e){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(_P()),{duration:0,delay:0,easing:""};i=B_(parseFloat(a[1]),a[2]);const u=a[3];null!=u&&(o=B_(parseFloat(u),a[4]));const c=a[5];c&&(s=c)}else i=n;if(!e){let a=!1,u=t.length;i<0&&(t.push(function E6(){return new Ee(3100,!1)}()),a=!0),o<0&&(t.push(function D6(){return new Ee(3101,!1)}()),a=!0),a&&t.splice(u,0,_P())}return{duration:i,delay:o,easing:s}}(n,t,e)}function Zm(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function PP(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function bl(n,t=new Map,e){if(e)for(let[r,i]of e)t.set(r,i);for(let[r,i]of n)t.set(r,i);return t}function cu(n,t,e){t.forEach((r,i)=>{const o=U_(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r})}function Xd(n,t){t.forEach((e,r)=>{const i=U_(r);n.style[i]=""})}function $m(n){return Array.isArray(n)?1==n.length?n[0]:AP(n):n}const L_=new RegExp("{{\\s*(.+?)\\s*}}","g");function NP(n){let t=[];if("string"==typeof n){let e;for(;e=L_.exec(n);)t.push(e[1]);L_.lastIndex=0}return t}function ev(n,t,e){const r=n.toString(),i=r.replace(L_,(o,s)=>{let a=t[s];return null==a&&(e.push(function S6(n){return new Ee(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Ww(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const pq=/-+([a-z0-9])/g;function U_(n){return n.replace(pq,(...t)=>t[1].toUpperCase())}function vs(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function T6(n){return new Ee(3004,!1)}()}}function FP(n,t){return window.getComputedStyle(n)[t]}const Vw="*";function vq(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function yq(n,t,e){if(":"==n[0]){const u=function wq(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function W6(n){return new Ee(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof u)return void t.push(u);n=u}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function H6(n){return new Ee(3015,!1)}()),t;const i=r[1],o=r[2],s=r[3];t.push(BP(i,s));"<"==o[0]&&!(i==Vw&&s==Vw)&&t.push(BP(s,i))}(r,e,t)):e.push(n),e}const qw=new Set(["true","1"]),Gw=new Set(["false","0"]);function BP(n,t){const e=qw.has(n)||Gw.has(n),r=qw.has(t)||Gw.has(t);return(i,o)=>{let s=n==Vw||n==i,a=t==Vw||t==o;return!s&&e&&"boolean"==typeof i&&(s=i?qw.has(n):Gw.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?qw.has(t):Gw.has(t)),s&&a}}const bq=new RegExp("s*:selfs*,?","g");function z_(n,t,e,r){return new Aq(n).build(t,e,r)}class Aq{constructor(t){this._driver=t}build(t,e,r){const i=new _q(e);return this._resetContextStyleTimingState(i),vs(this,$m(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push(function M6(){return new Ee(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const u=a,c=u.name;c.toString().split(/\s*,\s*/).forEach(d=>{u.name=d,o.push(this.visitState(u,e))}),u.name=c}else if(1==a.type){const u=this.visitTransition(a,e);r+=u.queryCount,i+=u.depCount,s.push(u)}else e.errors.push(function k6(){return new Ee(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{NP(u).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(Ww(o.values()),e.errors.push(function P6(n,t){return new Ee(3008,!1)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=vs(this,$m(t.animation),e);return{type:1,matchers:vq(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Jd(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>vs(this,r,e)),options:Jd(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const o=t.steps.map(s=>{e.currentTime=r;const a=vs(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:3,steps:o,options:Jd(t.options)}}visitAnimate(t,e){const r=function Dq(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return j_(Hw(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=j_(0,0,"");return o.dynamic=!0,o.strValue=e,o}const i=Hw(e,t);return j_(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:up({});if(5==o.type)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;const c={};r.easing&&(c.easing=r.easing),s=up(c)}e.currentTime+=r.duration+r.delay;const u=this.visitStyle(s,e);u.isEmptyStep=a,i=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)"string"==typeof a?a===lc?r.push(a):e.errors.push(new Ee(3002,!1)):r.push(PP(a));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let u of a.values())if(u.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,u)=>{const c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(u);let f=!0;d&&(o!=i&&o>=d.startTime&&i<=d.endTime&&(e.errors.push(function N6(n,t,e,r,i){return new Ee(3010,!1)}()),f=!1),o=d.startTime),f&&c.set(u,{startTime:o,endTime:i}),e.options&&function hq(n,t,e){const r=t.params||{},i=NP(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(function I6(n){return new Ee(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function F6(){return new Ee(3011,!1)}()),r;let o=0;const s=[];let a=!1,u=!1,c=0;const d=t.steps.map(b=>{const A=this._makeStyleAst(b,e);let _=null!=A.offset?A.offset:function Eq(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(A.styles),C=0;return null!=_&&(o++,C=A.offset=_),u=u||C<0||C>1,a=a||C<c,c=C,s.push(C),A});u&&e.errors.push(function B6(){return new Ee(3012,!1)}()),a&&e.errors.push(function L6(){return new Ee(3200,!1)}());const f=t.steps.length;let p=0;o>0&&o<f?e.errors.push(function U6(){return new Ee(3202,!1)}()):0==o&&(p=1/(f-1));const g=f-1,v=e.currentTime,y=e.currentAnimateTimings,w=y.duration;return d.forEach((b,A)=>{const _=p>0?A==g?1:p*A:s[A],C=_*w;e.currentTime=v+y.delay+C,y.duration=C,this._validateStyleAst(b,e),b.offset=_,r.styles.push(b)}),r}visitReference(t,e){return{type:8,animation:vs(this,$m(t.animation),e),options:Jd(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Jd(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Jd(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[o,s]=function xq(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(bq,"")),n=n.replace(/@\*/g,jw).replace(/@\w+/g,e=>jw+"-"+e.slice(1)).replace(/:animating/g,F_),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,ms(e.collectedStyles,e.currentQuerySelector,new Map);const a=vs(this,$m(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:Jd(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function z6(){return new Ee(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Hw(t.timings,e.errors,!0);return{type:12,animation:vs(this,$m(t.animation),e),timings:r,options:null}}}class _q{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Jd(n){return n?(n=Zm(n)).params&&(n.params=function Cq(n){return n?Zm(n):null}(n.params)):n={},n}function j_(n,t,e){return{duration:n,delay:t,easing:e}}function H_(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Kw{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Tq=new RegExp(":enter","g"),Mq=new RegExp(":leave","g");function W_(n,t,e,r,i,o=new Map,s=new Map,a,u,c=[]){return(new kq).buildKeyframes(n,t,e,r,i,o,s,a,u,c)}class kq{buildKeyframes(t,e,r,i,o,s,a,u,c,d=[]){c=c||new Kw;const f=new V_(t,e,c,i,o,d,[]);f.options=u;const p=u.delay?dc(u.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([s],null,f.errors,u),vs(this,r,f);const g=f.timelines.filter(v=>v.containsAnimation());if(g.length&&a.size){let v;for(let y=g.length-1;y>=0;y--){const w=g[y];if(w.element===e){v=w;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,f.errors,u)}return g.length?g.map(v=>v.buildKeyframes()):[H_(e,[],[],[],0,p,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(const i of t){const o=i?.delay;if(o){const s="number"==typeof o?o:dc(ev(o,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime;const s=null!=r.duration?dc(r.duration):null,a=null!=r.delay?dc(r.delay):null;return 0!==s&&t.forEach(u=>{const c=e.appendInstructionToTimeline(u,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),vs(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Qw);const s=dc(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>vs(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?dc(t.options.delay):0;t.steps.forEach(s=>{const a=e.createSubContext(t.options);o&&a.delayNextStep(o),vs(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return Hw(e.params?ev(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(u=>{a.forwardTime((u.offset||0)*o),a.setStyles(u.styles,u.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?dc(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Qw);let s=r;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let u=null;a.forEach((c,d)=>{e.currentQueryIndex=d;const f=e.createSubContext(t.options,c);o&&f.delayNextStep(o),c===e.element&&(u=f.currentTimeline),vs(this,t.animation,f),f.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,f.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let u=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime}const d=e.currentTimeline;u&&d.delayNextStep(u);const f=d.currentTime;vs(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}}const Qw={};class V_{constructor(t,e,r,i,o,s,a,u){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new Yw(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=dc(r.duration)),null!=r.delay&&(i.delay=dc(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=ev(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,o=new V_(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Qw,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new Pq(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(Tq,"."+this._enterClassName)).replace(Mq,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!o&&0==a.length&&s.push(function j6(n){return new Ee(3014,!1)}()),a}}class Yw{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Yw(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||lc),this._currentKeyframe.set(e,lc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);const o=i&&i.params||{},s=function Oq(n,t){const e=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||t.keys();for(let o of r)e.set(o,lc)}else bl(i,e)}),e}(t,this._globalTimelineStyles);for(let[a,u]of s){const c=ev(u,o,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??lc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{const i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,u)=>{const c=bl(a,new Map,this._backFill);c.forEach((d,f)=>{"!"===d?t.add(f):d===lc&&e.add(f)}),r||c.set("offset",u/this.duration),i.push(c)});const o=t.size?Ww(t.values()):[],s=e.size?Ww(e.values()):[];if(r){const a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return H_(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class Pq extends Yw{constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=r+e,a=e/s,u=bl(t[0]);u.set("offset",0),o.push(u);const c=bl(t[0]);c.set("offset",zP(a)),o.push(c);const d=t.length-1;for(let f=1;f<=d;f++){let p=bl(t[f]);const g=p.get("offset");p.set("offset",zP((e+g*r)/s)),o.push(p)}r=s,e=0,i="",t=o}return H_(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function zP(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class q_{}const Nq=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Fq extends q_{normalizePropertyName(t,e){return U_(t)}normalizeStyleValue(t,e,r,i){let o="";const s=r.toString().trim();if(Nq.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function R6(n,t){return new Ee(3005,!1)}())}return s+o}}function jP(n,t,e,r,i,o,s,a,u,c,d,f,p){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:d,totalTime:f,errors:p}}const G_={};class HP{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function Bq(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return void 0!==t&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,s,a,u,c,d){const f=[],p=this.ast.options&&this.ast.options.params||G_,v=this.buildStyles(r,a&&a.params||G_,f),y=u&&u.params||G_,w=this.buildStyles(i,y,f),b=new Set,A=new Map,_=new Map,C="void"===i,E={params:Lq(y,p),delay:this.ast.options?.delay},T=d?[]:W_(t,e,this.ast.animation,o,s,v,w,E,c,f);let O=0;if(T.forEach(B=>{O=Math.max(B.duration+B.delay,O)}),f.length)return jP(e,this._triggerName,r,i,C,v,w,[],[],A,_,O,f);T.forEach(B=>{const F=B.element,X=ms(A,F,new Set);B.preStyleProps.forEach(re=>X.add(re));const G=ms(_,F,new Set);B.postStyleProps.forEach(re=>G.add(re)),F!==e&&b.add(F)});const N=Ww(b.values());return jP(e,this._triggerName,r,i,C,v,w,T,N,A,_,O)}}function Lq(n,t){const e=Zm(t);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(e[r]=n[r]);return e}class Uq{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r=new Map,i=Zm(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(i[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=ev(s,i,e));const u=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,u,s,e),r.set(a,s)})}),r}}class jq{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{this.states.set(i.name,new Uq(i.style,i.options&&i.options.params||{},r))}),WP(this.states,"true","1"),WP(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new HP(t,i,this.states))}),this.fallbackTransition=function Hq(n,t,e){return new HP(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function WP(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const Wq=new Kw;class Vq{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const r=[],o=z_(this._driver,e,r,[]);if(r.length)throw function Q6(n){return new Ee(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,r){const i=t.element,o=EP(this._normalizer,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=W_(this._driver,e,o,N_,Uw,new Map,new Map,r,Wq,i),s.forEach(d=>{const f=ms(a,d.element,new Map);d.postStyleProps.forEach(p=>f.set(p,null))})):(i.push(function Y6(){return new Ee(3300,!1)}()),s=[]),i.length)throw function X6(n){return new Ee(3504,!1)}();a.forEach((d,f)=>{d.forEach((p,g)=>{d.set(g,this._driver.computeStyle(f,g,lc))})});const c=wl(s.map(d=>{const f=a.get(d.element);return this._buildPlayer(d,new Map,f)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function J6(n){return new Ee(3301,!1)}();return e}listen(t,e,r,i){const o=k_(e,"","","");return R_(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const VP="ng-animate-queued",K_="ng-animate-disabled",Yq=[],qP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Xq={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xa="__ng_removed";class Q_{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function e8(n){return n??null}(r?t.value:t),r){const o=Zm(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const tv="void",Y_=new Q_(tv);class Jq{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ys(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw function Z6(n,t){return new Ee(3302,!1)}();if(null==r||0==r.length)throw function $6(n){return new Ee(3303,!1)}();if(!function t8(n){return"start"==n||"done"==n}(r))throw function eq(n,t){return new Ee(3400,!1)}();const o=ms(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);const a=ms(this._engine.statesByElement,t,new Map);return a.has(e)||(Ys(t,zw),Ys(t,zw+"-"+e),a.set(e,Y_)),()=>{this._engine.afterFlush(()=>{const u=o.indexOf(s);u>=0&&o.splice(u,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function tq(n){return new Ee(3401,!1)}();return e}trigger(t,e,r,i=!0){const o=this._getTrigger(e),s=new X_(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Ys(t,zw),Ys(t,zw+"-"+e),this._engine.statesByElement.set(t,a=new Map));let u=a.get(e);const c=new Q_(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),a.set(e,c),u||(u=Y_),c.value!==tv&&u.value===c.value){if(!function i8(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(u.params,c.params)){const y=[],w=o.matchStyles(u.value,u.params,y),b=o.matchStyles(c.value,c.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{Xd(t,w),cu(t,b)})}return}const p=ms(this._engine.playersByElement,t,[]);p.forEach(y=>{y.namespaceId==this.id&&y.triggerName==e&&y.queued&&y.destroy()});let g=o.matchTransition(u.value,c.value,t,c.params),v=!1;if(!g){if(!i)return;g=o.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:g,fromState:u,toState:c,player:s,isFallbackTransition:v}),v||(Ys(t,VP),s.onStart(()=>{cp(t,VP)})),s.onDone(()=>{let y=this.players.indexOf(s);y>=0&&this.players.splice(y,1);const w=this._engine.playersByElement.get(t);if(w){let b=w.indexOf(s);b>=0&&w.splice(b,1)}}),this.players.push(s),p.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,jw,!0);r.forEach(i=>{if(i[xa])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((u,c)=>{if(s.set(c,u.value),this._triggers.has(c)){const d=this.trigger(t,c,tv,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&wl(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const u=this._triggers.get(s).fallbackTransition,c=r.get(s)||Y_,d=new Q_(tv),f=new X_(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:u,fromState:c,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const o=t[xa];(!o||o===qP)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Ys(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const u=k_(o,r.triggerName,r.fromState.value,r.toState.value);u._data=t,R_(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class Zq{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new Jq(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){const u=i.get(a);if(u){const c=r.indexOf(u);r.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}return e}trigger(t,e,r,i){if(Xw(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!Xw(e))return;const o=e[xa];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ys(t,K_)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),cp(t,K_))}removeNode(t,e,r){if(Xw(e)){const i=t?this._fetchNamespace(t):null;i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r);const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[xa]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return Xw(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,jw,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,F_,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return wl(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[xa];if(e&&e.setForRemoval){if(t[xa]=qP,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(K_)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ys(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?wl(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function nq(n){return new Ee(3402,!1)}()}_flushAnimations(t,e){const r=new Kw,i=[],o=new Map,s=[],a=new Map,u=new Map,c=new Map,d=new Set;this.disabledNodes.forEach($=>{d.add($);const ee=this.driver.query($,".ng-animate-queued",!0);for(let te=0;te<ee.length;te++)d.add(ee[te])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=QP(p,this.collectedEnterElements),v=new Map;let y=0;g.forEach(($,ee)=>{const te=N_+y++;v.set(ee,te),$.forEach(ce=>Ys(ce,te))});const w=[],b=new Set,A=new Set;for(let $=0;$<this.collectedLeaveElements.length;$++){const ee=this.collectedLeaveElements[$],te=ee[xa];te&&te.setForRemoval&&(w.push(ee),b.add(ee),te.hasAnimation?this.driver.query(ee,".ng-star-inserted",!0).forEach(ce=>b.add(ce)):A.add(ee))}const _=new Map,C=QP(p,Array.from(b));C.forEach(($,ee)=>{const te=Uw+y++;_.set(ee,te),$.forEach(ce=>Ys(ce,te))}),t.push(()=>{g.forEach(($,ee)=>{const te=v.get(ee);$.forEach(ce=>cp(ce,te))}),C.forEach(($,ee)=>{const te=_.get(ee);$.forEach(ce=>cp(ce,te))}),w.forEach($=>{this.processLeaveNode($)})});const E=[],T=[];for(let $=this._namespaceList.length-1;$>=0;$--)this._namespaceList[$].drainQueuedTransitions(e).forEach(te=>{const ce=te.player,xe=te.element;if(E.push(ce),this.collectedEnterElements.length){const _t=xe[xa];if(_t&&_t.setForMove){if(_t.previousTriggersValues&&_t.previousTriggersValues.has(te.triggerName)){const jt=_t.previousTriggersValues.get(te.triggerName),Mt=this.statesByElement.get(te.element);if(Mt&&Mt.has(te.triggerName)){const tr=Mt.get(te.triggerName);tr.value=jt,Mt.set(te.triggerName,tr)}}return void ce.destroy()}}const je=!f||!this.driver.containsElement(f,xe),Ke=_.get(xe),ut=v.get(xe),ot=this._buildInstruction(te,r,ut,Ke,je);if(ot.errors&&ot.errors.length)return void T.push(ot);if(je)return ce.onStart(()=>Xd(xe,ot.fromStyles)),ce.onDestroy(()=>cu(xe,ot.toStyles)),void i.push(ce);if(te.isFallbackTransition)return ce.onStart(()=>Xd(xe,ot.fromStyles)),ce.onDestroy(()=>cu(xe,ot.toStyles)),void i.push(ce);const Vt=[];ot.timelines.forEach(_t=>{_t.stretchStartingKeyframe=!0,this.disabledNodes.has(_t.element)||Vt.push(_t)}),ot.timelines=Vt,r.append(xe,ot.timelines),s.push({instruction:ot,player:ce,element:xe}),ot.queriedElements.forEach(_t=>ms(a,_t,[]).push(ce)),ot.preStyleProps.forEach((_t,jt)=>{if(_t.size){let Mt=u.get(jt);Mt||u.set(jt,Mt=new Set),_t.forEach((tr,Jt)=>Mt.add(Jt))}}),ot.postStyleProps.forEach((_t,jt)=>{let Mt=c.get(jt);Mt||c.set(jt,Mt=new Set),_t.forEach((tr,Jt)=>Mt.add(Jt))})});if(T.length){const $=[];T.forEach(ee=>{$.push(function rq(n,t){return new Ee(3505,!1)}())}),E.forEach(ee=>ee.destroy()),this.reportError($)}const O=new Map,N=new Map;s.forEach($=>{const ee=$.element;r.has(ee)&&(N.set(ee,ee),this._beforeAnimationBuild($.player.namespaceId,$.instruction,O))}),i.forEach($=>{const ee=$.element;this._getPreviousPlayers(ee,!1,$.namespaceId,$.triggerName,null).forEach(ce=>{ms(O,ee,[]).push(ce),ce.destroy()})});const B=w.filter($=>XP($,u,c)),F=new Map;KP(F,this.driver,A,c,lc).forEach($=>{XP($,u,c)&&B.push($)});const G=new Map;g.forEach(($,ee)=>{KP(G,this.driver,new Set($),u,"!")}),B.forEach($=>{const ee=F.get($),te=G.get($);F.set($,new Map([...ee?.entries()??[],...te?.entries()??[]]))});const re=[],fe=[],he={};s.forEach($=>{const{element:ee,player:te,instruction:ce}=$;if(r.has(ee)){if(d.has(ee))return te.onDestroy(()=>cu(ee,ce.toStyles)),te.disabled=!0,te.overrideTotalTime(ce.totalTime),void i.push(te);let xe=he;if(N.size>1){let Ke=ee;const ut=[];for(;Ke=Ke.parentNode;){const ot=N.get(Ke);if(ot){xe=ot;break}ut.push(Ke)}ut.forEach(ot=>N.set(ot,xe))}const je=this._buildAnimation(te.namespaceId,ce,O,o,G,F);if(te.setRealPlayer(je),xe===he)re.push(te);else{const Ke=this.playersByElement.get(xe);Ke&&Ke.length&&(te.parentPlayer=wl(Ke)),i.push(te)}}else Xd(ee,ce.fromStyles),te.onDestroy(()=>cu(ee,ce.toStyles)),fe.push(te),d.has(ee)&&i.push(te)}),fe.forEach($=>{const ee=o.get($.element);if(ee&&ee.length){const te=wl(ee);$.setRealPlayer(te)}}),i.forEach($=>{$.parentPlayer?$.syncPlayerEvents($.parentPlayer):$.destroy()});for(let $=0;$<w.length;$++){const ee=w[$],te=ee[xa];if(cp(ee,Uw),te&&te.hasAnimation)continue;let ce=[];if(a.size){let je=a.get(ee);je&&je.length&&ce.push(...je);let Ke=this.driver.query(ee,F_,!0);for(let ut=0;ut<Ke.length;ut++){let ot=a.get(Ke[ut]);ot&&ot.length&&ce.push(...ot)}}const xe=ce.filter(je=>!je.destroyed);xe.length?n8(this,ee,xe):this.processLeaveNode(ee)}return w.length=0,re.forEach($=>{this.players.push($),$.onDone(()=>{$.destroy();const ee=this.players.indexOf($);this.players.splice(ee,1)}),$.play()}),re}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const u=!o||o==tv;a.forEach(c=>{c.queued||!u&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){const o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const u of e.timelines){const c=u.element,d=c!==o,f=ms(r,c,[]);this._getPreviousPlayers(c,d,s,a,e.toState).forEach(g=>{const v=g.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),g.destroy(),f.push(g)})}Xd(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){const a=e.triggerName,u=e.element,c=[],d=new Set,f=new Set,p=e.timelines.map(v=>{const y=v.element;d.add(y);const w=y[xa];if(w&&w.removedBeforeQueried)return new Jm(v.duration,v.delay);const b=y!==u,A=function r8(n){const t=[];return YP(n,t),t}((r.get(y)||Yq).map(O=>O.getRealPlayer())).filter(O=>!!O.element&&O.element===y),_=o.get(y),C=s.get(y),E=EP(this._normalizer,v.keyframes,_,C),T=this._buildPlayer(v,E,A);if(v.subTimeline&&i&&f.add(y),b){const O=new X_(t,a,y);O.setRealPlayer(T),c.push(O)}return T});c.forEach(v=>{ms(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function $q(n,t,e){let r=n.get(t);if(r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}return r}(this.playersByQueriedElement,v.element,v))}),d.forEach(v=>Ys(v,kP));const g=wl(p);return g.onDestroy(()=>{d.forEach(v=>cp(v,kP)),cu(u,e.toStyles)}),f.forEach(v=>{ms(i,v,[]).push(g)}),g}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Jm(t.duration,t.delay)}}class X_{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Jm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>R_(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ms(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Xw(n){return n&&1===n.nodeType}function GP(n,t){const e=n.style.display;return n.style.display=t??"none",e}function KP(n,t,e,r,i){const o=[];e.forEach(u=>o.push(GP(u)));const s=[];r.forEach((u,c)=>{const d=new Map;u.forEach(f=>{const p=t.computeStyle(c,f,i);d.set(f,p),(!p||0==p.length)&&(c[xa]=Xq,s.push(c))}),n.set(c,d)});let a=0;return e.forEach(u=>GP(u,o[a++])),s}function QP(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const i=new Set(t),o=new Map;function s(a){if(!a)return 1;let u=o.get(a);if(u)return u;const c=a.parentNode;return u=e.has(c)?c:i.has(c)?1:s(c),o.set(a,u),u}return t.forEach(a=>{const u=s(a);1!==u&&e.get(u).push(a)}),e}function Ys(n,t){n.classList?.add(t)}function cp(n,t){n.classList?.remove(t)}function n8(n,t,e){wl(e).onDone(()=>n.processLeaveNode(t))}function YP(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof CP?YP(r.players,t):t.push(r)}}function XP(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}class Jw{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new Zq(t,e,r),this._timelineEngine=new Vq(t,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){const s=t+"-"+i;let a=this._triggerCache[s];if(!a){const u=[],d=z_(this._driver,o,u,[]);if(u.length)throw function G6(n,t){return new Ee(3404,!1)}();a=function zq(n,t,e){return new jq(n,t,e)}(i,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r){this._transitionEngine.removeNode(t,e,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[o,s]=DP(r);this._timelineEngine.command(o,e,s,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if("@"==r.charAt(0)){const[s,a]=DP(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let s8=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&cu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cu(this._element,this._initialStyles),this._endStyles&&(cu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xd(this._element,this._endStyles),this._endStyles=null),cu(this._element,this._initialStyles),this._state=3)}}return n})();function J_(n){let t=null;return n.forEach((e,r)=>{(function a8(n){return"display"===n||"position"===n})(r)&&(t=t||new Map,t.set(r,e))}),t}class JP{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&t.set(i,this._finished?r:FP(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class u8{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return SP(t,e)}getParentElement(t){return P_(t)}query(t,e,r){return TP(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,o,s=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(u.easing=o);const c=new Map,d=s.filter(g=>g instanceof JP);(function gq(n,t){return 0===n||0===t})(r,i)&&d.forEach(g=>{g.currentSnapshot.forEach((v,y)=>c.set(y,v))});let f=function fq(n){return n.length?n[0]instanceof Map?n:n.map(t=>PP(t)):[]}(e).map(g=>bl(g));f=function mq(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<t.length;o++){let s=t[o];i.forEach(a=>s.set(a,FP(n,a)))}}return t}(t,f,c);const p=function o8(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=J_(t[0]),t.length>1&&(r=J_(t[t.length-1]))):t instanceof Map&&(e=J_(t)),e||r?new s8(n,e,r):null}(t,f);return new JP(t,f,u,p)}}let c8=(()=>{class n extends wP{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:Mo.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?AP(e):e;return ZP(this._renderer,null,r,"register",[i]),new l8(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Un),Ze(Gs))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();class l8 extends C6{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new d8(this._id,t,e||{},this._renderer)}}class d8{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return ZP(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ZP(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const $P="@.disabled";let f8=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(e,r){const o=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let d=this._rendererCache.get(o);return d||(d=new eO("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,d)),d}const s=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const u=d=>{Array.isArray(d)?d.forEach(u):this.engine.registerTrigger(s,a,e,d.name,d)};return r.data.animation.forEach(u),new h8(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Un),Ze(Jw),Ze(Pn))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();class eO{constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==$P?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class h8 extends eO{constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==$P?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function p8(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function g8(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(t,e,r)}}let m8=(()=>{class n extends Jw{constructor(e,r,i,o){super(e.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Gs),Ze(O_),Ze(q_),Ze(Kd))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();const tO=[{provide:wP,useClass:c8},{provide:q_,useFactory:function v8(){return new Fq}},{provide:Jw,useClass:m8},{provide:Un,useFactory:function y8(n,t,e){return new f8(n,t,e)},deps:[E_,Jw,Pn]}],Z_=[{provide:O_,useFactory:()=>new u8},{provide:V0,useValue:"BrowserAnimations"},...tO],nO=[{provide:O_,useClass:RP},{provide:V0,useValue:"NoopAnimations"},...tO];let w8=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?nO:Z_}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({providers:Z_,imports:[pP]})}return n})(),xo=(()=>{class n{static#e=this.UserId="638b9d07-8c20-4c61-84ad-6f7d0fbdddbf";static#t=this.BotId="4f35a6e3-4e0a-4edb-b86c-8f2d1f2bae99"}return n})();class lp{constructor(t,e,r){this.labelColor=t,this.textColor=e,this.backgroundColor=r}}class $_{constructor(t,e,r){this.primaryColor=t,this.onPrimaryColor=e,this.secondaryColor=r}}class eE{constructor(t,e,r,i,o,s){this.title=t,this.userName=e,this.botName=r,this.windowColors=i,this.userColors=o,this.cancelOnClickOutside=s}}var $w=function(n){return n.BottomLeft="BOTTOM_LEFT",n.BottomRight="BOTTOM_RIGHT",n}($w||{}),tE=function(n){return n[n.Regular=0]="Regular",n[n.Callout=1]="Callout",n}(tE||{});function lu(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,n=>(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16))}function rO(n,t=!1){return ge((e,r)=>{let i=0;e.subscribe(ie(r,o=>{const s=n(o,i++);(s||t)&&r.next(o),!s&&r.complete()}))})}const{isArray:b8}=Array,{getPrototypeOf:A8,prototype:x8,keys:C8}=Object;const{isArray:D8}=Array;function iO(...n){const t=ql(n),e=function Rf(n){return an(Hp(n))?n.pop():void 0}(n),{args:r,keys:i}=function _8(n){if(1===n.length){const t=n[0];if(b8(t))return{args:t,keys:null};if(function E8(n){return n&&"object"==typeof n&&A8(n)===x8}(t)){const e=C8(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}(n);if(0===r.length)return sa([],t);const o=new ln(function R8(n,t,e=rs){return r=>{oO(t,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)oO(t,()=>{const c=sa(n[u],t);let d=!1;c.subscribe(ie(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>function T8(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}(i,s):rs));return e?o.pipe(function S8(n){return ne(t=>function I8(n,t){return D8(t)?n(...t):n(t)}(n,t))}(e)):o}function oO(n,t,e){n?So(e,n,t):t()}class dp{constructor(t,e,r){this.id=t,this.userId=e,this.message=r,this.loading=!1,this.warning=!1,this.updateCount=0,this._queryText=void 0,this.style=Ca.Default}get QueryText(){return this._queryText?this._queryText:this.message}set QueryText(t){this._queryText=t}}var Ca=function(n){return n[n.Default=1]="Default",n[n.Pill=2]="Pill",n[n.Attachment=3]="Attachment",n[n.Location=4]="Location",n[n.Code=5]="Code",n[n.Secret=6]="Secret",n}(Ca||{}),nE=function(n){return n.User="user",n.Assistant="assistant",n}(nE||{});class sO{constructor(t,e){this.role=t,this.content=e}}class _a{constructor(t,e,r){this.content=t,this.finish_reason=e,this.error=r}}var fp=function(n){return n.None="None",n.ShowRecord="SHOW_RECORD",n.ShowRecords="SHOW_RECORDS",n.RecordVideo="RECORD_VIDEO",n.RecordAudio="RECORD_AUDIO",n.UploadFile="UPLOAD_FILE",n.ChooseOption="CHOOSE_OPTION",n.ChooseOptions="CHOOSE_OPTIONS",n.CreateSchedule="CREATE_SCHEDULE",n.TakePicture="TAKE_PICTURE",n.FaceCapture="SCAN_FACE_IMAGE",n.ReadPIN="READ_PIN",n.ScanQRCode="SCAN_CODE",n.ScanDocument="SCAN_DOCUMENT",n.ShareLocation="LOCATION_SHARE",n}(fp||{});class rE{constructor(t,e,r,i,o){this.Id=t,this.TypeId=e,this.AppId=r,this.ClientId=i,this.DisplayName=o}static get(t){const e=t.id,r=t.TypeId,i=t.AppId,o=t.ClientId,s=t.DisplayName;return e&&r&&o&&i?new rE(e,r,i,o,s?"__null__"===s?"Not provided":s:"Not provided"):null}}class Xs{get result(){return this._result}set result(t){this._result=t}get error(){return this._error}set error(t){this._error=t}constructor(){this.isError=!1}static ok(t){const e=new Xs;return e.result=t,e.isError=!1,e}static error(t){const e=new Xs;return e.error=t,e.isError=!0,e}}class nv{constructor(t){this.dataService=t,this.history=[],this.sessionid=lu()}clearChatHistory(){this.history=[]}submitUserReplyToBOT(t,e){let r="",i=!1;return new ln(o=>{let s,a;this.history=this.dataService.dumpChatHistory(this.history),this.dataService.submitUserReply(t,this.sessionid,this.history).subscribe({next:c=>{o.closed||(c.message?c.message.error?(r="",o.next(Xs.error(new Error(c.message.content||"We've encounted an unknown problem. Please try agian later."))),i=!0,o.complete()):i||(c.message.content&&c.message.content.length>0?(r+=c.message.content,o.next(Xs.ok({message:r,action:s,suggestions:a}))):(r+="",o.next(Xs.ok({message:r,action:s,suggestions:a})))):c.uiaction&&c.uiaction&&c.uiaction&&c.uiaction.content&&c.uiaction.content.actions&&c.uiaction.content.actions.length?(s=c.uiaction.content.actions[0],o.next(Xs.ok({message:r,action:s,suggestions:a}))):c.suggestions&&c.suggestions&&(a=c.suggestions,o.next(Xs.ok({message:r,action:s,suggestions:a}))))},complete:()=>{i||this.history.push(new sO(nE.User,t),new sO(nE.Assistant,r)),o.complete(),e()}})})}}class M8 extends ci{constructor(t,e){super()}schedule(t,e=0){return this}}const eb={setInterval(n,t,...e){const{delegate:r}=eb;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=eb;return(t?.clearInterval||clearInterval)(n)},delegate:void 0},iE={now:()=>(iE.delegate||Date).now(),delegate:void 0};class rv{constructor(t,e=rv.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}}rv.now=iE.now;const oE=new class P8 extends rv{constructor(t,e=rv.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}(class k8 extends M8{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return eb.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&eb.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Na(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}),O8=oE;function aO(n=0,t,e=O8){let r=-1;return null!=t&&(Vl(t)?e=t:r=t),new ln(i=>{let o=function N8(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function cO(n,t){return an(t)?Mc(n,t,1):Mc(n,1)}class tb{submitUserReply(t,e,r){return new ln(i=>{setTimeout(()=>{const o=["You"," need"," to"," contact"," Cloudapper"," Sales"," for"," this"," service."," You"," can"," do"," so"," from ","[here](https://cloudapper.ai/contact-us)"];(function F8(n=0,t=oE){return n<0&&(n=0),aO(n,n,t)})(50).pipe(function uO(n){return n<=0?()=>Tf:ge((t,e)=>{let r=0;t.subscribe(ie(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}(o.length),cO((s,a)=>Gl(o[a]))).subscribe({next:s=>{i.next({message:new _a(s)})},complete:()=>{i.complete()}})},1e3)})}dumpChatHistory(t){return t}}class B8{constructor(t,e){this.func=t,this.param=e}}class L8{constructor(){this.queue=[],this.isRunning=!1,this.onQueueEmpty=new Qe,this.isResetFlag=!1}addInQueue(t){this.isResetFlag=!1,this.queue.push(t)}length(){return this.queue.length}execute(t=!1){if(this.isRunning&&!t)return;const e=this.queue.pop();e?(this.isRunning=!0,e.func(e.param).then(()=>{this.execute(!0)})):(this.isRunning=!1,this.isResetFlag||this.onQueueEmpty.closed||this.onQueueEmpty.next())}reset(){this.isResetFlag=!0,this.queue=[],this.isRunning=!1}}var iv=Ni(990);function lO(n){let t=!1;return t=(0,iv.isObject)(n)&&!(0,iv.isDate)(n)||(0,iv.isArray)(n)?(0,iv.isEmpty)(n):null==n||typeof n>"u",t}function nb(n){return!!(lO(n)||(0,iv.isString)(n)&&!n.trim())}function dO(n,t){const e=parseInt(n.slice(1),16),r=Math.round(2.55*t),i=(e>>16)+r,o=(e>>8&255)+r,s=(255&e)+r;return`#${(16777216+65536*(i<255?i<1?0:i:255)+256*(o<255?o<1?0:o:255)+(s<255?s<1?0:s:255)).toString(16).slice(1)}`}function sE(n,t){const e=parseInt(n.slice(1),16),r=Math.round(2.55*t),i=(e>>16)-r,o=(e>>8&255)-r,s=(255&e)-r;return`#${(16777216+65536*(i>0?i:0)+256*(o>0?o:0)+(s>0?s:0)).toString(16).slice(1)}`}class fO{constructor(t,e,r){this.identifier=e,this.knowledgeBaseId=r,this.MAX_TOKEN_LIMIT=2e3,this.url=t.endsWith("/")?`${t}api/v2.0/ai/llm-chat`:`${t}/api/v2.0/ai/llm-chat`}submitUserReply(t,e,r){return new ln(i=>{let o={};o=this.knowledgeBaseId.length>0?{group_ids:[this.knowledgeBaseId],similarity_top_k:4,query:t,chat_history:r,system_context:"You are an AI Assistant made by CloudApper AI."}:{similarity_top_k:4,query:t,chat_history:r,system_context:"You are an AI Assistant made by CloudApper AI."},fetch(this.url,{method:"post",headers:{"Content-Type":"application/json",Accept:"*/*","X-Ca-Identifier":this.identifier,"X-Ca-Stream-Response":"true","X-Ca-Chat-Session-Id":e},body:JSON.stringify(o)}).then(s=>{if(s.ok){if("text/event-stream"!==s.headers.get("Content-Type"))return s.json();{const a=new TextDecoder("utf-8"),u=s.body;if(u){const c=u.getReader();let d=!1;this.readStream(a,c,f=>{if(!i.closed)if(f)switch(f.event){case"message":case"error":{const p=this.parseMessageContent(f.data);p?i.next({message:p}):(i.next({message:new _a(null,null,"We have encountered a problem when we were parsing response.")}),i.complete()),d=!0}break;case"data":{const p=this.parseDataContent(f.data);p&&i.next({cache:p}),d=!0}break;case"suggestions":{const p=this.parseChatSuggestionContent(f.data);p&&i.next({suggestions:p.content}),d=!0}break;case"uiaction":{const p=this.parseUIActionContent(f.data);p&&i.next({uiaction:p}),d=!0}}else i.next(d?{}:{message:new _a("We didn't receive a response that we can work with.",null,{})}),i.complete()})}else i.next({message:new _a("We have encountered a problem. Please try again later.",null,{})}),i.complete()}}else s.statusText&&s.statusText.trim().length>0?i.next({message:new _a(`We have encountered a problem. Please try again later.\n${s.status}: **${s.statusText}**`,null,{})}):i.next({message:new _a(`${s.status} - We have encountered a problem. Please try again later.`,null,{})}),i.complete()}).then(s=>{if(s){if(s.ResponseCode&&200!==s.ResponseCode){const a=s.ResponseCode;let u="";u=s.Message&&s.Message.trim().length>0?`We have encountered a problem. Please try again later.\n${a}-**${s.Message.trim()}**`:`${a} - We have encountered a problem. Please try again later.`,i.next({message:new _a(u,null,{})})}else{const a=s.Result;a?a.query_result&&a.query_result.trim().length>0?i.next({message:new _a(a.query_result.trim(),null,null)}):i.next({message:new _a("",null,null)}):i.next({message:new _a("We have encountered a problem. Please try again later.",null,{})})}i.complete()}}).catch(s=>{i.next({message:new _a(`We have encountered a problem. Please try again later.\n${s}`,null,{})}),i.complete()})})}readStream(t,e,r){let i=!1;const o=new L8;let s,a;o.onQueueEmpty.subscribe(()=>{i&&r(void 0)});const u=()=>{s&&a&&s.length&&a.length&&a.endsWith("}")&&(r({event:s,data:a}),s=void 0,a=void 0)},c=g=>new Promise(v=>{const y=t.decode(g,{stream:!0});if(y){const w=y.split("\n").filter(b=>!nb(b));for(let b=0;b<w.length;b++){const A=w[b];A.startsWith("event:")?(u(),s=A.substring(6).trim()):A.startsWith("data:")?a=A.substring(5):a+=A}u()}v()}),d=g=>{r({event:"message",data:JSON.stringify({content:`We encountered an error while reading stream. Error: ${g.message}`,finish_reason:null,error:g})}),setTimeout(()=>{r(void 0),e.releaseLock()},10)},p=()=>{e.read().then(g=>{((g,v)=>{g.done?(e.releaseLock(),i=!0,o.execute()):(o.addInQueue(new B8(c,g.value)),o.execute(),p())})(g)}).catch(d)};p()}parseMessageContent(t){return JSON.parse(t)||null}parseDataContent(t){return JSON.parse(t)||null}parseChatSuggestionContent(t){try{return JSON.parse(t)||null}catch{return null}}parseUIActionContent(t){try{return JSON.parse(t)||null}catch{return null}}dumpChatHistory(t){return t}}function hO(n){return ge((t,e)=>{ir(n).subscribe(ie(e,()=>e.complete(),Fa)),!e.closed&&t.subscribe(e)})}const U8=jf,j8=Symbol("__destroy"),pO=Symbol("__decoratorApplied");function gO(n){return"string"==typeof n?Symbol(`__destroy__${n}`):j8}function mO(n,t){n[t]||(n[t]=new D)}function vO(n,t){n[t]&&(n[t].next(),n[t].complete(),n[t]=null)}function yO(n){n instanceof ci&&n.unsubscribe()}function wO(n,t){return function(){if(n&&n.call(this),vO(this,gO()),t.arrayName&&function W8(n){Array.isArray(n)&&n.forEach(yO)}(this[t.arrayName]),t.checkProperties)for(const e in this)t.blackList?.includes(e)||yO(this[e])}}function Co(n={}){return t=>{!function z8(n){return!!n[U8]}(t)?function V8(n,t){n.prototype.ngOnDestroy=wO(n.prototype.ngOnDestroy,t)}(t,n):function q8(n,t){const e=n.\u0275pipe;e.onDestroy=wO(e.onDestroy,t)}(t,n),function H8(n){n.prototype[pO]=!0}(t)}}Symbol("CheckerHasBeenSet");function Dn(n,t){return e=>{const r=gO(t);"string"==typeof t?function Y8(n,t,e){const r=n[t];mO(n,e),n[t]=function(){r.apply(this,arguments),vO(this,e),n[t]=r}}(n,t,r):mO(n,r);const i=n[r];return e.pipe(hO(i))}}class uE{constructor(){this.Refresh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAALWSURBVFiFtdfPi5VlFAfwz9wxHS0kCKIYR0UFB6EBU0iiNgotBMcJdBVt+wfatRQxalMLmShQcdWiX+BCok2QdkdFR4wK3GiTJIiFmjPYIDguzn2ZZ9573+d9b6NfOPDwPt/nnOece348d0BzrMUevIUxbMRLuIeHuIrf8AO+x4M+dGexBUcxi4WGch+TGFmO4SEcwnwfhsvyH45gZb/G1+OXZRguyyVsbmp8DDefoPFCbmJbE8//egrGC7mFDanBgWQ9hAt4pe6WmMF53EALL2OXqIw6XMSbIj+W4FDN7R/ha+zIKH8N39ToWRCJuQRb5LP9H+xr4F2Bcfyb0fdAKVpHM+Q72J5wW9iPE2hjqrOe6OwV2C6aVJXeyYK4Vr7JpJ5vxXSGO43RhD/R+f4T3he5U3DvYg28nVH4VaJsFLcz3EJuly5xEs931u+WuAfgs4yynZ2DrRrPF0QOfYzjOGfx5xhMLvNR6cyn8HOFwpkeoczJsYS/SQyqFC+KGZGemVqhunbbyXq8gpNiDM9iDtd67H+A50rfhomG0MujTxJiVZTKcgPv4ZmSoRFRemX+XEvM8l5YqHa2EuvwOX7HOxbz4LDotGUMEv25lzdfJsQTFZw6uYqzmf1bcKZi83pygSZJ+H9kqoVfK8K5UfR2OIXLFbzl4Ar5RvRtQh7F3xluIXfEYDvdgHsQVuuuz1TSEhwVkajiTot2TTzD5jLcWUlZTtZ49GpyicFO1E6K8myLJN1vadfbKUZ4ld4vEq4R1f2guMSE5hiXn4TzolsuwZHMgUK+s5iYvbBL5E2dng+LA+mTbKWY7Wm4qzAjnm9/iLAP43XN/ge0sVtEoQubPd1H6Z+6h1QXtqnujss13uTBi+jp556g8XYTz8sYEonZa4o1lfmOjlX9Gk+xQfSJu30YnhVTsavUyhioIyRYg714Q5TiMF7Ais7lrosu+aNow7NNlD4GsIko/piURS8AAAAASUVORK5CYII=",this.FileUpload="data:image/png;base64,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",this.Delete="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAACxAAAAsQHGLUmNAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAU1JREFUSIm1lj1Ow0AQhb/xTxQimlDQ0dBwBYS4Bw2i5FJcgRvABajTJFJoqBAKJHQR9nooyI+zu/Y6dnjSSt63O+/NzPoPAshJpzmpVoxpKF4aGBggqlguErK4Lj4JGYDc1CSiwejy5If0MkLOwqbVKNC3HtmLs5CT3tX0es/Ru13rlnt71SXzXej1+mpzBgJjhedDyAuMD6HT1GwLhcSQTjroaUx2IWDWxM5tKpDncAoctzSYl8XB/wB9WXMD3AMfpVTeV5yx9s5tMcdA3E2zhOwBGG0pHa04O5lZ0EA9WTSHfAYNQO2s9oAb6zGQ1hUohCtQpHUFUZMKIor/PoMuLWpg0KVFShFukXZoUdsKBgpHAiclbqgw4G9skBI7FTifQqV/bjCvFr0E+iEuJhsKLGorgKXvDGxxH5cD3/Ym37toATx5BEN4FM9PwC94JZIu2DeSAgAAAABJRU5ErkJggg==",this.Warning="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABBFJREFUeF7tmUuIHFUUhr8znUxQA9Eh6piEMSoYMQs1SMCFG8XHwsduXBiVCNJVGYy40o0y6EZXYmSmqhEMvhbOzsdC8bFxIYj4WCgqqEkck0kMowGjzCSdI1V21J5JT91761Z1d7ruts7jP1+fe+v2KWHAlwx4/VQAqg4YcALVFhjwBqgOwWoLVFtgwAlUW6CbDaARtyX5JeS9bunoWgfoXs5ngd/Swtdwgezk925A6B6AiGmEMC1aiSRk18AA0Gm2MMS3bQWf4irZxXdlQyi9A1QRGumev6WtWOUDAm4VQcuEUD6AiDsQ3j5jkcqdEvLOWQtAZxhmnnngvA5FHmeEERlnsSwIpXaANngC5akVixOelDpPn3UAdIq11DiavvRWXgs0WS8T/FEGhNI6QGNeAnYaFrVXAh40tM1lVgoAjbke+DS59BmqTd4E2yXgM0N7ZzNTQc4J0ntOzOfAdZZBvpCAbZY+1uaFA9CYHcCr1sr+cbhPAl5z9DVyKxSATrKKS9iPssFIzVIj4SCHuFQmOenkb+BULICYKch9x5+WgAmDWpxMCgOgDVajHAdWOyn7z+kEI6wt6nJUCIDWff9nYGOH4k8Bvyx5ltgOdbCfpc5YEf8TigEQczXwdcdfXvlVQi76/3ONOIJw4QrdslUCvsnZTcvcvQPQPaxhmAPQXmBbZjcAR1hkTHaz4BOCfwAx9wMvryjSDUAS8gEJeKVnAegUo9Q4mHnjcwegNNkgE8z5guCtA1oH33PAI5ni3AEkoZ+nzqO+DkR/AGKuAb7MLD4xyAcgiXCtBHxllCvDyAsAnWSIUd5dNubqlDw/gPeZ43aZJHmd5lp+AETci1jc2fMDSLpoh4S8nqv6zMPKIHrrxvcjsMnA/LRJE+H7Ja/GK4GaRYxZhMulzgkLH//3AI15Bngsj4gcvs9KwOM5/I0HFGfMoS9yMc10lr8uj4gcvseosUUe4rBrjFxngDZ4E+Uu1+Re/IS3pM7drrGcAWiDbWg65rLZt6d1/oUQLzkDAuAch0KS82S71NOpk/VyBxDzE7DZOmPi4OMt0J54nwRc5qLFCYBGjCO84ZIw9fEPIIl5j4TM2GqyBpCOuUY5Bpxrm+xf+yIAwJ/Msc52fGYPICYCkv2aZx1lkSvaAgzzA7A+T9Dks6vU7bRZAdCIjQizuUQW7axsknDZtKljVmMAOkONeT4Gbii6hpzxP2GEG2WcpkkccwARNyF8aBK06zbKzRLykYkOIwCtD5vJjG/MJGgP2BygyVaTD6xmAGIeBvb0QGE2EnZLwAtZDpkAWmOufcCqrGA99vwkTTZnjc8yAfRYUd7lVAC8I+2zgFUH9NkP5l1u1QHekfZZwKoD+uwH8y636gDvSPss4MB3wN+5BxBQ25wMYQAAAABJRU5ErkJggg==",this.Minimize="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAN1JREFUeF7tlcENQlEMw9qVmIIB2Iczw3BmA9Z6DGEkUGLuEb+u87pT/tvy+UcAGlBOwAqUC+AjaAWsQDkBK1AugFfACliBcgJWoFwAr4AVsALlBKxAuQBeAStgBcoJ4Aqccy4zc/8Rx8fuvsl/fwPAdWZe5CNA9ra7T5DnV+CcIwANKK9A9yNIHqB/yOIr8A9DkG8QAKGXkNWAhC2SGTSA0EvIakDCFskMGkDoJWQ1IGGLZAYNIPQSshqQsEUygwYQeglZDUjYIplBAwi9hKwGJGyRzKABhF5Ctt6ADzywHkEQYk5nAAAAAElFTkSuQmCC",this.Cancel="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAABdNJREFUeF7tnT/LFUcUxp9B0d4iha2VpY2VEJCgoPAaVCIklR/CT+GHSBVBUVFBwRACgVQ2lla2KSzsI8rIwFwYlvvnzMzu3jPnPG97z+6953l+e+bMzO67AfxzrUBwnT2TBwFwDgEBIADOFXCePisAAXCugPP0WQEIgHMFnKfPCkAAnCvgPH1WAALgXAHn6bMCEADnCjhPnxWAADhXwHn6rAAEwLkCztNnBSAAzhVwnj4rAAFwroDz9FkBCIBzBZynzwpAAJwr4Dx9VgAC4FwB5+mzAhAA5wo4T58VgAA4V8B5+morQIzxPICHAO6HEL6M6FOM8QyA3wE8CCH8pzEHlQDEGM8B+ADgBwD/APgphPBVo4C7flOM8TSAvwD8COATgIshhM/aclAHQDb/HYALhVivAdwKIXzTJuC23xNjPAXgJYCbxecfAVzWBoEqALL5/6arZYuwzwH8oh2CbP4TALe35JCq2hVNEKgBYMeVP9VQNQQHzN/koqoSqAAgN3zv85h/qMqn4eBnbT1BHvNfTMr+rlxST3BJQ2OoBYA/APx6yPni89QYXtMyO8jd/p+54ZOm8SiE8Js0eKk4LQCk6VKtgG/T1XbsniCX/VSVrleYpAZgFQAk4SpL6EbrVHLvHguCbP7TNCRVmK9qCFMDQIYgTZ92ddC7NH4G4N7aEGTzHwO4U2G+uiZWFQAdELxK0661IMjmJzNPRjY//XZ1ABQQTBdSDmn9N4AbIYT/DwX2fB5jPAvgDYCrFedRu5ClEoCiJ9gspUq1ThCk2cEiK4b5yk/Nao35qpey1QKQIUizg1TeazrsRYaDxrKfZionWqar264i1QAUw0Ftpz1rY9jY8B11hiItmeoBKCCo7bhnMaBxqjcrgFIzW+KGAKCAoLbz7irBeYVPxRDUYq7kmGEAKCBYpQmb7OdLtEwxizah0h9REzcUABmCxadhO/bzD+m6yjT00I+o/Xw4ADqGA9EqnHBLd6rzIjOPWjNb4ocEoKMx3AtBo/nDNHxDTgP3Ud3YoW/djBlxM6rlip8eM2wF2CQyx3Zs436+iu3oXgiGB6BYMWy6nyALOOx+PgHICnSU8HSGYffzCUChQGMTV6OhaCZRc8Jjx5oYAkoRF4TAnPlJN3MAFFPE2vsJ9l2MavfzeyuISQAyBOWjWT06qd7P70nMbAUopogt9xOUmnZtJvWas8bxZivAZJ2g9n6CdPgs28lrmNjzHQRgt3oEoIcsDcc27udzCNBgXu9vaNzP3/a1bAJ7zVj7+Mb9fE4D1zZqie/jQlCdqqaawAXN36hqbjXQDADcDKq78jfRJgDo2c/PQnA7uI2f4x/FG0L6PBi6AvCWsD7zh94LaHxcizeFTpgZsgI0Pqgp6uAbZxK8Lby/GMnOsMbz+Y0LSXwwRGZhe9Saz+c3LiXz0bB2e/cf2Vj2u/bzGzeThhoOhugBGhu+WbZzG2cawzwtpB4ADQYcE8ClKuoQK4GaSvAxhqClzVe9DqCxCVuzCV3DfLUAaJ6GrTENXct8lQCMsBDTOByIFqLWNF8dAI3mH6XjbmwM1UGgZhbQsZ/PfxbdUTZUANCzn7/UfwWVajrHdrT0u5aI0wIAXxixhLuCc2oBIL0jkK+MERg2d4gKAFJSfGnU3NbKzqcGgAICvjZO5t0sUaoA2FMJhno+f8dClqrXxaneC+CrY2e5uEUnUVcBNr+aL48W+dcdpBaA7sx4ApECBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1FmBEAkk90gAmDXW1Fm3wFoJoifN+CT3gAAAABJRU5ErkJggg==",this.DisabledStart="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAE/FJREFUeF7tXQtwVNd5/vfe3dXqLSRh8RISRkn8FnHlgqhsU3BN3GkTB4MzNoNKMbg2RhXBgU7LFJs+kjhN3QojSJzQzNidaQacQYBdUVceWXJ4W7JsjJzUMeBgyxZ6AJb1XO1u57u6Z3X27n3vvbvyjO/MnbvSnnse//d///+f/5x710NfHimVgCelrX/ZOE11ANT6p9fniAqmav+bMtBPNQD4/uAzf0Jo7HutfjNh46r8zP/9JQCcBHihMoELRCQ0NjbeHQwGhfz8/LuysrKqcE8kEvEEAoE/UpPg8PDwMY/HExkcHPy1IAiSwBcvXvyPRBSWTwYMf00pGKligFLoTOBLRkdHxdLS0r8NBAJVkciE0uKq9lkpOY9nolp2xWdBQNVEvb29z4iiGOYACcksSSkYyQaAFzwkIzY2NkpCLykp+Tum2eFwOEbgECgAYFc7KsuAQB0jIyPHRkZGWhcvXvxPRDTOsQNMkTC304ade5IFAGtH0nQI/vDhw39cXFy8XU3oegNhTLAzWHYPQMAJUBTMACuUzEikKcN73QYgTvANDQ1Lmbbzms56ymt6Ihpvtj7GDFz7+/t/WFVVBZ8BVgAIMMJVNrgJAHOoIjTeSPCGqsJsg+wXzJY3U46xCiBwQPwDBwQfVZmp0nQZNwDgIxmYmqXM1KhpvLKnTjNAjwlaDAMIly9f/pf+/v7XV65c+ZqCDY4ywmkAeK33HTt2bEd+fv7fmBG8GZVxwv6rAa7WNkAAQP39/c/ceeedYENQ4R/MdNmwjJMAoC44WG9DQ8OyuXPnwsEuhvDNHGqanwwfYNQ3ADE2Nnbs9ttvv4+IxhRRk9Htht87AQBvcnwHDhxYdssttxxxSuv5ESSTAXy7UARRFKmnp+eZu+++e6fMBja5MxSyXoFEAeCF73/jjTeeKiws3BYKIYCwd0wFH6DVczls/dGSJUsYCCxSsjdYLrdip4IYe9/a2vp0YWHhVrMmx2qDqdJ+ZT+Zg166dClAgElKCAS7DHBM+MnUeKugq5VHf2GOECU5AYIdABwTvlmBuKH9aDuRep1iglUAHBe+XvQzFaIgvXmKE0ywAwBmtn63bT4/gTLLFCvlEtF+vh2OCU/LPsFSdGQFAJSVhI9op6CgYJsTDtdpH+B0fXoMYAwFCB0dHd9as2bN/yombIY6YRYANsnyEVF6Z2dnvxPCN+qdU1qq5UyN2rfyPcxRW1vbN6urqxkIphJ5ZgBgdt9LRIG2trajaWlplVY6p1fWssYilezzkyc9i4SMLClZGR4apMjQAEXGg/CsMc1Zrt9gYHr1jYyMnFi4cCFmzMPyjNkwiWcWAJietJaWFsT633NTM/Vsv5CVQ0JuAQnpmapiCg8PUvhqL4UHB3TF6Eb/GTA9PT0/XrZsGfzBKLcUqtkfIwCipmffvn33VlZWHrJrehLN9Qi5+eSdPktKzqNT/FU5ulBPF4Wu9iW0gsYrgpUVOfiDtra2b61duxamCBM1XVNkBICUXIPpee21154uKir6rlOmx8gsxUQa2XmS8Ele3zXsQzhM45c/pvDn1+KKuqH9yjmFiinSzEjqAcCiHsn0TJ8+/Xt2tZ+XglWb7BEE8l1/k6bM9RgRPN9JkQTyUlrO24gR+P706dPfXr9+/atcukJ1HUELAOZ4EfVkpDLqEa+bTWLONEOljwsXYaY+uyIxIRVziuHh4ZOLFi2CQx7iUthx49ADAKYnrampaeeMGTO2WJaAfINVjY9pB9o/Zz55/GmTQjThA6ICHxul4KXfEZlck7Cr8Wr3gQUnT55c8eijj/6PHgvUAOBj/szOzs5eJ0yPEYCqttnrI3/x9UQiiGj+iHJ9PEjBSx8QhcYTyvsYtazlV8ywQAsAhJ2BI0eO7Jw3b55t7WfOSWkzjWwoG7AnLZ18s0uJBHRn4lCz+ZpRUThEwY8uUGQUYXlih50oTsECFpbG+AI1AFjkk3n06NGn5syZU5tY1/Xv1otK1AAw6kvM6BwEQKtdo6jKiAVKAJj58RNRdmdnZ7eR+XEzmwkAvLNLySOIunG/JigJAJCQ7+I6BBa0tLR8u6amBhFRHAvUAJDi/sbGxp3FxcWuxf1GmoMxWGVAXJyXAABGTGPm1Uy51tbWB2tqao4S0QiXopBuVQIA8wOPl3ny5Mn/zsrKWmjUQCoYYDQTjvbZAQCcYMLQ0NCpysrKPyWiQW5BPw4AZn4Q82WfO3fuUzNaagQQ/73V+swyQHOnlAMA2LX9/H0wQ83NzStqa2sRksaYIZ4B+CyZn4aGhp3z58//rlH0ovW9FVD0yqbCBzih8Wpjev31179TW1sLM8RnSmNMUDT6eeWVV54uKSn5a6cEaVXzWbtmGKC7T9AlBtgZj5YZ4hkgrXYRUVZnZ+dlFv2YsfFm43qrgKaCAco+OsUIyOi2224rIiLkyqNZUgYAs/8BIsp59913u6wKKxFbr9WWHgNM7ZB1gQF2tJ+Nr6mpaeWTTz4JP4BoSHoOgQcA9j/94MGDO8vKyjZLIZL8ZEoiYCRyr8cfIO+ceTEzYUv1mQDADMMttalT+NVXX/3O1q1bAQBL0EUBiNr/l1566akbbrjB0uw3Ea0wcsJqqQjTAjEBgOm6EtxHhHYuXLiw6/7778dqGcJR6dEoxgAAAPufefDgwafKyspqpgQD0gLkne0uA9yy+WrAXrt27dRdd931Z0T0OfMDPACI/7NaW1tfzs/P/0O1CtzSdG0fECCfDIApm6+syEEGODH2K1eunF6yZMmf846YLbyAAdIE7Pjx40eys7PvsEJNJ8vyNllALihhH3CeIqPweeqHU1GOGRkMDAycqaqq+iYRfcYmZDwA0QjICbTNdMioTDKcsFEf8L1T8pBD0VkyANAKyQewtV8AkHv27NmPzHQqkTJCZjaRiKBLfgRxbJQiIwgMJgYb3XHmCAPU1wM8gQzypAUm2kO7WLQZHIhp340osLy8fA4RXZUZEFICkHf27NlLiQjXzL3eWaXypqqJ0mHF2i2rw+P1kTjnesLVzoGNWuMfnadIEPOe2MN73WzCVhd2YC/ReNfFmEJOaT5faXl5ebEMgDQX4AFIlxngKgAYlG9mMXmy8iYHP4TBfzihifzONqwJF5fFrAlbASKisiaM+gVRJGHGXBIzs6MPAYcHrtL4J7+3Ur2tskYAgAGu90IsnEliXsHkAOS1W5iBOE2dNZc8GTm2BhsZ/IyCXR/G3esRveSbW0bEMSt0pZdCvZ9Ey7qh/ahcBgAblpCUi2dAe3v7JZ/PHuXNSkmcNp2EgqLoDjfs5wxe/G108Twmt+QRyD9fe1+QXptjH3QShWOfV5MY4POTt/RrE75GriDU+ymFr/Q45nDV+hUMBqmiokLTBMEJ5zU3Nx8sLCysMCtMO+WwqdY7swS5jkkT0Pspha72xlUHgYnZeSQWzZHKmzoiEQp1f0ShAfi6+APsE7HTjh2RiGT/w0OYHzkX9Shb7unpefOee+65n4jAgDgfIEVBzc3NDYkAwKKYybFNRjXR6EYUJQ2M2e0QChF2sqkeeLFGTh55r0MAoX9AoyF82HQwSy3O982/mTzi5E4LsGTs/G/i2GLUltXvu7u7z9x7770MACzMRE0QJmLSPKCpqelQUVGR6xMxsaCIhGnTY8YQvtZHoZ5PNM0AdkeLBTM0nTKcbqjvUwp/jnmO+uGdPpOEvMKYL0P9lynU1+2q+UGD586d2/Pwww/jFTlggLQyppwJ57z44ot/v2DBgo1W0dUqr5VtxEZbX8lXo/MB6f7QOAV//7uJff5ahyAS5hEeUSDE8rBh2PcTGR+fMCEKm89XI4W1c8tIEL2TuyzQ5sXfOr6HVK37nZ2d9Q899BDexgINkdYEeACkrSg7duxYvmrVqhecAkCvHgG2uHBmbBGYg4v/J4Hh6CF6yV/61bhNXtJW9ivxvsfRtuXK2tradq9btw7vnYCziTIAX7PdEFk7duz4xqpVq/7TTJ7c7Jqxnjb7Sr4SN9FC7ib48QVbIKj2W/SSFxO6NFjZyQNMCwJsHdY4CUR5eflXiOiKDABoHpOORm4gg4imtbe3n3c7FMXApFhbEMk/L9YhS4NGaHrpA4qMjcQ9dmRaKHicyR8gX/H8uAgqgkzp+d8Qrsk4hoaGqLKy8noZgOiO6bgVMYSiL7/88q9KSkqkUNQJJhgN0JORRT6EpcoHMMJhCg9+JpkIs/s7o1EY8kjTCsmTmaNab7DrIkXksNOof058//bbb/+kurr6+3IaQpqEKZckpefAEIpu27Zt+Zo1a/7DiYZjKK/ztivMDcQZc2PDQ3YzwsmxEWlWK2lMJBznNKWw0iNIztU3q4TIH4h5eyKrKhwKUeiTD6Mxv9Nj1KrvzJkze9avXw8HjEV5KRPKA4D7orsitm/f/o0VK1a84Pf7Y0IzZXbQ6WyhJz1zQnjcbmjlgCSTERyj8OgIeQAMe01lWkCa4UZ07oWtD358kSLDWBFM3iHPgL9GRP38ahh6wE8to+vCMENHjhw5UFpa+gd2u2k7lyII0jIkdkQAYCcO9AUMGodPSeBhDbt96erqarvvvvtWKe2/EgC2LoCsaM7WrVuXV1dX79NbMXKaAdEB4uV5Wbkk5uZPxPrcwZ4PiFonlSdm+L2j4ZEhCl3rn5gZp0D46Ofp06f3btiw4Z/l+D9q/9UAYIvz2du3b1/+wAMPvKAXDdnWcrOqhBQE8kYzkL/yWHpKEjM0pJfx7DBLSZht1slycvRzg6z9MZuylADgbzYfgNpJZqikpMS2GXJiIBIDER35/CRmZBN5vROLOTBR/Bu6MRse+lyeEQ8Q0hLKp+ad6I/VOt56663n165d+0M5+kH4KcX/rB615wPgjCUztGXLluWrV6/el4w5gZWBifnXEXJJ/IFcDnI6MebKhXeMWuknZ36Q/0H6IbojTg8AZobwIoa8w4cP/7K0tPR2qw27VR6M8CKRx68nIKju66Zw/2XXE2pWxiWbH0Q/bPYb9+S8WpgRfToec4ItW7b8yVRjgREDXPdNJlE4fvz4Tx9//PEfyNlP1eeF1QBgG3WlndJITRw+fPi/ksUCMzNvmB9VE9TXbVI07heTtR9LedB+OF8p/698F7VWoM1YwHzBlGIBz4DokiJ8wBQBAMKH8924caOm89XyAfz/eV+QNBaYWVGb6gw4ceLEvscee+zHcuSjqf1qYSjPzTgWPPjgg/syMmInRu6TOb4FMABOOC4KmgIMgPYfOHDgkWeffbaJm3jFhJ58v/Xm+kpfkFtfX79t0aJFG6yEpWZsutUnbKYqA5DzOXXq1M+eeOKJH8mOF0kn9nJXS29LYSBJv3bB1osRlh46dOjFefPmfT0Vmo82JUAzc0jIzo3pQnjgGmEfUCqP999/v33lypVrONPD4n5b7wtiJoqfHeds3rz5nhUrVvwsL29yZ5veoM3YdKOVtVQK1WzbctSzQBY+NIEPOzV315tJN7IkHQtLc2tqapauXr36J8nyB1MlrtcCA8Jvb2+3ZHqMoiBlW7wpwtwgd/fu3U9WVFSsT0+fSBtbsfXRxlP8DJpZ7dYrB+G3tbX9fNOmTf8q230suBuaHqsAsN0T2LOIle1s5Iqee+65LXfccccjTjNhqms8Ex6E/+abb+6rqan5N1n4bLULUY/hKyuNwlAl8Cwqkl7eyoGwGSDYYYJr6wlOqLZBHZzw/10ONyF85PpZyGnqqSozPkAZtiIqYiDAHIEJEgh2mPBF0XZeCCrCh9lhwo9LN+hhaRUAxhpVECoqKmyBkASFdawJJ4Vv1QQlzIQvorbzg7569Sq98847sPnM7NjWfKtOWE2DWHgaZ45uvPHGRzBPsDJjdkxFXagIM9zBwUHav3//xvr6+lY5u5mw8BNhAA8gb47wUmdESJn79+9/vri4eIEdv+CCDG1XCZNz6dKljtbW1p/u3r27Rd5WwkJN/rfFbLVhxweoRUcMBGzsQrYOzjlz165dm8rLy9dhf9EXDQim9R0dHb+ora3dzQkeM1z26jFLDlfLjNhCTnETC1Gll73KcwWwIXPTpk1VZWVlCxcuXLj2iwACE3x3d3dHS0vL8/X19b+W3+2AxBoiHSys8D+Bm5D8nGAAb454v4AJG9iAU2LDTTfdtC4zM3NKsoEXfHNz88/37t17XM7nQOOZ1sPkQPimJllmkHESAOZTeDYgf8SAACMy6urqHr/55pv/EkDgSDUrVAR/QtZ0aDtOmBuklPkJlqlJVioA4NnA8keIkgAEZs9gA66BXbt2PRYKhcRbb731LwAGIqZkRU1M6OgsTI2s8bzgIXQmeFd/W9hpBijnCowNvJMGI9gJYPx1dXV/NXPmzK/n5+cvcIsZSqE3NTX9wuv1ju/ZsweCh7CZtsPGsx/t5H/U2TGtVwrJDFMSKcMSedIPO8tpDMYKAACnjZOB8Wg4HBbADDTKAMFnxhAtpkDI7MDnsbGJVxTgc39/fwcn9JOykFEAAgcAuDIb77rgnZiIWQGFMQ1miTlqREwMEEn43AmAcHrr6uo2RCIRD85Zs2ZhwYMKCgrK1Rrv6+t7W3JEHk+kq6ur47333msXBCG8d+/eM7JwIWAInT/xPyZ49htgjjlZIyG5aYL0wl7GCuYnAAQAkYTOsQR/M+bgivLsZHWgHSYwXJkQocU4YcNxMkEzYbP/K7XdFVOjBUSyAVAzf8xPMGYoQWEAMMHjb3YPXx8vfDUQGCDsysozgSdV8Mk2QWaZyLSaCZiZLKXW89rP6uZZwAuXNyv8LxolzczoDT6VDDDDSl7QrK/KKw+AEgxmntSuRkqRlO//H1bmexJ2WlSAAAAAAElFTkSuQmCC",this.PauseAudioRecording="data:image/png;base64,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",this.ResumeAudioRecording="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAHRNJREFUeF7tXXl4VNXZf2eSmUz2PUBWQEQQhIAKKmoVoRSVtdZaW1uVFhVFEXDFsnxFBbHtp4BaK2oRv1atigIuiCIIAiJL2DfDkhASspJlMpNJMl/fc8+5c+655y4TEvCP3ueZZzIz555z7vt739+7nHNvHPDf47xKwHFeR//v4PBjB0A2P7M5ByWYyr770UD/YwOAnw/+zb9QaOx3o3kzYeO7+Df/+b8AcBLghcoE7gQAZ/93vvhJayDghOSka1tj4q8mEmxtcQQ8MUPY+bx6R/q8G4MORzCyoWFD0OkkP+276Yo/4Vn0xYDh388rGOfLAkShM4Ff1+r3RbTmdH2iOcpzdVNQEW9Tayv46d/K5yBwH0kbbOl2Kt26HKHLiovArgHcleXzHRERrRwgLfS08wrGuQaAFzxKJqL/O18oQs/OfbIxKnoIirK+JQj+VlRabK6AQAROP/JaLxK87jOe6HBAHIJD3yP9jRudPt/6AzddMRcAmjnrwEEZnufEMs4VAGwcouko+EuWfXJ9MDNrhiJ0gLqWVqLZMmpBEPSCDcnHEgROlIgHWorb4YD4CAe4qiqIZRxQqAqtQrSMDgWiowHQC37piqFBqu31La2Cpjt0ouY1X6aaeuFTU6GaHxS4SrQeRlH47qmunHdg1FUIBFoFAoEW0aFRVEcCwBxqBGp8/tIVQ1tzcp/0RkUPUQQf1FyasRZLtF9AwswCjC2HUhun3wgCB8T/cEDwUVW7WkRHAMBHMhEDln0ytCUra4bXHT2kHp1pC3JySK8U8bIvmAXIuR+byZwvLxEjH8CciAinLDZFENKqyxY4q2u+3n/X2C8Fa2hXi2hvAHitdw34ZNPM+qTUxwz5nV6KOYeb879IS5b+QG2gtwD+XAQBfUVCdeX8g6OHoDUEBP/QLpbQngBgX+hgI/OXrrihJStnRm1U9FV1za28gnMarGi+3AI4B8sbiISQjXwA4X4MR6nJWALDe392mgMgzumEpIB/Y+Hw/JEYAQtR01mD0B4A8JTj6v/6Bzd4e/VdgTxP4nVhioICGv9Oo0Hp+dyXtgXLQlkuzrJ7LlpCSmQERFednn9w9DVzqDWw5O6sQDhbAHjhuweu2jirLjn90apAS4jZtRQv4XCZDzCwABMfYAy0YglKNMT5FiPFYImAxPIU31D+3OFx1zIQWKTUZhDOBgAN3w9csWF2ZXL6I6j58lieC3oMuF/L5wYc3UbtJ32b8L+pL+ECNgJCTdmCw2OvQxCQks4KhLYCoBX+RxtmV6Yqwtcomiba0ZKslvv1wXb48T+nukzjbfgAaZhqEaXFRURAelXZgsPjzx6EtgAQtuZrtKuN2q/VYEXYZhwuFWwb+J8NxPeHf6MlpLeDJYQLgH3hUw7Vx+2CU6DewtAiDAAzFj6NrjRRkCTDZgYj+oIwfFZ7WEJbAMDM1i3jfJlWqt+ZcLcV99vpwzKiMeF/03O1CbvO8oglKHQ0m/qEsKKjcADAtlT4G2dVJqc9asj5mmhFFuWImW/4UY/e0Yen+brzbVqsLm8JBiEu0gnp+wrGHJn0qy+EhM0yOrILAEuyXAAQnbfhYJVZtCO9OCOT10xRH/l0tPZb+RJkSJH/+Smz31JdTkjYvWP0kftvZyDYKuTZAYDxfiQAeC5Zs+OzEpfnSiFMVmZJNV8NPiyiIIeaCbeHBVDHzHO/Gv9z/Yucb+YDpI7eIG8JAnQKNG4qGXk5ZsyNNGPGxiLDaUa0CwBST1T+x+tnlyVnTGd1e6OeBbqVRix6zdNnzeFGPlJt1kzSJDOXWagF/4u+CzPmzMrTz/9wy/XoD/zcUqghFVkBoFJPn4Vv/rRuwJUf1Qu1HYZv6DrD53xzi6GabaS5fN3fRtxvyv1tyVsE34FOOXXPtjFHJ9+BVISJmikVWQFAimtIPb3f+3J2WUbmw0ZQCoqmNpNZifY7e7xvydUyujiH2s/PL6OpcVOplopC5QFBgGYAsKgnKn/5+tlVqZ2mYz1fKN/rajtG0Qk7UVePt4i7+f48Tgf0i/PAzWnxMDwlFrpGu8l0jjU2wZqqBlhZUQc76hrBT6ap9VK2wlTbFsBVcYkFateskYo6F3w37tjDd63myhVSxjYCgDlejHpicoWoRy9kvfpZa76iM4bthB96xETB0xdkwFWJ0ZAYiS5Jf2Dp+5szXnjiSCkc9mL5PjRTO/MRrdhO9KNuGuCnEwTIaPJuLr1xEDpkL1fC1k3aDACknqj+H3w1pyily1Rd1KMhGUUjQlGNcZyvikTo0Kh//D4zygXL++VA79goQ2fG/7C33g9jdp2AEn/Aotyt1Vw5zRlEPcxpC8iyj8QKdm4ef3zqhM/NrEAGAB/zx+ZuOFjBYn4jnpdahEb/RLnZ5/0sjwvevSQbLon1qJ2caW6BlRX1sK8BAw2Ai2Oj4Oa0OI1l7Krzwc93F8FJCQiW/iTM6EfTHxUSvnWyYQVGAKCNe/q8vWpOSVb3qWZqJ2aGPNdL43wZFgZ1ftzKM7tbBjycm6qe9d2ZRrhtbzGcbsKNC6jBSr2/kysC3u2XA5fFR6tt/3yiEmYWlgG320W+vSVksDbXK0LOwqxqK1gBC0s1eiwDgEU+sRf832ezqrLyHjJKJaRexULzjc4h3ws/proj4bP8XLgoRqGew14/jN9dDEcbMbpTDv6Ubh6kqlzoEeMmv+1v8MOIncehnIJlZKlm3G9uLYIlc9rPxrKyAhEARj94BfE53xwsq2tpkXK7NhwSP4VQEIqSOiGbRSeDEqJhzcCu6jrW0G1HYWttY2iFSxL3D06Iga8uVc5Bzb8Oz6lrDAFlEXWFtUZtY5cGWkHG1nXjih6bhBGRzgpkAJC4v88/P51T0qWrGvdbabuxH1DOnJabBpNzUuCQtwkmHTgFhxsV/pZpPhtrUnYKzO/RibQrbGyCwVuPQiPZsijP7xHsaKcDtg7qDt2jFSuYfrgMFhdXSi2G76dndBS81jsTesa64S8nKmD+MeUcYwWx1n52ftbW9beefGLSZwDg40oUpH8RAKQfDD1j8z7b+skZT9xgXeBvuo+HC6QZRVCNK7n6IoiNcBKtfPDQKVh6qiZkJvRCxbPnXpABD+Uo/L+xxgujdp0APy55Ms3nUmimuS4nwKf98+CqpBhy3l+LKuDJI6fNuf8/ucSdmUnw8kWZgH6noaUVktYdYFcg2b1hJ3oKXV5nf8OW0psG3wgADdyCvg4ARj9IuPEZ6w+U8ns1NdLiPsgtQx/lnPlJb/WsqYdL4bWSaks6eq5HJ7gvO4Wc901NA4zZVSTdacFXLN1OgI/758K1SbHkvMXFVTD9cKlxvkFnNTErBRb27KzO0f3VPvvaT1XdyFqinA5I37J2fPETD2BIqqEh3gLwb6Xs8NbHc07l9HiY7dvR67URHIJmcCeeuU4A4GS1auKP5qXBpQke+MvxStiCHE8tYgEHwPrqBhizuwiayKK/cZ7hcjpgRb9cuDaZAlBUCdOOlKkTvjIxGqbnpgFGU/OOV6hCvicrGRZe1EVt5/pqr3wXBbXocHfoZW35+pcnZzyANMRXSjUUpEY/3d7+dHZ1VtcHeTGb+4DQr0btdBZAAbghJQ4+7JdDhtpS64VbdhVDTbOyrYUHAC1gNLUAzbyEEIYAIFjAtMOl5JSkyAj4qF8ODE5U6OmmnSdgTXU9scSJ2VoLcH21T0eRyheSHMZG3mBEQ7wFkNUuXG/O+ubg6foW3G0h6r6E40VjMIgyajkLeBgp6GQ16R1j/DndM0gvBxuUDLbYr8T4hhYg2efDpqGzgOJKmHZYsYBsjwtW9suFXjSjfqrwNDx3rIL8dk92MizsqbcAXU1Jcn0yhhAVEWnIP7QPRhR1fJWUAcD4H9PNhMSv95eYkIyBZsjPYFGODAA8Y3peGszqlk5OPuT1Ey0v9il1HDML0FJASCsx7DOyAARgVb9cuIgCMLPwNMw/ptCQHoCQBYj2HW7ewCSTvXnNLcVPTUE/gNEQuQ+BBwD5P7r30o/mlOReOEUav3MZo1BsVKVvREGGAOSmwazuFIAGP4l0TvqbSYa74MLOgKEoHugDRu86obmJI0QIIfDRAlDLRR+A15ODAPTXAjDvWDmx9IlZybBI5wP0Pi1c7ufVMuvb1b88OXMqAsAKdCoAKv/nvv7BrDPdez3En2g3B9AIRDjJCIAHclLg2QuUWB8zV4x0sIimoyD0AQVFEAiK94dpOdnMAjLdLliZn0tqR3g8cqQMXjihxPtGFhCu9suUgskys7jwxZI7R+NqGYaj5NYoZgEIAPJ/bN4/ls+qzus5Waz7G30WNUIkInYBdRIfgG2zoiLh3b450C3GDa8UV8Gzx8qhCZ2a1AIwDNWubYjKYWYBUREOmJGXDpNyUuAHbxOMR7rzY1lDbwGRLAqS1PvNlNNMWZPrq7dUj73m5v8wbz3zAzwAqBZxOR9vXHkmIXmQsQ8I/aIOZjKqGQDsN3RQEQ4HuWumBTWcDoE+QKUgagGh3EQSjWAWKVJQcSVMpU4Yu410KPeHNQfxRsDQxGUW0J7aj2PH1lZ91zD+2lG8I0YANAlY5483rfDGJ17OO3s7YLA2ZmEovYsUHjp0CpaU0ExYuqarOBszHyCOwz6jcFdiGErzgEWYB3AAaIUaWtmamJkMi3spURDi4l6LeUAoRT8b7meyiW+o3Vo35qrRAFDLEjIeABIBpa3fX2J4t6INZ2DUZNPl3aBvrAd8rUG4a18xrKhAK9Qe4rl6Cwg5Ydk4+B36AI0TFixARpl43pj0OFjWJwdw2XNXvQ8GfldIJydYGh3YSAHMlJWGopkUAIyEiA/AF6n//6d0khi/dl9xe2g8bxE4ADq+e7NS4ECDH5acqiZAEAULBmFAfDSkuyOgoM4PZU0Btdr5vCQK4mmDU1CVtowsgFl0J3cE5MdHk3F21PnVtWMs4k3MToZe0VGw+GQV7K5H+dir+YRTKYBhfbMBAM0fSxItIgBJ8Wv3FdkFwIZBqFZs1Gef2ChCGbjOu7yiDu4/cAq8rco29+cv1PqAUQX6MJSBwPo3tIAgQEyEE/7WqwuMTU8g2TauFeypV6qycgptP+1XBxjWF9N+BIDkAjwAuJSUGLd2X5EY7tsFRBSGqkJc9VJz75bDAZOzk2FeD6UIhtaBsT5LxJ6+oJO6GvZtjRdGFhxX8wBNAMBNGB9T8Hl+qBr6/PEKePKH04TMsz1ukgewtWUs0r1QJJSdqanIVrrsZLyWsrIAAC3ghFSQlj0rDexYBd/m7swktQRw3BeAm3Yeh8JGJQ+4NysZ/kIrlLj1BHmZrQcYjeVxOqFg8AWQ58GqOpa+S0l4iweuEXw+IE/97b6DJfDayVBZ3CrqkY1p53o1olMAOEOLchILWF1QBC5l8maH3SgJNd4h3rHCWcQ1STHwWX4eGQoX23+647jKv5cmRMPXA7uSEBUPBOfLasxhuEPQ2GHJsbCK9oeh5jXbjsK2WoXPcU/RlwPz1MX767cfhW9qMCk17k+/88++ounkFwgAjBxgSEHohJOS/r3uw+bU9MusADDSQNl5ZloSH+GE40N6AkYI6Jd/t/8kvF+GCgKQ6oqAT/PzoG+csiPihC9AKAqpSjxwjN4xUaQOhCUHPPbU+wigFQEsuwDc2ikR3uqTRaIODAIyvzlInlGhnZ8kv5BUO8O5fjZXd1X59023Xj+WWoDOB5AoKO39dct9KemXhTSc/cW6ET7LdiNLVqyMdsZhrxsv60YiITw+Lq+DX+5R4gAU1FPd0uHJrkqtiAn11t3FBAwsWuPwmFzl0u0rDCxsO/dYOfypEFfDFPZ+v18ujEqLJ/18X9sIV35fqLunrT3ifSPlja0o3dpw2zAGgCYKwlIEyQPS3/nyI29Gl8vtWEC42q5CKJgElqOn56USMWGYidSwo06hjU7uSPhX32y4gtbw8TvU2rXVDXDYq+yO6BnjhuuSYwGtiR24hHnbnmIoozsiBsZHw7pLuxJLw+HnHyuHPxaWc9ov13yZpofN+3RSiQd3vXTm/tvxETlo4mRlTMyEE9JfWPZHb7+Bk6wAUC1EsACiUkLUo98xx3pXMtGfJMfCe5fkqAL8oqoebsHVL3qjN4aoq/PzoH98aHOW2fx21vlg+I7jxKdg/1FOJ1n0GZ4SR06rbW6FsbtOwHrk/3as9VjJLP3Q7sXlk36FT2PBTJjsnOYBIFtRujw6c0TtyNuWWnUWjhbIC3ahHqIjnGT32w3JioBwJ96UQ6XwdmmNqqG4EffxvFS4MTUeMtxYOdcfuP/nk6p6mFtYDhhRseO3XRLhhZ5dyKYAPFZX1sPPdxfTiEqMfehZ7cT7/CxT93y/qHLKnfjcCSwDqBaAbdhuiLjsaTN/VnXzbctETdZ85tZk+SU6OxmhUfTU3eOGLYO6k9s/8cBEadyuItiEWkr330Q6HdDd44KxGfEwJi1B3YB1xNsEy8trYXl5PRxt9EOACE8ZaUhiNHxEEz0G7oDvfoCjSF8G+3raJd6XaciwvhcCAC6GIwCoIZpyNKoVLpYmx6wuKLQTisrGMC5PG2ga18k9WSkwr0cnUo/BAx95MPngKfiwopZESFKrM/geexiTEU+2mmA0hQdGPo//UAqLipQNAUbru6FftFcYjtXrZNPoBRg1qDsFQN0xrVsRw1A04a1P3m/Oyrss9LQRqhM0nmecrt/7qdcd2/kCvfn5xZ6d4fbOSer8kcc/LK+FmT+UQ1mgWUXBqF/U/E5uF/ypezqMzUiAZG4r+7LSGlLqaODuc+jIqIcHwbN/5yu+yb95hpYhcGeEbkmS3AeGoWjKw0+M8I2+43Up0eqeOiK1A82XdjSHtcFSwpKLM2FsWoL6FETsDHc5v1hUBV9WNZDIBh2pP6gszmD2i9TV2R0JN6TEwoM5KZAVFUom0Zl/UF4Ld+0rIStq51TzqSRSd215qXLqBHTAuChPKqH8mjA2U3dFdJky42c1I3+xNBwaCkfTNXbCn0g5OSHSSXbEPd41jcT4/IG0hDlAZaCFFO3wiHU6IcUVQXIBfOcPzIafPlpOaj617FkWEp0RlcTu9RgpqeZ7JQO+CFmVXw3DNvzVqevCCg2tei+Q1e1S4wHkem1H2404lo3F+rg6MQZe6NmZ7GLgnwVq56JR0zFjnnzoFGyoUTZ7nQ/Nx1HdpSe3Nf1mxC9E/hcBYOsCmJImpEx5fETj6N8uEV2foLCWxTdLTaINjHZhdHJFwrCUOPh5Bt4XFqehJRkQSDeYR7xXVgtfVCNd0XCUG0f7zDo5nHYVyY4yJBZsfvnMtN8/TeN/lf9lALDF+fguU2aMkNFQWyZm5xzDNlyUg3H8uIwEGJ4cCz9NjVOjG6SjzyvrYXVVPSwvryOba7X92c9yRSu0I2DTNkr004tqv2ZTlggAfmb5AIajSXFvrXqvOaurCQ3J905rJiTheNl9wfyFa2MpbQcsvn+7TxYpruHxbtkZuH0vXciTjCcTUIdyPjegZ+/2V30P/XYejX4w/CTxP2ui9XCh5UmFhu5/ZIR39K+X2HXGdjTdUsNoJ2Z94W8iAL/ee1Kq9Tp/Y9F/ONdgxzpSCza/XDnt91j/wfKDuiPODABGQ1gXSIp7c+W/mnO7DQyX+1VB8w8vFJfaOFWX+QpcXhyaHAN5eD+w0M/dXZIAC2x4bK9rhNfpLgu+nxN4/3B1g8kjkUMibG/Bk54V+sHoh2W/ujvnRQtgNES2qZOc4P5HhqMVBG0s0hhphOXFGWSzeEP2sj5ZZC23LQf6gl/vKYYVlXWaBM4OJbVlPPEcz/aNf/M9es+ztPopvV9YBgB+x1tBcuybK/+JVkAGMOF0HbdLiip6TZfZllIlfSQvDZ6h2xbbKpDHj5TBAu4+ALEfS+Vo68CK9l/MOV9S/xdXbWUA8Fag+IJ7HxneMM7aF9i6GBscz3DGdV1cwbqSWwsIRx64JnDH3mJSGTWam605hzMopR7Pvu2v+h6719D5GvkA/nupFWh2CxhxOvc9LbeHkS8YW4TR84WsoqpzRTlsHM+2b5f4Hpv4PI18MPSUaj+2N7IAqRXUj7p1CUQrd5dYHpxq2dEyqzb630Pf6H47x5GORhaNXkhZ9d6EqlcWrOESL03oybc3A0D0BYnx819+1N//yj/wYWnoGRGsW6bB4mfle/kzJXjDU6SnCtXE5+hu4DHZFmMFsKVC2WkQCICnYPPffY/f9xx1vLiFgz3cVToFMwCYFbBtiwkYlsa8ueKt5tzuA7RSsrcfiL8GOwJpi9ZrwBOEZmdMO3I2auMqPLQ9MHH8HRz1sLi/Tc8LYhTFZ8cJiROnDfOOHP93SAjV7M0mbfQUFTGc0rbjeqQWYHrHzvnWfOp4YdSgfCp8TLr4sNMQeysLYCCopWqyfXHCQ0P9437zil1/YFfzzDReqtk2/Izdsc9G8zHh8uzdFhb18KRrZ2zyj3docoYZcmLcsy9N819y+e+D0dG2niWhDMJ8gDHHszxDo/GSGZqFlXbWpu1ctK02KPw937/me2LSnynv43qvJfWECwDbPYHLTJgh4+6mhNh5i6c29R00IWg3MhKYRX+BWrFKhfxj0XpKO57dW5f4nrz/r1T4bLULox6cqaUB2qEgHizmDzBBU0B4ZvEUf79BEyAav9InBpZRD58oCM9eCzfKOeearwj/f2m4icLHWj8LOS2Fz/jdlqXRRmzRhjxBF9fRqSVM8fdFEPQ5gvEsrBifjmhD480in3AuznZbpB2t8JF2mPB15QazfsOxAN4S0B9oQXhm8RRfv8sngCdGZghq0GP1/CA2CB/+yy7A6nfbwgy3YTsKvy0WYAME0RLkNmBoGTY1/pxrPQ5YWwOeAwU87bRZ88N1wjI9kdJRDPqEHhdPgPgkALfL8D9q0KDIcp+POLAtYg1Xq63a466GxgaIWfHOJO8bC9fTrSVnLfyzsQAjS8BnxKBzjo169d+vNmfm5ptGSII07QjXThsreYb1e6MXXCUndrq2rP+b9/UX19FtJSzU5P+3WFjdtocFyEDAjV3oidE5x8Y8vegBX+/8u8HlBuag7XK33XZtumo7J1Gt9+zb8YbvqcmLOMFjhssePRaWwzWiETvTsWrDCnfkYa80V0BriI25+8GroXuPwb7+V9zJR0l2NNlOG6uJhf07FbyrvHSna/O6V71vLNxAn+2AhTWMdLC0zP8L3LCH4E9oSxRkNCBL1liEhAkbWgO+iDU09uhzN8TEqtZgFN2c1RW19WRe8N+ufc37j8Xf0noOajzTeqQcFL6tJMvOVNoTAOZTeGvAew4YEGgRMTFzF97XeGHfuwgQeHC5w3nXeEXwm6imo7bjC+kGS8p8gtVuU21vAHi/wOpHmC8gEJi4oTXgu8fz9KJ7obUlwtez3+8IGJEusLv9xY5mmbah2o5tCNXoBY9CZ4Lv0P8t3FEAiNbAaIn5B7QKfCEwbs/chfe0pHcZEEhKzZdZxlkLHDsQhB65Yc0bjojIZu+bi1DjUdhM25Hj2T/t5P+pc7tpfUf5ADu+gQHBrAIBQFDwxcCYCMFWJ7EMPBhV4d9oJURtDe5jRiGzozkAEKCPOA4EwFVTuZMT+mYqZGyAAkcA8J1xfIcLnqeKdlEwi06YpSEtsQQOIyYGCBE+90IJ4yvSM3fhH8ij1YJBR0t6Fi54QCA5tb9sPFd1ZQH53gHBiPKSnY5D+7c7HM5W7z8Wb6XCRQGj0PkXfscEz/4HWLs5WSvhdiQFycZm47GIifkJBAIBIUKn7wwE8i/R6QvbsxfrA8dhAsN3JkTUYnwhh+OLCZoJm30vanuHUI0ZPViB1FG/82DwliGCIgofP7NIi58bL3wZCAwQ9s7aM4GfU8GfawqyAlG0DCZgBoyo9bz2s755K+CFy9MK/x+NzhnNmF38uaYgKyAUBg8dvKB5kMR2jIZEMPjvz6umG134/wMUEUZOJOLsFQAAAABJRU5ErkJggg==",this.StartAudioRecording="data:image/png;base64,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",this.StopAudioRecoding="data:image/png;base64,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",this.VideoCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAk5JREFUeF7tWL9rFFEQ/ub2ko2e8fID0UoQo4EYInK4WqRY3TRpRMSz8R8wleBfoGUa2/g/WEjqXMJpTKKX2FiE4I/CgG0UvRVdjCOvOIhw62WTvceyMw+22sebmW++b968IQhfJDx+KADKAOEIqASEE0CLoEpAJSAcAZWAcALoLaASUAkIR0AlIJwAyW8BrlR6woHCI4AeAHCtAMh4XoBz9+jS2ue07SWWQHjt6g0u/JlP25FO5xHhaanWuBO3b2eqUi4SjR9f2FjpdNbe/8kBuO7dY8JcEiNp7T222GjrLz9EIVz2tojxuLTUeJLEXi4AaAbeOwDniDEjCgCeHnHDaOgtgPMm66IA+Do5OVh0o5cAxlqUFwPA9+lLJyjqqQGY+KegSZBAXPAiJPCrl8puxKsALrSr9LmXAID3ptrHXXMSAPjvFa8A5L0IdurwlAHKgJy3wioBYBvAabHXYES7Ay6cDWaMiGyEzDygGVw5CfCL1gtQ3FvABNz0L5+CQ3UAoyIBMEF/C7xhB3jNwFlxz+FWwOz7faHzYxPAGRGvwXYzQQYoDLyPBoTcd4KxQ9Fq1Ql3Pn0gxmz3Z4KBd5OBZ52akrT/G5v9i41bceeaEZnT9/tif+2VKY77Xomnwlwd6w2/lGbBdN/MIfdt6XAb1x3avX2k9sY0QqmuAwfAvl8EYL6uL6rXf3bLyIEB6JZDts9VAGwjnjV7yoCsZcS2P8oA24hnzZ4yIGsZse2PMsA24lmzpwzIWkZs+6MMsI141uwpA7KWEdv+iGfAX27gEVDXo6xBAAAAAElFTkSuQmCC",this.VideoPause="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAS1JREFUeF7tmjGKAkEURJ9eQgwW7ydG4iYLxoqBIOIFRQTvsKIOGigmhWOg3W/imp751dV/uh/TofKrU3n9aIAJqNwBl0DlAbAJugRcApU74BJoGYAfoB+OsQP2obYHDELtAdgCp1D/IGubgDkwDh7cvNwUWATaRjIElkA30G+AyWX8Y6B9krQ1oCnoN3zwHzALtSNgFRqwvk3Cfzj2WxOgASbAJWAPsAmG3devgJ9B9wFuhNwJhg3TrbBnAQ9DngY9DssDMiIkEJEIXbmkSCzcZMkE7x2QCr8Sm7t7pMJSYamwVFgqHDZSqbBUWCosFZYKhw1TKiwV/hIqXP1PUtX/Jhf2tM+VtQUin1tZ+GYaEBpVrMwEFDu1YWEmIDSqWJkJKHZqw8JMQGhUsbIzwOTKQeh33/4AAAAASUVORK5CYII=",this.Edit="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABFNJREFUeF7tmE1sVFUUx//nvoEVBRIjxI+dDTTTTKcEjJHYMh/G4AJjTOqSHe6KbYfQYIwZjVE+HFqscaExIe4UY1ho1OJMB4qigQamdPgq7BQT1IhQLJq+e8wdW2zGafue773b18x9u8m8mXv+v/M/5557CXX+UJ3rhwFgHFDnBEwJ1LkBTBM0JWBKoM4JmBKocwOYXcCUgCmBEBPgbFZcvPPNI7a0twrQT7/LPz7f3Hdq0s+QQ1sCQ9lEZM0EbZSS9gFoAyCIsde2In3xtwZv+AUhlAAYoHImvYkh3wBTEoA1LXiCwe8uj0QONe0/dt0PCKEEUO5ONEoShwE8rjJfJfQ3Br/PYlnODyeEEsB459Mr7y778wqAtXNkeYIY79zC5Gtee0JoACjbF7MJK5Et2gTwWE8yzhBfAPzAXFYXRB3NufwnXkohFAA+7uiw1j/0a1wQtjPTR7H+/HcKwvnu1FNEGGCgsUYpSBC6YrnCwJIGoLa60ZsnWoXF+8CUBmiEiTOxhvaTlM3Kck/yGQYdYGDdLKE2gJOWZe2IHjg2vqQBnOtJr7PA7wFoB6ZHc8aoAPVGV7UNKgjKCSA6PF0OEsQFQXg5umLLafX9kgVQ2p14mKbElwQ0V4lgEJWExJ4ZCP/0BPoKwFUi6v65wT6bzBanvIhXv120HjAt/nsCHpxDBINxngU6Y7nCsOoJanf4KzK5JtpXvKY+exW/KABUzV+4PdwkmT8EsHFhEXSGJXbONMaF33f3hlYHVMTfLLbYJHJESDkMVTnh7V9WyV1+WL56Ta0Aypl01JY84Eo8cV7a1NvSXzjrl+1nQ9AGQNW8mBJHndn+XojHpUTP5R/vKz1/5Ija+nx/tABw0PD+I4yBsgQ9F1/ZdtXrVjcftUABqJov3RpuFOBPa2x1c8bFwHWOyMfi+4s/+J7yqj8MDMC98VbgIIAtLoSMyIh8Vof4wLZBdbAZ7Upt+He8dTZvMKNgCepszuUvuADm6dVAHFB6MbleWPQBgM1Oh62KeJaZ6OrEaJA1H/g2WJntmT8DVU5wTgGPCKLt0Ya2SzrF+1oCyvZjXU82kZBHq05u81pUZ8OrFYjTDM0rQl1g3n/b2sDMfa5sD5Q5IrfqaniBAKiMtxPHH5WM18GkxtvqO7xa66qDzAkb9ELrwby6+lq0x7MDyl2JVilEP4AnZt3ezieIMTPerm4/p7vmfW+CY5n0bmZ+00Xmv5USO4Mcb93YybMDxjLJV5npFUeLMsal5G0th4auBHGwcRSD35OgQwBMwPgUaNti13wAJbCgA9Sd3SlIsSPW//XF/5OlIH8TdAnYIB4iiJeac/kzYbH9bKBBAlCZHxaCe2+s4JEgbnP8cIZnAOVdqRQz1zjtiTtk24O6Z3u3UDwDcLtg2N43AMKWEd3xGAfoJh629YwDwpYR3fEYB+gmHrb1jAPClhHd8RgH6CYetvWMA8KWEd3x1L0D/gYYxqhQW3njMgAAAABJRU5ErkJggg==",this.Schedular="data:image/png;base64,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",this.RotateCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAuxJREFUWEftlT1MU1EUx//nvX6YUjEG2mKRttJXQlgcCH5MBEWJn4ORxUFDdHHQzUVHYxzcTHTRxI+44eYHCgjGwQEDbgTpA2wpX22FFKTavvfuMa2FMIAtloSld7zn3nN+53/uOZewzYu2OT5KACUFSgpsVgG5yldfY0A0E8QRYvJm2pgZE0To0XT+ND+lzgAwCm3vvAAuT91RJpFMcXrESjs6AL4MoJrAQQZNZgEIe4nhBxAG+JFJSz6dnp5OFgKRF8DpC3QTaEEwCwLOAhiCxLclNo2adHkxE8QwJ3cKw6wIwi0CNwH03KT9vFEIRH4Ab+AzgCYgM7Sox2Ikz0UikV/rZacoijWhUycxWphxMxYOPsxXjkIBDgOIMolLRPJMuSxGVFVNrQfR0NBgiS+nuwCqMJnEmemxsWyZNlqbAUgy4wcRBoSQrsed9phzPtECBkUrdvVhcFBbCeLyBFqZ0Anma9Gw+qIoAIdHaQeoasUJEaZSnOq3knUIgC+3H45WlisrELtra3dZDPkUIM3Ohb71FQWw3mXnPuU4BL1fa2PQyVhotKuQl7/2TN4SrAvgU9rA9G6tTQCn46Hgmy0HqPQpzTLInZaMtwvj44lsgMZGszO+qALw5AJGLIZlf1rWmhmoXoVgMRcLq51FlcDlDVxg4AEx2ufCwd5VZ42NZkd8qTXTno4yU290mSsk6PeZcZAIFQBsTPgS+x48UBSA2++v0XXpFQMLjjJz2/DwcHqjGbBoSPWAcEFIzwCu2hIAALLDW3eVwHeZ0O+wmc//CyKh0UsCTmS/CMLXohXIZOt2u2262X4P4IsADxDkO7Ksqcu6vpSx22S5XBimwN9RjEMAXhOREMzOWCjYUlQJVi5nIDSzvYPAV3KPLwggkrUzakCoI2CWGU8swvI4Lf+uh0T26ITavSUAOSey2+936xo1Q8IxMNVm/0JQmMAfALlvLrRnEvioF9qO/zUHCnVeyLkSQEmBkgLbrsAfyPcpMDvN/okAAAAASUVORK5CYII=",this.Submit="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAelJREFUWEftlU9rE0EYh593NxtKKojEJCXUuraJAQM9mEv1ooLiUUHBz+DFk170UJRiezEWPIiHoi0ifgDBT9GjkbQhNZBCk9SGgBgo2XkloBDqn/yxJiA713lnfs88886uMOIhI87HB/AN+Ab+WwP28VQqtJvPfwH0T9+af2HAjp5KpTHmmnre21q5uDlMACviJmeBR6KcF7hTKW2+GRrAxFQibSx5jDIHrAW94GK5/GFvKACxqeS0wnOEs8ArQyC7W/q4M5QeiEzOJMS2XgNpFVZEWovVra1qt/C2mV6a0IpEzoRqtVy7o38a0ROJGSxrDfQcygttOvd+V/ur9V0BJtzERaOSFdGHlU+Fd4D3fSOJTE4nxLKfIVwCXa2WCrc75nv603cFiJ5M3gCWgYYYvV+JHn3P+nor7J5O2aoLwBWB1fC4czeXy+33lNpR1BWATMaJ1hq3EJlHtCmGB14gkLeNWUC5rJiXlsPSTqFQ6ze81x4gHo+HWoEjNxGdF9hXYQPlAuhKq8XTve1CeZDwngHahbHY7LiOfb0O8gQIt6/F82T5c3lje9DwvgDaxa7rjjUJXMVYcxI02UG1dwJ374GDx8tknGP1eqheLDb+5uQ/1vYPcBipfb2CQw48uJ1vwDfgGxi5gW88aZkhHj/UJAAAAABJRU5ErkJggg==",this.PhotoCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAg1JREFUWEftlbFrE3EUxz/vd5dUJalQEEEEEaSLKAh6IIhIU4QK4qAI3bRODg4q6uIfoFLqpotSlw4iDg4iiqkotGBbEUEEQQQRBx0UkmBNk3tPYlt6zWB7SY4u95sO7t37fu5zv987YY2XrHE+KUBqIDUQ24CBzB7etzWs0R09wr6n5XXP33wVsDhHOzZAqRD0Ctxwws5okGIfLLTL3S9mPnYUoDywZ5NUM0PAZsQcyG7gAJBpCqqBTQDvMFHgu/n+aP7Z5I//Aa1ooFII7gBn4rzVUq3cyxVfn24LoFwIJgX2NzVpfOdfBv90C/QCPfOXy9Z0rjgVdBpAEe4rcivj7Fujec10i1N3FhgEXCQwEYCnhHbK4Xz17S4mznk6FJKpitZHMY4kCVA15KI4nUDlbVStqOxVTwMxuQl0LdzruIGSmR11yAkTzi0DMG6Hno45dY+BjYkACFQwPWnidgHXmwCummMG4wGQTwQACIGR0PeuefX6Q5AGSGP2vVfhuIMrwHnATwqgMWc/O5ELv2f98Q3rawcx5E9WXmVr2i8mw8D2JDfhYu+SQVHg0bwAjgn0R9Qv1rW/CSuFoAj0tTQJjZe58alDbQ2iSl8wiHDJlnb2qlgESmDDueL0WFsANrCjqzzXs008za4qeaHIQjeXz/78Ik8+VdsCiBPaSu2Kf8NWmsZ5JgVIDaQG/gIlLskh19p0BwAAAABJRU5ErkJggg==",this.SubmitGreen="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAfdJREFUWEftlcFLFFEcx7+/N7vbuhIhQnguIWihoC7WRYM0ImcbXB2vnYQunepSB7cQ9dK20CEUxJSI6LEujgvLQn+BIHTxkF4NFoNiwQhn571fTJSEWLO7ygoyc53fe9/P+7wvM4RjfuiY8xEChAZCAyfTwMj7EWP31G7CSTk7IPD/vjVHbuB3eFJpcZeU8a44nN9sGUAmkxGrlz9eEsAzANeJ+MGKtfy2ZQCmYybZi0yCuIeZFj0vMlW25deWANzJD50joV8BuMJMrz2mbHloqdKSDqSWU91aizcAkgDmhNBTTsrZDgr3zQSW0L/X9YvrCWnLnYNU3i5Y5w1gEcA1EM+0ubFH/5o9aH0gwGDB6gOQJaancS9SlLZUvzZi0GA+3Q1DvQRwA8QLbW7s/t77Ov/zgQBmwUozkANTlQ31uFLpKq2NzXpmPn2BDTUBoJ+AhXgt+lDa0q0zd28sEODqzFi06+z2KAHjAH6A+InW4pMheIIZNwHMq1p0umTLL42G19UBf8hcMROsxDCYxkHsQosNIu5lYE5p8aKUXtpqJrxuAH9woDzQHvveboH4OYBOZspRtJYrmsXPzYY3BOAP983fi58+U73FQvcoN5ZtVvvfwIEd2H86vxMdHd8SH2xZPczJ/6xtGOAoQg9lIAQIDYQGTpyBn92kryEPk14qAAAAAElFTkSuQmCC",this.Refresh2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQbSURBVHgB7ZhfaFt1FMfP+d3cpE1Z12Rb4rKYpl3SrVZasCCCQ1R88h+KMnwQBQVFQfRhwhzoiwx88XXsQZwKPgxRhij45J9tiCIbslln20i7pt2aphqXknZNcu/x++tuoYTpcm8ydOx+4PD7d3+//P6d3zknRD4+Pj4+Pj4+Ny9M7YOjmcymUI13WMy7WOR21MVsIUspOW8znzbZmo50ds6PjY1VGzvH48NdEl7duTA1foZc0K4FqG2pzJOK+RkhugPlW64y9irkdxL6SQx6vzg1eQJl0Q2ZTCZUrqsDJBJeOD/5OrlAUYtE+vs3x3qzR5n5KGbzEKq2O5O3IZYjOh+C3IaWZ9mm72Lp7GHdF3VGucqvYvJvMUkHuSRALbAlPbBbWXQIG3mfUyWYYA7pN8hNMvFfukZIIqgbRNv9SFPOly+YtjGIhZzTefKI5wWsHXtNjiB7p1NVEZG3VUCOFHp6SnTqVG3j90NDQ8GFSiXKEtiHA3oFVUFMfA/SPdQCnhaQTCY7yzV+D9m7nKoiJv9ycSb3KTn3uhFHceeJ7t0fT83lheldlA1qEU8LqBqdDyJ5zCkuic1PFPNrSnlN0unpwIodiOMU2vKAuFbiRCIRhsLuRTYMsbDzB4v5iaYmj93H5M0XhfkNasMDonF9Apc5HA2IrN/bnBjGsWb6pdPpjorMvgmdPkBtxPUumIbahSSh8ziJM4tT4xNNdFMrYu7Dq7Sf2ox7HVD2MMmV6ytCP9I/KO1GEomBqEXSh14f/Nt3GOgHconrBeAKxNfzUMO5ZvpcuDCxiOR5ug60qkjX3P3rjesFwNwX1vO4QjvoP8b9FbL5l3U3TcTWVliXvJ4E43UKVatVBWR2dvay27Fcn0DdknNILq51Zh7Z2r87Sx6J37pzaFnM7+tmVx7G8WSsry9GLnH/jNbDJTyfJ3UeW5VVlvUoeUQM9TSSEUgU8luwViuTS1z7IpVKoRbujmgb8DBphwz+UFdP5HjlUinf9CCjo2Y8tGkvduAdlEzIMuTgxfz0WXKJp1fIrC9/CRfic6fYjWE+i/UOPE5NBEjaIscWy6+hv3YGdYygN+OLQK3yFXnAs0OlPdKa0XEcdmHUGWeJGUFJgD6ezyVLRN/WqWHiS/XgFiMgh7DzOvDRp68V9uegtXI3FHiFPNCSR7i9NztoCR3GKPc4VdpGj2NRXzPbObHVH6IQQJLE0TKCtgfwzdYNv35C2fLS/ExujDzSsku7OZWKBFXoQ4RdjzQ02Y6wIw3XVY6tSvW5SzMzJWqBdgX1Rqw38xTmiFdFdFC/7Spj47pwAYbwNC79R4XpiU/oygJboq1/qyBI7w7VVdJaC955GKeiFyIwGAVYvbO4S7+umjL3Zy63RP8DN8THx8fHx8fH50bnbzilXEHX539GAAAAAElFTkSuQmCC",this.PlaceMarker="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJ4SURBVEiJpZVNSBVRFMd/Z+bNvDHy9YRUqHZBbQwVhUqFsE1tIvrctguigiCopUsJA0Eoilq0qkURtalNKVRKtahMDSkUgojQEo1Xvg9nThufzMybq086MIv7P/f8f+fOvXNHVJVVQzpaA+SwQJtC2wxzjSlSs4JMOsjNjI7eW7XcCJAmN2BTD3AZsMvyD35Fpnm4Iz7BgXodz1UPkO7NAcVBYFc8FQcA2Nj5DWxsrtU3n+M5K4mqlK4nmZvCx/cK/H2elKsA+NJ1UtETMbkIDCgcr6HmqoszGq8rUto2L839cb3iFQXSOQnsDEk/LXQ/OjIWnjcvLUfzFO4H6EqTNnaxUSfS5hXIngywIywpnI+bA2T1w8M06Wthzcd3F6VlqxmA1QpISFi0cR/EzctRR90liUyHEnrMCPCRSPfANDq0ZAKgQ3kLqxD1oN0IAL7HxtuR7pQRIN1eQBB55wpTRoCN9SVm4fmUTpn855i7oUQPiYu8iPQQP0W+dLwWZHdI+h3AkZQOD0bMpeVikUJfgK5sQgo716ATteF5CcuXPiC8sRkLnql0PVL01QK5fT5+e5GlLfFKB+dOhVvFVSEiPp0vBe2shCdfFcvd/2ngUxbVyKGovCpU1SY4A5hPT0J42Kfj5skAYPnDGqje3B3L6Me7SblkAGDh9gDf1jK3kMAidcicN4UO5RQurAVIk76V1XdfTXnzD6fMka6nih4sj8Ob7JBaqNfx7Gr15hWUO0DPAfmknINj/AirBqDDUyC9cdnDeZvV94//HwBYZK4AK9eIjfglMsaNXTcAfVIIkLPloYvX36jDM9XVqlb9+Oy9PUvT9Hpq/gHXIiFRt5kHAQAAAABJRU5ErkJggg==",this.CodeScanner="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJvSURBVEiJ3ZZPSFRRFMZ/586bxqY0m5dEpVM6NhSpG3UCW1Q6ZFCLli2KFgVBBP0hyE1gq4gisqWtojZu3LSJ0hZRmqP9wYrISslWFfOwpEXNvHtaOMKoRcLkwr7V5YNzvnPvd+65V+oadtT4xhwgD6JijQSuD6fujjEP1DYmqxQ9oqImnw9Ye8uxYg4JHANe5ylY1ewdYF4CYMsRkgL5AputCRgnl3HkZaq3YX7J5uLF4P0HQCKfq0m0PENVzB9i/hkWXMARUauKBUin0yeBpgJz9rmuexVVK6JW6hK7KlWzFcOp3j7P835Q+K5sJBIJ1SWat4kEx2WaVdWg53k/+waekPY84tUxgkGHkpJi+geGWB+toHj5MlAFoLR0BQ/7U0TL1/EzkyFasY73ox9o2lpPJBJZIiIZAGe2fFf3bZ4Pv+Lwwf2EQkvYWF3J5Wud7NvbyoZoOVnfB2DTxhiXr3Wyp7WZia/f2Ls7SVf3bZq21s/It/i7SCZbYztRaUMkYLc0tIy8G2Vy8jtr16zGGEM4XMTI2zHKylyWFoXQnAfhcJg3I+9Z5a4kk81Stsrl0+cvxKurMK+GelH1MVwwiOiCle+jc7roxNn2OSafajv/W5OPnzk3x+SOi+0zuug/MHl6MX1EjwefkvYmiMcqcZwAxQVeNKltTFaBXzGcuv9oIUaFg/hHVSUpIvXpdPo0sK1AgT4RydY0Nl+BTI+jKgaZehdc1+0AOgoUmIKIUcUs/i7KTVON1ySah/J4K8qZ3Fv7V9Q27tyuIpeYUbDGEbnnGLU3fDF+foCoWJHAx/lWKRIcV/V7Zn1belTtzV9xfAviw6wpugAAAABJRU5ErkJggg==",this.PinCode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHYSURBVHgB7ZdLLwRBEMeLROIREiEIwbhJfAIn38bjC4h4RWLFbffK2dXrYEM4iBMH4sDBxcXBI7vxikRIPKp0jS22YprLzkj9kv/2bM0/Xd3TPd09AIZhGIZhGIZRarpRW6gX1FvM9YpaQQXU8DK+2Ec18M1HiDfV4Np9jeqlwBK4ni2gmiD+BKg1cG1epMAN/2mG5NAGrs05gMLcShI1wO0uh4Tj04FT1IGH7xB15OE7QR17+HzzqlMoQI1xSfcewK1SoxyTvglUp6iHFoJxxTeJ6hG+FtSI4vPJWyPqUTswz7EzLp/BLVt0PSV8Mxy7EPWEi0Ja+DIcuxK+HJfTSt5cRN7IDtATzULxJrIOxU9sWfFtKj6tvuw3H+Vd9cgb+RLTRlGpxG+VWJUSu1diFUrsSclbC355P9FGYI5j4fDRESMc1inhS8HXISedc5kRvjTH8sIXTrvUH/J6TaEhcC9Q+DJRrB+Kp8YAql7U04oaVHwU6xK+dqU+LW+z4ovsgGQP3FyNYge16+HbZkXxU95fdSCO/K+dOM/XjZAcOri8pJ8NKBxNA4g/tNPTB03Y5o9Gy2UwKaKZE5RxrwLULKoPVQfx5g7cIW8Y3MHQMAzDMAzDMErEO4sMCpYoPwJIAAAAAElFTkSuQmCC",this.FaceScan="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAhtJREFUeNrMV11OwkAQBsIB6gnEA5iUR59sL6D2BnACNPHdHsBEOQHcAPQCwJOPrfEA9gb0BjpDvm3GTZdut1DcZCAw3fm+ndn5aadz4tXlj6v32KevFYmn6cOPm3jdFITss+1A/JXDdtrDH2Xgx1weMAsP/EBxRqzyYyITFoNv8fPiDwEC71oY8OHOcxJfuPSTJCUbSwsbBV6/BnMGfdJiKdcdnmMyU5JXG2/2LMFHiFlgGV8mmsBbVgRCiAl85hDuAZM2kCjwuhYX5rthhvC9GLqGYHSA9PThRScC1wfKvoErgbKNKcmYJLME50yYm5RVaeiXGBtzCWWjSM3A4KkMIeQ7kLkSkIt7QiRzG31iXZG+e1PRlsAQp3at+/ULEbF/UW5vAJ5rtmp54B7fkSDF5XbBbidSoaHlRqIfRKigbOvBOA+IJpO01I6LkPY0d2UtgGcqNP9iVfb/569FjDyfPl5GSxujtIfvyoRkQ3vipu04w+Wa1DjYBHsqQ2pDYImYBXSywOL0qjrm2NuMALlQTTi8ZgTg7QH3xOwwxd5md0AYT1BWOX0iMp5p+gFqxO4Z0g9t7PZFEenoxaVkilkBICFA7nBv0N2K2SE1TVda0drhqRAEVfMe3Bkirh6q20pUOg+60ML1BV6dbqhIRHR6H1OwasMbBid96lQHTvViIt8LcrhwSw+08W5YdEo5lrdZn/Oqi9ra+hVgABGZ13TGsBs1AAAAAElFTkSuQmCC"}static#e=this.shared=new uE}class cE{constructor(){this.Loading="data:image/gif;base64,R0lGODlhlgCWAPcBAAAAAAD/AGaz52az52a05ma05ma05ma052a052a052a052a052a052a06Ga06Ga15ma152a26We05me052e052e15me16Ge16Giz52i152i352m252q16nC/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/7yH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAwABACwAAAAAlgCWAIcAAAAA/wBms+dms+dmtOZmtOZmtOZmtOdmtOdmtOdmtOdmtOdmtOdmtOhmtOhmteZmtedmtulntOZntOdntOdnteZntehntehos+dotedot+dp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eM3ktR9CtzwROnDm1a1nD368puvf251LrJyOPLYA5eHBS/yunib7yud7N6csoL7s9dptvo8c/yL8+vYJB1F+N+3HWH2s0QdggPKld5tOBmIgQEb/LRgfdRRFeN9OlHFUIYANVqShgFx9eJ5GI4b41YccjWjWhi126NiMNNZo44045qjjjjz26OOPQAYp5JBEFmnkkUgmqeSSTDbp5JNQRinllFRWaeWVWGap5ZZcdunll2CGKeaYZJZp5plopqnmmmw+FRAAIfkECQMAAQAsAAAAAJYAlgAACP8AAwgcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AAwseTDgthsOICydEzDixYoKNI2N4LFCy5MeWLRfOnJkwZ80aG4sUzfPzZYydO3IAjdM064muQ69OfdP1adi2UceubZs07twVe0/mLTx4ceO2ORDPLMC3ROGHKUIfXtN0c8bSp2c/bvOzgOvUn2un/91b+c3Zkr9HR8494vTwNdE3Vn/xPUX5wHHiP/xdd3r1kd03nk4BhhbZdwgWKF57Wv2HIHjwQTTgVg4+6JiA+XVVIYAY7feahgdaqJGHzn1VIUckrkfWbaopSNmLMMYo44w01mjjjTjmqOOOPPbo449ABinkkEQWaeSRSCap5JJMNunkk1BGKeWUVFZp5ZVYZqnlllx26eWXYIYp5phklmnmmWimGRAAIfkECQQAAQAsAAAAAJYAlgAACP8AAwgcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AA8PEQJiwAMEMCysujBjh4scYGheEDFmyQMqUJWOmzKHx5syIP1cWLHp04NKPO2dcLJL1TtSPMWL2yAF0TtiMLZbWiKH27Nu4I1eELXs3zuDCKeLWTfz4ZgECcitf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"}static#e=this.shared=new cE}class Ti{static#e=this.Images=uE.shared;static#t=this.Gifs=cE.shared}class J8{}class Z8 extends J8{}var CO=function(n){return n[n.None=0]="None",n[n.RecordControlFile=1]="RecordControlFile",n[n.RecordFile=2]="RecordFile",n[n.RepositoryFile=3]="RepositoryFile",n[n.RecordDisplayPicture=4]="RecordDisplayPicture",n[n.AppLogo=5]="AppLogo",n[n.UserProfilePicture=6]="UserProfilePicture",n[n.MenuIcon=7]="MenuIcon",n[n.Multimedia=8]="Multimedia",n[n.ClientLogo=9]="ClientLogo",n[n.GalleryAppLogo=10]="GalleryAppLogo",n[n.LayoutMap=11]="LayoutMap",n[n.EasyStreetDrawing=12]="EasyStreetDrawing",n}(CO||{});class ov{constructor(t){this.file=t,this.id=lu(),this.uploadStatus=Ko.None}}var Ko=function(n){return n[n.None=0]="None",n[n.Uploading=1]="Uploading",n[n.Uploaded=2]="Uploaded",n[n.UploadFailed=3]="UploadFailed",n}(Ko||{});const _O=new ze("file-service");let EO=(()=>{class n{constructor(e){this.service=e}updateEndpoint(e,r){this.service.updateEndpointSetting(e,r)}uploadfile(e){return new ln(r=>{e.uploadStatus=Ko.Uploading,r.next({...e}),this.service.uploadFile(e.file).subscribe({next:i=>{if(i&&i.Result&&!i.Result.isUploadProgress){const o=i.Result.url||"";o&&o.length?(e.uploadStatus=Ko.Uploaded,e.url=o,r.next({...e})):(e.uploadStatus=Ko.UploadFailed,e.uploadError="Failed to upload file.",r.next({...e})),r.complete()}},error:i=>{e.uploadStatus=Ko.UploadFailed,e.uploadError=i||"Failed to upload file.",r.next({...e}),r.complete()}})})}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(_O))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ea=function(n){return n.None="unknown",n.Straight="straight",n.Right="right",n.Left="left",n}(Ea||{});class lE{constructor(){this.RotateCamera="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAuxJREFUWEftlT1MU1EUx//nvX6YUjEG2mKRttJXQlgcCH5MBEWJn4ORxUFDdHHQzUVHYxzcTHTRxI+44eYHCgjGwQEDbgTpA2wpX22FFKTavvfuMa2FMIAtloSld7zn3nN+53/uOZewzYu2OT5KACUFSgpsVgG5yldfY0A0E8QRYvJm2pgZE0To0XT+ND+lzgAwCm3vvAAuT91RJpFMcXrESjs6AL4MoJrAQQZNZgEIe4nhBxAG+JFJSz6dnp5OFgKRF8DpC3QTaEEwCwLOAhiCxLclNo2adHkxE8QwJ3cKw6wIwi0CNwH03KT9vFEIRH4Ab+AzgCYgM7Sox2Ikz0UikV/rZacoijWhUycxWphxMxYOPsxXjkIBDgOIMolLRPJMuSxGVFVNrQfR0NBgiS+nuwCqMJnEmemxsWyZNlqbAUgy4wcRBoSQrsed9phzPtECBkUrdvVhcFBbCeLyBFqZ0Anma9Gw+qIoAIdHaQeoasUJEaZSnOq3knUIgC+3H45WlisrELtra3dZDPkUIM3Ohb71FQWw3mXnPuU4BL1fa2PQyVhotKuQl7/2TN4SrAvgU9rA9G6tTQCn46Hgmy0HqPQpzTLInZaMtwvj44lsgMZGszO+qALw5AJGLIZlf1rWmhmoXoVgMRcLq51FlcDlDVxg4AEx2ufCwd5VZ42NZkd8qTXTno4yU290mSsk6PeZcZAIFQBsTPgS+x48UBSA2++v0XXpFQMLjjJz2/DwcHqjGbBoSPWAcEFIzwCu2hIAALLDW3eVwHeZ0O+wmc//CyKh0UsCTmS/CMLXohXIZOt2u2262X4P4IsADxDkO7Ksqcu6vpSx22S5XBimwN9RjEMAXhOREMzOWCjYUlQJVi5nIDSzvYPAV3KPLwggkrUzakCoI2CWGU8swvI4Lf+uh0T26ITavSUAOSey2+936xo1Q8IxMNVm/0JQmMAfALlvLrRnEvioF9qO/zUHCnVeyLkSQEmBkgLbrsAfyPcpMDvN/okAAAAASUVORK5CYII=",this.Submit="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAelJREFUWEftlU9rE0EYh593NxtKKojEJCXUuraJAQM9mEv1ooLiUUHBz+DFk170UJRiezEWPIiHoi0ifgDBT9GjkbQhNZBCk9SGgBgo2XkloBDqn/yxJiA713lnfs88886uMOIhI87HB/AN+Ab+WwP28VQqtJvPfwH0T9+af2HAjp5KpTHmmnre21q5uDlMACviJmeBR6KcF7hTKW2+GRrAxFQibSx5jDIHrAW94GK5/GFvKACxqeS0wnOEs8ArQyC7W/q4M5QeiEzOJMS2XgNpFVZEWovVra1qt/C2mV6a0IpEzoRqtVy7o38a0ROJGSxrDfQcygttOvd+V/ur9V0BJtzERaOSFdGHlU+Fd4D3fSOJTE4nxLKfIVwCXa2WCrc75nv603cFiJ5M3gCWgYYYvV+JHn3P+nor7J5O2aoLwBWB1fC4czeXy+33lNpR1BWATMaJ1hq3EJlHtCmGB14gkLeNWUC5rJiXlsPSTqFQ6ze81x4gHo+HWoEjNxGdF9hXYQPlAuhKq8XTve1CeZDwngHahbHY7LiOfb0O8gQIt6/F82T5c3lje9DwvgDaxa7rjjUJXMVYcxI02UG1dwJ374GDx8tknGP1eqheLDb+5uQ/1vYPcBipfb2CQw48uJ1vwDfgGxi5gW88aZkhHj/UJAAAAABJRU5ErkJggg==",this.Refresh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQbSURBVHgB7ZhfaFt1FMfP+d3cpE1Z12Rb4rKYpl3SrVZasCCCQ1R88h+KMnwQBQVFQfRhwhzoiwx88XXsQZwKPgxRhij45J9tiCIbslln20i7pt2aphqXknZNcu/x++tuoYTpcm8ydOx+4PD7d3+//P6d3zknRD4+Pj4+Pj4+Ny9M7YOjmcymUI13WMy7WOR21MVsIUspOW8znzbZmo50ds6PjY1VGzvH48NdEl7duTA1foZc0K4FqG2pzJOK+RkhugPlW64y9irkdxL6SQx6vzg1eQJl0Q2ZTCZUrqsDJBJeOD/5OrlAUYtE+vs3x3qzR5n5KGbzEKq2O5O3IZYjOh+C3IaWZ9mm72Lp7GHdF3VGucqvYvJvMUkHuSRALbAlPbBbWXQIG3mfUyWYYA7pN8hNMvFfukZIIqgbRNv9SFPOly+YtjGIhZzTefKI5wWsHXtNjiB7p1NVEZG3VUCOFHp6SnTqVG3j90NDQ8GFSiXKEtiHA3oFVUFMfA/SPdQCnhaQTCY7yzV+D9m7nKoiJv9ycSb3KTn3uhFHceeJ7t0fT83lheldlA1qEU8LqBqdDyJ5zCkuic1PFPNrSnlN0unpwIodiOMU2vKAuFbiRCIRhsLuRTYMsbDzB4v5iaYmj93H5M0XhfkNasMDonF9Apc5HA2IrN/bnBjGsWb6pdPpjorMvgmdPkBtxPUumIbahSSh8ziJM4tT4xNNdFMrYu7Dq7Sf2ox7HVD2MMmV6ytCP9I/KO1GEomBqEXSh14f/Nt3GOgHconrBeAKxNfzUMO5ZvpcuDCxiOR5ug60qkjX3P3rjesFwNwX1vO4QjvoP8b9FbL5l3U3TcTWVliXvJ4E43UKVatVBWR2dvay27Fcn0DdknNILq51Zh7Z2r87Sx6J37pzaFnM7+tmVx7G8WSsry9GLnH/jNbDJTyfJ3UeW5VVlvUoeUQM9TSSEUgU8luwViuTS1z7IpVKoRbujmgb8DBphwz+UFdP5HjlUinf9CCjo2Y8tGkvduAdlEzIMuTgxfz0WXKJp1fIrC9/CRfic6fYjWE+i/UOPE5NBEjaIscWy6+hv3YGdYygN+OLQK3yFXnAs0OlPdKa0XEcdmHUGWeJGUFJgD6ezyVLRN/WqWHiS/XgFiMgh7DzOvDRp68V9uegtXI3FHiFPNCSR7i9NztoCR3GKPc4VdpGj2NRXzPbObHVH6IQQJLE0TKCtgfwzdYNv35C2fLS/ExujDzSsku7OZWKBFXoQ4RdjzQ02Y6wIw3XVY6tSvW5SzMzJWqBdgX1Rqw38xTmiFdFdFC/7Spj47pwAYbwNC79R4XpiU/oygJboq1/qyBI7w7VVdJaC955GKeiFyIwGAVYvbO4S7+umjL3Zy63RP8DN8THx8fHx8fH50bnbzilXEHX539GAAAAAElFTkSuQmCC"}static#e=this.shared=new lE}class dE{constructor(){this.Loading="data:image/gif;base64,R0lGODlhlgCWAPcBAAAAAAD/AGaz52az52a05ma05ma05ma052a052a052a052a052a052a06Ga06Ga15ma152a26We05me052e052e15me16Ge16Giz52i152i352m252q16nC/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/73C/7yH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAwABACwAAAAAlgCWAIcAAAAA/wBms+dms+dmtOZmtOZmtOZmtOdmtOdmtOdmtOdmtOdmtOdmtOhmtOhmteZmtedmtulntOZntOdntOdnteZntehntehos+dotedot+dp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eM3ktR9CtzwROnDm1a1nD368puvf251LrJyOPLYA5eHBS/yunib7yud7N6csoL7s9dptvo8c/yL8+vYJB1F+N+3HWH2s0QdggPKld5tOBmIgQEb/LRgfdRRFeN9OlHFUIYANVqShgFx9eJ5GI4b41YccjWjWhi126NiMNNZo44045qjjjjz26OOPQAYp5JBEFmnkkUgmqeSSTDbp5JNQRinllFRWaeWVWGap5ZZcdunll2CGKeaYZJZp5plopqnmmmw+FRAAIfkECQMAAQAsAAAAAJYAlgAACP8AAwgcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AAwseTDgthsOICydEzDixYoKNI2N4LFCy5MeWLRfOnJkwZ80aG4sUzfPzZYydO3IAjdM064muQ69OfdP1adi2UceubZs07twVe0/mLTx4ceO2ORDPLMC3ROGHKUIfXtN0c8bSp2c/bvOzgOvUn2un/91b+c3Zkr9HR8494vTwNdE3Vn/xPUX5wHHiP/xdd3r1kd03nk4BhhbZdwgWKF57Wv2HIHjwQTTgVg4+6JiA+XVVIYAY7feahgdaqJGHzn1VIUckrkfWbaopSNmLMMYo44w01mjjjTjmqOOOPPbo449ABinkkEQWaeSRSCap5JJMNunkk1BGKeWUVFZp5ZVYZqnlllx26eWXYIYp5phklmnmmWimGRAAIfkECQQAAQAsAAAAAJYAlgAACP8AAwgcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AA8PEQJiwAMEMCysujBjh4scYGheEDFmyQMqUJWOmzKHx5syIP1cWLHp04NKPO2dcLJL1TtSPMWL2yAF0TtiMLZbWiKH27Nu4I1eELXs3zuDCKeLWTfz4ZgECcitf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"}static#e=this.shared=new dE}class e7{static#e=this.Images=lE.shared;static#t=this.Gifs=dE.shared}let t7=(()=>{class n{static#e=this.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"};static#t=this.DEFAULT_IMAGE_TYPE="image/jpeg";static#n=this.DEFAULT_IMAGE_QUALITY=.92;getAvailableDevices(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((e,r)=>{navigator.mediaDevices.enumerateDevices().then(i=>{e(i.filter(o=>"videoinput"===o.kind))}).catch(i=>{r(i.message||i)})}):Promise.reject("Couldn't find camera information")}stopMediaTracks(e,r){r.pause();const i=e.getTracks();i&&i.length&&i.forEach(o=>o.stop())}getMediaConstraintsForDevice(e,r){const i=r||n.DEFAULT_VIDEO_OPTIONS;return e&&(i.deviceId={exact:e}),i}getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){const r=e;if(r.exact)return String(r.exact);if(r.ideal)return String(r.ideal)}}}getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const r=e.getConstraints().deviceId||"";return this.getValueFromConstrainDOMString(r)}}initiateWebcam(e,r,i){return new Promise((o,s)=>{const a=this.getMediaConstraintsForDevice(r,i);navigator.mediaDevices.getUserMedia({video:a}).then(u=>{const c=u.getVideoTracks();let d=-1;if(c.length){const f=this.getDeviceIdFromMediaStreamTrack(c[0]);f&&(d=e.findIndex(p=>p.deviceId===f))}o({stream:u,activeDeviceIndex:d})}).catch(u=>{s(u.message||u)})})}takeSnapShot(e,r){return new Promise((i,o)=>{e.width=r.videoWidth,e.height=r.videoHeight;const s=e.getContext("2d");s?(s.drawImage(r,0,0),e.toBlob(a=>{a?i(new File([a],Date.now()+".jpg",{type:n.DEFAULT_IMAGE_TYPE})):o("Unable to capture snapshot.")},n.DEFAULT_IMAGE_TYPE,n.DEFAULT_IMAGE_QUALITY)):o("Unable to capture snapshot.")})}static#r=this.\u0275fac=function(r){return new(r||n)};static#i=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const n7=["VideoElement"],r7=["Overlay"],i7=["Canvas"];function o7(n,t){if(1&n&&(Ne(0),V(1,"h3",10),Pe(2),Y(),Fe()),2&n){const e=t.ngIf;U(2),zn(e)}}function s7(n,t){1&n&&(Ne(0),dt(1,"canvas",11,12),Fe())}function a7(n,t){if(1&n&&(Ne(0),V(1,"div",13),dt(2,"img",14),Y(),Fe()),2&n){const e=j();U(2),z("src",e.dataUrl,It)}}function u7(n,t){if(1&n){const e=ft();V(0,"div",16)(1,"div",17),De("click",function(){return ve(e),we(j(2).rotateCameraClicked())}),dt(2,"img",18),Y()()}if(2&n){const e=j(2);U(2),z("src",e.Assets.Images.RotateCamera,It)}}function c7(n,t){if(1&n&&(Ne(0),ue(1,u7,3,1,"div",15),Fe()),2&n){const e=j();U(1),z("ngIf",e.availableDevices.length>1)}}function l7(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",17),De("click",function(){return ve(e),we(j().submitImageClicked())}),dt(2,"img",19),Y(),V(3,"div",17),De("click",function(){return ve(e),we(j().refreshImageClicked())}),dt(4,"img",20),Y(),Fe()}if(2&n){const e=j();U(2),z("src",e.Assets.Images.Submit,It),U(2),z("src",e.Assets.Images.Refresh,It)}}function d7(n,t){if(1&n){const e=ft();V(0,"div",21),De("click",function(){return ve(e),we(j().captureImageClicked())}),Y()}}let sv=class uS{constructor(t,e){this.sanitizer=t,this.service=e,this.autocapture=!1,this.allowOverlay=!1,this.captureCompleted=new Qe,this.videoReady=new Qe,this.videoEnded=new Qe,this.Assets=e7,this.error$=new bt(void 0),this.isPreviewing=!1,this.availableDevices$=new bt([]),this.deviceIndex=-1}get availableDevices(){return this.availableDevices$.getValue()}set availableDevices(t){this.availableDevices$.next(t)}ngOnInit(){sa(this.service.getAvailableDevices()).pipe(Dn(this)).subscribe({next:t=>{this.availableDevices=t},error:t=>{this.availableDevices=[],console.error(t)}})}ngAfterViewInit(){this.availableDevices$.pipe(Dn(this),ku()).subscribe(t=>{t.length>0&&this.startCaptureV2()})}startCaptureV2(t=-1){this.isPreviewing=!1,this.dataUrl=void 0,this.capturedFile=void 0,this.stopCapture(),this.service.initiateWebcam(this.availableDevices,t>=0?this.availableDevices[t].deviceId:void 0,void 0).then(e=>{this.error$.next(void 0),this.startCapture(e.stream,e.activeDeviceIndex)}).catch(e=>this.error$.next(e))}startCapture(t,e){this.videoElement&&(this.stream=t,this.videoElement.nativeElement.srcObject=t,this.videoElement.nativeElement.play(),this.deviceIndex=e,setTimeout(()=>{this.videoElement&&this.overlayElement&&this.videoReady.next({video:this.videoElement.nativeElement,canvas:this.overlayElement.nativeElement})},750))}stopCapture(){this.stream&&this.videoElement?.nativeElement&&this.service.stopMediaTracks(this.stream,this.videoElement.nativeElement),this.videoEnded.next()}ngOnDestroy(){this.stopCapture()}setCapturedImage(t){t?this.readFile(t).then(e=>{e?(this.isPreviewing=!0,this.capturedFile=t,this.dataUrl=e):(this.isPreviewing=!1,this.capturedFile=void 0,this.dataUrl=void 0)}):(this.isPreviewing=!1,this.capturedFile=void 0,this.dataUrl=void 0)}readFile(t){return new Promise(e=>{const r=new FileReader;r.onload=()=>{e(this.sanitizer.bypassSecurityTrustUrl(r.result))},r.onerror=()=>{e(void 0)},r.readAsDataURL(t)})}captureImageClicked(){this.canvasElement?.nativeElement&&this.videoElement?.nativeElement&&this.service.takeSnapShot(this.canvasElement.nativeElement,this.videoElement.nativeElement).then(t=>{this.stopCapture(),this.autocapture?this.captureCompleted.next(t):this.setCapturedImage(t)}).catch(t=>{this.setCapturedImage(void 0),console.error(t)})}rotateCameraClicked(){-1!==this.deviceIndex&&this.startCaptureV2((this.deviceIndex+1)%this.availableDevices.length)}submitImageClicked(){this.isPreviewing&&this.capturedFile&&this.captureCompleted.next(this.capturedFile)}refreshImageClicked(){this.startCaptureV2(this.deviceIndex)}requestCaptureImage(){this.captureImageClicked()}static#e=this.\u0275fac=function(e){return new(e||uS)(lt(ap),lt(t7))};static#t=this.\u0275cmp=dn({type:uS,selectors:[["web-cam"]],viewQuery:function(e,r){if(1&e&&(Pr(n7,5),Pr(r7,5),Pr(i7,5)),2&e){let i;kr(i=Or())&&(r.videoElement=i.first),kr(i=Or())&&(r.overlayElement=i.first),kr(i=Or())&&(r.canvasElement=i.first)}},inputs:{autocapture:"autocapture",allowOverlay:"allowOverlay"},outputs:{captureCompleted:"captureCompleted",videoReady:"videoReady",videoEnded:"videoEnded"},standalone:!0,features:[ii],decls:20,vars:24,consts:[[1,"capture-container"],[4,"ngIf"],[1,"video-container"],[2,"display","none"],["Canvas",""],[3,"playsInline","autoplay"],["VideoElement",""],[1,"controls"],[4,"ngIf","ngIfElse"],["capturing",""],[1,"error"],[2,"background-color","transparent"],["Overlay",""],[1,"preview"],["alt","","srcset","",3,"src"],["class","top-controls",4,"ngIf"],[1,"top-controls"],[1,"button",3,"click"],["alt","Rotate camera",3,"src"],["alt","Submit",3,"src"],["alt","Capture Again",3,"src"],[1,"capture",3,"click"]],template:function(e,r){if(1&e&&(V(0,"div",0),ue(1,o7,3,1,"ng-container",1),wn(2,"async"),V(3,"div",2),wn(4,"async"),wn(5,"async"),dt(6,"canvas",3,4)(8,"video",5,6),ue(10,s7,3,0,"ng-container",1),Y(),ue(11,a7,3,1,"ng-container",1),ue(12,c7,2,1,"ng-container",1),wn(13,"async"),wn(14,"async"),V(15,"div",7),wn(16,"async"),ue(17,l7,5,2,"ng-container",8),ue(18,d7,1,0,"ng-template",null,9,sn),Y()()),2&e){const i=Wt(19);U(1),z("ngIf",bn(2,12,r.error$)),U(2),ri("display",r.isPreviewing||null!==bn(4,14,r.error$)&&void 0!==bn(5,16,r.error$)?"none":"block"),U(5),z("playsInline",!0)("autoplay",!1),U(2),z("ngIf",r.allowOverlay),U(1),z("ngIf",r.isPreviewing&&r.dataUrl),U(1),z("ngIf",!r.isPreviewing&&(null===bn(13,18,r.error$)||void 0===bn(14,20,r.error$))),U(3),ri("display",bn(16,22,r.error$)||r.autocapture?"none":"flex"),U(2),z("ngIf",r.isPreviewing)("ngIfElse",i)}},dependencies:[_r,Fr,Aa],styles:[".capture-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;position:relative}.error[_ngcontent-%COMP%]{color:#c00;text-align:center;padding:16px;margin:0}.video-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000}video[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000}canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000}.top-controls[_ngcontent-%COMP%]{position:absolute;top:0;height:72px;left:0;width:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-end;background-color:#fff4;padding:8px}.top-controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:36px;height:36px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:18px}.top-controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;height:28px}.controls[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:72px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;background-color:#fff8;padding:8px;gap:16px}.controls[_ngcontent-%COMP%]   .capture[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:28px;background-color:#d00}.controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:48px;height:48px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:24px}.controls[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;height:28px}.preview[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;display:flex;align-items:center;justify-content:center}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]})};function DO(n,t,e,r,i,o,s){try{var a=n[o](s),u=a.value}catch(c){return void e(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function du(n){return function(){var t=this,e=arguments;return new Promise(function(r,i){var o=n.apply(t,e);function s(u){DO(o,r,i,s,a,"next",u)}function a(u){DO(o,r,i,s,a,"throw",u)}s(void 0)})}}sv=ke([Co()],sv);var IO=function(n,t){return(IO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(n,t)};function Da(n,t){function e(){this.constructor=n}IO(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function nt(n,t,e,r){return new(e||(e=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):new e(function(d){d(c.value)}).then(s,a)}u((r=r.apply(n,t||[])).next())})}function rt(n,t){var e,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return function(d){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(i=2&d[0]?r.return:d[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,d[1])).done)return i;switch(r=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,r=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===d[0]||2===d[0])){s=0;continue}if(3===d[0]&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(6===d[0]&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(n,s)}catch(f){d=[6,f],r=0}finally{e=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([u,c])}}}var f7=function(){function n(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(t,e){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},n.prototype.registerFlag=function(t,e,r){if(this.flagRegistry[t]={evaluationFn:e,setHook:r},null!=this.urlFlags[t]){var i=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+i+"."),this.set(t,i)}},n.prototype.get=function(t){return t in this.flags||(this.flags[t]=this.evaluateFlag(t)),this.flags[t]},n.prototype.getNumber=function(t){return this.get(t)},n.prototype.getBool=function(t){return this.get(t)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)},n.prototype.evaluateFlag=function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},n.prototype.setFlags=function(t){this.flags=Object.assign({},t)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var t=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var r,i=(r={},this.global.location.search.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return function h7(n,t,e){n[decodeURIComponent(t)]=decodeURIComponent(e||"")}(r,s[0],s[1]),s.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var s=o.split(":"),a=s[0];t.urlFlags[a]=function(c,d){if("true"===(d=d.toLowerCase())||"false"===d)return"true"===d;if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+c+".")}(a,s[1])})}},n}();function de(){return SO}var SO=null,hp=new Map,av=new Map;function TO(n,t){var e=fE(n,t);return hp.get(e)}function RO(n){for(var t=hp.entries(),e=[];;){var r=t.next(),o=r.value;if(r.done)break;var a=o[1];o[0].split("_")[0]===n&&e.push(a)}return e}function MO(n){var t=n.kernelName,e=n.backendName,r=fE(t,e);if(hp.has(r))throw new Error("The kernel '"+t+"' for backend '"+e+"' is already registered");hp.set(r,n)}function g7(n){var t=n.kernelName;av.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),av.set(t,n)}function fE(n,t){return t+"_"+n}function kO(n){for(var t=n.length,e=0,r=0;t>0;)r=Math.random()*t|0,e=n[--t],n[t]=n[r],n[r]=e}function rb(n,t,e){return Math.max(n,Math.min(t,e))}function hE(n){return n%2==0?n:n+1}function PO(n){for(var t=0,e=0;e<n.length;e++)t+=n[e];return t}function P(n,t){if(!n)throw new Error("string"==typeof t?t:t())}function fn(n,t,e){void 0===e&&(e=""),P(qr(n,t),function(){return e+" Shapes "+n+" and "+t+" must match"})}function Zd(n){P(null!=n,function(){return"The input to the tensor constructor must be a non-null value."})}function fc(n,t,e){if(void 0===t&&(t=[]),void 0===e&&(e=!1),null==t&&(t=[]),Array.isArray(n)||Ri(n)&&!e)for(var r=0;r<n.length;++r)fc(n[r],t,e);else t.push(n);return t}function at(n){if(0===n.length)return 1;for(var t=n[0],e=1;e<n.length;e++)t*=n[e];return t}function qr(n,t){if(n===t)return!0;if(null==n||null==t||n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function hr(n){return n%1==0}function OO(n){if(null!=Math.tanh)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var t=Math.exp(2*n);return(t-1)/(t+1)}function ib(n){var t=Math.ceil(Math.sqrt(n));return[t,Math.ceil(n/t)]}function $d(n,t){return t<=n.length?n:n+" ".repeat(t-n.length)}function pE(n,t,e){return void 0===t&&(t=function(r){return 0}),new Promise(function(r,i){var o=0,s=function(){if(n())r();else{o++;var a=t(o);null!=e&&o>=e?i():setTimeout(s,a)}};s()})}function NO(n,t){for(var e=1,r=-1,i=0;i<n.length;++i)if(n[i]>=0)e*=n[i];else if(-1===n[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(n[i]<0)throw Error("Shapes can not be < 0. Found "+n[i]+" at dim "+i);if(-1===r){if(t>0&&t!==e)throw Error("Size("+t+") must match the product of shape "+n);return n}if(0===e)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(t%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+e);var o=n.slice();return o[r]=t/e,o}function Gr(n,t){var e=t.length;return P((n=null==n?t.map(function(r,i){return i}):[].concat(n)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+n}),P(n.every(function(r){return hr(r)}),function(){return"All values in axis param must be integers but got axis "+n}),n.map(function(r){return r<0?e+r:r})}function Al(n,t){for(var e=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:Gr(t,n).sort(),s=0,a=0;a<n.length;++a){if(null!=o){if(o[s]===a&&1!==n[a])throw new Error("Can't squeeze axis "+a+" since its dim '"+n[a]+"' is not 1");(null==o[s]||o[s]>a)&&1===n[a]&&(e.push(n[a]),r.push(a)),o[s]<=a&&s++}1!==n[a]&&(e.push(n[a]),r.push(a))}return{newShape:e,keptDims:r}}function pp(n,t){var e=null;if(null==n||"float32"===n)e=new Float32Array(t);else if("int32"===n)e=new Int32Array(t);else{if("bool"!==n)throw new Error("Unknown data type "+n);e=new Uint8Array(t)}return e}function uv(n,t){var e=null;if(null==n||"float32"===n)e=new Float32Array(t);else if("int32"===n)e=new Int32Array(t);else if("bool"===n)e=new Uint8Array(t);else{if("string"!==n)throw new Error("Unknown data type "+n);e=new Array(t)}return e}function FO(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function BO(n){return"bool"===n||"complex64"===n||"float32"===n||"int32"===n||"string"===n}function LO(n,t){return!("complex64"===t||"float32"===t&&"complex64"!==n||"int32"===t&&"float32"!==n&&"complex64"!==n||"bool"===t&&"bool"===n)}function Ri(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function gE(n){if("float32"===n||"int32"===n)return 4;if("complex64"===n)return 8;if("bool"===n)return 1;throw new Error("Unknown dtype "+n)}function UO(n){if(null==n)return 0;var t=0;return n.forEach(function(e){return t+=e.length}),t}function xl(n){return"string"==typeof n||n instanceof String}function zO(n){return"boolean"==typeof n}function jO(n){return"number"==typeof n}function gp(n){return Array.isArray(n)?gp(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":jO(n)?"float32":xl(n)?"string":zO(n)?"bool":"float32"}function Cl(n){return!!(n&&n.constructor&&n.call&&n.apply)}function ob(n,t){for(var e=t;e<n;++e)if(n%e==0)return e;return n}function Ia(n){var t=n.length;if(t<2)return[];var e=new Array(t-1);e[t-2]=n[t-1];for(var r=t-3;r>=0;--r)e[r]=e[r+1]*n[r+1];return e}function mE(n,t,e){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=fc(n)),e&&FO(n,t),s=t,(o=n)instanceof Float32Array&&"float32"===s||o instanceof Int32Array&&"int32"===s||o instanceof Uint8Array&&"bool"===s)return n;var o,s;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(n);if("int32"===t)return new Int32Array(n);if("bool"===t){for(var r=new Uint8Array(n.length),i=0;i<r.length;++i)0!==Math.round(n[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+t)}function vE(n,t){if(0===n.length)return t[0];var e=n.reduce(function(r,i){return r*i});if(0===e)return[];if(e!==t.length)throw new Error("["+n+"] does not match the input size.");return function r(i,o,s){var a=new Array;if(1===o.length)for(var u=o[0],c=0;c<u;c++)a[c]=s[i+c];else{u=o[0];var d=o.slice(1),f=d.reduce(function(p,g){return p*g});for(c=0;c<u;c++)a[c]=r(i+c*f,d,s)}return a}(0,n,t)}function yE(n,t){for(var e=mp(n,t),r=0;r<e.length;r++)e[r]=1;return e}function mp(n,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(n);if("int32"===t)return new Int32Array(n);if("bool"===t)return new Uint8Array(n);throw new Error("Unknown data type "+t)}function Sa(){return de().platform.now()}function wE(n){n.forEach(function(t){P(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."})})}function HO(n,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",de().platform.encode(n,t)}function cv(n,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",de().platform.decode(n,t)}function bE(n,t,e){if(0===t)return 0;if(1===t)return n[0];for(var r=n[n.length-1],i=0;i<n.length-1;++i)r+=e[i]*n[i];return r}function WO(n,t,e){if(0===t)return[];if(1===t)return[n];for(var r=new Array(t),i=0;i<r.length-1;++i)r[i]=Math.floor(n/e[i]),n-=r[i]*e[i];return r[r.length-1]=n,r}Object.freeze({shuffle:kO,clamp:rb,nearestLargerEven:hE,sum:PO,randUniform:function(n,t){var e=Math.random();return t*e+(1-e)*n},distSquared:function(n,t){for(var e=0,r=0;r<n.length;r++){var i=Number(n[r])-Number(t[r]);e+=i*i}return e},assert:P,assertShapesMatch:fn,assertNonNull:Zd,flatten:fc,sizeFromShape:at,isScalarShape:function(n){return 0===n.length},arraysEqual:qr,isInt:hr,tanh:OO,sizeToSquarishShape:ib,createShuffledIndices:function(n){for(var t=new Uint32Array(n),e=0;e<n;++e)t[e]=e;return kO(t),t},rightPad:$d,repeatedTry:pE,inferFromImplicitShape:NO,parseAxisParam:Gr,squeezeShape:Al,getTypedArrayFromDType:pp,getArrayFromDType:uv,checkConversionForErrors:FO,isValidDtype:BO,hasEncodingLoss:LO,isTypedArray:Ri,bytesPerElement:gE,bytesFromStringArray:UO,isString:xl,isBoolean:zO,isNumber:jO,inferDtype:gp,isFunction:Cl,nearestDivisor:ob,computeStrides:Ia,toTypedArray:mE,toNestedArray:vE,makeOnesTypedArray:yE,makeZerosTypedArray:mp,now:Sa,assertNonNegativeIntegerDimensions:wE,fetch:function(n,t){return de().platform.fetch(n,t)},encodeString:HO,decodeString:cv,locToIndex:bE,indexToLoc:WO});var m7=function(){function n(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new v7)}return n.prototype.profileKernel=function(t,e,r){var i,o=this,s=this.backendTimer.time(function(){i=r()});return i.forEach(function(a){a.data().then(function(u){(function(c,d,f){if("float32"!==d)return!1;for(var p=0;p<c.length;p++){var g=c[p];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+f+"'"),!0}})(u,a.dtype,t),s.then(function(c){var d="";null!=c.getExtraProfileInfo&&(d=c.getExtraProfileInfo()),o.logger.logKernelProfile(t,a,u,c.kernelMs,e,d)})})}),i},n}(),v7=function(){function n(){}return n.prototype.logKernelProfile=function(t,e,r,i,o,s){var a="number"==typeof i?$d(i+"ms",9):i.error,u=$d(t,25),c=e.rank,d=e.size,f=$d(e.shape.toString(),14),p="";for(var g in o){var v=o[g].shape||e.shape,y=v.length;p+=g+": "+y+"D "+(y>0?v:"")+" "}console.log("%c"+u+"\t%c"+a+"\t%c"+c+"D "+f+"\t%c"+d+"\t%c"+p+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n}();function dv(n,t,e){return $d(Array.isArray(n)?parseFloat(n[0].toFixed(7))+" + "+parseFloat(n[1].toFixed(7))+"j":xl(n)?"'"+n+"'":"bool"===e?qO(n):parseFloat(n.toFixed(7)).toString(),t)}function qO(n){return 0===n?"false":"true"}function fv(n){for(var t=[],e=0;e<n.length;e+=2)t.push([n[e],n[e+1]]);return t}var hv=function(){function n(t,e,r){var i=this;if(this.dtype=e,this.shape=t.slice(),this.size=at(t),null!=r){var o=r.length;P(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||uv(e,this.size),this.strides=Ia(t)}return n.prototype.set=function(t){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];0===r.length&&(r=[0]),P(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=t},n.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var r=0,i=0,o=t;i<o.length;i++){var s=o[i];if(s<0||s>=this.shape[r])throw new Error("Requested out of range element at "+t+".   Buffer shape="+this.shape);r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]},n.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],r=0;r<t.length-1;++r)e+=this.strides[r]*t[r];return e},n.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(t/this.strides[r]),t-=e[r]*this.strides[r];return e[e.length-1]=t,e},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return fu().makeTensor(this.values,this.shape,this.dtype)},n}(),fu=null,le=null,GO=null,Hn=function(){function n(t,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=at(t),this.strides=Ia(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),P(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},n.prototype.as3D=function(t,e,r){return this.throwIfDisposed(),this.reshape([t,e,r])},n.prototype.as4D=function(t,e,r,i){return this.throwIfDisposed(),this.reshape([t,e,r,i])},n.prototype.as5D=function(t,e,r,i,o){return this.throwIfDisposed(),this.reshape([t,e,r,i,o])},n.prototype.asType=function(t){return this.throwIfDisposed(),le.cast(this,t)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return nt(this,void 0,void 0,function(){var t;return rt(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,le.buffer(this.shape,this.dtype,t)]}})})},n.prototype.bufferSync=function(){return le.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return nt(this,void 0,void 0,function(){var t;return rt(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,vE(this.shape,t)]}})})},n.prototype.arraySync=function(){return vE(this.shape,this.dataSync())},n.prototype.data=function(){return nt(this,void 0,void 0,function(){var t,e;return rt(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=fu().read(this.dataId),"string"!==this.dtype?[3,2]:[4,t];case 1:e=r.sent();try{return[2,e.map(function(i){return cv(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},n.prototype.dataSync=function(){this.throwIfDisposed();var t=fu().readSync(this.dataId);if("string"===this.dtype)try{return t.map(function(e){return cv(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},n.prototype.bytes=function(){return nt(this,void 0,void 0,function(){var t;return rt(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,fu().read(this.dataId)];case 1:return t=e.sent(),"string"===this.dtype?[2,t]:[2,new Uint8Array(t.buffer)]}})})},n.prototype.dispose=function(){this.isDisposed||(fu().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(t){return void 0===t&&(t=!1),le.print(this,t)},n.prototype.reshape=function(t){return this.throwIfDisposed(),le.reshape(this,t)},n.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},n.prototype.expandDims=function(t){return void 0===t&&(t=0),le.expandDims(this,t)},n.prototype.cumsum=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===r&&(r=!1),le.cumsum(this,t,e,r)},n.prototype.squeeze=function(t){return this.throwIfDisposed(),le.squeeze(this,t)},n.prototype.clone=function(){return this.throwIfDisposed(),le.clone(this)},n.prototype.oneHot=function(t,e,r){return this.throwIfDisposed(),le.oneHot(this,t,e,r)},n.prototype.toString=function(t){return void 0===t&&(t=!1),function y7(n,t,e,r){var i=Ia(t),o=function(c,d,f,p){var g=at(d),v=p[p.length-1],y=new Array(v).fill(0),w=d.length,b="complex64"===f?fv(c):c;if(w>1)for(var A=0;A<g/v;A++)for(var _=A*v,C=0;C<v;C++)y[C]=Math.max(y[C],dv(b[_+C],0,f).length);return y}(n,t,e,i),s=t.length,a=function c(d,f,p,g,v,y){void 0===y&&(y=!0);var w="complex64"===p?2:1,b=f[0],A=f.length;if(0===A)return"complex64"===p?[dv(fv(d)[0],0,p)]:"bool"===p?[qO(d[0])]:[d[0].toString()];if(1===A){if(b>20){var C=Array.from(d.slice(0,3*w)),E=Array.from(d.slice((b-3)*w,b*w));return"complex64"===p&&(C=fv(C),E=fv(E)),["["+C.map(function(he,$){return dv(he,v[$],p)}).join(", ")+", ..., "+E.map(function(he,$){return dv(he,v[b-3+$],p)}).join(", ")+"]"]}return["["+("complex64"===p?fv(d):Array.from(d)).map(function(he,$){return dv(he,v[$],p)}).join(", ")+"]"]}var T=f.slice(1),O=g.slice(1),N=g[0]*w,B=[];if(b>20){for(var F=0;F<3;F++){var X=(G=F*N)+N;B.push.apply(B,c(d.slice(G,X),T,p,O,v,!1))}for(B.push("..."),F=b-3;F<b;F++)X=(G=F*N)+N,B.push.apply(B,c(d.slice(G,X),T,p,O,v,F===b-1))}else for(F=0;F<b;F++){var G;X=(G=F*N)+N,B.push.apply(B,c(d.slice(G,X),T,p,O,v,F===b-1))}var re=2===A?",":"";for(B[0]="["+B[0]+re,F=1;F<B.length-1;F++)B[F]=" "+B[F]+re;var fe=",\n";for(F=2;F<A;F++)fe+="\n";return B[B.length-1]=" "+B[B.length-1]+"]"+(y?"":fe),B}(n,t,e,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+e),u.push("  rank: "+s),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(a.map(function(c){return"    "+c}).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,t)},n.prototype.tile=function(t){return this.throwIfDisposed(),le.tile(this,t)},n.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),le.gather(this,t,e)},n.prototype.matMul=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),this.throwIfDisposed(),le.matMul(this,t,e,r)},n.prototype.dot=function(t){return this.throwIfDisposed(),le.dot(this,t)},n.prototype.norm=function(t,e,r){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===r&&(r=!1),this.throwIfDisposed(),le.norm(this,t,e,r)},n.prototype.slice=function(t,e){return this.throwIfDisposed(),le.slice(this,t,e)},n.prototype.reverse=function(t){return this.throwIfDisposed(),le.reverse(this,t)},n.prototype.concat=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),t instanceof n&&(t=[t]),le.concat([this].concat(t),e)},n.prototype.split=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),le.split(this,t,e)},n.prototype.stack=function(t,e){return void 0===e&&(e=0),le.stack([this,t],e)},n.prototype.unstack=function(t){return void 0===t&&(t=0),le.unstack(this,t)},n.prototype.pad=function(t,e){return void 0===e&&(e=0),le.pad(this,t,e)},n.prototype.batchNormalization=function(t,e,r,i,o){return void 0===r&&(r=.001),GO("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,o,i,r)},n.prototype.batchNorm=function(t,e,r,i,o){return void 0===o&&(o=.001),this.throwIfDisposed(),le.batchNorm(this,t,e,r,i,o)},n.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),le.all(this,t,e)},n.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),le.any(this,t,e)},n.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),le.logSumExp(this,t,e)},n.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),le.sum(this,t,e)},n.prototype.prod=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),le.prod(this,t,e)},n.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),le.mean(this,t,e)},n.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),le.min(this,t,e)},n.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),le.max(this,t,e)},n.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),le.argMin(this,t)},n.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),le.argMax(this,t)},n.prototype.cast=function(t){return this.throwIfDisposed(),le.cast(this,t)},n.prototype.add=function(t){return this.throwIfDisposed(),le.add(this,t)},n.prototype.addStrict=function(t){return this.throwIfDisposed(),le.addStrict(this,t)},n.prototype.atan2=function(t){return this.throwIfDisposed(),le.atan2(this,t)},n.prototype.sub=function(t){return this.throwIfDisposed(),le.sub(this,t)},n.prototype.subStrict=function(t){return this.throwIfDisposed(),le.subStrict(this,t)},n.prototype.pow=function(t){return this.throwIfDisposed(),le.pow(this,t)},n.prototype.powStrict=function(t){return this.throwIfDisposed(),le.powStrict(this,t)},n.prototype.mul=function(t){return this.throwIfDisposed(),le.mul(this,t)},n.prototype.mulStrict=function(t){return this.throwIfDisposed(),le.mulStrict(this,t)},n.prototype.div=function(t){return this.throwIfDisposed(),le.div(this,t)},n.prototype.divNoNan=function(t){return this.throwIfDisposed(),le.divNoNan(this,t)},n.prototype.floorDiv=function(t){return this.throwIfDisposed(),le.floorDiv(this,t)},n.prototype.divStrict=function(t){return this.throwIfDisposed(),le.divStrict(this,t)},n.prototype.minimum=function(t){return this.throwIfDisposed(),le.minimum(this,t)},n.prototype.minimumStrict=function(t){return this.throwIfDisposed(),le.minimumStrict(this,t)},n.prototype.maximum=function(t){return this.throwIfDisposed(),le.maximum(this,t)},n.prototype.maximumStrict=function(t){return this.throwIfDisposed(),le.maximumStrict(this,t)},n.prototype.mod=function(t){return this.throwIfDisposed(),le.mod(this,t)},n.prototype.modStrict=function(t){return this.throwIfDisposed(),le.modStrict(this,t)},n.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),le.squaredDifferenceStrict(this,t)},n.prototype.transpose=function(t){return this.throwIfDisposed(),le.transpose(this,t)},n.prototype.notEqual=function(t){return this.throwIfDisposed(),le.notEqual(this,t)},n.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),le.notEqualStrict(this,t)},n.prototype.less=function(t){return this.throwIfDisposed(),le.less(this,t)},n.prototype.lessStrict=function(t){return this.throwIfDisposed(),le.lessStrict(this,t)},n.prototype.equal=function(t){return this.throwIfDisposed(),le.equal(this,t)},n.prototype.equalStrict=function(t){return this.throwIfDisposed(),le.equalStrict(this,t)},n.prototype.lessEqual=function(t){return this.throwIfDisposed(),le.lessEqual(this,t)},n.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),le.lessEqualStrict(this,t)},n.prototype.greater=function(t){return this.throwIfDisposed(),le.greater(this,t)},n.prototype.greaterStrict=function(t){return this.throwIfDisposed(),le.greaterStrict(this,t)},n.prototype.greaterEqual=function(t){return this.throwIfDisposed(),le.greaterEqual(this,t)},n.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),le.greaterEqualStrict(this,t)},n.prototype.logicalAnd=function(t){return this.throwIfDisposed(),le.logicalAnd(this,t)},n.prototype.logicalOr=function(t){return this.throwIfDisposed(),le.logicalOr(this,t)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),le.logicalNot(this)},n.prototype.logicalXor=function(t){return this.throwIfDisposed(),le.logicalXor(this,t)},n.prototype.where=function(t,e){return this.throwIfDisposed(),le.where(t,this,e)},n.prototype.neg=function(){return this.throwIfDisposed(),le.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),le.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),le.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),le.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),le.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),le.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),le.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),le.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),le.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),le.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),le.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),le.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),le.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),le.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),le.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),le.abs(this)},n.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),le.clipByValue(this,t,e)},n.prototype.relu=function(){return this.throwIfDisposed(),le.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),le.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),le.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),le.selu(this)},n.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),le.leakyRelu(this,t)},n.prototype.prelu=function(t){return this.throwIfDisposed(),le.prelu(this,t)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),le.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),le.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),le.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),le.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),le.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),le.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),le.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),le.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),le.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),le.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),le.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),le.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),le.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),le.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),le.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),le.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),le.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),le.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),le.round(this)},n.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),le.step(this,t)},n.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),le.softmax(this,t)},n.prototype.logSoftmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),le.logSoftmax(this,t)},n.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),le.image.resizeBilinear(this,t,e)},n.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),le.image.resizeNearestNeighbor(this,t,e)},n.prototype.conv1d=function(t,e,r,i,o,s){return void 0===i&&(i="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),le.conv1d(this,t,e,r,i,o,s)},n.prototype.conv2d=function(t,e,r,i,o,s){return void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),le.conv2d(this,t,e,r,i,o,s)},n.prototype.conv2dTranspose=function(t,e,r,i,o){return this.throwIfDisposed(),le.conv2dTranspose(this,t,e,r,i,o)},n.prototype.depthwiseConv2D=function(t,e,r,i,o,s){return void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),le.depthwiseConv2d(this,t,e,r,i,o,s)},n.prototype.separableConv2d=function(t,e,r,i,o,s){return void 0===o&&(o=[1,1]),void 0===s&&(s="NHWC"),this.throwIfDisposed(),le.separableConv2d(this,t,e,r,i,o,s)},n.prototype.avgPool=function(t,e,r,i){return this.throwIfDisposed(),le.avgPool(this,t,e,r,i)},n.prototype.maxPool=function(t,e,r,i){return this.throwIfDisposed(),le.maxPool(this,t,e,r,i)},n.prototype.localResponseNormalization=function(t,e,r,i){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=.5),le.localResponseNormalization(this,t,e,r,i)},n.prototype.pool=function(t,e,r,i,o){return this.throwIfDisposed(),le.pool(this,t,e,r,i,o)},n.prototype.variable=function(t,e,r){return void 0===t&&(t=!0),this.throwIfDisposed(),fu().makeVariable(this,t,e,r)},n.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),le.unsortedSegmentSum(this,t,e)},n.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),le.batchToSpaceND(this,t,e)},n.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),le.spaceToBatchND(this,t,e)},n.prototype.topk=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!0),this.throwIfDisposed(),le.topk(this,t,e)},n.prototype.stridedSlice=function(t,e,r,i,o,s,a,u){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),this.throwIfDisposed(),le.stridedSlice(this,t,e,r,i,o,s,a,u)},n.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),le.depthToSpace(this,t,e)},n.prototype.fft=function(){return this.throwIfDisposed(),le.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),le.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),le.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),le.spectral.irfft(this)},n}();Object.defineProperty(Hn,Symbol.hasInstance,{value:function(n){return!!n&&null!=n.dataId&&null!=n.shape&&null!=n.dtype}});var KO,xE,CE,_E,EE,n,vp=function(n){function t(e,r,i,o){var s=n.call(this,e.shape,e.dtype,e.dataId,o)||this;return s.trainable=r,s.name=i,s}return Da(t,n),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!qr(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");fu().disposeTensor(this),this.dataId=e.dataId,fu().incRef(this,null)},t.prototype.dispose=function(){fu().disposeVariable(this),this.isDisposedInternal=!0},t}(Hn);Object.defineProperty(vp,Symbol.hasInstance,{value:function(n){return n instanceof Hn&&null!=n.assign&&n.assign instanceof Function}}),(n=KO||(KO={})).R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6",function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"}(xE||(xE={})),function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"}(CE||(CE={})),function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"}(_E||(_E={})),function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"}(EE||(EE={}));var w7={float32:_E,int32:xE,bool:CE,complex64:EE};function yi(n,t){if("string"===n||"string"===t){if("string"===n&&"string"===t)return"string";throw new Error("Can not upcast "+n+" with "+t)}return w7[n][t]}function DE(n){return yi(n,"int32")}function lr(n,t){if(n.dtype===t.dtype)return[n,t];var e=yi(n.dtype,t.dtype);return[n.cast(e),t.cast(e)]}function QO(n,t){P(n.dtype===t.dtype,function(){return"The dtypes of the first("+n.dtype+") and second("+t.dtype+") input must match"})}function IE(n){var t=[];return function e(r,i,o){if(null!=r){if(r instanceof Hn)return void i.push(r);if(s=r,Array.isArray(s)||"object"==typeof s){var s,a=r;for(var u in a){var c=a[u];o.has(c)||(o.add(c),e(c,i,o))}}}}(n,t,new Set),t}Object.freeze({makeTypesMatch:lr,assertTypesMatch:QO,isTensorInList:function(n,t){return t.some(function(e){return e.id===n.id})},getTensorsInContainer:IE});var SE,YO=function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},n}(),b7=function(){function n(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new YO}return n.prototype.ready=function(){return nt(this,void 0,void 0,function(){var t,e,r;return rt(this,function(i){switch(i.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];t=this.getSortedBackends(),e=0,i.label=1;case 1:return e<t.length?[4,this.initializeBackend(r=t[e]).success]:[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(n.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(t){return t in this.registry||t in this.registryFactory&&!this.initializeBackend(t).asyncInit?this.registry[t]:null},n.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},n.prototype.registerBackend=function(t,e,r){return void 0===r&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:r},!0)},n.prototype.setBackend=function(t){return nt(this,void 0,void 0,function(){var e,r,i;return rt(this,function(o){switch(o.label){case 0:if(null==this.registryFactory[t])throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,null!=this.registry[t]?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new m7(this.backendInstance),[2,!0]}})})},n.prototype.setupRegisteredKernels=function(){var t=this;RO(this.backendName).forEach(function(e){null!=e.setupFunc&&e.setupFunc(t.backendInstance)})},n.prototype.disposeRegisteredKernels=function(t){var e=this;RO(t).forEach(function(r){null!=r.disposeFunc&&r.disposeFunc(e.registry[t])})},n.prototype.initializeBackend=function(t){var e=this,r=this.registryFactory[t];if(null==r)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,s=i.then(function(a){return!(o<e.pendingBackendInitId||(e.registry[t]=a,e.pendingBackendInit=null,0))}).catch(function(a){return!(o<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(a.stack||a.message),1))});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[t]=i,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+t+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,r){return t.registryFactory[r].priority-t.registryFactory[e].priority})},n.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var r=t[e],i=this.initializeBackend(r),s=i.asyncInit;if(s||i.success)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(t,e){var r=this.state.tensorInfo.get(e),i=r.backend,o=this.readSync(e);i.disposeData(e),r.backend=t,t.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(t,e){var r,i=this,o=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},n.prototype.scopedRun=function(t,e,r){t();try{var i=r();return e(),i}catch(o){throw e(),o}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(t){var e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype);return this.addTapeNode(this.state.activeScope.name,{x:t},[e],function(i){return{x:function(){return i.toFloat()}}},[]),e},n.prototype.runKernel=function(t,e,r,i,o){return this.runKernelFunc(null,e,null,t,r,i,o)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(t,e,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(u){o+="complex64"===u.dtype?3:1});var a=i-e-o-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+t+"'")},n.prototype.runKernelFunc=function(t,e,r,i,o,s,a){var u,c=this;void 0===s&&(s=[]),void 0===a&&(a=[]);var d=[],f=this.isTapeOn();null==i&&(i=null!=this.state.activeScope?this.state.activeScope.name:"");var p,g=function(A){f&&(d=A.map(function(_){return c.keep(c.clone(_))}))},v=this.state.numBytes,y=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var w,b=TO(i,this.backendName);return p=null!=b?function(){var A=c.backend.numDataIds();w=b.kernelFunc({inputs:e,attrs:o,backend:c.backend});var _=Array.isArray(w)?w:[w];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(i,A,_);var C=_.map(function(T){return c.makeTensorFromDataId(T.dataId,T.shape,T.dtype)}),E=C.filter(function(T,O){return a[O]});return g((s||[]).slice().concat(E)),C}:function(){var A=c.backend.numDataIds();w=c.tidy(function(){return t(c.backend,g)});var _=Array.isArray(w)?w:[w];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(i,A,_),_},this.scopedRun(function(){return c.state.kernelDepth++},function(){return c.state.kernelDepth--},function(){u=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(i,e,function(){return p()}):p()}),f&&this.addTapeNode(i,e,u,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-y,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(A){return e[A].shape}),outputShapes:u.map(function(A){return A.shape})}),Array.isArray(w)?u:u[0]},n.prototype.makeTensor=function(t,e,r,i){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");i=i||this.backend;var o=t;"string"===(r=r||"float32")&&xl(t[0])&&(o=t.map(function(d){return HO(d)}));var s=i.write(o,e,r),a=new Hn(e,r,s,this.nextTensorId());if(this.incRef(a,i),"string"===r){var u=this.state.tensorInfo.get(s),c=UO(o);this.state.numBytes+=c-u.bytes,u.bytes=c}return a},n.prototype.makeTensorFromDataId=function(t,e,r,i){var o=new Hn(e,r=r||"float32",t,this.nextTensorId());return this.incRef(o,i),o},n.prototype.makeVariable=function(t,e,r,i){void 0===e&&(e=!0),r=r||this.nextVariableId().toString(),null!=i&&i!==t.dtype&&(t=t.asType(i));var o=new vp(t,e,r,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},n.prototype.incRef=function(t,e){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===r){this.state.numDataBuffers++;var i=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(i=t.size*gE(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof vp||this.track(t)},n.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[t])},n.prototype.disposeVariable=function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]},n.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},n.prototype.profile=function(t){return nt(this,void 0,void 0,function(){var e,r;return rt(this,function(i){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},n.prototype.addTapeNode=function(t,e,r,i,o){var s=this,a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:r,saved:o},u=function p7(n){return av.get(n)}(t);null!=u&&(i=u.gradFunc),null!=i&&(a.gradient=function(c){return c=c.map(function(d,f){if(null==d){var p=r[f],g=mp(p.size,p.dtype);return s.makeTensor(g,p.shape,p.dtype)}return d}),i(c.length>1?c:c[0],o)}),this.state.activeTape.push(a)},n.prototype.keep=function(t){return t.kept=!0,t},n.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},n.prototype.endScope=function(t){for(var e=this,r=IE(t),i=new Set(r.map(function(u){return u.id})),o=0;o<this.state.activeScope.track.length;o++){var s=this.state.activeScope.track[o];s.kept||i.has(s.id)||s.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==a.id||e.track(u)})},n.prototype.gradients=function(t,e,r,i){var o=this;if(void 0===i&&(i=!1),P(e.length>0,function(){return"gradients() received an empty list of xs."}),null!=r&&"float32"!==r.dtype)throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var s=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",t)});P(s instanceof Hn,function(){return"The result y returned by f() must be a tensor."});var a=function(u,c,d){for(var f={},p={},g=0;g<c.length;g++)f[c[g].id]=!0;for(g=0;g<u.length;g++){var v=(T=u[g]).inputs;for(var y in v){for(var w=v[y],b=!1,A=0;A<c.length;A++)if(f[w.id]){T.outputs.forEach(function(F){return f[F.id]=!0}),b=!0,p[T.id]=!0;break}if(b)break}}var _={};_[d.id]=!0;var C={};for(g=u.length-1;g>=0;g--)for(v=(T=u[g]).inputs,A=0;A<T.outputs.length;A++)if(_[T.outputs[A].id]){for(var y in v)_[v[y].id]=!0,C[T.id]=!0;break}var E=[];for(g=0;g<u.length;g++){var T;if(p[(T=u[g]).id]&&C[T.id]){var O={};for(var y in T.inputs){var N=T.inputs[y];f[N.id]&&(O[y]=N)}var B=Object.assign({},T);B.inputs=O,B.outputs=T.outputs,E.push(B)}}return E}(this.state.activeTape,e,s);if(!i&&0===a.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,c,d={};d[s.id]=r??(c=yE(at(u=s.shape),"float32"),H.makeTensor(c,u,"float32")),function(p,g,v){for(var y=function(b){var A=g[b],_=[];if(A.outputs.forEach(function(O){var N=p[O.id];_.push(null!=N?N:null)}),null==A.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+A.kernelName+".");var C=A.gradient(_),E=function(O){if(!(O in C))throw new Error("Cannot backprop through input "+O+". Available gradients found: "+Object.keys(C)+".");var N=o.tidy(function(){return C[O]()});if("float32"!==N.dtype)throw new Error("Error in gradient for op "+A.kernelName+". The gradient of input "+O+" must have 'float32' dtype, but has '"+N.dtype+"'");var B=A.inputs[O];if(!qr(N.shape,B.shape))throw new Error("Error in gradient for op "+A.kernelName+". The gradient of input '"+O+"' has shape '"+N.shape+"', which does not match the shape of the input '"+B.shape+"'");if(null==p[B.id])p[B.id]=N;else{var F=p[B.id];p[B.id]=F.add(N),F.dispose()}};for(var T in A.inputs)E(T)},w=g.length-1;w>=0;w--)y(w)}(d,a);var f=e.map(function(p){return d[p.id]});return 0===o.state.gradientDepth&&(o.state.activeTape.forEach(function(p){for(var g=0,v=p.saved;g<v.length;g++)v[g].dispose()}),o.state.activeTape=null),{value:s,grads:f}})},n.prototype.customGrad=function(t){var e=this;return P(Cl(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];P(i.every(function(a){return a instanceof Hn}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return i.forEach(function(a,u){s[u]=a}),e.runKernelFunc(function(a,u){return P((r=t.apply(void 0,i.concat([u]))).value instanceof Hn,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),P(Cl(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},s,function(a,u){var c=r.gradFunc(a,u),d=Array.isArray(c)?c:[c];P(d.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),P(d.every(function(p){return p instanceof Hn}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return d.forEach(function(p,g){f[g]=function(){return p}}),f})}},n.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},n.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},n.prototype.time=function(t){return nt(this,void 0,void 0,function(){var e,r;return rt(this,function(i){switch(i.label){case 0:return e=Sa(),[4,this.backend.time(t)];case 1:return(r=i.sent()).wallMs=Sa()-e,[2,r]}})})},n.prototype.track=function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new YO,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n}(),H=function(){var n=function(){if(null==SE){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}SE=e}return SE}();if(null==n._tfengine){var t=new f7(n);n._tfengine=new b7(t)}return SO=n._tfengine.ENV,fu=function(){return n._tfengine},n._tfengine}();function XO(){return typeof window<"u"&&null!=window.document||typeof WorkerGlobalScope<"u"}var hc=de();hc.registerFlag("DEBUG",function(){return!1},function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),hc.registerFlag("IS_BROWSER",function(){return XO()}),hc.registerFlag("IS_NODE",function(){return typeof process<"u"&&void 0!==process.versions&&void 0!==process.versions.node}),hc.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),hc.registerFlag("PROD",function(){return!1}),hc.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return hc.getBool("DEBUG")}),hc.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),hc.registerFlag("IS_TEST",function(){return!1});var pv,ys,ws,ef={},TE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function JO(n,t){ef[n]=t}function hu(n){n in ef||(ef[n]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&2===i)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete ef[e]},!1),1===e?r.getContext("webgl",TE)||r.getContext("experimental-webgl",TE):r.getContext("webgl2",TE)}(n));var t=ef[n];return t.isContextLost()?(delete ef[n],hu(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),ef[n])}function sb(n,t){return[t,n]}function gv(n){var t=at(n);return ib(Math.ceil(t/4))}function mv(n,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(n/2))]}function RE(n,t){var e,r,i,o,s,a,u,c,d,f=n;return 2===de().getNumber("WEBGL_VERSION")?(e=f.R32F,r=f.R16F,i=f.RGBA16F,o=f.RGBA32F,s=f.RED,a=4,u=1,c=f.HALF_FLOAT,d=f.FLOAT):(e=n.RGBA,r=n.RGBA,i=n.RGBA,o=f.RGBA,s=n.RGBA,a=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,d=n.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:d}}function $e(n,t,e){var r=e();return t&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+$O(i,o))}(n),r}function ZO(n){return!!(de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===n||5.96e-8<Math.abs(n)&&Math.abs(n)<65504)}function $O(n,t){switch(t){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function vv(n,t,e){return pc(n,t,function(){return n.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function eN(n,t,e){var r=pc(n,t,function(){return n.createShader(n.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if($e(n,t,function(){return n.shaderSource(r,e)}),$e(n,t,function(){return n.compileShader(r)}),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function tN(n,t,e){var r=pc(n,t,function(){return n.createShader(n.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if($e(n,t,function(){return n.shaderSource(r,e)}),$e(n,t,function(){return n.compileShader(r)}),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw function(i,o){var s=C7.exec(o);if(null==s)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var a=+s[1],u=i.split("\n"),c=u.length.toString().length+2,d=u.map(function(w,b){return $d((b+1).toString(),c)+w}),f=0,p=0;p<d.length;p++)f=Math.max(d[p].length,f);var g=d.slice(0,a-1),v=d.slice(a-1,a),y=d.slice(a);console.log(g.join("\n")),console.log(o.split("\n")[0]),console.log("%c "+$d(v[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(y.join("\n"))}(e,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(pv||(pv={})),function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"}(ys||(ys={})),function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(ws||(ws={}));var ab,ub,C7=/ERROR: [0-9]+:([0-9]+):/g;function nN(n,t){return pc(n,t,function(){return n.createProgram()},"Unable to create WebGLProgram.")}function rN(n,t,e){if($e(n,t,function(){return n.linkProgram(e)}),!1===n.getProgramParameter(e,n.LINK_STATUS))throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function cb(n,t,e){if($e(n,t,function(){return n.validateProgram(e)}),!1===n.getProgramParameter(e,n.VALIDATE_STATUS))throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function iN(n,t,e){var r=pc(n,t,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return $e(n,t,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),$e(n,t,function(){return n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)}),r}function oN(n,t,e){var r=pc(n,t,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return $e(n,t,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)}),$e(n,t,function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)}),r}function sN(n,t){return pc(n,t,function(){return n.createTexture()},"Unable to create WebGLTexture.")}function aN(n,t){var e=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||t<=0){var r="["+n+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>e||t>e)throw r="["+n+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+e+"x"+e+"].")}function uN(n,t){return pc(n,t,function(){return n.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ME(n,t,e,r,i,o,s,a){var u=n.getAttribLocation(e,r);return-1!==u&&($e(n,t,function(){return n.bindBuffer(n.ARRAY_BUFFER,i)}),$e(n,t,function(){return n.vertexAttribPointer(u,o,n.FLOAT,!1,s,a)}),$e(n,t,function(){return n.enableVertexAttribArray(u)}),!0)}function cN(n,t,e,r){pN(n,r),$e(n,t,function(){return n.activeTexture(n.TEXTURE0+r)}),$e(n,t,function(){return n.bindTexture(n.TEXTURE_2D,e)})}function lN(n,t,e,r){return pc(n,t,function(){return n.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function dN(n,t,e){return n.getUniformLocation(t,e)}function fN(n,t,e,r,i,o){$e(n,t,function(){return cN(n,t,r,o)}),$e(n,t,function(){return n.uniform1i(i,o)})}function lb(n,t,e,r){$e(n,t,function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)}),$e(n,t,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0)})}function kE(n,t,e){$e(n,t,function(){return n.bindFramebuffer(n.FRAMEBUFFER,e)}),$e(n,t,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)})}function yv(n){var t=n.checkFramebufferStatus(n.FRAMEBUFFER);if(t!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+hN(n,t))}function hN(n,t){switch(t){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function pc(n,t,e,r){var i=$e(n,t,function(){return e()});if(null==i)throw new Error(r);return i}function pN(n,t){var e=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+n.TEXTURE0;if(r<n.TEXTURE0||r>e)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+e+"].")}function wv(n,t){return void 0===t&&(t=2),at(n.slice(0,n.length-t))}function bv(n){if(0===n.length)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function db(n){var t=[1,1,1];return 0===n.length||1===n.length&&1===n[0]||(t=[wv(n)].concat(bv(n))),t}function gN(n,t){var e;void 0===t&&(t=!1);var r=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(n=n.map(function(c,d){return d>=n.length-2?hE(n[d]):n[d]})).length&&(n=[2,n[0]])),2!==n.length){var i=Al(n);n=i.newShape}var o=at(n);if(n.length<=1&&o<=r)return[1,o];if(2===n.length&&n[0]<=r&&n[1]<=r)return n;if(3===n.length&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(3===n.length&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(4===n.length&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(4===n.length&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(t){var s=wv(n),a=2,u=2;return n.length&&(a=(e=bv(n))[0],u=e[1]),ib(o=s*(a/2)*(u/2)).map(function(c){return 2*c})}return ib(o)}function fb(n){return n%2==0}function Av(n,t){if(qr(n=n.slice(-2),t=t.slice(-2))||!n.length||!t.length||0===n[0]||0===n[1]||0===t[0]||0===t[1])return!0;if(n.length!==t.length){var e=n.slice(-1)[0],r=t.slice(-1)[0];if(e===r||fb(e)&&fb(r)&&(1===n[0]||1===t[0]))return!0}return n[1]===t[1]&&fb(n[0])&&fb(t[0])}function mN(n){if(null==ab){var t=hu(n);ab=t.getParameter(t.MAX_TEXTURE_SIZE)}return ab}function vN(n){if(null==ub){var t=hu(n);ub=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ub)}function yN(n){if(0===n)return 0;var t=hu(n);return bs(t,"EXT_disjoint_timer_query_webgl2")&&2===n?2:bs(t,"EXT_disjoint_timer_query")?1:0}function bs(n,t){return null!=n.getExtension(t)}function PE(n){try{if(null!=hu(n))return!0}catch{return!1}return!1}function wN(n){if(0===n)return!1;var t=hu(n);if(1===n){if(!bs(t,"OES_texture_float"))return!1}else if(!bs(t,"EXT_color_buffer_float"))return!1;return OE(t)}function bN(n){if(0===n)return!1;var t=hu(n);if(1!==n){if(bs(t,"EXT_color_buffer_float"))return OE(t);if(bs(t,"EXT_color_buffer_half_float")){var e=t.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=RE(r,i),s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(s),r.deleteFramebuffer(a),u}(t,e)}return!1}return!!bs(t,"OES_texture_float")&&!!bs(t,"WEBGL_color_buffer_float")&&OE(t)}function OE(n){var t=RE(n),e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(e),n.deleteFramebuffer(r),i}function AN(n){return 2===n&&null!=hu(n).fenceSync}var _7=Object.freeze({callAndCheck:$e,canBeRepresented:ZO,getWebGLErrorMessage:$O,getExtensionOrThrow:vv,createVertexShader:eN,createFragmentShader:tN,createProgram:nN,linkProgram:rN,validateProgram:cb,createStaticVertexBuffer:iN,createStaticIndexBuffer:oN,getNumChannels:function(){return 2===de().getNumber("WEBGL_VERSION")?1:4},createTexture:sN,validateTextureSize:aN,createFramebuffer:uN,bindVertexBufferToProgramAttribute:ME,bindTextureUnit:cN,unbindTextureUnit:function(n,t,e){pN(n,e),$e(n,t,function(){return n.activeTexture(n.TEXTURE0+e)}),$e(n,t,function(){return n.bindTexture(n.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:lN,getProgramUniformLocation:dN,bindTextureToProgramUniformSampler:fN,bindCanvasToFramebuffer:function(n,t){$e(n,t,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),$e(n,t,function(){return n.viewport(0,0,n.canvas.width,n.canvas.height)}),$e(n,t,function(){return n.scissor(0,0,n.canvas.width,n.canvas.height)})},bindColorTextureToFramebuffer:lb,unbindColorTextureFromFramebuffer:kE,validateFramebuffer:yv,getFramebufferErrorMessage:hN,getBatchDim:wv,getRowsCols:bv,getShapeAs3D:db,getTextureShapeFromLogicalShape:gN,isReshapeFree:Av,getWebGLMaxTextureSize:mN,resetMaxTextureSize:function(){ab=null},resetMaxTexturesInShader:function(){ub=null},getMaxTexturesInShader:vN,getWebGLDisjointQueryTimerVersion:yN,hasExtension:bs,isWebGLVersionEnabled:PE,isCapableOfRenderingToFloatTexture:wN,isDownloadFloatTextureEnabled:bN,isWebGLFenceEnabled:AN}),Rt=de();function xN(n){de().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Je(n,t){return H.tidy(n,t)}function Qo(n){IE(n).forEach(function(t){return t.dispose()})}function hb(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];de().getBool("IS_TEST")||console.warn.apply(console,n)}function pu(n,t){var e=n;if(Ri(n))return"string"===t?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(e)||Ri(e)&&"string"!==t;)r.push(e.length),e=e[0];return Array.isArray(n)&&de().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,s,a){if(a=a||[],Array.isArray(o)||Ri(o)){P(s.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),P(o.length===s[0],function(){return"Element arr["+a.join("][")+"] should have "+s[0]+" elements, but has "+o.length+" elements"});for(var u=s.slice(1),c=0;c<o.length;++c)i(o[c],u,a.concat(c))}else P(0===s.length,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"})}(n,r,[]),r}function CN(n,t,e,r){if(null!=n&&("numeric"!==n&&n!==t||"numeric"===n&&"string"===t))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+n+" tensor, but got "+t+" tensor")}function M(n,t,e,r){if(void 0===r&&(r="numeric"),n instanceof Hn)return CN(r,n.dtype,t,e),n;var i=gp(n);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),CN(r,i,t,e),null==n||!Ri(n)&&!Array.isArray(n)&&"number"!=typeof n&&"boolean"!=typeof n&&"string"!=typeof n)throw new Error("Argument '"+t+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+(null==n?"null":n.constructor.name)+"'");var s=pu(n,i);Ri(n)||Array.isArray(n)||(n=[n]);var a="string"!==i?mE(n,i,de().getBool("DEBUG")):fc(n,[],!0);return H.makeTensor(a,s,i)}function xv(n,t,e,r){if(void 0===r&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+t+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return n.map(function(i,o){return M(i,t+"["+o+"]",e)},r)}function NE(n,t){for(var e=0;e<n.length;++e)if(n[n.length-e-1]!==t-1-e)return!1;return!0}function _N(n,t,e){for(var r=n.length+t.length,i=[],o=0,s=0,a=0;a<r;a++)-1===e.indexOf(a)?i.push(n[o++]):i.push(t[s++]);return i}function Mi(n,t){for(var e=[],r=n.length,i=0;i<r;i++)-1===t.indexOf(i)&&e.push(n[i]);return[e,t.map(function(o){return n[o]})]}function _o(n,t){return _N(n,t.map(function(e){return 1}),t)}function Yo(n,t,e){P(NE(t,e),function(){return n+" supports only inner-most axes for now. Got axes "+t+" and rank-"+e+" input."})}function Ta(n,t){if(NE(n,t))return null;for(var e=[],r=0;r<t;++r)-1===n.indexOf(r)&&e.push(r);return n.forEach(function(i){return e.push(i)}),e}function pb(n){return n.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function Ra(n,t){for(var e=[],r=t-n;r<t;++r)e.push(r);return e}function EN(n,t){var e=n[0].length;n.forEach(function(i,o){P(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),P(t>=0&&t<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=n[0];n.forEach(function(i,o){for(var s=0;s<e;s++)P(s===t||i[s]===r[s],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function tf(n,t){for(var e=n[0].slice(),r=1;r<n.length;r++)e[t]+=n[r][t];return e}function W(n){var t=Object.keys(n);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var e=t[0],r=n[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];H.startScope(e);try{var a=r.apply(void 0,o);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),H.endScope(a),a}catch(u){throw H.endScope(null),u}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}Rt.registerFlag("HAS_WEBGL",function(){return Rt.getNumber("WEBGL_VERSION")>0}),Rt.registerFlag("WEBGL_VERSION",function(){return PE(2)?2:PE(1)?1:0}),Rt.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===Rt.get("WEBGL_VERSION")}),Rt.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Rt.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Rt.registerFlag("WEBGL_PACK",function(){return Rt.getBool("HAS_WEBGL")}),Rt.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_PACK_CLIP",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Rt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_PACK_REDUCE",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_CONV_IM2COL",function(){return Rt.getBool("WEBGL_PACK")}),Rt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return mN(Rt.getNumber("WEBGL_VERSION"))}),Rt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return vN(Rt.getNumber("WEBGL_VERSION"))}),Rt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var n=Rt.getNumber("WEBGL_VERSION");return 0===n?0:yN(n)}),Rt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Rt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n}),Rt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return wN(Rt.getNumber("WEBGL_VERSION"))}),Rt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Rt.getBool("WEBGL_FORCE_F16_TEXTURES")&&Rt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Rt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return bN(Rt.getNumber("WEBGL_VERSION"))}),Rt.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return AN(Rt.getNumber("WEBGL_VERSION"))}),Rt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Rt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),GO=xN;var ki=W({complex_:function(n,t){var e=M(n,"real","complex"),r=M(t,"imag","complex");return fn(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),H.runKernelFunc(function(i){return i.complex(e,r)},{$real:e,$imag:r})}}),Js=W({real_:function(n){var t=M(n,"input","real");return H.runKernelFunc(function(e){return e.real(t)},{$input:t})}}),gu=W({imag_:function(n){var t=M(n,"input","imag");return H.runKernelFunc(function(e){return e.imag(t)},{$input:t})}});function Pi(n,t,e){return _l(n,t,pu(n,e),e)}function _l(n,t,e,r){if(null==r&&(r=gp(n)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ri(n)&&!Array.isArray(n)&&"number"!=typeof n&&"boolean"!=typeof n&&"string"!=typeof n)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){wE(t);var i=at(t),o=at(e);P(i===o,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+o});for(var s=0;s<e.length;++s){var u=s!==e.length-1||e[s]!==at(t.slice(s));P(e[s]===t[s]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+t+"). "})}}return Ri(n)||Array.isArray(n)||(n=[n]),t=t||e,n="string"!==r?mE(n,r,de().getBool("DEBUG")):fc(n,[],!0),H.makeTensor(n,t,r)}function We(n,t){if((Ri(n)&&"string"!==t||Array.isArray(n))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ri(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return _l(n,[],[],t)}function Kr(n,t){Zd(n);var e=pu(n,t);if(1!==e.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return _l(n,null,e,t)}function El(n,t,e){if(Zd(n),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=pu(n,e);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return _l(n,t,r,e)}function FE(n,t,e){if(Zd(n),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=pu(n,e);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return _l(n,t,r,e)}function Xo(n,t,e){if(Zd(n),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=pu(n,e);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return _l(n,t,r,e)}function yp(n,t){if(void 0===t&&(t="float32"),"complex64"===t){var e=yp(n,"float32"),r=ar(n,"float32");return ki(e,r)}var i=yE(at(n),t);return H.makeTensor(i,n,t)}function ar(n,t){if(void 0===t&&(t="float32"),"complex64"===t){var e=ar(n,"float32"),r=ar(n,"float32");return ki(e,r)}var i=mp(at(n),t);return H.makeTensor(i,n,t)}function mu(n,t,e){return H.runKernelFunc(function(r){return r.fill(n,t,e)},{})}function gb(n,t,e,r){if(void 0===e&&(e=1),void 0===r&&(r="float32"),0===e)throw new Error("Cannot have a step of zero");if(n===t||n<t&&e<0||t<n&&e>1)return ar([0],r);var i=mp(Math.abs(Math.ceil((t-n)/e)),r);t<n&&1===e&&(e=-1),i[0]=n;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return Kr(i,r)}var DN=W({onesLike_:function(n){var t=M(n,"x","onesLike");if("complex64"===t.dtype){var e=DN(Js(t)),r=hn(gu(t));return ki(e,r)}return H.runKernelFunc(function(i){return i.onesLike(t)},{$x:t},function(i,o){return{$x:function(){return hn(i)}}})}}),hn=W({zerosLike_:function(n){var t=M(n,"x","zerosLike");return H.runKernelFunc(function(e){return e.zerosLike(t)},{$x:t},function(e,r){return{$x:function(){return hn(e)}}})}}),oi=W({concat_:function(n,t){void 0===t&&(t=0),P(n.length>=1,function(){return"Pass at least one tensor to concat"});var e=xv(n,"tensors","concat");"complex64"===e[0].dtype&&e.forEach(function(a){if("complex64"!==a.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+a.dtype+". ")}),t=Gr(t,e[0].shape)[0];var r=tf(e.map(function(a){return a.shape}),t);if(0===at(r))return Pi([],r);if(1===(e=e.filter(function(a){return a.size>0})).length)return e[0];var i=e.map(function(a){return a.shape});return EN(i,t),H.runKernelFunc(function(a){return a.concat(e,t)},e,function(a){var u=i.map(function(c){return c[t]});return BE(a,u,t).map(function(c){return function(){return c}})},"Concat",{axis:t})}}),R7=W({concat1d_:function(n){return oi(n,0)}}),M7=W({concat2d_:function(n,t){return oi(n,t)}}),k7=W({concat3d_:function(n,t){return oi(n,t)}}),P7=W({concat4d_:function(n,t){return oi(n,t)}}),BE=W({split_:function(n,t,e){void 0===e&&(e=0);var r,i=M(n,"x","split");return e=Gr(e,i.shape)[0],"number"==typeof t?(P(i.shape[e]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(i.shape[e]/t)):(P(i.shape[e]===t.reduce(function(o,s){return o+s}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),H.runKernelFunc(function(o){return o.split(i,r,e)},{$x:i},function(o){return{$x:function(){return oi(o,e)}}})}});function nf(n,t){return n(t={exports:{}},t.exports),t.exports}typeof globalThis<"u"||typeof window<"u"||typeof global<"u"&&global;var O7=nf(function(n){!function(t,e,r){function i(a){var u,c=this,d=(u=4022871197,function(f){f=f.toString();for(var p=0;p<f.length;p++){var g=.02519603282416938*(u+=f.charCodeAt(p));g-=u=g>>>0,u=(g*=u)>>>0,u+=4294967296*(g-=u)}return 2.3283064365386963e-10*(u>>>0)});c.next=function(){var f=2091639*c.s0+2.3283064365386963e-10*c.c;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=0|f)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(a),c.s0<0&&(c.s0+=1),c.s1-=d(a),c.s1<0&&(c.s1+=1),c.s2-=d(a),c.s2<0&&(c.s2+=1),d=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function s(a,u){var c=new i(a),d=u&&u.state,f=c.next;return f.int32=function(){return 4294967296*c.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,d&&("object"==typeof d&&o(d,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.alea=s}(0,n)}),N7=nf(function(n){!function(t,e,r){function i(a){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},a===(0|a)?u.x=a:c+=a;for(var d=0;d<c.length+64;d++)u.x^=0|c.charCodeAt(d),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function s(a,u){var c=new i(a),d=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,d&&("object"==typeof d&&o(d,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.xor128=s}(0,n)}),F7=nf(function(n){!function(t,e,r){function i(a){var u=this,c="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(0|a)?u.x=a:c+=a;for(var d=0;d<c.length+64;d++)u.x^=0|c.charCodeAt(d),d==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function s(a,u){var c=new i(a),d=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,d&&("object"==typeof d&&o(d,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.xorwow=s}(0,n)}),B7=nf(function(n){!function(t,e,r){function i(a){var u=this;u.next=function(){var c,d,f=u.x,p=u.i;return c=f[p],d=(c^=c>>>7)^c<<24,d^=(c=f[p+1&7])^c>>>10,d^=(c=f[p+3&7])^c>>>3,d^=(c=f[p+4&7])^c<<7,c=f[p+7&7],d^=(c^=c<<13)^c<<9,f[p]=d,u.i=p+1&7,d},function(c,d){var f,p=[];if(d===(0|d))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[7&f]=p[7&f]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&0===p[f];++f);for(8==f&&(p[7]=-1),c.x=p,c.i=0,f=256;f>0;--f)c.next()}(u,a)}function o(a,u){return u.x=a.x.slice(),u.i=a.i,u}function s(a,u){null==a&&(a=+new Date);var c=new i(a),d=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,d&&(d.x&&o(d,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.xorshift7=s}(0,n)}),L7=nf(function(n){!function(t,e,r){function i(a){var u=this;u.next=function(){var c,d,f=u.w,p=u.X,g=u.i;return u.w=f=f+1640531527|0,d=p[g+34&127],c=p[g=g+1&127],d^=d<<13,c^=c<<17,d=p[g]=(d^=d>>>15)^(c^=c>>>12),u.i=g,d+(f^f>>>16)|0},function(c,d){var f,p,g,v,y,w=[],b=128;for(d===(0|d)?(p=d,d=null):(d+="\0",p=0,b=Math.max(b,d.length)),g=0,v=-32;v<b;++v)d&&(p^=d.charCodeAt((v+32)%d.length)),0===v&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,v>=0&&(g=0==(f=w[127&v]^=p+(y=y+1640531527|0))?g+1:0);for(g>=128&&(w[127&(d&&d.length||0)]=-1),g=127,v=512;v>0;--v)p=w[g+34&127],f=w[g=g+1&127],p^=p<<13,f^=f<<17,w[g]=(p^=p>>>15)^(f^=f>>>12);c.w=y,c.X=w,c.i=g}(u,a)}function o(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function s(a,u){null==a&&(a=+new Date);var c=new i(a),d=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,d&&(d.X&&o(d,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.xor4096=s}(0,n)}),U7=nf(function(n){!function(t,e,r){function i(a){var u=this,c="";u.next=function(){var f=u.b,p=u.c,g=u.d,v=u.a;return f=f<<25^f>>>7^p,p=p-g|0,g=g<<24^g>>>8^v,v=v-f|0,u.b=f=f<<20^f>>>12^p,u.c=p=p-g|0,u.d=g<<16^p>>>16^v,u.a=v-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=0|a):c+=a;for(var d=0;d<c.length+20;d++)u.b^=0|c.charCodeAt(d),u.next()}function o(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function s(a,u){var c=new i(a),d=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do{var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152}while(0===p);return p},f.int32=c.next,f.quick=f,d&&("object"==typeof d&&o(d,c),f.state=function(){return o(c,{})}),f}e&&e.exports?e.exports=s:this.tychei=s}(0,n)}),rf=nf(function(n){!function(t,e){var r,i=this,o=256,a="random",u=e.pow(o,6),c=e.pow(2,52),d=2*c,f=o-1;function p(b,A,_){var C=[],E=y(function N(B,F){var X,G=[],re=typeof B;if(F&&"object"==re)for(X in B)try{G.push(N(B[X],F-1))}catch{}return G.length?G:"string"==re?B:B+"\0"}((A=1==A?{entropy:!0}:A||{}).entropy?[b,w(t)]:b??function(){try{var N;return r&&(N=r.randomBytes)?N=N(o):(N=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(N)),w(N)}catch{var B=i.navigator,F=B&&B.plugins;return[+new Date,i,F,i.screen,w(t)]}}(),3),C),T=new g(C),O=function(){for(var N=T.g(6),B=u,F=0;N<c;)N=(N+F)*o,B*=o,F=T.g(1);for(;N>=d;)N/=2,B/=2,F>>>=1;return(N+F)/B};return O.int32=function(){return 0|T.g(4)},O.quick=function(){return T.g(4)/4294967296},O.double=O,y(w(T.S),t),(A.pass||_||function(N,B,F,X){return X&&(X.S&&v(X,T),N.state=function(){return v(T,{})}),F?(e[a]=N,B):N})(O,E,"global"in A?A.global:this==e,A.state)}function g(b){var A,_=b.length,C=this,E=0,T=C.i=C.j=0,O=C.S=[];for(_||(b=[_++]);E<o;)O[E]=E++;for(E=0;E<o;E++)O[E]=O[T=f&T+b[E%_]+(A=O[E])],O[T]=A;(C.g=function(N){for(var B,F=0,X=C.i,G=C.j,re=C.S;N--;)B=re[X=f&X+1],F=F*o+re[f&(re[X]=re[G=f&G+B])+(re[G]=B)];return C.i=X,C.j=G,F})(o)}function v(b,A){return A.i=b.i,A.j=b.j,A.S=b.S.slice(),A}function y(b,A){for(var _,C=b+"",E=0;E<C.length;)A[f&E]=f&(_^=19*A[f&E])+C.charCodeAt(E++);return w(A)}function w(b){return String.fromCharCode.apply(0,b)}if(e["seed"+a]=p,y(e.random(),t),n.exports){n.exports=p;try{r=Ni(902)}catch{}}}([],Math)});rf.alea=O7,rf.xor128=N7,rf.xorwow=F7,rf.xorshift7=B7,rf.xor4096=L7,rf.tychei=U7;var mb=rf.alea,LE=function(){function n(t,e,r,i,o){this.mean=t,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=o||Math.random();this.random=mb(s.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,r,i=!1;!i;){var o=void 0,s=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(s=2*this.random()-1)*s}while(a>=1||0===a);var u=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*s*u,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},n.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},n.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},n}(),z7=function(){function n(t,e,r,i){this.alpha=t,this.beta=1/e,this.dtype=r;var o=i||Math.random();this.randu=mb(o.toString()),this.randn=new LE(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var t,e,r,i,o,s;;){do{i=this.randn.nextValue(),s=1+this.c*i}while(s<=0);if(e=1-.331*(t=i*i)*t,r=.5*t+this.d*(1-(s*=s*s)+Math.log(s)),(o=this.randu())<e||Math.log(o)<r)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},n.prototype.convertValue=function(t){return"float32"===this.dtype?t:Math.round(t)},n}(),j7=function(){function n(t,e,r,i){var o=this;if(void 0===t&&(t=0),void 0===e&&(e=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=t,this.range=e-t,this.dtype=r,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=mb(i)}return n.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n}();function Lt(n,t,e){return void 0===t&&(t="float32"),t=t||"float32",wE(n),new hv(n,t,e)}var IN=W({batchToSpaceND_:function(n,t,e){var r=M(n,"x","batchToSpaceND"),i=t.reduce(function(o,s){return o*s});return P(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),P(e.length===t.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+t.length}),P(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i}),H.runKernelFunc(function(o){return o.batchToSpaceND(r,t,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(t,e)}}})}}),W7=W({broadcastTo_:function(n,t){var e=M(n,"broadcastTo","x"),r=e.shape;if(t.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<e.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+e.rank+".");if(t.length>e.rank){for(var i=e.shape.slice();i.length<t.length;)i.unshift(1);e=e.reshape(i)}for(var o=Array.from(t),s=t.length-1;s>=0;s--)if(e.shape[s]===t[s])o[s]=1;else if(1!==e.shape[s])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var a=o.map(function(u,c){return u>1?c:-1}).filter(function(u){return u>=0});return 0===a.length?e.clone():H.runKernelFunc(function(u){return u.tile(e,o)},{input:e},function(u){return{input:function(){return u.sum(a,!0)}}})}}),V7=W({cast_:function(n,t){var e=M(n,"x","cast");if(!BO(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==e.dtype||"string"!==t&&"string"===e.dtype)throw new Error("Only strings can be casted to strings");return H.runKernelFunc(function(i){return i.cast(e,t)},{x:e},function(i){return{x:function(){return i.clone()}}},"Cast",{dtype:t})}}),q7=W({clone_:function(n){var t=M(n,"x","clone",null);return H.runKernelFunc(function(){return H.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),G7=W({cumsum_:function(n,t,e,r){void 0===t&&(t=0),void 0===e&&(e=!1),void 0===r&&(r=!1);var i=M(n,"x","cumsum"),o=Ta([t|=0],i.rank),s=i;null!=o&&(s=i.transpose(o));var a=Ra(1,i.rank)[0],u=H.runKernelFunc(function(c){return c.cumsum(s,a,e,r)},{permutedX:s},function(c){return{permutedX:function(){return c.cumsum(t,e,!r)}}});return null!=o&&(u=u.transpose(o)),u}}),K7=W({depthToSpace_:function(n,t,e){void 0===e&&(e="NHWC");var r=M(n,"x","depthToSpace"),i="NHWC"===e?r.shape[1]:r.shape[2],o="NHWC"===e?r.shape[2]:r.shape[3],s="NHWC"===e?r.shape[3]:r.shape[1];return P(i*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+"  for depthToSpace with input shape\n      "+r.shape}),P(o*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+" for depthToSpace with input shape\n          "+r.shape}),P(s%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+s+" for depthToSpace with input shape "+r.shape}),H.runKernelFunc(function(a){return a.depthToSpace(r,t,e)},{$x:r})}}),Zs=W({expandDims_:function(n,t){void 0===t&&(t=0);var e=M(n,"x","expandDims",null);P(t<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return t<0&&(P(-(e.rank+1)<=t,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),t=e.rank+t+1),r.splice(t,0,1),Ma(e,r)}}),SN=W({eye_:function(n,t,e,r){void 0===r&&(r="float32"),null==t&&(t=n);for(var i=Lt([n,t],r),o=n<=t?n:t,s=0;s<o;++s)i.set(1,s,s);var a=i.toTensor().as2D(n,t);if(null==e)return a;if(1===e.length)return wp(Zs(a,0),[e[0],1,1]);if(2===e.length)return wp(Zs(Zs(a,0),0),[e[0],e[1],1,1]);if(3===e.length)return wp(Zs(Zs(Zs(a,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),Q7=W({multinomial_:function(n,t,e,r){void 0===r&&(r=!1);var i=M(n,"logits","multinomial"),o=i.size,s=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);e=e||Math.random();var a=1===s?i.as2D(1,-1):i,u=H.runKernelFunc(function(c){return c.multinomial(a,r,t,e)},{logits2D:a});return 1===s?u.as1D():u}}),UE=W({oneHot_:function(n,t,e,r){if(void 0===e&&(e=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var i=M(n,"indices","oneHot","int32"),o=i.shape.concat([t]);return i=i.flatten(),H.runKernelFunc(function(s){return s.oneHot(i,t,e,r)},{$indices:i},function(s){return{$indices:function(){return ar(i.shape,"float32")}}}).reshape(o)}}),sf=W({pad_:function(n,t,e){void 0===e&&(e=0);var r=M(n,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return H.runKernelFunc(function(o){return o.pad(r,t,e)},{x:r},function(o){var s=t.map(function(a){return a[0]});return{x:function(){return o.slice(s,r.shape)}}},"PadV2",{paddings:t,constantValue:e})}}),Y7=W({pad1d_:function(n,t,e){return void 0===e&&(e=0),P(2===t.length,function(){return"Invalid number of paddings. Must be length of 2."}),sf(n,[t],e)}}),X7=W({pad2d_:function(n,t,e){return void 0===e&&(e=0),P(2===t.length&&2===t[0].length&&2===t[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),sf(n,t,e)}}),J7=W({pad3d_:function(n,t,e){return void 0===e&&(e=0),P(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),sf(n,t,e)}}),Z7=W({pad4d_:function(n,t,e){return void 0===e&&(e=0),P(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),sf(n,t,e)}}),$7=W({rand_:function(n,t,e){var r=at(n),i=null;if(null==e||"float32"===e)i=new Float32Array(r);else if("int32"===e)i=new Int32Array(r);else{if("bool"!==e)throw new Error("Unknown data type "+e);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=t();return H.makeTensor(i,n,e)}}),e9=W({randomNormal_:function(n,t,e,r,i){if(void 0===t&&(t=0),void 0===e&&(e=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new LE(t,e,r,!1,i),s=Lt(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),t9=W({randomGamma_:function(n,t,e,r,i){if(void 0===e&&(e=1),void 0===r&&(r="float32"),null==e&&(e=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var o=new z7(t,e,r,i),s=Lt(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),TN=W({randomUniform_:function(n,t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=1),void 0===r&&(r="float32");for(var o=Lt(n,r),s=new j7(t,e,null,i),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),Ma=W({reshape_:function(n,t){var e=M(n,"x","reshape",null);return t=NO(t,e.size),P(e.size===at(t),function(){return"new shape and old shape must have the same number of elements."}),H.runKernelFunc(function(i){return i.reshape(e,t)},{x:e},function(i){return{x:function(){return i.reshape(e.shape)}}},"Reshape",{shape:t})}}),RN=W({spaceToBatchND_:function(n,t,e){var r=M(n,"x","spaceToBatchND");return P(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),P(e.length===t.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+t.length}),P(r.shape.reduce(function(i,o,s){return s>0&&s<=t.length?i&&(o+e[s-1][0]+e[s-1][1])%t[s-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+t.toString()}),H.runKernelFunc(function(i){return i.spaceToBatchND(r,t,e)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(t,e)}}})}}),MN=W({squeeze_:function(n,t){var e=M(n,"x","squeeze");return Ma(e,Al(e.shape,t).newShape)}}),As=W({stack_:function(n,t){void 0===t&&(t=0);var e=xv(n,"tensors","stack");if(P(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===e.length)return e[0].expandDims(t);var i=e[0].shape,o=e[0].dtype;P(t<=e[0].rank,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(a){fn(i,a.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(a){P(o===a.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=e.map(function(a){return a.expandDims(t)});return oi(s,t)}}),wp=W({tile_:function(n,t){var e=M(n,"x","tile",null);return P(e.rank===t.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+t+"."}),H.runKernelFunc(function(o,s){var a=o.tile(e,t);return s([e]),a},{x:e},function(o,s){var a=s[0];return{x:function(){var u=hn(a);if(1===a.rank)for(var c=0;c<t[0];++c)u=u.add(o.slice([c*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(c=0;c<t[0];++c)for(var d=0;d<t[1];++d)u=u.add(o.slice([c*a.shape[0],d*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(c=0;c<t[0];++c)for(d=0;d<t[1];++d)for(var f=0;f<t[2];++f)u=u.add(o.slice([c*a.shape[0],d*a.shape[1],f*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(c=0;c<t[0];++c)for(d=0;d<t[1];++d)for(f=0;f<t[2];++f)for(var p=0;p<t[3];++p)u=u.add(o.slice([c*a.shape[0],d*a.shape[1],f*a.shape[2],p*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return u}}},"Tile",{reps:t},[e])}}),n9=W({truncatedNormal_:function(n,t,e,r,i){if(void 0===t&&(t=0),void 0===e&&(e=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new LE(t,e,r,!0,i),s=Lt(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),si=W({unstack_:function(n,t){void 0===t&&(t=0),t=t||0;var e=M(n,"x","unstack");return P(t>=-e.shape.length&&t<e.shape.length,function(){return"Axis = "+t+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),t<0&&(t+=e.shape.length),H.runKernelFunc(function(i){return i.unstack(e,t)},{x:e},function(i){return{x:function(){return As(i,t)}}},"Unpack",{axis:t})}});function vb(n,t,e,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(t.slice(0))).push(n[0]/e),i=i.concat(n.slice(1));else{i=i.concat(n[0]);for(var o=t.length,s=0;s<o;++s)i=i.concat([n[s+1]/t[s],t[s]]);i=i.concat(n.slice(o+1))}return i}function yb(n,t,e){void 0===e&&(e=!0);var r=[];if(e){r.push(t);for(var i=t+1;i<n;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var o=[],s=[];for(i=1;i<n;++i)i>=2*t+1||i%2==1?s.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,s)}return r}function wb(n,t,e,r){void 0===r&&(r=!0);var i=[];i.push(r?n[0]/e:n[0]*e);for(var o=1;o<n.length;++o)i.push(o<=t.length?r?t[o-1]*n[o]:n[o]/t[o-1]:n[o]);return i}function kN(n,t){for(var e=[0],r=0;r<t;++r)e.push(n[r][0]);return e}function PN(n,t,e){for(var r=n.slice(0,1),i=0;i<e;++i)r.push(n[i+1]-t[i][0]-t[i][1]);return r}function zE(n,t){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+n.rank);if(0===n.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var e=t.shape,r=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var s=n.shape,a=e.slice();a.pop();var u=1;for(o=r;o<n.rank;++o)u*=s[o],a.push(s[o]);var c=Ia(n.shape).map(function(d){return d/u}).concat([1]).slice(0,r);return[a,i,u,c]}function bb(n){return n<=30?n:ob(n,Math.floor(Math.sqrt(n)))}function ON(n,t,e){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+t.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+i+".";if(e.rank<i)throw new Error(o+" update.rank < "+i+". ");if(n.length<r+(e.rank-i))throw new Error(o+" Output shape length < "+(r+(e.rank-i)));if(e.rank!==i+n.length-r)throw new Error(o+" update.rank != "+(i+n.length-r));for(var s=0;s<i;++s)if(e.shape[s]!==t.shape[s])throw new Error(o+" updates.shape["+s+"] ("+e.shape[s]+") != indices.shape["+s+"] ("+t.shape[s]+").");for(s=0;s<e.rank-i;++s)if(e.shape[s+i]!==n[s+r])throw new Error(o+" updates.shape["+(s+i)+"] ("+e.shape[s+i]+") != shape["+(s+i)+"] ("+n[s+i]+")")}function NN(n,t,e){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(0===e.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===n.size)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}ON(e,t,n)}function Cv(n,t,e){for(var r=t.shape.length,i=r>1?t.shape[r-1]:1,o=e.length,s=1,a=i;a<o;++a)s*=e[a];var u=i<1?1:i;return{sliceRank:i,numUpdates:at(t.shape)/u,sliceSize:s,strides:Ia(e.slice(0,i)).concat([1]),outputSize:at(e)}}function FN(n,t,e){P(n.rank===t.length,function(){return"Error in slice"+n.rank+"D: Length of begin "+t+" must match the rank of the array ("+n.rank+")."}),P(n.rank===e.length,function(){return"Error in slice"+n.rank+"D: Length of size "+e+" must match the rank of the array ("+n.rank+")."});for(var r=function(o){P(t[o]+e[o]<=n.shape[o],function(){return"Error in slice"+n.rank+"D: begin["+o+"] + size["+o+"] ("+(t[o]+e[o])+") would overflow input.shape["+o+"] ("+n.shape[o]+")"})},i=0;i<n.rank;++i)r(i)}function HE(n){for(var t=[],e=0;n>0;)1&n&&t.push(e),n/=2,e++;return t}function Ab(n,t,e){for(var r=[],i=0;i<n.length;i++)r[i]=Math.ceil((t[i]-n[i])/e[i]);return r}function BN(n,t,e,r,i){var o=t[i];(n&1<<i||null==o)&&(o=(e[i]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),rb(0,o,a-1)}function LN(n,t,e,r,i){var o=t[i],s=e[i]||1;(n&1<<i||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),s>0?rb(0,o,a):rb(-1,o,a-1)}function WE(n,t,e){for(var r=e.length,i=0;i<e.length;i++)if(e[i]>1){r=i;break}for(i=r+1;i<e.length;i++)if(t[i]>0||e[i]!==n[i])return!1;return!0}function VE(n,t){for(var e=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)e+=n[r]*t[r];return e}function xb(n){return H.customGrad(n)}Object.freeze({prepareAndValidate:zE}),Object.freeze({validateUpdateShape:ON,validateInput:NN,calculateShapes:Cv}),Object.freeze({assertParamsValid:FN,maskToAxes:HE,computeOutShape:Ab,startForAxis:BN,stopForAxis:LN,isSliceContinous:WE,computeFlatOffset:VE});var gc=W({softmax_:function(n,t){void 0===t&&(t=-1);var e=M(n,"logits","softmax","float32");if(-1===t&&(t=e.rank-1),t!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+t);return H.runKernelFunc(function(r,i){var o=r.softmax(e,t);return i([o]),o},{logits:e},function(r,i){var o=i[0],s=r.mul(o);return{logits:function(){return s.sub(s.sum([t],!0).mul(o))}}},"Softmax",{dim:t},[],[!0])}}),o9=W({logSoftmax_:function(n,t){void 0===t&&(t=-1);var e=M(n,"logits","logSoftmax");if(-1===t&&(t=e.rank-1),t!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+t);return xb(function(r,i){var o=r.max(t,!0),s=r.sub(o),a=s.toFloat().sub(s.exp().sum(t,!0).log());return i([a]),{value:a,gradFunc:function(u,c){var d=c[0].exp();return u.sub(u.sum(t,!0).mul(d))}}})(e)}}),UN=function(){function n(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},n.prototype.set=function(t,e){this.dataIdsCount++,this.data.set(t,e)},n.prototype.has=function(t){return this.data.has(t)},n.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},n.prototype.numDataIds=function(){return this.dataIdsCount},n}(),zN=function(){function n(){}return n.prototype.time=function(t){return oe("time")},n.prototype.read=function(t){return oe("read")},n.prototype.readSync=function(t){return oe("readSync")},n.prototype.numDataIds=function(){return oe("numDataIds")},n.prototype.disposeData=function(t){return oe("disposeData")},n.prototype.write=function(t,e,r){return oe("write")},n.prototype.move=function(t,e,r,i){return oe("move")},n.prototype.memory=function(){return oe("memory")},n.prototype.floatPrecision=function(){return oe("floatPrecision")},n.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},n.prototype.batchMatMul=function(t,e,r,i){return oe("batchMatMul")},n.prototype.fusedBatchMatMul=function(t){return oe("fusedBatchMatMul")},n.prototype.slice=function(t,e,r){return oe("slice")},n.prototype.stridedSlice=function(t,e,r,i){return oe("stridedSlice")},n.prototype.unstack=function(t,e){return oe("unstack")},n.prototype.reverse=function(t,e){return oe("reverse")},n.prototype.concat=function(t,e){return oe("concat")},n.prototype.neg=function(t){return oe("neg")},n.prototype.add=function(t,e){return oe("add")},n.prototype.addN=function(t){return oe("addN")},n.prototype.subtract=function(t,e){return oe("subtract")},n.prototype.multiply=function(t,e){return oe("multiply")},n.prototype.realDivide=function(t,e){return oe("realDivide")},n.prototype.floorDiv=function(t,e){return oe("floorDiv")},n.prototype.sum=function(t,e){return oe("sum")},n.prototype.prod=function(t,e){return oe("prod")},n.prototype.unsortedSegmentSum=function(t,e,r){return oe("unsortedSegmentSum")},n.prototype.argMin=function(t,e){return oe("argMin")},n.prototype.argMax=function(t,e){return oe("argMax")},n.prototype.equal=function(t,e){return oe("equal")},n.prototype.notEqual=function(t,e){return oe("notEqual")},n.prototype.less=function(t,e){return oe("less")},n.prototype.lessEqual=function(t,e){return oe("lessEqual")},n.prototype.greater=function(t,e){return oe("greater")},n.prototype.greaterEqual=function(t,e){return oe("greaterEqual")},n.prototype.logicalNot=function(t){return oe("logicalNot")},n.prototype.logicalAnd=function(t,e){return oe("logicalAnd")},n.prototype.logicalOr=function(t,e){return oe("logicalOr")},n.prototype.where=function(t){return oe("where")},n.prototype.select=function(t,e,r){return oe("select")},n.prototype.topk=function(t,e,r){return oe("topk")},n.prototype.min=function(t,e){return oe("min")},n.prototype.minimum=function(t,e){return oe("minimum")},n.prototype.mod=function(t,e){return oe("mod")},n.prototype.max=function(t,e){return oe("max")},n.prototype.maximum=function(t,e){return oe("maximum")},n.prototype.all=function(t,e){return oe("all")},n.prototype.any=function(t,e){return oe("any")},n.prototype.squaredDifference=function(t,e){return oe("squaredDifference")},n.prototype.ceil=function(t){return oe("ceil")},n.prototype.floor=function(t){return oe("floor")},n.prototype.round=function(t){return oe("round")},n.prototype.sign=function(t){return oe("sign")},n.prototype.isNaN=function(t){return oe("isNaN")},n.prototype.isInf=function(t){return oe("isInf")},n.prototype.isFinite=function(t){return oe("isFinite")},n.prototype.pow=function(t,e){return oe("pow")},n.prototype.exp=function(t){return oe("exp")},n.prototype.expm1=function(t){return oe("expm1")},n.prototype.softmax=function(t,e){return oe("softmax")},n.prototype.log=function(t){return oe("log")},n.prototype.log1p=function(t){return oe("log1p")},n.prototype.sqrt=function(t){return oe("sqrt")},n.prototype.rsqrt=function(t){return oe("rsqrt")},n.prototype.square=function(t){return oe("square")},n.prototype.reciprocal=function(t){return oe("reciprocal")},n.prototype.relu=function(t){return oe("relu")},n.prototype.relu6=function(t){return oe("relu6")},n.prototype.prelu=function(t,e){return oe("prelu")},n.prototype.elu=function(t){return oe("elu")},n.prototype.eluDer=function(t,e){return oe("eluDer")},n.prototype.selu=function(t){return oe("selu")},n.prototype.int=function(t){return oe("int")},n.prototype.clip=function(t,e,r){return oe("clip")},n.prototype.abs=function(t){return oe("abs")},n.prototype.complexAbs=function(t){return oe("complexAbs")},n.prototype.sigmoid=function(t){return oe("sigmoid")},n.prototype.softplus=function(t){return oe("softplus")},n.prototype.sin=function(t){return oe("sin")},n.prototype.cos=function(t){return oe("cos")},n.prototype.tan=function(t){return oe("tan")},n.prototype.asin=function(t){return oe("asin")},n.prototype.acos=function(t){return oe("acos")},n.prototype.atan=function(t){return oe("atan")},n.prototype.atan2=function(t,e){return oe("atan2")},n.prototype.sinh=function(t){return oe("sinh")},n.prototype.cosh=function(t){return oe("cosh")},n.prototype.tanh=function(t){return oe("tanh")},n.prototype.asinh=function(t){return oe("asinh")},n.prototype.acosh=function(t){return oe("acosh")},n.prototype.atanh=function(t){return oe("atanh")},n.prototype.erf=function(t){return oe("erf")},n.prototype.step=function(t,e){return oe("step")},n.prototype.fusedConv2d=function(t){return oe("fusedConv2d")},n.prototype.conv2d=function(t,e,r){return oe("conv2d")},n.prototype.conv2dDerInput=function(t,e,r){return oe("conv2dDerInput")},n.prototype.conv2dDerFilter=function(t,e,r){return oe("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(t){return oe("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(t,e,r){return oe("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(t,e,r){return oe("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(t,e,r){return oe("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(t,e,r){return oe("conv3d")},n.prototype.conv3dDerInput=function(t,e,r){return oe("conv3dDerInput")},n.prototype.conv3dDerFilter=function(t,e,r){return oe("conv3dDerFilter")},n.prototype.maxPool=function(t,e){return oe("maxPool")},n.prototype.maxPoolBackprop=function(t,e,r,i){return oe("maxPoolBackprop")},n.prototype.avgPool=function(t,e){return oe("avgPool")},n.prototype.avgPoolBackprop=function(t,e,r){return oe("avgPoolBackprop")},n.prototype.avgPool3d=function(t,e){return oe("avgPool3d")},n.prototype.avgPool3dBackprop=function(t,e,r){return oe("avgPool3dBackprop")},n.prototype.maxPool3d=function(t,e){return oe("maxPool3d")},n.prototype.maxPool3dBackprop=function(t,e,r,i){return oe("maxPool3dBackprop")},n.prototype.reshape=function(t,e){return oe("reshape")},n.prototype.cast=function(t,e){return oe("cast")},n.prototype.tile=function(t,e){return oe("tile")},n.prototype.pad=function(t,e,r){return oe("pad")},n.prototype.transpose=function(t,e){return oe("transpose")},n.prototype.gather=function(t,e,r){return oe("gather")},n.prototype.gatherND=function(t,e){return oe("gatherND")},n.prototype.scatterND=function(t,e,r){return oe("scatterND")},n.prototype.batchToSpaceND=function(t,e,r){return oe("batchToSpaceND")},n.prototype.spaceToBatchND=function(t,e,r){return oe("spaceToBatchND")},n.prototype.resizeBilinear=function(t,e,r,i){return oe("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(t,e,r){return oe("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(t,e,r,i){return oe("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(t,e,r){return oe("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(t,e,r,i,o,s){return oe("batchNormalization")},n.prototype.localResponseNormalization4D=function(t,e,r,i,o){return oe("localResponseNormalization4D")},n.prototype.LRNGrad=function(t,e,r,i,o,s,a){return oe("LRNGrad")},n.prototype.multinomial=function(t,e,r,i){return oe("multinomial")},n.prototype.oneHot=function(t,e,r,i){return oe("oneHot")},n.prototype.cumsum=function(t,e,r,i){return oe("cumsum")},n.prototype.nonMaxSuppression=function(t,e,r,i,o){return oe("nonMaxSuppression")},n.prototype.fft=function(t){return oe("fft")},n.prototype.ifft=function(t){return oe("ifft")},n.prototype.complex=function(t,e){return oe("complex")},n.prototype.real=function(t){return oe("real")},n.prototype.imag=function(t){return oe("imag")},n.prototype.cropAndResize=function(t,e,r,i,o,s){return oe("cropAndResize")},n.prototype.depthToSpace=function(t,e,r){return oe("depthToSpace")},n.prototype.split=function(t,e,r){return oe("split")},n.prototype.sparseToDense=function(t,e,r,i){return oe("sparseToDense")},n.prototype.diag=function(t){return oe("diag")},n.prototype.fill=function(t,e,r){return oe("fill")},n.prototype.onesLike=function(t){return oe("onesLike")},n.prototype.zerosLike=function(t){return oe("zerosLike")},n.prototype.linspace=function(t,e,r){return oe("linspace")},n.prototype.dispose=function(){return oe("dispose")},n}();function oe(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function mc(n,t){for(var e=n.length,r=[],i=0;i<e;i++){var o=e-1-i;(t[t.length-1-i]||1)>1&&1===(n[o]||1)&&r.unshift(o)}return r}function Qr(n,t){for(var e=[],r=0;r<t.length;r++){var i=n[n.length-r-1],o=t.length-r-1;(null==i||1===i&&t[o]>1)&&e.unshift(o)}return e}function $t(n,t){for(var e=[],r=Math.max(n.length,t.length),i=0;i<r;i++){var o=n[n.length-i-1];null==o&&(o=1);var s=t[t.length-i-1];if(null==s&&(s=1),1===o)e.unshift(s);else if(1===s)e.unshift(o);else{if(o!==s)throw Error("Operands could not be broadcast together with shapes "+n+" and "+t+".");e.unshift(o)}}return e}function bp(n,t,e,r,i,o,s){void 0===s&&(s="channelsLast");var a,u=_b(t),c=u[0],d=u[1];if("channelsLast"===s)a=[c,d,n[3],n[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);a=[c,d,n[1],n[1]]}return Dl(n,a,e,r,i,o,!1,s)}function _v(n,t,e,r,i,o,s){void 0===s&&(s="NDHWC");var a,u,c=GE(t),d=c[0],f=c[1],p=c[2];if("NDHWC"===s)u="channelsLast",a=[d,f,p,n[4],n[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat "+s);u="channelsFirst",a=[d,f,p,n[1],n[1]]}return Ev(n,a,e,r,i,!1,u,o)}function Dl(n,t,e,r,i,o,s,a){void 0===s&&(s=!1),void 0===a&&(a="channelsLast");var u=[-1,-1,-1,-1],c=u[0],d=u[1],f=u[2],p=u[3];if("channelsLast"===a)c=n[0],d=n[1],f=n[2],p=n[3];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=n[0],p=n[1],d=n[2],f=n[3]}var g,v=t[0],y=t[1],w=t[3],b=_b(e),A=b[0],_=b[1],C=_b(r),E=C[0],T=C[1],O=Ap(v,E),N=Ap(y,T),B=function(fe,he,$,ee,te,ce,xe,je){var Ke,ut,ot;if("number"==typeof fe){Ke={top:fe,bottom:fe,left:fe,right:fe,type:0===fe?"VALID":"NUMBER"};var Vt=function(Jt,On,In,Ir,mr){null==Ir&&(Ir=qE(Jt,On,In));var Eu=Jt[1],Du=Dv((Jt[0]-On+2*Ir)/In+1,mr);P(hr(Du),function(){return"The output # of rows ("+Du+") must be an integer. Change the stride and/or zero pad parameters"});var Ds=Dv((Eu-On+2*Ir)/In+1,mr);return P(hr(Ds),function(){return"The output # of columns ("+Ds+") must be an integer. Change the stride and/or zero pad parameters"}),[Du,Ds]}([he,$],ce,ee,fe,je);ut=Vt[0],ot=Vt[1]}else if("same"===fe){ut=Math.ceil(he/ee),ot=Math.ceil($/te);var Xt=Math.max(0,(ut-1)*ee+ce-he),_t=Math.max(0,(ot-1)*te+xe-$),jt=Math.floor(Xt/2),Mt=Xt-jt,tr=Math.floor(_t/2);Ke={top:jt,bottom:Mt,left:tr,right:_t-tr,type:"SAME"}}else{if("valid"!==fe)throw Error("Unknown padding parameter: "+fe);Ke={top:0,bottom:0,left:0,right:0,type:"VALID"},ut=Math.ceil((he-ce+1)/ee),ot=Math.ceil(($-xe+1)/te)}return{padInfo:Ke,outHeight:ut,outWidth:ot}}(i,d,f,A,_,O,N,o),X=B.outHeight,G=B.outWidth,re=s?w*p:w;return"channelsFirst"===a?g=[c,re,X,G]:"channelsLast"===a&&(g=[c,X,G,re]),{batchSize:c,dataFormat:a,inHeight:d,inWidth:f,inChannels:p,outHeight:X,outWidth:G,outChannels:re,padInfo:B.padInfo,strideHeight:A,strideWidth:_,filterHeight:v,filterWidth:y,effectiveFilterHeight:O,effectiveFilterWidth:N,dilationHeight:E,dilationWidth:T,inShape:n,outShape:g,filterShape:t}}function Ev(n,t,e,r,i,o,s,a){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],d=u[1],f=u[2],p=u[3],g=u[4];if("channelsLast"===s)c=n[0],d=n[1],f=n[2],p=n[3],g=n[4];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=n[0],g=n[1],d=n[2],f=n[3],p=n[4]}var v,y=t[0],w=t[1],b=t[2],A=t[4],_=GE(e),C=_[0],E=_[1],T=_[2],O=GE(r),N=O[0],B=O[1],F=O[2],X=Ap(y,N),G=Ap(w,B),re=Ap(b,F),fe=function(xe,je,Ke,ut,ot,Vt,Xt,_t,jt,Mt,tr){var Jt,On,In,Ir;if("number"==typeof xe){Jt={top:xe,bottom:xe,left:xe,right:xe,front:xe,back:xe,type:0===xe?"VALID":"NUMBER"};var mr=function(Lp,Dc,rS,Up,Iu,iS){null==Iu&&(Iu=qE(Lp,Dc,Up));var qne=Lp[1],Gne=Lp[2],oS=Dv((Lp[0]-Dc+2*Iu)/Up+1,iS);P(hr(oS),function(){return"The output # of depths ("+oS+") must be an integer. Change the stride and/or zero pad parameters"});var sS=Dv((qne-Dc+2*Iu)/Up+1,iS);P(hr(sS),function(){return"The output # of rows ("+sS+") must be an integer. Change the stride and/or zero pad parameters"});var aS=Dv((Gne-Dc+2*Iu)/Up+1,iS);return P(hr(aS),function(){return"The output # of columns ("+aS+") must be an integer. Change the stride and/or zero pad parameters"}),[oS,sS,aS,1]}([je,Ke,ut,1],_t,0,ot,xe,tr);On=mr[0],In=mr[1],Ir=mr[2]}else if("same"===xe){var vr=((On=Math.ceil(je/ot))-1)*ot+_t-je,Eu=((In=Math.ceil(Ke/Vt))-1)*Vt+jt-Ke,Du=((Ir=Math.ceil(ut/Xt))-1)*Xt+Mt-ut,Ds=Math.floor(vr/2),Bp=vr-Ds,_c=Math.floor(Eu/2),zl=Eu-_c,Ec=Math.floor(Du/2);Jt={top:_c,bottom:zl,left:Ec,right:Du-Ec,front:Ds,back:Bp,type:"SAME"}}else{if("valid"!==xe)throw Error("Unknown padding parameter: "+xe);Jt={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},On=Math.ceil((je-_t+1)/ot),In=Math.ceil((Ke-jt+1)/Vt),Ir=Math.ceil((ut-Mt+1)/Xt)}return{padInfo:Jt,outDepth:On,outHeight:In,outWidth:Ir}}(i,d,f,p,C,E,T,X,G,re,a),$=fe.outDepth,ee=fe.outHeight,te=fe.outWidth,ce=o?A*g:A;return"channelsFirst"===s?v=[c,ce,$,ee,te]:"channelsLast"===s&&(v=[c,$,ee,te,ce]),{batchSize:c,dataFormat:s,inDepth:d,inHeight:f,inWidth:p,inChannels:g,outDepth:$,outHeight:ee,outWidth:te,outChannels:ce,padInfo:fe.padInfo,strideDepth:C,strideHeight:E,strideWidth:T,filterDepth:y,filterHeight:w,filterWidth:b,effectiveFilterDepth:X,effectiveFilterHeight:G,effectiveFilterWidth:re,dilationDepth:N,dilationHeight:B,dilationWidth:F,inShape:n,outShape:v,filterShape:t}}function qE(n,t,e,r){void 0===r&&(r=1);var i=Ap(t,r);return Math.floor((n[0]*(e-1)-e+i)/2)}function _b(n){return"number"==typeof n?[n,n,n]:2===n.length?[n[0],n[1],1]:n}function GE(n){return"number"==typeof n?[n,n,n]:n}function Ap(n,t){return t<=1?n:n+(n-1)*(t-1)}function Dv(n,t){if(!t)return n;switch(t){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+t)}}function af(n){var t=_b(n);return 1===t[0]&&1===t[1]&&1===t[2]}function Eo(n,t){return af(n)||af(t)}function Eb(n){if("NHWC"===n)return"channelsLast";if("NCHW"===n)return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function KE(n,t,e){if("complex64"===t){if("complex64"===n.dtype)return n.clone();var r=ar(n.shape),i=n.toFloat(),o=e.complex(i,r);return r.dispose(),i.dispose(),o}if(!LO(n.dtype,t))return H.makeTensorFromDataId(n.dataId,n.shape,t);if("complex64"===n.dtype){var s=e.real(n);return o=s.cast(t),s.dispose(),o}if("int32"===t)return e.int(n);if("bool"===t){var a=We(0,n.dtype);return o=e.notEqual(n,a),a.dispose(),o}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+t)}function Db(n,t){return H.makeTensorFromDataId(n.dataId,t,n.dtype)}function QE(n,t,e){var r=(t-n)/(e-1),i=mp(e,"float32");i[0]=n;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Kr(i,"float32")}function YE(n,t){if(n.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+t.length+".");for(var e=new Float32Array(2*n.length),r=0;r<e.length;r+=2)e[r]=n[r/2],e[r+1]=t[r/2];return e}function jN(n,t){return{real:n[2*t],imag:n[2*t+1]}}function s9(n,t,e,r){n[2*r]=t,n[2*r+1]=e}function a9(n,t,e){var r=(e?2:-2)*Math.PI*(n/t);return{real:Math.cos(r),imag:Math.sin(r)}}function u9(n,t,e){var r=function(u,c,d){for(var f=0,p=u.length,g=0,v=!1;f<p;){var y=d(c,u[g=f+(p-f>>>1)]);y>0?f=g+1:(p=g,v=!y)}return v?f:-f-1}(n,t,e||c9);n.splice(r<0?-(r+1):r,0,t)}function c9(n,t){return n>t?1:n<t?-1:0}function XE(n,t,e,r,i){return HN(n,t,e,r,i,0).selectedIndices}function JE(n,t,e,r,i,o){var s=HN(n,t,e,r,i,o,!0);return s.numValidOutputs.dispose(),{selectedIndices:s.selectedIndices,selectedScores:s.selectedScores}}function HN(n,t,e,r,i,o,s,a){void 0===s&&(s=!1),void 0===a&&(a=!1);for(var u=Array.from(t).map(function(C,E){return{score:C,boxIndex:E,suppressBeginIndex:0}}).filter(function(C){return C.score>i}).sort(WN),c=o>0?-.5/o:0,d=[],f=[];d.length<e&&u.length>0;){var p=u.pop(),g=p.score,v=p.boxIndex,y=p.suppressBeginIndex;if(g<i)break;for(var w=!1,b=d.length-1;b>=y;--b){var A=l9(n,v,d[b]);if(A>=r){w=!0;break}if(p.score=p.score*d9(r,c,A),p.score<=i)break}p.suppressBeginIndex=d.length,w||(p.score===g?(d.push(v),f.push(p.score)):p.score>i&&u9(u,p,WN))}var _=d.length;return a&&(d.fill(0,_),f.fill(0,_)),{selectedIndices:Kr(d,"int32"),selectedScores:Kr(f,"float32"),numValidOutputs:We(_,"int32")}}function l9(n,t,e){var r=n.subarray(4*t,4*t+4),i=n.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),d=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),g=(a-o)*(u-s),v=(f-c)*(p-d);if(g<=0||v<=0)return 0;var y=Math.max(o,c),w=Math.max(s,d),b=Math.min(a,f),A=Math.min(u,p),_=Math.max(b-y,0)*Math.max(A-w,0);return _/(g+v-_)}function d9(n,t,e){var r=Math.exp(t*e*e);return e<=n?r:0}function WN(n,t){return n.score-t.score||n.score===t.score&&t.boxIndex-n.boxIndex}function VN(n,t,e){var r=new Array(n.rank).fill(0),i=n.shape.slice();return t.map(function(o){i[e]=o;var s=n.slice(r,i);return r[e]+=o,s})}function qN(n,t){for(var e=new Array(n.rank),r=0;r<e.length;r++)e[r]=n.shape[r]*t[r];var i=Lt(e,n.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),s=new Array(n.rank),a=0;a<s.length;a++)s[a]=o[a]%n.shape[a];var u=n.locToIndex(s);i.values[r]=n.values[u]}return i.toTensor()}function GN(n,t,e,r,i){for(var o=t[t.length-1],s=[n.length/o,o],a=s[0],u=s[1],c=pp(e,a*r),d=pp("int32",a*r),f=0;f<a;f++){for(var p=f*u,g=n.subarray(p,p+u),v=[],y=0;y<g.length;y++)v.push({value:g[y],index:y});v.sort(function(C,E){return E.value-C.value});var w=f*r,b=c.subarray(w,w+r),A=d.subarray(w,w+r);for(y=0;y<r;y++)b[y]=v[y].value,A[y]=v[y].index}var _=t.slice();return _[_.length-1]=r,[Pi(c,_,e),Pi(d,_,"int32")]}function ZE(n,t){for(var e=[],r=0;r<t.length;r++)t[r]&&e.push(r);var i=Lt(n,"int32"),o=Lt([e.length,n.length],"int32");for(r=0;r<e.length;r++){var s=i.indexToLoc(e[r]);o.values.set(s,r*n.length)}return o.toTensor()}Object.freeze({castTensor:KE,reshapeTensor:Db,linspaceImpl:QE,upcastType:yi,axesAreInnerMostDims:NE,combineLocations:_N,computeOutAndReduceShapes:Mi,expandShapeToKeepDim:_o,assertAxesAreInnerMostDims:Yo,getAxesPermutation:Ta,getUndoAxesPermutation:pb,getInnerMostAxes:Ra,getBroadcastDims:mc,getReductionAxes:Qr,assertAndGetBroadcastShape:$t,assertParamsConsistent:EN,computeOutShape:tf,computePool2DInfo:bp,computePool3DInfo:_v,computeConv2DInfo:Dl,computeConv3DInfo:Ev,computeDefaultPad:qE,tupleValuesAreOne:af,eitherStridesOrDilationsAreOne:Eo,convertConv2DDataFormat:Eb,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:bb});var f9=function(n,t){this.outputShape=[],this.outputShape=n,this.variableNames=t.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode="\n      void main() {\n        "+e.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},h9=function(n,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=t.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode="\n      void main() {\n        "+e.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},p9=function(n,t,e){this.variableNames=["A"];var r=n.windowSize,i=n.batchSize,s=Math.ceil(n.inSize/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+(e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===t?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function KN(n,t){return["x","y","z","w","u","v"].slice(0,t).map(function(e){return n+"."+e})}function Jo(n,t){return 1===t?[n]:KN(n,t)}function Xi(){var n,t,e,r,i,o,s,a,u,c;return 2===de().getNumber("WEBGL_VERSION")?(n="#version 300 es",t="in",e="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(n="",t="attribute",e="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:n,attribute:t,varyingVs:e,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:u,defineRound:c}}function uf(n,t,e){void 0===e&&(e="index");var r=Ia(t);return r.map(function(i,o){return"int "+n[o]+" = "+e+" / "+i+"; "+(o===r.length-1?"int "+n[o+1]+" = "+e+" - "+n[o]+" * "+i:"index -= "+n[o]+" * "+i)+";"}).join("")}function $E(n){var t=Ia(n).map(function(e){return e.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var QN="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function g9(n,t,e,r){var i=[];n.forEach(function(g){var v=at(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?i.push("uniform float "+g.name+(v>1?"["+v+"]":"")+";"):(i.push("uniform sampler2D "+g.name+";"),i.push("uniform int offset"+g.name+";"))});var o,s,g,a=i.join("\n"),u=n.map(function(g){return function(v,y,w){void 0===w&&(w=!1);var b="";return b+=w?YN(v):xp(v),v.shapeInfo.logicalShape.length<=y.logicalShape.length&&(b+=w?function(C,E){var T,$,O=C.name,N=O.charAt(0).toUpperCase()+O.slice(1),B="get"+N+"AtOutCoords",F=C.shapeInfo.logicalShape.length,X=E.logicalShape.length,G=mc(C.shapeInfo.logicalShape,E.logicalShape),re=$n(X),fe=X-F,he=["x","y","z","w","u","v"];T=0===F?"":X<2&&G.length>=1?"coords = 0;":G.map(function(Ke){return"coords."+he[Ke+fe]+" = 0;"}).join("\n"),$=X<2&&F>0?"coords":C.shapeInfo.logicalShape.map(function(Ke,ut){return"coords."+he[ut+fe]}).join(", ");var ee="return outputValue;",te=1===at(C.shapeInfo.logicalShape),ce=1===at(E.logicalShape);if(1!==F||te||ce){if(te&&!ce)ee=1===X?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(G.length){var xe=F-2,je=F-1;G.indexOf(xe)>-1&&G.indexOf(je)>-1?ee="return vec4(outputValue.x);":G.indexOf(xe)>-1?ee="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":G.indexOf(je)>-1&&(ee="return vec4(outputValue.xx, outputValue.zz);")}}else ee="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+B+"() {\n      "+re+" coords = getOutputCoords();\n      "+T+"\n      vec4 outputValue = get"+N+"("+$+");\n      "+ee+"\n    }\n  "}(v,y):function(C,E){var T=C.name,O=T.charAt(0).toUpperCase()+T.slice(1),N="get"+O+"AtOutCoords",X=C.shapeInfo.logicalShape.length,G=E.logicalShape.length;if(!C.shapeInfo.isUniform&&X===G&&null==C.shapeInfo.flatOffset&&qr(C.shapeInfo.texShape,E.texShape))return"\n      float "+N+"() {\n        return sampleTexture("+T+", resultUV);\n      }\n    ";var fe=$n(G),he=mc(C.shapeInfo.logicalShape,E.logicalShape),$=G-X,ee=["x","y","z","w","u","v"];return"\n    float "+N+"() {\n      "+fe+" coords = getOutputCoords();\n      "+(0===X?"":G<2&&he.length>=1?"coords = 0;":he.map(function(ce){return"coords."+ee[ce+$]+" = 0;"}).join("\n"))+"\n      return get"+O+"("+(G<2&&X>0?"coords":C.shapeInfo.logicalShape.map(function(ce,xe){return"coords."+ee[xe+$]}).join(", "))+");\n    }\n  "}(v,y)),b}(g,t,r)}).join("\n"),c=t.texShape,d=Xi(),f="\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+d.texture2D+"(textureSampler, uv).r;\n    }\n  ",p=(g=d).version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+g.varyingFs+" vec2 resultUV;\n    "+g.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+g.defineSpecialNaN+"\n    "+g.defineSpecialInf+"\n    "+g.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+m9+"\n    "+v9+"\n    "+y9+"\n  ";return t.isPacked?(o=function(g,v){switch(g.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return E=v,1===(T=[Math.ceil(E[0]/2),Math.ceil(E[1]/2)])[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+T[1]+".0);\n      }\n    ":1===T[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+T[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+T[0]+", "+T[1]+"));\n      return 2 * (resTexRC.x * "+T[1]+" + resTexRC.y);\n    }\n  ";case 2:return function(C,E){var T=[Math.ceil(E[0]/2),Math.ceil(E[1]/2)];if(qr(C,E))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+T[0]+", "+T[1]+"));\n      }\n    ";var O=Math.ceil(C[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+T[0]+", "+T[1]+"));\n\n      int index = resTexRC.x * "+T[1]+" + resTexRC.y;\n      int r = 2 * (index / "+O+");\n      int c = imod(index, "+O+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(g,v);case 3:return y=g,w=v,b=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],_=(A=Math.ceil(y[2]/2))*Math.ceil(y[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+b[0]+", "+b[1]+"));\n      int index = resTexRC.x * "+b[1]+" + resTexRC.y;\n\n      int b = index / "+_+";\n      index -= b * "+_+";\n\n      int r = 2 * (index / "+A+");\n      int c = imod(index, "+A+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(C,E){for(var T=[Math.ceil(E[0]/2),Math.ceil(E[1]/2)],O=Math.ceil(C[C.length-1]/2),N=O*Math.ceil(C[C.length-2]/2),B=N,F="",X="b, r, c",G=2;G<C.length-1;G++)F="\n      int b"+G+" = index / "+(B*=C[C.length-G-1])+";\n      index -= b"+G+" * "+B+";\n    "+F,X="b"+G+", "+X;return"\n    ivec"+C.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+T[0]+", "+T[1]+"));\n      int index = resTexRC.x * "+T[1]+" + resTexRC.y;\n\n      "+F+"\n\n      int b = index / "+N+";\n      index -= b * "+N+";\n\n      int r = 2 * (index / "+O+");\n      int c = imod(index, "+O+") * 2;\n\n      return ivec"+C.length+"("+X+");\n    }\n  "}(g,v)}var E,T,y,w,b,A,_}(t.logicalShape,c),s=function(g){return"\n    void setOutput(vec4 val) {\n      "+g.output+" = val;\n    }\n  "}(d)):(o=function(g,v){switch(g.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(A=v)[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+A[1]+".0);\n      }\n    ":1===A[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+A[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+A[0]+", "+A[1]+"));\n      return resTexRC.x * "+A[1]+" + resTexRC.y;\n    }\n  ";case 2:return function(b,A){return qr(b,A)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+A[0]+", "+A[1]+"));\n      }\n    ":1===b[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+A[0]+", "+A[1]+"));\n        int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===b[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+A[0]+", "+A[1]+"));\n        int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+A[0]+", "+A[1]+"));\n      int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n      int r = index / "+b[1]+";\n      int c = index - r * "+b[1]+";\n      return ivec2(r, c);\n    }\n  "}(g,v);case 3:return y=v,w=uf(["r","c","d"],g),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+y[0]+", "+y[1]+"));\n      int index = resTexRC.x * "+y[1]+" + resTexRC.y;\n      "+w+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(b,A){var _=uf(["r","c","d","d2"],b);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+A[0]+", "+A[1]+"));\n      int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n      "+_+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(g,v);case 5:return function(b,A){var _=uf(["r","c","d","d2","d3"],b);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+A[0]+",\n                             "+A[1]+"));\n\n      int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n\n      "+_+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(g,v);case 6:return function(b,A){var _=uf(["r","c","d","d2","d3","d4"],b);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+A[0]+", "+A[1]+"));\n      int index = resTexRC.x * "+A[1]+" + resTexRC.y;\n\n      "+_+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(g,v);default:throw new Error(g.length+"-D output sampling is not yet supported")}var A,y,w}(t.logicalShape,c),s=function(g){return"\n    void setOutput(float val) {\n      "+g.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(d)),r&&(p+=w9),[p,f,s,a,o,u,e].join("\n")}function xp(n){var t=n.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=e.shapeInfo.texShape;if(1===o[0]&&1===o[1])return"\n      float "+i+"() {\n        return sampleTexture("+r+", halfCR);\n      }\n    ";var u=e.shapeInfo.texShape;return"\n    float "+i+"() {\n      vec2 uv = uvFromFlat("+u[0]+", "+u[1]+", "+cf(r)+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(n);case 1:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+i+"(int index) {\n        "+Cp(e)+"\n      }\n    ";var o=e.shapeInfo.texShape,s=o[0],a=o[1];if(1===a&&1===s)return"\n      float "+i+"(int index) {\n        return sampleTexture("+r+", halfCR);\n      }\n    ";var u=cf(r);return 1===a?"\n      float "+i+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+u+") + 0.5) / "+s+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":1===s?"\n      float "+i+"(int index) {\n        vec2 uv = vec2((float(index + "+u+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int index) {\n      vec2 uv = uvFromFlat("+s+", "+a+", index + "+u+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(n);case 2:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=e.shapeInfo.texShape;if(null!=s&&qr(r,s))return"\n    float "+o+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+s[1]+".0, "+s[0]+".0);\n      return sampleTexture("+i+", uv);\n    }\n  ";var c=Al(r),d=c.newShape,f=c.keptDims;if(d.length<r.length)return"\n      "+xp(_p(e,d))+"\n      float "+o+"(int row, int col) {\n        return "+o+"("+Ep(["row","col"],f)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+r[1]+", 1)));\n        "+Cp(e)+"\n      }\n    ";var v=s[0],y=s[1],w=cf(i);return 1===y?"\n    float "+o+"(int row, int col) {\n      float index = dot(vec3(row, col, "+w+"), vec3("+r[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+v+".0);\n      return sampleTexture("+i+", uv);\n    }\n  ":1===v?"\n    float "+o+"(int row, int col) {\n      float index = dot(vec3(row, col, "+w+"), vec3("+r[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+y+".0, 0.5);\n      return sampleTexture("+i+", uv);\n    }\n  ":"\n  float "+o+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+r[1]+" + col + "+w+";\n    vec2 uv = uvFromFlat("+v+", "+y+", index);\n    return sampleTexture("+i+", uv);\n  }\n"}(n);case 3:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[1]*r[2],a=r[2],u=Al(r),c=u.newShape,d=u.keptDims;if(c.length<r.length)return"\n        "+xp(_p(e,c))+"\n        float "+o+"(int row, int col, int depth) {\n          return "+o+"("+Ep(["row","col","depth"],d)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+s+", "+a+", 1)));\n        "+Cp(e)+"\n      }\n    ";var g=e.shapeInfo.texShape,v=g[0],y=g[1],w=e.shapeInfo.flatOffset;return y===s&&null==w?"\n        float "+o+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+y+".0, "+v+".0);\n          return sampleTexture("+i+", uv);\n        }\n      ":y===a&&null==w?"\n    float "+o+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+r[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+y+".0, "+v+".0);\n      return sampleTexture("+i+", uv);\n    }\n  ":"\n      float "+o+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+s+" + col * "+a+" + depth + "+cf(i)+";\n        vec2 uv = uvFromFlat("+v+", "+y+", index);\n        return sampleTexture("+i+", uv);\n      }\n  "}(n);case 4:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[3],a=r[2]*s,u=r[1]*a,c=Al(r),d=c.newShape,f=c.keptDims;if(d.length<r.length)return"\n      "+xp(_p(e,d))+"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        return "+o+"("+Ep(["row","col","depth","depth2"],f)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+u+", "+a+", "+s+", 1)));\n        "+Cp(e)+"\n      }\n    ";var g=e.shapeInfo.flatOffset,v=e.shapeInfo.texShape,y=v[0],w=v[1];return w===u&&null==g?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+s+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+w+".0, "+y+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":w===s&&null==g?"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+r[1]*r[2]+", "+r[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+w+".0, "+y+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+a+" +\n          depth * "+s+" + depth2;\n      vec2 uv = uvFromFlat("+y+", "+w+", index + "+cf(i)+");\n      return sampleTexture("+i+", uv);\n    }\n  "}(n);case 5:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[4],a=r[3]*s,u=r[2]*a,c=r[1]*u,d=Al(r),f=d.newShape,p=d.keptDims;if(f.length<r.length)return"\n      "+xp(_p(e,f))+"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+o+"("+Ep(["row","col","depth","depth2","depth3"],p)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+c+", "+u+", "+a+", "+s+")) +\n          depth3;\n        "+Cp(e)+"\n      }\n    ";var v=e.shapeInfo.flatOffset,y=e.shapeInfo.texShape,w=y[0],b=y[1];return b===c&&null==v?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+u+", "+a+", "+s+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+b+".0, "+w+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":b===s&&null==v?"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+r[1]*r[2]*r[3]+",\n               "+r[2]*r[3]+", "+r[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+b+".0, "+w+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+c+" + col * "+u+" + depth * "+a+" +\n          depth2 * "+s+" + depth3 + "+cf(i)+";\n      vec2 uv = uvFromFlat("+w+", "+b+", index);\n      return sampleTexture("+i+", uv);\n    }\n  "}(n);case 6:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=Al(r),a=s.newShape,u=s.keptDims;if(a.length<r.length)return"\n      "+xp(_p(e,a))+"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+o+"("+Ep(["row","col","depth","depth2","depth3","depth4"],u)+");\n      }\n    ";var d=r[5],f=r[4]*d,p=r[3]*f,g=r[2]*p,v=r[1]*g;if(e.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+v+", "+g+", "+p+", "+f+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+d+", 1)));\n        "+Cp(e)+"\n      }\n    ";var y=e.shapeInfo.flatOffset,w=e.shapeInfo.texShape,b=w[0],A=w[1];return A===v&&null==y?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+g+", "+p+", "+f+", "+d+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+A+".0, "+b+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":A===d&&null==y?"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+r[1]*r[2]*r[3]*r[4]+",\n               "+r[2]*r[3]*r[4]+",\n               "+r[3]*r[4]+",\n               "+r[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+A+".0, "+b+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":"\n    float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+v+" + col * "+g+" + depth * "+p+" +\n          depth2 * "+f+" + depth3 * "+d+" + depth4 + "+cf(i)+";\n      vec2 uv = uvFromFlat("+b+", "+A+", index);\n      return sampleTexture("+i+", uv);\n    }\n  "}(n);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function YN(n){var t,i,o,s,a,u,c;switch(n.shapeInfo.logicalShape.length){case 0:return"\n    vec4 get"+(t=n.name).charAt(0).toUpperCase()+t.slice(1)+"() {\n      return "+Xi().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return s="get"+(o=(i=n).name).charAt(0).toUpperCase()+o.slice(1),a=i.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Xi(),"\n    vec4 "+s+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+u[0]+", "+u[1]+", index);\n      return "+c.texture2D+"("+o+", uv);\n    }\n  ";case 2:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=u[0],d=u[1],f=Xi();if(null!=u&&qr(o,u))return"\n      vec4 "+a+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+d+".0, "+c+".0);\n\n        return "+f.texture2D+"("+s+", uv);\n      }\n    ";var p=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];return"\n    vec4 "+a+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(o[1]/2)+", "+p[0]+", "+p[1]+", row, col);\n      return "+f.texture2D+"("+s+", uv);\n    }\n  "}(n);case 3:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(1===o[0])return"\n        "+YN(_p(i,o.slice(1)))+"\n        vec4 "+a+"(int b, int row, int col) {\n          return "+a+"("+Ep(["b","row","col"],[1,2])+");\n        }\n      ";var p=c[0],g=c[1],v=Math.ceil(o[2]/2);return"\n    vec4 "+a+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+p+", "+g+", "+v*Math.ceil(o[1]/2)+", "+v+", b, row, col);\n      return "+Xi().texture2D+"("+s+", uv);\n    }\n  "}(n);default:return function(i){for(var o=i.shapeInfo.logicalShape,s=o.length,a=i.name,u="get"+a.charAt(0).toUpperCase()+a.slice(1),c=i.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],f=d[0],p=d[1],g=Math.ceil(o[s-1]/2),v=g*Math.ceil(o[s-2]/2),y="int b, int row, int col",w="b * "+v+" + (row / 2) * "+g+" + (col / 2)",b=2;b<s-1;b++)y="int b"+b+", "+y,w="b"+b+" * "+(v*=o[s-b-1])+" + "+w;return"\n    vec4 "+u+"("+y+") {\n      int index = "+w+";\n      int texR = index / "+p+";\n      int texC = index - texR * "+p+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+p+", "+f+");\n      return "+Xi().texture2D+"("+a+", uv);\n    }\n  "}(n)}}var m9="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",v9="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",y9="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",w9="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function cf(n){return"offset"+n}function Cp(n){var t=n.name,e=at(n.shapeInfo.logicalShape);return e<2?"return "+t+";":"\n    for (int i = 0; i < "+e+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function $n(n){if(n<=1)return"int";if(2===n)return"ivec2";if(3===n)return"ivec3";if(4===n)return"ivec4";if(5===n)return"ivec5";if(6===n)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function _p(n,t){var e=JSON.parse(JSON.stringify(n));return e.shapeInfo.logicalShape=t,e}function Ep(n,t){return t.map(function(e){return n[e]}).join(", ")}var b9=function(n,t,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(n.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var o=Math.ceil(n[n.length-1]/t);this.outputShape=n.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,a,u=this.outputShape,c=u.length,d=$n(c),f=Jo("coords",c);if(1===o){var p=$n(a=c+1);s="\n        "+p+" sourceLocR = "+p+"("+f.join()+", 0);\n        ++"+f[c-1]+";\n        "+p+" sourceLocG = "+p+"("+f.join()+", 0);\n        ++"+f[c-2]+";\n        "+p+" sourceLocA = "+p+"("+f.join()+", 0);\n        --"+f[c-1]+";\n        "+p+" sourceLocB = "+p+"("+f.join()+", 0);\n        --"+f[c-2]+";"}else a=c,s="\n        "+d+" sourceLocR = coords;\n        ++"+f[c-1]+";\n        "+d+" sourceLocG = coords;\n        ++"+f[c-2]+";\n        "+d+" sourceLocA = coords;\n        --"+f[c-1]+";\n        "+d+" sourceLocB = coords;\n        --"+f[c-2]+";";var g=["x","y","z","w","u","v"].slice(0,a),v="."+g[a-1],y=g.map(function(N){return"int "+N}),w=Jo("sourceLocR",a-1).concat("inIdx.r"),b=Jo("sourceLocG",a-1).concat("inIdx.g"),A=Jo("sourceLocB",a-1).concat("inIdx.b"),_=Jo("sourceLocA",a-1).concat("inIdx.a"),C="max"===e?"greaterThan":"lessThan",E=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+w.join()+"),\n                             getBestIndicesAChannel("+b.join()+"),\n                             getBestIndicesAChannel("+A.join()+"),\n                             getBestIndicesAChannel("+_.join()+")));",T="vec4(\n            getAChannel("+w.join()+"),\n            hasNextCol ? getAChannel("+b.join()+") : 0.,\n            hasNextRow ? getAChannel("+A.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+_.join()+") : 0.)",O=r?"":"\n      float getBestIndicesAChannel("+y.join()+") {\n        return getChannel(getBestIndicesA("+g.join()+"),\n                                          vec2("+g.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+y.join()+") {\n        return getChannel(getA("+g.join()+"),\n                               vec2("+g.slice(-2).join()+"));\n      }\n      "+O+"\n      void main() {\n        "+d+" coords = getOutputCoords();\n        bool hasNextCol = "+f[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+f[c-2]+" < "+(u[c-2]-1)+";\n        "+s+"\n        ivec4 srcIdx = ivec4(sourceLocR"+v+", sourceLocG"+v+",\n          sourceLocB"+v+", sourceLocA"+v+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+T+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+E+"\n          vec4 candidate = "+T+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+C+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},A9=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var a=n.effectiveFilterHeight,u=n.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(a-1-n.padInfo.top)+", "+(u-1-n.padInfo.left)+");\n      const float avgMultiplier = float("+1/(n.filterHeight*n.filterWidth)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n            wR += "+n.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+n.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+n.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+n.dilationWidth+") {\n            float dyC = float(dyCCorner + wC) / "+n.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+n.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},x9=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var d=n.effectiveFilterDepth,f=n.effectiveFilterHeight,p=n.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(d-1-n.padInfo.front)+", "+(f-1-n.padInfo.top)+", "+(p-1-n.padInfo.left)+");\n      const float avgMultiplier = float("+1/(n.filterDepth*n.filterHeight*n.filterWidth)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+d+";\n            wD += "+n.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+n.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+n.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+f+";\n              wR += "+n.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+n.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+n.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+p+";\n                wC += "+n.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+n.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+n.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},C9=function(n,t,e,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],$t(n,t),$t(n,e);var s="0.0";null!=r&&($t(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="1.0";null!=i&&($t(n,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=n,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+a+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},_9=function(n,t,e,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],$t(n,t),$t(n,e);var s="vec4(0.0)";null!=r&&($t(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="vec4(1.0)";null!=i&&($t(n,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=n,this.userCode="\n      void main() {\n        vec4 offset = "+s+";\n        vec4 scale = "+a+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},XN=function(n,t,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=$t(t,e),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+n+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},eD="return a + b;",tD="return a - b;",JN="return a * b;",ZN="return (a < 0.) ? b * a : a;",Dr=function(n,t,e){this.variableNames=["A","B"],this.outputShape=$t(t,e),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+n+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},$N="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",vc=function(n,t,e,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=$t(t,e);var i=this.outputShape.length,o="";if(r)if(0===i||1===at(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          "+$n(i)+" coords = getOutputCoords();\n        ",1===i)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var s=Jo("coords",i);o+="\n            bool nextRowOutOfBounds =\n              ("+s[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+s[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+n+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},I9=function(){function n(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return n.prototype.getCustomSetupFunc=function(t,e){var r=this;return function(i,o){null==r.minLoc&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,t),i.gl.uniform1f(r.maxLoc,e)}},n}(),S9=function(){function n(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return n.prototype.getCustomSetupFunc=function(t,e){var r=this;return function(i,o){null==r.minLoc&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,t),i.gl.uniform1f(r.maxLoc,e)}},n}(),T9=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},R9=function(n){this.outputShape=[],this.outputShape=tf(n,1),this.variableNames=n.map(function(a,u){return"T"+u});var t=new Array(n.length-1);t[0]=n[0][1];for(var e=1;e<t.length;e++)t[e]=t[e-1]+n[e][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<t.length;e++)r.push("else if (yC < "+t[e]+") setOutput(getT"+e+"(yR, yC-"+t[e-1]+"));");r.push("else setOutput(getT"+t.length+"(yR, yC-"+t[t.length-1]+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},M9=function(n,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=tf(n,t);var e=this.outputShape,r=e.length,i=$n(r),o=Jo("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map(function(w,b){return"T"+b});var a=new Array(n.length-1);a[0]=n[0][t];for(var u=1;u<a.length;u++)a[u]=a[u-1]+n[u][t];var c=s[t],d=s.slice(-2),f=s.join(),p="if ("+c+" < "+a[0]+") {\n        return getChannel(\n            getT0("+f+"), vec2("+d.join()+"));\n        }";for(u=1;u<a.length;u++){var g=a[u-1];p+="\n        if ("+c+" < "+a[u]+"  && "+c+" >= "+a[u-1]+") {\n          return getChannel(\n            getT"+u+"("+Ib(s,c,g)+"),\n            vec2("+Ib(d,c,g)+"));\n        }"}var y=a[a.length-1];p+="\n        return getChannel(\n          getT"+a.length+"("+Ib(s,c,y)+"),\n          vec2("+Ib(d,c,y)+"));",this.userCode="\n      float getValue("+s.map(function(w){return"int "+w})+") {\n        "+p+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n\n        "+o[r-1]+" = "+o[r-1]+" + 1;\n        if ("+o[r-1]+" < "+e[r-1]+") {\n          result.g = getValue("+o+");\n        }\n\n        "+o[r-2]+" = "+o[r-2]+" + 1;\n        if ("+o[r-2]+" < "+e[r-2]+") {\n          result.a = getValue("+o+");\n        }\n\n        "+o[r-1]+" = "+o[r-1]+" - 1;\n        if ("+o[r-2]+" < "+e[r-2]+" &&\n            "+o[r-1]+" < "+e[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "};function Ib(n,t,e){var r=n.indexOf(t);return n.map(function(i,o){return o===r?i+" - "+e:i}).join()}var k9=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+n.batchSize+"; b++) {\n          for (int yR = 0; yR < "+n.outHeight+"; yR++) {\n            int xR = wR + yR * "+n.strideHeight+" - "+n.padInfo.top+";\n\n            if (xR < 0 || xR >= "+n.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+n.outWidth+"; yC++) {\n              int xC = wC + yC * "+n.strideWidth+" - "+n.padInfo.left+";\n\n              if (xC < 0 || xC >= "+n.inWidth+") {\n                continue;\n              }\n\n              if ("+("channelsLast"===n.dataFormat)+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},P9=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterHeight,e=n.filterWidth,o="channelsLast"===n.dataFormat;this.userCode="\n      const ivec2 pads = ivec2("+(t-1-n.padInfo.top)+", "+(e-1-n.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+(o?3:1)+"];\n\n        ivec2 dyCorner = ivec2(coords["+(o?1:2)+"], coords["+(o?2:3)+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+n.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+n.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+e+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+n.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+e+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+n.outChannels+"; d2++) {\n\n              if ("+o+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},O9=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+n.batchSize+"; b++) {\n          for (int yF = 0; yF < "+n.outDepth+"; yF++) {\n            int xF = wF + yF * "+n.strideDepth+" - "+n.padInfo.front+";\n\n            if (xF < 0 || xF >= "+n.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+n.outHeight+"; yR++) {\n              int xR = wR + yR * "+n.strideHeight+" - "+n.padInfo.top+";\n\n              if (xR < 0 || xR >= "+n.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+n.outWidth+"; yC++) {\n                int xC = wC + yC * "+n.strideWidth+" - "+n.padInfo.left+";\n\n                if (xC < 0 || xC >= "+n.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},N9=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterDepth,e=n.filterHeight,r=n.filterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(t-1-n.padInfo.front)+", "+(e-1-n.padInfo.top)+", "+(r-1-n.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+n.strideDepth+".0;\n\n          if (dyF < 0.0 || dyF >= "+n.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+e+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+n.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+n.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+e+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+n.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+n.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+n.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},F9=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+n.outChannels/n.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+n.batchSize+"; b++) {\n          for (int yR = 0; yR < "+n.outHeight+"; yR++) {\n            int xR = wR + yR * "+n.strideHeight+" - "+n.padInfo.top+";\n\n            if (xR < 0 || xR >= "+n.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+n.outWidth+"; yC++) {\n              int xC = wC + yC * "+n.strideWidth+" - "+n.padInfo.left+";\n\n              if (xC < 0 || xC >= "+n.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},B9=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterHeight,e=n.filterWidth,a=n.outChannels/n.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(t-1-n.padInfo.top)+", "+(e-1-n.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+n.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+n.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+e+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+n.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+e+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+a+"; dm++) {\n              int d2 = d1 * "+a+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},eF=function(n,t,e,r){void 0===t&&(t=!1),void 0===e&&(e=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.padInfo.top,o=n.padInfo.left,s=n.strideHeight,a=n.strideWidth,u=n.dilationHeight,c=n.dilationWidth,d=n.filterHeight,f=n.filterWidth,p=4*Math.floor(n.inChannels/4),g=n.inChannels%4,v="channelsLast"===n.dataFormat,y=v?1:2,w=v?2:3,b=v?3:1,A="",_="";e&&(A=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+e+"\n        }":"\n          float activation(float x) {\n            "+e+"\n          }\n        ",_="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+A+"\n\n      const ivec2 strides = ivec2("+s+", "+a+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+b+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+y+"], coords["+w+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+n.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+n.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+v+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===g)+") {\n\n              if ("+v+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+p+") *\n                    getW(wR, wC, "+p+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+p+", xR, xC) *\n                    getW(wR, wC, "+p+", d2);\n              }\n\n            } else if ("+(2===g)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2)\n              );\n\n              if ("+v+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===g)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2),\n                getW(wR, wC, "+p+" + 2, d2)\n              );\n\n              if ("+v+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1),\n                  getX(batch, xR, xC, "+p+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC),\n                  getX(batch, "+p+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+C+"\n        "+_+"\n        setOutput(result);\n      }\n    "},L9=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var t=n.padInfo.front,e=n.padInfo.top,r=n.padInfo.left,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,c=n.dilationWidth,d=n.filterDepth,f=n.filterHeight,p=n.filterWidth,g=4*Math.floor(n.inChannels/4),v=n.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+o+", "+s+");\n      const ivec3 pads = ivec3("+t+", "+e+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+d+"; wF++) {\n          int xF = xFCorner + wF * "+a+";\n\n          if (xF < 0 || xF >= "+n.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+n.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+p+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+n.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+g+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===v)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+g+") *\n                  getW(wF, wR, wC, "+g+", d2);\n              } else if ("+(2===v)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+g+"),\n                  getX(batch, xF, xR, xC, "+g+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+g+", d2),\n                  getW(wF, wR, wC, "+g+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===v)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+g+"),\n                  getX(batch, xF, xR, xC, "+g+" + 1),\n                  getX(batch, xF, xR, xC, "+g+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+g+", d2),\n                  getW(wF, wR, wC, "+g+" + 1, d2),\n                  getW(wF, wR, wC, "+g+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},tF=function(n,t,e,r){void 0===t&&(t=!1),void 0===e&&(e=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.inHeight,o=n.inWidth,s=n.padInfo.top,a=n.padInfo.left,u=n.strideHeight,c=n.strideWidth,d=n.dilationHeight,f=n.dilationWidth,p=n.filterHeight,g=n.filterWidth,v=n.outChannels/n.inChannels,y="",w="";e&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+e+"\n        }":"\n          float activation(float x) {\n            "+e+"\n          }\n        ",w="result = activation(result);");var b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+v+";\n        int q = d2 - d1 * "+v+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+p+"; wR++) {\n          int xR = xRCorner + wR * "+d+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+g+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+o+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+b+"\n        "+w+"\n        setOutput(result);\n      }\n    "},nF=function(n,t,e,r){void 0===t&&(t=!1),void 0===e&&(e=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var i=n.inHeight,o=n.inWidth,s=n.padInfo.top,a=n.padInfo.left,u=n.strideHeight,c=n.strideWidth,d=n.dilationHeight,f=n.dilationWidth,p=n.filterHeight,g=n.filterWidth,v=g,y="int xR; int xC; int xCOffset;",w=0;w<p;w++)for(var b=0;b<g;b++)y+="\n          vec4 xTexelR"+w+"C"+2*b+" = vec4(0.);\n          vec4 wR"+w+"C"+b+" = vec4(0.);\n          vec4 xR"+w+"C"+b+" = vec4(0.);";for(w=0;w<p;w++)for(var A=0;A<v;A++){if(y+="\n          xR = xRCorner + "+w*d+";\n          xC = xCCorner + "+(b=2*A)*f+";\n        ",1===c){if(b<g&&(y+=a%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+w+"C"+b+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    xTexelR"+w+"C"+b+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+w+"C"+b+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+w+"C"+b+" = vec4(previous.zw, xTexelR"+w+"C"+b+".xy);\n                } else {\n                  xR"+w+"C"+b+" = vec4(0, 0, xTexelR"+w+"C"+b+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+o+") {\n                  xTexelR"+w+"C"+b+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+w+"C"+b+" = vec4(0.);\n                }\n\n                xR"+w+"C"+b+" = xTexelR"+w+"C"+b+";\n              ",b+1<g)){var _=a%2==0?hE(f):f;f%2==0&&a%2==1||f%2!=0&&a%2!=1?(y+="\n                  xCOffset = xC + "+a%2+" + "+_+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+w+"C"+(b+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(y+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+o+") {\n                      xTexelR"+w+"C"+b+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+w+"C"+b+" = vec4(0.);\n                    }\n                  "),y+="\n                  xR"+w+"C"+(b+1)+" = vec4(\n                    xTexelR"+w+"C"+b+".zw, xTexelR"+w+"C"+(b+2)+".xy);\n                "):y+="\n                  xCOffset = xC + "+_+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+w+"C"+(b+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+w+"C"+(b+1)+" = xTexelR"+w+"C"+(b+2)+";\n                "}}else b<g&&(y+="\n              if(xR >= 0 && xR < "+i+") {\n            ",a%2==1?(y+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+w+"C"+b+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+w+"C"+b+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+o+") {\n                  xTexelR"+w+"C"+(b+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+w+"C"+(b+2)+" = vec4(0.);\n                }\n\n                xR"+w+"C"+b+" = vec4(\n                  xTexelR"+w+"C"+b+".zw, xTexelR"+w+"C"+(b+2)+".zw);\n              ",b+1<g&&(y+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+o+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+w+"C"+(b+1)+" = vec4(xTexelR"+w+"C"+(b+2)+".xy, final.xy);\n                ")):(y+="\n                if(xC >= 0 && xC < "+o+") {\n                  xTexelR"+w+"C"+b+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+w+"C"+b+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+w+"C"+(b+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+w+"C"+(b+2)+" = vec4(0.);\n                }\n\n                xR"+w+"C"+b+" = vec4(\n                  xTexelR"+w+"C"+b+".xy, xTexelR"+w+"C"+(b+2)+".xy);\n              ",b+1<g&&(y+="\n                  xR"+w+"C"+(b+1)+" = vec4(\n                    xTexelR"+w+"C"+b+".zw, xTexelR"+w+"C"+(b+2)+".zw);\n                ")),y+="}");b<g&&(y+="\n            vec4 wTexelR"+w+"C"+b+" = getW("+w+", "+b+", d1, q);\n            wR"+w+"C"+b+" = vec4(wTexelR"+w+"C"+b+".xz, wTexelR"+w+"C"+b+".xz);\n          ",b+1<g&&(y+="\n              vec4 wTexelR"+w+"C"+(b+1)+" = getW("+w+", "+(b+1)+", d1, q);\n              wR"+w+"C"+(b+1)+" =\n                vec4(wTexelR"+w+"C"+(b+1)+".xz, wTexelR"+w+"C"+(b+1)+".xz);"))}for(w=0;w<p;w++)for(b=0;b<g;b++)y+="dotProd += xR"+w+"C"+b+" * wR"+w+"C"+b+";";var C="",E="";e&&(C=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+e+"\n        }":"vec4 activation(vec4 x) {\n          "+e+"\n        }",E="result = activation(result);");var T=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+C+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+y+"\n\n        vec4 result = dotProd;\n        "+T+"\n        "+E+"\n        setOutput(result);\n      }\n    "},U9=function(n,t,e,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=n[0],s=n[1],a=n[2],d=e[0],f=e[1];this.outputShape=[t[0],d,f,n[3]];var g=[s-1+".0",a-1+".0"],v=g[0],y=g[1],w=d>1?[""+(s-1)/(d-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],C=f>1?[""+(a-1)/(f-1),"(x2-x1) * width_ratio","x1*"+y+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+y];this.userCode="\n      const float height_ratio = float("+w[0]+");\n      const float width_ratio = float("+C[0]+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+w[1]+";\n        float width_scale = "+C[1]+";\n\n        float in_y = "+w[2]+";\n        if( in_y < 0.0 || in_y > "+v+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+C[2]+";\n        if( in_x < 0.0 || in_x > "+y+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+("bilinear"===r?1:0)+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},z9=function(n,t,e){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=n[n.length-1],o=e?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(e?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+$n(r)+" coords = getOutputCoords();\n        int end = "+rF(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+rF(r,"coords")+" = idx;\n          val += getX("+function(s,a){if(1===s)return""+a;if(2===s)return a+".x, "+a+".y";if(3===s)return a+".x, "+a+".y, "+a+".z";if(4===s)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function rF(n,t){if(1===n)return""+t;if(2===n)return t+".y";if(3===n)return t+".z";if(4===n)return t+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var j9=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pv.DENSE;var t=gv(n),e=Xi();this.outputShape=n,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+uf(["r","c","d"],n)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+e.output+" = result;\n      }\n    "},H9=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pv.DENSE;var t=gv(n),e=Xi();this.outputShape=n,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+uf(["r","c","d"],n)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+e.output+" = result;\n      }\n    "},W9=function(){function n(t,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return n.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n}(),V9=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},q9=function(n){this.variableNames=["A"],this.outTexUsage=ys.DOWNLOAD;var t=Xi();this.outputShape=n,this.userCode="\n      "+QN+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},G9=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ys.DOWNLOAD;var t=Xi();this.outputShape=n,this.userCode="\n      "+QN+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},K9=function(n,t,e){void 0===e&&(e=!1),this.variableNames=["A"];var r=Xi(),i=t[0],o=t[1];this.outputShape=n;var s="result";e&&(s="floor(result * 255. + 0.5)"),this.userCode="\n      "+$E(n)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+s+", 0., 0., 0.);\n      }\n    "},Q9=function(n,t,e){void 0===e&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Xi(),i=t[0],o=t[1];this.outputShape=n;var s="",a="result";e&&(a="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var d=2*u+c;s+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+n[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+n[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+d+"] = values[0];\n              } else if(offset == 1) {\n                result["+d+"] = values[1];\n              } else if(offset == 2) {\n                result["+d+"] = values[2];\n              } else {\n                result["+d+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+$E(n)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+s+"\n\n        "+r.output+" = "+a+";\n      }\n    "},iF=function(n,t,e){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI;this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+n+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+(e?r+".0":"1.0")+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},J9=function(){function n(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return n.prototype.getCustomSetupFunc=function(t){var e=this;return function(r,i){null==e.valueLoc&&(e.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(e.valueLoc,t)}},n}(),Z9=function(n,t,e){this.variableNames=["A","indices"];var r=n.slice();r[e]=t,this.outputShape=r,this.rank=r.length;var i=$n(this.rank),o=function(s,a){var u=s.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(1===u)return"int(getIndices(resRC))";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],f=0;f<s.length;f++)d.push(f===a?"int(getIndices("+c[f]+"))":""+c[f]);return d.join()}(n,e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},$9=function(n,t,e){this.sliceDim=n,this.strides=t,this.variableNames=["x","indices"],this.outputShape=e;var r=$n(t.length),i=$n(e.length);this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+(this.sliceDim>1?"strides[j]":"strides")+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function oF(n,t){var e=Xi();return eN(n,t,e.version+"\n    precision highp float;\n    "+e.attribute+" vec3 clipSpacePos;\n    "+e.attribute+" vec2 uv;\n    "+e.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function sF(n,t){return iN(n,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function aF(n,t){return oN(n,t,new Uint16Array([0,1,2,2,1,3]))}function Iv(n,t,e,r,i,o,s){aN(e,r);var a=sN(n,t),u=n.TEXTURE_2D;return $e(n,t,function(){return n.bindTexture(u,a)}),$e(n,t,function(){return n.texParameteri(u,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}),$e(n,t,function(){return n.texParameteri(u,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}),$e(n,t,function(){return n.texParameteri(u,n.TEXTURE_MIN_FILTER,n.NEAREST)}),$e(n,t,function(){return n.texParameteri(u,n.TEXTURE_MAG_FILTER,n.NEAREST)}),$e(n,t,function(){return n.texImage2D(u,0,i,e,r,0,o,s,null)}),$e(n,t,function(){return n.bindTexture(n.TEXTURE_2D,null)}),a}function uF(n,t,e,r,i){var o=sb(e,r);return Iv(n,t,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,n.FLOAT)}function cF(n,t,e,r,i){var o=sb(e,r);return Iv(n,t,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function lF(n,t,e,r,i){var o=sb(e,r);return Iv(n,t,o[0],o[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function dF(n,t,e,r,i){var o=mv(e,r);return Iv(n,t,o[0],o[1],i.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function fF(n,t,e,r,i){var o=mv(e,r);return Iv(n,t,o[0],o[1],i.internalFormatPackedHalfFloat,n.RGBA,i.textureTypeHalfFloat)}function hF(n,t,e,r){return $e(n,t,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),ME(n,t,e,"clipSpacePos",r,3,20,0)&&ME(n,t,e,"uv",r,2,20,12)}function pF(n,t,e,r,i,o,s){var a,u,c;$e(n,t,function(){return n.bindTexture(n.TEXTURE_2D,e)}),o instanceof Uint8Array?(a=new Uint8Array(r*i*4),u=n.UNSIGNED_BYTE,c=n.RGBA):(a=new Float32Array(r*i*4),u=n.FLOAT,c=s.internalFormatPackedFloat),a.set(o),$e(n,t,function(){return n.texImage2D(n.TEXTURE_2D,0,c,r,i,0,n.RGBA,u,a)}),$e(n,t,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function gF(n,t,e,r){$e(n,t,function(){return n.bindTexture(n.TEXTURE_2D,e)}),r.data instanceof Uint8Array?$e(n,t,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)}):$e(n,t,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)}),$e(n,t,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function mF(n,t,e,r,i){var o=n.createBuffer();$e(n,t,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,o)});var s=16*e*r;return $e(n,t,function(){return n.bufferData(n.PIXEL_PACK_BUFFER,s,n.STREAM_READ)}),$e(n,t,function(){return n.readPixels(0,0,r,e,n.RGBA,n.FLOAT,0)}),$e(n,t,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}),o}function vF(n,t,e){var r=n,i=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function yF(n,t,e,r,i){var o=sb(e,r),s=o[0],a=o[1],u=new Uint8Array(e*r*4);return $e(n,t,function(){return n.readPixels(0,0,s,a,i.downloadTextureFormat,n.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function wF(n,t,e,r,i,o,s,a){var p,u=n,c=new Float32Array((p=mv(o,s))[0]*p[1]*4);return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function bF(n,t,e,r){var i=new Float32Array(e*r*4);return $e(n,t,function(){return n.readPixels(0,0,r,e,n.RGBA,n.FLOAT,i)}),i}var eG=Object.freeze({createVertexShader:oF,createVertexBuffer:sF,createIndexBuffer:aF,createFloat32MatrixTexture:uF,createFloat16MatrixTexture:cF,createUnsignedBytesMatrixTexture:lF,createPackedMatrixTexture:dF,createFloat16PackedMatrixTexture:fF,bindVertexProgramAttributeStreams:hF,uploadDenseMatrixToTexture:pF,uploadPixelDataToTexture:gF,createBufferFromOutputTexture:mF,downloadFloat32MatrixFromBuffer:vF,downloadByteEncodedFloatMatrixFromOutputTexture:yF,downloadPackedMatrixFromBuffer:wF,downloadMatrixFromPackedOutputTexture:bF}),AF=function(){function n(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=de().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,JO(e,t)):this.gl=hu(e);var r="WEBGL_color_buffer_float";if(1===de().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=vv(this.gl,this.debug,"OES_texture_float"),bs(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=vv(this.gl,this.debug,"OES_texture_half_float");else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),bs(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=vv(this.gl,this.debug,"EXT_color_buffer_half_float");else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(bs(this.gl,r="EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!bs(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=sF(this.gl,this.debug),this.indexBuffer=aF(this.gl,this.debug),this.framebuffer=uN(this.gl,this.debug),this.textureConfig=RE(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return de().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;$e(e,this.debug,function(){return e.finish()}),$e(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),$e(e,this.debug,function(){return e.deleteFramebuffer(t.framebuffer)}),$e(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),$e(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),$e(e,this.debug,function(){return e.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),uF(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),cF(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),lF(this.gl,this.debug,t,e)},n.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),gF(this.gl,this.debug,t,e)},n.prototype.uploadDenseMatrixToTexture=function(t,e,r,i){this.throwIfDisposed(),pF(this.gl,this.debug,t,e,r,i,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),fF(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),dF(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(kE(this.gl,this.debug,this.framebuffer),this.outputTexture=null),$e(this.gl,this.debug,function(){return e.gl.deleteTexture(t)})},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,r){var i=this;return this.downloadMatrixDriver(t,function(){return yF(i.gl,i.debug,e,r,i.textureConfig)})},n.prototype.downloadPackedMatrixFromBuffer=function(t,e,r,i,o,s){return wF(this.gl,t,0,0,0,o,s)},n.prototype.downloadFloat32MatrixFromBuffer=function(t,e){return vF(this.gl,t,e)},n.prototype.createBufferFromTexture=function(t,e,r){this.bindTextureToFrameBuffer(t);var i=mF(this.gl,this.debug,e,r);return this.unbindTextureToFrameBuffer(),i},n.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},n.prototype.createFence=function(t){var e,r,i=this;if(de().getBool("WEBGL_FENCE_API_ENABLED")){var o=t,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var a=o.clientWaitSync(s,0,0);return a===o.ALREADY_SIGNALED||a===o.CONDITION_SATISFIED},e=s}else de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(e,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(t,e,r){var i=this;return this.downloadMatrixDriver(t,function(){return bF(i.gl,i.debug,e,r)})},n.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,r=tN(e,this.debug,t),i=oF(e,this.debug),o=nN(e,this.debug);return $e(e,this.debug,function(){return e.attachShader(o,i)}),$e(e,this.debug,function(){return e.attachShader(o,r)}),rN(e,this.debug,o),this.debug&&cb(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=hF(e,this.debug,this.program,this.vertexBuffer)),o},n.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&$e(this.gl,this.debug,function(){return e.gl.deleteProgram(t)})},n.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&cb(this.gl,this.debug,this.program),$e(this.gl,this.debug,function(){return e.gl.useProgram(t)})},n.prototype.getUniformLocation=function(t,e,r){return void 0===r&&(r=!0),this.throwIfDisposed(),r?lN(this.gl,this.debug,t,e):dN(this.gl,t,e)},n.prototype.getAttributeLocation=function(t,e){var r=this;return this.throwIfDisposed(),$e(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,e)})},n.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},n.prototype.setInputMatrixTexture=function(t,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),fN(this.gl,this.debug,0,t,e,r)},n.prototype.setOutputMatrixTexture=function(t,e,r){this.setOutputMatrixTextureDriver(t,r,e)},n.prototype.setOutputPackedMatrixTexture=function(t,e,r){this.throwIfDisposed();var i=mv(e,r);this.setOutputMatrixTextureDriver(t,i[0],i[1])},n.prototype.setOutputMatrixWriteRegion=function(t,e,r,i){this.setOutputMatrixWriteRegionDriver(r,t,i,e)},n.prototype.setOutputPackedMatrixWriteRegion=function(t,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){null!=this.program&&cb(this.gl,this.debug,this.program),yv(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),$e(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},n.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),$e(this.gl,this.debug,function(){return t.gl.finish()})},n.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=vv(this.gl,this.debug,2===de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(2===de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},n.prototype.endQuery=function(){if(2!==de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(t){return nt(this,void 0,void 0,function(){var e=this;return rt(this,function(r){switch(r.label){case 0:return[4,pE(function(){return e.disposed||e.isQueryAvailable(t,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},n.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(t,i.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,i.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},n.prototype.pollFence=function(t){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},n.prototype.pollItems=function(){for(var t=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},n.prototype.addItemToPoll=function(t,e){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||pE(function(){return r.pollItems(),0===r.itemsToPoll.length})},n.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),lb(this.gl,this.debug,t,this.framebuffer),this.debug&&yv(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(lb(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&yv(this.gl)):kE(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var r=e();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(t,e,r){this.throwIfDisposed();var i=this.gl;lb(i,this.debug,t,this.framebuffer),this.debug&&yv(i),this.outputTexture=t,$e(i,this.debug,function(){return i.viewport(0,0,e,r)}),$e(i,this.debug,function(){return i.scissor(0,0,e,r)})},n.prototype.setOutputMatrixWriteRegionDriver=function(t,e,r,i){var o=this;this.throwIfDisposed(),$e(this.gl,this.debug,function(){return o.gl.scissor(t,e,r,i)})},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},n}();function xF(n,t){if(n.length!==t.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+t.length+" inputs");n.forEach(function(e,r){var i=e.logicalShape,o=t[r],s=o.shape;if(!qr(i,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+s+" must match");if(!e.isUniform||!o.isUniform){var a=e.texShape,u=o.isUniform?null:o.texData.texShape;if(!qr(a,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+u+" must match")}})}var tG=function(n,t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var i=e.inChannels,o=e.strideWidth,s=e.strideHeight,a=e.padInfo,u=e.outWidth,c=e.dilationWidth,d=e.dilationHeight,f=e.dataFormat,p=a.left,g=a.top,v=i*e.filterWidth,y=Xi(),w="channelsLast"===f,b=w?0:1,A=w?1:2,_="",C=0;C<=1;C++)for(var E=0;E<=1;E++)_+="\n          blockIndex = rc.y + "+E+";\n          pos = rc.x + "+C+";\n\n          if(blockIndex < "+n[1]+" && pos < "+n[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+s+" - "+g+";\n            d0 = offsetY + "+d+" * (pos / "+v+");\n\n            if(d0 < "+t[b]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+p+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+v+".) / "+i+".));\n\n              if(d1 < "+t[A]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+w+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*C+E)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*C+E)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+_+"\n\n        "+y.output+" = result;\n      }\n    "},nG=function(n,t,e,r,i){this.variableNames=["x"],this.outputShape=[];var s=t,a=n[3]-1;this.outputShape=n;var u="float("+e+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+s+"; j <= "+s+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+a+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));")+";\n        setOutput(val);\n      }\n    "},rG=function(n,t,e,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=t,this.bias=e,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+e+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},iG=function(n,t,e,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var s=t,a=n[3]-1;this.outputShape=n;var u="float("+e+") + float("+r+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+s+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+s+"; j <= "+s+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+a+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+(.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));")+";\n        setOutput(result);\n      }\n    "},oG=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var i=n.effectiveFilterHeight,o=n.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(i-1-n.padInfo.top)+", "+(o-1-n.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+n.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+n.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+n.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+n.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(i*o-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},sG=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var a=n.effectiveFilterDepth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth;this.userCode="\n      const ivec3 pads = ivec3("+(a-1-n.padInfo.front)+", "+(u-1-n.padInfo.top)+", "+(c-1-n.padInfo.left)+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+a+";\n           wD += "+n.dilationDepth+") {\n          float dyD = float(dyDCorner + wD) / "+n.strideDepth+".0;\n\n          if (dyD < 0.0 || dyD >= "+n.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+n.dilationHeight+") {\n            float dyR = float(dyRCorner + wR) / "+n.strideHeight+".0;\n\n            if (dyR < 0.0 || dyR >= "+n.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+n.dilationWidth+") {\n              float dyC = float(dyCCorner + wC) / "+n.strideWidth+".0;\n\n              if (dyC < 0.0 || dyC >= "+n.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+(a*u*c-1)+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},nD=function(n,t,e,r,i,o,s){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null),void 0===s&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var u=Math.ceil((e?n[1]:n[2])/2),c=e?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",f=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";o&&(g=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+o+"\n        }":"vec4 activation(vec4 x) {\n          "+o+"\n        }",v="result = activation(result);");var y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+g+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+d+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+f[0]+" * "+p[0]+");\n          result += ("+f[1]+" * "+p[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+y+"\n\n        "+v+"\n\n        setOutput(result);\n      }\n    "},aG=function(){function n(t,e,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return n.prototype.getCustomSetupFunc=function(t){var e=this;return function(r,i){null==e.seedLoc&&(e.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(e.seedLoc,t)}},n}(),uG=function(n,t,e,r){this.variableNames=["indices"],this.outputShape=[n,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+e+"),\n                      float(index == coords.y)));\n      }\n    "},cG=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var a,c,d,t=n.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var e=Jo("rc",t),r=$n(t),i=function(a,u,c){if(1===a)return"rc > "+u[0];for(var d="",f=a-2;f<a;f++)d+=c[f]+" >= "+u[f],f<a-1&&(d+="||");return d}(t,n,e),o=function(a,u,c,d){if(1===a)return"";var f=d.slice(-2);return"\n    int r = "+f[0]+";\n    int c = "+f[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+u+";\n    bool rEdge = rp1 >= "+c+";\n  "}(t,n[n.length-1],n[n.length-2],e),s=(d=function(f,p){for(var g=[],v=0;v<=1;v++)for(var y=0;y<=1;y++){for(var w=(0===v?"r":"rp1")+", "+(0===y?"c":"cp1"),b=2;b<f;b++)w=p[p.length-1-b]+","+w;g.push(w)}return g}(c=(a=n).length,e),1===c?"getA(rc),\n            rc + 1 >= "+a[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+d[0]+"),\n          cEdge ? 0. : getA("+d[1]+"),\n          rEdge ? 0. : getA("+d[2]+"),\n          rEdge || cEdge ? 0. : getA("+d[3]+")");this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+s+"));\n          }\n        }\n      "}},lG=function(n,t,e){this.variableNames=["x"],this.outputShape=t.map(function(u,c){return u[0]+n[c]+u[1]});var r=n.length,i=$n(r),o=t.map(function(u){return u[0]}).join(","),s=t.map(function(u,c){return u[0]+n[c]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+o+");\n      "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+e+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+a+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+s+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+e+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},dG=function(n,t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(w,b){return w[0]+n[b]+w[1]});for(var r=n.length,i=$n(r),o=t.map(function(w){return w[0]}).join(","),s=t.map(function(w,b){return w[0]+n[b]}).join(","),a=Jo("rc",r),u=Jo("source",r),c=a[r-1]+" < "+this.outputShape[r-1],d=1===r?"source":"vec2("+u.slice(-2).join()+")",f=[i+" rc = outputLoc;",a[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+a[r-2]+" += 1;\n       if("+a[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+a[r-1]+" += 1;\n         if("+c+") {"],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",v=0,y=1===r?2:4;v<y;v++)g+="\n        "+f[v]+"\n        if ("+p+") {\n          result["+v+"] = float("+e+");\n        } else {\n          "+i+" source = rc - start;\n          result["+v+"] = getChannel(getX("+u.join()+"), "+d+");\n        }\n      ";this.userCode="\n      const "+i+" start = "+i+"("+o+");\n      const "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+(g+=1===r?"} ":"}}")+"\n        setOutput(result);\n      }\n    "},rD=function(n,t,e){if(this.variableNames=["x"],"avg"===t&&e)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,i=n.strideHeight,o=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;var p="avg"===t,g="0.0";if(p||(g="-1.0 / 1e-20"),e)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+d+", "+f+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+s+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+n.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+a+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+n.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(v="avgValue / count");var y=4*Math.floor(r/4),w=r%4,b="\n      if ("+p+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+d+", "+f+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+n.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+s+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+n.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+y+"; wC += 4) {\n            int xC = xCCorner + wC * "+a+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              getValue(batch, xR, xC + 3 * "+a+", d)\n            );\n\n            "+b+"\n          }\n\n          int xC = xCCorner + "+y+";\n          if ("+(1===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+b+"\n          } else if ("+(2===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+b+"\n          } else if ("+(3===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              initializationValue\n            );\n\n            "+b+"\n          }\n        }\n        setOutput("+v+");\n      }\n    "}},iD=function(n,t,e){if(this.variableNames=["x"],"avg"===t&&e)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterDepth,f=n.effectiveFilterHeight,p=n.effectiveFilterWidth,g=n.padInfo.front,v=n.padInfo.top,y=n.padInfo.left;this.outputShape=n.outShape;var w="avg"===t,b="0.0";if(w||(b="-1.0 / 1e-20"),e)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+o+", "+s+");\n        const ivec3 pads = ivec3("+g+", "+v+", "+y+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+d+";\n              wD += "+a+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+n.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+f+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+n.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+p+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+n.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+f+" * "+p+" +\n                      wR * "+p+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var A=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(A="avgValue / count");var _=4*Math.floor(r/4),C=r%4,E="\n      if ("+w+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+o+", "+s+");\n      const ivec3 pads = ivec3("+g+", "+v+", "+y+");\n      const float initializationValue = "+b+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+n.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+b+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+d+";\n            wD += "+a+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+n.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+n.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+_+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+E+"\n            }\n\n            int xC = xCCorner + "+_+";\n            if ("+(1===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+E+"\n            } else if ("+(2===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+E+"\n            } else if ("+(3===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+E+"\n            }\n          }\n          setOutput("+A+");\n        }\n      }\n    "}},fG=function(n,t){this.variableNames=["x"];var e=n.windowSize,r=n.batchSize,i=n.inSize,o=Math.ceil(i/e);this.outputShape=[r,o];var s="0.0",a="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",a="min"):"max"===t&&(s="-1.0 / 1e-20",a="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var c=4*Math.floor(e/4),d=e%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+a+"(values, minMaxValue);\n      }\n    ",p="vec4";"all"===t?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var g="";i%e>0&&(g="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+g+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+e+";\n\n        vec4 minMaxValue = vec4("+s+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===d)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===d)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===d)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "},hG=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var e="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),e+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+uf(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+$E(n)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+n[1]+";\n        int cols = "+n[2]+";\n\n        "+e+"\n\n        setOutput(result);\n      }\n    "},pG=function(n,t,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],s=n.shape,a=s[1],u=s[2],c=[e&&a>1?i-1:i,e&&u>1?o-1:o],d=[e&&a>1?a-1:a,e&&u>1?u-1:u],f=c[0]/d[0],p=c[1]/d[1],g=1/f,v=1/p,y=2*Math.ceil(g)+2,w=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+g+");\n        const float invWidthScale = float("+v+");\n\n        const int winHeight = int("+y+");\n        const int winWidth = int("+w+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},gG=function(n,t,e,r){this.variableNames=["A"],this.outputShape=[];var o=n[1],s=n[2];this.outputShape=[n[0],t,e,n[3]];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},mG=function(n,t,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=n[1],s=n[2],a=n[3];this.outputShape=[n[0],t,e,a];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+s+".0,\n                                     "+s+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(a-1)+";\n        bool hasNextRow = coords.z < "+(e-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},vG=function(n,t,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],s=n.shape,a=s[1],u=s[2],c=[e&&a>1?i-1:i,e&&u>1?o-1:o],d=[e&&a>1?a-1:a,e&&u>1?u-1:u],f=c[0]/d[0],p=c[1]/d[1],g=1/f,v=1/p,y=2*Math.ceil(g)+2,w=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+g+");\n        const float invWidthScale = float("+v+");\n\n        const int winHeight = int("+y+");\n        const int winWidth = int("+w+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+d[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+d[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+e+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+e+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},yG=function(n,t,e,r){this.variableNames=["A"],this.outputShape=[];var o=n[1],s=n[2];this.outputShape=[n[0],t,e,n[3]];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(r?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},wG=function(n,t){this.variableNames=["x"];var e=n.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=n,1!==e){var r=n.map(function(o,s){return-1!==t.indexOf(a=s)&&1!==n[a]?n[a]+" - coords["+a+"] - 1":"coords["+a+"]";var a}).join(","),i=$n(e);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+n[0]+" - coord - 1));\n        }\n      "},bG=function(n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=n.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=n;var u,r=Jo("rc",e),i=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],s=$n(e);function a(u){var c=n.map(function(d,f){return g=u,-1!==t.indexOf(p=f)&&1!==n[p]?n[p]+" - "+g[p]+" - 1":""+g[p];var p,g});return"getChannel(getX("+c.join(",")+"), vec2("+c.slice(-2).join(",")+"))"}this.userCode=1===e?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+n[0]+" - rc - 1),\n            "+n[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+n[0]+" - (rc  + 1) - 1),\n                "+n[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+s+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+a(r.slice())+";\n          if("+i+"){\n            result.g = "+((u=r.slice())[e-1]="("+u[e-1]+" + 1)",a(u)+";\n          }\n          if(")+o+") {\n            result.b = "+function(u){return u[e-2]="("+u[e-2]+" + 1)",a(u)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(u){return u[e-1]="("+u[e-1]+" + 1)",u[e-2]="("+u[e-2]+" + 1)",a(u)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},CF=function(n,t,e,r,i,o,s){void 0===s&&(s=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var a=$n(i.length),u=$n(o.length),c="";1===e?c="i":2===e&&(c="i, j");var f="";1===r?f="i":2===r&&(f="i, coords[1]"),this.userCode="\n        "+a+" strides = "+a+"("+i+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+n+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round(getIndices("+c+"));\n              flattenedIndex += index * "+(t>1?"strides[j]":"strides")+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates("+f+");\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},AG=function(n,t){this.variableNames=["x","segmentIds"];var e=n.windowSize,r=n.batchSize,i=n.inSize,o=n.numSegments,s=o*Math.ceil(i/e);this.outputShape=[r,s];var a=4*Math.floor(e/4),u=e%4,c="\n        sumValue += dot(values, segFilter);\n    ",d="";i%e>0&&(d="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var f="";i%e>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+e+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+a+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+a+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},xG=function(n,t,e){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,e>4)throw Error("Where for rank "+e+" is not yet supported");if(1===e)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[],u=0;u<t.length;u++)a.push(""+o[u]),u<n&&s.push(""+o[u]);r=s.join(),i=a.join()}var c=$n(e);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},CG=function(){function n(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,r=$n(this.rank),i="uniform int start["+this.rank+"];",o=function(s){if(1===s)return"sourceLoc";if(s<=6)return oD.slice(0,s).map(function(a){return"sourceLoc."+a}).join(",");throw Error("Slicing for rank "+s+" is not yet supported")}(this.rank);e="\n        "+r+" sourceLoc;\n        "+r+" coords = getOutputCoords();\n        "+t.map(function(s,a){return"sourceLoc."+oD[a]+" = start["+a+"] + coords."+oD[a]+";"}).join("\n")+"\n      ",this.userCode="\n      "+i+"\n      void main() {\n        "+e+"\n        setOutput(getSource("+o+"));\n      }\n    "}return n.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,i){null==e.startLoc&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),null==e.startLoc)||r.gl.uniform1iv(e.startLoc,t)}},n}(),oD=["x","y","z","w","u","v"],_G=function(){function n(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var e=$n(this.rank),r=Jo("coords",this.rank),i=Jo("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+i.slice(-2).join()+")",s="getChannel(getSource("+i.join()+"), "+o+")",a="\n      result.x = "+s+";\n      if (++"+r[this.rank-1]+" < "+t[this.rank-1]+") {\n        ++"+i[this.rank-1]+";\n        result.y = "+s+";\n        --"+i[this.rank-1]+";\n      }\n    ",u=1===this.rank?"":"\n      --"+r[this.rank-1]+";\n      if (++"+r[this.rank-2]+" < "+t[this.rank-2]+") {\n        ++"+i[this.rank-2]+";\n        result.z = "+s+";\n        if (++"+r[this.rank-1]+" < "+t[this.rank-1]+") {\n          ++"+i[this.rank-1]+";\n          result.w = "+s+";\n        }\n      }\n    ",c=this.rank<=4?"sourceLoc = coords +\n            "+e+"("+t.map(function(d,f){return"start["+f+"]"}).join()+");":t.map(function(d,f){return i[f]+" = "+r[f]+" + start["+f+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+e+" coords = getOutputCoords();\n        "+e+" sourceLoc;\n        "+c+"\n        vec4 result = vec4(0.);\n        "+a+"\n        "+u+"\n        setOutput(result);\n      }\n    "}return n.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,i){null==e.startLoc&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),null==e.startLoc)||r.gl.uniform1iv(e.startLoc,t)}},n}(),EG=function(n,t,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=$n(e.length),o=$n(e.length),s="";if(1===r)s="coords * strides + begin";else{var a=0;s=e.map(function(u,c){return a++,1===e.length?"coords * strides["+c+"] + begin["+c+"]":"coords["+(a-1)+"] * strides["+c+"] + begin["+c+"]"}).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+n+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+s+"));\n      }\n    "},DG=function(){function n(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(t,e,r){var i,o=_F(e,r),s=EF(t,o,r);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[s].shift();return this.usedTextures[s].push(a),a}return this.numUsedTextures++,this.log(),o===ws.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===ws.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===ws.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===ws.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===ws.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[s].push(i),i},n.prototype.releaseTexture=function(t,e,r,i){if(null!=this.freeTextures){var o=EF(e,_F(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[o],a=s.indexOf(t);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(a,1),this.log()}},n.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){t.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n}();function _F(n,t){if(n===ys.UPLOAD)return ws.PACKED_2X2_FLOAT32;if(n===ys.RENDER||null==n)return e=t,de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ws.PACKED_2X2_FLOAT32:ws.UNPACKED_FLOAT32:e?ws.PACKED_2X2_FLOAT16:ws.UNPACKED_FLOAT16;var e;if(n===ys.DOWNLOAD||n===ys.PIXELS)return ws.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function EF(n,t,e){return n[0]+"_"+n[1]+"_"+t+"_"+e}var IG=function(n,t){this.variableNames=["A"];for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[r]*t[r];this.outputShape=e,this.rank=e.length;var i=$n(this.rank),o=function(s){var a=s.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(1===a)return"imod(resRC, "+s[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],c=[],d=0;d<s.length;d++)c.push("imod("+u[d]+", "+s[d]+")");return c.join()}(n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},SG=function(n,t){this.variableNames=["A"];for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[t[r]];this.outputShape=e,this.rank=e.length;var i=$n(this.rank),o=function(s){var a=s.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],c=new Array(a),d=0;d<s.length;d++)c[s[d]]=u[d];return c.join()}(t);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},TG=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[t[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=$n(this.rank),o=KN("rc",this.rank),s=new Array(this.rank);for(r=0;r<t.length;r++)s[t[r]]=o[r];var a="vec2("+s.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+e[this.rank-1],c="getChannel(getA("+s.join()+"), "+a+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+e[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},sD=1.7580993408473768,aD=1.0507009873554805,Gt=function(n,t){this.variableNames=["A"],this.outputShape=n,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},ka="if (isnan(x)) return x;",DF="return abs(x);",IF=ka+"\n  return (x < 0.0) ? 0.0 : x;\n",SF=ka+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",TF="return (x >= 0.0) ? x : (exp(x) - 1.0);",MG="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+sD+";\n  float scale = "+aD+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",RF="return -x;",MF="return ceil(x);",kF="return floor(x);",PF="return exp(x);",OF="return exp(x) - 1.0;",kG=ka+"\n  return sin(x);\n",PG=ka+"\n  return cos(x);\n",OG=ka+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",NG=ka+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",FG=ka+"\n  return atan(x);\n",BG=ka+"return log(x + sqrt(x * x + 1.0));",LG=ka+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",UG=ka+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",Sb="return x;",NF="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",FF="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",BF="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Sv=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},jG=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var t=n.length,e=Jo("rc",t),r=$n(t),i=function(a,u){if(1===a)return"rc";for(var c="",d=0;d<a;d++)c+=u[d],d<a-1&&(c+=",");return c}(t,e),o=e.slice(-2),s=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+s+"));\n      }\n    "},Tb={};function Rb(n,t){if(void 0===t&&(t=!1),"linear"===n)return"return x;";if("relu"===n)return t?NF:IF;if("elu"===n)return t?BF:TF;if("relu6"===n)return t?FF:SF;if("prelu"===n)return t?$N:ZN;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var LF=function(n){function t(e){var r,i=n.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!de().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var o=hu(de().getNumber("WEBGL_VERSION"));i.binaryCache=((r=de().getNumber("WEBGL_VERSION"))in Tb||(Tb[r]={}),Tb[r]),i.gpgpu=new AF(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=e,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new DG(i.gpgpu),i.numMBBeforeWarning=null==de().global.screen?1024:de().global.screen.height*de().global.screen.width*window.devicePixelRatio*600/1024/1024,i.texData=new UN(i,H),i}return Da(t,n),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,r,i){if(de().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===i&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:e,usage:ys.UPLOAD}),o},t.prototype.move=function(e,r,i,o){if(de().getBool("DEBUG")&&this.checkNumericalProblems(r),"complex64"===o)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:r,usage:ys.UPLOAD})},t.prototype.readSync=function(e){var r=this.texData.get(e),i=r.values,o=r.dtype,s=r.complexTensors,u=r.shape;if(null!=r.slice){var d;d=r.isPacked?new Sv(u,Sb):new Gt(u,Sb);var f=this.runWebGLProgram(d,[{dataId:e,shape:u,dtype:o}],o),p=this.readSync(f.dataId);return this.disposeData(f.dataId),p}if(null!=i)return this.convertAndCacheOnCPU(e);if("string"===o)return i;var g,v,y=null!=this.activeTimers;return y&&(g=Sa()),v="complex64"===o?YE(s.real.dataSync(),s.imag.dataSync()):this.getValuesFromTexture(e),y&&(this.downloadWaitMs+=Sa()-g),this.convertAndCacheOnCPU(e,v)},t.prototype.read=function(e){return nt(this,void 0,void 0,function(){var r,i,o,s,u,c,d,f,p,g,v,y,w,b,A,E,T,O,N;return rt(this,function(B){switch(B.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise(function(F){return r.push(F)})];if(i=this.texData.get(e),o=i.values,s=i.shape,u=i.dtype,c=i.complexTensors,d=i.isPacked,null!=i.slice)return f=d?new Sv(s,Sb):new Gt(s,Sb),p=this.runWebGLProgram(f,[{dataId:e,shape:s,dtype:u}],u),g=this.read(p.dataId),this.disposeData(p.dataId),[2,g];if(null!=o)return[2,this.convertAndCacheOnCPU(e)];if(!de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===de().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,"complex64"!==u&&de().get("WEBGL_BUFFER_SUPPORTED")&&(y=this.decode(e),w=this.texData.get(y.dataId),v=(N=this.gpgpu).createBufferFromTexture.apply(N,[w.texture].concat(gv(s)))),this.pendingRead.set(e,[]),"complex64"===u?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:B.sent(),B.label=2;case 2:return"complex64"!==u?[3,4]:[4,Promise.all([c.real.data(),c.imag.data()])];case 3:return A=B.sent(),b=YE(A[0],A[1]),[3,5];case 4:null==v?b=this.getValuesFromTexture(e):(E=at(s),b=this.gpgpu.downloadFloat32MatrixFromBuffer(v,E)),B.label=5;case 5:return null!=y&&this.disposeData(y.dataId),T=this.convertAndCacheOnCPU(e,b),O=this.pendingRead.get(e),this.pendingRead.delete(e),O.forEach(function(F){return F(T)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,T]}})})},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var r=0;r<e.length;r++){var i=e[r];if(!ZO(i))throw de().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(e){var r,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.isPacked,u=at(o);if(de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var c=this.decode(e),d=this.texData.get(c.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(gv(o))).subarray(0,u);return this.disposeData(c.dataId),f}var p=de().getBool("WEBGL_PACK")&&!0===a,g=p?db(o):o,v=p?new G9(g):new q9(g),y=this.runWebGLProgram(v,[{shape:g,dtype:s,dataId:e}],"float32"),w=this.texData.get(y.dataId),b=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(w.texture,w.texShape[0],w.texShape[1]).subarray(0,u);return this.disposeData(y.dataId),b},t.prototype.time=function(e){return nt(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return rt(this,function(d){switch(d.label){case 0:return r=this.activeTimers,i=[],o=!1,null==this.programTimersStack?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),s=fc(this.activeTimers.map(function(f){return f.query})).filter(function(f){return null!=f}),a=fc(this.activeTimers.map(function(f){return f.name})).filter(function(f){return null!=f}),this.activeTimers=r,o&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return c=d.sent(),u.kernelMs=PO(c),u.getExtraProfileInfo=function(){return c.map(function(f,p){return{name:a[p],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Sa(),endMs:null}},t.prototype.endTimer=function(e){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Sa(),e)},t.prototype.getQueryTime=function(e){return nt(this,void 0,void 0,function(){var r;return rt(this,function(i){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;null!=r&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var r=this.texData.get(e),i=r.texture,o=r.dtype,s=r.texShape,a=r.usage,u=r.isPacked,c=r.slice,d=c&&c.origDataId||e,f=this.dataRefCount.get(d);f>1?this.dataRefCount.set(d,f-1):(this.dataRefCount.delete(d),null!=i&&(this.numBytesInGPU-=this.computeBytes(s,o),this.textureManager.releaseTexture(i,s,a,u)));var p=this.texData.get(e);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return de().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=H.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,r){var i=this;return void 0===r&&(r=128),null!=this.getCPUBackend()&&e.every(function(o){return null==i.texData.get(o.dataId).texture&&o.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,r){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:H.keep(e.clone()),imag:H.keep(r.clone())},i},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,r,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,i);if(0===at(i))return Pi([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,s=WE(e.shape,r,i);if(o||!s){var a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _G(i):new CG(i),u=a.getCustomSetupFunc(r);return this.compileAndRun(a,[e],null,u)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,i)},t.prototype.shallowSlice=function(e,r,i){var o=this.texData.get(e.dataId),s=this.makeOutput(i,e.dtype),a=this.texData.get(s.dataId);Object.assign(a,o),a.shape=i,a.dtype=e.dtype;var u=VE(r,e.strides);o.slice&&(u+=o.slice.flatOffset),a.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||e.dataId};var c=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,c+1),s},t.prototype.stridedSlice=function(e,r,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,i,o);var s=Ab(r,i,o);if(s.some(function(u){return 0===u}))return Pi([],s);var a=new EG(r,o,s);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,r){var i=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bG(e.shape,r):new wG(e.shape,r);return this.compileAndRun(i,[e])},t.prototype.concat=function(e,r){if("complex64"===e[0].dtype){var i=e.map(function(g){return Js(g)}),o=e.map(function(g){return gu(g)});return ki(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(1===e.length)return e[0];if(e.length>de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(e.length/2),a=this.concat(e.slice(0,s),r),u=this.concat(e.slice(s),r);return this.concat([a,u],r)}if(de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var c=new M9(e.map(function(g){return g.shape}),r);return this.compileAndRun(c,e)}var d=tf(e.map(function(g){return g.shape}),r),f=e.map(function(g){return g.as2D(-1,at(g.shape.slice(r)))}),p=new R9(f.map(function(g){return g.shape}));return this.compileAndRun(p,f).reshape(d)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,RF,e.dtype);var r=new Gt(e.shape,RF);return this.compileAndRun(r,[e])},t.prototype.batchMatMul=function(e,r,i,o){var s=i?e.shape[2]:e.shape[1],a=o?r.shape[1]:r.shape[2],u=i?e.shape[1]:e.shape[2],c=e.shape[0];if((1===s||1===a)&&u>1e3){i&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var d=1===a?e:e.as3D(c,u,1),f=1===a?2:1,p=1===a?r.as3D(c,1,u):r;return this.multiply(d,p).sum(f,!0)}var g=yi(e.dtype,r.dtype),v=new nD(e.shape,[c,s,a],i,o);return this.compileAndRun(v,[e,r],g)},t.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,s=e.transposeB,a=e.bias,u=e.activation,c=e.preluActivationWeights,d=o?r.shape[2]:r.shape[1],f=s?i.shape[1]:i.shape[2],p=r.shape[0],g=yi(r.dtype,i.dtype),v=null!=a,y=null!=c,w=u?Rb(u,!0):null,b=new nD(r.shape,[p,d,f],o,s,v,w,y),A=[r,i];return a&&A.push(a),c&&A.push(c),this.compileAndRun(b,A,g)},t.prototype.multiply=function(e,r){if("complex64"===e.dtype){var i=this.texData.get(e.dataId),o=this.texData.get(r.dataId),s=new XN("return areal * breal - aimag * bimag;",e.shape,r.shape),a=new XN("return areal * bimag + aimag * breal;",e.shape,r.shape),u=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],c=this.compileAndRun(s,u),d=this.compileAndRun(a,u),f=this.complex(c,d);return c.dispose(),d.dispose(),f}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,JN,e.dtype);var p=new Dr(JN,e.shape,r.shape);return this.compileAndRun(p,[e,r],e.dtype)},t.prototype.batchNormalization=function(e,r,i,o,s,a){var u=[e,r,i],c=null;null!=a&&(c=a.shape,u.push(a));var d=null;if(null!=s&&(d=s.shape,u.push(s)),de().getBool("WEBGL_PACK_NORMALIZATION")){var f=new _9(e.shape,r.shape,i.shape,c,d,o);return this.compileAndRun(f,u)}var p=new C9(e.shape,r.shape,i.shape,c,d,o);return this.compileAndRun(p,u)},t.prototype.localResponseNormalization4D=function(e,r,i,o,s){var a=de().getBool("WEBGL_PACK_NORMALIZATION")?new iG(e.shape,r,i,o,s):new nG(e.shape,r,i,o,s);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,r,i,o,s,a,u){var c=new rG(r.shape,o,s,a,u);return this.compileAndRun(c,[r,i,e])},t.prototype.tile=function(e,r){if("string"===e.dtype){var i=this.readSync(e.dataId).map(function(s){return cv(s)});return qN(Lt(e.shape,e.dtype,i),r)}var o=new IG(e.shape,r);return this.compileAndRun(o,[e])},t.prototype.pad=function(e,r,i){var o=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dG(e.shape,r,i):new lG(e.shape,r,i);return this.compileAndRun(o,[e])},t.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var i=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TG(e.shape,r):new SG(e.shape,r);return this.compileAndRun(i,[e])},t.prototype.gather=function(e,r,i){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,i);var o=new Z9(e.shape,r.size,i);return this.compileAndRun(o,[e,r])},t.prototype.batchToSpaceND=function(e,r,i){P(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(f,p){return f*p}),s=vb(e.shape,r,o),a=yb(s.length,r.length),u=wb(e.shape,r,o),c=kN(i,r.length),d=PN(u,i,r.length);return e.reshape(s).transpose(a).reshape(u).slice(c,d)},t.prototype.spaceToBatchND=function(e,r,i){P(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(p,g){return p*g}),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<e.shape.length;++a)s.push([0,0]);var u=e.pad(s),c=vb(u.shape,r,o,!1),d=yb(c.length,r.length,!1),f=wb(u.shape,r,o,!1);return u.reshape(c).transpose(d).reshape(f)},t.prototype.reduce=function(e,r,i){var o=e.shape[0],s=e.shape[1],a=bb(s),u=new fG({windowSize:a,inSize:s,batchSize:o},r),c=this.compileAndRun(u,[e],i);return 1===c.shape[1]?c:this.reduce(c,r,i)},t.prototype.argReduce=function(e,r,i){void 0===i&&(i=null);var o=e.shape[0],s=e.shape[1];null!=i&&(o=i.shape[0],s=i.shape[1]);var a=bb(s),u=new p9({windowSize:a,inSize:s,batchSize:o},r,null==i),c=[e];null!=i&&c.push(i);var d=this.compileAndRun(u,c,"int32");return 1===d.shape[1]?d:this.argReduce(e,r,d)},t.prototype.argReducePacked=function(e,r,i){void 0===i&&(i=null);var o=null!=i?i.shape:e.shape,s=bb(o[o.length-1]),a=new b9(o,s,r,null==i),c=this.compileAndRun(a,null==i?[e]:[e,i],"int32");return c.rank===e.rank?this.argReducePacked(e,r,c):c},t.prototype.sum=function(e,r){Yo("sum",r,e.rank);var i=Mi(e.shape,r),o=i[0],s=at(i[1]),a=e.as2D(-1,s),u=DE(e.dtype);return this.reduce(a,"sum",u).reshape(o)},t.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var i=Mi(e.shape,r),o=i[0],s=at(i[1]),a=e.as2D(-1,s),u=DE(e.dtype);return this.reduce(a,"prod",u).reshape(o)},t.prototype.unsortedSegmentSum=function(e,r,i){var o=0,s=Ta([o],e.rank),a=e;null!=s&&(a=e.transpose(s),o=Ra(1,e.rank)[0]);var u=function(g,v,y){for(var w=[],b=g.length,A=0;A<b;A++)w.push(A!==v?g[A]:y);return w}(a.shape,o,i),c=at([a.shape[o]]),d=a.as2D(-1,c),f=DE(e.dtype),p=this.segOpCompute(d,"unsortedSegmentSum",r,f,i).reshape(u);return null!=s&&(p=p.transpose(pb(s))),p},t.prototype.segOpCompute=function(e,r,i,o,s){var a=e.shape[0],u=e.shape[1],c=function(p,g){var v,y=!1;for(p<=30?(v=p,y=!0):v=ob(p,Math.floor(Math.sqrt(p)));!y;)v>g||v===p?y=!0:v=ob(p,v+1);return v}(u,s),d=new AG({windowSize:c,inSize:u,batchSize:a,numSegments:s},r),f=this.compileAndRun(d,[e,i],o);return f.shape[1]===s?f:(i=gb(0,s).tile([u/c]),this.segOpCompute(f,r,i,o,s))},t.prototype.argMinMaxReduce=function(e,r,i){var o=[r];if(Yo("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!de().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var s=Mi(e.shape,o),a=s[0],u=at(s[1]),c=e.as2D(-1,u);return this.argReduce(c,i).reshape(a)}return this.argReducePacked(e,i)},t.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},t.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},t.prototype.cumsum=function(e,r,i,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var s=new z9(e.shape,i,o);return this.compileAndRun(s,[e])},t.prototype.equal=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(equal(a, b));\n","bool");var i=new Dr("return float(a == b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.notEqual=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(notEqual(a, b));\n","bool");var i=new Dr("return float(a != b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(lessThan(a, b));\n","bool");var i=new Dr("return float(a < b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.lessEqual=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(lessThanEqual(a, b));\n","bool");var i=new Dr("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(greaterThan(a, b));\n","bool");var i=new Dr("return float(a > b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.greaterEqual=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var i=new Dr("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.logicalNot=function(e){var r=new Gt(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},t.prototype.logicalAnd=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var i=new Dr("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.logicalOr=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var i=new Dr("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.select=function(e,r,i){var o=new xG(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,i],yi(r.dtype,i.dtype))},t.prototype.where=function(e){hb("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return ZE(e.shape,r)},t.prototype.topk=function(e,r,i){return GN(e.dataSync(),e.shape,e.dtype,r)},t.prototype.min=function(e,r){Yo("min",r,e.rank);var i=Mi(e.shape,r),o=i[0],s=at(i[1]),a=e.as2D(-1,s);return this.reduce(a,"min",a.dtype).reshape(o)},t.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vc("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new Dr("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.mod=function(e,r){var i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vc("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new Dr("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);Yo("max",r,e.rank);var i=Mi(e.shape,r),o=i[0],s=at(i[1]),a=e.as2D(-1,s);return this.reduce(a,"max",a.dtype).reshape(o)},t.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vc("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new Dr("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.all=function(e,r){Yo("all",r,e.rank);var i=Mi(e.shape,r),o=i[0],s=at(i[1]),a=e.as2D(-1,s);return this.reduce(a,"all",a.dtype).reshape(o)},t.prototype.any=function(e,r){Yo("any",r,e.rank);var i=Mi(e.shape,r),o=i[0],s=at(i[1]),a=e.as2D(-1,s);return this.reduce(a,"any",a.dtype).reshape(o)},t.prototype.realDivide=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var i=new Dr("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,r.shape);return this.compileAndRun(i,[e,r],"float32")},t.prototype.floorDiv=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var i=new Dr("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,r.shape);return this.compileAndRun(i,[e,r],"int32")},t.prototype.add=function(e,r){if("complex64"===e.dtype&&"complex64"===r.dtype)return this.complexSeparableBinaryOp(e,r,eD);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var i=yi(e.dtype,r.dtype);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,eD,i);var o=new Dr(eD,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},t.prototype.packedUnaryOp=function(e,r,i){var o=new Sv(e.shape,r);return this.compileAndRun(o,[e],i)},t.prototype.packedBinaryOp=function(e,r,i,o,s){void 0===s&&(s=!1);var a=new vc(i,e.shape,r.shape,s);return this.compileAndRun(a,[e,r],o)},t.prototype.complexSeparableBinaryOp=function(e,r,i){var o=this,s=this.texData.get(e.dataId),a=this.texData.get(r.dataId),u=[[s.complexTensors.real,a.complexTensors.real],[s.complexTensors.imag,a.complexTensors.imag]].map(function(p){var g=p[0],v=p[1],y=o.makeComplexComponentTensorInfo(e,g),w=o.makeComplexComponentTensorInfo(r,v),b=new Dr(i,e.shape,r.shape);return o.compileAndRun(b,[y,w],yi(g.dtype,v.dtype))}),c=u[0],d=u[1],f=this.complex(c,d);return c.dispose(),d.dispose(),f},t.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>de().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),i=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([i,o])}var s=e.map(function(c){return c.dtype}).reduce(function(c,d){return yi(c,d)}),a=e.map(function(c){return c.shape}),u=de().getBool("WEBGL_PACK")?new h9(e[0].shape,a):new f9(e[0].shape,a);return this.compileAndRun(u,e,s)},t.prototype.subtract=function(e,r){if("complex64"===e.dtype&&"complex64"===r.dtype)return this.complexSeparableBinaryOp(e,r,tD);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var i=yi(e.dtype,r.dtype);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,tD,e.dtype);var o=new Dr(tD,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},t.prototype.pow=function(e,r){var i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vc("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new Dr("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,r.shape),o=yi(e.dtype,r.dtype);return this.compileAndRun(i,[e,r],o)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,MF,e.dtype);var r=new Gt(e.shape,MF);return this.compileAndRun(r,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,kF,e.dtype);var r=new Gt(e.shape,kF);return this.compileAndRun(r,[e])},t.prototype.sign=function(e){var r=new Gt(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(r,[e])},t.prototype.isNaN=function(e){var r=new Gt(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.isInf=function(e){var r=new Gt(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.isFinite=function(e){var r=new Gt(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.round=function(e){var r=new Gt(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(r,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,PF,e.dtype);var r=new Gt(e.shape,PF);return this.compileAndRun(r,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,OF,e.dtype);var r=new Gt(e.shape,OF);return this.compileAndRun(r,[e])},t.prototype.softmax=function(e,r){var i=Gr([r],e.shape),o=this.max(e,i),s=_o(o.shape,i),a=this.subtract(e,o.reshape(s)),u=this.exp(a),c=this.sum(u,i).reshape(s);return this.realDivide(u,c)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var r=new Gt(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(r,[e])},t.prototype.log1p=function(e){var r=new Gt(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},t.prototype.sqrt=function(e){var r=new Gt(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new Gt(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},t.prototype.reciprocal=function(e){var r=new Gt(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},t.prototype.relu=function(e){var r;return r=de().getBool("WEBGL_PACK")?new Sv(e.shape,NF):new Gt(e.shape,IF),this.compileAndRun(r,[e])},t.prototype.relu6=function(e){var r;return r=de().getBool("WEBGL_PACK")?new Sv(e.shape,FF):new Gt(e.shape,SF),this.compileAndRun(r,[e])},t.prototype.prelu=function(e,r){var i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vc($N,e.shape,r.shape):new Dr(ZN,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.elu=function(e){if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,BF,e.dtype);var r=new Gt(e.shape,TF);return this.compileAndRun(r,[e])},t.prototype.eluDer=function(e,r){var i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vc("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,r.shape):new Dr("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.selu=function(e){var r=new Gt(e.shape,MG);return this.compileAndRun(r,[e])},t.prototype.int=function(e){var r=new Gt(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},t.prototype.clip=function(e,r,i){var o,s=(o=de().getBool("WEBGL_PACK_CLIP")?new S9(e.shape):new I9(e.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[e],null,s)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,DF,e.dtype);var r=new Gt(e.shape,DF);return this.compileAndRun(r,[e])},t.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),i=new T9(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(i,o)},t.prototype.sigmoid=function(e){var r=new Gt(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},t.prototype.softplus=function(e){var r=new Gt(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(r,[e])},t.prototype.sin=function(e){var r=new Gt(e.shape,kG);return this.compileAndRun(r,[e])},t.prototype.cos=function(e){var r=new Gt(e.shape,PG);return this.compileAndRun(r,[e])},t.prototype.tan=function(e){var r=new Gt(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},t.prototype.asin=function(e){var r=new Gt(e.shape,OG);return this.compileAndRun(r,[e])},t.prototype.acos=function(e){var r=new Gt(e.shape,NG);return this.compileAndRun(r,[e])},t.prototype.atan=function(e){var r=new Gt(e.shape,FG);return this.compileAndRun(r,[e])},t.prototype.atan2=function(e,r){var i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vc("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,r.shape):new Dr("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.sinh=function(e){var r=new Gt(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(r,[e])},t.prototype.cosh=function(e){var r=new Gt(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(r,[e])},t.prototype.tanh=function(e){var r=new Gt(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(r,[e])},t.prototype.asinh=function(e){var r=new Gt(e.shape,BG);return this.compileAndRun(r,[e])},t.prototype.acosh=function(e){var r=new Gt(e.shape,LG);return this.compileAndRun(r,[e])},t.prototype.atanh=function(e){var r=new Gt(e.shape,UG);return this.compileAndRun(r,[e])},t.prototype.erf=function(e){var r=new Gt(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(r,[e])},t.prototype.step=function(e,r){var o,i=new Gt(e.shape,(void 0===(o=r)&&(o=0),ka+"\n    return x > 0.0 ? 1.0 : float("+o+");\n  "));return this.compileAndRun(i,[e])},t.prototype.conv2dByMatMul=function(e,r,i,o,s,a){var u=e.shape,c=this.texData.get(e.dataId),g="channelsLast"===i.dataFormat,y=u[2]%2!=0&&!!c.isPacked;if((1==u[0]*u[1]*u[2]||1===i.outChannels)&&i.inChannels>1e3||!de().getBool("WEBGL_LAZILY_UNPACK")||!de().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!y){var b=this.reshape(e,[1,g?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],i.inChannels]),A=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:b,b:A,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),i.outShape)}var C={dataId:e.dataId,shape:[1,g?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),i.inChannels],dtype:e.dtype},E=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,P(Av(c.shape,C.shape),function(){return"packed reshape "+c.shape+" to "+C.shape+" isn't free"});var T=this.reshape(r,[1,i.inChannels,i.outChannels]),O=this.fusedBatchMatMul({a:C,b:T,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),N=this.texData.get(O.dataId);return P(N.isPacked,function(){return"batchMatMul result is expected to be packed"}),c.shape=E,N.shape=i.outShape,H.makeTensorFromDataId(O.dataId,i.outShape,O.dtype)},t.prototype.conv2dWithIm2Row=function(e,r,i,o,s,a){var f=i.outWidth,p=i.outHeight,g="channelsLast"===i.dataFormat,v=i.filterWidth*i.filterHeight*i.inChannels,y=p*f,w=[v,y],b=e.squeeze([0]),A=r.reshape([1,v,-1]),_=new tG(w,b.shape,i),C=this.compileAndRun(_,[b]).reshape([1,w[0],w[1]]),E=null!=o,T=null!=a,O=s?Rb(s,!0):null,N=new nD(C.shape,[1,y,i.outChannels],!0,!1,E,O,T),B=[C,A];return o&&B.push(o),T&&B.push(a),this.compileAndRun(N,B).reshape(g?[1,p,f,i.outChannels]:[1,i.outChannels,p,f])},t.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights;if(1===o.filterHeight&&1===o.filterWidth&&1===o.dilationHeight&&1===o.dilationWidth&&1===o.strideHeight&&1===o.strideWidth&&("SAME"===o.padInfo.type||"VALID"===o.padInfo.type))return this.conv2dByMatMul(r,i,o,s,a,u);if(de().getBool("WEBGL_CONV_IM2COL")&&1===r.shape[0])return this.conv2dWithIm2Row(r,i,o,s,a,u);var c=null!=s,d=null!=u,f=a?Rb(a,!1):null,p=new eF(o,c,f,d),g=[r,i];return s&&g.push(s),u&&g.push(u),this.compileAndRun(p,g)},t.prototype.conv2d=function(e,r,i){if(1===i.filterHeight&&1===i.filterWidth&&1===i.dilationHeight&&1===i.dilationWidth&&1===i.strideHeight&&1===i.strideWidth&&("SAME"===i.padInfo.type||"VALID"===i.padInfo.type))return this.conv2dByMatMul(e,r,i);if(de().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,r,i);var o=new eF(i);return this.compileAndRun(o,[e,r])},t.prototype.conv2dDerInput=function(e,r,i){var o=new P9(i);return this.compileAndRun(o,[e,r])},t.prototype.conv2dDerFilter=function(e,r,i){var o=new k9(i);return this.compileAndRun(o,[e,r])},t.prototype.fusedDepthwiseConv2D=function(e){var r,i=e.input,o=e.filter,s=e.convInfo,a=e.bias,u=e.activation,c=e.preluActivationWeights,d=de().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,f=u?Rb(u,d):null,p=[i,o],g=null!=a,v=null!=c;return g&&p.push(a),v&&p.push(c),d?(r=new nF(s,g,f,v),this.compileAndRun(r,p)):(r=new tF(s,g,f,v),this.compileAndRun(r,p))},t.prototype.depthwiseConv2D=function(e,r,i){var o;return de().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new nF(i),this.compileAndRun(o,[e,r])):(o=new tF(i),this.compileAndRun(o,[e,r]))},t.prototype.depthwiseConv2DDerInput=function(e,r,i){var o=new B9(i);return this.compileAndRun(o,[e,r])},t.prototype.depthwiseConv2DDerFilter=function(e,r,i){var o=new F9(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3d=function(e,r,i){var o=new L9(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3dDerInput=function(e,r,i){var o=new N9(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3dDerFilter=function(e,r,i){var o=new O9(i);return this.compileAndRun(o,[e,r])},t.prototype.maxPool=function(e,r){var i=new rD(r,"max",!1);return this.compileAndRun(i,[e])},t.prototype.avgPool=function(e,r){var i=new rD(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.maxPoolBackprop=function(e,r,i,o){var s=new rD(o,"max",!0),a=this.compileAndRun(s,[r]),u=new oG(o),c=this.compileAndRun(u,[e,a],r.dtype);return a.dispose(),c},t.prototype.avgPoolBackprop=function(e,r,i){var o=new A9(i);return this.compileAndRun(o,[e],r.dtype)},t.prototype.cast=function(e,r){return KE(e,r,this)},t.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==r&&(o[s++]=e.shape[a]);var u=new Array(e.rank).fill(0),c=e.shape.slice();c[r]=1;var d=new Array(i);for(a=0;a<d.length;a++)u[r]=a,d[a]=this.slice(e,u,c).reshape(o);return d},t.prototype.avgPool3d=function(e,r){var i=new iD(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,r,i){var o=new x9(i);return this.compileAndRun(o,[e],r.dtype)},t.prototype.maxPool3d=function(e,r){var i=new iD(r,"max",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,r,i,o){var s=new iD(o,"max",!0),a=this.compileAndRun(s,[r]),u=new sG(o),c=this.compileAndRun(u,[e,a],r.dtype);return a.dispose(),c},t.prototype.reshape=function(e,r){var i=this.texData.get(e.dataId);if(i.isPacked&&!Av(e.shape,r)&&(null===i.texture||!Av(i.shape,r))){var o=this.packedReshape(e,r);return H.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return Db(e,r)},t.prototype.resizeBilinear=function(e,r,i,o){var s=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new mG(e.shape,r,i,o):new gG(e.shape,r,i,o);return this.compileAndRun(s,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,r,i){var o=new pG(e,r,i);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighbor=function(e,r,i,o){var s=new yG(e.shape,r,i,o);return this.compileAndRun(s,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,r,i){var o=new vG(e,r,i);return this.compileAndRun(o,[e])},t.prototype.multinomial=function(e,r,i,o){var s=r?e:gc(e),c=new aG(s.shape[0],s.shape[1],i),d=c.getCustomSetupFunc(o);return this.compileAndRun(c,[s],"int32",d)},t.prototype.oneHot=function(e,r,i,o){var s=new uG(e.size,r,i,o);return this.compileAndRun(s,[e])},t.prototype.diag=function(e){var r=new V9(e.size);return this.compileAndRun(r,[e])},t.prototype.nonMaxSuppression=function(e,r,i,o,s){return hb("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),XE(e.dataSync(),r.dataSync(),i,o,s)},t.prototype.cropAndResize=function(e,r,i,o,s,a){var u=new U9(e.shape,r.shape,o,s,a);return this.compileAndRun(u,[e,r,i],"float32")},t.prototype.depthToSpace=function(e,r,i){P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=e.shape[0],c=("NHWC"===i?e.shape[1]:e.shape[2])*r,d=("NHWC"===i?e.shape[2]:e.shape[3])*r,f=("NHWC"===i?e.shape[3]:e.shape[1])/(r*r),p=new W9("NHWC"===i?[o,c,d,f]:[o,f,c,d],r,i);return this.compileAndRun(p,[e])},t.prototype.split=function(e,r,i){return VN(e,r,i)},t.prototype.scatterND=function(e,r,i){var o=Cv(0,e,i),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,c=o.strides,d=o.outputSize,f=[d/u,u],p=e.reshape([a,s]),g=r.reshape([a,u]);if(0===d)return Db(Pi([]),i);var v=We(0),y=new CF(a,s,p.rank,g.rank,c,f);return this.compileAndRun(y,[g,p,v]).reshape(i)},t.prototype.sparseToDense=function(e,r,i,o){var s=Cv(0,e,i),f=new CF(s.numUpdates,s.sliceRank,e.rank,r.rank,s.strides,[s.outputSize,1],!1);return this.compileAndRun(f,[r,e,o]).reshape(i)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,r){var i=this.texData.get(e.dataId),o=new iF("return real * expR - imag * expI;",e.shape,r),s=new iF("return real * expI + imag * expR;",e.shape,r),a=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],u=this.compileAndRun(o,a),c=this.compileAndRun(s,a),d=this.complex(u,c).as2D(e.shape[0],e.shape[1]);return u.dispose(),c.dispose(),d},t.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],s=zE(e,r),a=s[0],u=s[1],c=s[2],d=s[3],f=r.reshape([u,o]),p=e.reshape([e.size/c,c]),g=new $9(o,d,[u,c]);return this.compileAndRun(g,[p,f]).reshape(a)},t.prototype.fill=function(e,r,i){if("string"===(i=i||gp(r))){var o=uv(i,at(e));return o.fill(r),H.makeTensor(o,e,i,this)}var s=new J9(e,r),a=s.getCustomSetupFunc(r);return this.compileAndRun(s,[],i,a)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,r,i){return QE(e,r,i)},t.prototype.makeTensorInfo=function(e,r){var i=this.write(null,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}},t.prototype.makeOutput=function(e,r){var i=this.makeTensorInfo(e,r).dataId;return H.makeTensorFromDataId(i,e,r,this)},t.prototype.unpackTensor=function(e){var r=new jG(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},t.prototype.packTensor=function(e){var r=new cG(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,r){var i=[wv(e.shape)].concat(bv(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},s=[wv(r)].concat(bv(r)),a=new hG(s,i),u=this.runWebGLProgram(a,[o],e.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},t.prototype.decode=function(e){var r,i=this.texData.get(e),o=i.isPacked,s=i.shape,a=i.dtype,u=db(s);return r=o?new H9(u):new j9(u),{dtype:a,shape:s,dataId:this.runWebGLProgram(r,[{shape:u,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,r,i,o,s){var a=this;void 0===s&&(s=!1);var u=this.makeTensorInfo(e.outputShape,i),c=this.texData.get(u.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===pv.DENSE){var d=gv(e.outputShape);c.texShape=d.map(function(_){return 2*_})}if(null!=e.outTexUsage&&(c.usage=e.outTexUsage),0===at(u.shape))return c.values=pp(u.dtype,0),u;var f=[],p=r.map(function(_){if("complex64"===_.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var C=a.texData.get(_.dataId);if(null==C.texture){if(!e.packedInputs&&at(_.shape)<=de().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:_.shape,texData:null,isUniform:!0,uniformValues:C.values};e.packedInputs&&(C.isPacked=!0,C.shape=_.shape)}else if(!!C.isPacked!=!!e.packedInputs)_=C.isPacked?a.unpackTensor(_):a.packTensor(_),f.push(_),C=a.texData.get(_.dataId);else if(C.isPacked&&!Av(C.shape,_.shape)){var E=_,T=_.shape;_.shape=C.shape,_=a.packedReshape(_,T),f.push(_),C=a.texData.get(_.dataId),E.shape=T}return a.uploadToGPU(_.dataId),{shape:_.shape,texData:C,isUniform:!1}});this.uploadToGPU(u.dataId);var g,_,T,v={shape:u.shape,texData:c,isUniform:!1},y=(_=e,T="",p.concat(v).forEach(function(B){T+=B.shape+"_"+(B.isUniform?"uniform":B.texData.texShape)+"_"+(null!=B.texData&&null!=B.texData.slice&&B.texData.slice.flatOffset>0)}),_.constructor.name+"_"+T+"_"+_.userCode),w=this.getAndSaveBinary(y,function(){return function(_,C,E,T){var O=C.userCode,N=E.map(function(te,ce){var xe={logicalShape:te.shape,texShape:te.isUniform?null:te.texData.texShape,isUniform:te.isUniform,isPacked:!te.isUniform&&te.texData.isPacked,flatOffset:null};return null!=te.texData&&null!=te.texData.slice&&te.texData.slice.flatOffset>0&&(xe.flatOffset=te.texData.slice.flatOffset),{name:C.variableNames[ce],shapeInfo:xe}}),B=N.map(function(te){return te.shapeInfo}),F={logicalShape:T.shape,texShape:T.texData.texShape,isUniform:!1,isPacked:T.texData.isPacked,flatOffset:null},X=g9(N,F,O,C.packedInputs),G=_.createProgram(X),re=null,fe=_.getUniformLocation(G,"NAN",!1);1===de().getNumber("WEBGL_VERSION")&&(re=_.getUniformLocation(G,"INFINITY",!1));for(var he={},$=0;$<C.variableNames.length;$++){var ee=C.variableNames[$];he[ee]=_.getUniformLocation(G,ee,!1),he["offset"+ee]=_.getUniformLocation(G,"offset"+ee,!1)}return{program:C,source:X,webGLProgram:G,uniformLocations:he,inShapeInfos:B,outShapeInfo:F,infLoc:re,nanLoc:fe}}(a.gpgpu,e,p,v)}),b=null!=this.activeTimers;if(b&&(g=this.startTimer()),function(_,C,E,T,O){xF(C.inShapeInfos,E),xF([C.outShapeInfo],[T]);var N=T.texData.texture,B=T.texData.texShape;T.texData.isPacked?_.setOutputPackedMatrixTexture(N,B[0],B[1]):_.setOutputMatrixTexture(N,B[0],B[1]),_.setProgram(C.webGLProgram),1===de().getNumber("WEBGL_VERSION")&&null!==C.infLoc&&_.gl.uniform1f(C.infLoc,1/0),null!==C.nanLoc&&_.gl.uniform1f(C.nanLoc,NaN),E.forEach(function(F,X){var G=C.program.variableNames[X],re=C.uniformLocations[G],fe=C.uniformLocations["offset"+G];if(null!=re)if(F.isUniform)if(at(F.shape)<2)_.gl.uniform1f(re,F.uniformValues[0]);else{var he=F.uniformValues;he instanceof Float32Array||(he=new Float32Array(he)),_.gl.uniform1fv(re,he)}else null!=F.texData.slice&&null!=fe&&_.gl.uniform1i(fe,F.texData.slice.flatOffset),_.setInputMatrixTexture(F.texData.texture,re,X)}),O?.(_,C.webGLProgram),_.executeProgram()}(this.gpgpu,w,p,v,o),f.forEach(function(_){return a.disposeData(_.dataId)}),b&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)})),!de().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&!1===s){var A=this.unpackTensor(u);return this.disposeData(u.dataId),A}return u},t.prototype.compileAndRun=function(e,r,i,o,s){void 0===s&&(s=!1);var a=this.runWebGLProgram(e,r,i=i||r[0].dtype,o,s);return H.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(de().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){e.gpgpu.deleteProgram(e.binaryCache[r].webGLProgram),delete e.binaryCache[r]}),this.textureManager.dispose(),null!=this.canvas&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Je(function(){if(!de().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=de().getBool("DEBUG");de().set("DEBUG",!1);var i=e.abs(We(1e-8)).dataSync()[0];if(de().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var r,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.values,c=i.usage,d=i.isPacked;if(null==i.texture){var f,p=null!=this.activeTimers;p&&(f=Sa());var g=i.texShape;if(null==g&&(g=gN(o,d),i.texShape=g),null!=a){var v=db(o),y=void 0,w=g[1],b=g[0],A=a instanceof Uint8Array;d?(w=(r=mv(g[0],g[1]))[0],y=new Q9(v,[b=r[1],w],A)):y=new K9(v,[b,w],A);var _=this.makeTensorInfo([b,w],s);this.texData.get(_.dataId).usage=A?ys.PIXELS:ys.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(_.dataId),w,b,a);var C=this.runWebGLProgram(y,[_],s,null,!0),E=this.texData.get(C.dataId);i.texture=E.texture,i.texShape=E.texShape,i.isPacked=E.isPacked,i.usage=E.usage,this.disposeData(_.dataId),this.texData.delete(C.dataId),i.values=null,p&&(this.uploadWaitMs+=Sa()-f)}else{var T=this.acquireTexture(g,c,s,d);i.texture=T}}},t.prototype.convertAndCacheOnCPU=function(e,r){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),null!=r&&(i.values=function(s,a){if("float32"===a||"complex64"===a)return s;if("int32"===a||"bool"===a){for(var u="int32"===a?new Int32Array(s.length):new Uint8Array(s.length),c=0;c<u.length;++c)u[c]=Math.round(s[c]);return u}throw new Error("Unknown dtype "+a)}(r,o)),i.values},t.prototype.acquireTexture=function(e,r,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},t.prototype.computeBytes=function(e,r){return e[0]*e[1]*gE(r)},t}(zN);XO()&&H.registerBackend("webgl",function(){return new LF},2);var WG=W({square_:function(n){var t=M(n,"x","square");return H.runKernelFunc(function(r,i){return i([t]),r.square(t)},{x:t},null,"Square",{},[t],[])}}),Tv="SquaredDifference",UF=W({squaredDifference_:function(n,t){var e,r=M(n,"a","squaredDifference"),i=M(t,"b","squaredDifference");return e=lr(r,i),$t((r=e[0]).shape,(i=e[1]).shape),H.runKernelFunc(function(a,u){var c=a.squaredDifference(r,i);return u([r,i]),c},{a:r,b:i},function(a,u){var c=u[0],d=u[1],f=We(2);return{a:function(){return a.mul(c.sub(d).mul(f))},b:function(){return a.mul(d.sub(c).mul(f))}}},Tv,{},[r,i],[])}}),VG=W({abs_:function(n){var t=M(n,"x","abs");return"complex64"===t.dtype?H.runKernelFunc(function(e){return e.complexAbs(t)},{$x:t}):H.runKernelFunc(function(e,r){var i=e.abs(t);return r([t]),i},{x:t},function(e,r){var i=r[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}},"Abs")}}),qG=W({acos_:function(n){var t=M(n,"x","acos");return H.runKernelFunc(function(e,r){var i=e.acos(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(We(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),GG=W({acosh_:function(n){var t=M(n,"x","acosh");return H.runKernelFunc(function(e,r){var i=e.acosh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),KG=W({asin_:function(n){var t=M(n,"x","asin");return H.runKernelFunc(function(e,r){var i=e.asin(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(We(1).sub(i.toFloat().square()).sqrt())}}})}}),QG=W({asinh_:function(n){var t=M(n,"x","asinh");return H.runKernelFunc(function(e,r){var i=e.asinh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(We(1).add(i.toFloat().square()).sqrt())}}})}}),YG=W({atan_:function(n){var t=M(n,"x","atan");return H.runKernelFunc(function(e,r){var i=e.atan(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}}),XG=W({atanh_:function(n){var t=M(n,"x","atanh");return H.runKernelFunc(function(e,r){var i=e.atanh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(We(1).sub(i.toFloat().square()))}}})}}),JG=W({ceil_:function(n){var t=M(n,"x","ceil");return H.runKernelFunc(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return hn(e)}}})}}),uD=W({clipByValue_:function(n,t,e){var r=M(n,"x","clipByValue");return P(t<=e,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+e+")."}),H.runKernelFunc(function(s,a){var u=s.clip(r,t,e);return a([r]),u},{x:r},function(s,a){var u=a[0];return{x:function(){return s.where(u.greaterEqual(t).logicalAnd(u.lessEqual(e)),hn(s))}}},"ClipByValue",{min:t,max:e},[r])}}),ZG=W({cos_:function(n){var t=M(n,"x","cos");return H.runKernelFunc(function(r,i){var o=r.cos(t);return i([t]),o},{x:t},function(r,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},[t])}}),$G=W({cosh_:function(n){var t=M(n,"x","cosh");return H.runKernelFunc(function(e,r){var i=e.cosh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}}),eK=W({erf_:function(n){var t=M(n,"x","erf");return P("int32"===t.dtype||"float32"===t.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===t.dtype&&(t=t.toFloat()),H.runKernelFunc(function(e,r){var i=e.erf(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),cD=W({exp_:function(n){var t=M(n,"x","exp");return H.runKernelFunc(function(e,r){var i=e.exp(t);return r([i]),i},{x:t},function(e,r){return{x:function(){return e.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),tK=W({expm1_:function(n){var t=M(n,"x","expm1");return H.runKernelFunc(function(e,r){var i=e.expm1(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.exp())}}})}}),nK=W({floor_:function(n){var t=M(n,"x","floor");return H.runKernelFunc(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return hn(e)}}})}}),rK=W({log_:function(n){var t=M(n,"x","log");return H.runKernelFunc(function(r,i){var o=r.log(t);return i([t]),o},{x:t},function(r,i){var o=i[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},[t])}}),iK=W({log1p_:function(n){var t=M(n,"x","log1p");return H.runKernelFunc(function(e,r){var i=e.log1p(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.add(1))}}})}}),oK=W({logSigmoid_:function(n){var t=M(n,"x","logSigmoid");return H.runKernelFunc(function(e,r){var i=e.softplus(t.neg()).neg();return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}}),Mb=W({neg_:function(n){var t=M(n,"x","neg");return H.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},[t])}}),sK=W({reciprocal_:function(n){var t=M(n,"x","reciprocal");return H.runKernelFunc(function(e,r){var i=e.reciprocal(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.square().neg())}}})}}),aK=W({round_:function(n){var t=M(n,"x","round");return H.runKernelFunc(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return hn(e)}}})}}),zF=W({rsqrt_:function(n){var t=M(n,"x","rsqrt");return H.runKernelFunc(function(r,i){var o=r.rsqrt(t);return i([t]),o},{x:t},function(r,i){var o=i[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},[t])}}),jF=W({sigmoid_:function(n){var t=M(n,"x","sigmoid");return H.runKernelFunc(function(e,r){var i=e.sigmoid(t);return r([i]),i},{x:t},function(e,r){var i=r[0];return{x:function(){return e.mul(i.mul(We(1).sub(i)))}}},"Sigmoid")}}),uK=W({sign_:function(n){var t=M(n,"x","sign");return H.runKernelFunc(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return hn(e)}}})}}),cK=W({isNaN_:function(n){var t=M(n,"x","isNaN");return H.runKernelFunc(function(e){return e.isNaN(t)},{$x:t},function(e){return{$x:function(){return hn(e)}}})}}),lK=W({isInf_:function(n){var t=M(n,"x","isInf");return H.runKernelFunc(function(e){return e.isInf(t)},{$x:t},function(e){return{$x:function(){return hn(e)}}})}}),dK=W({isFinite_:function(n){var t=M(n,"x","isFinite");return H.runKernelFunc(function(e){return e.isFinite(t)},{$x:t},function(e){return{$x:function(){return hn(e)}}})}}),fK=W({sin_:function(n){var t=M(n,"x","sin");return H.runKernelFunc(function(r,i){var o=r.sin(t);return i([t]),o},{x:t},function(r,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},[t])}}),hK=W({sinh_:function(n){var t=M(n,"x","sinh");return H.runKernelFunc(function(e,r){var i=e.sinh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}}),pK=W({softplus_:function(n){var t=M(n,"x","softplus");return H.runKernelFunc(function(e,r){var i=e.softplus(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.sigmoid())}}})}}),gK=W({sqrt_:function(n){var t=M(n,"x","sqrt");return H.runKernelFunc(function(e,r){var i=e.sqrt(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}}),mK=W({step_:function(n,t){void 0===t&&(t=0);var e=M(n,"x","step");return H.runKernelFunc(function(r){return r.step(e,t)},{$x:e},function(r){return{$x:function(){return hn(r)}}})}}),vK=W({tan_:function(n){var t=M(n,"x","tan");return H.runKernelFunc(function(e,r){var i=e.tan(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.cos().square())}}})}}),yK=W({tanh_:function(n){var t=M(n,"x","tanh");return H.runKernelFunc(function(e,r){var i=e.tanh(t);return r([i]),i},{x:t},function(e,r){var i=r[0];return{x:function(){return We(1).sub(i.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function HF(n,t,e,r,i,o){var s,a,u=M(n,"x","batchNorm"),c=M(t,"mean","batchNorm"),d=M(e,"variance","batchNorm");return null!=i&&(s=M(i,"scale","batchNorm")),null!=r&&(a=M(r,"offset","batchNorm")),P(2===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),P(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),P(2===d.rank||1===d.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),null!=s&&P(2===s.rank||1===s.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),null!=a&&P(2===a.rank||1===a.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),Rv(u,c,d,a,s,o)}function WF(n,t,e,r,i,o){var s,a,u=M(n,"x","batchNorm"),c=M(t,"mean","batchNorm"),d=M(e,"variance","batchNorm");return null!=i&&(s=M(i,"scale","batchNorm")),null!=r&&(a=M(r,"offset","batchNorm")),P(3===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),P(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),P(3===d.rank||1===d.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),null!=s&&P(3===s.rank||1===s.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),null!=a&&P(3===a.rank||1===a.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),Rv(u,c,d,a,s,o)}function VF(n,t,e,r,i,o){var s,a,u=M(n,"x","batchNorm"),c=M(t,"mean","batchNorm"),d=M(e,"variance","batchNorm");return null!=i&&(s=M(i,"scale","batchNorm")),null!=r&&(a=M(r,"offset","batchNorm")),P(4===u.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),P(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),P(4===d.rank||1===d.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),null!=s&&P(4===s.rank||1===s.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),null!=a&&P(4===a.rank||1===a.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),Rv(u,c,d,a,s,o)}function Rv(n,t,e,r,i,o){null==o&&(o=.001);var s,a,u,c=M(n,"x","batchNorm"),d=M(t,"mean","batchNorm"),f=M(e,"variance","batchNorm");return null!=i&&(s=M(i,"scale","batchNorm")),null!=r&&(a=M(r,"offset","batchNorm")),P(d.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),P(null==a||d.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),P(null==s||d.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c,H.runKernelFunc(function(g,v){var y=g.batchNormalization(u,kb(d),kb(f),o,kb(s),kb(a));return v([c,d,f,s]),y},{x:c,mean:d,variance:f,scale:s,offset:a},function(g,v){var w=v[0],b=v[1],A=v[2],C=v[3]??We(1),E=Qr(b.shape,u.shape),T=[];if(1===b.rank){for(var O=0;O<u.shape.length-1;++O)T.push(u.shape[O]);T.push(1)}var N=w.sub(b),B=g.mul(C),F=zF(A.add(We(o))),X=F.mul(F).mul(F).mul(We(-.5));return{x:function(){return 1===b.rank?g.mul(wp(F.as4D(1,1,1,b.shape[0]),T)).mul(C).reshape(w.shape):g.mul(F).mul(C).reshape(w.shape)},mean:function(){var G=F.mul(We(-1)).mul(B);return 1===b.rank&&(G=G.sum(E)),G.reshape(b.shape)},variance:function(){var G=X.mul(N).mul(B);return 1===b.rank&&(G=G.sum(E)),G.reshape(b.shape)},scale:function(){var G=N.mul(F),re=g.mul(G);return 1===b.rank&&(re=re.sum(E)),re.reshape(b.shape)},offset:function(){var G=g;return 1===b.rank&&(G=G.sum(E)),G.reshape(b.shape)}}},"BatchNormalization",{varianceEpsilon:o},[c,d,f,s]).reshape(c.shape)}function kb(n){return null==n?null:0===n.rank?n.as1D():1===n.rank?n:2===n.rank?n.as4D(1,1,n.shape[0],n.shape[1]):3===n.rank?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function Pb(){xN("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var wK=W({batchNormalization2d_:function(n,t,e,r,i,o){return void 0===r&&(r=.001),Pb(),HF(n,t,e,o,i,r)}}),bK=W({batchNormalization3d_:function(n,t,e,r,i,o){return void 0===r&&(r=.001),Pb(),WF(n,t,e,o,i,r)}}),AK=W({batchNormalization4d_:function(n,t,e,r,i,o){return void 0===r&&(r=.001),Pb(),VF(n,t,e,o,i,r)}}),xK=W({batchNormalization_:function(n,t,e,r,i,o){return void 0===r&&(r=.001),Pb(),Rv(n,t,e,o,i,r)}}),qF=W({batchNorm_:Rv}),CK=W({batchNorm2d_:HF}),_K=W({batchNorm3d_:WF}),EK=W({batchNorm4d_:VF}),Ob=W({logicalAnd_:function(n,t){var e=M(n,"a","logicalAnd","bool"),r=M(t,"b","logicalAnd","bool");return $t(e.shape,r.shape),H.runKernelFunc(function(i){return i.logicalAnd(e,r)},{a:e,b:r},null,"LogicalAnd")}}),DK=W({logicalNot_:function(n){var t=M(n,"x","logicalNot","bool");return H.runKernelFunc(function(e){return e.logicalNot(t)},{$x:t})}}),GF=W({logicalOr_:function(n,t){var e=M(n,"a","logicalOr","bool"),r=M(t,"b","logicalOr","bool");return $t(e.shape,r.shape),H.runKernelFunc(function(i){return i.logicalOr(e,r)},{$a:e,$b:r})}}),IK=W({logicalXor_:function(n,t){var e=M(n,"a","logicalXor","bool"),r=M(t,"b","logicalXor","bool");return $t(e.shape,r.shape),GF(n,t).logicalAnd(Ob(n,t).logicalNot())}}),lf=W({where_:function(n,t,e){var r=M(t,"a","where"),i=M(e,"b","where"),o=M(n,"condition","where","bool");return fn(r.shape,i.shape,"Error in where: "),1===o.rank?P(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):fn(o.shape,i.shape,"Error in where: "),H.runKernelFunc(function(s,a){var u=s.select(o,r,i);return a([o]),u},{$condition:o,$a:r,$b:i},function(s,a){var u=a[0];return{$condition:function(){return hn(u).toFloat()},$a:function(){return s.mul(u.cast(s.dtype))},$b:function(){return s.mul(u.logicalNot().cast(s.dtype))}}})}}),KF=function(n){return nt(this,void 0,void 0,function(){var t,e,r;return rt(this,function(i){switch(i.label){case 0:return[4,(t=M(n,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),r=ZE(t.shape,e),n!==t&&t.dispose(),[2,r]}})})},en=W({add_:function(n,t){var e,r=M(n,"a","add"),i=M(t,"b","add");e=lr(r,i);var o=$t((r=e[0]).shape,(i=e[1]).shape);return H.runKernelFunc(function(s){return s.add(r,i)},{a:r,b:i},function(s){return{a:function(){var a=s,u=Qr(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=s,u=Qr(i.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(i.shape)}}},"Add")}}),SK=W({addN_:function(n){P(Array.isArray(n),function(){return"The argument passed to tf.addN() must be a list of tensors"}),P(n.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length});var t=n.map(function(i,o){return M(i,"tensors"+o,"addN")}),e=t[0];return t.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(i){if(!qr(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),H.runKernelFunc(function(i){return i.addN(t)},t,function(i){var o={};return t.forEach(function(s,a){o[a]=function(){return i.clone()}}),o},"AddN")}}),TK=W({addStrict_:function(n,t){var e=M(n,"a","addStrict"),r=M(t,"b","addStrict");return fn(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),RK=W({atan2_:function(n,t){var e,r=M(n,"a","atan2"),i=M(t,"b","atan2");e=lr(r,i);var o=$t((r=e[0]).shape,(i=e[1]).shape);return H.runKernelFunc(function(s,a){var u=s.atan2(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],c=a[1];return{$a:function(){var d=en(u.square(),c.square()),f=s.mul(c.div(d)),p=Qr(u.shape,o);return p.length>0&&(f=f.sum(p)),f.reshape(u.shape)},$b:function(){var d=en(u.square(),c.square()),f=Mb(s.mul(u.div(d))),p=Qr(c.shape,o);return p.length>0&&(f=f.sum(p)),f.reshape(c.shape)}}})}}),Pa=W({div_:function(n,t){var e,r=M(n,"a","div"),i=M(t,"b","div");if(e=lr(r,i),i=e[1],"int32"===(r=e[0]).dtype&&"int32"===i.dtype)return QF(r,i);var o=$t(r.shape,i.shape);return H.runKernelFunc(function(s,a){var u=s.realDivide(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var d=s.div(c.toFloat()),f=Qr(u.shape,o);return f.length>0?d.sum(f).reshape(u.shape):d},b:function(){var d=s.mul(u.toFloat()),f=Qr(c.shape,o);f.length>0&&(d=d.sum(f).reshape(c.shape));var p=c.square();return d.div(p.toFloat()).neg()}}},"Div")}}),MK=W({divNoNan_:function(n,t){var e,r=M(n,"a","div"),i=M(t,"b","div");r=(e=lr(r,i))[0];var o=Pa(r,i=e[1]),s=hn(o),a=i.equal(s);return lf(a,s,o)}}),kK=W({divStrict_:function(n,t){var e=M(n,"a","div"),r=M(t,"b","div");return fn(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),QF=W({floorDiv_:function(n,t){var e,r=M(n,"a","floorDiv"),i=M(t,"b","floorDiv");e=lr(r,i);var o=$t((r=e[0]).shape,(i=e[1]).shape);return H.runKernelFunc(function(s,a){var u=s.floorDiv(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var d=s.div(c.toFloat()),f=Qr(u.shape,o);return f.length>0?d.sum(f).reshape(u.shape):d},b:function(){var d=s.mul(u.toFloat()),f=Qr(c.shape,o);f.length>0&&(d=d.sum(f).reshape(c.shape));var p=c.square();return d.div(p.toFloat()).neg()}}},"FloorDiv")}}),lD=W({maximum_:function(n,t){var e,r=M(n,"a","maximum"),i=M(t,"b","maximum");return e=lr(r,i),i=e[1],"bool"===(r=e[0]).dtype&&(r=r.toInt(),i=i.toInt()),$t(r.shape,i.shape),H.runKernelFunc(function(o,s){var a=o.maximum(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return o.mul(a.greaterEqual(u).toFloat())},b:function(){return o.mul(a.less(u).toFloat())}}},"Maximum")}}),PK=W({maximumStrict_:function(n,t){var e=M(n,"a","maximumStrict"),r=M(t,"b","maximumStrict");return fn(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),YF=W({minimum_:function(n,t){var e,r=M(n,"a","minimum"),i=M(t,"b","minimum");return e=lr(r,i),i=e[1],"bool"===(r=e[0]).dtype&&(r=r.toInt(),i=i.toInt()),$t(r.shape,i.shape),H.runKernelFunc(function(o,s){var a=o.minimum(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return o.mul(a.lessEqual(u).toFloat())},b:function(){return o.mul(a.greater(u).toFloat())}}},"Minimum")}}),OK=W({minimumStrict_:function(n,t){var e=M(n,"a","minimumStrict"),r=M(t,"b","minimumStrict");return fn(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),NK=W({mod_:function(n,t){var e,r=M(n,"a","mod"),i=M(t,"b","mod");e=lr(r,i);var o=$t((r=e[0]).shape,(i=e[1]).shape);return H.runKernelFunc(function(s,a){var u=s.mod(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],c=a[1];return{$a:function(){var d=Qr(u.shape,o);return d.length>0?s.sum(d).reshape(u.shape):s},$b:function(){var d=s.mul(u.div(c).floor().neg()),f=Qr(c.shape,o);return f.length>0?d.sum(f).reshape(c.shape):d}}})}}),FK=W({modStrict_:function(n,t){var e=M(n,"a","modStrict"),r=M(t,"b","modStrict");return fn(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),Ji=W({mul_:function(n,t){var e,r=M(n,"a","mul"),i=M(t,"b","mul");e=lr(r,i);var o=$t((r=e[0]).shape,(i=e[1]).shape);return H.runKernelFunc(function(s,a){var u=s.multiply(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var d=s.mul(c.toFloat()),f=Qr(u.shape,o);return f.length>0?d.sum(f).reshape(u.shape):d},b:function(){var d=s.mul(u.toFloat()),f=Qr(c.shape,o);return f.length>0?d.sum(f).reshape(c.shape):d}}},"Mul")}}),BK=W({mulStrict_:function(n,t){var e=M(n,"a","mul"),r=M(t,"b","mul");return fn(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),Nb=W({pow_:function(n,t){var e,r=M(n,"base","pow"),i=M(t,"exp","pow");e=lr(r,i);var o=$t((r=e[0]).shape,(i=e[1]).shape);return H.runKernelFunc(function(a,u){var c=a.pow(r,i);return u([r,i,c]),c},{a:r,b:i},function(a,u){var c=u[0],d=u[1],f=u[2];return{a:function(){var p=d.toFloat(),g=a.mul(p.mul(c.pow(p.sub(We(1))))),v=Qr(c.shape,o);return v.length>0&&(g=g.sum(v)),g.reshape(c.shape)},b:function(){var p=c.greater(0),g=c.log().where(p,hn(c)),v=a.mul(f.mul(g)),y=Qr(d.shape,o);return y.length>0&&(v=v.sum(y)),v.reshape(d.shape)}}},"Pow",{},[r,i],[!0])}}),LK=W({powStrict_:function(n,t){return fn(n.shape,t.shape,"Error in powStrict: "),n.pow(t)}}),UK=W({squaredDifferenceStrict_:function(n,t){var e=M(n,"a","squaredDifferenceStrict"),r=M(t,"b","squaredDifferenceStrict");return fn(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),ai=W({sub_:function(n,t){var e,r=M(n,"a","sub"),i=M(t,"b","sub");e=lr(r,i);var o=$t((r=e[0]).shape,(i=e[1]).shape);return H.runKernelFunc(function(s){return s.subtract(r,i)},{a:r,b:i},function(s){return{a:function(){var a=s,u=Qr(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=s,u=Qr(i.shape,o);return u.length>0&&(a=a.sum(u)),a.neg().reshape(i.shape)}}},"Sub")}}),zK=W({subStrict_:function(n,t){var e=M(n,"a","subStrict"),r=M(t,"b","subStrict");return fn(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),XF=W({equal_:function(n,t){var e,r=M(n,"a","equal"),i=M(t,"b","equal");return e=lr(r,i),$t((r=e[0]).shape,(i=e[1]).shape),H.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),jK=W({equalStrict_:function(n,t){var e=M(n,"a","equalStrict"),r=M(t,"b","equalStrict");return fn(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),HK=W({greater_:function(n,t){var e,r=M(n,"a","greater"),i=M(t,"b","greater");return e=lr(r,i),$t((r=e[0]).shape,(i=e[1]).shape),H.runKernelFunc(function(o){return o.greater(r,i)},{a:r,b:i},null,"Greater")}}),JF=W({greaterEqual_:function(n,t){var e,r=M(n,"a","greaterEqual"),i=M(t,"b","greaterEqual");return e=lr(r,i),$t((r=e[0]).shape,(i=e[1]).shape),H.runKernelFunc(function(o,s){var a=o.greaterEqual(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return hn(a)},b:function(){return hn(u)}}},"GreaterEqual")}}),WK=W({greaterEqualStrict_:function(n,t){var e=M(n,"a","greaterEqualStrict"),r=M(t,"b","greaterEqualStrict");return fn(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),VK=W({greaterStrict_:function(n,t){var e=M(n,"a","greaterStrict"),r=M(t,"b","greaterStrict");return fn(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),qK=W({less_:function(n,t){var e,r=M(n,"a","less"),i=M(t,"b","less");return e=lr(r,i),$t((r=e[0]).shape,(i=e[1]).shape),H.runKernelFunc(function(o){return o.less(r,i)},{a:r,b:i},null,"Less")}}),GK=W({lessEqual_:function(n,t){var e,r=M(n,"a","lessEqual"),i=M(t,"b","lessEqual");return e=lr(r,i),$t((r=e[0]).shape,(i=e[1]).shape),H.runKernelFunc(function(o,s){var a=o.lessEqual(r,i);return s([r,i]),a},{a:r,b:i},null,"LessEqual")}}),KK=W({lessEqualStrict_:function(n,t){var e=M(n,"a","lessEqualStrict"),r=M(t,"b","lessEqualStrict");return fn(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),QK=W({lessStrict_:function(n,t){var e=M(n,"a","lessStrict"),r=M(t,"b","lessStrict");return fn(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),YK=W({notEqual_:function(n,t){var e,r=M(n,"a","notEqual"),i=M(t,"b","notEqual");return e=lr(r,i),$t((r=e[0]).shape,(i=e[1]).shape),H.runKernelFunc(function(o){return o.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),XK=W({notEqualStrict_:function(n,t){var e=M(n,"a","notEqualStrict"),r=M(t,"b","notEqualStrict");return fn(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function ZF(n,t){for(var e=[],r=n;r<t;++r)e.push(r);return e}function $F(n){for(var t=[],e=0;e<n.length;++e)for(var r=0;r<n[e].length;++r)t.push(n[e][r]);return t}var dD=W({gather_:function(n,t,e){void 0===e&&(e=0);var r=M(n,"x","gather"),i=M(t,"indices","gather","int32");e=Gr(e,r.shape)[0];var o=function(s,a,u){for(var c=s.shape[u],d=[],f=1,p=1,g=0;g<u;g++)d.push(s.shape[g]),f*=s.shape[g];for(g=0;g<a.rank;g++)d.push(a.shape[g]);for(g=u+1;g<s.rank;g++)d.push(s.shape[g]),p*=s.shape[g];return{batchSize:f,sliceSize:p,dimSize:c,outputShape:d}}(r,i,e);return H.runKernelFunc(function(s,a){var u=s.gather(r,i.flatten(),e);return a([i]),u},{x:r,indices:i},function(s,a){var u=a[0];return{x:function(){var c=r.shape,d=u.size,f=c.slice(0,e),p=f.length,g=c.slice(e,c.length).slice(1),v=g.length,y=ZF(0,p),w=ZF(p+1,p+1+v),b=$F([f,[d],g]),A=s.reshape(b),_=u.reshape([d]),C=$F([[p],y,w]),E=A.transpose(C),T=e3(E,_,r.shape[e]),O=pb(C);return T.transpose(O)},indices:function(){return u}}},"Gather",{axis:e}).reshape(o.outputShape)}}),e3=W({unsortedSegmentSum_:function(n,t,e){var r=M(n,"x","unsortedSegmentSum"),i=M(t,"segmentIds","unsortedSegmentSum","int32");return P(hr(e),function(){return"numSegments must be of dtype int"}),H.runKernelFunc(function(o,s){var a=o.unsortedSegmentSum(r,i,e);return s([i]),a},{$x:r},function(o,s){var a=s[0];return{$x:function(){return function(u,c){for(var d=lD(c,hn(c)),f=dD(u,d),p=JF(c,We(0,"int32")),g=f.rank-p.rank,v=0;v<g;++v)p=Zs(p,v+1);p=Ob(p,yp(f.shape,"bool"));var y=hn(f);return lf(p,f,y)}(o,a)}}})}});function t3(n,t,e,r,i,o,s){void 0===o&&(o="NHWC"),P(n.length===t.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+t.rank+") must match"});var a=n,u=t,c=!1;3===t.rank&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),a=[1,n[0],n[1],n[2]]),P(4===a.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),P(4===u.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),P(4===e.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var d="NHWC"===o?a[3]:a[1],f="NHWC"===o?u.shape[3]:u.shape[1];P(d===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+e.shape[2]+"."}),P(f===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+e.shape[3]+"."}),null!=s&&P(hr(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var p=Eb(o),g=Dl(a,e.shape,r,1,i,s,!1,p),v=H.runKernelFunc(function(y,w){var b=y.conv2dDerInput(u,e,g);return w([e,u]),b},{dy4D:u,filter:e},function(y,w){var b=w[0],A=w[1];return{dy4D:function(){return $s(y,b,r,i,o,1,s)},filter:function(){return hD(y,A,b.shape,r,i,o,s)}}});return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function fD(n){var o,t="number"==typeof(o=n)?[o,o,o]:2===o.length?[o[0],o[1],1]:o;return 1===t[0]&&1===t[1]&&1===t[2]}function n3(n,t,e,r,i){P(n.length===t.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+t.rank+") must match"});var o=n,s=t,a=!1;4===t.rank&&(a=!0,s=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,n[0],n[1],n[2],n[3]]);var u=o[4],c=s.shape[4];P(5===o.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),P(5===s.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),P(5===e.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),P(u===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+e.shape[3]+"."}),P(c===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+e.shape[4]+"."});var d=Ev(o,e.shape,r,1,i),f=H.runKernelFunc(function(p){return p.conv3dDerInput(s,e,d)},{dy5D:s});return a?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var ZK=W({conv1d_:function(n,t,e,r,i,o,s){void 0===i&&(i="NWC"),void 0===o&&(o=1);var a=M(n,"x","conv1d"),u=M(t,"filter","conv1d"),c=a,d=!1;2===a.rank&&(d=!0,c=a.as3D(1,a.shape[0],a.shape[1])),P(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),P(3===u.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),null!=s&&P(hr(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),P(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),P(Eo(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),P("NWC"===i,function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),g=$s(p,f,[1,e],r,"NHWC",[1,o],s);return d?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),$s=W({conv2d_:function(n,t,e,r,i,o,s){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var a=M(n,"x","conv2d"),u=M(t,"filter","conv2d"),c=a,d=!1;3===a.rank&&(d=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),P(4===u.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),null!=s&&P(hr(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var f="NHWC"===i?c.shape[3]:c.shape[1];P(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),P(Eo(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var p=Eb(i),g=Dl(c.shape,u.shape,e,o,r,s,!1,p),y=H.runKernelFunc(function(w,b){var A=w.conv2d(c,u,g);return b([u,c]),A},{x:c,filter:u},function(w,b){var _=b[0],C=b[1];return P(af(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return r3(C.shape,w,_,e,r,i)},filter:function(){return hD(C,w,_.shape,e,r,i)}}},"Conv2D",g,[u,c]);return d?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),$K=W({conv3d_:function(n,t,e,r,i,o){void 0===i&&(i="NDHWC"),void 0===o&&(o=[1,1,1]);var g,s=M(n,"x","conv3d"),a=M(t,"filter","conv3d"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),P(5===u.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),P(5===a.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),P(u.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),P((g=o,fD(e)||fD(g)),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),P("NDHWC"===i,function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var d=Ev(u.shape,a.shape,e,o,r),f=H.runKernelFunc(function(p,g){var v=p.conv3d(u,a,d);return g([u,a]),v},{x:u,$filter:a},function(p,g){P(fD(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var v=g[0],y=g[1];return{x:function(){return n3(v.shape,p,y,e,r)},$filter:function(){return function(w,b,A,_,C){var E=w;4===w.rank&&(E=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]));var T=b;4===T.rank&&(T=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3])),P(5===E.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+E.shape+"."}),P(5===T.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+T.shape+"."}),P(5===A.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+A+"."}),P(E.shape[4]===A[3],function(){return"Error in conv3dDerFilter: depth of input "+E.shape[4]+") must match input depth in filter ("+A[3]+"."}),P(T.shape[4]===A[4],function(){return"Error in conv3dDerFilter: depth of dy ("+T.shape[4]+") must match output depth for filter ("+A[4]+")."});var O=Ev(E.shape,A,_,1,C);return H.runKernelFunc(function(N){return N.conv3dDerFilter(E,T,O)},{x5D:E,dy5D:T})}(v,p,y.shape,e,r)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),hD=W({conv2dDerFilter_:function(n,t,e,r,i,o,s){void 0===o&&(o="NHWC");var a=n;3===n.rank&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var u=t;3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),P(4===a.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),P(4===u.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),P(4===e.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var c="NHWC"===o?a.shape[3]:a.shape[1],d="NHWC"===o?u.shape[3]:u.shape[1];P(c===e[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+e[2]+"."}),P(d===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+e[3]+")."}),null!=s&&P(hr(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var f=Eb(o),p=Dl(a.shape,e,r,1,i,s,!1,f);return H.runKernelFunc(function(g){return g.conv2dDerFilter(a,u,p)},{x4D:a,dy4D:u})}}),r3=W({conv2dDerInput_:t3}),Fb=W({depthwiseConv2d_:function(n,t,e,r,i,o,s){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var a=M(n,"x","depthwiseConv2d"),u=M(t,"filter","depthwiseConv2d"),c=a,d=!1;3===a.rank&&(d=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),P(4===u.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),P(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),null==o&&(o=[1,1]),P(Eo(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),null!=s&&P(hr(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var f=Dl(c.shape,u.shape,e,o,r,s,!0),g=H.runKernelFunc(function(v,y){var w=v.depthwiseConv2D(c,u,f);return y([c,u]),w},{x:c,filter:u},function(v,y){P(af(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var w=y[0],b=y[1];return{x:function(){return i3(w.shape,v,b,f)},filter:function(){return o3(w,v,b.shape,f)}}},"DepthwiseConv2dNative",f,[c,u]);return d?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),i3=W({depthwiseConv2dDerInput_:function(n,t,e,r){var i=t,o=!1;3===t.rank&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=H.runKernelFunc(function(a){return a.depthwiseConv2DDerInput(i,e,r)},{dy4D:i});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),o3=W({depthwiseConv2dDerFilter_:function(n,t,e,r){var i=n;3===n.rank&&(i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t;return 3===o.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),H.runKernelFunc(function(s){return s.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),pD=W({separableConv2d_:function(n,t,e,r,i,o,s){void 0===o&&(o=[1,1]),void 0===s&&(s="NHWC");var a=M(n,"x","separableConv2d"),u=M(t,"depthwiseFilter","separableConv2d"),c=M(e,"pointwiseFilter","separableConv2d"),d=a,f=!1;if(3===a.rank&&(f=!0,d=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(4===d.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),P(4===u.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),P(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),P(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),P(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var p=u.shape[2],g=u.shape[3];P(c.shape[2]===p*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*g+", but got "+c.shape[2]+"."});var v=Fb(d,u,r,i,s,o),y=$s(v,c,1,"valid",s);return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),eQ=W({conv2dTranspose_:function(n,t,e,r,i,o){return t3(e,M(n,"x","conv2dTranspose"),M(t,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),tQ=W({conv3dTranspose_:function(n,t,e,r,i){return n3(e,M(n,"x","conv3dTranspose"),M(t,"filter","conv3dTranspose"),r,i)}}),Bb=W({matMul_:function(n,t,e,r){var i;void 0===e&&(e=!1),void 0===r&&(r=!1);var o=M(n,"a","matMul"),s=M(t,"b","matMul");i=lr(o,s),o=i[0],s=i[1];var a=e?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?s.shape[s.rank-1]:s.shape[s.rank-2],c=e?o.shape[o.rank-1]:o.shape[o.rank-2],d=r?s.shape[s.rank-2]:s.shape[s.rank-1],f=o.shape.slice(0,-2),p=s.shape.slice(0,-2),g=at(f),v=at(p);P(o.rank>=2&&s.rank>=2&&o.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+s.rank+"."}),P(qr(f,p),function(){return"Error in matMul: outer dimensions ("+f+") and ("+p+") of Tensors with shapes "+o.shape+" and "+s.shape+" must match."}),P(a===u,function(){return"Error in matMul: inner shapes ("+a+") and ("+u+") of Tensors with shapes "+o.shape+" and "+s.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var y=o.shape.slice(0,-2).concat([c,d]),w=e?o.as3D(g,a,c):o.as3D(g,c,a),b=r?s.as3D(v,d,u):s.as3D(v,u,d);return H.runKernelFunc(function(_,C){var E=_.batchMatMul(w,b,e,r);return C([w,b]),E},{a:w,b},function(_,C){var T=C[0],O=C[1];return e||r?!e&&r?{a:function(){return _.matMul(O,!1,!1)},b:function(){return _.matMul(T,!0,!1)}}:e&&!r?{a:function(){return O.matMul(_,!1,!0)},b:function(){return T.matMul(_,!1,!1)}}:{a:function(){return O.matMul(_,!0,!0)},b:function(){return _.matMul(T,!0,!0)}}:{a:function(){return _.matMul(O,!1,!0)},b:function(){return T.matMul(_,!0,!1)}}},"BatchMatMul",{transposeA:e,transposeB:r}).reshape(y)}}),nQ=W({dot_:function(n,t){var e=M(n,"t1","dot"),r=M(t,"t2","dot");P(!(1!==e.rank&&2!==e.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var i=1===e.rank?e.size:e.shape[1],o=1===r.rank?r.size:r.shape[0];return P(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),1===e.rank&&1===r.rank?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===e.rank&&2===r.rank?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===e.rank&&1===r.rank?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),rQ=W({outerProduct_:function(n,t){var e=M(n,"v1","outerProduct"),r=M(t,"v2","outerProduct");return P(1===e.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),Mv=W({reverse_:function(n,t){var e=M(n,"x","reverse");if(0===e.rank)return e.clone();var r=Gr(t,e.shape);return H.runKernelFunc(function(i){return i.reverse(e,r)},{$x:e},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(e)}}),iQ=W({reverse1d_:function(n){var t=M(n,"x","reverse");return P(1===t.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),Mv(t,0)}}),oQ=W({reverse2d_:function(n,t){var e=M(n,"x","reverse");return P(2===e.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),Mv(e,t)}}),sQ=W({reverse3d_:function(n,t){var e=M(n,"x","reverse");return P(3===e.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),Mv(e,t)}}),aQ=W({reverse4d_:function(n,t){var e=M(n,"x","reverse");return P(4===e.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),Mv(e,t)}});function s3(n,t,e,r,i,o){var s=M(n,"x","maxPool"),a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),null==r&&(r=[1,1]),P(4===a.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),P(Eo(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),null!=o&&P(hr(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=bp(a.shape,t,e,r,i,o);if(1===c.filterWidth&&1===c.filterHeight&&qr(c.inShape,c.outShape))return s.clone();var f=H.runKernelFunc(function(p,g){var v=p.maxPool(a,c);return g([a,v]),v},{x:a},function(p,g){var v=g[0],y=g[1];return{x:function(){return function(w,b,A,_,C,E,T,O){var N=M(w,"dy","maxPoolBackprop"),B=M(b,"input","maxPoolBackprop"),F=M(A,"output","maxPoolBackprop");P(B.rank===N.rank,function(){return"Rank of input ("+B.rank+") does not match rank of dy ("+N.rank+")"}),null==E&&(E=[1,1]),P(Eo(C,E),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+C+" and dilations '"+E+"'"}),P(4===N.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+N.rank+"."}),P(4===B.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+B.rank+"."});var X=bp(B.shape,_,C,E,T,void 0);return H.runKernelFunc(function(G){return G.maxPoolBackprop(N,B,F,X)},{$dy:N,$input:B})}(p,v,y,t,e,r,i)}}},"MaxPool",c,[a]);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function a3(n,t,e,r,i,o){var s=M(n,"x","avgPool","float32");null==r&&(r=[1,1]),P(Eo(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(4===a.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),null!=o&&P(hr(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=bp(a.shape,t,e,r,i,o);if(1===c.filterWidth&&1===c.filterHeight&&qr(c.inShape,c.outShape))return s.clone();var d=H.runKernelFunc(function(f){return f.avgPool(a,c)},{x:a},function(f){return{x:function(){return function(p,g,v,y,w,b){var A=M(p,"dy","avgPoolBackprop"),_=M(g,"input","avgPoolBackprop");P(_.rank===A.rank,function(){return"Rank of input ("+_.rank+") does not match rank of dy ("+A.rank+")"}),null==w&&(w=[1,1]),P(Eo(y,w),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+w+"'"});var C=_,E=A,T=!1;3===_.rank&&(T=!0,C=_.as4D(1,_.shape[0],_.shape[1],_.shape[2]),E=A.as4D(1,A.shape[0],A.shape[1],A.shape[2])),P(4===E.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+E.rank+"."}),P(4===C.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+C.rank+"."});var O=bp(C.shape,v,y,w,b),N=H.runKernelFunc(function(B){return B.avgPoolBackprop(E,C,O)},{dy4D:E,input4D:C});return T?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}(f,a,t,e,r,i)}}},"AvgPool",c);return d=d.cast(s.dtype),u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var wi=W({maxPool_:function(n,t,e,r,i){return s3(n,t,e,1,r,i)}}),kv=W({avgPool_:function(n,t,e,r,i){return a3(n,t,e,1,r,i)}}),uQ=W({pool_:function(n,t,e,r,i,o){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");var s=M(n,"x","maxPool"),a=s,u=!1;3===s.rank&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(Eo(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var c,E,T,O,N,d=bp(a.shape,t,o,i,r),f=[d.dilationHeight,d.dilationWidth];c="same"===r?(E=f,T=[d.filterHeight,d.filterWidth].map(function(B,F){return B+(B-1)*(E[F]-1)}).map(function(B){return B-1}),O=T.map(function(B){return Math.floor(B/2)}),N=T.map(function(B,F){return B-O[F]}),T.map(function(B,F){return[O[F],N[F]]})):[[0,0],[0,0]];var p=1===f[0]&&1===f[1],g=function(C,E,T){var O=T.map(function(fe){return fe[0]}),N=T.map(function(fe){return fe[1]}),B=C.concat(O,N),F=E.map(function(fe,he){return(fe-B[he]%fe)%fe}),X=N.map(function(fe,he){return fe+F[he]});return[E.map(function(fe,he){return[O[he],X[he]]}),E.map(function(fe,he){return[0,F[he]]})]}([d.inHeight,d.inWidth],f,c),y=g[1],w=p?r:"valid",b=p?a:RN(a,f,g[0]),A=("avg"===e?function(){return a3(b,t,o,1,w)}:function(){return s3(b,t,o,1,w)})(),_=p?A:IN(A,f,y);return u?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),cQ=W({maxPool3d_:function(n,t,e,r,i,o,s){void 0===o&&(o="NDHWC");var a=M(n,"x","maxPool3d"),u=a,c=!1;4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),null==s&&(s=[1,1,1]),P(5===u.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),P("NDHWC"===o,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),P(Eo(e,s),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),null!=i&&P(hr(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var d=_v(u.shape,t,e,s,r,i,o),f=H.runKernelFunc(function(p,g){var v=p.maxPool3d(u,d);return g([u,v]),v},{x:u},function(p,g){var v=g[0],y=g[1];return{x:function(){return function(w,b,A,_,C,E,T,O){var N=M(w,"dy","maxPool3dBackprop"),B=M(b,"input","maxPool3dBackprop"),F=M(A,"output","maxPool3dBackprop"),X=N,G=B,re=F,fe=!1;4===B.rank&&(fe=!0,X=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),G=B.as5D(1,B.shape[0],B.shape[1],B.shape[2],B.shape[3]),re=F.as5D(1,F.shape[0],F.shape[1],F.shape[2],F.shape[3])),P(5===X.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+X.rank+"."}),P(5===G.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+G.rank+"."}),P(5===re.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+re.rank+"."}),null==E&&(E=[1,1,1]),P(Eo(C,E),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+C+" and dilations '"+E+"'"}),null!=O&&P(hr(T),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+O+" but got pad "+T+"."});var he=_v(G.shape,_,C,E,T,O),$=H.runKernelFunc(function(ee){return ee.maxPool3dBackprop(X,G,re,he)},{dy5D:X,input5D:G});return fe?$.as4D($.shape[1],$.shape[2],$.shape[3],$.shape[4]):$}(p,v,y,t,e,s,r,i)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),lQ=W({avgPool3d_:function(n,t,e,r,i,o,s){void 0===o&&(o="NDHWC");var a=M(n,"x","avgPool3d","float32"),u=a,c=!1;4===a.rank&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),null==s&&(s=[1,1,1]),P(5===u.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),P("NDHWC"===o,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),P(Eo(e,s),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),null!=i&&P(hr(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var d=_v(u.shape,t,e,s,r,i,o),f=H.runKernelFunc(function(p){return p.avgPool3d(u,d)},{x:u},function(p){return{x:function(){return function(g,v,y,w,b,A,_){var C=M(g,"dy","avgPool3dBackprop"),E=M(v,"input","avgPool3dBackprop"),T=C,O=E,N=!1;4===E.rank&&(N=!0,T=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),O=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3])),P(5===T.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+T.rank+"."}),P(5===O.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+O.rank+"."}),null==b&&(b=[1,1,1]),P(Eo(w,b),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+b+"'"}),null!=_&&P(hr(A),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+_+" but got pad "+A+"."});var B=_v(O.shape,y,w,b,A,_),F=H.runKernelFunc(function(X){return X.avgPool3dBackprop(T,O,B)},{dy5D:T,input5D:O});return N?F.as4D(F.shape[1],F.shape[2],F.shape[3],F.shape[4]):F}(p,u,t,e,s,r,i)}}});return f=f.cast(u.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),vu=W({slice_:function(n,t,e){var r,i,o=M(n,"x","slice");if(0===o.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach(function(u){P(-1!==u,function(){return"slice() does not support negative begin indexing."})}),i=(i=null==e?new Array(o.rank).fill(-1):"number"==typeof e?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(u,c){return u>=0?u:(P(-1===u,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+c+"."}),o.shape[c]-r[c])}),FN(o,r,i);var s=o.shape;return H.runKernelFunc(function(u){return u.slice(o,r,i)},{x:o},function(u){for(var c=[],d=0;d<u.rank;d++)c.push([r[d],s[d]-r[d]-i[d]]);return{x:function(){return u.pad(c)}}},"Slice",{begin:r,size:i})}}),dQ=W({slice1d_:function(n,t,e){var r=M(n,"x","slice1d");return P(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),vu(r,[t],[e])}}),fQ=W({slice2d_:function(n,t,e){var r=M(n,"x","slice2d");return P(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),vu(r,t,e)}}),u3=W({slice3d_:function(n,t,e){var r=M(n,"x","slice3d");return P(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),vu(r,t,e)}}),hQ=W({slice4d_:function(n,t,e){var r=M(n,"x","slice4d");return P(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),vu(r,t,e)}});function c3(n,t,e,r,i){return t.rank<e.rank&&(t=t.reshape(_o(t.shape,r))),n.rank<e.rank&&(n=n.reshape(_o(n.shape,r))),{x:function(){var o=n.mul(e.equal(t).cast(n.dtype));return null==i?o:o.transpose(i)}}}var pQ=W({all_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=M(n,"x","all","bool"),i=Gr(t,r.shape),o=i,s=Ta(o,r.rank);null!=s&&(r=r.transpose(s),o=Ra(o.length,r.rank));var a=H.runKernelFunc(function(c){return c.all(r,o)},{$x:r});if(e){var u=_o(a.shape,i);return a.reshape(u)}return a}}),gQ=W({any_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=M(n,"x","any","bool"),i=Gr(t,r.shape),o=i,s=Ta(o,r.rank);null!=s&&(r=r.transpose(s),o=Ra(o.length,r.rank));var a=H.runKernelFunc(function(c){return c.any(r,o)},{$x:r});if(e){var u=_o(a.shape,i);return a.reshape(u)}return a}}),mQ=W({argMax_:function(n,t){void 0===t&&(t=0);var e=M(n,"x","argMax");null==t&&(t=0);var r=Gr(t,e.shape),i=Ta(r,e.rank);return null!=i&&(e=e.transpose(i),r=Ra(r.length,e.rank)),H.runKernelFunc(function(a,u){var c=a.argMax(e,r[0]);return u([e]),c},{x:e},function(a,u){var c=u[0];return{x:function(){return hn(c)}}},"ArgMax",{axis:r[0]},[e])}}),vQ=W({argMin_:function(n,t){void 0===t&&(t=0);var e=M(n,"x","argMin");null==t&&(t=0);var r=Gr(t,e.shape),i=Ta(r,e.rank);return null!=i&&(e=e.transpose(i),r=Ra(r.length,e.rank)),H.runKernelFunc(function(o,s){var a=o.argMin(e,r[0]);return s([e]),a},{$x:e},function(o,s){var a=s[0];return{$x:function(){return hn(a)}}})}}),yQ=W({logSumExp_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=M(n,"x","logSumExp"),i=Gr(t,r.shape),o=r.max(i,!0),s=r.sub(o).exp().sum(i).log(),a=o.reshape(s.shape).add(s);if(e){var u=_o(a.shape,i);return a.reshape(u)}return a}}),Lb=W({max_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=M(n,"x","max"),i=r,o=Gr(t,r.shape),s=o,a=Ta(s,r.rank);null!=a&&(r=r.transpose(a),s=Ra(s.length,r.rank));var c=H.runKernelFunc(function(f,p){var g=f.max(r,s);return p([i,g]),g},{x:r},function(f,p){return c3(f,p[1],p[0],o,a)},"Max",{axes:s},[r],[!0]);if(e){var d=_o(c.shape,o);c=c.reshape(d)}return c}}),wQ=W({mean_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=M(n,"x","mean"),i=Gr(t,r.shape),o=at(Mi(r.shape,i)[1]);return xb(function(s){var a=We(o);return{value:(a.dtype===s.dtype?s:s.cast(a.dtype)).div(a).sum(t,e),gradFunc:function(u){var c=s.shape.slice();return i.forEach(function(d){c[d]=1}),u.reshape(c).mul(yp(s.shape,"float32")).div(o)}}})(r)}}),bQ=W({min_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=M(n,"x","min"),i=r,o=Gr(t,r.shape),s=o,a=Ta(s,r.rank);null!=a&&(r=r.transpose(a),s=Ra(s.length,r.rank));var c=H.runKernelFunc(function(f,p){var g=f.min(r,s);return p([i,g]),g},{x:r},function(f,p){return c3(f,p[1],p[0],o,a)},"Min",{axes:s},[r],[!0]);if(e){var d=_o(c.shape,o);c=c.reshape(d)}return c}}),AQ=W({moments_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=Gr(t,(n=M(n,"x","moments")).shape),i=n.mean(r,e),o=i.shape;e||(o=_o(i.shape,r));var s=n.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:s.mean(r,e)}}}),l3=W({sum_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=M(n,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=Gr(t,r.shape);return xb(function(o){var s=Ta(i,o.rank),a=i,u=o;null!=s&&(u=o.transpose(s),a=Ra(a.length,o.rank));var c=function(g){var v=o.shape.slice();return i.forEach(function(y){v[y]=1}),g.reshape(v).mul(yp(o.shape,"float32"))},f=H.runKernelFunc(function(g){return g.sum(u,a)},{x:u},function(g){return{x:function(){return c(g)}}},"Sum",{axes:a});if(e){var p=_o(f.shape,i);f=f.reshape(p)}return{value:f,gradFunc:c}})(r)}}),xQ=W({prod_:function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=!1);var r=M(n,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=Gr(t,r.shape),o=Ta(i,r.rank),s=i,a=r;null!=o&&(a=r.transpose(o),s=Ra(s.length,r.rank));var u=H.runKernelFunc(function(d){return d.prod(a,s)},{permutedX:a});if(e){var c=_o(u.shape,i);u=u.reshape(c)}return u}}),d3=W({elu_:function(n){var t=M(n,"x","elu");return H.runKernelFunc(function(e,r){var i=e.elu(t);return r([i]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return H.runKernelFunc(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}}),CQ=W({leakyRelu_:function(n,t){void 0===t&&(t=.2);var e=M(n,"x","leakyRelu");return lD(We(t).mul(e),e)}}),f3=W({prelu_:function(n,t){var e=M(n,"x","prelu"),r=M(t,"alpha","prelu");return H.runKernelFunc(function(i,o){var s=i.prelu(e,r);return o([e,r]),s},{x:e,alpha:r},function(i,o){var s=o[0],a=o[1],u=s.greater(0);return{x:function(){return lf(u,i,i.mul(a))},alpha:function(){var c=lf(u,hn(i),i.mul(s)),d=Qr(a.shape,i.shape);return d.length>0&&(c=c.sum(d)),c.reshape(a.shape)}}},"Prelu")}}),pr=W({relu_:function(n){var t=M(n,"x","relu");return"bool"===t.dtype?t.toInt():H.runKernelFunc(function(e,r){var i=e.relu(t);return r([t]),i},{x:t},function(e,r){var i=r[0];return{x:function(){return e.mulStrict(i.step().toFloat())}}},"Relu")}}),h3=W({relu6_:function(n){var t=M(n,"x","relu6");return"bool"===t.dtype?t.toInt():H.runKernelFunc(function(e,r){var i=e.relu6(t);return r([t]),i},{x:t},function(e,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return e.mulStrict(o.toFloat())}}},"Relu6")}}),_Q=W({selu_:function(n){var t=M(n,"x","selu");return H.runKernelFunc(function(e,r){var i=e.selu(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){var o=i.greater(We(0)),s=We(sD),a=We(aD),u=e.mul(a),c=e.mul(s).mul(i.toFloat().exp());return lf(o,u,c)}}})}}),Il=W({transpose_:function(n,t){var e=M(n,"x","transpose");return null==t&&(t=e.shape.map(function(i,o){return o}).reverse()),P(e.rank===t.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+t+"."}),t.forEach(function(i){P(i>=0&&i<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+t})}),e.rank<=1?e.clone():H.runKernelFunc(function(i){return i.transpose(e,t)},{x:e},function(i){var o=pb(t);return{x:function(){return i.transpose(o)}}},"Transpose",{perm:t})}}),EQ=W({localResponseNormalization_:function(n,t,e,r,i){void 0===t&&(t=5),void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=.5);var o=M(n,"x","localResponseNormalization");P(4===o.rank||3===o.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."}),P(hr(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var s=o,a=!1;3===o.rank&&(a=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=H.runKernelFunc(function(c,d){var f=c.localResponseNormalization4D(s,t,e,r,i);return d([s,f]),f},{x4D:s},function(c,d){var f=d[0],p=d[1];return{x4D:function(){return H.runKernelFunc(function(g){return g.LRNGrad(c,f,p,t,e,r,i)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),p3=W({norm_:function(n,t,e,r){void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===r&&(r=!1);var i=function a(u,c,d){if(void 0===d&&(d=null),0===u.rank)return u.abs();if(1!==u.rank&&null===d)return a(u.reshape([-1]),c,d);if(1===u.rank||"number"==typeof d||Array.isArray(d)&&1===d.length){if(1===c)return u.abs().sum(d);if(c===1/0)return u.abs().max(d);if(c===-1/0)return u.abs().min(d);if("euclidean"===c||2===c)return u.abs().pow(We(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}if(Array.isArray(d)&&2===d.length){if(1===c)return u.abs().sum(d[0]).max(d[1]-1);if(c===1/0)return u.abs().sum(d[1]).max(d[0]);if(c===-1/0)return u.abs().sum(d[1]).min(d[0]);if("fro"===c||"euclidean"===c)return u.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}throw new Error("Error in norm: invalid axis: "+d)}(n=M(n,"x","norm"),t,e),o=i.shape;if(r){var s=Gr(e,n.shape);o=_o(i.shape,s)}return i.reshape(o)}}),DQ=W({basicLSTMCell_:function(n,t,e,r,i,o){var s=M(n,"forgetBias","basicLSTMCell"),a=M(t,"lstmKernel","basicLSTMCell"),u=M(e,"lstmBias","basicLSTMCell"),c=M(r,"data","basicLSTMCell"),d=M(i,"c","basicLSTMCell"),f=M(o,"h","basicLSTMCell"),p=c.concat(f,1).matMul(a).add(u),v=p.shape[1]/4,y=[p.shape[0],v],w=p.slice([0,0],y),b=p.slice([0,v],y),A=p.slice([0,2*v],y),_=p.slice([0,3*v],y),C=w.sigmoid().mulStrict(b.tanh()).addStrict(d.mulStrict(s.add(A).sigmoid())),E=C.tanh().mulStrict(_.sigmoid());return[C,E]}}),IQ=W({multiRNNCell_:function(n,t,e,r){for(var i=M(t,"data","multiRNNCell"),o=xv(e,"c","multiRNNCell"),s=xv(r,"h","multiRNNCell"),a=i,u=[],c=0;c<n.length;c++){var d=n[c](a,o[c],s[c]);u.push(d[0]),u.push(d[1]),a=d[1]}var f=[],p=[];for(c=0;c<u.length;c+=2)f.push(u[c]),p.push(u[c+1]);return[f,p]}}),SQ=W({movingAverage_:function(n,t,e,r,i){void 0===i&&(i=!0);var o=M(n,"v","movingAverage"),s=M(t,"x","movingAverage"),a=M(e,"decay","movingAverage");QO(o,s),P(qr(o.shape,s.shape),function(){return"Shape mismatch in v and x"});var u=We(1),c=u.sub(a),d=s.sub(o).mul(c);if(i){P(null!=r,function(){return"When using zeroDebias: true, step is required."});var f=M(r,"step","movingAverage");d=d.div(u.sub(Nb(a,f)))}return o.add(d)}}),TQ=W({stridedSlice_:function(n,t,e,r,i,o,s,a,u){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==s)throw new Error("ellipsis mask is not yet supported");var c=M(n,"x","stridedSlice"),d=HE(a),f=c.shape.slice();d.forEach(function(w){t[w]=0,e[w]=1,f.splice(w,0,1)}),c=c.reshape(f);for(var p=0;p<c.rank;p++)t[p]=BN(i,t,r,c.shape,p),e[p]=LN(o,e,r,c.shape,p),r[p]=r[p]||1;var g=HE(u);g.forEach(function(w){e[w]=t[w]+1,r[w]=1});var v=Ab(t,e,r),y=v.filter(function(w,b){return-1===g.indexOf(b)});return r.every(function(w){return 1===w})?vu(c,t,v).reshape(y):H.runKernelFunc(function(w){return w.stridedSlice(c,t,e,r)},{$x:c}).reshape(y)}}),RQ=W({topk_:function(n,t,e){void 0===t&&(t=1),void 0===e&&(e=!0);var r=M(n,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var o=H.runKernelFunc(function(s){return s.topk(r,t,e)},{$x:r});return{values:o[0],indices:o[1]}}}),MQ=W({scatterND_:function(n,t,e){var r=M(n,"indices","scatterND","int32"),i=M(t,"updates","scatterND");return NN(i,r,e),H.runKernelFunc(function(o){return o.scatterND(r,i,e)},{indices:r,updates:i},null,"ScatterNd",{shape:e})}}),gD=W({fft_:function(n){P("complex64"===n.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."});var t=n.shape[n.shape.length-1],r=n.as2D(n.size/t,t);return H.runKernelFunc(function(i){return i.fft(r)},{input:n}).reshape(n.shape)}}),Ub=W({ifft_:function(n){P("complex64"===n.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."});var t=n.shape[n.shape.length-1],r=n.as2D(n.size/t,t);return H.runKernelFunc(function(i){return i.ifft(r)},{input:n}).reshape(n.shape)}}),mD=W({rfft_:function(n,t){P("float32"===n.dtype,function(){return"The dtype for rfft() must be real value but got "+n.dtype});var e,r=n.shape[n.shape.length-1],i=n.size/r;if(null!=t&&t<r){var o=n.shape.map(function(b){return 0}),s=n.shape.map(function(b){return b});s[n.shape.length-1]=t,e=n.slice(o,s),r=t}else if(null!=t&&t>r){var a=n.shape.map(function(b){return b});a[n.shape.length-1]=t-r,e=n.concat(ar(a),n.shape.length-1),r=t}else e=n;var u=e.zerosLike(),c=ki(e,u).as2D(i,r),d=gD(c),f=Math.floor(r/2)+1,p=Js(d),g=gu(d),v=p.split([f,r-f],p.shape.length-1),y=g.split([f,r-f],g.shape.length-1),w=e.shape.slice();return w[e.shape.length-1]=f,ki(v[0],y[0]).reshape(w)}}),g3=W({irfft_:function(n){var t=n.shape[n.shape.length-1],e=n.size/t;if(t<=2){var r=n.as2D(e,t),i=Ub(r);return Js(i)}var o=[e,2*(t-1)],s=Js(n).as2D(e,t),a=gu(n).as2D(e,t),u=s.slice([0,1],[e,t-2]).reverse(1),c=a.slice([0,1],[e,t-2]).reverse(1).mul(We(-1)),d=s.concat(u,1),f=a.concat(c,1);return r=ki(d,f).as2D(o[0],o[1]),i=Ub(r),Js(i)}}),kQ=Object.freeze({fft:gD,ifft:Ub,rfft:mD,irfft:g3}),PQ=W({sparseToDense_:function(n,t,e,r){void 0===r&&(r=0);var i=M(n,"sparseIndices","sparseToDense","int32"),o=M(t,"sparseValues","sparseToDense"),s=M(r,"defaultValue","sparseToDense",o.dtype);return function(a,u,c,d){if("int32"!==a.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var f=a.rank>0?a.shape[0]:1,p=a.rank>1?a.shape[1]:1;if(c.length!==p)throw new Error("outputShape has incorrect number of elements:, "+c.length+", should be: "+p+".");if(0!==u.rank&&(1!==u.rank||u.size!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,e,s),H.runKernelFunc(function(a){return a.sparseToDense(i,o,e,s)},{$sparseIndices:i,$sparseValues:o,$defaultValue:s})}}),OQ=W({gatherND_:function(n,t){var e=M(t,"indices","gatherND","int32"),r=M(n,"x","gatherND");return H.runKernelFunc(function(i){return i.gatherND(r,e)},{x:r,indices:e},null,"GatherNd")}}),NQ=W({diag_:function(n){var t=M(n,"x","diag").flatten(),e=n.shape.concat(n.shape);return H.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(e)}}),FQ=W({dropout_:function(n,t,e,r){var i=M(n,"x","dropout");if(P("float32"===i.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),P(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),0===t)return n instanceof Hn?i.clone():i;var o=function(u,c){if(null==c)return u.shape.slice();if(qr(u.shape,c))return c;if(u.shape.length===c.length){for(var d=[],f=0;f<u.shape.length;f++)d.push(null==c[f]&&null!=u.shape[f]?u.shape[f]:c[f]);return d}return c}(i,e),s=1-t,a=TN(o,0,1,"float32",r).add(s).floor().div(s);return i.mul(a)}});function m3(n,t,e){for(var r=1-n%2,i=new Float32Array(n),o=0;o<n;++o){var s=2*Math.PI*o/(n+r-1);i[o]=t-e*Math.cos(s)}return Kr(i,"float32")}var Zi,vD=W({hannWindow_:function(n){return m3(n,.5,.5)}}),v3=W({hammingWindow_:function(n){return m3(n,.54,.46)}}),yD=W({frame_:function(n,t,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var o=0,s=[];o+t<=n.size;)s.push(vu(n,o,t)),o+=e;if(r)for(;o<n.size;){var a=o+t-n.size,u=oi([vu(n,o,t-a),mu([a],i)]);s.push(u),o+=e}return 0===s.length?El([],[0,t]):oi(s).as2D(s.length,t)}}),y3=W({stft_:function(n,t,e,r,i){void 0===i&&(i=vD),null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))));for(var s=yD(n,t,e),a=Ji(s,i(t)),u=[],c=0;c<s.shape[0];c++)u.push(mD(a.slice([c,0],[1,t]),r));return oi(u)}}),BQ=Object.freeze({hannWindow:vD,hammingWindow:v3,frame:yD,stft:y3});!function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Zi||(Zi={}));var UQ=W({absoluteDifference_:function(n,t,e,r){void 0===r&&(r=Zi.SUM_BY_NONZERO_WEIGHTS);var i=M(n,"labels","absoluteDifference"),o=M(t,"predictions","absoluteDifference"),s=null;null!=e&&(s=M(e,"weights","absoluteDifference")),fn(i.shape,o.shape,"Error in absoluteDifference: ");var a=i.sub(o).abs();return yc(a,s,r)}}),yc=W({computeWeightedLoss_:function(n,t,e){void 0===e&&(e=Zi.SUM_BY_NONZERO_WEIGHTS);var r=M(n,"losses","computeWeightedLoss"),i=null;null!=t&&(i=M(t,"weights","computeWeightedLoss"));var o=null==i?r:r.mul(i);if(e===Zi.NONE)return o;if(e===Zi.SUM)return o.sum();if(e===Zi.MEAN){if(null==i)return o.mean();var s=r.size/i.size,a=o.sum().div(i.sum());return s>1?a.div(We(s)):a}if(e===Zi.SUM_BY_NONZERO_WEIGHTS){if(null==i)return o.sum().div(We(r.size));var u=i.mul(yp(r.shape)).notEqual(We(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+e)}}),zQ=W({cosineDistance_:function(n,t,e,r,i){void 0===i&&(i=Zi.SUM_BY_NONZERO_WEIGHTS);var o=M(n,"labels","cosineDistance"),s=M(t,"predictions","cosineDistance"),a=null;null!=r&&(a=M(r,"weights","cosineDistance")),fn(o.shape,s.shape,"Error in cosineDistance: ");var u=We(1).sub(o.mul(s).sum(e,!0));return yc(u,a,i)}}),jQ=W({hingeLoss_:function(n,t,e,r){void 0===r&&(r=Zi.SUM_BY_NONZERO_WEIGHTS);var i=M(n,"labels","hingeLoss"),o=M(t,"predictions","hingeLoss"),s=null;null!=e&&(s=M(e,"weights","hingeLoss")),fn(i.shape,o.shape,"Error in hingeLoss: ");var a=We(1);i=We(2).mul(i).sub(a);var u=a.sub(i.mul(o)).relu();return yc(u,s,r)}}),HQ=W({huberLoss_:function(n,t,e,r,i){void 0===r&&(r=1),void 0===i&&(i=Zi.SUM_BY_NONZERO_WEIGHTS);var o=M(n,"labels","huberLoss"),s=M(t,"predictions","huberLoss"),a=null;null!=e&&(a=M(e,"weights","huberLoss")),fn(o.shape,s.shape,"Error in huberLoss: ");var u=We(r),c=s.sub(o).abs(),d=YF(c,u),f=c.sub(d),p=We(.5).mul(d.square()).add(u.mul(f));return yc(p,a,i)}}),WQ=W({logLoss_:function(n,t,e,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=Zi.SUM_BY_NONZERO_WEIGHTS);var o=M(n,"labels","logLoss"),s=M(t,"predictions","logLoss"),a=null;null!=e&&(a=M(e,"weights","logLoss")),fn(o.shape,s.shape,"Error in logLoss: ");var u=We(1),c=We(r),d=o.mul(s.add(c).log()).neg().sub(u.sub(o).mul(u.sub(s).add(c).log()));return yc(d,a,i)}}),VQ=W({meanSquaredError_:function(n,t,e,r){void 0===r&&(r=Zi.SUM_BY_NONZERO_WEIGHTS);var i=M(n,"labels","meanSquaredError"),o=M(t,"predictions","meanSquaredError"),s=null;null!=e&&(s=M(e,"weights","meanSquaredError")),fn(i.shape,o.shape,"Error in meanSquaredError: ");var a=i.squaredDifference(o);return yc(a,s,r)}}),qQ=W({sigmoidCrossEntropy_:function(n,t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=Zi.SUM_BY_NONZERO_WEIGHTS);var o=M(n,"multiClassLabels","sigmoidCrossEntropy"),s=M(t,"logits","sigmoidCrossEntropy"),a=null;if(null!=e&&(a=M(e,"weights","sigmoidCrossEntropy")),fn(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=We(r),c=We(1),d=We(.5);o=o.mul(c.sub(u)).add(d.mul(u))}var f=function(p,g){var v=M(p,"labels","sigmoidCrossEntropyWithLogits"),y=M(g,"logits","sigmoidCrossEntropyWithLogits");fn(v.shape,y.shape,"Error in sigmoidCrossEntropyWithLogits: ");var w=y.relu(),b=y.mul(v),A=y.abs().neg().exp().log1p();return w.sub(b).add(A)}(o,s);return yc(f,a,i)}}),GQ=W({softmaxCrossEntropy_:function(n,t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=Zi.SUM_BY_NONZERO_WEIGHTS);var o=M(n,"onehotLabels","softmaxCrossEntropy"),s=M(t,"logits","softmaxCrossEntropy"),a=null;if(null!=e&&(a=M(e,"weights","softmaxCrossEntropy")),fn(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var u=We(r),c=We(1),d=We(o.shape[1]);o=o.mul(c.sub(u)).add(u.div(d))}var f=function(p,g,v){if(void 0===v&&(v=-1),-1===v&&(v=g.rank-1),v!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+v);return xb(function(y,w,b){var A=w.logSumExp([v],!0),_=w.toFloat().sub(A);return b([y,_]),{value:_.mul(y).neg().sum([v]),gradFunc:function(C,E){var T=E[0],O=E[1],N=_o(C.shape,[v]);return[C.reshape(N).mul(T.toFloat().sub(O.exp())),C.reshape(N).mul(O.exp().sub(T.toFloat()))]}}})(p,g)}(o,s);return yc(f,a,i)}}),KQ=Object.freeze({get Reduction(){return Zi},absoluteDifference:UQ,computeWeightedLoss:yc,cosineDistance:zQ,hingeLoss:jQ,huberLoss:HQ,logLoss:WQ,meanSquaredError:VQ,sigmoidCrossEntropy:qQ,softmaxCrossEntropy:GQ});function w3(n,t){return void 0===t&&(t=!1),H.tidy(function(){if(2!==n.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var e=n.shape[0],r=n.shape[1],i=SN(e),o=n.clone(),s=El([[1]],[1,1]),a=s.clone(),u=e>=r?r:e,c=function(f){var p,g=o,v=a,y=i;p=H.tidy(function(){var w=o.slice([f,f],[e-f,1]),b=w.norm(),A=o.slice([f,f],[1,1]),_=El([[-1]]).where(A.greater(0),El([[1]])),C=A.sub(_.mul(b)),E=w.div(C);a=1===E.shape[0]?s.clone():s.concat(E.slice([1,0],[E.shape[0]-1,E.shape[1]]),0);var T=_.matMul(C).div(b).neg(),O=o.slice([f,0],[e-f,r]),N=T.mul(a);if(0===f)o=O.sub(N.matMul(a.transpose().matMul(O)));else{var B=O.sub(N.matMul(a.transpose().matMul(O)));o=o.slice([0,0],[f,r]).concat(B,0)}var F=i.slice([0,f],[e,i.shape[1]-f]);if(0===f)i=F.sub(F.matMul(a).matMul(N.transpose()));else{var X=F.sub(F.matMul(a).matMul(N.transpose()));i=i.slice([0,0],[e,f]).concat(X,1)}return[a,o,i]}),a=p[0],o=p[1],i=p[2],Qo([g,v,y])},d=0;d<u;++d)c(d);return!t&&e>r&&(i=i.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[i,o]})}var QQ=W({bandPart_:function(n,t,e){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var r=M(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),s=o[0],a=o[1];if(!(t<=s))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+s+").");if(!(e<=a))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+a+").");t<0&&(t=s),e<0&&(e=a);var u=gb(0,s,1,"int32").reshape([-1,1]),c=gb(0,a,1,"int32"),d=ai(u,c),f=Ob(d.lessEqual(We(+t,"int32")),d.greaterEqual(We(-e,"int32"))),p=ar([s,a],r.dtype);return As(si(r.reshape([-1,s,a])).map(function(g){return lf(f,g,p)})).reshape(i)}}),YQ=W({gramSchmidt_:function(n){var t;if(Array.isArray(n)){t=!1,P(null!=n&&n.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=n[0].shape[0],r=function(u){P(n[u].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[u].shape[0]+" vs. "+e+")"})},i=1;i<n.length;++i)r(i)}else t=!0,n=BE(n,n.shape[0],0).map(function(u){return MN(u,[0])});P(n.length<=n[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."});var o=[],s=n,a=function(u){o.push(H.tidy(function(){var c=s[u];if(u>0)for(var d=0;d<u;++d){var f=l3(o[d].mulStrict(c)).mul(o[d]);c=c.sub(f)}return c.div(p3(c,"euclidean"))}))};for(i=0;i<n.length;++i)a(i);return t?As(o,0):o}}),XQ=W({qr_:function(n,t){if(void 0===t&&(t=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(2===n.rank)return w3(n,t);var e=n.shape.slice(0,n.shape.length-2).reduce(function(s,a){return s*a}),r=si(n.reshape([e,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],o=[];return r.forEach(function(s){var a=w3(s,t),c=a[1];i.push(a[0]),o.push(c)}),[As(i,0).reshape(n.shape),As(o,0).reshape(n.shape)]}}),JQ=Object.freeze({bandPart:QQ,gramSchmidt:YQ,qr:XQ});function zb(n,t,e,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);var s=n.shape[0];return e=Math.min(e,s),P(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),P(2===n.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"}),P(4===n.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]}),P(1===t.rank,function(){return"scores must be a 1D tensor"}),P(t.shape[0]===s,function(){return"scores has incompatible shape with boxes. Expected "+s+", but was "+t.shape[0]}),P(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var ZQ=W({resizeBilinear_:function(n,t,e){void 0===e&&(e=!1);var r=M(n,"images","resizeBilinear");P(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(2===t.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=t[0],a=t[1],u=H.runKernelFunc(function(c,d){return d([i]),c.resizeBilinear(i,s,a,e)},{x:i},function(c,d){return{x:function(){return H.runKernelFunc(function(f){return f.resizeBilinearBackprop(c,d[0],e)},{})}}},"ResizeBilinear",{alignCorners:e,newHeight:s,newWidth:a});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),$Q=W({resizeNearestNeighbor_:function(n,t,e){void 0===e&&(e=!1);var r=M(n,"images","resizeNearestNeighbor");P(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(2===t.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),P("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=t[0],a=t[1],u=H.runKernelFunc(function(c,d){return d([i]),c.resizeNearestNeighbor(i,s,a,e)},{batchImages:i},function(c,d){return{batchImages:function(){return H.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(c,d[0],e)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),eY=W({nonMaxSuppression_:function(n,t,e,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var o=M(n,"boxes","nonMaxSuppression"),s=M(t,"scores","nonMaxSuppression"),a=zb(o,s,e,r,i);return H.runKernelFunc(function(c){return c.nonMaxSuppression(o,s,e,r,i)},{boxes:o,scores:s},null,"NonMaxSuppressionV3",{maxOutputSize:e=a.maxOutputSize,iouThreshold:r=a.iouThreshold,scoreThreshold:i=a.scoreThreshold})}}),nY=W({nonMaxSuppressionWithScore_:function(n,t,e,r,i,o){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===o&&(o=0);var s=M(n,"boxes","nonMaxSuppression"),a=M(t,"scores","nonMaxSuppression"),u=zb(s,a,e,r,i,o),c={maxOutputSize:e=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},d=H.runKernel("NonMaxSuppressionV5",{boxes:s,scores:a},c);return{selectedIndices:d[0],selectedScores:d[1]}}}),iY=W({cropAndResize_:function(n,t,e,r,i,o){var s=M(n,"image","cropAndResize"),a=M(t,"boxes","cropAndResize","float32"),u=M(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var c=a.shape[0];return P(4===s.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),P(2===a.rank&&4===a.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+a.shape+"."}),P(1===u.rank&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+a.shape+"."}),P(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),P(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),P("bilinear"===i||"nearest"===i,function(){return"method must be bilinear or nearest, but was "+i}),H.runKernelFunc(function(d,f){return d.cropAndResize(s,a,u,r,i,o)},{images:s,boxes:a,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),wD=Object.freeze({resizeBilinear:ZQ,resizeNearestNeighbor:$Q,nonMaxSuppression:eY,nonMaxSuppressionAsync:function(n,t,e,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),nt(this,void 0,void 0,function(){var o,s,a,u,f;return rt(this,function(p){switch(p.label){case 0:return o=M(n,"boxes","nonMaxSuppressionAsync"),s=M(t,"scores","nonMaxSuppressionAsync"),a=zb(o,s,e,r,i),e=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return u=p.sent(),f=XE(u[0],u[1],e,r,i),o!==n&&o.dispose(),s!==t&&s.dispose(),[2,f]}})})},nonMaxSuppressionWithScore:nY,nonMaxSuppressionWithScoreAsync:function(n,t,e,r,i,o){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===o&&(o=0),nt(this,void 0,void 0,function(){var s,a,u,c,p;return rt(this,function(g){switch(g.label){case 0:return s=M(n,"boxes","nonMaxSuppressionAsync"),a=M(t,"scores","nonMaxSuppressionAsync"),u=zb(s,a,e,r,i,o),e=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([s.data(),a.data()])];case 1:return c=g.sent(),p=JE(c[0],c[1],e,r,i,o),s!==n&&s.dispose(),a!==t&&a.dispose(),[2,p]}})})},cropAndResize:iY}),bD=function(n,t){return!(n>0)||"linear"===t},AD=function(n,t,e){if(null==e||"linear"===e)return n;if("relu"===e)return n.mul(t.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},xD=function(n,t){var e=t,r=Qr(n.shape,t.shape);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},CD=function(n,t,e){if("linear"===t)return n;if("relu"===t)return pr(n);if("elu"===t)return d3(n);if("relu6"===t)return h3(n);if("prelu"===t)return f3(n,e);throw new Error("Unknown fused activation "+t+".")},oY=W({fusedMatMul_:function(n){var t,e=n.a,r=n.b,i=n.transposeA,o=void 0!==i&&i,s=n.transposeB,a=void 0!==s&&s,u=n.bias,c=n.activation,d=void 0===c?"linear":c,f=n.preluActivationWeights;if(!1===bD(H.state.gradientDepth,d)){var p=Bb(e,r,o,a);return null!=u&&(p=en(p,u)),CD(p,d,f)}var g=M(e,"a","fused matMul"),v=M(r,"b","fused matMul");t=lr(g,v),g=t[0],v=t[1];var y=o?g.shape[g.rank-2]:g.shape[g.rank-1],w=a?v.shape[v.rank-1]:v.shape[v.rank-2],b=o?g.shape[g.rank-1]:g.shape[g.rank-2],A=a?v.shape[v.rank-2]:v.shape[v.rank-1],_=g.shape.slice(0,-2),C=v.shape.slice(0,-2),E=at(_),T=at(C);P(g.rank>=2&&v.rank>=2&&g.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+v.rank+"."}),P(qr(_,C),function(){return"Error in fused matMul: outer dimensions ("+_+") and ("+C+") of Tensors with shapes "+g.shape+" and "+v.shape+" must match."}),P(y===w,function(){return"Error in fused matMul: inner shapes ("+y+") and ("+w+") of Tensors with shapes "+g.shape+" and "+v.shape+" and transposeA="+o+" and transposeB="+a+" must match."});var O,N,B=g.shape.slice(0,-2).concat([b,A]),F=o?g.as3D(E,y,b):g.as3D(E,b,y),X=a?v.as3D(T,A,w):v.as3D(T,w,A);null!=u&&$t(B,(O=lr(O=M(u,"bias","fused matMul"),g)[0]).shape),null!=f&&(N=M(f,"prelu weights","fused matMul"));var G={a:F,b:X};return null!=u&&(G.bias=O),null!=f&&(G.preluActivationWeights=N),H.runKernelFunc(function(fe,he){var $=fe.fusedBatchMatMul({a:F,b:X,transposeA:o,transposeB:a,bias:O,activation:d,preluActivationWeights:N});return he([F,X,$]),$},G,function(fe,he){var $=he[0],ee=he[1],ce=AD(fe,he[2],d),xe={};return null!=u&&(xe={bias:function(){return xD(O,ce)}}),Object.assign(o||a?!o&&a?{a:function(){return ce.matMul(ee,!1,!1)},b:function(){return ce.matMul($,!0,!1)}}:o&&!a?{a:function(){return ee.matMul(ce,!1,!0)},b:function(){return $.matMul(ce,!1,!1)}}:{a:function(){return ee.matMul(ce,!0,!0)},b:function(){return ce.matMul($,!0,!0)}}:{a:function(){return ce.matMul(ee,!1,!0)},b:function(){return $.matMul(ce,!0,!1)}},xe)},"_FusedMatMul",{transposeA:o,transposeB:a,activation:d},[F,X],[!0]).reshape(B)}}),sY=W({fusedConv2d_:function(n){var t=n.x,e=n.filter,r=n.strides,i=n.pad,o=n.dataFormat,s=void 0===o?"NHWC":o,a=n.dilations,u=void 0===a?[1,1]:a,c=n.dimRoundingMode,d=n.bias,f=n.activation,p=void 0===f?"linear":f,g=n.preluActivationWeights;if(!1===bD(H.state.gradientDepth,p=p||"linear")){var v=$s(t,e,r,i,s,u,c);return null!=d&&(v=en(v,d)),CD(v,p,g)}var y=M(t,"x","conv2d"),w=M(e,"filter","conv2d"),b=y,A=!1;3===y.rank&&(A=!0,b=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),P(4===b.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+b.rank+"."}),P(4===w.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+w.rank+"."}),null!=c&&P(hr(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+i+"."}),P(b.shape[3]===w.shape[2],function(){return"Error in conv2d: depth of input ("+b.shape[3]+") must match input depth for filter "+w.shape[2]+"."}),P(Eo(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),P("NHWC"===s,function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."});var _,C,E=Dl(b.shape,w.shape,r,u,i,c);null!=d&&(_=lr(_=M(d,"bias","fused conv2d"),y)[0],$t(E.outShape,_.shape)),null!=g&&(C=M(g,"prelu weights","fused conv2d"));var T={x:b,filter:w};null!=d&&(T.bias=_),null!=g&&(T.preluActivationWeights=C);var N=H.runKernelFunc(function(B,F){var X=B.fusedConv2d({input:b,filter:w,convInfo:E,bias:_,activation:p,preluActivationWeights:C});return F([w,b,X]),X},T,function(B,F){var G=F[0],re=F[1],he=AD(B,F[2],p);P(af(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var $={};return null!=d&&($={bias:function(){return xD(_,he)}}),Object.assign({x:function(){return r3(re.shape,he,G,r,i)},filter:function(){return hD(re,he,G.shape,r,i)}},$)},"FusedConv2D",{convInfo:E,activation:p},[w,b],[!0]);return A?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),aY=W({fusedDepthwiseConv2d_:function(n){var t=n.x,e=n.filter,r=n.strides,i=n.pad,o=n.dataFormat,s=void 0===o?"NHWC":o,a=n.dilations,u=void 0===a?[1,1]:a,c=n.dimRoundingMode,d=n.bias,f=n.activation,p=void 0===f?"linear":f,g=n.preluActivationWeights;if(!1===bD(H.state.gradientDepth,p)){var v=Fb(t,e,r,i,s,u,c);return null!=d&&(v=en(v,d)),CD(v,p,g)}var y=M(t,"x","depthwiseConv2d"),w=M(e,"filter","depthwiseConv2d"),b=y,A=!1;3===y.rank&&(A=!0,b=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),P(4===b.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+b.rank+"."}),P(4===w.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+w.rank+"."}),P(b.shape[3]===w.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+b.shape[3]+") must match the inChannels dimension in filter "+w.shape[2]+"."}),null==u&&(u=[1,1]),P(Eo(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),null!=c&&P(hr(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+i+"."});var _,C,E=Dl(b.shape,w.shape,r,u,i,c,!0);null!=d&&(_=lr(_=M(d,"bias","fused conv2d"),y)[0],$t(E.outShape,_.shape)),null!=g&&(C=M(g,"prelu weights","fused depthwiseConv2d"));var T={x:b,filter:w};null!=d&&(T.bias=_),null!=g&&(T.preluActivationWeights=C);var N=H.runKernelFunc(function(B,F){var X=B.fusedDepthwiseConv2D({input:b,filter:w,convInfo:E,bias:_,activation:p,preluActivationWeights:C});return F([w,b,X]),X},T,function(B,F){P(af(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var X=F[0],G=F[1],fe=AD(B,F[2],p),he={};return null!=d&&(he={bias:function(){return xD(_,fe)}}),Object.assign({x:function(){return i3(G.shape,fe,X,E)},filter:function(){return o3(G,fe,X.shape,E)}},he)},"FusedDepthwiseConv2D",{convInfo:E,activation:p},[w,b],[!0]);return A?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),uY=Object.freeze({matMul:oY,conv2d:sY,depthwiseConv2d:aY}),cY=Object.freeze({image:wD,linalg:JQ,losses:KQ,spectral:kQ,fused:uY,signal:BQ,square:WG,squaredDifference:UF,conv1d:ZK,conv2d:$s,conv3d:$K,depthwiseConv2d:Fb,separableConv2d:pD,conv2dTranspose:eQ,conv3dTranspose:tQ,op:W,batchNormalization2d:wK,batchNormalization3d:bK,batchNormalization4d:AK,batchNormalization:xK,batchNorm:qF,batchNorm2d:CK,batchNorm3d:_K,batchNorm4d:EK,booleanMaskAsync:function(n,t,e){return nt(this,void 0,void 0,function(){var r,i,o,s,a,u,c,d,f,p,g,v,y;return rt(this,function(w){switch(w.label){case 0:for(r=M(n,"tensor","boolMask"),i=M(t,"mask","boolMask","bool"),o=e??0,a=r.shape,P((s=i.rank)>0,function(){return"mask cannot be scalar"}),fn(a.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=o;c<o+s;c++)u*=a[c];return d=a.slice(0,o).concat([u],a.slice(o+s)),f=r.reshape(d),p=i.reshape([-1]),[4,KF(p)];case 1:return g=w.sent(),v=g.squeeze([1]),y=dD(f,v,o),n!==r&&r.dispose(),t!==i&&i.dispose(),v.dispose(),f.dispose(),p.dispose(),g.dispose(),[2,y]}})})},complex:ki,real:Js,imag:gu,concat:oi,concat1d:R7,concat2d:M7,concat3d:k7,concat4d:P7,split:BE,matMul:Bb,dot:nQ,outerProduct:rQ,reverse:Mv,reverse1d:iQ,reverse2d:oQ,reverse3d:sQ,reverse4d:aQ,maxPool:wi,avgPool:kv,pool:uQ,maxPool3d:cQ,avgPool3d:lQ,slice:vu,slice1d:dQ,slice2d:fQ,slice3d:u3,slice4d:hQ,abs:VG,acos:qG,acosh:GG,asin:KG,asinh:QG,atan:YG,atanh:XG,ceil:JG,clipByValue:uD,cos:ZG,cosh:$G,erf:eK,exp:cD,expm1:tK,floor:nK,log:rK,log1p:iK,logSigmoid:oK,neg:Mb,reciprocal:sK,round:aK,rsqrt:zF,sigmoid:jF,sign:uK,isNaN:cK,isInf:lK,isFinite:dK,sin:fK,sinh:hK,softplus:pK,sqrt:gK,step:mK,tan:vK,tanh:yK,all:pQ,any:gQ,argMax:mQ,argMin:vQ,logSumExp:yQ,max:Lb,mean:wQ,min:bQ,moments:AQ,sum:l3,prod:xQ,equal:XF,equalStrict:jK,greater:HK,greaterEqual:JF,greaterEqualStrict:WK,greaterStrict:VK,less:qK,lessEqual:GK,lessEqualStrict:KK,lessStrict:QK,notEqual:YK,notEqualStrict:XK,add:en,addN:SK,addStrict:TK,atan2:RK,div:Pa,divNoNan:MK,divStrict:kK,floorDiv:QF,maximum:lD,maximumStrict:PK,minimum:YF,minimumStrict:OK,mod:NK,modStrict:FK,mul:Ji,mulStrict:BK,pow:Nb,powStrict:LK,squaredDifferenceStrict:UK,sub:ai,subStrict:zK,elu:d3,leakyRelu:CQ,prelu:f3,relu:pr,relu6:h3,selu:_Q,logicalAnd:Ob,logicalNot:DK,logicalOr:GF,logicalXor:IK,where:lf,whereAsync:KF,buffer:Lt,print:function H7(n,t){void 0===t&&(t=!1),console.log(n.toString(t))},batchToSpaceND:IN,broadcastTo:W7,cast:V7,clone:q7,cumsum:G7,depthToSpace:K7,expandDims:Zs,eye:SN,multinomial:Q7,oneHot:UE,pad:sf,pad1d:Y7,pad2d:X7,pad3d:J7,pad4d:Z7,rand:$7,randomNormal:e9,randomGamma:t9,randomUniform:TN,reshape:Ma,spaceToBatchND:RN,squeeze:MN,stack:As,tile:wp,truncatedNormal:n9,unstack:si,setdiff1dAsync:function(n,t){return nt(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,d,f;return rt(this,function(p){switch(p.label){case 0:return e=M(n,"x","setdiff1d"),r=M(t,"y","setdiff1d"),P(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),P(1===e.rank,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),P(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return i=p.sent(),[4,r.data()];case 2:for(o=p.sent(),s=new Set(o),a=0,d=0;d<i.length;d++)s.has(i[d])||a++;for(u=new hv([a],e.dtype),c=new hv([a],"int32"),d=0,f=0;d<i.length;d++)s.has(i[d])||(u.values[f]=i[d],c.values[f]=d,f++);return[2,[u.toTensor(),c.toTensor()]]}})})},fill:mu,linspace:function T7(n,t,e){if(e<=0)throw new Error("The number of values should be positive.");return H.runKernelFunc(function(r){return r.linspace(n,t,e)},{})},ones:yp,range:gb,scalar:We,tensor:Pi,tensor1d:Kr,tensor2d:El,tensor3d:FE,tensor4d:Xo,tensor5d:function D7(n,t,e){if(Zd(n),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=pu(n,e);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return _l(n,t,r,e)},tensor6d:function I7(n,t,e){if(Zd(n),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=pu(n,e);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return _l(n,t=t||r,r,e)},variable:function S7(n,t,e,r){return void 0===t&&(t=!0),H.makeVariable(n,t,e,r)},zeros:ar,onesLike:DN,zerosLike:hn,transpose:Il,softmax:gc,logSoftmax:o9,localResponseNormalization:EQ,norm:p3,gather:dD,unsortedSegmentSum:e3,basicLSTMCell:DQ,multiRNNCell:IQ,movingAverage:SQ,stridedSlice:TQ,topk:RQ,scatterND:MQ,fft:gD,ifft:Ub,rfft:mD,irfft:g3,sparseToDense:PQ,gatherND:OQ,diag:NQ,dropout:FQ,hannWindow:vD,hammingWindow:v3,frame:yD,stft:y3,inTopKAsync:function(n,t,e){return void 0===e&&(e=1),nt(this,void 0,void 0,function(){var r,i,o,s,a,u,c,d,f,p,g,v,y,w;return rt(this,function(b){switch(b.label){case 0:return r=M(n,"predictions","inTopK"),i=M(t,"targets","inTopK"),P(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),P(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),fn(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],P(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,r.data()];case 1:return s=b.sent(),[4,i.data()];case 2:for(a=b.sent(),d=(u=[s.length/o,o])[1],f=pp("bool",c=u[0]),p=0;p<c;p++){for(v=s.subarray(g=p*d,g+d),y=[],w=0;w<v.length;w++)y.push({value:v[w],index:w});for(y.sort(function(A,_){return _.value-A.value}),f[p]=0,w=0;w<e;w++)if(y[w].index===a[p]){f[p]=1;break}}return n!==r&&r.dispose(),t!==i&&i.dispose(),[2,Pi(f,i.shape,"bool")]}})})}});function _e(n,t){Array.isArray(n)||(n=[n]),n.forEach(function(e){null!=e&&P("complex64"!==e.dtype,function(){return t+" does not support complex64 tensors."})})}function _D(n,t,e,r){if("linear"===e)return n.linear(t);if("relu"===e)return n.relu(t);if("elu"===e)return n.elu(t);if("relu6"===e)return n.relu6(t);if("prelu"===e)return n.prelu(t,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var lY=function(n){function t(){var e=n.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new UN(e,H),e}return Da(t,n),t.prototype.write=function(e,r,i){this.firstUse&&(this.firstUse=!1,de().get("IS_NODE")&&hb("\n============================\nHi there \u{1f44b}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var o={};return this.data.set(o,{values:e,dtype:i}),o},t.prototype.move=function(e,r,i,o){this.data.set(e,{values:r,dtype:o})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return nt(this,void 0,void 0,function(){return rt(this,function(r){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var r=this.data.get(e),o=r.complexTensors;return"complex64"===r.dtype?YE(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),i=r;if("string"===e.dtype)try{i=r.map(function(o){return cv(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Lt(e.shape,e.dtype,i)},t.prototype.makeOutput=function(e,r,i){var o=this.write(e,r,i);return H.makeTensorFromDataId(o,r,i,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;null!=r&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return nt(this,void 0,void 0,function(){var r;return rt(this,function(i){return r=Sa(),e(),[2,{kernelMs:Sa()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,r){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:H.keep(e.clone()),imag:H.keep(r.clone())},i},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,r,i){if(_e(e,"slice"),WE(e.shape,r,i)){var o=VE(r,e.strides),s=at(i);return Pi(this.readSync(e.dataId).subarray(o,o+s),i,e.dtype)}for(var a=Lt(i,e.dtype),u=this.bufferSync(e),c=0;c<a.size;++c){var d=a.indexToLoc(c).map(function(f,p){return f+r[p]});a.values[c]=u.get.apply(u,d)}return a.toTensor()},t.prototype.stridedSlice=function(e,r,i,o){_e(e,"stridedSlice");var s=Ab(r,i,o);if(s.some(function(g){return 0===g}))return Pi([],s);for(var a=Lt(s,e.dtype),u=this.bufferSync(e),c=0;c<a.size;c++){for(var d=a.indexToLoc(c),f=new Array(d.length),p=0;p<f.length;p++)f[p]=d[p]*o[p]+r[p];a.set.apply(a,[u.get.apply(u,f)].concat(d))}return a.toTensor()},t.prototype.diag=function(e){for(var r=this.readSync(e.dataId),i=Lt([e.size,e.size],e.dtype),o=i.values,s=0;s<r.length;s++)o[s*e.size+s]=r[s];return i.toTensor()},t.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==r&&(o[s++]=e.shape[a]);var u=new Array(e.rank).fill(0),c=e.shape.slice();c[r]=1;var d=new Array(i);for(a=0;a<d.length;a++)u[r]=a,d[a]=this.slice(e,u,c).reshape(o);return d},t.prototype.reverse=function(e,r){_e(e,"reverse");for(var i=Lt(e.shape,e.dtype),o=this.bufferSync(e),s=function(u){var c=i.indexToLoc(u),d=c.slice();r.forEach(function(f){return d[f]=e.shape[f]-1-d[f]}),i.set.apply(i,[o.get.apply(o,d)].concat(c))},a=0;a<i.size;a++)s(a);return i.toTensor()},t.prototype.concat=function(e,r){var i=this;if("complex64"===e[0].dtype){var o=e.map(function(g){return Js(g)}),s=e.map(function(g){return gu(g)});return ki(this.concat(o,r),this.concat(s,r))}var a=e.map(function(g){var v=at(g.shape.slice(r));return g.as2D(-1,v)}),u=tf(a.map(function(g){return g.shape}),1),c=Lt(u,e[0].dtype).values;if(1===a[0].shape[0]){var d=0;a.forEach(function(g){c.set(i.readSync(g.dataId),d),d+=g.size})}else{var f=0;a.forEach(function(g){for(var v=i.readSync(g.dataId),y=0,w=0;w<g.shape[0];++w)for(var b=w*u[1]+f,A=0;A<g.shape[1];++A)c[b+A]=v[y++];f+=g.shape[1]})}var p=tf(e.map(function(g){return g.shape}),r);return Pi(c,p,e[0].dtype)},t.prototype.neg=function(e){return _e(e,"neg"),this.multiply(We(-1),e)},t.prototype.add=function(e,r){return"complex64"===e.dtype||"complex64"===r.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i+s,imag:o+a}}):this.broadcastedBinaryOp(e,r,yi(e.dtype,r.dtype),function(i,o){return i+o})},t.prototype.addN=function(e){var r=this;_e(e,"addN");for(var i=e.map(function(d){return r.readSync(d.dataId)}),o=Lt(e[0].shape,e[0].dtype),s=o.values,a=0;a<e.length;a++)for(var u=i[a],c=0;c<s.length;c++)s[c]+=u[c];return o.toTensor()},t.prototype.softmax=function(e,r){var i=Gr([r],e.shape),o=this.max(e,i),s=_o(o.shape,i),a=this.subtract(e,o.reshape(s)),u=this.exp(a),c=this.sum(u,i).reshape(s);return this.realDivide(u,c)},t.prototype.subtract=function(e,r){return"complex64"===e.dtype||"complex64"===r.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i-s,imag:o-a}}):this.broadcastedBinaryOp(e,r,yi(e.dtype,r.dtype),function(i,o){return i-o})},t.prototype.pow=function(e,r){return _e([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.pow(i,o)})},t.prototype.batchMatMul=function(e,r,i,o){_e([e,r],"matMul");for(var s=i?e.shape[1]:e.shape[2],a=i?e.shape[2]:e.shape[1],u=o?r.shape[1]:r.shape[2],c=e.shape[0],d=this.readSync(e.dataId),f=this.readSync(r.dataId),p=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],g=p[0],v=p[1],y=p[2],w=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],b=w[0],A=w[1],_=w[2],C=a*u,E=Lt([c,a,u],e.dtype),T=E.values,O=this.blockSize,N=0;N<c;N++)for(var B=0;B<a;B+=O)for(var F=0;F<u;F+=O)for(var X=0;X<s;X+=O)for(var G=Math.min(B+O,a),re=Math.min(F+O,u),fe=Math.min(X+O,s),he=B;he<G;he++)for(var $=F;$<re;$++){for(var ee=0,te=X;te<fe;te++)ee+=d[N*g+he*v+te*y]*f[te*b+$*A+N*_];T[N*C+(he*u+$)]+=ee}return E.toTensor()},t.prototype.fusedBatchMatMul=function(e){var a=e.bias,u=e.activation,c=e.preluActivationWeights,d=this.batchMatMul(e.a,e.b,e.transposeA,e.transposeB);return a&&(d=this.add(d,a)),u&&(d=_D(this,d,u,c)),d},t.prototype.multiply=function(e,r){return"complex64"===e.dtype||"complex64"===r.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i*s-o*a,imag:i*a+o*s}}):this.broadcastedBinaryOp(e,r,yi(e.dtype,r.dtype),function(i,o){return i*o})},t.prototype.realDivide=function(e,r){return _e([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",function(i,o){return i/o})},t.prototype.floorDiv=function(e,r){return _e([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",function(i,o){return Math.floor(i/o)})},t.prototype.sum=function(e,r){_e(e,"sum"),Yo("sum",r,e.rank);for(var i=Mi(e.shape,r),s=i[1],a=ar(i[0],yi(e.dtype,"int32")),u=at(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=0,v=0;v<u;++v)g+=d[p+v];c[f]=g}return a},t.prototype.prod=function(e,r){_e(e,"sum");for(var i=Mi(e.shape,r),s=i[1],a=ar(i[0],yi(e.dtype,"int32")),u=at(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=1,v=0;v<u;++v)g*=d[p+v];c[f]=g}return a},t.prototype.unsortedSegmentSum=function(e,r,i){_e(e,"unsortedSegmentSum");for(var o=[],s=e.rank-r.rank,a=0;a<s;++a)r=r.expandDims(a+1);for(a=0;a<i;++a){var u=We(a,"int32"),c=XF(u,r).asType("float32").mul(e).sum(0);o.push(c)}return As(o)},t.prototype.argMin=function(e,r){_e(e,"argMin");var i=[r];Yo("argMin",i,e.rank);for(var o=Mi(e.shape,i),a=o[1],u=ar(o[0],"int32"),c=at(a),d=this.readSync(u.dataId),f=this.readSync(e.dataId),p=0;p<d.length;++p){for(var g=p*c,v=f[g],y=0,w=0;w<c;++w){var b=f[g+w];b<v&&(v=b,y=w)}d[p]=y}return u},t.prototype.argMax=function(e,r){_e(e,"argMax");var i=[r];Yo("argMax",i,e.rank);for(var o=Mi(e.shape,i),a=o[1],u=ar(o[0],"int32"),c=at(a),d=this.readSync(u.dataId),f=this.readSync(e.dataId),p=0;p<d.length;++p){for(var g=p*c,v=f[g],y=0,w=0;w<c;++w){var b=f[g+w];b>v&&(v=b,y=w)}d[p]=y}return u},t.prototype.cumsum=function(e,r,i,o){if(_e(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var s=yi(e.dtype,"int32"),a=ar(e.shape,s),u=this.readSync(a.dataId),c=this.readSync(e.dataId),d=e.shape[e.rank-1],f=o?function(w,b){return w+d-b-1}:function(w,b){return w+b},p=0;p<c.length;p+=d)for(var g=0;g<d;g++){var v=f(p,g);if(0===g)u[v]=i?0:c[v];else{var y=f(p,g-1);u[v]=i?c[y]+u[y]:c[v]+u[y]}}return a},t.prototype.equal=function(e,r){return _e([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i===o?1:0})},t.prototype.notEqual=function(e,r){return _e([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i!==o?1:0})},t.prototype.less=function(e,r){return _e([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<o?1:0})},t.prototype.lessEqual=function(e,r){return _e([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<=o?1:0})},t.prototype.greater=function(e,r){return _e([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>o?1:0})},t.prototype.greaterEqual=function(e,r){return _e([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>=o?1:0})},t.prototype.logicalNot=function(e){_e(e,"logicalNot");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,e.shape,"bool")},t.prototype.logicalAnd=function(e,r){return _e([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i&&o})},t.prototype.logicalOr=function(e,r){return _e([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i||o})},t.prototype.select=function(e,r,i){_e([e,r,i],"select");for(var o=this.readSync(e.dataId),s=this.readSync(r.dataId),a=this.readSync(i.dataId),u=ar(r.shape,yi(r.dtype,i.dtype)),c=this.readSync(u.dataId),d=0,f=0===e.rank||e.rank>1||1===r.rank?1:at(r.shape.slice(1)),p=0;p<o.length;p++)for(var g=0;g<f;g++)c[d++]=1===o[p]?s[p]:a[p];return u},t.prototype.where=function(e){_e([e],"where");var r=this.readSync(e.dataId);return ZE(e.shape,r)},t.prototype.topk=function(e,r,i){return _e(e,"topk"),GN(this.readSync(e.dataId),e.shape,e.dtype,r)},t.prototype.min=function(e,r){_e(e,"min"),Yo("min",r,e.rank);for(var i=Mi(e.shape,r),s=i[1],a=ar(i[0],e.dtype),u=at(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=d[p],v=0;v<u;++v){var y=d[p+v];y<g&&(g=y)}c[f]=g}return a},t.prototype.minimum=function(e,r){return _e([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.min(i,o)})},t.prototype.mod=function(e,r){return _e([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var s=i%o;return i<0&&o<0||i>=0&&o>=0?s:(s+o)%o})},t.prototype.max=function(e,r){_e(e,"max"),Yo("max",r,e.rank);for(var i=Mi(e.shape,r),s=i[1],a=ar(i[0],e.dtype),u=at(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=d[p],v=0;v<u;++v){var y=d[p+v];y>g&&(g=y)}c[f]=g}return a},t.prototype.maximum=function(e,r){return _e([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.max(i,o)})},t.prototype.all=function(e,r){_e(e,"all"),Yo("all",r,e.rank);for(var i=Mi(e.shape,r),s=i[1],a=ar(i[0],e.dtype),u=at(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=d[p],v=0;v<u;++v)g=g&&d[p+v];c[f]=g}return a},t.prototype.any=function(e,r){_e(e,"any"),Yo("any",r,e.rank);for(var i=Mi(e.shape,r),s=i[1],a=ar(i[0],e.dtype),u=at(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*u,g=d[p],v=0;v<u;++v)g=g||d[p+v];c[f]=g}return a},t.prototype.squaredDifference=function(e,r){return _e([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var s=i-o;return s*s})},t.prototype.ceil=function(e){_e(e,"ceil");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.floor=function(e){_e(e,"floor");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.sign=function(e){_e(e,"x");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=r[o]<0?-1:r[o]>0?1:0;return this.makeOutput(i,e.shape,"float32")},t.prototype.isNaN=function(e){_e(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.isInf=function(e){_e(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.isFinite=function(e){_e(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.round=function(e){_e(e,"round");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=Math.floor(r[o]);i[o]=r[o]-s<.5?Math.floor(r[o]):r[o]-s>.5?Math.ceil(r[o]):s%2==0?s:s+1}return this.makeOutput(i,e.shape,"float32")},t.prototype.exp=function(e){_e(e,"exp");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.expm1=function(e){_e(e,"expm1");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.log=function(e){_e(e,"log");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.log(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.log1p=function(e){_e(e,"log1p");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.log1p(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.sqrt=function(e){_e(e,"sqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.sqrt(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.rsqrt=function(e){_e(e,"rsqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/Math.sqrt(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.reciprocal=function(e){_e(e,"reciprocal");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){_e(e,"relu");for(var r=ar(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)i[s]=Math.max(0,o[s]);return r},t.prototype.relu6=function(e){_e(e,"relu");for(var r=ar(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)i[s]=Math.min(Math.max(0,o[s]),6);return r},t.prototype.prelu=function(e,r){return _e([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return i<0?o*i:i})},t.prototype.elu=function(e){_e(e,"elu");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=i[o];r[o]=s>=0?s:Math.exp(s)-1}return this.makeOutput(r,e.shape,"float32")},t.prototype.eluDer=function(e,r){_e([e,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),s=this.readSync(e.dataId),a=0;a<o.length;++a){var u=o[a];i[a]=u>=1?s[a]:s[a]*(u+1)}return this.makeOutput(i,r.shape,"float32")},t.prototype.selu=function(e){_e(e,"selu");for(var o=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>=0?1.0507009873554805*u:1.7580993408473768*(Math.exp(u)-1)}return this.makeOutput(o,e.shape,"float32")},t.prototype.clip=function(e,r,i){_e(e,"clip");for(var o=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>i?i:u<r?r:u}return this.makeOutput(o,e.shape,"float32")},t.prototype.abs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o)r[o]=Math.hypot(i[2*o],i[2*o+1]);return this.makeOutput(r,e.shape,"float32")},t.prototype.int=function(e){_e(e,"int");for(var r=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,e.shape,"int32")},t.prototype.sigmoid=function(e){_e(e,"sigmoid");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,e.shape,"float32")},t.prototype.softplus=function(e){_e(e,"softplus");for(var r=Math.log(1.1920928955078125e-7)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var d,a=o[s]>-r,u=o[s]<r,c=Math.exp(o[s]);d=u?c:a?o[s]:Math.log(1+c),i[s]=d}return this.makeOutput(i,e.shape,"float32")},t.prototype.sin=function(e){_e(e,"sin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.cos=function(e){_e(e,"cos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.tan=function(e){_e(e,"tan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.asin=function(e){_e(e,"asin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.acos=function(e){_e(e,"acos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atan=function(e){_e(e,"atan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atan2=function(e,r){return _e([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.atan2(i,o)})},t.prototype.sinh=function(e){_e(e,"sinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.cosh=function(e){_e(e,"cosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.tanh=function(e){_e(e,"tanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=OO(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.asinh=function(e){_e(e,"asinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.acosh=function(e){_e(e,"acosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atanh=function(e){_e(e,"atanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.erf=function(e){_e(e,"erf");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=Math.sign(i[o]),a=Math.abs(i[o]),u=1/(1+.3275911*a);r[o]=s*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-a*a))}return this.makeOutput(r,e.shape,"float32")},t.prototype.step=function(e,r){void 0===r&&(r=0),_e(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var a=o[s];i[s]=isNaN(a)?NaN:a>0?1:r}return this.makeOutput(i,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var s=e.bias,a=e.activation,u=e.preluActivationWeights,c=this.conv2d(e.input,e.filter,e.convInfo);return s&&(c=this.add(c,s)),a&&(c=_D(this,c,a,u)),c},t.prototype.conv2d=function(e,r,i){_e([e,r],"conv2d");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.padInfo.left,d=i.padInfo.top,f="channelsLast"===i.dataFormat,p=Lt(i.outShape,e.dtype),g=e.strides[0],v=f?e.strides[1]:e.strides[2],y=f?e.strides[2]:1,w=f?1:e.strides[1],b=p.strides[0],A=f?p.strides[1]:p.strides[2],_=f?p.strides[2]:1,C=f?1:p.strides[1],E=this.readSync(e.dataId),T=this.readSync(r.dataId),O=p.values,N=0;N<i.batchSize;++N)for(var B=N*g,F=N*b,X=0;X<i.outHeight;++X)for(var G=F+X*A,re=X*i.strideHeight-d,fe=0;fe<o;fe++){var he=re+fe*a;if(!(he<0||he>=i.inHeight))for(var $=fe*r.strides[0],ee=B+he*v,te=0;te<i.outWidth;++te)for(var ce=G+te*_,xe=te*i.strideWidth-c,je=0;je<s;je++){var Ke=xe+je*u;if(!(Ke<0||Ke>=i.inWidth))for(var ut=ee+Ke*y,ot=$+je*r.strides[1],Vt=0;Vt<i.inChannels;++Vt){for(var Xt=E[ut+Vt*w],_t=0;_t<i.outChannels;++_t)O[ce+_t*C]+=Xt*T[ot+_t];ot+=i.outChannels}}}return p.toTensor()},t.prototype.conv3d=function(e,r,i){for(var o=i.filterDepth,s=i.filterHeight,a=i.filterWidth,u=i.dilationDepth,c=i.dilationHeight,d=i.dilationWidth,f=i.padInfo.front,p=i.padInfo.left,g=i.padInfo.top,v=Lt(i.outShape,e.dtype),y=this.readSync(e.dataId),w=this.readSync(r.dataId),b=v.values,A=0;A<i.batchSize;++A)for(var _=A*e.strides[0],C=A*v.strides[0],E=0;E<i.outDepth;++E)for(var T=C+E*v.strides[1],O=E*i.strideDepth-f,N=0;N<o;N++){var B=O+N*u;if(!(B<0||B>=i.inDepth))for(var F=N*r.strides[0],X=_+B*e.strides[1],G=0;G<i.outHeight;++G)for(var re=T+G*v.strides[2],fe=G*i.strideHeight-g,he=0;he<s;he++){var $=fe+he*c;if(!($<0||$>=i.inHeight))for(var ee=F+he*r.strides[1],te=X+$*e.strides[2],ce=0;ce<i.outWidth;++ce)for(var xe=re+ce*i.outChannels,je=ce*i.strideWidth-p,Ke=0;Ke<a;Ke++){var ut=je+Ke*d;if(!(ut<0||ut>=i.inWidth))for(var Vt=te+ut*i.inChannels,Xt=ee+Ke*r.strides[2],_t=0;_t<i.inChannels;++_t){for(var jt=y[Vt+_t],Mt=0;Mt<i.outChannels;++Mt)b[xe+Mt]+=jt*w[Xt+Mt];Xt+=i.outChannels}}}}return v.toTensor()},t.prototype.conv2dDerInput=function(e,r,i){_e([e,r],"conv2dDerInput");for(var o=Lt(i.inShape,"float32"),s=o.values,a=this.readSync(e.dataId),u=this.readSync(r.dataId),c=r.strides,d=c[0],f=c[1],p=c[2],g=i.batchSize,v=i.filterHeight,y=i.filterWidth,w=i.inChannels,b=i.inHeight,A=i.inWidth,_=i.outChannels,C=i.outHeight,E=i.outWidth,T=i.strideHeight,O=i.strideWidth,B=v-1-i.padInfo.top,F=y-1-i.padInfo.left,X="channelsLast"===i.dataFormat,G=o.strides[0],re=X?o.strides[1]:o.strides[2],fe=X?o.strides[2]:1,he=X?1:o.strides[1],$=e.strides[0],ee=X?e.strides[1]:e.strides[2],te=X?e.strides[2]:1,ce=X?1:e.strides[1],xe=0;xe<g;++xe)for(var je=0;je<w;++je)for(var Ke=0;Ke<b;++Ke)for(var ut=Ke-B,ot=Math.max(0,Math.ceil(ut/T)),Vt=Math.min(C,(v+ut)/T),Xt=0;Xt<A;++Xt){for(var _t=Xt-F,jt=Math.max(0,Math.ceil(_t/O)),Mt=Math.min(E,(y+_t)/O),tr=0,Jt=ot;Jt<Vt;++Jt)for(var On=Jt*T-ut,In=jt;In<Mt;++In)for(var Ir=$*xe+ee*Jt+te*In,mr=d*(v-1-On)+f*(y-1-(In*O-_t))+p*je,vr=0;vr<_;++vr)tr+=a[Ir+ce*vr]*u[mr+vr];s[G*xe+re*Ke+fe*Xt+he*je]=tr}return o.toTensor()},t.prototype.conv3dDerInput=function(e,r,i){for(var o=Lt(i.inShape,"float32"),s=o.values,a=o.strides,u=a[0],c=a[1],d=a[2],f=a[3],p=this.readSync(e.dataId),g=e.strides,v=g[0],y=g[1],w=g[2],b=g[3],A=this.readSync(r.dataId),_=r.strides,C=_[0],E=_[1],T=_[2],O=_[3],N=i.batchSize,B=i.filterDepth,F=i.filterHeight,X=i.filterWidth,G=i.inChannels,re=i.inDepth,fe=i.inHeight,he=i.inWidth,$=i.outChannels,ee=i.outDepth,te=i.outHeight,ce=i.outWidth,xe=i.strideDepth,je=i.strideHeight,Ke=i.strideWidth,ut=B-1-i.padInfo.front,ot=F-1-i.padInfo.top,Vt=X-1-i.padInfo.left,Xt=0;Xt<N;++Xt)for(var _t=0;_t<G;++_t)for(var jt=0;jt<re;++jt)for(var Mt=jt-ut,tr=Math.max(0,Math.ceil(Mt/xe)),Jt=Math.min(ee,(B+Mt)/xe),On=0;On<fe;++On)for(var In=On-ot,Ir=Math.max(0,Math.ceil(In/je)),mr=Math.min(te,(F+In)/je),vr=0;vr<he;++vr){for(var Eu=vr-Vt,Du=Math.max(0,Math.ceil(Eu/Ke)),Ds=Math.min(ce,(X+Eu)/Ke),Bp=0,_c=tr;_c<Jt;++_c)for(var zl=_c*xe-Mt,Ec=Ir;Ec<mr;++Ec)for(var Lp=Ec*je-In,Dc=Du;Dc<Ds;++Dc)for(var rS=v*Xt+y*_c+w*Ec+b*Dc,Up=C*(B-1-zl)+E*(F-1-Lp)+T*(X-1-(Dc*Ke-Eu))+O*_t,Iu=0;Iu<$;++Iu)Bp+=p[rS+Iu]*A[Up+Iu];s[u*Xt+c*jt+d*On+f*vr+_t]=Bp}return o.toTensor()},t.prototype.conv2dDerFilter=function(e,r,i){_e([e,r],"conv2dDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c="channelsLast"===i.dataFormat,d=Lt(i.filterShape,"float32"),f=i.padInfo.left,p=i.padInfo.top,g=this.bufferSync(e),v=this.bufferSync(r),y=0;y<a;++y)for(var w=Math.max(0,Math.ceil((p-y)/o)),b=Math.min(i.outHeight,(i.inHeight+p-y)/o),A=0;A<u;++A)for(var _=Math.max(0,Math.ceil((f-A)/s)),C=Math.min(i.outWidth,(i.inWidth+f-A)/s),E=0;E<i.inChannels;++E)for(var T=0;T<i.outChannels;++T){for(var O=0,N=0;N<i.batchSize;++N)for(var B=w;B<b;++B)for(var F=y+B*o-p,X=_;X<C;++X){var G=A+X*s-f;O+=c?g.get(N,F,G,E)*v.get(N,B,X,T):g.get(N,E,F,G)*v.get(N,T,B,X)}d.set(O,y,A,E,T)}return d.toTensor()},t.prototype.conv3dDerFilter=function(e,r,i){for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,u=i.filterDepth,c=i.filterHeight,d=i.filterWidth,f=Lt(i.filterShape,"float32"),p=f.values,g=f.strides,v=g[0],y=g[1],w=g[2],b=g[3],A=this.readSync(r.dataId),_=r.strides,C=_[0],E=_[1],T=_[2],O=_[3],N=this.readSync(e.dataId),B=e.strides,F=B[0],X=B[1],G=B[2],re=B[3],fe=i.padInfo.front,he=i.padInfo.left,$=i.padInfo.top,ee=0;ee<u;++ee)for(var te=Math.max(0,Math.ceil((fe-ee)/o)),ce=Math.min(i.outDepth,(i.inDepth+fe-ee)/o),xe=ee*v,je=0;je<c;++je)for(var Ke=Math.max(0,Math.ceil(($-je)/s)),ut=Math.min(i.outHeight,(i.inHeight+$-je)/s),ot=je*y+xe,Vt=0;Vt<d;++Vt)for(var Xt=Math.max(0,Math.ceil((he-Vt)/a)),_t=Math.min(i.outWidth,(i.inWidth+he-Vt)/a),jt=Vt*w+ot,Mt=0;Mt<i.inChannels;++Mt)for(var tr=Mt*b+jt,Jt=0;Jt<i.outChannels;++Jt){for(var On=0,In=0;In<i.batchSize;++In)for(var Ir=In*F,mr=In*C,vr=te;vr<ce;++vr)for(var Eu=(ee+vr*o-fe)*X+Ir,Du=vr*E+mr,Ds=Ke;Ds<ut;++Ds)for(var Bp=(je+Ds*s-$)*G+Eu,_c=Ds*T+Du,zl=Xt;zl<_t;++zl)On+=N[(Vt+zl*a-he)*re+Bp+Mt]*A[zl*O+_c+Jt];p[tr+Jt]=On}return f.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var s=e.bias,a=e.activation,u=e.preluActivationWeights,c=this.depthwiseConv2D(e.input,e.filter,e.convInfo);return s&&(c=this.add(c,s)),a&&(c=_D(this,c,a,u)),c},t.prototype.depthwiseConv2D=function(e,r,i){_e([e,r],"depthwiseConv2D");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.padInfo.left,d=i.padInfo.top,f=i.outChannels/i.inChannels,p=Lt(i.outShape,e.dtype),g=this.readSync(e.dataId),v=this.readSync(r.dataId),y=p.values,w=0;w<i.batchSize;++w)for(var b=w*e.strides[0],A=w*p.strides[0],_=0;_<i.outHeight;++_)for(var C=A+_*p.strides[1],E=_*i.strideHeight-c,T=0;T<o;++T){var O=E+T*a;if(!(O<0||O>=i.inHeight))for(var N=T*r.strides[0],B=b+O*e.strides[1],F=0;F<i.outWidth;++F)for(var X=C+F*p.strides[2],G=F*i.strideWidth-d,re=0;re<s;++re){var fe=G+re*u;if(!(fe<0||fe>=i.inWidth))for(var $=B+fe*i.inChannels,ee=X,te=N+re*r.strides[1],ce=0;ce<i.inChannels;++ce){for(var xe=g[$+ce],je=0;je<f;++je)y[ee+je]+=xe*v[te+je];ee+=f,te+=f}}}return p.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,r,i){_e([e,r],"depthwiseConv2DDerInput");for(var o=Lt(i.inShape,"float32"),s=o.values,a=o.strides,u=a[0],c=a[1],d=a[2],f=this.readSync(e.dataId),p=e.strides,g=p[0],v=p[1],y=p[2],w=this.readSync(r.dataId),b=r.strides,A=b[0],_=b[1],C=b[2],E=i.batchSize,T=i.filterHeight,O=i.filterWidth,N=i.inChannels,B=i.inHeight,F=i.inWidth,G=i.outHeight,re=i.outWidth,fe=i.strideHeight,he=i.strideWidth,$=T-1-i.padInfo.top,ee=O-1-i.padInfo.left,te=i.outChannels/N,ce=0;ce<E;++ce)for(var xe=0;xe<N;++xe)for(var je=0;je<B;++je)for(var Ke=je-$,ut=Math.max(0,Math.ceil(Ke/fe)),ot=Math.min(G,(T+Ke)/fe),Vt=0;Vt<F;++Vt){for(var Xt=Vt-ee,_t=Math.max(0,Math.ceil(Xt/he)),jt=Math.min(re,(O+Xt)/he),Mt=0,tr=ut;tr<ot;++tr)for(var Jt=tr*fe-Ke,On=_t;On<jt;++On)for(var In=g*ce+v*tr+y*On,Ir=A*(T-1-Jt)+_*(O-1-(On*he-Xt))+C*xe,mr=0;mr<te;++mr)Mt+=f[In+(xe*te+mr)]*w[Ir+mr];s[u*ce+c*je+d*Vt+xe]=Mt}return o.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,r,i){_e([e,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=Lt(i.filterShape,"float32"),d=i.padInfo.left,f=i.padInfo.top,p=i.outChannels/i.inChannels,g=this.bufferSync(e),v=this.bufferSync(r),y=0;y<a;++y)for(var w=Math.max(0,Math.ceil((f-y)/o)),b=Math.min(i.outHeight,(i.inHeight+f-y)/o),A=0;A<u;++A)for(var _=Math.max(0,Math.ceil((d-A)/s)),C=Math.min(i.outWidth,(i.inWidth+d-A)/s),E=0;E<i.outChannels;++E){for(var T=Math.trunc(E/p),O=E%p,N=0,B=0;B<i.batchSize;++B)for(var F=w;F<b;++F)for(var X=y+F*o-f,G=_;G<C;++G)N+=g.get(B,X,A+G*s-d,T)*v.get(B,F,G,E);c.set(N,y,A,T,O)}return c.toTensor()},t.prototype.tile=function(e,r){return _e(e,"tile"),qN(this.bufferSync(e),r)},t.prototype.pad=function(e,r,i){_e(e,"pad");var o=r.map(function(p,g){return p[0]+e.shape[g]+p[1]}),s=r.map(function(p){return p[0]}),a=this.bufferSync(e),u=Lt(o,e.dtype);0!==i&&u.values.fill(i);for(var c=0;c<e.size;c++){var d=a.indexToLoc(c),f=d.map(function(p,g){return p+s[g]});u.set.apply(u,[a.get.apply(a,d)].concat(f))}return u.toTensor()},t.prototype.transpose=function(e,r){_e(e,"transpose");for(var i=new Array(e.rank),o=0;o<i.length;o++)i[o]=e.shape[r[o]];var s=this.readSync(e.dataId),a=Lt(i,e.dtype),u=this.bufferSync(e);for(o=0;o<e.size;++o){for(var c=u.indexToLoc(o),d=new Array(c.length),f=0;f<d.length;f++)d[f]=c[r[f]];var p=a.locToIndex(d);a.values[p]=s[o]}return a.toTensor()},t.prototype.gather=function(e,r,i){_e([e,r],"gather");var o=e.shape.slice(),s=this.readSync(r.dataId);o[i]=s.length;for(var a=Lt(o,e.dtype),u=this.bufferSync(e),c=0;c<a.size;++c){var d=a.indexToLoc(c),f=d.slice();f[i]=s[d[i]];var p=u.locToIndex(f);a.values[c]=u.values[p]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,r,i){_e([e],"batchToSpaceND");var o=r.reduce(function(f,p){return f*p}),s=vb(e.shape,r,o),a=yb(s.length,r.length),u=wb(e.shape,r,o),c=kN(i,r.length),d=PN(u,i,r.length);return e.reshape(s).transpose(a).reshape(u).slice(c,d)},t.prototype.spaceToBatchND=function(e,r,i){_e([e],"spaceToBatchND");var o=r.reduce(function(p,g){return p*g}),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<e.shape.length;++a)s.push([0,0]);var u=e.pad(s),c=vb(u.shape,r,o,!1),d=yb(c.length,r.length,!1),f=wb(u.shape,r,o,!1);return u.reshape(c).transpose(d).reshape(f)},t.prototype.pool=function(e,r,i){_e(e,"pool");for(var o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,g="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(e.dataId),y=Lt(r.outShape,e.dtype),w=y.values,b=r.outShape[1]*r.outShape[2]*r.outShape[3],A=r.outShape[2]*r.outShape[3],_=r.outShape[3],C=0;C<r.batchSize;++C)for(var E=C*b,T=C*e.strides[0],O=0;O<r.inChannels;++O)for(var N=0;N<r.outHeight;++N)for(var B=N*o-f,F=Math.max(0,B),X=Math.min(r.inHeight,c+B),G=E+N*A,re=0;re<r.outWidth;++re){for(var fe=re*s-p,he=Math.max(0,fe),$=Math.min(r.inWidth,d+fe),ee=g,te=0,ce=0,xe=F;xe<X;xe+=a){for(var je=T+xe*e.strides[1],Ke=he;Ke<$;Ke+=u){var ut=v[je+Ke*e.strides[2]+O];"max"===i&&ut>ee?ee=ut:"avg"===i&&(te+=ut,ce++)}if(isNaN(ee))break}w[G+re*_+O]="avg"===i?te/ce:ee}return y.toTensor()},t.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},t.prototype.maxPoolPositions=function(e,r){for(var i=Lt(r.outShape,"int32"),o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,g=this.bufferSync(e),v=0;v<r.batchSize;++v)for(var y=0;y<r.inChannels;++y)for(var w=0;w<r.outHeight;++w){for(var b=w*o-f,A=b;A<0;)A+=a;for(var _=Math.min(r.inHeight,c+b),C=0;C<r.outWidth;++C){for(var E=C*s-p,T=E;T<0;)T+=u;for(var O=Math.min(r.inWidth,d+E),N=Number.NEGATIVE_INFINITY,B=-1,F=A;F<_;F+=a)for(var X=F-b,G=T;G<O;G+=u){var re=G-E,fe=g.get(v,F,G,y);fe>N&&(N=fe,B=X*d+re)}i.set(B,v,w,C,y)}}return i.toTensor()},t.prototype.maxPoolBackprop=function(e,r,i,o){_e([r,i],"maxPoolBackprop");for(var s=this.maxPoolPositions(r,o),a=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterHeight,p=o.effectiveFilterWidth,g=p-1-o.padInfo.left,v=f-1-o.padInfo.top,y=Lt(r.shape,"float32"),w=this.bufferSync(s),b=this.bufferSync(e),A=0;A<o.batchSize;++A)for(var _=0;_<o.inChannels;++_)for(var C=0;C<o.inHeight;++C)for(var E=0;E<o.inWidth;++E){for(var T=C-v,O=E-g,N=0,B=0;B<f;B+=c){var F=(T+B)/a;if(!(F<0||F>=o.outHeight||Math.floor(F)!==F))for(var X=0;X<p;X+=d){var G=(O+X)/u;if(!(G<0||G>=o.outWidth||Math.floor(G)!==G)){var re=f*p-1-w.get(A,F,G,_)===B*p+X?1:0;0!==re&&(N+=b.get(A,F,G,_)*re)}}}y.set(N,A,C,E,_)}return y.toTensor()},t.prototype.avgPoolBackprop=function(e,r,i){_e([e,r],"avgPoolBackprop");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=i.dilationHeight,d=i.dilationWidth,f=i.effectiveFilterHeight,p=i.effectiveFilterWidth,g=p-1-i.padInfo.left,v=f-1-i.padInfo.top,y=Lt(r.shape,"float32"),w=1/(a*u),b=this.bufferSync(e),A=0;A<i.batchSize;++A)for(var _=0;_<i.inChannels;++_)for(var C=0;C<i.inHeight;++C)for(var E=0;E<i.inWidth;++E){for(var T=C-v,O=E-g,N=0,B=0;B<f;B+=c){var F=(T+B)/o;if(!(F<0||F>=i.outHeight||Math.floor(F)!==F))for(var X=0;X<p;X+=d){var G=(O+X)/s;G<0||G>=i.outWidth||Math.floor(G)!==G||(N+=b.get(A,F,G,_))}}y.set(N*w,A,C,E,_)}return y.toTensor()},t.prototype.pool3d=function(e,r,i){_e(e,"pool3d");for(var o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,g=r.effectiveFilterWidth,v=r.padInfo.front,y=r.padInfo.top,w=r.padInfo.left,b="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=this.readSync(e.dataId),_=Lt(r.outShape,e.dtype),C=_.values,E=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],T=r.outShape[2]*r.outShape[3]*r.outShape[4],O=r.outShape[3]*r.outShape[4],N=r.outShape[4],B=0;B<r.batchSize;++B)for(var F=B*E,X=B*e.strides[0],G=0;G<r.inChannels;++G)for(var re=0;re<r.outDepth;++re){for(var fe=re*o-v,he=fe;he<0;)he+=u;for(var $=Math.min(r.inDepth,f+fe),ee=F+re*T,te=0;te<r.outHeight;++te){for(var ce=te*s-y,xe=ce;xe<0;)xe+=c;for(var je=Math.min(r.inHeight,p+ce),Ke=ee+te*O,ut=0;ut<r.outWidth;++ut){for(var ot=ut*a-w,Vt=ot;Vt<0;)Vt+=d;for(var Xt=Math.min(r.inWidth,g+ot),_t=Ke+ut*N,jt=b,Mt=0,tr=0,Jt=he;Jt<$;Jt+=u){for(var On=X+Jt*e.strides[1],In=xe;In<je;In+=c){for(var Ir=On+In*e.strides[2],mr=Vt;mr<Xt;mr+=d){var vr=A[Ir+mr*e.strides[3]+G];if("max"===i&&vr>jt?jt=vr:"avg"===i&&(Mt+=vr,tr++),isNaN(jt))break}if(isNaN(jt))break}if(isNaN(jt))break}C[_t+G]="avg"===i?Mt/tr:jt}}}return _.toTensor()},t.prototype.avgPool3d=function(e,r){return _e(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,r,i){_e([e,r],"avgPool3dBackprop");for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,u=i.filterDepth,c=i.filterHeight,d=i.filterWidth,f=i.dilationDepth,p=i.dilationHeight,g=i.dilationWidth,v=i.effectiveFilterDepth,y=i.effectiveFilterHeight,w=i.effectiveFilterWidth,b=v-1-i.padInfo.front,A=w-1-i.padInfo.left,_=y-1-i.padInfo.top,C=Lt(r.shape,"float32"),E=1/(u*c*d),T=this.bufferSync(e),O=0;O<i.batchSize;++O)for(var N=0;N<i.inChannels;++N)for(var B=0;B<i.inDepth;++B)for(var F=0;F<i.inHeight;++F)for(var X=0;X<i.inWidth;++X){for(var G=B-b,re=F-_,fe=X-A,he=0,$=0;$<v;$+=f){var ee=(G+$)/o;if(!(ee<0||ee>=i.outDepth||Math.floor(ee)!==ee))for(var te=0;te<y;te+=p){var ce=(re+te)/s;if(!(ce<0||ce>=i.outHeight||Math.floor(ce)!==ce))for(var xe=0;xe<w;xe+=g){var je=(fe+xe)/a;je<0||je>=i.outWidth||Math.floor(je)!==je||(he+=T.get(O,ee,ce,je,N))}}}C.set(he*E,O,B,F,X,N)}return C.toTensor()},t.prototype.maxPool3d=function(e,r){return _e(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,r){for(var i=Lt(r.outShape,"int32"),o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,g=r.effectiveFilterWidth,v=r.padInfo.front,y=r.padInfo.top,w=r.padInfo.left,b=this.bufferSync(e),A=0;A<r.batchSize;++A)for(var _=0;_<r.inChannels;++_)for(var C=0;C<r.outDepth;++C){for(var E=C*o-v,T=E;T<0;)T+=u;for(var O=Math.min(r.inDepth,f+E),N=0;N<r.outHeight;++N){for(var B=N*s-y,F=B;F<0;)F+=c;for(var X=Math.min(r.inHeight,p+B),G=0;G<r.outWidth;++G){for(var re=G*a-w,fe=re;fe<0;)fe+=d;for(var he=Math.min(r.inWidth,g+re),$=Number.NEGATIVE_INFINITY,ee=-1,te=T;te<O;te+=u)for(var ce=te-E,xe=F;xe<X;xe+=c)for(var je=xe-B,Ke=fe;Ke<he;Ke+=d){var ut=Ke-re,ot=b.get(A,te,xe,Ke,_);ot>=$&&($=ot,ee=ce*p*g+je*p+ut)}i.set(ee,A,C,N,G,_)}}}return i.toTensor()},t.prototype.maxPool3dBackprop=function(e,r,i,o){_e([r,i],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(r,o),a=o.strideDepth,u=o.strideHeight,c=o.strideWidth,d=o.dilationDepth,f=o.dilationHeight,p=o.dilationWidth,g=o.effectiveFilterDepth,v=o.effectiveFilterHeight,y=o.effectiveFilterWidth,w=g-1-o.padInfo.front,b=y-1-o.padInfo.left,A=v-1-o.padInfo.top,_=Lt(r.shape,"float32"),C=this.bufferSync(s),E=this.bufferSync(e),T=0;T<o.batchSize;++T)for(var O=0;O<o.inChannels;++O)for(var N=0;N<o.inDepth;++N)for(var B=0;B<o.inHeight;++B)for(var F=0;F<o.inWidth;++F){for(var X=N-w,G=B-A,re=F-b,fe=0,he=0;he<g;he+=d){var $=(X+he)/a;if(!($<0||$>=o.outDepth||Math.floor($)!==$))for(var ee=0;ee<v;ee+=f){var te=(G+ee)/u;if(!(te<0||te>=o.outHeight||Math.floor(te)!==te))for(var ce=0;ce<y;ce+=p){var xe=(re+ce)/c;if(!(xe<0||xe>=o.outWidth||Math.floor(xe)!==xe)){var je=g*v*y-1-C.get(T,$,te,xe,O)===he*v*y+ee*y+ce?1:0;0!==je&&(fe+=E.get(T,$,te,xe,O)*je)}}}}_.set(fe,T,N,B,F,O)}return _.toTensor()},t.prototype.cast=function(e,r){return KE(e,r,this)},t.prototype.reshape=function(e,r){return Db(e,r)},t.prototype.avgPool=function(e,r){return _e(e,"avgPool"),this.pool(e,r,"avg").toFloat()},t.prototype.resizeBilinear=function(e,r,i,o){_e(e,"resizeBilinear");for(var s=e.shape,a=s[0],u=s[1],c=s[2],d=s[3],f=this.readSync(e.dataId),p=new Float32Array(at([a,r,i,d])),g=[o&&r>1?u-1:u,o&&i>1?c-1:c],v=[o&&r>1?r-1:r,o&&i>1?i-1:i],y=0,w=g[0]/v[0],b=g[1]/v[1],A=0;A<a;A++)for(var _=0;_<r;_++)for(var C=w*_,E=Math.floor(C),T=C-E,O=Math.min(u-1,Math.ceil(C)),N=A*e.strides[0]+E*e.strides[1],B=A*e.strides[0]+O*e.strides[1],F=0;F<i;F++)for(var X=b*F,G=Math.floor(X),re=X-G,fe=Math.min(c-1,Math.ceil(X)),he=N+G*e.strides[2],$=B+G*e.strides[2],ee=N+fe*e.strides[2],te=B+fe*e.strides[2],ce=0;ce<d;ce++){var xe=f[he+ce],je=f[$+ce],Ke=xe+(f[ee+ce]-xe)*re;p[y++]=Ke+(je+(f[te+ce]-je)*re-Ke)*T}return Pi(p,[a,r,i,d])},t.prototype.resizeBilinearBackprop=function(e,r,i){_e([e,r],"resizeBilinearBackprop");for(var o=r.shape,s=o[0],a=o[1],u=o[2],c=o[3],d=e.shape,f=d[1],p=d[2],g=new Float32Array(s*a*u*c),v=[i&&f>1?a-1:a,i&&p>1?u-1:u],y=[i&&f>1?f-1:f,i&&p>1?p-1:p],w=v[0]/y[0],b=v[1]/y[1],A=this.readSync(e.dataId),_=0,C=0;C<s;C++)for(var E=C*r.strides[0],T=0;T<f;T++)for(var O=T*w,N=Math.floor(O),B=Math.min(Math.ceil(O),a-1),F=E+N*r.strides[1],X=E+B*r.strides[1],G=O-N,re=1-G,fe=0;fe<p;fe++)for(var he=fe*b,$=Math.floor(he),ee=Math.min(Math.ceil(he),u-1),te=he-$,ce=1-te,xe=F+$*r.strides[2],je=F+ee*r.strides[2],Ke=X+$*r.strides[2],ut=X+ee*r.strides[2],ot=re*ce,Vt=re*te,Xt=G*ce,_t=G*te,jt=0;jt<c;jt++){var Mt=A[_++];g[xe+jt]+=Mt*ot,g[je+jt]+=Mt*Vt,g[Ke+jt]+=Mt*Xt,g[ut+jt]+=Mt*_t}return Xo(g,[s,u,a,c],r.dtype)},t.prototype.resizeNearestNeighbor=function(e,r,i,o){_e(e,"resizeNearestNeighbor");for(var s=e.shape,a=s[0],u=s[1],c=s[2],d=s[3],f=this.readSync(e.dataId),p=new Float32Array(a*r*i*d),g=[o&&r>1?u-1:u,o&&i>1?c-1:c],v=[o&&r>1?r-1:r,o&&i>1?i-1:i],y=g[0]/v[0],w=g[1]/v[1],b=0,A=0;A<a;A++)for(var _=A*e.strides[0],C=0;C<r;C++)for(var E=y*C,T=_+Math.min(u-1,o?Math.round(E):Math.floor(E))*e.strides[1],O=0;O<i;O++)for(var N=w*O,B=T+Math.min(c-1,o?Math.round(N):Math.floor(N))*e.strides[2],F=0;F<d;F++)p[b++]=f[B+F];return Pi(p,[a,r,i,d],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,r,i){_e([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,s=o[0],a=o[1],u=o[2],c=o[3],d=e.shape,f=d[1],p=d[2],g=new Float32Array(s*a*u*c),v=this.readSync(e.dataId),y=[i&&f>1?a-1:a,i&&p>1?u-1:u],w=[i&&f>1?f-1:f,i&&p>1?p-1:p],b=y[0]/w[0],A=y[1]/w[1],_=1/b,C=1/A,E=2*Math.ceil(_)+2,T=2*Math.ceil(C)+2,O=0;O<s;O++)for(var N=O*r.strides[0],B=0;B<a;B++)for(var F=N+B*r.strides[1],X=Math.floor(B*_),G=Math.floor(X-E/2),re=0;re<u;re++)for(var fe=F+re*r.strides[2],he=Math.floor(re*C),$=Math.floor(he-T/2),ee=0;ee<c;ee++){for(var te=0,ce=0;ce<E;ce++){var xe=ce+G;if(!(xe<0||xe>=f)){var je=N+xe*e.strides[1],Ke=xe*b;if(B===Math.min(a-1,i?Math.round(Ke):Math.floor(Ke)))for(var ut=0;ut<T;ut++){var ot=ut+$;if(!(ot<0||ot>=p)){var Vt=je+ot*e.strides[2],Xt=ot*A;re===Math.min(u-1,i?Math.round(Xt):Math.floor(Xt))&&(te+=v[Vt+ee])}}}}g[fe+ee]=te}return Xo(g,r.shape,r.dtype)},t.prototype.batchNormalization=function(e,r,i,o,s,a){_e([e,r,i,s,a],"batchNorm");for(var u=this.readSync(e.dataId),c=this.readSync(r.dataId),d=this.readSync(i.dataId),f=s?this.readSync(s.dataId):new Float32Array([1]),p=a?this.readSync(a.dataId):new Float32Array([0]),g=new Float32Array(u.length),v=p.length,y=f.length,w=d.length,b=c.length,A=0,_=0,C=0,E=0,T=0;T<u.length;++T)g[T]=p[A++]+(u[T]-c[_++])*f[C++]/Math.sqrt(d[E++]+o),A>=v&&(A=0),_>=b&&(_=0),C>=y&&(C=0),E>=w&&(E=0);return Xo(g,e.shape)},t.prototype.localResponseNormalization4D=function(e,r,i,o,s){_e(e,"localResponseNormalization4D");var a=e.shape[3],u=a-1,c=this.readSync(e.dataId),d=e.size,f=new Float32Array(d);function p(w){for(var b=w%a,A=w-b+Math.max(0,b-r),_=w-b+Math.min(b+r,u),C=0;A<=_;A++){var E=c[A];C+=E*E}return C}for(var g=0;g<d;g++){var v=p(g),y=c[g]*Math.pow(i+o*v,-s);f[g]=y}return Xo(f,e.shape)},t.prototype.LRNGrad=function(e,r,i,o,s,a,u){_e(e,"LRNGrad");for(var c=e.shape[3],d=this.readSync(e.dataId),f=this.readSync(r.dataId),p=this.readSync(i.dataId),g=new Float32Array(e.size),v=e.size,y=0;y<v;y++){for(var w=y%c,b=y-w+Math.max(0,w-o),A=y-w+Math.min(c,w+o+1),_=0,C=b;C<A;C++)_+=Math.pow(f[C],2);for(_=a*_+s,C=b;C<A;C++){var E=-2*a*u*f[C]*p[y]/_;y===C&&(E+=Math.pow(_,-u)),g[C]+=E*=d[y]}}return Xo(g,e.shape)},t.prototype.multinomial=function(e,r,i,o){_e(e,"multinomial");for(var s=r?e:gc(e),a=s.shape[0],u=s.shape[1],c=ar([a,i],"int32"),d=this.readSync(c.dataId),f=this.readSync(s.dataId),p=0;p<a;++p){var g=p*u,v=new Float32Array(u-1);v[0]=f[g];for(var y=1;y<v.length;++y)v[y]=v[y-1]+f[g+y];for(var w=mb(o.toString()),b=p*i,A=0;A<i;++A){var _=w();d[b+A]=v.length;for(var C=0;C<v.length;C++)if(_<v[C]){d[b+A]=C;break}}}return c},t.prototype.oneHot=function(e,r,i,o){_e(e,"oneHot");var s=new Float32Array(e.size*r);s.fill(o);for(var a=this.readSync(e.dataId),u=0;u<e.size;++u)a[u]>=0&&a[u]<r&&(s[u*r+a[u]]=i);return El(s,[e.size,r],"int32")},t.prototype.nonMaxSuppression=function(e,r,i,o,s){return _e(e,"nonMaxSuppression"),XE(this.readSync(e.dataId),this.readSync(r.dataId),i,o,s)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,r){for(var i=e.shape[0],o=e.shape[1],s=Lt(e.shape,"float32"),a=Lt(e.shape,"float32"),u=Js(e).as2D(i,o),c=gu(e).as2D(i,o),d=0;d<i;d++)for(var f=u.slice([d,0],[1,o]),p=c.slice([d,0],[1,o]),g=ki(f,p),v=this.readSync(this.fftImpl(g,r).dataId),y=0;y<o;y++){var w=jN(v,y);s.values[d*o+y]=w.real,a.values[d*o+y]=w.imag}return ki(s.toTensor(),a.toTensor()).as2D(i,o)},t.prototype.fftImpl=function(e,r){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var s=this.fftRadix2(i,o,r).as2D(e.shape[0],e.shape[1]);return r&&(s=ki(Js(s).div(We(o)),gu(s).div(We(o)))),s}var a=this.readSync(e.dataId),u=function(c){for(var d=new Float32Array(c.length/2),f=new Float32Array(c.length/2),p=0;p<c.length;p+=2)d[p/2]=c[p],f[p/2]=c[p+1];return{real:d,imag:f}}(this.fourierTransformByMatmul(a,o,r));return ki(u.real,u.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,r,i){if(1===r)return e;var o=this.readSync(e.dataId),s=r/2,a=function(b){for(var A=Math.ceil(b.length/4),_=new Float32Array(A),C=new Float32Array(A),E=0;E<b.length;E+=4)_[Math.floor(E/4)]=b[E],C[Math.floor(E/4)]=b[E+1];return{real:_,imag:C}}(o),u=ki(a.real,a.imag).as1D(),c=function(b){for(var A=Math.floor(b.length/4),_=new Float32Array(A),C=new Float32Array(A),E=2;E<b.length;E+=4)_[Math.floor(E/4)]=b[E],C[Math.floor(E/4)]=b[E+1];return{real:_,imag:C}}(o),d=ki(c.real,c.imag).as1D();u=this.fftRadix2(u,s,i),d=this.fftRadix2(d,s,i);var f=function(b,A){for(var _=new Float32Array(b/2),C=new Float32Array(b/2),E=0;E<Math.ceil(b/2);E++){var T=(A?2:-2)*Math.PI*(E/b);_[E]=Math.cos(T),C[E]=Math.sin(T)}return{real:_,imag:C}}(r,i),p=ki(f.real,f.imag).mul(d),g=u.add(p),v=u.sub(p),y=Js(g).concat(Js(v)),w=gu(g).concat(gu(v));return ki(y,w).as1D()},t.prototype.fourierTransformByMatmul=function(e,r,i){for(var o=new Float32Array(2*r),s=0;s<r;s++){for(var a=0,u=0,c=0;c<r;c++){var d=a9(s*c,r,i),f=jN(e,c);a+=f.real*d.real-f.imag*d.imag,u+=f.real*d.imag+f.imag*d.real}i&&(a/=r,u/=r),s9(o,a,u,s)}return o},t.prototype.depthToSpace=function(e,r,i){P("NHWC"===i,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=e.shape[0],s=e.shape[1],a=e.shape[2],u=e.shape[3],c=s*r,d=a*r,f=u/(r*r),p=this.readSync(e.dataId),g=new Float32Array(o*c*d*f),v=0,y=0;y<o;++y)for(var w=0;w<c;++w)for(var b=Math.floor(w/r),A=w%r,_=0;_<d;++_)for(var C=Math.floor(_/r),E=(A*r+_%r)*f,T=0;T<f;++T)g[v++]=p[T+E+u*(C+a*(b+s*y))];return Xo(g,[o,c,d,f])},t.prototype.broadcastedBinaryOp=function(e,r,i,o){var s=$t(e.shape,r.shape),a=Lt(s,i),u=this.readSync(e.dataId),c=this.readSync(r.dataId),d=mc(e.shape,s),f=mc(r.shape,s),p=a.values;if(d.length+f.length===0)for(var g=0;g<p.length;++g)p[g]=o(u[g%u.length],c[g%c.length]);else{var v=this.bufferSync(e),y=this.bufferSync(r),w=function(b){var A=a.indexToLoc(b),_=A.slice(-e.rank);d.forEach(function(O){return _[O]=0});var C=v.locToIndex(_),E=A.slice(-r.rank);f.forEach(function(O){return E[O]=0});var T=y.locToIndex(E);p[b]=o(u[C],c[T])};for(g=0;g<p.length;++g)w(g)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,r,i){var o=$t(e.shape,r.shape),s=Lt(o,"float32"),a=Lt(o,"float32"),u=this.readSync(e.dataId),c=this.readSync(r.dataId),d=mc(e.shape,o),f=mc(r.shape,o),p=s.values,g=a.values;if(d.length+f.length===0)for(var v=0;v<p.length;v++){var y=v%u.length,w=v%c.length,b=i(u[2*y],u[2*y+1],c[2*w],c[2*w+1]);p[v]=b.real,g[v]=b.imag}else{var A=this.bufferSync(this.data.get(e.dataId).complexTensors.real),_=this.bufferSync(this.data.get(r.dataId).complexTensors.real),C=function(E){var T=s.indexToLoc(E),O=T.slice(-e.rank);d.forEach(function(G){return O[G]=0});var N=A.locToIndex(O),B=T.slice(-r.rank);f.forEach(function(G){return B[G]=0});var F=_.locToIndex(B),X=i(u[2*N],u[2*N+1],c[2*F],c[2*F+1]);p[E]=X.real,g[E]=X.imag};for(v=0;v<p.length;v++)C(v)}return this.complex(s.toTensor(),a.toTensor())},t.prototype.split=function(e,r,i){return VN(e,r,i)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,r,i,o,s,a){for(var u=e.shape,c=u[0],d=u[1],f=u[2],p=u[3],g=r.shape[0],v=o[0],y=o[1],w=Lt([g,v,y,p],"float32"),b=this.readSync(r.dataId),A=this.readSync(i.dataId),_=this.readSync(e.dataId),C=e.strides,E=w.strides,T=0;T<g;T++){var O=4*T,N=b[O],B=b[O+1],F=b[O+2],X=b[O+3],G=A[T];if(!(G>=c))for(var re=v>1?(F-N)*(d-1)/(v-1):0,fe=y>1?(X-B)*(f-1)/(y-1):0,he=0;he<v;he++){var $=v>1?N*(d-1)+he*re:.5*(N+F)*(d-1);if($<0||$>d-1)for(var ee=0;ee<y;ee++)for(var te=0;te<p;te++){var ce=te+ee*E[2]+he*E[1]+T*E[0];w.values[ce]=a}else if("bilinear"===s){var xe=Math.floor($),je=Math.ceil($),Ke=$-xe;for(ee=0;ee<y;ee++)if((Jt=y>1?B*(f-1)+ee*fe:.5*(B+X)*(f-1))<0||Jt>f-1)for(te=0;te<p;te++)w.values[ce=te+ee*E[2]+he*E[1]+T*E[0]]=a;else{var ut=Math.floor(Jt),ot=Math.ceil(Jt),Vt=Jt-ut;for(te=0;te<p;te++){var Xt=_[ce=te+ut*C[2]+xe*C[1]+G*C[0]],_t=_[ce=te+ot*C[2]+xe*C[1]+G*C[0]],jt=_[ce=te+ut*C[2]+je*C[1]+G*C[0]],Mt=Xt+(_t-Xt)*Vt,tr=jt+(_[ce=te+ot*C[2]+je*C[1]+G*C[0]]-jt)*Vt;w.values[ce=te+ee*E[2]+he*E[1]+T*E[0]]=Mt+(tr-Mt)*Ke}}}else for(ee=0;ee<y;++ee){var Jt;if((Jt=y>1?B*(f-1)+ee*fe:.5*(B+X)*(f-1))<0||Jt>f-1)for(te=0;te<p;te++)w.values[ce=te+ee*E[2]+he*E[1]+T*E[0]]=a;else{var On=Math.round(Jt),In=Math.round($);for(te=0;te<p;te++)w.values[te+ee*E[2]+he*E[1]+T*E[0]]=_[te+On*C[2]+In*C[1]+G*C[0]]}}}}return w.toTensor()},t.prototype.sparseToDense=function(e,r,i,o){var s=Cv(0,e,i);return this.scatter(e,r,i,s.outputSize,s.sliceSize,s.numUpdates,s.sliceRank,s.strides,o,!1)},t.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],s=zE(e,r),a=s[0],u=s[1],c=s[2],d=s[3];if(0===u)return Pi([],a,e.dtype);for(var f=new hv([u,c],e.dtype),p=this.readSync(r.dataId),g=this.readSync(e.dataId),v=0;v<u;v++){for(var y=[],w=0,b=0;b<o;b++){var A=p[v*o+b];w+=A*d[b],y.push(A)}if(w<0||w>=e.size/c)throw new Error("Invalid indices: "+y+" does not index into "+e.shape);for(var _=0;_<c;_++)f.values[v*c+_]=g[w*c+_]}return f.toTensor().reshape(a)},t.prototype.scatterND=function(e,r,i){var o=Cv(0,e,i),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,c=o.strides,d=o.outputSize,f=We(0);return this.scatter(e,r,i,d,u,a,s,c,f,!0)},t.prototype.fill=function(e,r,i){var o=uv(i=i||gp(r),at(e));return o.fill(r),H.makeTensor(o,e,i,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var r=uv(e.dtype,at(e.shape));return this.makeOutput(r,e.shape,e.dtype)},t.prototype.linspace=function(e,r,i){return QE(e,r,i)},t.prototype.scatter=function(e,r,i,o,s,a,u,c,d,f){var p=[o/s,s],g=this.readSync(e.dataId),v=this.readSync(r.dataId);if(0===o)return Pi([],i,r.dtype);var y=new hv(p,r.dtype);y.values.fill(this.readSync(d.dataId)[0]);for(var w=0;w<a;w++){for(var b=[],A=0,_=0;_<u;_++){var C=g[w*u+_];b.push(C),A+=C*c[_]}if(A<0||A>=o/s)throw new Error("Invalid indices: "+b+" does not index into "+i);for(var E=0;E<s;E++)f?y.values[A*s+E]+=v[w*s+E]:y.values[A*s+E]=0===r.rank?v[0]:v[w*s+E]}return y.toTensor().reshape(i)},t}(zN);H.registerBackend("cpu",function(){return new lY},1);for(var ED=0,b3=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var t=n.inputs,r=n.attrs,o=t.boxes,s=t.scores,u=r.maxOutputSize,c=r.iouThreshold,d=r.scoreThreshold,f=r.softNmsSigma,p=n.backend;_e(o,"NonMaxSuppressionWithScore");var g=JE(p.data.get(o.dataId).values,p.data.get(s.dataId).values,u,c,d,f);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var r=n.inputs.x,i=n.backend;_e(r,"square");for(var o=i.data.get(r.dataId).values,s=new Float32Array(o.length),a=0;a<o.length;++a){var u=o[a];s[a]=u*u}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Tv,backendName:"cpu",kernelFunc:function(n){var t=n.inputs,i=t.a,o=t.b,s=n.backend;_e([i,o],Tv);var a=s.data.get(i.dataId).values,u=s.data.get(o.dataId).values,c=function(p,g,v,y,w,b){var A=$t(p,g),_=A.length,C=Ia(A),E=pp(w,at(A)),T=p.length,O=g.length,N=Ia(p),B=Ia(g),F=mc(p,A),X=mc(g,A);if(F.length+X.length===0)for(var G=0;G<E.length;++G)E[G]=b(v[G%v.length],y[G%y.length]);else{var re=function(fe){var he=WO(fe,_,C),$=he.slice(-T);F.forEach(function(xe){return $[xe]=0});var ee=bE($,T,N),te=he.slice(-O);X.forEach(function(xe){return te[xe]=0});var ce=bE(te,O,B);E[fe]=b(v[ee],y[ce])};for(G=0;G<E.length;++G)re(G)}return[E,A]}(i.shape,o.shape,a,u,i.dtype,function(p,g){var v=p-g;return v*v}),f=c[1];return{dataId:s.write(c[0],f,i.dtype),shape:f,dtype:i.dtype}}}];ED<b3.length;ED++)MO(b3[ED]);for(var Dp,dY=function(n){this.variableNames=["A"];var t=Xi(),e=n[0],r=n[1];this.outputShape=n,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+e+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},fY=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Xi(),e=n[0],r=n[1];this.outputShape=n,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+e+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},DD=0,A3=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var e=n.backend,i=n.inputs.pixels,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=u[0],d=u[1],f=[d,c],p=[d,c,n.attrs.numChannels];(a||s)&&(null==Dp&&(Dp=document.createElement("canvas").getContext("2d")),Dp.canvas.width=c,Dp.canvas.height=d,Dp.drawImage(i,0,0,c,d),i=Dp.canvas);var g=e.makeTensorInfo(f,"int32");e.texData.get(g.dataId).usage=ys.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(g.dataId),i);var v=de().getBool("WEBGL_PACK")?new fY(p):new dY(p),y=e.runWebGLProgram(v,[g],"int32");return e.disposeData(g.dataId),y}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=n.attrs;hb("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var s=t.scores,u=r.maxOutputSize,c=r.iouThreshold,d=r.scoreThreshold,f=r.softNmsSigma,p=e,g=JE(p.readSync(t.boxes.dataId),p.readSync(s.dataId),u,c,d,f);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var r=n.inputs.x,i=n.backend,o=new Gt(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Tv,backendName:"webgl",kernelFunc:function(n){var t=n.inputs,i=t.a,o=t.b,s=n.backend,a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vc("return (a - b) * (a - b);",i.shape,o.shape):new Dr("return (a - b) * (a - b);",i.shape,o.shape);return s.compileAndRun(a,[i,o])}}];DD<A3.length;DD++)MO(A3[DD]);for(var ID=0,x3=[{kernelName:"Square",gradFunc:function(n,t){var e=t[0];return{x:function(){return n.mul(e.toFloat().mul(2))}}}},{kernelName:Tv,gradFunc:function(n,t){var e=t[0],r=t[1],i=We(2);return{a:function(){return Ji(n,Ji(i,ai(e,r)))},b:function(){return Ji(n,Ji(i,ai(r,e)))}}}}];ID<x3.length;ID++)g7(x3[ID]);var hY=function(){function n(){}return n.prototype.fetch=function(t,e){return fetch(t,e)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},n.prototype.decode=function(t,e){return new TextDecoder(e).decode(t)},n}();de().get("IS_BROWSER")&&de().setPlatform("browser",new hY);var SD,gY=function(){function n(){this.util=Ni(753),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(t,e){return null!=de().global.fetch?de().global.fetch(t,e):(null==SD&&(SD=Ni(522)),SD(t,e))},n.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},n.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)},n.prototype.decode=function(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)},n}();de().get("IS_NODE")&&de().setPlatform("node",new gY);var TD={float32:4,int32:4,uint16:2,uint8:1,bool:1},jb=4;function C3(n,t){for(var e={},r=0,i=function(a){var u=a.name,c=a.dtype,d=a.shape,f=at(d),p=void 0;if("quantization"in a){var g=a.quantization;if("uint8"!==g.dtype&&"uint16"!==g.dtype)throw new Error("Weight "+a.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=TD[g.dtype],y=n.slice(r,r+f*v),w="uint8"===g.dtype?new Uint8Array(y):new Uint16Array(y);if("float32"===c)p=Float32Array.from(w,function(T){return T*g.scale+g.min});else{if("int32"!==c)throw new Error("Unsupported dtype in weight '"+u+"': "+c);p=Int32Array.from(w,function(T){return Math.round(T*g.scale+g.min)})}r+=f*v}else if("string"===c){var b=at(a.shape);p=[];for(var A=0;A<b;A++){var _=new Uint32Array(n.slice(r,r+jb))[0];r+=jb;var C=new Uint8Array(n.slice(r,r+_));p.push(C),r+=_}}else{var E=TD[c];if(y=n.slice(r,r+f*E),"float32"===c)p=new Float32Array(y);else if("int32"===c)p=new Int32Array(y);else{if("bool"!==c)throw new Error("Unsupported dtype in weight '"+u+"': "+c);p=new Uint8Array(y)}r+=f*E}e[u]=Pi(p,d,c)},o=0,s=t;o<s.length;o++)i(s[o]);return e}function mY(n){if(null===n)throw new Error("Invalid input value: "+JSON.stringify(n));var t=0,e=[];n.forEach(function(o){if(t+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(t),i=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var RD=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function _3(n){return RD?Buffer.byteLength(n):new Blob([n]).size}function MD(n){var t=0;n.forEach(function(i){t+=i.byteLength});var e=new Uint8Array(t),r=0;return n.forEach(function(i){e.set(new Uint8Array(i),r),r+=i.byteLength}),e.buffer}function E3(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var t=n.split("/");return t[t.length-1]}function Pv(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==n.modelTopology?0:_3(JSON.stringify(n.modelTopology)),weightSpecsBytes:null==n.weightSpecs?0:_3(JSON.stringify(n.weightSpecs)),weightDataBytes:null==n.weightData?0:n.weightData.byteLength}}var xs=function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n.registerSaveRouter=function(t){n.getInstance().saveRouters.push(t)},n.registerLoadRouter=function(t){n.getInstance().loadRouters.push(t)},n.getSaveHandlers=function(t){return n.getHandlers(t,"save")},n.getLoadHandlers=function(t,e){return n.getHandlers(t,"load",e)},n.getHandlers=function(t,e,r){var i=[];return("load"===e?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(function(o){var s=o(t,r);null!==s&&i.push(s)}),i},n}(),Ip="://",Sl=function(){function n(){this.managers={}}return n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n.registerManager=function(t,e){P(null!=t,function(){return"scheme must not be undefined or null."}),t.endsWith(Ip)&&(t=t.slice(0,t.indexOf(Ip))),P(t.length>0,function(){return"scheme must not be an empty string."});var r=n.getInstance();P(null==r.managers[t],function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=e},n.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n}();function Hb(n){if(-1===n.indexOf(Ip))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Sl.getSchemes().join(","));return{scheme:n.split(Ip)[0],path:n.split(Ip)[1]}}function D3(n,t,e){return void 0===e&&(e=!1),nt(this,void 0,void 0,function(){var r,i,o,s,a,u,c,d,f;return rt(this,function(p){switch(p.label){case 0:return P(n!==t,function(){return"Old path and new path are the same: '"+n+"'"}),P((r=xs.getLoadHandlers(n)).length>0,function(){return"Copying failed because no load handler is found for source URL "+n+"."}),P(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."}),i=r[0],P((o=xs.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),P(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),s=o[0],a=Hb(n).scheme,u=Hb(n).path,c=a===Hb(n).scheme,[4,i.load()];case 1:return d=p.sent(),e&&c?[4,Sl.getManager(a).removeModel(u)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[4,s.save(d)];case 4:return f=p.sent(),!e||c?[3,6]:[4,Sl.getManager(a).removeModel(u)];case 5:p.sent(),p.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var df="models_store",Tl="model_info_store";function I3(){if(!de().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,t=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function kD(n){var t=n.result;t.createObjectStore(df,{keyPath:"modelPath"}),t.createObjectStore(Tl,{keyPath:"modelPath"})}var Sp=function(){function n(t){if(this.indexedDB=I3(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return n.prototype.save=function(t){return nt(this,void 0,void 0,function(){return rt(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},n.prototype.load=function(){return nt(this,void 0,void 0,function(){return rt(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},n.prototype.databaseAction=function(t,e){var r=this;return new Promise(function(i,o){var s=r.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return kD(s)},s.onsuccess=function(){var a=s.result;if(null==e){var u=a.transaction(df,"readonly"),c=u.objectStore(df).get(r.modelPath);c.onsuccess=function(){if(null==c.result)return a.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(c.result.modelArtifacts)},c.onerror=function(y){return a.close(),o(c.error)},u.oncomplete=function(){return a.close()}}else{var d,f=Pv(e),p=a.transaction(Tl,"readwrite"),g=p.objectStore(Tl),v=g.put({modelPath:r.modelPath,modelArtifactsInfo:f});v.onsuccess=function(){var y=(d=a.transaction(df,"readwrite")).objectStore(df).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:f});y.onsuccess=function(){return i({modelArtifactsInfo:f})},y.onerror=function(w){var b=(g=p.objectStore(Tl)).delete(r.modelPath);b.onsuccess=function(){return a.close(),o(y.error)},b.onerror=function(A){return a.close(),o(y.error)}}},v.onerror=function(y){return a.close(),o(v.error)},p.oncomplete=function(){null==d?a.close():d.oncomplete=function(){return a.close()}}}},s.onerror=function(a){return o(s.error)}})},n.URL_SCHEME="indexeddb://",n}(),S3=function(n){return de().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Sp.URL_SCHEME)?(t=n.slice(Sp.URL_SCHEME.length),new Sp(t)):null;var t};xs.registerSaveRouter(S3),xs.registerLoadRouter(S3);var vY=function(){function n(){this.indexedDB=I3()}return n.prototype.listModels=function(){return nt(this,void 0,void 0,function(){var t=this;return rt(this,function(e){return[2,new Promise(function(r,i){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return kD(o)},o.onsuccess=function(){var s=o.result,a=s.transaction(Tl,"readonly"),u=a.objectStore(Tl).getAll();u.onsuccess=function(){for(var c={},d=0,f=u.result;d<f.length;d++){var p=f[d];c[p.modelPath]=p.modelArtifactsInfo}r(c)},u.onerror=function(c){return s.close(),i(u.error)},a.oncomplete=function(){return s.close()}},o.onerror=function(s){return i(o.error)}})]})})},n.prototype.removeModel=function(t){return nt(this,void 0,void 0,function(){var e=this;return rt(this,function(r){var i;return t=(i=t).startsWith(Sp.URL_SCHEME)?i.slice(Sp.URL_SCHEME.length):i,[2,new Promise(function(o,s){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return kD(a)},a.onsuccess=function(){var u,c=a.result,d=c.transaction(Tl,"readwrite"),f=d.objectStore(Tl),p=f.get(t);p.onsuccess=function(){if(null==p.result)return c.close(),s(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var g=f.delete(t),v=function(){var y=(u=c.transaction(df,"readwrite")).objectStore(df).delete(t);y.onsuccess=function(){return o(p.result.modelArtifactsInfo)},y.onerror=function(w){return s(p.error)}};g.onsuccess=v,g.onerror=function(y){return v(),c.close(),s(p.error)}},p.onerror=function(g){return c.close(),s(p.error)},d.oncomplete=function(){null==u?c.close():u.oncomplete=function(){return c.close()}}},a.onerror=function(u){return s(a.error)}})]})})},n}();if(de().getBool("IS_BROWSER"))try{Sl.registerManager(Sp.URL_SCHEME,new vY)}catch{}var wc="/",Tp="tensorflowjs_models",T3="info",yY="model_topology",wY="weight_specs",bY="weight_data",AY="model_metadata";function R3(n){return{info:[Tp,n,T3].join(wc),topology:[Tp,n,yY].join(wc),weightSpecs:[Tp,n,wY].join(wc),weightData:[Tp,n,bY].join(wc),modelMetadata:[Tp,n,AY].join(wc)}}function xY(n){var t=n.split(wc);if(t.length<3)throw new Error("Invalid key format: "+n);return t.slice(1,t.length-1).join(wc)}var Rp=function(){function n(t){if(!de().getBool("IS_BROWSER")||typeof window>"u"||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=R3(this.modelPath)}return n.prototype.save=function(t){return nt(this,void 0,void 0,function(){var e,r,i;return rt(this,function(o){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=Pv(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(s){if(RD)return Buffer.from(s).toString("base64");for(var a=new Uint8Array(s),u="",c=0,d=a.length;c<d;c++)u+=String.fromCharCode(a[c]);return btoa(u)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},n.prototype.load=function(){return nt(this,void 0,void 0,function(){var t,e,r,i,o,s,a;return rt(this,function(u){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(r=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,null==(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(o),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy,e.userDefinedMetadata=s.userDefinedMetadata),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(c){if(RD){var d=Buffer.from(c,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var f=atob(c),p=new Uint8Array(f.length),g=0;g<f.length;++g)p.set([f.charCodeAt(g)],g);return p.buffer}(a),[2,e]})})},n.URL_SCHEME="localstorage://",n}(),M3=function(n){return de().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Rp.URL_SCHEME)?(t=n.slice(Rp.URL_SCHEME.length),new Rp(t)):null;var t};xs.registerSaveRouter(M3),xs.registerLoadRouter(M3);var CY=function(){function n(){P(de().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),P(typeof window>"u"||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return n.prototype.listModels=function(){return nt(this,void 0,void 0,function(){var t,e,r,i,o,s;return rt(this,function(a){for(t={},e=Tp+wc,r=wc+T3,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(r)&&(s=xY(o),t[s]=JSON.parse(this.LS.getItem(o)));return[2,t]})})},n.prototype.removeModel=function(t){return nt(this,void 0,void 0,function(){var e,r;return rt(this,function(i){var o;if(t=(o=t).startsWith(Rp.URL_SCHEME)?o.slice(Rp.URL_SCHEME.length):o,e=R3(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},n}();if(de().getBool("IS_BROWSER"))try{Sl.registerManager(Rp.URL_SCHEME,new CY)}catch{}function k3(n){return new Promise(function(t){return setTimeout(t)}).then(n)}var PD=function(){function n(t){if(!de().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(n.URL_SCHEME)&&(t=t.slice(n.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return n.prototype.save=function(t){return nt(this,void 0,void 0,function(){var e,o,s,a;return rt(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return o=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),(s=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=o,[4,k3(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),null==t.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=e,[4,k3(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Pv(t)}]}})})},n.URL_SCHEME="downloads://",n}(),IY=function(){function n(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return n.prototype.load=function(){return nt(this,void 0,void 0,function(){var t,e,r=this;return rt(this,function(i){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,s){var a=new FileReader;a.onload=function(u){var c=JSON.parse(u.target.result),d=c.modelTopology;if(null!=d){0===e.length&&o({modelTopology:d});var f=c.weightsManifest;if(null!=f){var p;try{p=r.checkManifestAndWeightFiles(f,e)}catch(w){return void s(w)}var g=[],v=[],y=[];f.forEach(function(w){w.paths.forEach(function(b){v.push(b),y.push(null)}),g.push.apply(g,w.weights)}),f.forEach(function(w){w.paths.forEach(function(b){var A=new FileReader;A.onload=function(_){var C=_.target.result,E=v.indexOf(b);y[E]=C,-1===y.indexOf(null)&&o({modelTopology:d,weightSpecs:g,weightData:MD(y),format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,userDefinedMetadata:c.userDefinedMetadata})},A.onerror=function(_){return s("Failed to weights data from file of path '"+b+"'.")},A.readAsArrayBuffer(p[b])})})}else s(new Error("weightManifest field is missing from file "+t.name))}else s(new Error("modelTopology field is missing from file "+t.name))},a.onerror=function(u){return s("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(t)})]})})},n.prototype.checkManifestAndWeightFiles=function(t,e){for(var r=[],i=e.map(function(u){return E3(u.name)}),o={},s=0,a=t;s<a.length;s++)a[s].paths.forEach(function(u){var c=E3(u);if(-1!==r.indexOf(c))throw new Error("Duplicate file basename found in weights manifest: '"+c+"'");if(r.push(c),-1===i.indexOf(c))throw new Error("Weight file with basename '"+c+"' is not provided.");o[u]=e[i.indexOf(c)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},n}();function P3(n,t,e,r){var o;P(null!=(o=n)&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"}),function(o,s){P(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),P(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s}),P(s>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+s})}(e=e??0,r=r??1);var i=0;return Promise.all(n.map(function(o){return o.then(function(s){var a=e+ ++i/n.length*(r-e);return t(a),s}),o}))}function O3(n,t){return nt(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,d;return rt(this,function(f){switch(f.label){case 0:return null==t&&(t={}),e=null==t.fetchFunc?de().platform.fetch:t.fetchFunc,r=n.map(function(p){return e(p,t.requestInit,{isBinary:!0})}),i=0,o=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return s=f.sent(),[3,4];case 2:return[4,P3(r,t.onProgress,i,o)];case 3:s=f.sent(),f.label=4;case 4:return a=s.map(function(p){return p.arrayBuffer()}),u=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(a)];case 5:return d=f.sent(),[3,8];case 6:return[4,P3(a,t.onProgress,u,c)];case 7:d=f.sent(),f.label=8;case 8:return[2,d]}})})}function N3(n){var t=this;return function(e,r,i){return void 0===r&&(r=""),nt(t,void 0,void 0,function(){var o,s,a,u,c,d,f,p,g,v;return rt(this,function(y){switch(y.label){case 0:if(o=e.map(function(){return!1}),s={},a=null!=i?i.map(function(){return!1}):[],u=[],e.forEach(function(w,b){var A=0;w.weights.forEach(function(_){var E=TD["quantization"in _?_.quantization.dtype:_.dtype]*at(_.shape),T=function(){o[b]=!0,null==s[b]&&(s[b]=[]),s[b].push({manifestEntry:_,groupOffset:A,sizeBytes:E})};null!=i?i.forEach(function(O,N){O===_.name&&(T(),a[N]=!0)}):T(),u.push(_.name),A+=E})}),!a.every(function(w){return w}))throw c=i.filter(function(w,b){return!a[b]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return d=o.reduce(function(w,b,A){return b&&w.push(A),w},[]),f=[],d.forEach(function(w){e[w].paths.forEach(function(b){var A=r+(r.endsWith("/")?"":"/")+b;f.push(A)})}),[4,n(f)];case 1:return p=y.sent(),g={},v=0,d.forEach(function(w){for(var b=e[w].paths.length,A=0,_=0;_<b;_++)A+=p[v+_].byteLength;for(var C=new ArrayBuffer(A),E=new Uint8Array(C),T=0,O=0;O<b;O++){var N=new Uint8Array(p[v+O]);E.set(N,T),T+=N.byteLength}s[w].forEach(function(B){var F=C3(C.slice(B.groupOffset,B.groupOffset+B.sizeBytes),[B.manifestEntry]);for(var X in F)g[X]=F[X]}),v+=b}),[2,g]}})})}}xs.registerSaveRouter(function(n){return de().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(PD.URL_SCHEME)?(void 0===(t=n.slice(PD.URL_SCHEME.length))&&(t="model"),new PD(t)):null;var t});var F3=function(){function n(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(P("function"==typeof e.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=de().platform.fetch,P(null!=t&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&P(2===t.length,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return n.prototype.save=function(t){return nt(this,void 0,void 0,function(){var e,o;return rt(this,function(s){switch(s.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=s.sent()).ok)return[2,{modelArtifactsInfo:Pv(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},n.prototype.load=function(){return nt(this,void 0,void 0,function(){var t,e,r,i,o,s,a,u,c,d,f,p;return rt(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,t.json()];case 3:return e=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=e.weightsManifest,s=e.generatedBy,a=e.convertedBy,u=e.format,c=e.userDefinedMetadata,null==(i=e.modelTopology)&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:p=g.sent(),d=p[0],f=p[1],g.label=7;case 7:return[2,{modelTopology:i,weightSpecs:d,weightData:f,userDefinedMetadata:c,generatedBy:s,convertedBy:a,format:u}]}})})},n.prototype.loadWeights=function(t){return nt(this,void 0,void 0,function(){var r,i,o,s,a,u,c,f,p;return rt(this,function(g){switch(g.label){case 0:for(void 0,void 0,y=(v=Array.isArray(this.path)?this.path[1]:this.path).lastIndexOf("/"),w=v.lastIndexOf("?"),r=[v.substring(0,y)+"/",w>y?v.substring(w):""],i=r[0],o=r[1],s=this.weightPathPrefix||i,a=[],u=0,c=t;u<c.length;u++)a.push.apply(a,c[u].weights);return f=[],t.forEach(function(v){v.paths.forEach(function(y){f.push(s+y+o)})}),[4,O3(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return p=g.sent(),[2,[a,MD(p)]]}var v,y,w})})},n.URL_SCHEME_REGEX=/^https?:\/\//,n}();function OD(n){return null!=n.match(F3.URL_SCHEME_REGEX)}var B3=function(n,t){return typeof fetch>"u"?null:(Array.isArray(n)?n.every(function(e){return OD(e)}):OD(n))?ND(n,{onProgress:t}):null};function ND(n,t){return new F3(n,t)}xs.registerSaveRouter(B3),xs.registerLoadRouter(B3);var Mp,FD=function(){function n(t){this.modelArtifacts=t}return n.prototype.load=function(){return nt(this,void 0,void 0,function(){return rt(this,function(t){return[2,this.modelArtifacts]})})},n}(),SY=function(){function n(t){this.saveHandler=t}return n.prototype.save=function(t){return nt(this,void 0,void 0,function(){return rt(this,function(e){return[2,this.saveHandler(t)]})})},n}(),L3=Object.freeze({browserFiles:function(n){return new IY(n)},browserHTTPRequest:function(n,t){return ND(n,t)},concatenateArrayBuffers:MD,decodeWeights:C3,encodeWeights:function(n,t){return nt(this,void 0,void 0,function(){var e,r,i,o,s,a=this;return rt(this,function(u){switch(u.label){case 0:for(e=[],r=[],i=Array.isArray(n)?n.map(function(c){return c.name}):Object.keys(n),o=function(c){var d=i[c],f=Array.isArray(n)?n[c].tensor:n[d];if("float32"!==f.dtype&&"int32"!==f.dtype&&"bool"!==f.dtype&&"string"!==f.dtype)throw new Error("Unsupported dtype in weight '"+d+"': "+f.dtype);var p={name:d,shape:f.shape,dtype:f.dtype};if("string"===f.dtype){var g=new Promise(function(v){return nt(a,void 0,void 0,function(){var y,w,b,A,_,C,E;return rt(this,function(T){switch(T.label){case 0:return[4,f.bytes()];case 1:for(y=T.sent(),w=y.reduce(function(O,N){return O+N.length},0)+jb*y.length,b=new Uint8Array(w),A=0,_=0;_<y.length;_++)C=y[_],E=new Uint8Array(new Uint32Array([C.length]).buffer),b.set(E,A),b.set(C,A+=jb),A+=C.length;return v(b),[2]}})})});r.push(g)}else r.push(f.data());null!=t&&(p.group=t),e.push(p)},s=0;s<i.length;++s)o(s);return[4,Promise.all(r)];case 1:return[2,{data:mY(u.sent()),specs:e}]}})})},fromMemory:function(n,t,e,r){return 1===arguments.length?null!=n.modelTopology||null!=n.weightSpecs?new FD(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new FD({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new FD({modelTopology:n,weightSpecs:t,weightData:e,trainingConfig:r}))},getLoadHandlers:function(n,t){return xs.getLoadHandlers(n,t)},getModelArtifactsInfoForJSON:Pv,getSaveHandlers:function(n){return xs.getSaveHandlers(n)},http:ND,isHTTPScheme:OD,loadWeights:function(n,t,e,r){return void 0===t&&(t=""),nt(this,void 0,void 0,function(){return rt(this,function(i){return[2,N3(function(o){return O3(o,{requestInit:r})})(n,t,e)]})})},registerLoadRouter:function(n){return xs.registerLoadRouter(n)},registerSaveRouter:function(n){return xs.registerSaveRouter(n)},weightsLoaderFactory:N3,withSaveHandler:function(n){return new SY(n)},copyModel:function(n,t){return nt(this,void 0,void 0,function(){return rt(this,function(e){return[2,D3(n,t,!1)]})})},listModels:function(){return nt(this,void 0,void 0,function(){var n,t,e,r,i,o,s;return rt(this,function(a){switch(a.label){case 0:n=Sl.getSchemes(),t={},e=0,r=n,a.label=1;case 1:return e<r.length?[4,Sl.getManager(i=r[e]).listModels()]:[3,4];case 2:for(s in o=a.sent())t[i+Ip+s]=o[s];a.label=3;case 3:return e++,[3,1];case 4:return[2,t]}})})},moveModel:function(n,t){return nt(this,void 0,void 0,function(){return rt(this,function(e){return[2,D3(n,t,!0)]})})},removeModel:function(n){return nt(this,void 0,void 0,function(){var t;return rt(this,function(e){return t=Hb(n),[2,Sl.getManager(t.scheme).removeModel(t.path)]})})}}),TY=W({confusionMatrix_:function(n,t,e){var r=M(n,"labels","confusionMatrix"),i=M(t,"predictions","confusionMatrix");P(null==e||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),P(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),P(1===i.rank,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),P(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),P(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=UE(r.asType("int32"),e),s=UE(i.asType("int32"),e);return o.transpose().matMul(s).asType("int32")}}),RY=(Object.freeze({confusionMatrix:TY}),W({fromPixels_:function(n,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==n)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,r=!1,i=!1,o=!1,s=!1;if(n.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)o=!0;else{if(null==n.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);s=!0}if(i&&i&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=TO("FromPixels",H.backendName))return H.runKernel("FromPixels",{pixels:n},{numChannels:t});var a,u,c=i?[n.videoWidth,n.videoHeight]:[n.width,n.height],d=c[0],f=c[1];if(s?a=n.getContext("2d").getImageData(0,0,d,f).data:r||e?a=n.data:(o||i)&&(null==Mp&&(Mp=document.createElement("canvas").getContext("2d")),Mp.canvas.width=d,Mp.canvas.height=f,Mp.drawImage(n,0,0,d,f),a=Mp.getImageData(0,0,d,f).data),4===t)u=new Int32Array(a);else{var p=d*f;u=new Int32Array(p*t);for(var g=0;g<p;g++)for(var v=0;v<t;++v)u[g*t+v]=a[4*g+v]}return FE(u,[f,d,t],"int32")}})),BD=Object.freeze({toPixels:function(n,t){return nt(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,d,g,v,y,w,b,A,_,C,E,T,O,N;return rt(this,function(B){switch(B.label){case 0:if(e=M(n,"img","toPixels"),n instanceof Hn||(e=e.toInt()),2!==e.rank&&3!==e.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),i=r[0],o=r[1],(s=2===e.rank?1:e.shape[2])>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,e.data()];case 1:return a=B.sent(),u=e.min(),c=e.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(d=B.sent(),g=d[0][0],v=d[1][0],u.dispose(),c.dispose(),"float32"===e.dtype){if(g<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+v+"].")}else{if("int32"!==e.dtype)throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(g<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+v+"].")}for(y="float32"===e.dtype?255:1,w=new Uint8ClampedArray(o*i*4),b=0;b<i*o;++b)A=void 0,_=void 0,C=void 0,E=void 0,1===s?(A=a[b]*y,_=a[b]*y,C=a[b]*y,E=255):3===s?(A=a[3*b]*y,_=a[3*b+1]*y,C=a[3*b+2]*y,E=255):4===s&&(A=a[4*b]*y,_=a[4*b+1]*y,C=a[4*b+2]*y,E=a[4*b+3]*y),w[0+(T=4*b)]=Math.round(A),w[T+1]=Math.round(_),w[T+2]=Math.round(C),w[T+3]=Math.round(E);return null!=t&&(t.width=o,t.height=i,O=t.getContext("2d"),N=new ImageData(w,o,i),O.putImageData(N,0,0)),e!==n&&e.dispose(),[2,w]}})})},fromPixels:RY}),U3=function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(t,e){return new t(e)},n}(),z3=function(){function n(){this.classNameMap={}}return n.getMap=function(){return null==n.instance&&(n.instance=new n),n.instance},n.register=function(t){n.getMap().classNameMap[t.className]=[t,t.fromConfig]},n}();function Rl(n){P(null!=n.className,function(){return"Class being registered does not have the static className property defined."}),P("string"==typeof n.className,function(){return"className is required to be a string, but got type "+typeof n.className}),P(n.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),z3.register(n)}function LD(){return 32===H.backend.floatPrecision()?.001:.1}function UD(n,t,e){var r=!0;if((Ri(n)||Ri(t))&&(r=!1),Ri(n)&&Ri(t)&&(r=!0),r){var i=n.constructor.name,o=t.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(n)&&Array.isArray(t)){var s=pu(n),a=pu(t);if(!qr(s,a))throw new Error("Arrays have different shapes. Actual: ["+s+"]. Expected: ["+a+"]")}var u=Ri(n)?n:fc(n),c=Ri(t)?t:fc(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".");for(var d=0;d<c.length;++d){var f=u[d],p=c[d];if(!e(f,p))throw new Error("Arrays differ: actual["+d+"] = "+f+", expected["+d+"] = "+p+".\nActual:   "+u+".\nExpected: "+c+".")}}function zD(n,t,e){return!isFinite(n)&&!isFinite(t)||!(isNaN(n)||isNaN(t)||Math.abs(n-t)>e)}Object.freeze({Serializable:U3,SerializationMap:z3,registerClass:Rl}),Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(n,t,e){return null==e&&(e=LD()),UD(n,t,function(r,i){return zD(r,i,e)})},testEpsilon:LD,expectPromiseToFail:function(n,t){n().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(n,t){var e="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return xl(n)||xl(n[0])||xl(t)||xl(t[0])?UD(n,e,function(r,i){return r==i}):UD(n,t,function(r,i){return zD(r,i,0)})},expectNumbersClose:function(n,t,e){if(null==e&&(e=LD()),!zD(n,t,e))throw new Error("Numbers differ: actual === "+n+", expected === "+t)},expectValuesInRange:function(n,t,e){for(var r=0;r<n.length;r++)if(n[r]<t||n[r]>e)throw new Error("Value out of range:"+n[r]+" low: "+t+", high: "+e)},expectArrayBuffersEqual:function(n,t){expect(new Float32Array(n)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:eG,webgl_util:_7,forceHalfFloat:function(){de().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:LF,setWebGLContext:JO,GPGPUContext:AF});var ff=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Da(t,n),t.prototype.minimize=function(e,r,i){void 0===r&&(r=!1);var o=this.computeGradients(e,i),s=o.value,a=o.grads;if(null!=i){var u=i.map(function(c){return{name:c.name,tensor:a[c.name]}});this.applyGradients(u)}else this.applyGradients(a);return Qo(a),r?s:(s.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,r){return function i9(n,t){P(Cl(n),function(){return"The f passed in variableGrads(f) must be a function"}),P(null==t||Array.isArray(t)&&t.every(function(d){return d instanceof vp}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=null!=t;if(!e)for(var r in t=[],H.registeredVariables)t.push(H.registeredVariables[r]);var i=e?t.filter(function(d){return!d.trainable}):null,o=t.length;P((t=t.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var s=H.gradients(n,t,null,!0),a=s.value,u=s.grads;P(u.some(function(d){return null!=d}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),P(0===a.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var c={};return t.forEach(function(d,f){null!=u[f]&&(c[d.name]=u[f])}),i?.forEach(function(d){return c[d.name]=null}),{value:a,grads:c}}(e,r)},t.prototype.dispose=function(){null!=this.iterations_&&Qo(this.iterations_)},t.prototype.saveIterations=function(){return nt(this,void 0,void 0,function(){return rt(this,function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:We(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return nt(this,void 0,void 0,function(){return rt(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(e){return nt(this,void 0,void 0,function(){return rt(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(e){return nt(this,void 0,void 0,function(){var r;return rt(this,function(i){switch(i.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,e.slice(1)]}})})},t}(U3);Object.defineProperty(ff,Symbol.hasInstance,{value:function(n){return null!=n.minimize&&null!=n.computeGradients&&null!=n.applyGradients}});var H3=function(n){function t(e,r,i){void 0===i&&(i=null);var o=n.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==i&&(o.epsilon=H.backend.epsilon()),o}return Da(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=H.registeredVariables[i];null==r.accumulatedGrads[o]&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:Je(function(){return hn(s).variable(!1)})}),null==r.accumulatedUpdates[o]&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:Je(function(){return hn(s).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(null!=a){var u=r.accumulatedGrads[o].variable,c=r.accumulatedUpdates[o].variable;Je(function(){var d=u.mul(r.rho).add(a.square().mul(1-r.rho)),f=c.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(a),p=c.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(d),c.assign(p);var g=f.mul(-r.learningRate).add(s);s.assign(g)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(Qo(this.accumulatedGrads.map(function(e){return e.variable})),Qo(this.accumulatedUpdates.map(function(e){return e.variable})))},t.prototype.getWeights=function(){return nt(this,void 0,void 0,function(){var e;return rt(this,function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},t.prototype.setWeights=function(e){return nt(this,void 0,void 0,function(){var r;return rt(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),this.accumulatedGrads=e.slice(0,r=e.length/2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(ff);Rl(H3);var W3=function(n){function t(e,r){void 0===r&&(r=.1);var i=n.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Da(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=H.registeredVariables[i];null==r.accumulatedGrads[o]&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:Je(function(){return mu(s.shape,r.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(null!=a){var u=r.accumulatedGrads[o].variable;Je(function(){var c=u.add(a.square());u.assign(c);var d=a.div(c.add(H.backend.epsilon()).sqrt()).mul(-r.learningRate).add(s);s.assign(d)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&Qo(this.accumulatedGrads.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return nt(this,void 0,void 0,function(){return rt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(e){return nt(this,void 0,void 0,function(){return rt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(ff);Rl(W3);var V3=function(n){function t(e,r,i,o){void 0===o&&(o=null);var s=n.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=i,s.epsilon=o,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],Je(function(){s.accBeta1=We(r).variable(),s.accBeta2=We(i).variable()}),null==o&&(s.epsilon=H.backend.epsilon()),s}return Da(t,n),t.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Je(function(){var o=ai(1,r.accBeta1),s=ai(1,r.accBeta2);i.forEach(function(a,u){var c=H.registeredVariables[a];null==r.accumulatedFirstMoment[u]&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:Je(function(){return hn(c).variable(!1)})}),null==r.accumulatedSecondMoment[u]&&(r.accumulatedSecondMoment[u]={originalName:a+"/v",variable:Je(function(){return hn(c).variable(!1)})});var d=Array.isArray(e)?e[u].tensor:e[a];if(null!=d){var f=r.accumulatedFirstMoment[u].variable,p=r.accumulatedSecondMoment[u].variable,g=f.mul(r.beta1).add(d.mul(1-r.beta1)),v=p.mul(r.beta2).add(d.square().mul(1-r.beta2)),y=g.div(o),w=v.div(s);f.assign(g),p.assign(v);var b=y.div(w.sqrt().add(r.epsilon)).mul(-r.learningRate).add(c);c.assign(b)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Qo(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedSecondMoment&&Qo(this.accumulatedSecondMoment.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return nt(this,void 0,void 0,function(){var e;return rt(this,function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},t.prototype.setWeights=function(e){return nt(this,void 0,void 0,function(){var r,i=this;return rt(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),Je(function(){i.accBeta1.assign(Nb(i.beta1,i.iterations_+1)),i.accBeta2.assign(Nb(i.beta2,i.iterations_+1))}),this.accumulatedFirstMoment=e.slice(0,r=e.length/2).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(ff);Rl(V3);var q3=function(n){function t(e,r,i,o,s){void 0===o&&(o=null),void 0===s&&(s=0);var a=n.call(this)||this;return a.learningRate=e,a.beta1=r,a.beta2=i,a.epsilon=o,a.decay=s,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],Je(function(){a.iteration=We(0).variable(),a.accBeta1=We(r).variable()}),null==o&&(a.epsilon=H.backend.epsilon()),a}return Da(t,n),t.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);Je(function(){var o=ai(1,r.accBeta1),s=Pa(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(a,u){var c=H.registeredVariables[a];null==r.accumulatedFirstMoment[u]&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:hn(c).variable(!1)}),null==r.accumulatedWeightedInfNorm[u]&&(r.accumulatedWeightedInfNorm[u]={originalName:a+"/v",variable:hn(c).variable(!1)});var d=Array.isArray(e)?e[u].tensor:e[a];if(null!=d){var f=r.accumulatedFirstMoment[u].variable,p=r.accumulatedWeightedInfNorm[u].variable,g=f.mul(r.beta1).add(d.mul(1-r.beta1)),v=p.mul(r.beta2),y=d.abs(),w=v.maximum(y);f.assign(g),p.assign(w);var b=s.div(o).mul(g.div(w.add(r.epsilon))).add(c);c.assign(b)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Qo(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedWeightedInfNorm&&Qo(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return nt(this,void 0,void 0,function(){return rt(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(e){return nt(this,void 0,void 0,function(){return rt(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(ff);Rl(q3);var jD=function(n){function t(e){var r=n.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return Da(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=Array.isArray(e)?e[o].tensor:e[i];if(null!=s){var a=H.registeredVariables[i];Je(function(){var u=r.c.mul(s).add(a);a.assign(u)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function E7(n){return H.keep(n)}(We(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return nt(this,void 0,void 0,function(){return rt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},t.prototype.setWeights=function(e){return nt(this,void 0,void 0,function(){return rt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=r.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,r){return new e(r.learningRate)},t.className="SGD",t}(ff);Rl(jD);var G3=function(n){function t(e,r,i){void 0===i&&(i=!1);var o=n.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=We(o.momentum),o}return Da(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=H.registeredVariables[i];null==r.accumulations[o]&&(r.accumulations[o]={originalName:i+"/momentum",variable:Je(function(){return hn(s).variable(!1)})});var a=r.accumulations[o].variable,u=Array.isArray(e)?e[o].tensor:e[i];null!=u&&Je(function(){var c,d=r.m.mul(a).add(u);c=r.useNesterov?r.c.mul(u.add(d.mul(r.m))).add(s):r.c.mul(d).add(s),a.assign(d),s.assign(c)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&Qo(this.accumulations.map(function(e){return e.variable}))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return nt(this,void 0,void 0,function(){return rt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(e){return nt(this,void 0,void 0,function(){return rt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(jD);Rl(G3);var K3=function(n){function t(e,r,i,o,s){void 0===r&&(r=.9),void 0===i&&(i=0),void 0===o&&(o=null),void 0===s&&(s=!1);var a=n.call(this)||this;if(a.learningRate=e,a.decay=r,a.momentum=i,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=s,null==o&&(a.epsilon=H.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return Da(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=H.registeredVariables[i];null==r.accumulatedMeanSquares[o]&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:Je(function(){return hn(s).variable(!1)})}),null==r.accumulatedMoments[o]&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:Je(function(){return hn(s).variable(!1)})}),null==r.accumulatedMeanGrads[o]&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:Je(function(){return hn(s).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(null!=a){var u=r.accumulatedMeanSquares[o].variable,c=r.accumulatedMoments[o].variable;Je(function(){var d=u.mul(r.decay).add(a.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[o].variable,p=f.mul(r.decay).add(a.mul(1-r.decay)),g=c.mul(r.momentum).add(a.mul(r.learningRate).div(d.sub(p.square().add(r.epsilon)).sqrt()));u.assign(d),f.assign(p),c.assign(g);var v=s.sub(g);s.assign(v)}else{var y=u.mul(r.decay).add(a.square().mul(1-r.decay));g=c.mul(r.momentum).add(a.mul(r.learningRate).div(y.add(r.epsilon).sqrt())),u.assign(y),c.assign(g),v=s.sub(g),s.assign(v)}})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&Qo(this.accumulatedMeanSquares.map(function(e){return e.variable})),null!=this.accumulatedMeanGrads&&this.centered&&Qo(this.accumulatedMeanGrads.map(function(e){return e.variable})),null!=this.accumulatedMoments&&Qo(this.accumulatedMoments.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return nt(this,void 0,void 0,function(){var e;return rt(this,function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},t.prototype.setWeights=function(e){return nt(this,void 0,void 0,function(){var r;return rt(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),this.accumulatedMeanSquares=e.slice(0,r=this.centered?e.length/3:e.length/2).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(ff);Rl(K3),function(){function n(){}n.sgd=function(t){return new jD(t)},n.momentum=function(t,e,r){return void 0===r&&(r=!1),new G3(t,e,r)},n.rmsprop=function(t,e,r,i,o){return void 0===e&&(e=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=!1),new K3(t,e,r,i,o)},n.adam=function(t,e,r,i){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===r&&(r=.999),void 0===i&&(i=null),new V3(t,e,r,i)},n.adadelta=function(t,e,r){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===r&&(r=null),new H3(t,e,r)},n.adamax=function(t,e,r,i,o){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===r&&(r=.999),void 0===i&&(i=null),void 0===o&&(o=0),new q3(t,e,r,i,o)},n.adagrad=function(t,e){return void 0===e&&(e=.1),new W3(t,e)}}(),typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"&&setImmediate,Hn.prototype.squaredDifference=function(n){return UF(this,n)},le=cY;var HD=function(n,t){return(HD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(n,t)};function Ot(n,t){function e(){this.constructor=n}HD(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var $i=function(){return $i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},$i.apply(this,arguments)};function ht(n,t,e,r){return new(e||(e=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(f){s(f)}}function u(d){try{c(r.throw(d))}catch(f){s(f)}}function c(d){d.done?o(d.value):function i(o){return o instanceof e?o:new e(function(s){s(o)})}(d.value).then(a,u)}c((r=r.apply(n,t||[])).next())})}function pt(n,t){var r,i,o,s,e={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(d){return function u(c){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=2&c[0]?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(!(o=(o=e.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(6===c[0]&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(n,e)}catch(d){c=[6,d],i=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,d])}}}function Ov(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var r=Array(n),i=0;for(t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var gf=function(){function n(t,e){if(!mf(t)||!mf(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:e}));this._width=t,this._height=e}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n}();function Nv(n,t){return n instanceof Hn&&n.shape.length===t}function Vb(n){return Nv(n,3)}function Ml(n){return Nv(n,4)}function Y3(n){return n%2==0}function WD(n,t){void 0===t&&(t=2);var e=Math.pow(10,t);return Math.floor(n*e)/e}function X3(n){return n&&n.width&&n.height}function VD(n){return n.reduce(function(t,e){return t.add(e)},new An(0,0)).div(new An(n.length,n.length))}function Fv(n,t,e){return Array(n).fill(0).map(function(r,i){return t+i*e})}function mf(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||0===n}function J3(n){return mf(n)&&0<=n&&n<=1}var An=function(){function n(t,e){this._x=t,this._y=e}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.prototype.sub=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.mul=function(t){return new n(this.x*t.x,this.y*t.y)},n.prototype.div=function(t){return new n(this.x/t.x,this.y/t.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n}(),yu=function(){function n(t,e){void 0===e&&(e=!0);var r=t||{},i=[r.left,r.top,r.right,r.bottom].every(mf),o=[r.x,r.y,r.width,r.height].every(mf);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var s=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],a=s[0],u=s[1],c=s[2],d=s[3];n.assertIsValidBox({x:a,y:u,width:c,height:d},"Box.constructor",e),this._x=a,this._y=u,this._width=c,this._height=d}return n.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(mf)},n.assertIsValidBox=function(t,e,r){if(void 0===r&&(r=!1),!n.isRect(t))throw new Error(e+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(e+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new An(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new An(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new An(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new An(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(s){return Math.round(s)});return new n({x:t[0],y:t[1],width:t[2],height:t[3]})},n.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(s){return Math.floor(s)});return new n({x:t[0],y:t[1],width:t[2],height:t[3]})},n.prototype.toSquare=function(){var t=this,e=t.x,r=t.y,i=t.width,o=t.height,s=Math.abs(i-o);return i<o&&(e-=s/2,i+=s),o<i&&(r-=s/2,o+=s),new n({x:e,y:r,width:i,height:o})},n.prototype.rescale=function(t){var e=X3(t)?t.width:t,r=X3(t)?t.height:t;return new n({x:this.x*e,y:this.y*r,width:this.width*e,height:this.height*r})},n.prototype.pad=function(t,e){var r=[this.x-t/2,this.y-e/2,this.width+t,this.height+e];return new n({x:r[0],y:r[1],width:r[2],height:r[3]})},n.prototype.clipAtImageBorders=function(t,e){var r=this,o=r.y,s=r.right,a=r.bottom,u=Math.max(r.x,0),c=Math.max(o,0),f=a-c;return new n({x:u,y:c,width:Math.min(s-u,t-u),height:Math.min(f,e-c)}).floor()},n.prototype.shift=function(t,e){return new n({x:this.x+t,y:this.y+e,width:this.width,height:this.height})},n.prototype.padAtBorders=function(t,e){var r=this.width+1,i=this.height+1,a=r,u=i,c=this.left,d=this.top,f=this.right,p=this.bottom;return f>e&&(a=-f+e+r,f=e),p>t&&(u=-p+t+i,p=t),c<1&&(u=2-c,c=1),d<1&&(u=2-d,d=1),{dy:1,edy:u,dx:1,edx:a,y:d,ey:p,x:c,ex:f,w:r,h:i}},n.prototype.calibrate=function(t){return new n({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},n}(),qb=function(n){function t(e,r,i,o,s){return void 0===s&&(s=!1),n.call(this,{left:e,top:r,right:i,bottom:o},s)||this}return Ot(t,n),t}(yu),Z3=function(){function n(t,e,r,i,o){this._imageDims=new gf(o.width,o.height),this._score=t,this._classScore=e,this._className=r,this._box=new yu(i).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new yu(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(t,e){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:e})},n}(),Cs=function(n){function t(e,r,i){return n.call(this,e,e,"",r,i)||this}return Ot(t,n),t.prototype.forSize=function(e,r){var i=n.prototype.forSize.call(this,e,r);return new t(i.score,i.relativeBox,i.imageDims)},t}(Z3);function LY(n,t,e){void 0===e&&(e=!0);var o=Math.max(0,Math.min(n.right,t.right)-Math.max(n.left,t.left))*Math.max(0,Math.min(n.bottom,t.bottom)-Math.max(n.top,t.top));return e?o/(n.area+t.area-o):o/Math.min(n.area,t.area)}function Bv(n,t,e,r){void 0===r&&(r=!0);for(var i=t.map(function(a,u){return{score:a,boxIndex:u}}).sort(function(a,u){return a.score-u.score}).map(function(a){return a.boxIndex}),o=[],s=function(){var a=i.pop();o.push(a);for(var u=i,c=[],d=0;d<u.length;d++)c.push(LY(n[a],n[u[d]],r));i=i.filter(function(v,y){return c[y]<=e})};i.length>0;)s();return o}function Lv(n,t){return Je(function(){var e=t[0],r=t[1],i=t[2],o=mu(Ov(n.shape.slice(0,3),[1]),e),s=mu(Ov(n.shape.slice(0,3),[1]),r),a=mu(Ov(n.shape.slice(0,3),[1]),i),u=oi([o,s,a],3);return ai(n,u)})}function qD(n){return 1/(1+Math.exp(-n))}var ui,GD=function(n){function t(e,r,i,o,s){return void 0===s&&(s=!1),n.call(this,{x:e,y:r,width:i,height:o},s)||this}return Ot(t,n),t}(yu),kp=function(){function n(t,e,r){void 0===r&&(r=new An(0,0));var i=e.width,o=e.height;this._imgDims=new gf(i,o),this._shift=r,this._positions=t.map(function(s){return s.mul(new An(i,o)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new An(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(e){return e.sub(t._shift).div(new An(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(t,e){return new this.constructor(this.relativePositions,{width:t,height:e})},n.prototype.shiftBy=function(t,e){return new this.constructor(this.relativePositions,this._imgDims,new An(t,e))},n.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},n.prototype.align=function(t,e){if(void 0===e&&(e={}),t){var r=t instanceof Cs?t.box.floor():new yu(t);return this.shiftBy(r.x,r.y).align(null,e)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),s=i.minBoxPadding;return i.useDlibAlignment?this.alignDlib():this.alignMinBbox(s)},n.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),r=t[1],i=t[2],o=function(f){return i.sub(f).magnitude()},s=(o(t[0])+o(r))/2,a=Math.floor(s/.45),u=VD(t),c=Math.floor(Math.max(0,u.x-.5*a)),d=Math.floor(Math.max(0,u.y-.43*a));return new GD(c,d,Math.min(a,this.imageWidth+c),Math.min(a,this.imageHeight+d))},n.prototype.alignMinBbox=function(t){var e=function BY(n){var t=n.map(function(a){return a.x}),e=n.map(function(a){return a.y}),r=t.reduce(function(a,u){return u<a?u:a},1/0),i=e.reduce(function(a,u){return u<a?u:a},1/0),o=t.reduce(function(a,u){return a<u?u:a},0),s=e.reduce(function(a,u){return a<u?u:a},0);return new qb(r,i,o,s)}(this.positions);return e.pad(e.width*t,e.height*t)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n}(),WY=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],VD([e[3],e[4]])]},t}(kp),$3=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(VD)},t}(kp),eB=function(){function n(t,e){this._label=t,this._distance=e}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(t){return void 0===t&&(t=!0),this.label+(t?" ("+WD(this.distance)+")":"")},n}(),tB=function(n){function t(e,r){var i=n.call(this,e)||this;return i._label=r,i}return Ot(t,n),t.assertIsValidLabeledBox=function(e,r){if(yu.assertIsValidBox(e,r),!mf(e.label))throw new Error(r+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(yu),Gb=function(){function n(t,e){if("string"!=typeof t)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=e}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},n.fromJSON=function(t){var e=t.descriptors.map(function(r){return new Float32Array(r)});return new n(t.label,e)},n}();function Uv(n){return n.detection instanceof Cs}function zv(n,t){return Object.assign({},n,{detection:t})}function nB(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function rB(n){var t="";if(!n)try{n=Ni(Object(function(){var i=new Error("Cannot find module 'fs'");throw i.code="MODULE_NOT_FOUND",i}()))}catch(r){t=r.toString()}return{readFile:n?function(r){return new Promise(function(i,o){n.readFile(r,function(s,a){return s?o(s):i(a)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function iB(){var n=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=rB();return $i({Canvas:n||function s(){},CanvasRenderingContext2D:global.CanvasRenderingContext2D||function s(){},Image:t||function s(){},ImageData:global.ImageData||function s(){},Video:global.HTMLVideoElement||function s(){},createCanvasElement:function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:i},o)}function oB(){return"object"==typeof window&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function sB(){return"object"==typeof global&&typeof process<"u"&&!!process.version}function KD(n){ui=n}function QD(){oB()&&KD(nB()),sB()&&KD(iB())}!function(n){function t(e,r,i,o){var s=n.call(this,e,r)||this;return s._score=i,s._classScore=o,s}Ot(t,n),t.assertIsValidPredictedBox=function(e,r){if(tB.assertIsValidLabeledBox(e,r),!J3(e.score)||!J3(e.classScore))throw new Error(r+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(tB);var eo={getEnv:function VY(){if(!ui)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return ui},setEnv:KD,initialize:QD,createBrowserEnv:nB,createFileSystem:rB,createNodejsEnv:iB,monkeyPatch:function qY(n){if(ui||QD(),!ui)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=n.Canvas,e=void 0===t?ui.Canvas:t,r=n.Image,i=void 0===r?ui.Image:r;ui.Canvas=e,ui.Image=i,ui.createCanvasElement=n.createCanvasElement||function(){return new e},ui.createImageElement=n.createImageElement||function(){return new i},ui.ImageData=n.ImageData||ui.ImageData,ui.Video=n.Video||ui.Video,ui.fetch=n.fetch||ui.fetch,ui.readFile=n.readFile||ui.readFile},isBrowser:oB,isNodejs:sB};function YD(n){return eo.isNodejs()||"string"!=typeof n?n:document.getElementById(n)}function wu(n){var t=eo.getEnv(),e=t.Canvas;if(n instanceof t.CanvasRenderingContext2D)return n;var i=YD(n);if(!(i instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}QD();var vf=function(n){return n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT",n}(vf||{}),aB=function n(t){void 0===t&&(t={});var r=t.backgroundColor,i=t.fontColor,o=t.fontSize,s=t.fontStyle,a=t.padding;this.anchorPosition=t.anchorPosition||vf.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=i||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=s||"Georgia",this.padding=a||4},uB=function(){function n(t,e,r){void 0===r&&(r={}),this.text="string"==typeof t?[t]:t instanceof n?t.text:t,this.anchor=e,this.options=new aB(r)}return n.prototype.measureWidth=function(t){var e=this.options.padding;return this.text.map(function(r){return t.measureText(r).width}).reduce(function(r,i){return r<i?i:r},0)+2*e},n.prototype.measureHeight=function(){var t=this.options;return this.text.length*t.fontSize+2*t.padding},n.prototype.getUpperLeft=function(t,e){var r=this.options.anchorPosition,i=r===vf.BOTTOM_RIGHT||r===vf.TOP_RIGHT,o=r===vf.BOTTOM_LEFT||r===vf.BOTTOM_RIGHT,s=this.measureWidth(t),a=this.measureHeight(),u=i?this.anchor.x-s:this.anchor.x,c=o?this.anchor.y-a:this.anchor.y;if(e){var f=e.height;return{x:Math.max(Math.min(u,e.width-s),0),y:Math.max(Math.min(c,f-a),0)}}return{x:u,y:c}},n.prototype.draw=function(t){var e=YD(t),r=wu(e),i=this.options,o=i.backgroundColor,s=i.fontColor,a=i.fontSize,c=i.padding;r.font=a+"px "+i.fontStyle;var d=this.measureWidth(r),f=this.measureHeight();r.fillStyle=o;var p=this.getUpperLeft(r,e);r.fillRect(p.x,p.y,d,f),r.fillStyle=s,this.text.forEach(function(g,v){r.fillText(g,c+p.x,c+p.y+(v+1)*a)})},n}(),GY=function n(t){void 0===t&&(t={});var r=t.lineWidth,i=t.label,o=t.drawLabelOptions;this.boxColor=t.boxColor||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=i,this.drawLabelOptions=new aB(Object.assign({},{anchorPosition:vf.BOTTOM_LEFT,backgroundColor:this.boxColor},o))},KY=function(){function n(t,e){void 0===e&&(e={}),this.box=new yu(t),this.options=new GY(e)}return n.prototype.draw=function(t){var e=wu(t),r=this.options,o=r.lineWidth,s=this.box,a=s.x,u=s.y,c=s.width,d=s.height;e.strokeStyle=r.boxColor,e.lineWidth=o,e.strokeRect(a,u,c,d);var f=this.options.label;f&&new uB([f],{x:a-o/2,y:u},this.options.drawLabelOptions).draw(t)},n}();function cB(n){var t=eo.getEnv();return n instanceof t.Image&&n.complete||n instanceof t.Video&&n.readyState>=3}function XD(n){var t=eo.getEnv(),r=t.Video;return n instanceof t.Image?new gf(n.naturalWidth,n.naturalHeight):n instanceof r?new gf(n.videoWidth,n.videoHeight):new gf(n.width,n.height)}function Kb(n){var t=n.width,e=n.height,i=(0,eo.getEnv().createCanvasElement)();return i.width=t,i.height=e,i}function JD(n,t){var e=eo.getEnv().ImageData;if(!(n instanceof e||cB(n)))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||XD(n),i=r.width,o=r.height,s=Kb({width:i,height:o});return n instanceof e?wu(s).putImageData(n,0,0):wu(s).drawImage(n,0,0,i,o),s}function XY(n,t){return ht(this,void 0,void 0,function(){var e,r,i,o,s,a;return pt(this,function(u){switch(u.label){case 0:return e=t||eo.getEnv().createCanvasElement(),r=n.shape.slice(Ml(n)?1:0),i=r[0],o=r[1],s=r[2],a=Je(function(){return n.as3D(i,o,s).toInt()}),[4,BD.toPixels(a,e)];case 1:return u.sent(),a.dispose(),[2,e]}})})}function lB(n){var t=eo.getEnv();return n instanceof t.Image||n instanceof t.Canvas||n instanceof t.Video}var Qb=function(){function n(t,e){var r=this;if(void 0===e&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=e,this._batchSize=t.length,t.forEach(function(i,o){if(Vb(i))return r._imageTensors[o]=i,void(r._inputDimensions[o]=i.shape);if(Ml(i)){var s=i.shape[0];if(1!==s)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");return r._imageTensors[o]=i,void(r._inputDimensions[o]=i.shape.slice(1))}var a=i instanceof eo.getEnv().Canvas?i:JD(i);r._canvases[o]=a,r._inputDimensions[o]=[a.height,a.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var t=this;return Fv(this.batchSize,0,1).map(function(e,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},n.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},n.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},n.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},n.prototype.getReshapedInputDimensions=function(t){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function FY(n,t){var e=n.width,r=n.height,i=t/Math.max(r,e);return new gf(Math.round(e*i),Math.round(r*i))}({width:this.getInputWidth(t),height:this.getInputHeight(t)},this.inputSize)},n.prototype.toBatchTensor=function(t,e){var r=this;return void 0===e&&(e=!0),this._inputSize=t,Je(function(){var i=Fv(r.batchSize,0,1).map(function(s){var a=r.getInput(s);if(a instanceof Hn){var u=Ml(a)?a:a.expandDims();return u=function UY(n,t){return void 0===t&&(t=!1),Je(function(){var e=n.shape.slice(1),r=e[0],i=e[1];if(r===i)return n;var o=Math.abs(r-i),s=Math.round(o*(t?.5:1)),a=r>i?2:1,u=function(g){var v=n.shape.slice();return v[a]=g,mu(v,0)},c=u(s),d=o-c.shape[a],p=[t&&d?u(d):null,n,c].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return oi(p,a)})}(u,e),(u.shape[1]!==t||u.shape[2]!==t)&&(u=wD.resizeBilinear(u,[t,t])),u.as3D(t,t,3)}if(a instanceof eo.getEnv().Canvas)return BD.fromPixels(function JY(n,t,e){void 0===e&&(e=!1);var r=eo.getEnv(),o=r.Canvas;if(!(n instanceof r.Image||n instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=XD(n),a=t/Math.max(s.height,s.width),u=a*s.width,c=a*s.height,d=Kb({width:t,height:t}),f=n instanceof o?n:JD(n),p=Math.abs(u-c)/2,g=e&&u<c?p:0,v=e&&c<u?p:0;return wu(d).drawImage(f,g,v,u,c),d}(a,t,e));throw new Error("toBatchTensor - at batchIdx "+s+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)});return As(i.map(function(s){return s.toFloat()})).as4D(r.batchSize,t,t,3)})},n}();function bi(n){return ht(this,void 0,void 0,function(){var t,e,r;return pt(this,function(i){switch(i.label){case 0:if(n instanceof Qb)return[2,n];if(!(t=Array.isArray(n)?n:[n]).length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(n)?" at input index "+o+":":""},(r=t.map(YD)).forEach(function(o,s){if(!lB(o)&&!Vb(o)&&!Ml(o))throw"string"==typeof t[s]?new Error("toNetInput -"+e(s)+" string passed, but could not resolve HTMLElement for element id "+t[s]):new Error("toNetInput -"+e(s)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Ml(o)){var a=o.shape[0];if(1!==a)throw new Error("toNetInput -"+e(s)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return lB(o)&&function YY(n){return new Promise(function(t,e){if(n instanceof eo.getEnv().Canvas||cB(n))return t();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),t(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),e(o))}n.addEventListener("load",r),n.addEventListener("error",i)})}(o)}))];case 1:return i.sent(),[2,new Qb(r,Array.isArray(n))]}})})}function ZD(n,t){return ht(this,void 0,void 0,function(){var e,r,i,o,s,a;return pt(this,function(c){switch(c.label){case 0:return e=eo.getEnv().Canvas,r=n,n instanceof e?[3,5]:[4,bi(n)];case 1:if((i=c.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(o=i.getInput(0))instanceof e?(s=o,[3,4]):[3,2];case 2:return[4,XY(o)];case 3:s=c.sent(),c.label=4;case 4:r=s,c.label=5;case 5:return a=wu(r),[2,t.map(function(d){return d instanceof Cs?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}).map(function(d){var f=d.x,p=d.y,g=d.width,v=d.height,y=Kb({width:g,height:v});return wu(y).putImageData(a.getImageData(f,p,g,v),0,0),y})]}})})}function $D(n,t){return ht(this,void 0,void 0,function(){return pt(this,function(e){if(!Vb(n)&&!Ml(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Ml(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Je(function(){var r=n.shape.slice(Ml(n)?1:0),i=r[0],o=r[1],s=r[2];return t.map(function(c){return c instanceof Cs?c.forSize(o,i).box:c}).map(function(c){return c.clipAtImageBorders(o,i)}).map(function(c){var d=c.x,f=c.y,p=c.width,g=c.height;return u3(n.as3D(i,o,s),[f,d,0],[g,p,s])})})]})})}function ZY(n,t){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return[4,(0,eo.getEnv().fetch)(n,t)];case 1:if(!((r=i.sent()).status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function $Y(n){return ht(this,void 0,void 0,function(){return pt(this,function(t){switch(t.label){case 0:return[4,ZY(n)];case 1:return[2,t.sent().json()]}})})}function dB(n,t){var e=t+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:e};if("/"===n)return{modelBaseUri:"/",manifestUri:"/"+e};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"",i=(n=n.replace(r,"")).split("/").filter(function(a){return a}),o=n.endsWith(".json")?i[i.length-1]:e,s=r+(n.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return{modelBaseUri:s=n.startsWith("/")?"/"+s:s,manifestUri:"/"===s?"/"+o:s+"/"+o}}function eX(n,t){return ht(this,void 0,void 0,function(){var e,i,o;return pt(this,function(s){switch(s.label){case 0:return e=dB(n,t),i=e.modelBaseUri,[4,$Y(e.manifestUri)];case 1:return o=s.sent(),[2,L3.loadWeights(o,i)]}})})}var bc=function(){function n(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(t){var e=this.traversePropertyPath(t);return e.obj[e.objProp]},n.prototype.reassignParamFromPath=function(t,e){var r=this.traversePropertyPath(t),i=r.obj,o=r.objProp;i[o].dispose(),i[o]=e},n.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(e){var r=e.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof vp})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof vp)})},n.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(e){t.reassignParamFromPath(e.path,e.tensor.variable())})},n.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(e){var r=e.path,i=e.tensor,o=Pi(i.dataSync());i.dispose(),t.reassignParamFromPath(r,o)})},n.prototype.dispose=function(t){void 0===t&&(t=!0),this.getParamList().forEach(function(e){if(t&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){return Array.from(t.tensor.dataSync())}).reduce(function(t,e){return t.concat(e)}))},n.prototype.load=function(t){return ht(this,void 0,void 0,function(){return pt(this,function(e){switch(e.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return e.sent(),[2]}})})},n.prototype.loadFromUri=function(t){return ht(this,void 0,void 0,function(){var e;return pt(this,function(r){switch(r.label){case 0:if(t&&"string"!=typeof t)throw new Error(this._name+".loadFromUri - expected model uri");return[4,eX(t,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},n.prototype.loadFromDisk=function(t){return ht(this,void 0,void 0,function(){var e,r,i,o,a,u,c,d,f;return pt(this,function(p){switch(p.label){case 0:if(t&&"string"!=typeof t)throw new Error(this._name+".loadFromDisk - expected model file path");return e=eo.getEnv().readFile,r=dB(t,this.getDefaultModelName()),i=r.manifestUri,o=r.modelBaseUri,a=L3.weightsLoaderFactory(function(g){return Promise.all(g.map(function(v){return e(v).then(function(y){return y.buffer})}))}),d=(c=JSON).parse,[4,e(i)];case 1:return u=d.apply(c,[p.sent().toString()]),[4,a(u,o)];case 2:return f=p.sent(),this.loadFromWeightMap(f),[2]}})})},n.prototype.loadFromWeightMap=function(t){var e=this.extractParamsFromWeigthMap(t),i=e.params;this._paramMappings=e.paramMappings,this._params=i},n.prototype.extractWeights=function(t){var e=this.extractParams(t),i=e.params;this._paramMappings=e.paramMappings,this._params=i},n.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=t.split("/").reduce(function(o,s){if(!o.nextObj.hasOwnProperty(s))throw new Error("traversePropertyPath - object does not have property "+s+", for path "+t);return{obj:o.nextObj,objProp:s,nextObj:o.nextObj[s]}},{nextObj:this.params}),r=e.obj,i=e.objProp;if(!(r&&i&&r[i]instanceof Hn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:i}},n}();function _s(n,t,e){return Je(function(){var r=pD(n,t.depthwise_filter,t.pointwise_filter,e,"same");return en(r,t.bias)})}function eI(n,t,e){return void 0===e&&(e=!1),Je(function(){var r=pr(e?en($s(n,t.conv0.filters,[2,2],"same"),t.conv0.bias):_s(n,t.conv0,[2,2])),i=_s(r,t.conv1,[1,1]),s=_s(pr(en(r,i)),t.conv2,[1,1]);return pr(en(r,en(i,s)))})}function Yb(n,t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!0),Je(function(){var i=pr(e?en($s(n,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):_s(n,t.conv0,r?[2,2]:[1,1])),o=_s(i,t.conv1,[1,1]),a=_s(pr(en(i,o)),t.conv2,[1,1]),c=_s(pr(en(i,en(o,a))),t.conv3,[1,1]);return pr(en(i,en(o,en(a,c))))})}function Oa(n,t,e,r){return void 0===e&&(e="same"),void 0===r&&(r=!1),Je(function(){var i=en($s(n,t.filters,[1,1],e),t.bias);return r?pr(i):i})}function Ac(n,t){Object.keys(n).forEach(function(e){t.some(function(r){return r.originalPath===e})||n[e].dispose()})}function Xb(n,t){return function(e,r,i,o){var s=Xo(n(e*r*i*i),[i,i,e,r]),a=Kr(n(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:s,bias:a}}}function tI(n,t){return function(e,r,i){var o=El(n(e*r),[e,r]),s=Kr(n(r));return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:s}}}var fB=function n(t,e,r){this.depthwise_filter=t,this.pointwise_filter=e,this.bias=r};function nI(n,t){return function(e,r,i){var o=Xo(n(9*e),[3,3,e,1]),s=Xo(n(e*r),[1,1,e,r]),a=Kr(n(r));return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new fB(o,s,a)}}function rI(n){return function(t){var e=n(t+"/depthwise_filter",4),r=n(t+"/pointwise_filter",4),i=n(t+"/bias",1);return new fB(e,r,i)}}function kl(n,t){return function(e,r,i){var o=n[e];if(!Nv(o,r))throw new Error("expected weightMap["+e+"] to be a Tensor"+r+"D, instead have "+o);return t.push({originalPath:e,paramPath:i||e}),o}}function xc(n){var t=n;return{extractWeights:function e(i){var o=t.slice(0,i);return t=t.slice(i),o},getRemainingWeights:function r(){return t}}}function hB(n,t){var e=Xb(n,t),r=nI(n,t);function i(s,a,u,c){return void 0===c&&(c=!1),{conv0:c?e(s,a,3,u+"/conv0"):r(s,a,u+"/conv0"),conv1:r(a,a,u+"/conv1"),conv2:r(a,a,u+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function o(s,a,u,c){void 0===c&&(c=!1);var d=i(s,a,u,c);return{conv0:d.conv0,conv1:d.conv1,conv2:d.conv2,conv3:r(a,a,u+"/conv3")}}}}function pB(n){return function(t){return{filters:n(t+"/filters",4),bias:n(t+"/bias",1)}}}function gB(n,t){var e=kl(n,t),r=pB(e),i=rI(e);return{extractDenseBlock3Params:function o(a,u){return void 0===u&&(u=!1),{conv0:u?r(a+"/conv0"):i(a+"/conv0"),conv1:i(a+"/conv1"),conv2:i(a+"/conv2")}},extractDenseBlock4Params:function s(a,u){return void 0===u&&(u=!1),{conv0:u?r(a+"/conv0"):i(a+"/conv0"),conv1:i(a+"/conv1"),conv2:i(a+"/conv2"),conv3:i(a+"/conv3")}}}}var mB=function(n){function t(){return n.call(this,"FaceFeatureExtractor")||this}return Ot(t,n),t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Je(function(){var a=Yb(Lv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(We(255)),r.dense0,!0);return a=Yb(a,r.dense1),a=Yb(a,r.dense2),a=Yb(a,r.dense3),kv(a,[7,7],[2,2],"valid")})},t.prototype.forward=function(e){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,bi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function rX(n){var t=[],e=gB(n,t).extractDenseBlock4Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return Ac(n,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function nX(n){var t=[],e=xc(n),i=e.getRemainingWeights,o=hB(e.extractWeights,t).extractDenseBlock4Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),u=o(64,128,"dense2"),c=o(128,256,"dense3");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:s,dense1:a,dense2:u,dense3:c}}}(e)},t}(bc);function bu(n,t){return Je(function(){return en(Bb(n,t.weights),t.bias)})}function vB(n){var t={},e={};return Object.keys(n).forEach(function(r){(r.startsWith("fc")?e:t)[r]=n[r]}),{featureExtractorMap:t,classifierMap:e}}var yB=function(n){function t(e,r){var i=n.call(this,e)||this;return i._faceFeatureExtractor=r,i}return Ot(t,n),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return Je(function(){var o=e instanceof Qb?r.faceFeatureExtractor.forwardInput(e):e;return bu(o.as2D(o.shape[0],-1),i.fc)})},t.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),n.prototype.dispose.call(this,e)},t.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),o=r.paramMappings;this._params=r.params,this._paramMappings=o},t.prototype.extractClassifierParams=function(e){return function iX(n,t,e){var r=[],i=xc(n),s=i.getRemainingWeights,u=tI(i.extractWeights,r)(t,e,"fc");if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:u}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var r=vB(e),o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(r.featureExtractorMap),function oX(n){var t=[],e=kl(n,t),i={fc:function r(o){return{weights:e(o+"/weights",2),bias:e(o+"/bias",1)}}("fc")};return Ac(n,t),{params:i,paramMappings:t}}(o)},t.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*r+i,s=e.slice(0,e.length-o),a=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(a)},t}(bc),wB=["neutral","happy","sad","angry","fearful","disgusted","surprised"],iI=function(){function n(t){var e=this;if(7!==t.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);wB.forEach(function(r,i){e[r]=t[i]})}return n.prototype.asSortedArray=function(){var t=this;return wB.map(function(e){return{expression:e,probability:t[e]}}).sort(function(e,r){return r.probability-e.probability})},n}(),sX=function(n){function t(e){return void 0===e&&(e=new mB),n.call(this,"FaceExpressionNet",e)||this}return Ot(t,n),t.prototype.forwardInput=function(e){var r=this;return Je(function(){return gc(r.runNet(e))})},t.prototype.forward=function(e){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,bi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.predictExpressions=function(e){return ht(this,void 0,void 0,function(){var r,i,o,s,a=this;return pt(this,function(u){switch(u.label){case 0:return[4,bi(e)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(si(i).map(function(c){return ht(a,void 0,void 0,function(){var d;return pt(this,function(f){switch(f.label){case 0:return[4,c.data()];case 1:return d=f.sent(),c.dispose(),[2,d]}})})}))];case 3:return o=u.sent(),i.dispose(),s=o.map(function(c){return new iI(c)}),[2,r.isBatchInput?s:s[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(yB);function bB(n,t){return Object.assign({},n,{expressions:t})}function oI(n){return Uv(n)&&n.landmarks instanceof kp&&n.unshiftedLandmarks instanceof kp&&n.alignedRect instanceof Cs}function Jb(n,t){var e=n.detection.box,r=t.shiftBy(e.x,e.y),i=r.align(),o=n.detection.imageDims,s=new Cs(n.detection.score,i.rescale(o.reverse()),o);return Object.assign({},n,{landmarks:r,unshiftedLandmarks:t,alignedRect:s})}function AB(n,t,e){return en($s(n,t.filters,e,"same"),t.bias)}function sI(n,t,e){void 0===e&&(e=!0);var r=e?pr(n):n;return r=_s(r,t.separable_conv0,[1,1]),r=_s(pr(r),t.separable_conv1,[1,1]),r=wi(r,[3,3],[2,2],"same"),en(r,AB(n,t.expansion_conv,[2,2]))}var gX=function(n){function t(e){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return Ot(t,n),t.prototype.forwardInput=function(e){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return Je(function(){var a=Lv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(We(256)),u=pr(AB(a,i.entry_flow.conv_in,[2,2]));return u=sI(u,i.entry_flow.reduction_block_0,!1),u=sI(u,i.entry_flow.reduction_block_1),Fv(r._numMainBlocks,0,1).forEach(function(c){u=function pX(n,t){var e=_s(pr(n),t.separable_conv0,[1,1]);return e=_s(pr(e),t.separable_conv1,[1,1]),e=_s(pr(e),t.separable_conv2,[1,1]),en(e,n)}(u,i.middle_flow["main_block_"+c])}),u=sI(u,i.exit_flow.reduction_block),u=pr(_s(u,i.exit_flow.separable_conv,[1,1]))})},t.prototype.forward=function(e){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,bi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function hX(n,t){var e=[],r=function fX(n,t){var e=kl(n,t),r=pB(e),i=rI(e);return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function o(a){return{separable_conv0:i(a+"/separable_conv0"),separable_conv1:i(a+"/separable_conv1"),expansion_conv:r(a+"/expansion_conv")}},extractMainBlockParams:function s(a){return{separable_conv0:i(a+"/separable_conv0"),separable_conv1:i(a+"/separable_conv1"),separable_conv2:i(a+"/separable_conv2")}}}}(n,e),o=r.extractSeparableConvParams,s=r.extractReductionBlockParams,a=r.extractMainBlockParams,f={conv_in:(0,r.extractConvParams)("entry_flow/conv_in"),reduction_block_0:s("entry_flow/reduction_block_0"),reduction_block_1:s("entry_flow/reduction_block_1")},p={};Fv(t,0,1).forEach(function(w){p["main_block_"+w]=a("middle_flow/main_block_"+w)});var y={reduction_block:s("exit_flow/reduction_block"),separable_conv:o("exit_flow/separable_conv")};return Ac(n,e),{params:{entry_flow:f,middle_flow:p,exit_flow:y},paramMappings:e}}(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return function dX(n,t){var e=[],r=xc(n),o=r.getRemainingWeights,s=function lX(n,t){var e=Xb(n,t),r=nI(n,t);return{extractConvParams:e,extractSeparableConvParams:r,extractReductionBlockParams:function i(s,a,u){return{separable_conv0:r(s,a,u+"/separable_conv0"),separable_conv1:r(a,a,u+"/separable_conv1"),expansion_conv:e(s,a,1,u+"/expansion_conv")}},extractMainBlockParams:function o(s,a){return{separable_conv0:r(s,s,a+"/separable_conv0"),separable_conv1:r(s,s,a+"/separable_conv1"),separable_conv2:r(s,s,a+"/separable_conv2")}}}}(r.extractWeights,e),u=s.extractSeparableConvParams,c=s.extractReductionBlockParams,d=s.extractMainBlockParams,v={conv_in:(0,s.extractConvParams)(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},y={};Fv(t,0,1).forEach(function(_){y["main_block_"+_]=d(128,"middle_flow/main_block_"+_)});var A={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:v,middle_flow:y,exit_flow:A}}}(e,this._numMainBlocks)},t}(bc),aI=function(n){return n.FEMALE="female",n.MALE="male",n}(aI||{}),yX=function(n){function t(e){void 0===e&&(e=new gX(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return Ot(t,n),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return Je(function(){var o=e instanceof Qb?r.faceFeatureExtractor.forwardInput(e):e,s=kv(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1);return{age:bu(s,i.fc.age).as1D(),gender:bu(s,i.fc.gender)}})},t.prototype.forwardInput=function(e){var r=this;return Je(function(){var i=r.runNet(e);return{age:i.age,gender:gc(i.gender)}})},t.prototype.forward=function(e){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,bi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.predictAgeAndGender=function(e){return ht(this,void 0,void 0,function(){var r,i,o,s,a,u,c=this;return pt(this,function(d){switch(d.label){case 0:return[4,bi(e)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return i=d.sent(),o=si(i.age),s=si(i.gender),a=o.map(function(f,p){return{ageTensor:f,genderTensor:s[p]}}),[4,Promise.all(a.map(function(f){var p=f.ageTensor,g=f.genderTensor;return ht(c,void 0,void 0,function(){var v,y,w,b,A;return pt(this,function(_){switch(_.label){case 0:return[4,p.data()];case 1:return v=_.sent()[0],[4,g.data()];case 2:return y=_.sent()[0],b=(w=y>.5)?aI.MALE:aI.FEMALE,A=w?y:1-y,p.dispose(),g.dispose(),[2,{age:v,gender:b,genderProbability:A}]}})})}))];case 3:return u=d.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),n.prototype.dispose.call(this,e)},t.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),o=r.paramMappings;this._params=r.params,this._paramMappings=o},t.prototype.extractClassifierParams=function(e){return function mX(n){var t=[],e=xc(n),i=e.getRemainingWeights,o=tI(e.extractWeights,t),s=o(512,1,"fc/age"),a=o(512,2,"fc/gender");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{fc:{age:s,gender:a}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var r=vB(e),o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(r.featureExtractorMap),function vX(n){var t=[],e=kl(n,t);function r(o){return{weights:e(o+"/weights",2),bias:e(o+"/bias",1)}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Ac(n,t),{params:i,paramMappings:t}}(o)},t.prototype.extractParams=function(e){var i=e.slice(0,e.length-1539),o=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},t}(bc),xB=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.postProcess=function(e,r,i){var o=i.map(function(a){var u=a.width,c=a.height,d=r/Math.max(c,u);return{width:u*d,height:c*d}}),s=o.length;return Je(function(){var a=function(p,g){return As([mu([68],p),mu([68],g)],1).as2D(1,136).as1D()},u=function(p,g){var v=o[p],y=v.width,w=v.height;return g(y,w)?Math.abs(y-w)/2:0};return e.mul(mu([s,136],r)).sub(As(Array.from(Array(s),function(p,g){return a(function(p){return u(p,function(g,v){return g<v})}(g),function(p){return u(p,function(g,v){return v<g})}(g))}))).div(As(Array.from(Array(s),function(p,g){return a(o[g].width,o[g].height)})))})},t.prototype.forwardInput=function(e){var r=this;return Je(function(){var i=r.runNet(e);return r.postProcess(i,e.inputSize,e.inputDimensions.map(function(o){return{height:o[0],width:o[1]}}))})},t.prototype.forward=function(e){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,bi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.detectLandmarks=function(e){return ht(this,void 0,void 0,function(){var r,i,o,s=this;return pt(this,function(a){switch(a.label){case 0:return[4,bi(e)];case 1:return r=a.sent(),i=Je(function(){return si(s.forwardInput(r))}),[4,Promise.all(i.map(function(u,c){return ht(s,void 0,void 0,function(){var d,f,p,g,v;return pt(this,function(y){switch(y.label){case 0:return p=(f=Array).from,[4,u.data()];case 1:return d=p.apply(f,[y.sent()]),g=d.filter(function(w,b){return Y3(b)}),v=d.filter(function(w,b){return!Y3(b)}),[2,new $3(Array(68).fill(0).map(function(w,b){return new An(g[b],v[b])}),{height:r.getInputHeight(c),width:r.getInputWidth(c)})]}})})}))];case 2:return o=a.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(yB),CB=function(n){function t(e){return void 0===e&&(e=new mB),n.call(this,"FaceLandmark68Net",e)||this}return Ot(t,n),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(xB),AX=function(n){function t(){return n.call(this,"TinyFaceFeatureExtractor")||this}return Ot(t,n),t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Je(function(){var a=eI(Lv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(We(255)),r.dense0,!0);return a=eI(a,r.dense1),a=eI(a,r.dense2),kv(a,[14,14],[2,2],"valid")})},t.prototype.forward=function(e){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,bi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function wX(n){var t=[],e=gB(n,t).extractDenseBlock3Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return Ac(n,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function bX(n){var t=[],e=xc(n),i=e.getRemainingWeights,o=hB(e.extractWeights,t).extractDenseBlock3Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),u=o(64,128,"dense2");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:s,dense1:a,dense2:u}}}(e)},t}(bc),xX=function(n){function t(e){return void 0===e&&(e=new AX),n.call(this,"FaceLandmark68TinyNet",e)||this}return Ot(t,n),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(xB);function uI(n,t,e,r,i){void 0===i&&(i="same");var o=t.conv,a=o.bias,u=$s(n,o.filters,e,i);return u=function CX(n,t){return en(Ji(n,t.weights),t.biases)}(u=en(u,a),t.scale),r?pr(u):u}function _B(n,t){return uI(n,t,[1,1],!1)}function EB(n,t){return uI(n,t,[2,2],!0,"valid")}function EX(n,t){function o(a,u,c,d){var f=function r(a,u,c,d){var f=function e(a,u,c){var d=n(a),f=d.length/(u*c*c);if(function NY(n){return n%1!=0}(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+d.length+", numFilters: "+u+", filterSize: "+c);return Je(function(){return Il(Xo(d,[u,f,c,c]),[2,3,1,0])})}(a,u,c),p=Kr(n(u));return t.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:f,bias:p}}(a,u,c,d+"/conv"),p=function i(a,u){var c=Kr(n(a)),d=Kr(n(a));return t.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:c,biases:d}}(u,d+"/scale");return{conv:f,scale:p}}return{extractConvLayerParams:o,extractResidualLayerParams:function s(a,u,c,d,f){return void 0===f&&(f=!1),{conv1:o((f?.5:1)*a,u,c,d+"/conv1"),conv2:o(a,u,c,d+"/conv2")}}}}function SX(n){var t=[],e=function IX(n,t){var e=kl(n,t);function i(s){var a=e(s+"/conv/filters",4),u=e(s+"/conv/bias",1),c=function r(s){return{weights:e(s+"/scale/weights",1),biases:e(s+"/scale/biases",1)}}(s);return{conv:{filters:a,bias:u},scale:c}}return{extractConvLayerParams:i,extractResidualLayerParams:function o(s){return{conv1:i(s+"/conv1"),conv2:i(s+"/conv2")}}}}(n,t),i=e.extractResidualLayerParams,o=(0,e.extractConvLayerParams)("conv32_down"),s=i("conv32_1"),a=i("conv32_2"),u=i("conv32_3"),c=i("conv64_down"),d=i("conv64_1"),f=i("conv64_2"),p=i("conv64_3"),g=i("conv128_down"),v=i("conv128_1"),y=i("conv128_2"),w=i("conv256_down"),b=i("conv256_1"),A=i("conv256_2"),_=i("conv256_down_out"),C=n.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!function OY(n){return Nv(n,2)}(C))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+C);var E={conv32_down:o,conv32_1:s,conv32_2:a,conv32_3:u,conv64_down:c,conv64_1:d,conv64_2:f,conv64_3:p,conv128_down:g,conv128_1:v,conv128_2:y,conv256_down:w,conv256_1:b,conv256_2:A,conv256_down_out:_,fc:C};return Ac(n,t),{params:E,paramMappings:t}}function Au(n,t){var e=function _X(n,t){return uI(n,t,[1,1],!0)}(n,t.conv1);return e=_B(e,t.conv2),e=en(e,n),pr(e)}function Zb(n,t){var e=EB(n,t.conv1);e=_B(e,t.conv2);var r=kv(n,2,2,"valid"),i=ar(r.shape),o=r.shape[3]!==e.shape[3];if(r.shape[1]!==e.shape[1]||r.shape[2]!==e.shape[2]){var a=Ov(e.shape);a[1]=1;var u=ar(a),c=Ov((e=oi([e,u],1)).shape);c[2]=1;var d=ar(c);e=oi([e,d],2)}return r=o?oi([r,i],3):r,e=en(r,e),pr(e)}!function(n){Ot(function t(){return null!==n&&n.apply(this,arguments)||this},n)}(CB);var TX=function(n){function t(){return n.call(this,"FaceRecognitionNet")||this}return Ot(t,n),t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Je(function(){var a=EB(Lv(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(We(256)),r.conv32_down);a=Au(a=wi(a,3,2,"valid"),r.conv32_1),a=Au(a,r.conv32_2),a=Au(a,r.conv32_3),a=Au(a=Zb(a,r.conv64_down),r.conv64_1),a=Au(a,r.conv64_2),a=Au(a,r.conv64_3),a=Au(a=Zb(a,r.conv128_down),r.conv128_1),a=Au(a,r.conv128_2),a=Au(a=Zb(a,r.conv256_down),r.conv256_1);var u=(a=Zb(a=Au(a,r.conv256_2),r.conv256_down_out)).mean([1,2]);return Bb(u,r.fc)})},t.prototype.forward=function(e){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,bi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.computeFaceDescriptor=function(e){return ht(this,void 0,void 0,function(){var r,i,o,s=this;return pt(this,function(a){switch(a.label){case 0:return[4,bi(e)];case 1:return r=a.sent(),i=Je(function(){return si(s.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return o=a.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return SX(e)},t.prototype.extractParams=function(e){return function DX(n){var t=xc(n),e=t.extractWeights,r=t.getRemainingWeights,i=[],o=EX(e,i),a=o.extractResidualLayerParams,u=(0,o.extractConvLayerParams)(4704,32,7,"conv32_down"),c=a(9216,32,3,"conv32_1"),d=a(9216,32,3,"conv32_2"),f=a(9216,32,3,"conv32_3"),p=a(36864,64,3,"conv64_down",!0),g=a(36864,64,3,"conv64_1"),v=a(36864,64,3,"conv64_2"),y=a(36864,64,3,"conv64_3"),w=a(147456,128,3,"conv128_down",!0),b=a(147456,128,3,"conv128_1"),A=a(147456,128,3,"conv128_2"),_=a(589824,256,3,"conv256_down",!0),C=a(589824,256,3,"conv256_1"),E=a(589824,256,3,"conv256_2"),T=a(589824,256,3,"conv256_down_out"),O=Je(function(){return Il(El(e(32768),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:u,conv32_1:c,conv32_2:d,conv32_3:f,conv64_down:p,conv64_1:g,conv64_2:v,conv64_3:y,conv128_down:w,conv128_1:b,conv128_2:A,conv256_down:_,conv256_1:C,conv256_2:E,conv256_down_out:T,fc:O},paramMappings:i}}(e)},t}(bc);function DB(n,t,e){return Object.assign({},n,{gender:t,genderProbability:e})}var IB=function(){function n(t){var e=void 0===t?{}:t,r=e.minFaceSize,i=e.scaleFactor,o=e.maxNumScales,s=e.scoreThresholds,a=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=a,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(u){return"number"!=typeof u}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return"number"!=typeof u})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n}();function xu(n,t,e){return Je(function(){var r=$s(n,t.filters,e,"same");return r=en(r,t.batch_norm_offset),uD(r,0,6)})}function UX(n,t,e){var r=n.arraySync(),i=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),s=Math.max(r[t][0],r[t][2]),a=Math.max(r[t][1],r[t][3]),u=Math.min(r[e][0],r[e][2]),c=Math.min(r[e][1],r[e][3]),d=Math.max(r[e][0],r[e][2]),f=Math.max(r[e][1],r[e][3]),p=(s-i)*(a-o),g=(d-u)*(f-c);if(p<=0||g<=0)return 0;var v=Math.max(i,u),y=Math.max(o,c),w=Math.min(s,d),b=Math.min(a,f),A=Math.max(w-v,0)*Math.max(b-y,0);return A/(p+g-A)}function Pp(n,t){return Je(function(){var e=n.shape[0];return{boxPredictionEncoding:Ma(Oa(n,t.box_encoding_predictor),[e,-1,1,4]),classPrediction:Ma(Oa(n,t.class_predictor),[e,-1,3])}})}var $b=function(){function n(t){var e=void 0===t?{}:t,r=e.minConfidence,i=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n}(),SB=function(n){function t(){return n.call(this,"SsdMobilenetv1")||this}return Ot(t,n),t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Je(function(){var i=e.toBatchTensor(512,!1).toFloat(),s=function BX(n,t){return Je(function(){var e=null,r=xu(n,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach(function(o,s){var a=s+1,u=function FX(n){return[2,4,6,12].some(function(t){return t===n})?[2,2]:[1,1]}(a);r=function NX(n,t,e){return Je(function(){var r=Fb(n,t.filters,e,"same");return r=qF(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),uD(r,0,6)})}(r,o.depthwise_conv,u),r=xu(r,o.pointwise_conv,[1,1]),11===a&&(e=r)}),null===e)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:e}})}(ai(Ji(i,We(.007843137718737125)),We(1)),r.mobilenetv1),a=function WX(n,t,e){return Je(function(){var r=xu(n,e.conv_0,[1,1]),i=xu(r,e.conv_1,[2,2]),o=xu(i,e.conv_2,[1,1]),s=xu(o,e.conv_3,[2,2]),a=xu(s,e.conv_4,[1,1]),u=xu(a,e.conv_5,[2,2]),c=xu(u,e.conv_6,[1,1]),d=xu(c,e.conv_7,[2,2]),f=Pp(t,e.box_predictor_0),p=Pp(n,e.box_predictor_1),g=Pp(i,e.box_predictor_2),v=Pp(s,e.box_predictor_3),y=Pp(u,e.box_predictor_4),w=Pp(d,e.box_predictor_5);return{boxPredictions:oi([f.boxPredictionEncoding,p.boxPredictionEncoding,g.boxPredictionEncoding,v.boxPredictionEncoding,y.boxPredictionEncoding,w.boxPredictionEncoding],1),classPredictions:oi([f.classPrediction,p.classPrediction,g.classPrediction,v.classPrediction,y.classPrediction,w.classPrediction],1)}})}(s.out,s.conv11,r.prediction_layer);return function HX(n,t,e){return Je(function(){var r=n.shape[0],i=function jX(n,t){var e=function zX(n){var t=si(Il(n,[1,0])),e=[ai(t[2],t[0]),ai(t[3],t[1])];return{sizes:e,centers:[en(t[0],Pa(e[0],We(2))),en(t[1],Pa(e[1],We(2)))]}}(n),r=e.sizes,i=e.centers,o=si(Il(t,[1,0])),s=Pa(Ji(cD(Pa(o[2],We(5))),r[0]),We(2)),a=en(Ji(Pa(o[0],We(10)),r[0]),i[0]),u=Pa(Ji(cD(Pa(o[3],We(5))),r[1]),We(2)),c=en(Ji(Pa(o[1],We(10)),r[1]),i[1]);return Il(As([ai(a,s),ai(c,u),en(a,s),en(c,u)]),[1,0])}(Ma(wp(e.extra_dim,[r,1,1]),[-1,4]),Ma(n,[-1,4]));i=Ma(i,[r,i.shape[0]/r,4]);var o=jF(vu(t,[0,0,1],[-1,-1,-1])),s=vu(o,[0,0,0],[-1,-1,1]);return s=Ma(s,[r,s.shape[1]]),{boxes:si(i),scores:si(s)}})}(a.boxPredictions,a.classPredictions,r.output_layer)})},t.prototype.forward=function(e){return ht(this,void 0,void 0,function(){var r;return pt(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,bi(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.locateFaces=function(e,r){return void 0===r&&(r={}),ht(this,void 0,void 0,function(){var i,o,s,a,u,c,d,f,p,g,v,y,w,A,_,C,E,T,O,N;return pt(this,function(B){switch(B.label){case 0:return i=new $b(r),o=i.maxResults,s=i.minConfidence,[4,bi(e)];case 1:for(a=B.sent(),u=this.forwardInput(a),f=(c=u.boxes)[0],p=(d=u.scores)[0],g=1;g<c.length;g++)c[g].dispose(),d[g].dispose();return w=(y=Array).from,[4,p.data()];case 2:return v=w.apply(y,[B.sent()]),A=function LX(n,t,e,r,i){var s=Math.min(e,n.shape[0]),a=t.map(function(d,f){return{score:d,boxIndex:f}}).filter(function(d){return d.score>i}).sort(function(d,f){return f.score-d.score}),u=function(d){return d<=r?1:0},c=[];return a.forEach(function(d){if(!(c.length>=s)){for(var f=d.score,p=c.length-1;p>=0;--p){var g=UX(n,d.boxIndex,c[p]);if(0!==g&&(d.score*=u(g),d.score<=i))break}f===d.score&&c.push(d.boxIndex)}}),c}(f,v,o,.5,s),_=a.getReshapedInputDimensions(0),E=(C=a.inputSize)/_.width,T=C/_.height,O=f.arraySync(),N=A.map(function(F){var X=[Math.max(0,O[F][0]),Math.min(1,O[F][2])].map(function(ee){return ee*T}),G=X[0],re=X[1],fe=[Math.max(0,O[F][1]),Math.min(1,O[F][3])].map(function(ee){return ee*E}),he=fe[0];return new Cs(v[F],new GD(he,G,fe[1]-he,re-G),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),f.dispose(),p.dispose(),[2,N]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function PX(n){var t=[],e=function kX(n,t){var e=kl(n,t);function r(c,d,f){return{filters:e(c+"/Conv2d_"+d+"_pointwise/weights",4,f+"/filters"),batch_norm_offset:e(c+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset")}}function i(c){var d="mobilenetv1/conv_"+c,f="MobilenetV1/Conv2d_"+c+"_depthwise",p=d+"/depthwise_conv",g=d+"/pointwise_conv";return{depthwise_conv:{filters:e(f+"/depthwise_weights",4,p+"/filters"),batch_norm_scale:e(f+"/BatchNorm/gamma",1,p+"/batch_norm_scale"),batch_norm_offset:e(f+"/BatchNorm/beta",1,p+"/batch_norm_offset"),batch_norm_mean:e(f+"/BatchNorm/moving_mean",1,p+"/batch_norm_mean"),batch_norm_variance:e(f+"/BatchNorm/moving_variance",1,p+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",c,g)}}function s(c,d){return{filters:e(c+"/weights",4,d+"/filters"),bias:e(c+"/biases",1,d+"/bias")}}function a(c){return{box_encoding_predictor:s("Prediction/BoxPredictor_"+c+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+c+"/box_encoding_predictor"),class_predictor:s("Prediction/BoxPredictor_"+c+"/ClassPredictor","prediction_layer/box_predictor_"+c+"/class_predictor")}}return{extractMobilenetV1Params:function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}}}(n,t),r=e.extractMobilenetV1Params,i=e.extractPredictionLayerParams,o=n["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Vb(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var s={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return Ac(n,t),{params:s,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function MX(n){var t=[],e=xc(n),r=e.extractWeights,i=e.getRemainingWeights,o=function RX(n,t){function r(u,c,d,f,p){var g=Xo(n(u*c*d*d),[d,d,u,c]),v=Kr(n(c));return t.push({paramPath:f+"/filters"},{paramPath:f+"/"+(p?"batch_norm_offset":"bias")}),{filters:g,bias:v}}function i(u,c,d,f){var p=r(u,c,d,f,!0);return{filters:p.filters,batch_norm_offset:p.bias}}function o(u,c,d){var f=function e(u,c){var d=Xo(n(9*u),[3,3,u,1]),f=Kr(n(u)),p=Kr(n(u)),g=Kr(n(u)),v=Kr(n(u));return t.push({paramPath:c+"/filters"},{paramPath:c+"/batch_norm_scale"},{paramPath:c+"/batch_norm_offset"},{paramPath:c+"/batch_norm_mean"},{paramPath:c+"/batch_norm_variance"}),{filters:d,batch_norm_scale:f,batch_norm_offset:p,batch_norm_mean:g,batch_norm_variance:v}}(u,d+"/depthwise_conv");return{depthwise_conv:f,pointwise_conv:i(u,c,1,d+"/pointwise_conv")}}return{extractMobilenetV1Params:function s(){return{conv_0:i(3,32,3,"mobilenetv1/conv_0"),conv_1:o(32,64,"mobilenetv1/conv_1"),conv_2:o(64,128,"mobilenetv1/conv_2"),conv_3:o(128,128,"mobilenetv1/conv_3"),conv_4:o(128,256,"mobilenetv1/conv_4"),conv_5:o(256,256,"mobilenetv1/conv_5"),conv_6:o(256,512,"mobilenetv1/conv_6"),conv_7:o(512,512,"mobilenetv1/conv_7"),conv_8:o(512,512,"mobilenetv1/conv_8"),conv_9:o(512,512,"mobilenetv1/conv_9"),conv_10:o(512,512,"mobilenetv1/conv_10"),conv_11:o(512,512,"mobilenetv1/conv_11"),conv_12:o(512,1024,"mobilenetv1/conv_12"),conv_13:o(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function a(){return{conv_0:i(1024,256,1,"prediction_layer/conv_0"),conv_1:i(256,512,3,"prediction_layer/conv_1"),conv_2:i(512,128,1,"prediction_layer/conv_2"),conv_3:i(128,256,3,"prediction_layer/conv_3"),conv_4:i(256,128,1,"prediction_layer/conv_4"),conv_5:i(128,256,3,"prediction_layer/conv_5"),conv_6:i(256,64,1,"prediction_layer/conv_6"),conv_7:i(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:r(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:r(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:r(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:r(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:r(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(r,t),a=o.extractPredictionLayerParams,u=(0,o.extractMobilenetV1Params)(),c=a(),f={extra_dim:FE(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:f},paramMappings:t}}(e)},t}(bc);!function(n){Ot(function t(){return null!==n&&n.apply(this,arguments)||this},n)}(SB);var GX=[new An(.738768,.874946),new An(2.42204,2.65704),new An(4.30971,7.04493),new An(10.246,4.59428),new An(12.6868,11.8741)],KX=[new An(1.603231,2.094468),new An(6.041143,7.080126),new An(2.882459,3.518061),new An(4.266906,5.178857),new An(9.041765,10.66308)],QX=[117.001,114.697,97.404],eA=function(n){return"number"==typeof n};function cI(n){return Je(function(){var t=Ji(n,We(.10000000149011612));return en(pr(ai(n,t)),t)})}function Pl(n,t){return Je(function(){var e=sf(n,[[0,0],[1,1],[1,1],[0,0]]);return e=$s(e,t.conv.filters,[1,1],"valid"),e=ai(e,t.bn.sub),e=Ji(e,t.bn.truediv),cI(e=en(e,t.conv.bias))})}function Ol(n,t){return Je(function(){var e=sf(n,[[0,0],[1,1],[1,1],[0,0]]);return e=pD(e,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),cI(e=en(e,t.bias))})}var lI=function(){function n(t){var e=void 0===t?{}:t,r=e.inputSize,i=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n}(),TB=function(n){function t(e){var r=n.call(this,"TinyYolov2")||this;return function JX(n){if(!n)throw new Error("invalid config: "+n);if("boolean"!=typeof n.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!eA(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(t){return"string"==typeof t}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(t){return t||{}}).every(function(t){return eA(t.x)&&eA(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||3!==n.meanRgb.length||!n.meanRgb.every(eA)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}(e),r._config=e,r}return Ot(t,n),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,r){var i=Pl(e,r.conv0);return i=Pl(i=wi(i,[2,2],[2,2],"same"),r.conv1),i=Pl(i=wi(i,[2,2],[2,2],"same"),r.conv2),i=Pl(i=wi(i,[2,2],[2,2],"same"),r.conv3),i=Pl(i=wi(i,[2,2],[2,2],"same"),r.conv4),i=Pl(i=wi(i,[2,2],[2,2],"same"),r.conv5),i=Pl(i=wi(i,[2,2],[1,1],"same"),r.conv6),Oa(i=Pl(i,r.conv7),r.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,r){var i=this.config.isFirstLayerConv2d?cI(Oa(e,r.conv0,"valid",!1)):Ol(e,r.conv0);return i=Ol(i=wi(i,[2,2],[2,2],"same"),r.conv1),i=Ol(i=wi(i,[2,2],[2,2],"same"),r.conv2),i=Ol(i=wi(i,[2,2],[2,2],"same"),r.conv3),i=Ol(i=wi(i,[2,2],[2,2],"same"),r.conv4),i=Ol(i=wi(i,[2,2],[2,2],"same"),r.conv5),i=wi(i,[2,2],[1,1],"same"),i=r.conv6?Ol(i,r.conv6):i,Oa(i=r.conv7?Ol(i,r.conv7):i,r.conv8,"valid",!1)},t.prototype.forwardInput=function(e,r){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return Je(function(){var s=e.toBatchTensor(r,!1).toFloat();return s=(s=i.config.meanRgb?Lv(s,i.config.meanRgb):s).div(We(256)),i.config.withSeparableConvs?i.runMobilenet(s,o):i.runTinyYolov2(s,o)})},t.prototype.forward=function(e,r){return ht(this,void 0,void 0,function(){var i;return pt(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,bi(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},t.prototype.detect=function(e,r){return void 0===r&&(r={}),ht(this,void 0,void 0,function(){var i,o,s,a,u,c,d,f,p,g,v,y,A=this;return pt(this,function(_){switch(_.label){case 0:return i=new lI(r),o=i.inputSize,s=i.scoreThreshold,[4,bi(e)];case 1:return a=_.sent(),[4,this.forwardInput(a,o)];case 2:return u=_.sent(),c=Je(function(){return si(u)[0].expandDims()}),d={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(c,a.getReshapedInputDimensions(0),s)];case 3:return f=_.sent(),u.dispose(),c.dispose(),p=f.map(function(C){return C.box}),g=f.map(function(C){return C.score}),v=f.map(function(C){return C.classScore}),y=f.map(function(C){return A.config.classes[C.label]}),[2,Bv(p.map(function(C){return C.rescale(o)}),g,this.config.iouThreshold,!0).map(function(C){return new Z3(g[C],v[C],y[C],p[C],d)})]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function tJ(n,t){var a,e=[],r=function eJ(n,t){var e=kl(n,t);function i(a){return{filters:e(a+"/filters",4),bias:e(a+"/bias",1)}}return{extractConvParams:i,extractConvWithBatchNormParams:function o(a){var u=i(a+"/conv"),c=function r(a){return{sub:e(a+"/sub",1),truediv:e(a+"/truediv",1)}}(a+"/bn");return{conv:u,bn:c}},extractSeparableConvParams:rI(e)}}(n,e),i=r.extractConvParams,o=r.extractConvWithBatchNormParams,s=r.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;a={conv0:t.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else a={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return Ac(n,e),{params:a,paramMappings:e}}(e,this.config)},t.prototype.extractParams=function(e){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(7!==i&&8!==i&&9!==i)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return function $X(n,t,e,r){var p,i=xc(n),s=i.getRemainingWeights,a=[],u=function ZX(n,t){var e=Xb(n,t),o=nI(n,t);return{extractConvParams:e,extractConvWithBatchNormParams:function i(s,a,u){var c=e(s,a,3,u+"/conv"),d=function r(s,a){var u=Kr(n(s)),c=Kr(n(s));return t.push({paramPath:a+"/sub"},{paramPath:a+"/truediv"}),{sub:u,truediv:c}}(a,u+"/bn");return{conv:c,bn:d}},extractSeparableConvParams:o}}(i.extractWeights,a),c=u.extractConvParams,d=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams;if(t.withSeparableConvs){var g=r[0],v=r[1],y=r[2],w=r[3],b=r[4],A=r[5],_=r[6],C=r[7],E=r[8];p={conv0:t.isFirstLayerConv2d?c(g,v,3,"conv0"):f(g,v,"conv0"),conv1:f(v,y,"conv1"),conv2:f(y,w,"conv2"),conv3:f(w,b,"conv3"),conv4:f(b,A,"conv4"),conv5:f(A,_,"conv5"),conv6:C?f(_,C,"conv6"):void 0,conv7:E?f(C,E,"conv7"):void 0,conv8:c(E||C||_,5*e,1,"conv8")}}else y=r[2],w=r[3],b=r[4],A=r[5],_=r[6],C=r[7],E=r[8],p={conv0:d(g=r[0],v=r[1],"conv0"),conv1:d(v,y,"conv1"),conv2:d(y,w,"conv2"),conv3:d(w,b,"conv3"),conv4:d(b,A,"conv4"),conv5:d(A,_,"conv5"),conv6:d(_,C,"conv6"),conv7:d(C,E,"conv7"),conv8:c(E,5*e,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:p,paramMappings:a}}(e,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(e,r,i){return ht(this,void 0,void 0,function(){var o,s,a,u,c,d,f,p,g,v,y,w,b,A,_,C,E,T,O,N,B,F,X,G,re,fe,he,$,ee,te=this;return pt(this,function(ce){switch(ce.label){case 0:return o=r.width,s=r.height,a=Math.max(o,s),u=a/o,c=a/s,d=e.shape[1],f=this.config.anchors.length,p=Je(function(){var xe=e.reshape([d,d,f,te.boxEncodingSize]);return[xe.slice([0,0,0,0],[d,d,f,4]),xe.slice([0,0,0,4],[d,d,f,1]),te.withClassScores?gc(xe.slice([0,0,0,5],[d,d,f,te.config.classes.length]),3):We(0)]}),g=p[0],y=p[2],w=[],[4,(v=p[1]).array()];case 1:return b=ce.sent(),[4,g.array()];case 2:A=ce.sent(),_=0,ce.label=3;case 3:if(!(_<d))return[3,12];C=0,ce.label=4;case 4:if(!(C<d))return[3,11];E=0,ce.label=5;case 5:return E<f?(T=qD(b[_][C][E][0]),!i||T>i?(O=(C+qD(A[_][C][E][0]))/d*u,N=(_+qD(A[_][C][E][1]))/d*c,B=Math.exp(A[_][C][E][2])*this.config.anchors[E].x/d*u,F=Math.exp(A[_][C][E][3])*this.config.anchors[E].y/d*c,X=O-B/2,G=N-F/2,re={row:_,col:C,anchor:E},this.withClassScores?[4,this.extractPredictedClass(y,re)]:[3,7]):[3,9]):[3,10];case 6:return ee=ce.sent(),[3,8];case 7:ee={classScore:1,label:0},ce.label=8;case 8:he=(fe=ee).classScore,$=fe.label,w.push($i({box:new qb(X,G,X+B,G+F),score:T,classScore:T*he,label:$},re)),ce.label=9;case 9:return E++,[3,5];case 10:return C++,[3,4];case 11:return _++,[3,3];case 12:return g.dispose(),v.dispose(),y.dispose(),[2,w]}})})},t.prototype.extractPredictedClass=function(e,r){return ht(this,void 0,void 0,function(){var i,o,s,a;return pt(this,function(u){switch(u.label){case 0:return i=r.row,o=r.col,s=r.anchor,[4,e.array()];case 1:return a=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(c,d){return a[i][o][s][d]}).map(function(c,d){return{classScore:c,label:d}}).reduce(function(c,d){return c.classScore>d.classScore?c:d})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(bc),rJ=function(n){function t(e){void 0===e&&(e=!0);var i=Object.assign({},{withSeparableConvs:e,iouThreshold:.4,classes:["face"]},e?{anchors:KX,meanRgb:QX}:{anchors:GX,withClassScores:!0});return n.call(this,i)||this}return Ot(t,n),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,r){return ht(this,void 0,void 0,function(){return pt(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return[2,o.sent().map(function(s){return new Cs(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(e){return n.prototype.extractParamsFromWeigthMap.call(this,e)},t}(TB),RB=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return Ot(t,n),t}(lI),jv=function(){function n(){}return n.prototype.then=function(t){return ht(this,void 0,void 0,function(){var e;return pt(this,function(r){switch(r.label){case 0:return e=t,[4,this.run()];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return ht(this,void 0,void 0,function(){return pt(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},n}();function MB(n,t){return Object.assign({},n,{descriptor:t})}function tA(n,t,e,r,i){return void 0===i&&(i=function(o){return o.alignedRect}),ht(this,void 0,void 0,function(){var o,s,a,u,c;return pt(this,function(d){switch(d.label){case 0:return o=n.map(function(f){return oI(f)?i(f):f.detection}),(a=r)?[3,5]:t instanceof Hn?[4,$D(t,o)]:[3,2];case 1:return u=d.sent(),[3,4];case 2:return[4,ZD(t,o)];case 3:u=d.sent(),d.label=4;case 4:a=u,d.label=5;case 5:return[4,e(s=a)];case 6:return c=d.sent(),s.forEach(function(f){return f instanceof Hn&&f.dispose()}),[2,c]}})})}function dI(n,t,e,r,i){return ht(this,void 0,void 0,function(){var o=this;return pt(this,function(s){return[2,tA([n],t,function(a){return ht(o,void 0,void 0,function(){return pt(this,function(u){return[2,e(a[0])]})})},r,i)]})})}function fI(n,t){var r=t[1];return{height:Math.floor(t[0]*n),width:Math.floor(r*n)}}var hI=function(n){function t(e,r,i,o){return n.call(this,{left:e,top:r,right:i,bottom:o},!0)||this}return Ot(t,n),t}(yu);function kB(n){return Je(function(){return Ji(ai(n,We(127.5)),We(.0078125))})}function Op(n,t){return Je(function(){return en(pr(n),Ji(t,Mb(pr(Mb(n)))))})}function pI(n,t,e){return void 0===e&&(e=!1),Je(function(){var r=Oa(n,t.conv1,"valid");return r=Op(r,t.prelu1_alpha),r=Op(r=Oa(r=wi(r,e?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),Op(r=Oa(r=e?r:wi(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)})}function hJ(n,t,e,r,i){i.stage1=[];var o=t.map(function(p){return Je(function(){var g={scale:p},v=function dJ(n,t){return Je(function(){var e=fI(t,n.shape.slice(1)),s=kB(wD.resizeBilinear(n,[e.height,e.width]));return Il(s,[0,2,1,3])})}(n,p),y=Date.now(),w=function lJ(n,t){return Je(function(){var e=pI(n,t,!0),r=Oa(e,t.conv4_1,"valid"),i=Zs(Lb(r,3),3);return{prob:gc(ai(r,i),3),regions:Oa(e,t.conv4_2,"valid")}})}(v,r),b=w.prob,A=w.regions;return g.pnet=Date.now()-y,{scoresTensor:si(si(b,3)[1])[0],regionsTensor:si(A)[0],scale:p,statsForScale:g}})}),s=o.map(function(p){var g=p.scoresTensor,v=p.regionsTensor,w=p.statsForScale,b=function fJ(n,t,e,r){for(var i=[],o=n.arraySync(),s=0;s<n.shape[0];s++)for(var a=0;a<n.shape[1];a++)o[s][a]>=r&&i.push(new An(a,s));return i.map(function(c){var d=new qb(Math.round((2*c.y+1)/e),Math.round((2*c.x+1)/e),Math.round((2*c.y+12)/e),Math.round((2*c.x+12)/e)),f=o[c.y][c.x],p=t.arraySync();return{cell:d,score:f,region:new hI(p[c.y][c.x][0],p[c.y][c.x][1],p[c.y][c.x][2],p[c.y][c.x][3])}})}(g,v,p.scale,e);if(g.dispose(),v.dispose(),!b.length)return i.stage1.push(w),[];var A=Date.now(),_=Bv(b.map(function(C){return C.cell}),b.map(function(C){return C.score}),.5);return w.nms=Date.now()-A,w.numBoxes=_.length,i.stage1.push(w),_.map(function(C){return b[C]})}),a=s.reduce(function(p,g){return p.concat(g)},[]),u=[],c=[];if(a.length>0){var d=Date.now(),f=Bv(a.map(function(p){return p.cell}),a.map(function(p){return p.score}),.7);i.stage1_nms=Date.now()-d,c=f.map(function(p){return a[p].score}),u=f.map(function(p){return a[p]}).map(function(p){var g=p.cell,v=p.region;return new qb(g.left+v.left*g.width,g.top+v.top*g.height,g.right+v.right*g.width,g.bottom+v.bottom*g.height).toSquare().round()})}return{boxes:u,scores:c}}function PB(n,t,e){var r=e.width,i=e.height;return ht(this,void 0,void 0,function(){var o,s,a,u=this;return pt(this,function(c){switch(c.label){case 0:return o=wu(n),[4,Promise.all(t.map(function(d){return ht(u,void 0,void 0,function(){var f,w,b,A;return pt(this,function(_){return f=d.padAtBorders(n.height,n.width),A=o.getImageData(w=f.x-1,b=f.y-1,f.ex-w,f.ey-b),[2,eo.isNodejs()?JD(A):createImageBitmap(A)]})})}))];case 1:return s=c.sent(),a=[],s.forEach(function(d){var p=wu(Kb({width:r,height:i}));p.drawImage(d,0,0,r,i);for(var g=p.getImageData(0,0,r,i).data,v=[],y=0;y<g.length;y+=4)v.push(g[y+2]),v.push(g[y+1]),v.push(g[y]);a.push(v)}),[2,a.map(function(d){return Je(function(){return kB(Il(Xo(d,[1,r,i,3]),[0,2,1,3]).toFloat())})})]}})})}function gJ(n,t,e,r,i){return ht(this,void 0,void 0,function(){var o,s,a,u,c,d,f,p,g,v,y,w,b,A;return pt(this,function(_){switch(_.label){case 0:return o=Date.now(),[4,PB(n,t,{width:24,height:24})];case 1:return s=_.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(C){var E=function pJ(n,t){return Je(function(){var e=pI(n,t),o=Op(bu(Ma(e,[e.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),s=bu(o,t.fc2_1),a=Zs(Lb(s,1),1),u=gc(ai(s,a),1),c=bu(o,t.fc2_2);return{scores:si(u,1)[1],regions:c}})}(C,r);return C.dispose(),E}),i.stage2_rnet=Date.now()-o,u=a.length>1?oi(a.map(function(C){return C.scores})):a[0].scores,f=(d=Array).from,[4,u.data()];case 2:return c=f.apply(d,[_.sent()]),u.dispose(),p=c.map(function(C,E){return{score:C,idx:E}}).filter(function(C){return C.score>e}).map(function(C){return C.idx}),g=p.map(function(C){return t[C]}),v=p.map(function(C){return c[C]}),y=[],w=[],g.length>0&&(o=Date.now(),b=Bv(g,v,.7),i.stage2_nms=Date.now()-o,A=b.map(function(C){var E=a[p[C]].regions.arraySync();return new hI(E[0][0],E[0][1],E[0][2],E[0][3])}),w=b.map(function(C){return v[C]}),y=b.map(function(C,E){return g[C].calibrate(A[E])})),a.forEach(function(C){C.regions.dispose(),C.scores.dispose()}),[2,{boxes:y,scores:w}]}})})}function vJ(n,t,e,r,i){return ht(this,void 0,void 0,function(){var o,s,a,u,c,d,f,p,g,v,y,w,b,A,_;return pt(this,function(C){switch(C.label){case 0:return o=Date.now(),[4,PB(n,t,{width:48,height:48})];case 1:return s=C.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(E){var T=function mJ(n,t){return Je(function(){var e=pI(n,t);e=Op(e=Oa(e=wi(e,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var o=Op(bu(Ma(e,[e.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),s=bu(o,t.fc2_1),a=Zs(Lb(s,1),1),u=gc(ai(s,a),1),c=bu(o,t.fc2_2),d=bu(o,t.fc2_3);return{scores:si(u,1)[1],regions:c,points:d}})}(E,r);return E.dispose(),T}),i.stage3_onet=Date.now()-o,u=a.length>1?oi(a.map(function(E){return E.scores})):a[0].scores,f=(d=Array).from,[4,u.data()];case 2:return c=f.apply(d,[C.sent()]),u.dispose(),p=c.map(function(E,T){return{score:E,idx:T}}).filter(function(E){return E.score>e}).map(function(E){return E.idx}),g=p.map(function(E){var T=a[E].regions.arraySync();return new hI(T[0][0],T[0][1],T[0][2],T[0][3])}),v=p.map(function(E,T){return t[E].calibrate(g[T])}),y=p.map(function(E){return c[E]}),w=[],b=[],A=[],v.length>0&&(o=Date.now(),_=Bv(v,y,.7,!1),i.stage3_nms=Date.now()-o,w=_.map(function(E){return v[E]}),b=_.map(function(E){return y[E]}),A=_.map(function(E,T){return Array(5).fill(0).map(function(O,N){var B=a[E].points.arraySync();return new An(B[0][N]*(w[T].width+1)+w[T].left,B[0][N+5]*(w[T].height+1)+w[T].top)})})),a.forEach(function(E){E.regions.dispose(),E.scores.dispose(),E.points.dispose()}),[2,{boxes:w,scores:b,points:A}]}})})}var yJ=function(n){function t(){return n.call(this,"Mtcnn")||this}return Ot(t,n),t.prototype.load=function(e){return ht(this,void 0,void 0,function(){return pt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,e)]})})},t.prototype.loadFromDisk=function(e){return ht(this,void 0,void 0,function(){return pt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,e)]})})},t.prototype.forwardInput=function(e,r){return void 0===r&&(r={}),ht(this,void 0,void 0,function(){var i,o,s,a,u,c,d,f,p,g,v,y,w,b,_,C,E,T,O,N;return pt(this,function(B){switch(B.label){case 0:if(!(i=this.params))throw new Error("Mtcnn - load model before inference");if(!(o=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},a=Date.now(),u=Je(function(){return function iJ(n){return Je(function(){return As(si(n,3).reverse(),3)})}(Zs(BD.fromPixels(o)).toFloat())}),c=function(F){return u.dispose(),s.total=Date.now()-a,F},d=u.shape.slice(1),f=d[0],p=d[1],g=new IB(r),v=g.minFaceSize,y=g.scaleFactor,w=g.maxNumScales,b=g.scoreThresholds,_=(g.scaleSteps||function cJ(n,t,e){for(var o=12/n,s=[],a=Math.min(e[0],e[1])*o,u=0;a>=12;)s.push(o*Math.pow(t,u)),a*=t,u+=1;return s}(v,y,[f,p])).filter(function(F){var X=fI(F,[f,p]);return Math.min(X.width,X.height)>12}).slice(0,w),s.scales=_,s.pyramid=_.map(function(F){return fI(F,[f,p])}),C=Date.now(),[4,hJ(u,_,b[0],i.pnet,s)];case 1:return E=B.sent(),s.total_stage1=Date.now()-C,E.boxes.length?(s.stage2_numInputBoxes=E.boxes.length,C=Date.now(),[4,gJ(o,E.boxes,b[1],i.rnet,s)]):[2,c({results:[],stats:s})];case 2:return T=B.sent(),s.total_stage2=Date.now()-C,T.boxes.length?(s.stage3_numInputBoxes=T.boxes.length,C=Date.now(),[4,vJ(o,T.boxes,b[2],i.onet,s)]):[2,c({results:[],stats:s})];case 3:return O=B.sent(),s.total_stage3=Date.now()-C,N=O.boxes.map(function(F,X){return Jb(zv({},new Cs(O.scores[X],new GD(F.left/p,F.top/f,F.width/p,F.height/f),{height:f,width:p})),new WY(O.points[X].map(function(G){return G.sub(new An(F.left,F.top)).div(new An(F.width,F.height))}),{width:F.width,height:F.height}))}),[2,c({results:N,stats:s})]}})})},t.prototype.forward=function(e,r){return void 0===r&&(r={}),ht(this,void 0,void 0,function(){var i;return pt(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,bi(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},t.prototype.forwardWithStats=function(e,r){return void 0===r&&(r={}),ht(this,void 0,void 0,function(){var i;return pt(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,bi(e)];case 1:return[2,i.apply(this,[o.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function uJ(n){var t=[],e=function aJ(n,t){var e=kl(n,t);function r(d){return{filters:e(d+"/weights",4,d+"/filters"),bias:e(d+"/bias",1)}}function i(d){return{weights:e(d+"/weights",2),bias:e(d+"/bias",1)}}function o(d){return e(d,1)}function s(d){return{conv1:r(d+"/conv1"),prelu1_alpha:o(d+"/prelu1_alpha"),conv2:r(d+"/conv2"),prelu2_alpha:o(d+"/prelu2_alpha"),conv3:r(d+"/conv3"),prelu3_alpha:o(d+"/prelu3_alpha")}}return{extractPNetParams:function a(){var d=s("pnet"),f=r("pnet/conv4_1"),p=r("pnet/conv4_2");return $i($i({},d),{conv4_1:f,conv4_2:p})},extractRNetParams:function u(){var d=s("rnet"),f=i("rnet/fc1"),p=o("rnet/prelu4_alpha"),g=i("rnet/fc2_1"),v=i("rnet/fc2_2");return $i($i({},d),{fc1:f,prelu4_alpha:p,fc2_1:g,fc2_2:v})},extractONetParams:function c(){var d=s("onet"),f=r("onet/conv4"),p=o("onet/prelu4_alpha"),g=i("onet/fc1"),v=o("onet/prelu5_alpha"),y=i("onet/fc2_1"),w=i("onet/fc2_2"),b=i("onet/fc2_3");return $i($i({},d),{conv4:f,prelu4_alpha:p,fc1:g,prelu5_alpha:v,fc2_1:y,fc2_2:w,fc2_3:b})}}}(n,t),i=e.extractRNetParams,o=e.extractONetParams,s=(0,e.extractPNetParams)(),a=i(),u=o();return Ac(n,t),{params:{pnet:s,rnet:a,onet:u},paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function sJ(n){var t=xc(n),r=t.getRemainingWeights,i=[],o=function oJ(n,t){var e=Xb(n,t),r=tI(n,t);function i(c,d){var f=Kr(n(c));return t.push({paramPath:d}),f}function o(c,d,f){return void 0===f&&(f=!1),{conv1:e(c[0],c[1],3,d+"/conv1"),prelu1_alpha:i(c[1],d+"/prelu1_alpha"),conv2:e(c[1],c[2],3,d+"/conv2"),prelu2_alpha:i(c[2],d+"/prelu2_alpha"),conv3:e(c[2],c[3],f?2:3,d+"/conv3"),prelu3_alpha:i(c[3],d+"/prelu3_alpha")}}return{extractPNetParams:function s(){var c=o([3,10,16,32],"pnet"),d=e(32,2,1,"pnet/conv4_1"),f=e(32,4,1,"pnet/conv4_2");return $i($i({},c),{conv4_1:d,conv4_2:f})},extractRNetParams:function a(){var c=o([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),f=i(128,"rnet/prelu4_alpha"),p=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return $i($i({},c),{fc1:d,prelu4_alpha:f,fc2_1:p,fc2_2:g})},extractONetParams:function u(){var c=o([3,32,64,64],"onet"),d=e(64,128,2,"onet/conv4"),f=i(128,"onet/prelu4_alpha"),p=r(1152,256,"onet/fc1"),g=i(256,"onet/prelu5_alpha"),v=r(256,2,"onet/fc2_1"),y=r(256,4,"onet/fc2_2"),w=r(256,10,"onet/fc2_3");return $i($i({},c),{conv4:d,prelu4_alpha:f,fc1:p,prelu5_alpha:g,fc2_1:v,fc2_2:y,fc2_3:w})}}}(t.extractWeights,i),a=o.extractRNetParams,u=o.extractONetParams,c=(0,o.extractPNetParams)(),d=a(),f=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:d,onet:f},paramMappings:i}}(e)},t}(bc),bJ=[new An(1.603231,2.094468),new An(6.041143,7.080126),new An(2.882459,3.518061),new An(4.266906,5.178857),new An(9.041765,10.66308)],AJ=[117.001,114.697,97.404],xJ=function(n){function t(){return n.call(this,{withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:bJ,meanRgb:AJ,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})||this}return Ot(t,n),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,r){return ht(this,void 0,void 0,function(){return pt(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return[2,o.sent().map(function(s){return new Cs(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(e){return n.prototype.extractParamsFromWeigthMap.call(this,e)},t}(TB),mn={ssdMobilenetv1:new SB,tinyFaceDetector:new xJ,tinyYolov2:new rJ,mtcnn:new yJ,faceLandmark68Net:new CB,faceLandmark68TinyNet:new xX,faceRecognitionNet:new TX,faceExpressionNet:new sX,ageGenderNet:new yX};function OB(n,t){return Object.assign({},n,{age:t})}var NB=function(n){function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return Ot(t,n),t}(jv),gI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r,i=this;return pt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return[4,tA(e=o.sent(),this.input,function(s){return ht(i,void 0,void 0,function(){return pt(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(u){return mn.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,a){return bB(s,r[a])})]}})})},t.prototype.withAgeAndGender=function(){return new wI(this,this.input)},t}(NB),mI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r;return pt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,dI(e,this.input,function(o){return mn.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,bB(e,r)]}})})},t.prototype.withAgeAndGender=function(){return new bI(this,this.input)},t}(NB),vI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.withAgeAndGender=function(){return new AI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new CI(this,this.input)},t}(gI),yI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.withAgeAndGender=function(){return new xI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new _I(this,this.input)},t}(mI),FB=function(n){function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return Ot(t,n),t}(jv),wI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r,i=this;return pt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return[4,tA(e=o.sent(),this.input,function(s){return ht(i,void 0,void 0,function(){return pt(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(u){return mn.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,a){var u=r[a],c=u.age;return OB(DB(s,u.gender,u.genderProbability),c)})]}})})},t.prototype.withFaceExpressions=function(){return new gI(this,this.input)},t}(FB),bI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r,i;return pt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?[4,dI(e,this.input,function(u){return mn.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=a.sent(),i=r.age,[2,OB(DB(e,r.gender,r.genderProbability),i)]}})})},t.prototype.withFaceExpressions=function(){return new mI(this,this.input)},t}(FB),AI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.withFaceExpressions=function(){return new vI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new CI(this,this.input)},t}(wI),xI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.withFaceExpressions=function(){return new yI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new _I(this,this.input)},t}(bI),BB=function(n){function t(e,r){var i=n.call(this)||this;return i.parentTask=e,i.input=r,i}return Ot(t,n),t}(jv),CI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e;return pt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return[4,tA(e=i.sent(),this.input,function(o){return Promise.all(o.map(function(s){return mn.faceRecognitionNet.computeFaceDescriptor(s)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,i.sent().map(function(o,s){return MB(e[s],o)})]}})})},t.prototype.withFaceExpressions=function(){return new vI(this,this.input)},t.prototype.withAgeAndGender=function(){return new AI(this,this.input)},t}(BB),_I=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r;return pt(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,dI(e,this.input,function(o){return mn.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,MB(e,r)]}})})},t.prototype.withFaceExpressions=function(){return new yI(this,this.input)},t.prototype.withAgeAndGender=function(){return new xI(this,this.input)},t}(BB),LB=function(n){function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.useTinyLandmarkNet=i,o}return Ot(t,n),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?mn.faceLandmark68TinyNet:mn.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(jv),CJ=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r,i,o,s,a=this;return pt(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return e=u.sent(),r=e.map(function(c){return c.detection}),this.input instanceof Hn?[4,$D(this.input,r)]:[3,3];case 2:return o=u.sent(),[3,5];case 3:return[4,ZD(this.input,r)];case 4:o=u.sent(),u.label=5;case 5:return i=o,[4,Promise.all(i.map(function(c){return a.landmarkNet.detectLandmarks(c)}))];case 6:return s=u.sent(),i.forEach(function(c){return c instanceof Hn&&c.dispose()}),[2,e.map(function(c,d){return Jb(c,s[d])})]}})})},t.prototype.withFaceExpressions=function(){return new vI(this,this.input)},t.prototype.withAgeAndGender=function(){return new AI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new CI(this,this.input)},t}(LB),_J=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r,i,o,s;return pt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?(r=e.detection,this.input instanceof Hn?[4,$D(this.input,[r])]:[3,3]):[2];case 2:return o=a.sent(),[3,5];case 3:return[4,ZD(this.input,[r])];case 4:o=a.sent(),a.label=5;case 5:return[4,this.landmarkNet.detectLandmarks((i=o)[0])];case 6:return s=a.sent(),i.forEach(function(u){return u instanceof Hn&&u.dispose()}),[2,Jb(e,s)]}})})},t.prototype.withFaceExpressions=function(){return new yI(this,this.input)},t.prototype.withAgeAndGender=function(){return new xI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new _I(this,this.input)},t}(LB),UB=function(n){function t(e,r){void 0===r&&(r=new $b);var i=n.call(this)||this;return i.input=e,i.options=r,i}return Ot(t,n),t}(jv),zB=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r,i,o;return pt(this,function(s){switch(s.label){case 0:return r=(e=this).input,(i=e.options)instanceof IB?[4,mn.mtcnn.forward(r,i)]:[3,2];case 1:return[2,s.sent().map(function(a){return a.detection})];case 2:if(!(o=i instanceof RB?function(a){return mn.tinyFaceDetector.locateFaces(a,i)}:i instanceof $b?function(a){return mn.ssdMobilenetv1.locateFaces(a,i)}:i instanceof lI?function(a){return mn.tinyYolov2.locateFaces(a,i)}:null))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(r){return ht(e,void 0,void 0,function(){var i;return pt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i.map(function(s){return zv({},s)}))]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new CJ(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new gI(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new wI(this.runAndExtendWithFaceDetections(),this.input)},t}(UB);function jB(n,t){var e=new gf(t.width,t.height),r=e.width,i=e.height;if(r<=0||i<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:i}));if(Array.isArray(n))return n.map(function(a){return jB(a,{width:r,height:i})});if(oI(n)){var o=n.detection.forSize(r,i),s=n.unshiftedLandmarks.forSize(o.box.width,o.box.height);return Jb(zv(n,o),s)}return Uv(n)?zv(n,n.detection.forSize(r,i)):n instanceof kp||n instanceof Cs?n.forSize(r,i):n}!function(n){function t(){return null!==n&&n.apply(this,arguments)||this}Ot(t,n),t.prototype.run=function(){return ht(this,void 0,void 0,function(){var e,r;return pt(this,function(i){switch(i.label){case 0:return[4,new zB(this.input,this.options)];case 1:return e=i.sent(),r=e[0],e.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(r){return ht(e,void 0,void 0,function(){var i;return pt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i?zv({},i):void 0)]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new _J(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new mI(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new bI(this.runAndExtendWithFaceDetection(),this.input)}}(UB),function(){function n(t,e){void 0===e&&(e=.6),this._distanceThreshold=e;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=r.map(function(s){if(s instanceof Gb)return s;if(s instanceof Float32Array)return new Gb(o(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new Gb(o(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(t,e){return e.map(function(r){return function DJ(n,t){if(n.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(n),r=Array.from(t);return Math.sqrt(e.map(function(i,o){return i-r[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}(r,t)}).reduce(function(r,i){return r+i},0)/(e.length||1)},n.prototype.matchDescriptor=function(t){var e=this;return this.labeledDescriptors.map(function(r){return new eB(r.label,e.computeMeanDistance(t,r.descriptors))}).reduce(function(r,i){return r.distance<i.distance?r:i})},n.prototype.findBestMatch=function(t){var e=this.matchDescriptor(t);return e.distance<this.distanceThreshold?e:new eB("unknown",e.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},n.fromJSON=function(t){return new n(t.labeledDescriptors.map(function(r){return Gb.fromJSON(r)}),t.distanceThreshold)}}();const IJ=["webcam"];function SJ(n,t){if(1&n&&(Ne(0),V(1,"div",4)(2,"span"),Pe(3),Y()(),Fe()),2&n){const e=t.ngIf,r=j(2);U(3),zn(r.translation(e))}}function TJ(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",1)(2,"web-cam",2,3),De("videoReady",function(i){return ve(e),we(j().onVideoReady(i))})("videoEnded",function(){return ve(e),we(j().onVideoEnded())})("captureCompleted",function(i){return ve(e),we(j().onCaptured(i))}),Y(),ue(4,SJ,4,1,"ng-container",0),wn(5,"async"),Y(),Fe()}if(2&n){const e=j();U(2),z("autocapture",!0)("allowOverlay",!0),U(2),z("ngIf",bn(5,3,e.instructiontext$))}}function RJ(n,t){if(1&n&&(Ne(0),V(1,"h5",5),Pe(2),Y(),Fe()),2&n){const e=t.ngIf;U(2),Vs(" ",e,"")}}let HB=(()=>{class n{constructor(){this.KEY_MULTIPLE_FACE_FOUND="MultipleFaceFound",this.KEY_STAY_STILL="StayStillInstruction",this.KEY_TURN_RIGHT="TurnRightInstruction",this.KEY_TURN_LEFT="TurnLeftInstruction",this.KEY_TURN_STRAIGHT="TurnStraightInstruction",this.KEY_COME_BEFORE_CAMERA="NoFaceInstruction",this.modelLoaded$=new bt(!1),this.loadError$=new bt(void 0),this.allowMultipleFace=!1,this._expectedFaceDirection=Ea.None,this.translation=e=>{switch(e){case this.KEY_MULTIPLE_FACE_FOUND:return"Multiple face found.";case this.KEY_COME_BEFORE_CAMERA:return"Please come infront of the camera";case this.KEY_STAY_STILL:return"Please stay still";case this.KEY_TURN_LEFT:return"Please turn to your left";case this.KEY_TURN_RIGHT:return"Please turn to your right";case this.KEY_TURN_STRAIGHT:return"Please look straight to the camera"}return e},this.instructiontext$=new bt(""),this.faceImageReceived=new Qe}get expectedFaceDirection(){return this._expectedFaceDirection}set expectedFaceDirection(e){this._expectedFaceDirection=e,this.setInstructionText()}ngOnInit(){this.loadModels().then(()=>{this.modelLoaded$.next(!0),this.loadError$.next(void 0)}).catch(e=>{this.loadError$.error(e&&e.message?e.message:e),this.modelLoaded$.next(!1)})}onVideoReady(e){var r=this;const i={width:e.video.videoWidth,height:e.video.videoHeight};!function tX(n,t,e){void 0===e&&(e=!1);var r=e?XD(t):t,i=r.width,o=r.height;n.width=i,n.height=o}(e.canvas,i);const o=2e3;let s=0;this.timer=setInterval(du(function*(){const a=yield function EJ(n,t){return void 0===t&&(t=new $b),new zB(n,t)}(e.video,new RB).withFaceLandmarks().withFaceDescriptors(),u=jB(a,i);if(e.canvas.getContext("2d")?.clearRect(0,0,e.canvas.width,e.canvas.height),function QY(n,t){(Array.isArray(t)?t:[t]).forEach(function(r){var i=r instanceof Cs?r.score:Uv(r)?r.detection.score:void 0,o=r instanceof Cs?r.box:Uv(r)?r.detection.box:new yu(r),s=i?""+WD(i):void 0;new KY(o,{label:s}).draw(n)})}(e.canvas,u),a.length>0)if(r.expectedFaceDirection!==Ea.None)if(a.length>1)if(r.allowMultipleFace){let c;for(let d=0;d<a.length;d++){const f=r.checkDirection(a[d]);if(f===r.expectedFaceDirection){const p=s+100;p<o?s=p:r.webcam?.requestCaptureImage(),c=f;break}}c?r.setInstructionText(c):(s=0,r.setInstructionText())}else r.instructiontext$.next(r.KEY_MULTIPLE_FACE_FOUND);else{const c=r.checkDirection(a[0]);if(r.setInstructionText(c),c===r.expectedFaceDirection){const d=s+100;d<o?s=d:r.webcam?.requestCaptureImage()}else s=0}else{r.setInstructionText(r.expectedFaceDirection);const c=s+100;c<o?s=c:r.webcam?.requestCaptureImage()}else s=0,r.setInstructionText()}),100)}setInstructionText(e){if(e)if(e===this.expectedFaceDirection)this.instructiontext$.next(this.KEY_STAY_STILL);else switch(this.expectedFaceDirection){case Ea.Left:this.instructiontext$.next(this.KEY_TURN_LEFT);break;case Ea.Right:this.instructiontext$.next(this.KEY_TURN_RIGHT);break;case Ea.Straight:this.instructiontext$.next(this.KEY_TURN_STRAIGHT);break;case Ea.None:this.instructiontext$.next(this.KEY_COME_BEFORE_CAMERA)}else this.instructiontext$.next(this.KEY_COME_BEFORE_CAMERA)}checkDirection(e){const r=e.landmarks.getLeftEye(),i=e.landmarks.getRightEye(),s=r[0].x+(r[3].x-r[0].x)/2,a=i[0].x+(i[3].x-i[0].x)/2,u=a-s,c=(s+a)/2-(e.alignedRect.box.x+e.alignedRect.box.width/2);return c<-.125*u?Ea.Right:c>.125*u?Ea.Left:Ea.Straight}onCaptured(e){this.faceImageReceived.next(e)}onVideoEnded(){this.timer&&clearInterval(this.timer)}loadModels(){return new Promise((e,r)=>{Promise.all([mn.tinyFaceDetector.loadFromUri("./assets/models"),mn.faceLandmark68Net.loadFromUri("./assets/models"),mn.faceRecognitionNet.loadFromUri("./assets/models")]).then(()=>e()).catch(i=>r(i))})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["lib-face-camera-lib"]],viewQuery:function(r,i){if(1&r&&Pr(IJ,5),2&r){let o;kr(o=Or())&&(i.webcam=o.first)}},inputs:{allowMultipleFace:"allowMultipleFace",expectedFaceDirection:"expectedFaceDirection",translation:"translation"},outputs:{faceImageReceived:"faceImageReceived"},standalone:!0,features:[ii],decls:4,vars:6,consts:[[4,"ngIf"],[1,"camera-container"],[3,"autocapture","allowOverlay","videoReady","videoEnded","captureCompleted"],["webcam",""],[1,"instruction"],[1,"error-view"]],template:function(r,i){1&r&&(ue(0,TJ,6,5,"ng-container",0),wn(1,"async"),ue(2,RJ,3,1,"ng-container",0),wn(3,"async")),2&r&&(z("ngIf",bn(1,2,i.modelLoaded$)),U(2),z("ngIf",bn(3,4,i.loadError$)))},dependencies:[_r,Fr,Aa,sv],styles:[".error-view[_ngcontent-%COMP%]{color:red;text-align:center;margin:10px 0;box-sizing:border-box;padding:0 10px}.camera-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.camera-container[_ngcontent-%COMP%]   web-cam[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.camera-container[_ngcontent-%COMP%]   .instruction[_ngcontent-%COMP%]{position:absolute;top:24px;left:50%;width:70%;transform:translate(-50%);min-height:48px;display:flex;align-items:center;justify-content:center;background-color:#fff;border-radius:6px}.instruction[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;color:#0d0f10;font-size:14px;font-weight:400}"],changeDetection:0})}return n})();var WB=Ni(480);class MJ{constructor(){this.recordedBlobs=[],this.duration=300,this.maxSize=200,this.isRecording=!1,this.isPaused=!1,this.startTime=0,this.elapsedTime=0,this.onVideoReady=new Qe}startRecording(t,e){return new Promise((r,i)=>{if(void 0!==typeof WB.MediaStreamRecorder){this.duration=t,this.maxSize=1024*e*1024,this.elapsedTime=0,this.stream=void 0;try{navigator.mediaDevices.getUserMedia({video:!0,audio:{echoCancellation:!0}}).then(o=>{this.recordRTC=new WB.RecordRTCPromisesHandler(o,{type:"video",timeSlice:1e3,mimeType:"video/webm",disableLogs:!0,ondataavailable:s=>{this.recordedBlobs.push(s)}}),this.recordRTC.startRecording().then(()=>{this.stream=o,this.isRecording=!0,this.startTime=Date.now(),this.timerInterval=setInterval(()=>{this.elapsedTime=Math.floor((Date.now()-this.startTime)/1e3),this.recordedBlobs.length>0&&this.getBlobSize()>=this.maxSize&&this.stopRecording()},1e3),setTimeout(()=>{this.stopRecording()},1e3*this.duration),r()}).catch(s=>{i(s)})}).catch(o=>{i(o)})}catch(o){console.error("Error accessing media devices:",o),i(o.message)}}else i("Your browser does not support this feature.")})}stopRecording(){return new Promise((t,e)=>{this.isRecording?this.recordRTC?.stopRecording().then(()=>{this.recordRTC?.getBlob().then(r=>{const i=new File([r],this.filename(r.type),{type:r.type,lastModified:Date.now()});this.onVideoReady.next(i),this.isRecording=!1,this.timerInterval&&clearInterval(this.timerInterval),setTimeout(()=>{this.clearRecording()},250),t()}).catch(r=>{this.timerInterval&&clearInterval(this.timerInterval),setTimeout(()=>{this.clearRecording()},250),e(r?"Empty blob."===r?"Your browser does not support this feature.":r:"Unfortunately we could not record anything."),e(r||"Unknown error")})}).catch(r=>{this.timerInterval&&clearInterval(this.timerInterval),setTimeout(()=>{this.clearRecording()},250),e(r?"Empty blob."===r?"Your browser does not support this feature.":r:"Unfortunately we could not record anything."),e(r||"Unknown error")}):e("Recoding is not on going")})}pauseRecording(){this.isRecording&&this.recordRTC?.pauseRecording().then(()=>{this.isPaused=!0,clearInterval(this.timerInterval)})}resumeRecording(){this.isPaused&&this.recordRTC?.resumeRecording().then(()=>{this.isPaused=!1,this.startTime=Date.now()-1e3*this.elapsedTime,this.timerInterval=setInterval(()=>{this.elapsedTime=Math.floor((Date.now()-this.startTime)/1e3),this.recordedBlobs.length>0&&this.getBlobSize()>=this.maxSize&&this.stopRecording()},1e3)})}clearRecording(){try{this.recordedBlobs=[],this.elapsedTime=0,this.stream?.getTracks().forEach(t=>t.stop()),this.recordRTC?.reset(),this.recordRTC?.destroy(),this.stream=void 0}catch{}}getStream(){return this.stream}getBlobSize(){return new Blob(this.recordedBlobs).size}getFileExtensionFromMimeType(t){return t.startsWith("video/webm")?".webm":t.startsWith("video/mp4")?".mp4":t.startsWith("video/x-matroska")?".mkv":t.startsWith("video/3gp")?".3gp":t.startsWith("video/quicktime")?".mov":".wmv"}filename(t){const e=this.getFileExtensionFromMimeType(t);return"Recording-"+Date.now()+e}}let VB=(()=>{class n{transform(e){const r=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%60);return r>0?`${this.pad(r)}:${this.pad(i)}:${this.pad(o)}`:`${this.pad(i)}:${this.pad(o)}`}pad(e){return e.toString().padStart(2,"0")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Gn({name:"secondsToTime",type:n,pure:!0,standalone:!0})}return n})();const kJ=["videoElement"],PJ=["videoCanvas"];function OJ(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",10),De("click",function(){return ve(e),we(j().startRecording())}),dt(2,"div",11),Y(),Fe()}}function NJ(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",15),De("click",function(){return ve(e),we(j(2).resumeRecording())}),Y(),Fe()}}function FJ(n,t){if(1&n){const e=ft();Ne(0),V(1,"img",16),De("click",function(){return ve(e),we(j(2).pauseRecording())}),Y(),Fe()}if(2&n){const e=j(2);U(1),z("src",e.Assets.Images.VideoPause,It)}}function BJ(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",12)(2,"div",13),ue(3,NJ,2,0,"ng-container",8),ue(4,FJ,2,1,"ng-container",8),Y(),V(5,"div",13)(6,"div",14),De("click",function(){return ve(e),we(j().stopRecording())}),Y()()(),Fe()}if(2&n){const e=j();U(3),z("ngIf",e.isPaused),U(1),z("ngIf",!e.isPaused)}}let LJ=(()=>{class n{constructor(e){this.zone=e,this.Assets=Ti,this.duration=300,this.maxSize=200,this.recordCompleted=new Qe,this.cancel=new Qe,this.stopCanvasRendering=!1,this.elapsedTime=0,this.isRecording=!1,this.isPaused=!1}ngAfterViewInit(){this.displayVideoPreview(),setTimeout(()=>{this.startRecording()},10)}ngOnDestroy(){this.recordingService?.clearRecording()}onFileReady(e){var r=this;return du(function*(){r.recordingService=void 0,r.zone.run(()=>{r.recordCompleted.next(e)})})()}startRecording(){var e=this;return du(function*(){e.recordingService=new MJ,e.recordingService.onVideoReady.subscribe(r=>{e.onFileReady(r)}),e.elapsedTime=0,e.recordingService?.startRecording(e.duration,e.maxSize).then(()=>{e.isRecording=!0,e.isPaused=!1,e.displayVideoPreview(),e.playVideo(),e.startTimer()}).catch(r=>{e.cancel.next(r)})})()}stopRecording(){this.stopCanvasRendering=!0,clearInterval(this.timerInterval),this.recordingService?.stopRecording().then(()=>{this.pauseVideo(),this.isRecording=!1,this.isPaused=!1}).catch(e=>{this.cancel.next(e)})}pauseRecording(){this.recordingService?.pauseRecording(),clearInterval(this.timerInterval),this.pauseVideo(),this.isRecording=!0,this.isPaused=!0}resumeRecording(){this.recordingService?.resumeRecording(),this.startTimer(),this.playVideo(),this.isRecording=!0,this.isPaused=!1}displayVideoPreview(){const e=this.videoElement.nativeElement;e.muted=!0;const r=this.recordingService?.getStream();r&&(e.srcObject=r,this.stopCanvasRendering=!1,this.processVideoFrames(e,this.canvasElement.nativeElement))}processVideoFrames(e,r){const i=r.getContext("2d"),o=()=>{i&&!e.paused&&!e.ended&&(r.width=e.videoWidth,r.height=e.videoHeight,i.drawImage(e,0,0,r.width,r.height)),this.stopCanvasRendering||requestAnimationFrame(o)};this.stopCanvasRendering||requestAnimationFrame(o)}playVideo(){const e=this.videoElement.nativeElement;e&&e.play()}pauseVideo(){const e=this.videoElement.nativeElement;e&&e.pause()}startTimer(){this.timerInterval=setInterval(()=>{this.elapsedTime++},1e3)}static#e=this.\u0275fac=function(r){return new(r||n)(lt(Pn))};static#t=this.\u0275cmp=dn({type:n,selectors:[["video-recorder"]],viewQuery:function(r,i){if(1&r&&(Pr(kJ,5),Pr(PJ,5)),2&r){let o;kr(o=Or())&&(i.videoElement=o.first),kr(o=Or())&&(i.canvasElement=o.first)}},inputs:{duration:"duration",maxSize:"maxSize"},outputs:{recordCompleted:"recordCompleted",cancel:"cancel"},decls:13,vars:6,consts:[[2,"position","relative","width","100%","height","100%"],[2,"width","100%","height","100%","background-color","black","display","none",3,"playsInline"],["videoElement",""],[2,"position","absolute","background-color","#0008","color","white","top","0","left","0","width","100%","height","100%","display","flex","align-items","center","justify-content","center","overflow","hidden"],[2,"overflow","hidden"],["videoCanvas",""],[2,"position","absolute","background-color","#0008","bottom","0","left","0","width","100%","height","84px","z-index","5","display","flex","align-items","center","justify-content","center"],[2,"margin","auto","display","flex","align-items","center","justify-content","center","gap","24px"],[4,"ngIf"],[2,"position","absolute","background-color","#0008","color","white","top","0","left","0","width","100%","height","84px","z-index","5","display","flex","align-items","center","justify-content","center"],[2,"box-sizing","border-box","width","64px","height","64px","background-color","white","border-radius","32px","user-select","none","cursor","pointer","padding","20px",3,"click"],[2,"width","100%","height","100%","border-radius","50%","background","red"],[2,"height","48px","display","flex","align-items","center","justify-content","center","gap","20px","background-color","white","box-sizing","border-box","border-radius","24px","padding","4px 16px 4px 8px"],[2,"width","32px","height","32px","display","flex","align-items","center","justify-content","center"],[2,"width","20px","height","20px","background-color","black","border-radius","4px",3,"click"],[2,"width","20px","height","20px","border-radius","16px","background-color","red",3,"click"],["alt","Pause Video","srcset","",2,"width","24px",3,"src","click"]],template:function(r,i){1&r&&(V(0,"div",0),dt(1,"video",1,2),V(3,"div",3),dt(4,"canvas",4,5),Y(),V(6,"div",6)(7,"div",7),ue(8,OJ,3,0,"ng-container",8),ue(9,BJ,7,2,"ng-container",8),Y()(),V(10,"div",9),Pe(11),wn(12,"secondsToTime"),Y()()),2&r&&(U(1),z("playsInline",!0),U(7),z("ngIf",!i.isRecording&&!i.isPaused),U(1),z("ngIf",i.isRecording),U(2),Vs(" ",bn(12,4,i.elapsedTime)," "))},dependencies:[Fr,VB]})}return n})();const UJ=["iframeElement"];function zJ(n,t){if(1&n&&(Ne(0),V(1,"div",4),dt(2,"img",5),V(3,"span"),Pe(4,"Please Wait"),Y()(),Fe()),2&n){const e=j();U(2),z("src",e.Assets.Gifs.Loading,It)}}function jJ(n,t){if(1&n&&(Ne(0),V(1,"div",4),dt(2,"img",6),V(3,"span"),Pe(4),Y()(),Fe()),2&n){const e=t.ngIf,r=j();U(2),z("src",r.Assets.Images.Warning,It),U(2),zn(e)}}let iA=class cS{get openingLink(){return this._openingLink}set openingLink(t){this._openingLink=t,this.trustedurl=this.sanitizer.bypassSecurityTrustResourceUrl(this.openingLink)}constructor(t){this.sanitizer=t,this.Assets=Ti,this._openingLink="https://www.cloudapper.com",this.trustedurl="",this.errorReceived=new Qe,this.isLoading$=new bt(!0),this.error$=new bt(null)}ngOnInit(){this.error$.pipe(Dn(this)).subscribe(t=>{t&&setTimeout(()=>{this.errorReceived.next(t)},500)})}onLoad(){this.isLoading$.next(!1)}static#e=this.\u0275fac=function(e){return new(e||cS)(lt(ap))};static#t=this.\u0275cmp=dn({type:cS,selectors:[["iframe-preview"]],viewQuery:function(e,r){if(1&e&&Pr(UJ,5),2&e){let i;kr(i=Or())&&(r.iframeRef=i.first)}},inputs:{openingLink:"openingLink"},outputs:{errorReceived:"errorReceived"},standalone:!0,features:[ii],decls:7,vars:7,consts:[[1,"iframe-container"],["id","iframe-preview","frameborder","0",3,"src","loadstart","load","error"],["iframeElement",""],[4,"ngIf"],[1,"overlay"],["alt","Loading",3,"src"],["alt","Warning sign",3,"src"]],template:function(e,r){1&e&&(V(0,"div",0)(1,"iframe",1,2),De("loadstart",function(){return r.isLoading$.next(!0),r.error$.next(null)})("load",function(){return r.onLoad()})("error",function(o){return r.isLoading$.next(!1),r.error$.next(o.message)}),Y(),ue(3,zJ,5,1,"ng-container",3),wn(4,"async"),ue(5,jJ,5,2,"ng-container",3),wn(6,"async"),Y()),2&e&&(U(1),z("src",r.trustedurl,lm),U(2),z("ngIf",bn(4,3,r.isLoading$)),U(2),z("ngIf",bn(6,5,r.error$)))},dependencies:[_r,Fr,Aa],styles:[".iframe-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;box-sizing:border-box;overflow:hidden;background-color:#fff}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fff3;display:flex;align-items:center;justify-content:center}.overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:84px}.overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:400;text-align:center;color:#c71927}"]})};iA=ke([Co()],iA);class ea extends D{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(t){const{hasError:e,_hasValue:r,_value:i,thrownError:o,isStopped:s,_isComplete:a}=this;e?t.error(o):(s||a)&&(r&&t.next(i),t.complete())}next(t){this.isStopped||(this._value=t,this._hasValue=!0)}complete(){const{_hasValue:t,_value:e,_isComplete:r}=this;r||(this._isComplete=!0,t&&super.next(e),super.complete())}}const HJ=["video"],WJ=["canvas"],VJ=["resultsPanel"],EI="assets/wasm/index.js",Hv="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.8/wasm/index.js",qB={audio:!1,video:!0},DI={lineWidth:1,strokeStyle:"green",fillStyle:"#55f02880"},II={font:"15px serif",strokeStyle:"#fff0",fillStyle:"#ff0000"},Cc={src:"",fps:30,vibrate:300,decode:"utf-8",isBeep:!0,constraints:qB,canvasStyles:[DI,II]};var oA=()=>"zbarWasm"in window;const xn=(n,t,e)=>{e?n.error(e):n.next(t),n.complete()},SI=(n=!1)=>{if(!1===n)return;const t=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");t.oncanplaythrough=()=>{const e=t.play();e&&e.catch(r=>{})}},GB=(n,t,e,r)=>{let i,o,s=t.width,a=t.height,u=s/a,c=parseInt(getComputedStyle(t).width),d=parseInt(getComputedStyle(t).height),f=c/d;e.innerHTML="",u>f?(i=c/s,o=c/u/a):(o=d/a,i=d*u/s);for(let p=0;p<n.length;p++){const g=n[p];let v=document.createElement("canvas"),y=v.getContext("2d",{willReadFrequently:!0}),w={},b=[],A=[],_=0,C=0,E=2===r.length&&r[1]?.font?.replace(/[^0-9]/g,"");E&&/[0-9]/g.test(E)&&(_=parseFloat(E),C=(i||1)*_,Number.isNaN(C)&&(C=_));const T=g.points;for(let re=0;re<T.length;re++){const fe=T?.[re]?.x??0,he=T?.[re]?.y??0;w[`x${re+1}`]=fe,w[`y${re+1}`]=he,b.push(fe),A.push(he)}let O=Math.max(...b),N=Math.min(...b),B=Math.max(...A),F=Math.min(...A);v.setAttribute("class","qrcode-polygon"),u>f?(v.style.top=F*o+.5*(d-c/u)+"px",v.style.left=N*i+"px",v.width=(O-N)*i,v.height=(B-F)*i):(v.style.top=F*o+"px",v.style.left=N*i+.5*(c-d*u)+"px",v.width=(O-N)*o,v.height=(B-F)*o);for(const re in r[0])y[re]=r[0][re];const X=[];for(let re=0;re<b.length;re++)X.push((w[`x${re+1}`]-N)*o),X.push((w[`y${re+1}`]-F)*i);const G=X.slice(0);for(y.beginPath(),y.moveTo(G.shift(),G.shift());G.length;)y.lineTo(G.shift(),G.shift());if(y.closePath(),y.fill(),y.stroke(),_){const re=document.createElement("div");re.setAttribute("class","qrcode-tooltip-temp"),re.innerText=g.value,re.style.maxWidth=(s>window.innerWidth?.9*window.innerWidth:s)+"px",re.style.borderRadius=`clamp(1px, ${i*_-10}px, 3px)`,re.style.paddingBlock=`clamp(1px, ${i*_-10}px, 3px)`,re.style.paddingInline=`clamp(2.5px, ${i*_-6}px, 10px)`;const fe=`<svg xmlns="http://www.w3.org/2000/svg" width="${C}" height="${C}" viewBox="0 0 512 512"><rect x="128" y="128" width="336" height="336" rx="57" ry="57"></rect><path d="M383.5,128l.5-24a56.16,56.16,0,0,0-56-56H112a64.19,64.19,0,0,0-64,64V328a56.16,56.16,0,0,0,56,56h24"></path></svg>`,he=(new DOMParser).parseFromString(fe,"application/xml"),$=re.ownerDocument.importNode(he.documentElement,!0);$.style.marginLeft=`clamp(1px, ${i*_-10}px, 3px)`,re.appendChild($),$.addEventListener("click",()=>window.navigator.clipboard.writeText(g.value)),re.addEventListener("click",()=>window.navigator.clipboard.writeText(g.value));const ee=document.createElement("div");ee.setAttribute("class","qrcode-tooltip"),ee.appendChild(re),o=d/a,i=d*u/s,ee.style.fontSize=i*_+"px",ee.style.top=F*o+"px",ee.style.left=N*i+.5*(c-d*u)+"px",ee.style.width=(O-N)*o+"px",ee.style.height=(B-F)*o+"px";const te=document.createElement("span");te.innerText=g.value,te.style.top=F*o+-20*o+"px",te.style.left=N*i+.5*(c-d*u)+"px";const ce=r[1]?.font?.split(" ")?.[1];te.style.fontFamily=ce,te.style.fontSize=i*_+"px",te.style.color=r?.[1]?.fillStyle,e?.appendChild(ee),e?.appendChild(te)}e?.appendChild(v)}},KB=(n,t)=>new Promise((e,r)=>n.toBlob(i=>e(i),t)),QB=(n=[],t,e,r,i=new ea)=>(YB(n,e,r).then(o=>{Promise.all(Object.assign([],o).map(s=>((n,t)=>{let e=t?.decode??Cc.decode,r=2===t?.canvasStyles?.length?t?.canvasStyles:[DI,II],i=t?.isBeep??Cc.isBeep;return new Promise((o,s)=>{const a=new FileReader;a.onload=()=>{const u={name:n.name,file:n,url:URL.createObjectURL(n)},c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=du(function*(){const d=document.createElement("canvas");d.width=c.naturalWidth||c.width,d.height=c.naturalHeight||c.height;const f=d.getContext("2d");f.drawImage(c,0,0,d.width,d.height);const p=f.getImageData(0,0,d.width,d.height);if(oA()){const g=yield zbarWasm.scanImageData(p);if(g?.length){g.forEach(b=>b.value=b.decode(e?.toLocaleLowerCase())),((n,t,e)=>{let r=t.getContext("2d",{willReadFrequently:!0});for(let i=0;i<n.length;i++){const o=n[i];let s={},a=[],u=[],c=0,f=e[1]?.font?.split(" ")?.[0]?.replace(/[^0-9]/g,"");f&&/[0-9]/g.test(f)&&(c=parseFloat(f));const p=o.points;for(let A=0;A<p.length;A++){const _=p?.[A]?.x??0,C=p?.[A]?.y??0;s[`x${A+1}`]=_,s[`y${A+1}`]=C,a.push(_),u.push(C)}let g=Math.min(...a),v=Math.min(...u);const y=()=>{for(const C in e[0])r[C]=e[0][C];const A=[];for(let C=0;C<a.length;C++)A.push(s[`x${C+1}`]),A.push(s[`y${C+1}`]);const _=A.slice(0);for(r.beginPath(),r.moveTo(_.shift(),_.shift());_.length;)r.lineTo(_.shift(),_.shift());r.closePath(),r.fill(),r.stroke()};let w=document.createElement("canvas");const b=()=>{const A=e[1]?.font?.split(" ")?.[1];w.height=t.height,w.width=t.width;let _=w.getContext("2d",{willReadFrequently:!0});_.font=c+"px "+A;for(const C in e[1])_[C]=e[1][C];JJ(_,o.value,g,v-5)};y(),b(),r.drawImage(w,0,0)}})(g,d,r);const v=yield KB(d),y=URL.createObjectURL(v);o(Object.assign({},u,{data:g,url:y,canvas:d,file:(b=v,A=u.name,new File([b],A,{lastModified:(new Date).getTime(),type:b.type}))})),SI(i)}else o(Object.assign({},u,{data:g,canvas:d}))}var b,A}),c.src=u.url},a.onerror=u=>s(u),a.readAsDataURL(n)})})(s,t))).then(s=>{xn(i,s)}).catch(s=>xn(i,null,s))}),i),JJ=(n,t,e,r)=>{let i=1.2*n.measureText("M").width,o=t.split("\n");for(var s=0;s<o.length;++s)n.fillText(o[s],e,r),n.strokeText(o[s],e,r),r+=i},YB=(n=[],t=100,e=100)=>{if(n.length&&(t<100||e<100)){const r=[];return new Promise((i,o)=>{for(const s of n){const a=new Image,u=new FileReader;u.onload=function(c){a.onload=function(){const d=document.createElement("canvas"),f=d.getContext("2d"),p=Math.round(a.width*(t/100)),g=Math.round(a.height*(t/100));d.width=p,d.height=g,f.drawImage(a,0,0,p,g),d.toBlob(v=>{const y=new File([v],s.name,{type:s.type});r.push(y),n.length===r.length&&i(r)},s.type,e/100)},a.src=c.target.result},u.onerror=c=>o(c),u.readAsDataURL(s)}})}return Promise.resolve(n)},XB=n=>{Object.assign([],n.childNodes).forEach(t=>n.removeChild(t))},TI=(n,t)=>{n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px"},JB=(n=300)=>{n&&$J()&&window?.navigator?.vibrate(n)},$J=()=>{const n=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n.substr(0,4))||/^((?!chrome|android).)*safari/i.test(n))};let eZ=(()=>{class n{loadFiles(e=[],r,i){const o=new ea;return YB(e,r,i).then(s=>{Promise.all(Object.assign([],s).map(a=>this.readAsDataURL(a))).then(a=>xn(o,a)).catch(a=>xn(o,null,a))}),o}loadFilesToScan(e=[],r,i,o){return QB(e,r,i,o)}readAsDataURL(e){return new Promise((r,i)=>{const o=new FileReader;o.onload=()=>{const s={name:e.name,file:e,url:URL.createObjectURL(e)};r(s)},o.onerror=s=>i(s),o.readAsDataURL(e)})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nZ=(()=>{class n{constructor(e,r){this.renderer=e,this.elementRef=r,this.event=new Qe,this.src=Cc.src,this.fps=Cc.fps,this.vibrate=Cc.vibrate,this.decode=Cc.decode,this.isBeep=Cc.isBeep,this.config=Cc,this.constraints=Cc.constraints,this.canvasStyles=[DI,II],this.isStart=!1,this.isPause=!1,this.isLoading=!1,this.isTorch=!1,this.data=new bt([]),this.devices=new bt([]),this.deviceIndexActive=0,this.dataForResize=[],this.ready=new ea,this.STATUS={startON:()=>this.isStart=!0,pauseON:()=>this.isPause=!0,loadingON:()=>this.isLoading=!0,startOFF:()=>this.isStart=!1,pauseOFF:()=>this.isPause=!1,loadingOFF:()=>this.isLoading=!1,torchOFF:()=>this.isTorch=!1}}ngOnInit(){this.overrideConfig(),((n=new ea,t)=>{let e=0;const r=(i=!1)=>{const o=()=>{let u;try{const c=()=>{clearTimeout(u),oA()?setTimeout(()=>xn(n,!0)):u=setTimeout(()=>c())};setTimeout(()=>c()),setTimeout(()=>clearTimeout(u),3e3)}catch{clearTimeout(u)}},s=document.querySelectorAll(`script[src="${Hv}"]`),a=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js"]');if(s.length||a.length)o();else{const u=document.querySelectorAll(`script[src="${EI}"]`);if(1===u.length)o();else if(u.forEach(c=>c.remove()),t){const c=t.createElement("script");t.setAttribute(c,"src",i?Hv:EI),t.setAttribute(c,"type","text/javascript"),t.setAttribute(c,"async",""),t.appendChild(document.head,c),c.onload=()=>o(),c.onerror=()=>{e<2?(document.head.removeChild(c),r(!0)):xn(n,!1,Hv)},e+=1}else{const c=document.createElement("script");c.setAttribute("src",i?Hv:EI),c.setAttribute("type","text/javascript"),c.setAttribute("async",""),document.head.appendChild(c),c.onload=()=>o(),c.onerror=()=>{e<2?(document.head.removeChild(c),r(!0)):xn(n,!1,Hv)},e+=1}}};return r(),n})(this.ready,this.renderer).subscribe(()=>{this.src&&this.loadImage(this.src),this.resize()})}start(e){const r=new ea;return this.isStart?xn(r,!1):this.safariWebRTC(r,e),r}stop(){this.STATUS.pauseOFF(),this.STATUS.startOFF(),this.STATUS.torchOFF(),this.STATUS.loadingOFF();const e=new ea;try{clearTimeout(this.rAF_ID),this.video.nativeElement.srcObject.getTracks().forEach(r=>{r.stop(),xn(e,!0)}),this.dataForResize=[],(n=>{n.getContext("2d",{willReadFrequently:!0}).clearRect(0,0,n.width,n.height)})(this.canvas.nativeElement),XB(this.resultsPanel.nativeElement)}catch(r){xn(e,!1,r)}return e}play(){const e=new ea;return this.isPause?(this.video.nativeElement.play(),this.STATUS.pauseOFF(),this.requestAnimationFrame(),xn(e,!0)):xn(e,!1),e}pause(){const e=new ea;return this.isStart?(clearTimeout(this.rAF_ID),this.video.nativeElement.pause(),this.STATUS.pauseON(),xn(e,!0)):xn(e,!1),e}playDevice(e,r=new ea){const i=this.getConstraints();switch(!0){case"null"===e||"undefined"===e||!e:stop(),this.stop(),xn(r,!1);break;case e&&(!this.isStart||!i||i.deviceId!==e):stop(),this.stop(),this.STATUS.loadingON(),this.deviceIndexActive=this.devices.value.findIndex(a=>a.deviceId===e);const s={...this.constraints,audio:!1,video:{deviceId:e,...this.constraints.video}};navigator.mediaDevices.getUserMedia(s).then(a=>{this.video.nativeElement.srcObject=a,this.video.nativeElement.onloadedmetadata=()=>{this.video.nativeElement.play(),this.requestAnimationFrame(),xn(r,!0),this.STATUS.startON(),this.STATUS.loadingOFF()}}).catch(a=>{this.eventEmit(!1),xn(r,!1,a),this.STATUS.startOFF(),this.STATUS.loadingOFF()});break;default:xn(r,!1),this.STATUS.loadingOFF()}return r}loadImage(e){const r=new ea;this.STATUS.startOFF(),this.STATUS.loadingON();const i=new Image;return i.setAttribute("crossOrigin","anonymous"),i.onload=()=>{oA()&&this.drawImage(i,o=>{xn(r,o),this.STATUS.startOFF(),this.STATUS.loadingOFF()})},i.src=e,r}torcher(){const e=this.applyConstraints({advanced:[{torch:this.isTorch}]});return e.subscribe(()=>!1,()=>this.isTorch=!this.isTorch),e}applyConstraints(e,r=0){var i=this;const o=new ea;if(this.isStart){const s=this.video.nativeElement.srcObject;if(null===r&&void 0===r&&Number.isNaN(r))xn(o,!1,"Please check again deviceIndex");else{const a=s.getVideoTracks()[r];new window.ImageCapture(a).getPhotoCapabilities().then(du(function*(){yield a.applyConstraints(e),TI(i.video.nativeElement,i.canvas.nativeElement),xn(o,!0)})).catch(c=>{switch(c?.name){case"NotFoundError":case"DevicesNotFoundError":xn(o,!1,"Required track is missing");break;case"NotReadableError":case"TrackStartError":xn(o,!1,"Webcam or mic are already in use");break;case"OverconstrainedError":case"ConstraintNotSatisfiedError":xn(o,!1,"Constraints can not be satisfied by avb. devices");break;case"NotAllowedError":case"PermissionDeniedError":xn(o,!1,"Permission denied in browser");break;case"TypeError":xn(o,!1,"Empty constraints object");break;default:xn(o,!1,c)}})}}else xn(o,!1,"Please start the scanner");return o}getConstraints(e=0){return this.video.nativeElement.srcObject?.getVideoTracks()[e]?.getConstraints()}download(e=`ngx_scanner_qrcode_${Date.now()}.png`,r,i){var o=this;const s=new ea;return du(function*(){const u=((n,t)=>new File([n],t,{lastModified:(new Date).getTime(),type:n.type}))(yield KB(o.canvas.nativeElement),e);QB([u],o.config,r,i,s).subscribe(c=>{c.forEach(d=>{if(d?.data?.length){const f=document.createElement("a");f.href=d.url,f.download=d.name,f.click(),f.remove()}})})})(),s}resize(){window.addEventListener("resize",()=>{GB(this.dataForResize,this.canvas.nativeElement,this.resultsPanel.nativeElement,this.canvasStyles),TI(this.video.nativeElement,this.canvas.nativeElement)})}overrideConfig(){"src"in this.config&&(this.src=this.config.src),"fps"in this.config&&(this.fps=this.config.fps),"vibrate"in this.config&&(this.vibrate=this.config.vibrate),"decode"in this.config&&(this.decode=this.config.decode),"isBeep"in this.config&&(this.isBeep=this.config.isBeep),"constraints"in this.config&&(this.constraints=((n,t,e)=>{if(t&&Object.keys(t[n]).length){for(const r in e){const i=JSON.parse(JSON.stringify({...t[n],[r]:e[r]}));t[n]=t[n].hasOwnProperty(r)?t[n]:i}return t[n]}return e})("constraints",this.config,qB)),"canvasStyles"in this.config&&2===this.config?.canvasStyles?.length&&(this.canvasStyles=this.config.canvasStyles)}safariWebRTC(e,r){this.STATUS.startOFF(),this.STATUS.loadingON(),navigator.mediaDevices.getUserMedia(this.constraints).then(i=>{i.getTracks().forEach(o=>o.stop()),this.loadAllDevices(e,r)}).catch(i=>{xn(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}loadAllDevices(e,r){navigator.mediaDevices.enumerateDevices().then(i=>{let o=i.filter(s=>"videoinput"==s.kind);this.devices.next(o),o?.length>0?(xn(e,o),r?r(o):this.playDevice(o[0].deviceId)):(xn(e,!1,"No camera detected."),this.STATUS.startOFF(),this.STATUS.loadingOFF())}).catch(i=>{xn(e,!1,i),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}drawImage(e,r=(()=>{})){var i=this;return du(function*(){const o=i.canvas.nativeElement,s=o.getContext("2d",{willReadFrequently:!0});e instanceof HTMLImageElement&&(o.width=e.naturalWidth,o.height=e.naturalHeight,e.style.visibility="",i.video.nativeElement.style.visibility="hidden",i.renderer.setStyle(i.elementRef.nativeElement,"width",o.width+"px"),i.renderer.setStyle(i.elementRef.nativeElement,"maxWidth","100%"),i.renderer.setStyle(i.elementRef.nativeElement,"display","inline-block")),e instanceof HTMLVideoElement&&(o.width=e.videoWidth,o.height=e.videoHeight,e.style.visibility="",i.canvas.nativeElement.style.visibility="hidden"),TI(i.video.nativeElement,o),s.clearRect(0,0,o.width,o.height),s.drawImage(e,0,0,o.width,o.height);const a=s.getImageData(0,0,o.width,o.height),u=yield zbarWasm.scanImageData(a);if(u?.length){u.forEach(d=>d.value=d.decode(i.decode?.toLocaleLowerCase())),GB(u,Object.freeze(i.canvas.nativeElement),i.resultsPanel.nativeElement,i.canvasStyles);const c=()=>{i.eventEmit(u),i.dataForResize=u};e instanceof HTMLImageElement&&(r(!0),c(),JB(i.vibrate),SI(i.isBeep)),e instanceof HTMLVideoElement&&(c(),JB(i.vibrate),SI(i.isBeep))}else r(!1),XB(i.resultsPanel.nativeElement),i.dataForResize=[]})()}eventEmit(e=!1){!1!==e&&this.data.next(e||[]),!1!==e&&this.event.emit(e||[])}requestAnimationFrame(e=100){try{clearTimeout(this.rAF_ID),this.rAF_ID=setTimeout(()=>{this.video.nativeElement.readyState===this.video.nativeElement.HAVE_ENOUGH_DATA&&(e=0,oA()&&this.drawImage(this.video.nativeElement),this.isStart&&!this.isPause&&this.requestAnimationFrame(e))},e||this.fps)}catch{clearTimeout(this.rAF_ID)}}get isReady(){return this.ready}ngOnDestroy(){this.pause()}static#e=this.\u0275fac=function(r){return new(r||n)(lt(Qi),lt(Xn))};static#t=this.\u0275cmp=dn({type:n,selectors:[["ngx-scanner-qrcode"]],viewQuery:function(r,i){if(1&r&&(Pr(HJ,5),Pr(WJ,5),Pr(VJ,5)),2&r){let o;kr(o=Or())&&(i.video=o.first),kr(o=Or())&&(i.canvas=o.first),kr(o=Or())&&(i.resultsPanel=o.first)}},hostAttrs:[1,"ngx-scanner-qrcode"],inputs:{src:"src",fps:"fps",vibrate:"vibrate",decode:"decode",isBeep:"isBeep",config:"config",constraints:"constraints",canvasStyles:"canvasStyles"},outputs:{event:"event"},exportAs:["scanner"],decls:6,vars:0,consts:[[1,"origin-overlay"],["resultsPanel",""],[1,"origin-canvas"],["canvas",""],["playsinline","",1,"origin-video"],["video",""]],template:function(r,i){1&r&&dt(0,"div",0,1)(2,"canvas",2,3)(4,"video",4,5)},styles:[".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp svg:active path{stroke:#afafaf}\n"],encapsulation:2})}return n})();var Wn=function(n){return n[n.ScannerQRCode_NONE=0]="ScannerQRCode_NONE",n[n.ScannerQRCode_PARTIAL=1]="ScannerQRCode_PARTIAL",n[n.ScannerQRCode_EAN2=2]="ScannerQRCode_EAN2",n[n.ScannerQRCode_EAN5=5]="ScannerQRCode_EAN5",n[n.ScannerQRCode_EAN8=8]="ScannerQRCode_EAN8",n[n.ScannerQRCode_UPCE=9]="ScannerQRCode_UPCE",n[n.ScannerQRCode_ISBN10=10]="ScannerQRCode_ISBN10",n[n.ScannerQRCode_UPCA=12]="ScannerQRCode_UPCA",n[n.ScannerQRCode_EAN13=13]="ScannerQRCode_EAN13",n[n.ScannerQRCode_ISBN13=14]="ScannerQRCode_ISBN13",n[n.ScannerQRCode_COMPOSITE=15]="ScannerQRCode_COMPOSITE",n[n.ScannerQRCode_I25=25]="ScannerQRCode_I25",n[n.ScannerQRCode_DATABAR=34]="ScannerQRCode_DATABAR",n[n.ScannerQRCode_DATABAR_EXP=35]="ScannerQRCode_DATABAR_EXP",n[n.ScannerQRCode_CODABAR=38]="ScannerQRCode_CODABAR",n[n.ScannerQRCode_CODE39=39]="ScannerQRCode_CODE39",n[n.ScannerQRCode_PDF417=57]="ScannerQRCode_PDF417",n[n.ScannerQRCode_QRCODE=64]="ScannerQRCode_QRCODE",n[n.ScannerQRCode_SQCODE=80]="ScannerQRCode_SQCODE",n[n.ScannerQRCode_CODE93=93]="ScannerQRCode_CODE93",n[n.ScannerQRCode_CODE128=128]="ScannerQRCode_CODE128",n[n.ScannerQRCode_SYMBOL=255]="ScannerQRCode_SYMBOL",n[n.ScannerQRCode_ADDON2=512]="ScannerQRCode_ADDON2",n[n.ScannerQRCode_ADDON5=1280]="ScannerQRCode_ADDON5",n[n.ScannerQRCode_ADDON=1792]="ScannerQRCode_ADDON",n}(Wn||{});let sZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({providers:[eZ]})}return n})();const aZ=["scanner"];function uZ(n,t){1&n&&Cr(0)}function cZ(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",9)(2,"img",10),De("click",function(){return ve(e),we(j(2).rotateCameraClicked())}),Y()(),Fe()}if(2&n){const e=j(2);U(2),z("src",e.Assets.Images.RotateCamera,It)}}function lZ(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",5)(2,"ngx-scanner-qrcode",6,7),De("event",function(i){return ve(e),we(j().onScannedACode(i))}),Y()(),ue(4,uZ,1,0,"ng-container",8),ue(5,cZ,3,1,"ng-container",2),Fe()}if(2&n){const e=t.ngIf;j();const r=Wt(1),i=Wt(5);U(4),z("ngIf",r.clientWidth>=r.clientHeight)("ngIfElse",i),U(1),z("ngIf",e.length>1)}}function dZ(n,t){1&n&&(V(0,"div",11),dt(1,"div",12),Y()),2&n&&(j(),ri("width",.7*Wt(1).clientWidth,"px"))}function fZ(n,t){1&n&&(V(0,"div",11),dt(1,"div",12),Y()),2&n&&(j(),ri("width",.7*Wt(1).clientHeight,"px"))}let sA=class lS{constructor(){this.devices$=new bt([]),this.deviceIndex=-1,this.Assets=Ti,this.scanCompleted=new Qe}getAvailableDevices(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((t,e)=>{navigator.mediaDevices.enumerateDevices().then(r=>{t(r.filter(i=>"videoinput"===i.kind))}).catch(r=>{e(r.message||r)})}):Promise.reject("Couldn't find camera information")}rotateCameraClicked(){const t=this.devices$.getValue();t.length>1&&this.startScanning((this.deviceIndex+1)%t.length)}ngOnInit(){this.getAvailableDevices().then(t=>{this.devices$.next(t)}).catch(t=>{console.error(t.message||t)})}ngAfterViewInit(){this.devices$.pipe(Dn(this)).subscribe(t=>{this.scanner&&!this.scanner.isStart&&t.length>0&&this.startScanning(0)})}stopScanning(){this.scanner&&(this.scanner.isPause||this.scanner.pause(),this.scanner.isStart&&this.scanner.stop())}startScanning(t){if(this.scanner){const e=this.devices$.getValue();e.length>t&&(this.stopScanning(),this.scanner.start(()=>{this.scanner&&this.scanner.playDevice(e[t].deviceId),this.deviceIndex=t}))}}ngOnDestroy(){this.stopScanning()}onScannedACode(t){if(t.length>0){const e=t[t.length-1],r=new hZ(e.value,this.formatFromScanResult(e.type));this.scanCompleted.next(r)}}formatFromScanResult(t){switch(t){case Wn.ScannerQRCode_NONE:return er.NONE;case Wn.ScannerQRCode_PARTIAL:return er.PARTIAL;case Wn.ScannerQRCode_EAN2:return er.EAN2;case Wn.ScannerQRCode_EAN5:return er.EAN5;case Wn.ScannerQRCode_EAN8:return er.EAN8;case Wn.ScannerQRCode_UPCE:return er.UPCA;case Wn.ScannerQRCode_ISBN10:return er.ISBN10;case Wn.ScannerQRCode_UPCA:return er.UPCA;case Wn.ScannerQRCode_EAN13:return er.EAN13;case Wn.ScannerQRCode_ISBN13:return er.ISBN13;case Wn.ScannerQRCode_COMPOSITE:return er.COMPOSITE;case Wn.ScannerQRCode_I25:return er.I25;case Wn.ScannerQRCode_DATABAR:return er.DATABAR;case Wn.ScannerQRCode_DATABAR_EXP:return er.DATABAR_EXP;case Wn.ScannerQRCode_CODABAR:return er.CODABAR;case Wn.ScannerQRCode_CODE39:return er.CODE39;case Wn.ScannerQRCode_PDF417:return er.PDF417;case Wn.ScannerQRCode_QRCODE:return er.QRCODE;case Wn.ScannerQRCode_SQCODE:return er.SQCODE;case Wn.ScannerQRCode_CODE93:return er.CODE93;case Wn.ScannerQRCode_CODE128:return er.CODE128;case Wn.ScannerQRCode_SYMBOL:return er.SYMBOL;case Wn.ScannerQRCode_ADDON2:return er.EAN2;case Wn.ScannerQRCode_ADDON5:return er.EAN5;case Wn.ScannerQRCode_ADDON:return er.COMPOSITE}}static#e=this.\u0275fac=function(e){return new(e||lS)};static#t=this.\u0275cmp=dn({type:lS,selectors:[["scan-code"]],viewQuery:function(e,r){if(1&e&&Pr(aZ,5),2&e){let i;kr(i=Or())&&(r.scanner=i.first)}},outputs:{scanCompleted:"scanCompleted"},standalone:!0,features:[ii],decls:8,vars:3,consts:[[1,"container"],["container",""],[4,"ngIf"],["biggerHeight",""],["smallerHeight",""],[1,"scanner"],[3,"event"],["scanner",""],[4,"ngIf","ngIfElse"],[1,"rotate-camera"],["alt","Rotate Camera","srcset","",3,"src","click"],[1,"scanner-animation"],[1,"scanner-view"]],template:function(e,r){1&e&&(V(0,"div",0,1),ue(2,lZ,6,3,"ng-container",2),wn(3,"async"),ue(4,dZ,2,2,"ng-template",null,3,sn),ue(6,fZ,2,2,"ng-template",null,4,sn),Y()),2&e&&(U(2),z("ngIf",bn(3,1,r.devices$)))},dependencies:[_r,Fr,Aa,sZ,nZ],styles:[".container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:block;overflow:hidden}.scanner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:100%;max-height:100%;transform:translate(-50%,-50%);overflow:hidden}.scanner-animation[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;aspect-ratio:1/1;transform:translate(-50%,-50%);overflow:hidden;background-color:#00c8001a;border-left:2px solid #00ff00;border-right:2px solid #00ff00}.scanner-view[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:2%;background-color:#00ff0080;animation:_ngcontent-%COMP%_scan 1s ease-in-out alternate-reverse infinite}@keyframes _ngcontent-%COMP%_scan{0%{transform:translateY(-100%)}to{transform:translateY(5000%)}}.rotate-camera[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:64px;background-color:#fff8;display:flex;align-items:center;justify-content:flex-end;box-sizing:border-box;padding:8px}"]})};sA=ke([Co()],sA);var er=function(n){return n.NONE="NONE",n.PARTIAL="PARTIAL",n.EAN2="EAN2",n.EAN5="EAN5",n.EAN8="EAN8",n.Upce="UPCE",n.ISBN10="ISBN10",n.UPCA="UPCA",n.EAN13="EAN13",n.ISBN13="ISBN13",n.COMPOSITE="COMPOSITE",n.I25="I25",n.DATABAR="DATABAR",n.DATABAR_EXP="DATABAR_EXP",n.CODABAR="CODABAR",n.CODE39="CODE39",n.PDF417="PDF417",n.QRCODE="QRCODE",n.SQCODE="SQCODE",n.CODE93="CODE93",n.CODE128="CODE128",n.SYMBOL="SYMBOL",n}(er||{});class hZ{constructor(t,e){this.code=t,this.format=e}}const pZ=["passcode"];function gZ(n,t){if(1&n&&(Ne(0),V(1,"div",2)(2,"span"),Pe(3),Y()(),Fe()),2&n){const e=j();U(3),zn(e.subtitle)}}function mZ(n,t){if(1&n){const e=ft();Ne(0),V(1,"span",8),De("click",function(){return ve(e),we(j().onSubmit())}),Pe(2,"Submit"),Y(),Fe()}}let $B=(()=>{class n{constructor(){this.title="Enter your pin",this.subtitle=void 0,this.length=4,this.dismiss=new Qe,this.pinReady=new Qe,this.currentPin="",this.showSubmitButton=!1,this.CloseButton="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFNSURBVEiJzZGxSkJhGIaf79Ml7+FAWRHUGETS0KBX0aB0AwotOdbWVNjoUgaCN+HQUEHQmCAdRBTOLbic838NhhIGisdDvtPPz/8/D7yvAFgQZCCsAmfAJpBiuURAH7MmTm/E80ZiQZDBwjbC8ZLQvyP2Rqh5hbC6cjiASQ51l2LBwAe2Vy4AEHxl3HkyMbaU5QddJClNEA7A/wtcq475nZl78zu4Vj2+QI5OcY0a9vU5hfe6uEYNOTyZKxALBjbvkfW6uIdbtFiGVHpylt2D1Qjgp5JGDQAtVZCd/UW+rcHIMO1ci2X0/GJmk1gC63Vxj3eTziW7N5Y83S8kmS94f0aLlV+DSnYPLVWwj5e5goVHXjbrMXJcQZQgP1Kgn6Cgp5g1E8OLNMWGww3Sro1JbsX0VyIKKp43ItQ8ZtcIPvE2iRB8RK6IKIjnjb4BKVqHRs2egwcAAAAASUVORK5CYII="}ngAfterViewInit(){this.passcodeInput?.nativeElement.focus()}onDismiss(){this.dismiss.next()}verifyInput(e){let r=10;this.length>0&&this.length<10&&(r=this.length);const i=this.currentPin,o=e.substring(0,Math.min(r,e.length)),s=o.length;return s<=r?(this.currentPin=o,0===this.length?(this.showSubmitButton=!0,!0):(s===this.length&&this.pinReady.next(this.currentPin),this.showSubmitButton=!1,!0)):(this.currentPin=i,!1)}onSubmit(){this.pinReady.next(this.currentPin)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["alpha-numeric-pin"]],viewQuery:function(r,i){if(1&r&&Pr(pZ,5),2&r){let o;kr(o=Or())&&(i.passcodeInput=o.first)}},inputs:{title:"title",subtitle:"subtitle",length:"length"},outputs:{dismiss:"dismiss",pinReady:"pinReady"},standalone:!0,features:[ii],decls:12,vars:6,consts:[[1,"page-container"],[1,"container"],[1,"item"],[4,"ngIf"],["inputMode","password","type","password",1,"pass-code",3,"value","autocomplete","paste","keyup"],["passcode",""],[1,"header"],["alt","Cancel","srcset","",1,"button","fade-in",3,"src","click"],[1,"button",3,"click"]],template:function(r,i){if(1&r){const o=ft();V(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),Pe(4),Y()(),ue(5,gZ,4,1,"ng-container",3),V(6,"div",2)(7,"input",4,5),De("paste",function(a){return a.preventDefault()})("keyup",function(){ve(o);const a=Wt(8);return we(i.verifyInput(a.value))}),Y()()(),V(9,"div",6)(10,"img",7),De("click",function(){return i.onDismiss()}),Y(),ue(11,mZ,3,0,"ng-container",3),Y()()}2&r&&(U(4),zn(i.title),U(1),z("ngIf",i.subtitle),U(2),z("value",i.currentPin)("autocomplete",!1),U(3),z("src",i.CloseButton,It),U(1),z("ngIf",i.showSubmitButton))},dependencies:[_r,Fr],styles:[".page-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:#fff;overflow:auto;pointer-events:all}.container[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box;padding:24px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:20px}h3[_ngcontent-%COMP%]{margin:0}.item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;text-align:center;max-width:320px;font-size:14px;color:var(--default-text-color-lighter);-webkit-user-select:none;user-select:none}.pass-code[_ngcontent-%COMP%]{width:90%;height:40px;border-radius:4px;border:1px solid #ddd;outline:none;text-align:center;font-size:40px}.header[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;gap:10px;justify-content:space-between;align-items:center;position:absolute;top:0;left:0;width:100%;height:40px;padding:8px}@keyframes _ngcontent-%COMP%_fade-in-anim{0%{opacity:0}to{opacity:1}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-anim .5s ease-in}.button[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;text-transform:uppercase;color:#04a6f4}"]})}return n})();const vZ=["numpad"];function yZ(n,t){if(1&n&&(Ne(0),V(1,"div",4)(2,"span"),Pe(3),Y()(),Fe()),2&n){const e=j();U(3),zn(e.subtitle)}}function wZ(n,t){1&n&&Cr(0,13),2&n&&(j(),z("ngTemplateOutlet",Wt(20)))}function bZ(n,t){if(1&n){const e=ft();Ne(0),V(1,"span",14),De("click",function(){return ve(e),we(j().onSubmit())}),Pe(2,"Submit"),Y(),Fe()}}function AZ(n,t){if(1&n){const e=ft();V(0,"div",15)(1,"div",16),De("click",function(){return ve(e),we(j().verifyInput("1"))}),Pe(2,"1"),Y(),V(3,"div",16),De("click",function(){return ve(e),we(j().verifyInput("2"))}),Pe(4,"2"),Y(),V(5,"div",16),De("click",function(){return ve(e),we(j().verifyInput("3"))}),Pe(6,"3"),Y(),V(7,"div",16),De("click",function(){return ve(e),we(j().verifyInput("4"))}),Pe(8,"4"),Y()(),V(9,"div",15)(10,"div",16),De("click",function(){return ve(e),we(j().verifyInput("5"))}),Pe(11,"5"),Y(),V(12,"div",16),De("click",function(){return ve(e),we(j().verifyInput("6"))}),Pe(13,"6"),Y(),V(14,"div",16),De("click",function(){return ve(e),we(j().verifyInput("7"))}),Pe(15,"7"),Y(),V(16,"div",16),De("click",function(){return ve(e),we(j().verifyInput("8"))}),Pe(17,"8"),Y()(),V(18,"div",15),dt(19,"div",17),V(20,"div",16),De("click",function(){return ve(e),we(j().verifyInput("9"))}),Pe(21,"9"),Y(),V(22,"div",16),De("click",function(){return ve(e),we(j().verifyInput("0"))}),Pe(23,"0"),Y(),V(24,"div",18),De("click",function(){return ve(e),we(j().clearInput())}),dt(25,"img",19),Y()()}if(2&n){const e=j();U(25),z("src",e.BackspaceIcon,It)}}function xZ(n,t){if(1&n){const e=ft();V(0,"div",15)(1,"div",16),De("click",function(){return ve(e),we(j().verifyInput("1"))}),Pe(2,"1"),Y(),V(3,"div",16),De("click",function(){return ve(e),we(j().verifyInput("2"))}),Pe(4,"2"),Y(),V(5,"div",16),De("click",function(){return ve(e),we(j().verifyInput("3"))}),Pe(6,"3"),Y()(),V(7,"div",15)(8,"div",16),De("click",function(){return ve(e),we(j().verifyInput("4"))}),Pe(9,"4"),Y(),V(10,"div",16),De("click",function(){return ve(e),we(j().verifyInput("5"))}),Pe(11,"5"),Y(),V(12,"div",16),De("click",function(){return ve(e),we(j().verifyInput("6"))}),Pe(13,"6"),Y()(),V(14,"div",15)(15,"div",16),De("click",function(){return ve(e),we(j().verifyInput("7"))}),Pe(16,"7"),Y(),V(17,"div",16),De("click",function(){return ve(e),we(j().verifyInput("8"))}),Pe(18,"8"),Y(),V(19,"div",16),De("click",function(){return ve(e),we(j().verifyInput("9"))}),Pe(20,"9"),Y()(),V(21,"div",15),dt(22,"div",17),V(23,"div",16),De("click",function(){return ve(e),we(j().verifyInput("0"))}),Pe(24,"0"),Y(),V(25,"div",18),De("click",function(){return ve(e),we(j().clearInput())}),dt(26,"img",19),Y()()}if(2&n){const e=j();U(26),z("src",e.BackspaceIcon,It)}}const CZ=function(n,t){return{landscape:n,portrait:t}};let eL=(()=>{class n{constructor(){this.length=0,this.title="Enter your pin",this.subtitle=void 0,this.pinReady=new Qe,this.dismiss=new Qe,this.isLandscape$=new bt(!1),this.currentPin="",this.showSubmitButton=!1,this.BackspaceIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAACxAAAAsQHGLUmNAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAPhJREFUSInt1LFKA0EUBdATJVa2glpYi3+gjQj+hrWV32D+wCK1oIWVkLQKfopomWBhMGVEN8VOwIzOZmMcbHJhYOftfffOvDc8lvhvNGb838L2nJoDPM0ireISxS/XPdaqDC4WEJ+sk5T46R+IFziHlUj8GO2E8Sf6UewdLwl+IzbYxS2aiYQb7KAb9kMc4ijBn8I6HlVfeYiDcIBr7IfvboLf+mpQt+4TE0G8U8Ft8b0H2ZC9RJRNHlQYXJkuy1sw2atrQPlMR4mED/Si2Ej5TGv34AFnPzkH7mYUa2IjwS8ScWQeFSw+7O6EYZdjXL/iec6cJTJiDAcltYzv8i8ZAAAAAElFTkSuQmCC",this.CloseButton="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAhQAAAIUB4uz/wQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFNSURBVEiJzZGxSkJhGIaf79Ml7+FAWRHUGETS0KBX0aB0AwotOdbWVNjoUgaCN+HQUEHQmCAdRBTOLbic838NhhIGisdDvtPPz/8/D7yvAFgQZCCsAmfAJpBiuURAH7MmTm/E80ZiQZDBwjbC8ZLQvyP2Rqh5hbC6cjiASQ51l2LBwAe2Vy4AEHxl3HkyMbaU5QddJClNEA7A/wtcq475nZl78zu4Vj2+QI5OcY0a9vU5hfe6uEYNOTyZKxALBjbvkfW6uIdbtFiGVHpylt2D1Qjgp5JGDQAtVZCd/UW+rcHIMO1ci2X0/GJmk1gC63Vxj3eTziW7N5Y83S8kmS94f0aLlV+DSnYPLVWwj5e5goVHXjbrMXJcQZQgP1Kgn6Cgp5g1E8OLNMWGww3Sro1JbsX0VyIKKp43ItQ8ZtcIPvE2iRB8RK6IKIjnjb4BKVqHRs2egwcAAAAASUVORK5CYII="}ngAfterViewInit(){this.checkOrientation()}checkOrientation(){setTimeout(()=>{if(this.numpad){const e=this.numpad.nativeElement.offsetHeight<420;console.log("isLandscape: ",e,this.numpad.nativeElement.offsetWidth,this.numpad.nativeElement.offsetHeight),this.isLandscape$.next(e)}},500)}onOrientationChange(e){this.checkOrientation()}onKeyUp(e){["0","1","2","3","4","5","6","7","8","9"].includes(e.key)&&this.verifyInput(e.key)}verifyInput(e){let r=10;this.length>0&&this.length<10&&(r=this.length);const i=this.currentPin+e,o=i.length;if(o<=r){if(this.currentPin=i,0===this.length)return void(this.showSubmitButton=!0);o===this.length&&this.pinReady.next(this.currentPin),this.showSubmitButton=!1}}clearInput(){this.showSubmitButton=!1,this.currentPin=""}onClose(){this.dismiss.next()}onSubmit(){this.pinReady.next(this.currentPin)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["numeric-pin"]],viewQuery:function(r,i){if(1&r&&Pr(vZ,5),2&r){let o;kr(o=Or())&&(i.numpad=o.first)}},hostBindings:function(r,i){1&r&&De("orientationchange",function(s){return i.onOrientationChange(s)},0,Y1)("keyup",function(s){return i.onKeyUp(s)},!1,N2)},inputs:{length:"length",title:"title",subtitle:"subtitle"},outputs:{pinReady:"pinReady",dismiss:"dismiss"},standalone:!0,features:[ii],decls:23,vars:22,consts:[[1,"container"],["numpad",""],[1,"body"],[1,"body-top"],[1,"top-item"],[4,"ngIf"],["type","password","disabled","",1,"pass-code",3,"value","autocomplete"],[1,"body-down",3,"ngClass"],[3,"ngTemplateOutlet",4,"ngIf","ngIfElse"],[1,"header"],["alt","Cancel","srcset","",1,"button","fade-in",3,"src","click"],["landscape",""],["portrait",""],[3,"ngTemplateOutlet"],[1,"button",3,"click"],[1,"numpad-row"],[1,"numpad-item","numberpad-item-number",3,"click"],[1,"numpad-item"],[1,"numpad-item",3,"click"],["alt","clear","srcset","",2,"cursor","pointer","user-select","none",3,"src"]],template:function(r,i){if(1&r&&(V(0,"div",0,1)(2,"div",2),wn(3,"async"),V(4,"div",3)(5,"div",4)(6,"h3"),Pe(7),Y()(),ue(8,yZ,4,1,"ng-container",5),V(9,"div",4),dt(10,"input",6),Y()(),V(11,"div",7),wn(12,"async"),wn(13,"async"),ue(14,wZ,1,1,"ng-container",8),wn(15,"async"),Y()(),V(16,"div",9)(17,"img",10),De("click",function(){return i.onClose()}),Y(),ue(18,bZ,3,0,"ng-container",5),Y()(),ue(19,AZ,26,1,"ng-template",null,11,sn),ue(21,xZ,27,1,"ng-template",null,12,sn)),2&r){const o=Wt(22);U(2),ri("flex-direction",bn(3,11,i.isLandscape$)?"row":"column"),U(5),zn(i.title),U(1),z("ngIf",i.subtitle),U(2),z("value",i.currentPin)("autocomplete",!1),U(1),z("ngClass",MC(19,CZ,!1===bn(12,13,i.isLandscape$),bn(13,15,i.isLandscape$))),U(3),z("ngIf",bn(15,17,i.isLandscape$))("ngIfElse",o),U(3),z("src",i.CloseButton,It),U(1),z("ngIf",i.showSubmitButton)}},dependencies:[_r,Hk,Fr,Qm,Aa],styles:[".container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:#fff;overflow:hidden;pointer-events:all}h3[_ngcontent-%COMP%]{margin:0;color:var(--default-text-color)}.body[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column;width:100%;height:100%;justify-content:center;align-items:center;background-color:#f8fbff}.body-top[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:20px;align-items:center;justify-content:center;box-sizing:border-box;padding:40px 24px;max-width:320px}.top-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;text-align:center;font-size:14px;color:var(--default-text-color-lighter)}.pass-code[_ngcontent-%COMP%]{width:90%;height:40px;border-radius:4px;border:1px solid #ddd;outline:none;text-align:center;font-size:40px}.pass-code[_ngcontent-%COMP%]:focus{outline:none}.body-down[_ngcontent-%COMP%]{flex:0 1 auto;background-color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;box-sizing:border-box;padding:32px;max-height:-moz-fit-content;max-height:fit-content}.body-down.landscape[_ngcontent-%COMP%]{width:100%}.body-down.portrait[_ngcontent-%COMP%]{flex:1;height:100%}.numpad-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;justify-content:center}.numpad-item[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center}.numpad-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.numberpad-item-number[_ngcontent-%COMP%]{border-radius:20px;background-color:#fff;-webkit-user-select:none;user-select:none;cursor:pointer;box-shadow:#0003 0 4px 10px 3px}.header[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;gap:10px;justify-content:space-between;align-items:center;position:absolute;top:0;left:0;width:100%;height:40px;padding:8px}@keyframes _ngcontent-%COMP%_fade-in-anim{0%{opacity:0}to{opacity:1}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-anim .5s ease-in}.button[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;text-transform:uppercase;color:#04a6f4}"]})}return n})();function MI(n){const e=n.match(/\.([^.\/?#]+)(?:[?#]|$)/);return e?e[1].toLowerCase():null}const tL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAABTVBMVEUAAAASoIcWooUVn4dRwZtWw5wVoIVVxJwUn4UUoIUUoIUUoIUUoIUUoIUVoIUWoYYYoYcZoocaoogao4gbo4kco4kepIogpYshpYwipowmp44mp48nqI8pqZAuro4yrJU0rZY3rpc5r5g6r5k8sJo9sZs+sZtAspxCs51FtJ5KtqFMt6JSuaVTuaZUuqZVuqdWu6dXu6hdyKBevqteyKBfvqxgv6xgv61jwK5lwa9owrFqw7FsxLNv0qZwxbVw0aZy06dzxrZ1x7d9yryEzb+Hz8GJz8KK0MKT08eU1MeW1ciX1cmZ1sqb1sui2c+k2tCv39Wz4Ni14dm24tm44tq85Ny95N2+5d7C5t/F6OHH6OLK6ePP7ObR7OfV7unW7unY7+vZ8Ovh8+/j9PHl9fLm9fLr9/Ts9/Xt+PXt+Pb5/Pz5/fz6/f3+//////9wh9oEAAAADXRSTlMARkdIxMTHx8jJ+Pn+qBQQ8QAAAAFiS0dEbiIPURcAAAF3SURBVEjH7dZXUwIxEAdwBBtlFezo2fUUe8NeDjtibygqVvREb7//o8kNw4wnWRJefOH/cnnIb26ym2TicuXi8fpBkCoXEU8AhDEo6QUCUtJHQkICDY2aUqFQFoUiWRwKpAQsLGVgQUnBjbysVINzBiEp2GUQEkg5syaUIJ0y/E+oDWqlwEjKQisVUYbRLPJkJxXh/Ddi8iCN+N6qBJmzNgGC14irSrB77CrGv9OIiZLasYgYl4eNszvbE/V81MIWuSANxzO8nI+9AM03iM8hWcjryZLugKYkotkv2w7uToZHjzVouET80GU3AHe79ih04XQUzDn9YSt2/8cRcIq5PYAB016m04lh2LQdhE8t5u56pI/VOqtLbucsrQwpnMdDRHt6qF3xIO8jjnB39hZfrlOBUcRUGNrOWd91pT8GnxA/b02RI9rRZ29TzOjKl5WWePl6Peos3+RlKAF9ss6n8LT+lWoHdAfkXKDC+bRy1/qLM3913v0A1u29arg/SHIAAAAASUVORK5CYII=",nL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABuwAAAbsBOuzj4gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANWSURBVHic7Zm9TxRBHIbf2U9vveNOOQ1HJGckaOkVNFZgZUwkUUNBY2FjTCy0sDPRymBBwX9AiSYmWplQmEBJpLDUmAMCChhOPA5Y2NvdWwuQZDG5uY+Zm1mzT7dzO/N798nO7twOCYIANEolu1fRvYkgwDCAHLUDQ0rlytyVixeGeY1PaAJKJbuXaN5nAOd4hajH6s9NJEyTmwSFeoLuTUDQxf9l33GGvi5/n+UxNlXA0W0vHF4SqALQ4TlfDx4SGhEgFawlRE4AwFZCJAUA7CREVgDARkKkBQDtS4i8AKA9Cf+FAKB1CdILUJXGI7YiQXoBpqE3dX6zEqQXkEkloTRxFwDNSZBegKoo6Ok+A+uUyWU6UP8O/ypX6B8MJKY700Xq/S79HcCbWIDoAKKJBYgOIJpYgOgAotGEB7AXYG2MQ3WKcJNDqKZvwk1dR0DMjtQXvhBKF0eg7c2H2mp6DnbuBZzM3bbHl34hdPLiAUBx15FceYh0cQTqwReu9YULqIe2N4/04m2o1SVuNaQTEChW6Jh4W0gtjoF4W1zqSSdg+/Ic3NPXQm1qdQldy/cA1JjXk06Ab+RR6X8Pu+dZqF2zP8GofGReTzoBhxDsn3+MavpWqNX8/YZ5JUkFHHLQfT90zOONILUAL1EAiHp8rLg/mNeQWkCgplDtunF87KaGmNcQvhSmsdf7Cr5xCQBwkH3AfHzpBdT0Hti559zGl3oKdIJYgOgAookFiA4gmliA6ACi4bwOqMEsv4O+MwvVKUJ1iggUA16iAC9xFb5V4Fu+AbgJMLY/wNp4CdX5FmonPmC4MzAqM7xKNwUXAWb5LZIrjwDIv7HM/Bmg2QtIrj5BFC4e4CDA3HoNBFXWw3KDuQB9d471kFyR6jXoG/mO12QuwE22/tGinb6twlyAc3YMIEbzHYlx2LfDMBfgWYPY7ZsEUHdL7gQEu32T8KxB1nGocHkGOJlR7OSn4JsD1HN9cwA7+Sk4mVEeUahw3h3+dykMAL7ZD9/sh5sahpO5A57PYtrusPDtcd5Ivz0umliA6ACiaUTAOvcU/KBmpwogBLNMogigkexUATVXewpgk0WgDrN5lL0uVAHZrLUWeFqBEEwjGtNhnRBMB55WyGatNdrJfwCH4jfLMLBkWAAAAABJRU5ErkJggg==",kI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB2AAAAdgB+lymcgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASySURBVHic7ZtdaFRHGIafObvZdM0Gk9biPyWmRlqkJCn0SqhBQaMS/CmIqJTai4ogNCQBLwra9rLSG68s1BtJKkJpAiKhKC30VhKvFI0aA/7GnxasLp4z53y9sFVMs3vm7M7Zk4R9YO+++eb93j0zc+YMAxERaPSg14U/XLjnQuCC2Px58+e7eu3aPVG1lYITJdiFzzy4JvAdsAZYCCjbosRxaqiv/1GvW/eJ7dxTMTbgOXwLnADejE/Oa2TIZk/qjo7NcXZiZIALexV8FaeQaVHqDXK509769evj6iLUAIEcLx75pJhHbe2g19HxcRzJQw3wYC8vxnpiKMepU7ncoLthw0e2c5s8AVtsd1oiDU4mc/b5xo0f2EwaaoCCFpsdlslbqXT6nHR2vm8rockkWKlZ3wyl3vZTqV9l8+YVNtKZGGB9nS8bpZb6jvO7bNr0TrmpIr0IzTCW+6nUedm+fXE5SWazAQDN2vPOy65dC0pNMNsNQMF7+smT32Tr1oZS2s96AwCUUqt1EJyTffvqo7adEwYAKJEP9cOHZ6W7Oxul3ZwxAECJrPFv3DgrBw/WmraZUwYAEARr9cTEL3LkSNokfO4ZACiRTn909Gc5fToVGhsW4MJjoNGKMlNyOdTq1WWnEa1/yFy48EWxmJlpgD3+zIS8ys/JIRCFqgFJC0iaqgFJC0iaqgFJC0iaqgFJC0gaow2DNTIZnM5OVFcXqr0dtWgRAHL3LjIyggwNEQwPg+dVVFZRXHhs48RX79wpwfXrEkYwNiZ6xw5bJ82PkzcgnRb/2LHQwqfiHz8ubk3NLDdAKfFPnYpc/EsTBgbEVWr2GqAPHSq5+P/QfX2xGhDbdlgtWUJ6bAzmzYva9HXyeXRLC3LrVimtk9sOO729BYuXS5fgwQOzRNksTne3RWURKWkIKCXBxETBx9pduFDcujrRfX0ik5OhwyAYH59dc4C3cmXRgtz6+lfxdXWie3tF7t8v2sZrbo7FgHiGwNKl5rFPnxIcPYq3YgV+Xx88ezZ93LJldrRNIRYDVEMJp1T/GhEMD0+fszGez5KxGCCTk5HbqPZ2UkNDONu2WctpQjx7gZs3jUNVWxvO4cM4XV2gCqzKIsj4uB1tUSn1RSgYHS08oa1aJV5rq/iDgyJBEL4KjIzEtgrEthsMBgZItbZO3+nly4X/7QK54iK+g5FslvSVK6jly0vR9RK5fRvd0lJ4dShOggcj+Tz+gQMQBKXnCAL8/ftLLd4O5WyGXBDd0xM6xguhe3rK2Qgl9yb4PxN27xbJ580rz+dF79lTbvEzxwAXxGtqEr+/X0TrIn+5Fr+/X7ymJhvFGxlQ+dPhBQtwtmxBtbXB4sUvVoM7d5CLFwnOnDHfJZoROglWj8crpWSmUjUgaQFJUzXAIEZiVxEfodpNDHhkQUhShH5EMLkyc9WOlsojcC0sxuTKzBk7ciqPifbQFyGBnAtjChbZkVUxJmvgXQVPigWZPAF/Az3WZFUIgS/DigfDZbAWBgS+KV9WZRD4uhZ+MomNdCHKhU+B75lpN8le8QjozsBJ0waRb4QJNGj4XKBLoEXFdIPcVI7AfQVXFQyl4YSCv6Ik+AfpZ/69uXAKlwAAAABJRU5ErkJggg==",rL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAACPVBMVEUAAADc3Nze3tPg4Mzr6+DbnZ3bnprq6uHo6N/p6d/WhIHVgH3k49jo6ODc2s3c2s7QYGDQYWDMS0zMTE3MTk/NTU7NTk/NT0/NUFHNUVLNUlPOUVLOUlPOU1POU1TOVlbOVlfOWFjOWVjPVlfPWVnPWlrPXFzPXl7PX17QWFnQX1/QYWHQZGTRW1zRXV7RXl/RY2LRZGPRZWXRZmbRZ2bRZ2fSX2DSaWjSbmzTYmPTY2TTZGXTcG/TcXDTdHLUZmfUaWnUdXTUenjUennVamvVeXfVe3rVfHnVfXvVfnzWb3DWgn/Wg4DWhILXc3PXhYPXiYbXiYfXiojYjYnYkI3ZeHnZenvZjovZkY3ZkY7Zk4/Z18ralJHamJTamJXamZXbgYLbm5fbnJjcgoPcg4PdpJ/dqaTdrKfeqqTerqner6nfjo/fsavfsq3fs63fs67ftK7fta/gkpPgk5Tgt7HguLLgurThurThvbfh4NXiwbriwrziw7zixL3ixb7jxr/jxsDjyMHjycHjysPjy8TkzMXkzcbk0MrlpKTl0srl1Mzl1c3l18/mpabm1s7m2NDm2dHnqannqqvnq6vnrKzn3NTn3tXn39fn4Njorq7o5Nvo5t3o597p5dzp5t3p6N/p6eDqs7TqtLXrt7fruLjrurrtwMHvxcXwycnxzc3xzs/z1NT129v239/34uL34+T45+f56On56en56+v67e367+/78PD78vL89PT89vb9+Pj9+fn+/f3//v7///86cIymAAAAEnRSTlMAFhcZGUZHbnCAvMDJ1/Hx+vp2gHwLAAAAAWJLR0S+pNyDwwAAAjFJREFUSMfl1OdTE0EYBvBYEbDgc5KAGIgFwYaK/VAEBUvsXUAj9i5qVFRUELChsSEYkSSrBhGJvbf929wjxpkke9zufXLG58vuvTO/eWd33zmLpSf9h5DeMriPRSeDenXk3NC+OjDRAFYM62cS6kljqCMFIF9yof9xFORKHtwxIr8lCvIkB15THNgYDTmSA0+henxpDIyXHFiHK7NWxMI4yYFe23qlPA5WxMwQ73KKgWOccoIh3A/c4JQTDWFbVlrAFPTZcdoUPAPMaDcD12Ep9pqAgezctskjb8vDSygndcqCdmlYhlpCtsIlC/2jJ7HH8M1RjrOHafWJwyrs0pbLSvpcB2Bb5hWFxam3SMPO+VYA1tLF07FPEDYp+a5pwJiVB2smYvnRQtSLwcAG1inX1ajNXOsqBSgTO2P1TNjXXvg7qU1HLgpdTssS1u6A3h9PH14dh0W2HL80vJOdfmILDhFpuB1VZ5XCgDzchjX2rJtEHt7NgaOGmIDEe/4hMQUN8v/BZAgn+V+Baao6W9E2qqqODZdG5WmZYgCdlNIfnRMAttJP9zNZya1t6UdD2Lzn0a8uBrudm69/CWVo8LBQRzfQSeeBvmBfBV+bNVgpcMYe+IAWhCE6vmdKwIzQK/yB92gJg13BYLDSEL4PfX5dFIFPWG83fe7xeDYZwme7S1IRgS+/WWXOiAhc+LMD0rDbufrkh3dTpeFbljdP8yAKZWc1SRwmRcGBKaJu+ICw+A0HHwFVOzhn8gAAAABJRU5ErkJggg==",iL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAABgFBMVEUAAADc3Nze3tPg4Mzr6+B8weJ6wubq6uHo6N/p6d9Ts+RUtONNsePk49jo6ODc2s3c2s4foeYgoeYAluYBluYCl+YEmOYFmOYGmOcJmucLm+cOnOcRnegSnegUnugVn+gWn+gYoOgcoukdoukgo+kipOkjpOknpuopp+oqp+ouqesvqeszq+s0q+s2rOs3res8r+w9r+w/sOxBsexDsu1Ntu5SuO5Uue5Wue5Xuu9Yuu9eve9fve9ivvBmwPBnwPBpwfBqwvBrwvBswvFtw/FxxfF1xvF5yPKBy/OGl8uHzvOImMuLm8yMnMyU0/WX1PWY1fWb1vWe1/Wp3Per3Pev3vew3vex3/ey3/e74/i/5fnC5vnF5/nKz9rL0NnL0NrL6vrM0drM6vrP6/rQ7PrT7fvV7vvZ18rc8fzd8fzf8vzh4NXl9Pzm9f3n9f3o9v3p6eDp9v3q9v3s9/3u+P3x+f7z+v70+v72+/74/P75/f77/f/8/v/9/v/+//////9u6OF6AAAAE3RSTlMAFhcZGUZHbnCAvLzAydfx8fr6DaE62QAAAAFiS0dEf0i/ceUAAAG3SURBVEjH3dP5NwJRFAfw7IasLxLZRdkJSSF7yb7vSShJyC7cf92beZKpmTePn9L9Yc73vXM+Z+7cc0elEiq7+IZWRRkqmcqnupvLkkwZyClAf2nWH6GcVIYykgFKSxYoKZmglGSDEpIRJktWmCQFeOh28eX2UKA/YYcE6PmCR9S35/2m1Z/FpQL8Gg6Zj3fRG7/AZ5zJ1DjZ4ZD58PD7Ap9xJlPj0mQ4onJ7RCtFHY4YHolWKg2GQ5bEJVqZ+IEyHLIkLtHKxA//fjjeBfGfxA4T/qQU/sY0h2rEXOpUgY0GQ0Nl7NDcXhOLtToFuAMAzxttfDT5AKIrWj6OhyG63kSHkc6+qcBDB0L1V8FBo/NjCV86YHnAtm+iwxB+1JydapETBnHcemtGuvs95W8UIJrA6OBWg5MNbMgMVlY4BHMo6ONTP0526GaFozCDAhd86oFZ/FYzK5yHAbT7ohVateBW7YywOhTSokkYRkhz/KRHurstBhjp7LIev1sQqjq5d9i3YRpfjn04jSObLVS4eoFrp5ePdWvXr+ekyakwPG63/mlX9RXSrRawL3mhCOaWsbryHCI+AWNX7FRc84wGAAAAAElFTkSuQmCC",oL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAA+VBMVEUAAADc3Nze3tPg4Mzr6+Dpq47prIzq6uHo6N/p6d/rlG/rlW/qkWrk49jo6ODc2s3c2s7sd0fsd0jZ18rh4NXpwqzpw63p6eDqspbqspfqtJnqtZrqwqvqw67rtpvrt5zsZjDsZzHsZzLsaDLsaDPsaTTsbTnsbzvtbTntbjvtbzzudEPudkXvekzvfVDwhVnxjmbylG/ylW/ylnHznnv0o4L0o4P0qIn0qYr1spb2s5j3u6L3vKX3wq35zLr50cD50cH508P61MX61cb61sf618n62cz85dz85t385t786OD86eL97ef97uj+9PD+9vP//v3//v7///9+RY3vAAAAE3RSTlMAFhcZGUZHbnCAvLzAydfx8fr6DaE62QAAAAFiS0dEUg1gLZAAAAFgSURBVEjH7dPZUoMwFAZg3K3WtWK1VE1Q24LUirsogtZ9J+//MKYw04GQkNOMM+2F/0WGLN9MOBw0Lc7kYrUoC2OaILOFrrq2NC6AJQmsLE8oQpGUQ4EEQL6EQK4EQZ6EQY4EwryEwpwEwwrTQxKYzowqLI0WNBpb/ef1hgGGNYz1/kTHuAaE2ybeTE13TLwBgoxjpRDmHCNFkOOyUgDrTCny5RJAXRWyNczfX1gcjsy8t/hz5GS2XgUNwEimzuCWq8NbjjZ5M9XkTWOU/8d/OFxYRuCUhw/3HYsum3S0nSQmah/EZ1tti27YAtghHl126OiTJA4iX63e2RtyTjd8KaTxqaIh5IyO1rcCfMYIXZLB4Wt0hMz3Fwl8C8PwIQuDboCOfy4k8MnzvGsGnkSHj3fu4FcN9j67kasC0RX52FWCzu0pSuC9S2ODYS8JjNP5q16dg8P5DJxegbrVqUT8AtJhCM2EImaPAAAAAElFTkSuQmCC",sL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAY1BMVEUAAADc3Nze3tPg4Mzr6+DX08zb1NDq6uHo6N/p6d/UzcbSy8Xk49jo6ODc2s3c2s7Mw77IvbjOxMDUzMjVzMjZ18re19Te2NXh4NXp6eDz8O/z8e/z8fD8+/v8/Pv9/Pz////6siNEAAAAEXRSTlMAFhcZGUZHbnCAvMDJ1/Hx+lNX65wAAAABYktHRCCzaz2AAAAAn0lEQVRIx+3Syw6CQBBE0fEt4AMRRBRk/v8rjZAYla6eCisTulZ3c5LOZJzrttxX2nYzB7ZVXXU9zAGMArA4LkZCJMMQSALKkoGipKAkOShIEg4lCweShsXPHwrAz23GwsigQYMGDf4jTE70kgnDvG7rHBaG2cN732SgFFj610pQQXgBpZ3avA8USn2ce3s7w5rkz4l5GH/Bdcq6dNWLJ9gnz/RKwb+GAAAAAElFTkSuQmCC";class aL extends D{constructor(t=1/0,e=1/0,r=iE){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;e||(r.push(t),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!t.closed;s+=r?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=e.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function uL(...n){return function LZ(){return Gv(1)}()(sa(n,ql(n)))}k(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});let yf={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const fL=/[&<>"']/,qZ=new RegExp(fL.source,"g"),hL=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,GZ=new RegExp(hL.source,"g"),KZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pL=n=>KZ[n];function to(n,t){if(t){if(fL.test(n))return n.replace(qZ,pL)}else if(hL.test(n))return n.replace(GZ,pL);return n}const QZ=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function gL(n){return n.replace(QZ,(t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const YZ=/(^|[^\[])\^/g;function Vn(n,t){n="string"==typeof n?n:n.source,t=t||"";const e={replace:(r,i)=>(i=(i=i.source||i).replace(YZ,"$1"),n=n.replace(r,i),e),getRegex:()=>new RegExp(n,t)};return e}const XZ=/[^\w:]/g,JZ=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function mL(n,t,e){if(n){let r;try{r=decodeURIComponent(gL(e)).replace(XZ,"").toLowerCase()}catch{return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!JZ.test(e)&&(e=function t$(n,t){aA[" "+n]||(aA[" "+n]=ZZ.test(n)?n+"/":cA(n,"/",!0));const e=-1===(n=aA[" "+n]).indexOf(":");return"//"===t.substring(0,2)?e?t:n.replace($Z,"$1")+t:"/"===t.charAt(0)?e?t:n.replace(e$,"$1")+t:n+t}(t,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const aA={},ZZ=/^[^:]+:\/*[^/]*$/,$Z=/^([^:]+:)[\s\S]*$/,e$=/^([^:]+:\/*[^/]*)[\s\S]*$/,uA={exec:function(){}};function vL(n,t){const r=n.replace(/\|/g,(o,s,a)=>{let u=!1,c=s;for(;--c>=0&&"\\"===a[c];)u=!u;return u?"|":" |"}).split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function cA(n,t,e){const r=n.length;if(0===r)return"";let i=0;for(;i<r;){const o=n.charAt(r-i-1);if(o!==t||e){if(o===t||!e)break;i++}else i++}return n.slice(0,r-i)}function yL(n,t){if(t<1)return"";let e="";for(;t>1;)1&t&&(e+=n),t>>=1,n+=n;return e+n}function wL(n,t,e,r){const i=t.href,o=t.title?to(t.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){r.state.inLink=!0;const a={type:"link",raw:e,href:i,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,a}return{type:"image",raw:e,href:i,title:o,text:to(s)}}class PI{constructor(t){this.options=t||yf}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const r=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:cA(r,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const r=e[0],i=function i$(n,t){const e=n.match(/^(\s+)(?:```)/);if(null===e)return t;const r=e[1];return t.split("\n").map(i=>{const o=i.match(/^\s+/);if(null===o)return i;const[s]=o;return s.length>=r.length?i.slice(r.length):i}).join("\n")}(r,e[3]||"");return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(/#$/.test(r)){const i=cA(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const r=e[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:o,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r,i,o,s,a,u,c,d,f,p,g,v,y=e[1].trim();const w=y.length>1,b={type:"list",raw:"",ordered:w,start:w?+y.slice(0,-1):"",loose:!1,items:[]};y=w?`\\d{1,9}\\${y.slice(-1)}`:`\\${y}`,this.options.pedantic&&(y=w?y:"[*+-]");const A=new RegExp(`^( {0,3}${y})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;t&&(v=!1,(e=A.exec(t))&&!this.rules.block.hr.test(t));){if(r=e[0],t=t.substring(r.length),d=e[2].split("\n",1)[0].replace(/^\t+/,C=>" ".repeat(3*C.length)),f=t.split("\n",1)[0],this.options.pedantic?(s=2,g=d.trimLeft()):(s=e[2].search(/[^ ]/),s=s>4?1:s,g=d.slice(s),s+=e[1].length),u=!1,!d&&/^ *$/.test(f)&&(r+=f+"\n",t=t.substring(f.length+1),v=!0),!v){const C=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),E=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),T=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),O=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;t&&(p=t.split("\n",1)[0],f=p,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(T.test(f)||O.test(f)||C.test(f)||E.test(t)));){if(f.search(/[^ ]/)>=s||!f.trim())g+="\n"+f.slice(s);else{if(u||d.search(/[^ ]/)>=4||T.test(d)||O.test(d)||E.test(d))break;g+="\n"+f}!u&&!f.trim()&&(u=!0),r+=p+"\n",t=t.substring(p.length+1),d=f.slice(s)}}b.loose||(c?b.loose=!0:/\n *\n *$/.test(r)&&(c=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(g),i&&(o="[ ] "!==i[0],g=g.replace(/^\[[ xX]\] +/,""))),b.items.push({type:"list_item",raw:r,task:!!i,checked:o,loose:!1,text:g}),b.raw+=r}b.items[b.items.length-1].raw=r.trimRight(),b.items[b.items.length-1].text=g.trimRight(),b.raw=b.raw.trimRight();const _=b.items.length;for(a=0;a<_;a++)if(this.lexer.state.top=!1,b.items[a].tokens=this.lexer.blockTokens(b.items[a].text,[]),!b.loose){const C=b.items[a].tokens.filter(T=>"space"===T.type),E=C.length>0&&C.some(T=>/\n.*\n/.test(T.raw));b.loose=E}if(b.loose)for(a=0;a<_;a++)b.items[a].loose=!0;return b}}html(t){const e=this.rules.block.html.exec(t);if(e){const r={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(e[0]):to(e[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(t){const e=this.rules.block.def.exec(t);if(e){const r=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:i,title:o}}}table(t){const e=this.rules.block.table.exec(t);if(e){const r={type:"table",header:vL(e[1]).map(i=>({text:i})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=e[0];let o,s,a,u,i=r.align.length;for(o=0;o<i;o++)r.align[o]=/^ *-+: *$/.test(r.align[o])?"right":/^ *:-+: *$/.test(r.align[o])?"center":/^ *:-+ *$/.test(r.align[o])?"left":null;for(i=r.rows.length,o=0;o<i;o++)r.rows[o]=vL(r.rows[o],r.header.length).map(c=>({text:c}));for(i=r.header.length,s=0;s<i;s++)r.header[s].tokens=this.lexer.inline(r.header[s].text);for(i=r.rows.length,s=0;s<i;s++)for(u=r.rows[s],a=0;a<u.length;a++)u[a].tokens=this.lexer.inline(u[a].text);return r}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const r="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:to(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):to(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const r=e[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=cA(r.slice(0,-1),"\\");if((r.length-s.length)%2==0)return}else{const s=function n$(n,t){if(-1===n.indexOf(t[1]))return-1;const e=n.length;let r=0,i=0;for(;i<e;i++)if("\\"===n[i])i++;else if(n[i]===t[0])r++;else if(n[i]===t[1]&&(r--,r<0))return i;return-1}(e[2],"()");if(s>-1){const u=(0===e[0].indexOf("!")?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,u).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],o=s[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(r)?i.slice(1):i.slice(1,-1)),wL(e,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=e[i.toLowerCase()],!i){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return wL(r,i,r[0],this.lexer)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrong.lDelim.exec(t);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const o=i[1]||i[2]||"";if(!o||o&&(""===r||this.rules.inline.punctuation.exec(r))){const s=i[0].length-1;let a,u,c=s,d=0;const f="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,e=e.slice(-1*t.length+s);null!=(i=f.exec(e));){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(u=a.length,i[3]||i[4]){c+=u;continue}if((i[5]||i[6])&&s%3&&!((s+u)%3)){d+=u;continue}if(c-=u,c>0)continue;u=Math.min(u,u+c+d);const p=t.slice(0,s+i.index+(i[0].length-a.length)+u);if(Math.min(s,u)%2){const v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}const g=p.slice(2,-2);return{type:"strong",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(/\n/g," ");const i=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return i&&o&&(r=r.substring(1,r.length-1)),r=to(r,!0),{type:"codespan",raw:e[0],text:r}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){const r=this.rules.inline.autolink.exec(t);if(r){let i,o;return"@"===r[2]?(i=to(this.options.mangle?e(r[1]):r[1]),o="mailto:"+i):(i=to(r[1]),o=i),{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(t,e){let r;if(r=this.rules.inline.url.exec(t)){let i,o;if("@"===r[2])i=to(this.options.mangle?e(r[0]):r[0]),o="mailto:"+i;else{let s;do{s=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(s!==r[0]);i=to(r[0]),o="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t,e){const r=this.rules.inline.text.exec(t);if(r){let i;return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):to(r[0]):r[0]:to(this.options.smartypants?e(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const xt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:uA,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};xt.def=Vn(xt.def).replace("label",xt._label).replace("title",xt._title).getRegex(),xt.bullet=/(?:[*+-]|\d{1,9}[.)])/,xt.listItemStart=Vn(/^( *)(bull) */).replace("bull",xt.bullet).getRegex(),xt.list=Vn(xt.list).replace(/bull/g,xt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+xt.def.source+")").getRegex(),xt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",xt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,xt.html=Vn(xt.html,"i").replace("comment",xt._comment).replace("tag",xt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),xt.paragraph=Vn(xt._paragraph).replace("hr",xt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xt._tag).getRegex(),xt.blockquote=Vn(xt.blockquote).replace("paragraph",xt.paragraph).getRegex(),xt.normal={...xt},xt.gfm={...xt.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},xt.gfm.table=Vn(xt.gfm.table).replace("hr",xt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xt._tag).getRegex(),xt.gfm.paragraph=Vn(xt._paragraph).replace("hr",xt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",xt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",xt._tag).getRegex(),xt.pedantic={...xt.normal,html:Vn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",xt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:uA,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Vn(xt.normal._paragraph).replace("hr",xt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",xt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const et={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:uA,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:uA,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function o$(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function bL(n){let e,r,t="";const i=n.length;for(e=0;e<i;e++)r=n.charCodeAt(e),Math.random()>.5&&(r="x"+r.toString(16)),t+="&#"+r+";";return t}et._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",et.punctuation=Vn(et.punctuation).replace(/punctuation/g,et._punctuation).getRegex(),et.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,et.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,et._comment=Vn(xt._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),et.emStrong.lDelim=Vn(et.emStrong.lDelim).replace(/punct/g,et._punctuation).getRegex(),et.emStrong.rDelimAst=Vn(et.emStrong.rDelimAst,"g").replace(/punct/g,et._punctuation).getRegex(),et.emStrong.rDelimUnd=Vn(et.emStrong.rDelimUnd,"g").replace(/punct/g,et._punctuation).getRegex(),et._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,et._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,et._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,et.autolink=Vn(et.autolink).replace("scheme",et._scheme).replace("email",et._email).getRegex(),et._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,et.tag=Vn(et.tag).replace("comment",et._comment).replace("attribute",et._attribute).getRegex(),et._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,et._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,et._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,et.link=Vn(et.link).replace("label",et._label).replace("href",et._href).replace("title",et._title).getRegex(),et.reflink=Vn(et.reflink).replace("label",et._label).replace("ref",xt._label).getRegex(),et.nolink=Vn(et.nolink).replace("ref",xt._label).getRegex(),et.reflinkSearch=Vn(et.reflinkSearch,"g").replace("reflink",et.reflink).replace("nolink",et.nolink).getRegex(),et.normal={...et},et.pedantic={...et.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Vn(/^!?\[(label)\]\((.*?)\)/).replace("label",et._label).getRegex(),reflink:Vn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",et._label).getRegex()},et.gfm={...et.normal,escape:Vn(et.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},et.gfm.url=Vn(et.gfm.url,"i").replace("email",et.gfm._extended_email).getRegex(),et.breaks={...et.gfm,br:Vn(et.br).replace("{2,}","*").getRegex(),text:Vn(et.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Nl{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||yf,this.options.tokenizer=this.options.tokenizer||new PI,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:xt.normal,inline:et.normal};this.options.pedantic?(e.block=xt.pedantic,e.inline=et.pedantic):this.options.gfm&&(e.block=xt.gfm,e.inline=this.options.breaks?et.breaks:et.gfm),this.tokenizer.rules=e}static get rules(){return{block:xt,inline:et}}static lex(t,e){return new Nl(e).lex(t)}static lexInline(t,e){return new Nl(e).inlineTokens(t)}lex(t){let e;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){let r,i,o,s;for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(a,u,c)=>u+"    ".repeat(c.length));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(r=a.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),1===r.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?e.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=t.slice(1);let c;this.options.extensions.startBlock.forEach(function(d){c=d.call({lexer:this},u),"number"==typeof c&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=e[e.length-1],s&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r),s=o.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let r,i,o,a,u,c,s=t;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+yL("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+yL("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(s));)s=s.slice(0,a.index+a[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;t;)if(u||(c=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(r=d.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(t,s,c)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(t,bL)){t=t.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t,bL))){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const f=t.slice(1);let p;this.options.extensions.startInline.forEach(function(g){p=g.call({lexer:this},f),"number"==typeof p&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(o=t.substring(0,d+1))}if(r=this.tokenizer.inlineText(o,o$)){t=t.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(c=r.raw.slice(-1)),u=!0,i=e[e.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return e}}class Wv{constructor(t){this.options=t||yf}code(t,e,r){const i=(e||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(t,i);null!=o&&o!==t&&(r=!0,t=o)}return t=t.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+to(i)+'">'+(r?t:to(t,!0))+"</code></pre>\n":"<pre><code>"+(r?t:to(t,!0))+"</code></pre>\n"}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,r,i){return this.options.headerIds?`<h${e} id="${this.options.headerPrefix+i.slug(r)}">${t}</h${e}>\n`:`<h${e}>${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,r){const i=e?"ol":"ul";return"<"+i+(e&&1!==r?' start="'+r+'"':"")+">\n"+t+"</"+i+">\n"}listitem(t){return`<li>${t}</li>\n`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>\n`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return`<tr>\n${t}</tr>\n`}tablecell(t,e){const r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>\n`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,r){if(null===(t=mL(this.options.sanitize,this.options.baseUrl,t)))return r;let i='<a href="'+t+'"';return e&&(i+=' title="'+e+'"'),i+=">"+r+"</a>",i}image(t,e,r){if(null===(t=mL(this.options.sanitize,this.options.baseUrl,t)))return r;let i=`<img src="${t}" alt="${r}"`;return e&&(i+=` title="${e}"`),i+=this.options.xhtml?"/>":">",i}text(t){return t}}class AL{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,r){return""+r}image(t,e,r){return""+r}br(){return""}}class xL{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let r=t,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[t];do{i++,r=t+"-"+i}while(this.seen.hasOwnProperty(r))}return e||(this.seen[t]=i,this.seen[r]=0),r}slug(t,e={}){const r=this.serialize(t);return this.getNextSafeSlug(r,e.dryrun)}}class Fl{constructor(t){this.options=t||yf,this.options.renderer=this.options.renderer||new Wv,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new AL,this.slugger=new xL}static parse(t,e){return new Fl(e).parse(t)}static parseInline(t,e){return new Fl(e).parseInline(t)}parse(t,e=!0){let i,o,s,a,u,c,d,f,p,g,v,y,w,b,A,_,C,E,T,r="";const O=t.length;for(i=0;i<O;i++)if(g=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(T=this.options.extensions.renderers[g.type].call({parser:this},g),!1!==T||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(g.type)))r+=T||"";else switch(g.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":r+=this.renderer.heading(this.parseInline(g.tokens),g.depth,gL(this.parseInline(g.tokens,this.textRenderer)),this.slugger);continue;case"code":r+=this.renderer.code(g.text,g.lang,g.escaped);continue;case"table":for(f="",d="",a=g.header.length,o=0;o<a;o++)d+=this.renderer.tablecell(this.parseInline(g.header[o].tokens),{header:!0,align:g.align[o]});for(f+=this.renderer.tablerow(d),p="",a=g.rows.length,o=0;o<a;o++){for(c=g.rows[o],d="",u=c.length,s=0;s<u;s++)d+=this.renderer.tablecell(this.parseInline(c[s].tokens),{header:!1,align:g.align[s]});p+=this.renderer.tablerow(d)}r+=this.renderer.table(f,p);continue;case"blockquote":p=this.parse(g.tokens),r+=this.renderer.blockquote(p);continue;case"list":for(v=g.ordered,y=g.start,w=g.loose,a=g.items.length,p="",o=0;o<a;o++)A=g.items[o],_=A.checked,C=A.task,b="",A.task&&(E=this.renderer.checkbox(_),w?A.tokens.length>0&&"paragraph"===A.tokens[0].type?(A.tokens[0].text=E+" "+A.tokens[0].text,A.tokens[0].tokens&&A.tokens[0].tokens.length>0&&"text"===A.tokens[0].tokens[0].type&&(A.tokens[0].tokens[0].text=E+" "+A.tokens[0].tokens[0].text)):A.tokens.unshift({type:"text",text:E}):b+=E),b+=this.parse(A.tokens,w),p+=this.renderer.listitem(b,C,_);r+=this.renderer.list(p,v,y);continue;case"html":r+=this.renderer.html(g.text);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(g.tokens));continue;case"text":for(p=g.tokens?this.parseInline(g.tokens):g.text;i+1<O&&"text"===t[i+1].type;)g=t[++i],p+="\n"+(g.tokens?this.parseInline(g.tokens):g.text);r+=e?this.renderer.paragraph(p):p;continue;default:{const N='Token with "'+g.type+'" type was not found.';if(this.options.silent)return void console.error(N);throw new Error(N)}}return r}parseInline(t,e){e=e||this.renderer;let i,o,s,r="";const a=t.length;for(i=0;i<a;i++)if(o=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))r+=s||"";else switch(o.type){case"escape":case"text":r+=e.text(o.text);break;case"html":r+=e.html(o.text);break;case"link":r+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break;case"image":r+=e.image(o.href,o.title,o.text);break;case"strong":r+=e.strong(this.parseInline(o.tokens,e));break;case"em":r+=e.em(this.parseInline(o.tokens,e));break;case"codespan":r+=e.codespan(o.text);break;case"br":r+=e.br();break;case"del":r+=e.del(this.parseInline(o.tokens,e));break;default:{const u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(u);throw new Error(u)}}return r}}class OI{constructor(t){this.options=t||yf}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(t){return t}postprocess(t){return t}}function CL(n,t){return(e,r,i)=>{"function"==typeof r&&(i=r,r=null);const o={...r},s=function s$(n,t,e){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const i="<p>An error occurred:</p><pre>"+to(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):e?void e(null,i):i}if(t)return Promise.reject(r);if(!e)throw r;e(r)}}((r={...Ct.defaults,...o}).silent,r.async,i);if(typeof e>"u"||null===e)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(function r$(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(r),r.hooks&&(r.hooks.options=r),i){const a=r.highlight;let u;try{r.hooks&&(e=r.hooks.preprocess(e)),u=n(e,r)}catch(f){return s(f)}const c=function(f){let p;if(!f)try{r.walkTokens&&Ct.walkTokens(u,r.walkTokens),p=t(u,r),r.hooks&&(p=r.hooks.postprocess(p))}catch(g){f=g}return r.highlight=a,f?s(f):i(null,p)};if(!a||a.length<3||(delete r.highlight,!u.length))return c();let d=0;return Ct.walkTokens(u,function(f){"code"===f.type&&(d++,setTimeout(()=>{a(f.text,f.lang,function(p,g){if(p)return c(p);null!=g&&g!==f.text&&(f.text=g,f.escaped=!0),d--,0===d&&c()})},0))}),void(0===d&&c())}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(e):e).then(a=>n(a,r)).then(a=>r.walkTokens?Promise.all(Ct.walkTokens(a,r.walkTokens)).then(()=>a):a).then(a=>t(a,r)).then(a=>r.hooks?r.hooks.postprocess(a):a).catch(s);try{r.hooks&&(e=r.hooks.preprocess(e));const a=n(e,r);r.walkTokens&&Ct.walkTokens(a,r.walkTokens);let u=t(a,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(a){return s(a)}}}function Ct(n,t,e){return CL(Nl.lex,Fl.parse)(n,t,e)}function _L(n){return ge((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}Ct.options=Ct.setOptions=function(n){return function VZ(n){yf=n}(Ct.defaults={...Ct.defaults,...n}),Ct},Ct.getDefaults=function dL(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Ct.defaults=yf,Ct.use=function(...n){const t=Ct.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(e=>{const r={...e};if(r.async=Ct.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const o=t.renderers[i.name];t.renderers[i.name]=o?function(...s){let a=i.renderer.apply(this,s);return!1===a&&(a=o.apply(this,s)),a}:i.renderer}if(i.tokenizer){if(!i.level||"block"!==i.level&&"inline"!==i.level)throw new Error("extension level must be 'block' or 'inline'");t[i.level]?t[i.level].unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&("block"===i.level?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:"inline"===i.level&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),e.renderer){const i=Ct.defaults.renderer||new Wv;for(const o in e.renderer){const s=i[o];i[o]=(...a)=>{let u=e.renderer[o].apply(i,a);return!1===u&&(u=s.apply(i,a)),u}}r.renderer=i}if(e.tokenizer){const i=Ct.defaults.tokenizer||new PI;for(const o in e.tokenizer){const s=i[o];i[o]=(...a)=>{let u=e.tokenizer[o].apply(i,a);return!1===u&&(u=s.apply(i,a)),u}}r.tokenizer=i}if(e.hooks){const i=Ct.defaults.hooks||new OI;for(const o in e.hooks){const s=i[o];i[o]=OI.passThroughHooks.has(o)?a=>{if(Ct.defaults.async)return Promise.resolve(e.hooks[o].call(i,a)).then(c=>s.call(i,c));const u=e.hooks[o].call(i,a);return s.call(i,u)}:(...a)=>{let u=e.hooks[o].apply(i,a);return!1===u&&(u=s.apply(i,a)),u}}r.hooks=i}if(e.walkTokens){const i=Ct.defaults.walkTokens;r.walkTokens=function(o){let s=[];return s.push(e.walkTokens.call(this,o)),i&&(s=s.concat(i.call(this,o))),s}}Ct.setOptions(r)})},Ct.walkTokens=function(n,t){let e=[];for(const r of n)switch(e=e.concat(t.call(Ct,r)),r.type){case"table":for(const i of r.header)e=e.concat(Ct.walkTokens(i.tokens,t));for(const i of r.rows)for(const o of i)e=e.concat(Ct.walkTokens(o.tokens,t));break;case"list":e=e.concat(Ct.walkTokens(r.items,t));break;default:Ct.defaults.extensions&&Ct.defaults.extensions.childTokens&&Ct.defaults.extensions.childTokens[r.type]?Ct.defaults.extensions.childTokens[r.type].forEach(function(i){e=e.concat(Ct.walkTokens(r[i],t))}):r.tokens&&(e=e.concat(Ct.walkTokens(r.tokens,t)))}return e},Ct.parseInline=CL(Nl.lexInline,Fl.parseInline),Ct.Parser=Fl,Ct.parser=Fl.parse,Ct.Renderer=Wv,Ct.TextRenderer=AL,Ct.Lexer=Nl,Ct.lexer=Nl.lex,Ct.Tokenizer=PI,Ct.Slugger=xL,Ct.Hooks=OI,Ct.parse=Ct;class lA{}class dA{}class Cu{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Cu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Cu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Cu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=t.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class a${encodeKey(t){return EL(t)}encodeValue(t){return EL(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const c$=/%(\d[a-f0-9])/gi,l$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function EL(n){return encodeURIComponent(n).replace(c$,(t,e)=>l$[e]??t)}function fA(n){return`${n}`}class Bl{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new a$,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function u$(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],u=e.get(s)||[];u.push(a),e.set(s,u)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],i=Array.isArray(r)?r.map(fA):[fA(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Bl({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(fA(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(fA(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class d${constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function DL(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function IL(n){return typeof Blob<"u"&&n instanceof Blob}function SL(n){return typeof FormData<"u"&&n instanceof FormData}class Vv{constructor(t,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function f$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Cu),this.context||(this.context=new d$),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Bl,this.urlWithParams=e}serializeBody(){return null===this.body?null:DL(this.body)||IL(this.body)||SL(this.body)||function h$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Bl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||SL(this.body)?null:IL(this.body)?this.body.type||null:DL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const d=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((f,p)=>f.set(p,t.setHeaders[p]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((f,p)=>f.set(p,t.setParams[p]),c)),new Vv(e,r,o,{params:c,headers:u,context:d,reportProgress:a,responseType:i,withCredentials:s})}}var Ll=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ll||{});class NI{constructor(t,e=200,r="OK"){this.headers=t.headers||new Cu,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class FI extends NI{constructor(t={}){super(t),this.type=Ll.ResponseHeader}clone(t={}){return new FI({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Np extends NI{constructor(t={}){super(t),this.type=Ll.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Np({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class TL extends NI{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function BI(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let LI=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Vv)o=e;else{let u,c;u=i.headers instanceof Cu?i.headers:new Cu(i.headers),i.params&&(c=i.params instanceof Bl?i.params:new Bl({fromObject:i.params})),o=new Vv(e,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Gl(o).pipe(cO(u=>this.handler.handle(u)));if(e instanceof Vv||"events"===i.observe)return s;const a=s.pipe(function lL(n,t){return ge((e,r)=>{let i=0;e.subscribe(ie(r,o=>n.call(t,o,i++)&&r.next(o)))})}(u=>u instanceof Np));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ne(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ne(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ne(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(ne(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Bl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,BI(i,r))}post(e,r,i={}){return this.request("POST",e,BI(i,r))}put(e,r,i={}){return this.request("PUT",e,BI(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(lA))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();function kL(n,t){return t(n)}function g$(n,t){return(e,r)=>t.intercept(e,{handle:i=>n(i,r)})}const v$=new ze(""),qv=new ze(""),PL=new ze("");function y$(){let n=null;return(t,e)=>{null===n&&(n=(un(v$,{optional:!0})??[]).reduceRight(g$,kL));const r=un(VC),i=r.add();return n(t,e).pipe(_L(()=>r.remove(i)))}}let OL=(()=>{class n extends lA{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null,this.pendingTasks=un(VC)}handle(e){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(qv),...this.injector.get(PL,[])]));this.chain=i.reduceRight((o,s)=>function m$(n,t,e){return(r,i)=>e.runInContext(()=>t(r,o=>n(o,i)))}(o,s,this.injector),kL)}const r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(_L(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(dA),Ze(Hs))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();const x$=/^\)\]\}',?\n/;let FL=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Ee(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?sa(r.\u0275loadImpl()):Gl(null)).pipe(Kl(()=>new ln(o=>{const s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((y,w)=>s.setRequestHeader(y,w.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const y=e.detectContentTypeHeader();null!==y&&s.setRequestHeader("Content-Type",y)}if(e.responseType){const y=e.responseType.toLowerCase();s.responseType="json"!==y?y:"text"}const a=e.serializeBody();let u=null;const c=()=>{if(null!==u)return u;const y=s.statusText||"OK",w=new Cu(s.getAllResponseHeaders()),b=function C$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||e.url;return u=new FI({headers:w,status:s.status,statusText:y,url:b}),u},d=()=>{let{headers:y,status:w,statusText:b,url:A}=c(),_=null;204!==w&&(_=typeof s.response>"u"?s.responseText:s.response),0===w&&(w=_?200:0);let C=w>=200&&w<300;if("json"===e.responseType&&"string"==typeof _){const E=_;_=_.replace(x$,"");try{_=""!==_?JSON.parse(_):null}catch(T){_=E,C&&(C=!1,_={error:T,text:_})}}C?(o.next(new Np({body:_,headers:y,status:w,statusText:b,url:A||void 0})),o.complete()):o.error(new TL({error:_,headers:y,status:w,statusText:b,url:A||void 0}))},f=y=>{const{url:w}=c(),b=new TL({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});o.error(b)};let p=!1;const g=y=>{p||(o.next(c()),p=!0);let w={type:Ll.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),"text"===e.responseType&&s.responseText&&(w.partialText=s.responseText),o.next(w)},v=y=>{let w={type:Ll.UploadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),o.next(w)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),e.reportProgress&&(s.addEventListener("progress",g),null!==a&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:Ll.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),e.reportProgress&&(s.removeEventListener("progress",g),null!==a&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Jk))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();const UI=new ze("XSRF_ENABLED"),BL=new ze("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),LL=new ze("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class UL{}let D$=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=zk(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(Gs),Ze(iu),Ze(BL))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})();function I$(n,t){const e=n.url.toLowerCase();if(!un(UI)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=un(UL).getToken(),i=un(LL);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var Ul=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ul||{});function S$(...n){const t=[LI,FL,OL,{provide:lA,useExisting:OL},{provide:dA,useExisting:FL},{provide:qv,useValue:I$,multi:!0},{provide:UI,useValue:!0},{provide:UL,useClass:D$}];for(const e of n)t.push(...e.\u0275providers);return function fm(n){return{\u0275providers:n}}(t)}const zL=new ze("LEGACY_INTERCEPTOR_FN");function T$(){return function wf(n,t){return{\u0275kind:n,\u0275providers:t}}(Ul.LegacyInterceptors,[{provide:zL,useFactory:y$},{provide:qv,useExisting:zL,multi:!0}])}let R$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({providers:[S$(T$())]})}return n})();const F$=["*"];let jL=(()=>{class n{constructor(){this._buttonClick$=new D,this.copied$=this._buttonClick$.pipe(Kl(()=>Mf(Gl(!0),aO(3e3).pipe(function FZ(n){return ne(()=>n)}(!1)))),ku(),function BZ(n,t,e){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:e}=n):r=n??1/0,kf({connector:()=>new aL(r,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}(1)),this.copiedText$=this.copied$.pipe(function UZ(...n){const t=ql(n);return ge((e,r)=>{(t?uL(n,e,t):uL(n,e)).subscribe(r)})}(!1),ne(e=>e?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(r,i){1&r&&(V(0,"button",0),De("click",function(){return i.onCopyToClipboardClick()}),wn(1,"async"),Pe(2),wn(3,"async"),Y()),2&r&&(bC("copied",bn(1,3,i.copied$)),U(2),zn(bn(3,5,i.copiedText$)))},dependencies:[Aa],encapsulation:2,changeDetection:0})}return n})();class U${}var zI=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(zI||{});class j${}const HL=new ze("SECURITY_CONTEXT");let pA=(()=>{class n{get options(){return this._options}set options(e){this._options={...this.DEFAULT_MARKED_OPTIONS,...e}}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}constructor(e,r,i,o,s,a){this.platform=e,this.securityContext=r,this.http=i,this.clipboardOptions=o,this.sanitizer=a,this.DEFAULT_MARKED_OPTIONS={renderer:new Wv},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new D,this.reload$=this._reload$.asObservable(),this.options=s}parse(e,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:i,inline:o,emoji:s,mermaid:a,disableSanitizer:u}=r,c={...this.options,...r.markedOptions};a&&(this.renderer=this.extendRenderer(c.renderer||new Wv));const d=this.trimIndentation(e),f=i?this.decodeHtml(d):d,p=s?this.parseEmoji(f):f,g=this.parseMarked(p,c,o);return(u?g:this.sanitizer.sanitize(this.securityContext,g))||""}render(e,r=this.DEFAULT_RENDER_OPTIONS,i){const{clipboard:o,clipboardOptions:s,katex:a,katexOptions:u,mermaid:c,mermaidOptions:d}=r;o&&this.renderClipboard(e,i,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...s}),a&&this.renderKatex(e,{...this.DEFAULT_KATEX_OPTIONS,...u}),c&&this.renderMermaid(e,{...this.DEFAULT_MERMAID_OPTIONS,...d}),this.highlight(e)}reload(){this._reload$.next()}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe(ne(r=>this.handleExtension(e,r)))}highlight(e){if(!sp(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;e||(e=document);const r=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,i=>i.classList.add("language-none")),Prism.highlightAllUnder(e)}decodeHtml(e){if(!sp(this.platform))return e;const r=document.createElement("textarea");return r.innerHTML=e,r.value}extendRenderer(e){const r=e;if(!0===r.\u0275NgxMarkdownRendererExtended)return e;const i=e.code;return e.code=function(o,s,a){return"mermaid"===s?`<div class="mermaid">${o}</div>`:i.call(this,o,s,a)},r.\u0275NgxMarkdownRendererExtended=!0,e}handleExtension(e,r){const i=e.lastIndexOf("://"),o=i>-1?e.substring(i+4):e,s=o.lastIndexOf("/"),a=s>-1?o.substring(s+1).split("?")[0]:"",u=a.lastIndexOf("."),c=u>-1?a.substring(u+1):"";return c&&"md"!==c?"```"+c+"\n"+r+"\n```":r}parseMarked(e,r,i=!1){return i?Ct.parseInline(e,r):Ct.parse(e,r)}parseEmoji(e){if(!sp(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}renderKatex(e,r){if(sp(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(e,r)}}renderClipboard(e,r,i){if(!sp(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:s}=i,a=e.querySelectorAll("pre");for(let u=0;u<a.length;u++){const c=a.item(u),d=document.createElement("div");d.style.position="relative",c.parentNode.insertBefore(d,c),d.appendChild(c);const f=document.createElement("div");let p,g;f.style.position="absolute",f.style.top=".5em",f.style.right=".5em",f.style.opacity="0",f.style.transition="opacity 250ms ease-out",d.insertAdjacentElement("beforeend",f),c.onmouseover=()=>f.style.opacity="1",c.onmouseout=()=>f.style.opacity="0",p=o?r.createComponent(o).hostView:s?r.createEmbeddedView(s):r.createComponent(jL).hostView,p.rootNodes.forEach(v=>{v.onmouseover=()=>f.style.opacity="1",f.appendChild(v),g=new ClipboardJS(v,{text:()=>c.innerText})}),p.onDestroy(()=>g.destroy())}}renderMermaid(e,r=this.DEFAULT_MERMAID_OPTIONS){if(!sp(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const i=e.querySelectorAll(".mermaid");0!==i.length&&(mermaid.initialize(r),mermaid.init(i))}trimIndentation(e){if(!e)return"";let r;return e.split("\n").map(i=>{let o=r;return i.length>0&&(o=isNaN(o)?i.search(/\S|$/):Math.min(i.search(/\S|$/),o)),isNaN(r)&&(r=o),o?i.substring(o):i}).join("\n")}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(iu),Ze(HL),Ze(LI,8),Ze(U$,8),Ze(j$,8),Ze(ap))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac})}return n})(),WL=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(e){this._disableSanitizer=this.coerceBooleanProperty(e)}get inline(){return this._inline}set inline(e){this._inline=this.coerceBooleanProperty(e)}get srcRelativeLink(){return this._srcRelativeLink}set srcRelativeLink(e){this._srcRelativeLink=this.coerceBooleanProperty(e)}get clipboard(){return this._clipboard}set clipboard(e){this._clipboard=this.coerceBooleanProperty(e)}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get mermaid(){return this._mermaid}set mermaid(e){this._mermaid=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}get commandLine(){return this._commandLine}set commandLine(e){this._commandLine=this.coerceBooleanProperty(e)}constructor(e,r,i){this.element=e,this.markdownService=r,this.viewContainerRef=i,this.error=new Qe,this.load=new Qe,this.ready=new Qe,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this._srcRelativeLink=!1,this.destroyed$=new D}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(hO(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(e,r=!1){let i;this.src&&this.srcRelativeLink&&(i={baseUrl:new URL(this.src,location.origin).pathname});const s={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=this.markdownService.parse(e,{decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,markedOptions:i,disableSanitizer:this.disableSanitizer});this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,s,this.viewContainerRef),this.ready.emit()}coerceBooleanProperty(e){return null!=e&&"false"!=`${String(e)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:e=>{this.render(e),this.load.emit(e)},error:e=>this.error.emit(e)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,zI.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,zI.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,r){const i=e.querySelectorAll("pre");for(let o=0;o<i.length;o++){const s=r instanceof Array?r:[r];i.item(o).classList.add(...s)}}setPluginOptions(e,r){const i=e.querySelectorAll("pre");for(let o=0;o<i.length;o++)Object.keys(r).forEach(s=>{const a=r[s];if(a){const u=this.toLispCase(s);i.item(o).setAttribute(u,a.toString())}})}toLispCase(e){const r=e.match(/([A-Z])/g);if(!r)return e;let i=e.toString();for(let o=0,s=r.length;o<s;o++)i=i.replace(new RegExp(r[o]),"-"+r[o].toLowerCase());return"-"===i.slice(0,1)&&(i=i.slice(1)),i}static#e=this.\u0275fac=function(r){return new(r||n)(lt(Xn),lt(pA),lt(qs))};static#t=this.\u0275cmp=dn({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",srcRelativeLink:"srcRelativeLink",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[Gc],ngContentSelectors:F$,decls:1,vars:0,template:function(r,i){1&r&&(function VT(n){const t=Ce()[cr][Lr];if(!t.projection){const r=t.projection=Ed(n?n.length:1,null),i=r.slice();let o=t.child;for(;null!==o;){const s=n?YU(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}(),function qT(n,t=0,e){const r=Ce(),i=tn(),o=Hh(i,Yt+n,16,null,e||null);null===o.projection&&(o.projection=t),vg(),(!r[lo]||la())&&32!=(32&o.flags)&&function _0(n,t,e){Nd(t[tt],0,t,e,$g(n,e,t),Yn(e.parent||t[Lr],e,t))}(i,r,o)}(0))},encapsulation:2})}return n})(),Q$=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[pA,e&&e.loader||[],e&&e.clipboardOptions||[],e&&e.markedOptions||[],{provide:HL,useValue:e&&null!=e.sanitize?e.sanitize:Ki.HTML}]}}static forChild(){return{ngModule:n}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({imports:[_r]})}return n})();var VL;!function(n){let t;var i;let e,r;(i=t=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox",function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"}(e=n.Theme||(n.Theme={})),function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"}(r=n.LogLevel||(n.LogLevel={}))}(VL||(VL={}));let qL=(()=>{class n{transform(e,...r){return e&&e.trim().length?e.trim().split(";").filter(i=>!nb(i)).map(i=>i.trim()):[]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Gn({name:"choices",type:n,pure:!0,standalone:!0})}return n})(),Y$=(()=>{class n{transform(e,...r){return e.split(";").map(i=>i.trim()).filter(i=>!lO(i))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Gn({name:"attachments",type:n,pure:!0,standalone:!0})}return n})(),X$=(()=>{class n{transform(e,...r){const i=e.split(",").map(o=>Number(o.trim())).filter(o=>!Number.isNaN(o));return 2===i.length?{lat:i[0],lng:i[1]}:null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Gn({name:"geolocation",type:n,pure:!0,standalone:!0})}return n})();function gA(n,t=oE){return ge((e,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function u(){const c=s+n,d=t.now();if(d<c)return i=this.schedule(void 0,c-d),void r.add(i);a()}e.subscribe(ie(r,c=>{o=c,s=t.now(),i||(i=t.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function J$(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",4),De("click",function(){const o=ve(e).$implicit;return we(j().selected$.next(o))}),Pe(2),Y(),Fe()}if(2&n){const e=t.$implicit,r=t.index,i=j();U(1),ri("--delay",.1*r+"s"),z("classList",i.isSelected(e)?"item-center chat-choice-selected":"item-center chat-choice"),U(1),Vs(" ",e,"")}}function Z$(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",5),De("click",function(){return ve(e),we(j().onSubmitMultiChoice())}),dt(2,"img",6),V(3,"span",7),Pe(4,"Submit"),Y()(),Fe()}if(2&n){const e=j();U(2),z("src",e.Assets.Images.SubmitGreen,It)}}let jI=class dS{constructor(){this.Assets=Ti,this.choices=[],this.primaryColor$=new bt("#255db8"),this.isMultiChoice=!1,this.choiceSelected=new Qe,this.selectedMap=new Map,this.selected$=new bt(void 0),this.choiceColor="#255db8",this.choiceBackgroundColor="#a6c8ff",this.choiceSelectedColor="#a6c8ff",this.choiceSelectedBackgroundColor="#255db8",this.choiceHoverColor="#255db8",this.choiceHoverBackgroundColor="#629eff",this.submitButton$=new bt("")}ngOnInit(){this.selected$.pipe(Dn(this),gA(25)).subscribe(t=>{t&&(this.isMultiChoice?this.selectedMap.get(t)?this.selectedMap.delete(t):this.selectedMap.set(t,t):(this.selectedMap=new Map,this.selectedMap.set(t,t),setTimeout(()=>{this.choiceSelected.next(t)},10)))}),this.primaryColor$.pipe(Dn(this)).subscribe(t=>{this.choiceColor=sE(t,25),this.choiceBackgroundColor="#fff",this.choiceSelectedColor=sE(t,25),this.choiceSelectedBackgroundColor=dO(t,40),this.choiceHoverColor=sE(t,25),this.choiceHoverBackgroundColor=dO(t,60)}),this.submitButton$.pipe(Dn(this),gA(50),ku()).subscribe(t=>{t&&t.length>0&&this.choiceSelected.next(t)})}get primaryColor(){return this.primaryColor$.getValue()}set primaryColor(t){this.primaryColor$.next(t)}trackChoice(t,e){return`${t}-${e}-${this.isSelected(e)}`}isSelected(t){return!!this.selectedMap.get(t)}onSubmitMultiChoice(){let t="";this.selectedMap.forEach(e=>{t.length>0&&(t+="; "),t+=e}),this.submitButton$.next(t)}static#e=this.\u0275fac=function(e){return new(e||dS)};static#t=this.\u0275cmp=dn({type:dS,selectors:[["chat-choice"]],inputs:{choices:"choices",primaryColor:"primaryColor",isMultiChoice:"isMultiChoice"},outputs:{choiceSelected:"choiceSelected"},standalone:!0,features:[ii],decls:4,vars:9,consts:[[1,"choice-container"],[1,"chat-choices"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"classList","click"],[1,"button","horizontal-contents",2,"margin-top","8px",3,"click"],["alt","submit audio record",3,"src"],[2,"color","#237558"]],template:function(e,r){1&e&&(V(0,"div",0)(1,"div",1),ue(2,J$,3,4,"ng-container",2),Y(),ue(3,Z$,5,1,"ng-container",3),Y()),2&e&&(ri("--primary-color",r.primaryColor),U(1),ri("flex-direction",r.choices.length>5?"row":"column")("align-items",r.choices.length>10?"center":"flex-start"),U(1),z("ngForOf",r.choices)("ngForTrackBy",r.trackChoice.bind(r)),U(1),z("ngIf",r.isMultiChoice&&r.selectedMap.size))},dependencies:[_r,ip,Fr],styles:[".choice-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:8px;--primary-color: #36109d}.chat-choices[_ngcontent-%COMP%]{flex:1;display:flex;gap:8px;padding:4px;align-items:center;justify-content:flex-start;box-sizing:border-box;flex-wrap:wrap;overflow:hidden}.item-center[_ngcontent-%COMP%]{height:36px;display:flex;align-items:center;justify-content:flex-start;padding:0 16px;-webkit-user-select:none;user-select:none}.chat-choice[_ngcontent-%COMP%]{font-size:14px;border:1px solid var(--primary-color);font-weight:400;cursor:pointer;border-radius:6px;background-color:#f9f9ff;color:var(--default-text-color-light);opacity:0;animation:_ngcontent-%COMP%_scale-up .15s ease-in forwards;animation-delay:var(--delay);overflow:hidden}@keyframes _ngcontent-%COMP%_scale-up{0%{opacity:0;transform:translateY(50%) scale(0)}to{opacity:1;transform:translateY(0) scale(1)}}.chat-choice[_ngcontent-%COMP%]:hover{background-color:var(--primary-color);color:#fff}.chat-choice-selected[_ngcontent-%COMP%]{font-size:14px;font-weight:400;cursor:pointer;border-radius:6px;color:#fff;background-color:var(--default-text-color-light)}.button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:-moz-fit-content;width:fit-content;padding:16px 16px 16px 8px;height:40px;border-radius:6px;background-color:#fff;z-index:5;box-shadow:#0003 0 1px 3px 1px;box-sizing:border-box;margin:4px}.button[_ngcontent-%COMP%]:hover{box-shadow:#0003 0 1px 1px 1px}.horizontal-contents[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.horizontal-contents[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:28px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}@media screen and (max-width: 768px){.chat-choice[_ngcontent-%COMP%], .chat-choice-selected[_ngcontent-%COMP%], .button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}}"]})};function $$(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",2),De("click",function(){const o=ve(e).$implicit;return we(j().onRecordClicked(o))}),V(2,"span"),Pe(3),Y()(),Fe()}if(2&n){const e=t.$implicit;U(3),zn(e.DisplayName)}}jI=ke([Co()],jI);let HI=class fS{constructor(){this.primaryColor="#154881",this.records$=new bt([]),this.recordSelected=new Qe,this.recordClicked$=new bt(void 0),this.recordlist=[]}get records(){return this.records$.getValue()}set records(t){this.records$.next(t)}ngOnInit(){this.records$.pipe(Dn(this)).subscribe(t=>{this.recordlist=[];let e=0;t.forEach(r=>{setTimeout(()=>{const i=rE.get(r);i&&this.recordlist.push(i)},50*e),e+=1})}),this.recordClicked$.pipe(Dn(this),gA(25),ku()).subscribe(t=>{t&&this.recordSelected.next(t)})}onRecordClicked(t){this.recordClicked$.next(t)}trackRecord(t,e){return e.Id}static#e=this.\u0275fac=function(e){return new(e||fS)};static#t=this.\u0275cmp=dn({type:fS,selectors:[["chat-record"]],inputs:{primaryColor:"primaryColor",records:"records"},outputs:{recordSelected:"recordSelected"},standalone:!0,features:[ii],decls:2,vars:8,consts:[[1,"record-cards"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"record-card",3,"click"]],template:function(e,r){1&e&&(V(0,"div",0),ue(1,$$,4,1,"ng-container",1),Y()),2&e&&(ri("--primary-color",r.primaryColor)("flex-direction",r.records.length>10?"row":"column")("align-items",r.records.length>10?"center":"flex-start"),U(1),z("ngForOf",r.recordlist)("ngForTrackBy",r.trackRecord))},dependencies:[_r,ip],styles:[".record-cards[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:flex-start;padding:8px;box-sizing:border-box;--primary-color: #154881}.record-card[_ngcontent-%COMP%]{cursor:pointer;width:100%;max-width:200px;padding:6px 12px;display:flex;align-items:center;justify-content:flex-start;border-radius:6px;background-color:#fff;border:1px solid var(--primary-color);box-shadow:#0000004d 0 1px 3px 1px;opacity:0;animation:_ngcontent-%COMP%_scale-up .15s ease-in forwards;overflow:hidden}@keyframes _ngcontent-%COMP%_scale-up{0%{opacity:0;transform:translate(-100%) scale(0)}to{opacity:1;transform:translate(0) scale(1)}}.record-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}.record-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px}.record-card[_ngcontent-%COMP%]:hover{background-color:var(--primary-color)}.record-card[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#fff}"]})};var Es;HI=ke([Co()],HI);let WI=class hS{static#e=Es=this;static#t=this.cache=new Map;get file(){return this.file$.getValue()}set file(t){this.file$.next(t)}constructor(t,e){if(this.el=t,this.renderer=e,this.file$=new bt(void 0),!t.nativeElement)throw new Error("This directive is only allowed in a image element")}ngOnInit(){Es.cache=new Map,this.file$.pipe(Dn(this)).subscribe(t=>{if(!t)return void(this.el.nativeElement.hidden=!0);const e=`${t.size}-${t.name}`,r=Es.cache.get(e);if(r)this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",r);else{const i=MI(t.name);if(i)if(function SZ(n){return["png","jpeg","jpg","gif","bmp","webp"].includes(n)}(i)){const o=new FileReader;o.onload=()=>{const s=o.result;Es.cache.set(e,s),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",s)},o.readAsDataURL(t)}else!function kZ(n){return["mp3","wav","m4a","aiff","flac","ogg","wma","alac","midi"].includes(n)}(i)?function PZ(n){return["mp4","avi","mov","wmv","mkv","flv","mpeg","mpg","webm","3gp","m4v"].includes(n)}(i)?(Es.cache.set(e,kI),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",kI)):function TZ(n){return["doc","docx","txt","rtf"].includes(n)}(i)?(Es.cache.set(e,iL),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",iL)):function RZ(n){return"pdf"===n}(i)?(Es.cache.set(e,rL),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",rL)):function MZ(n){return"htm"===n||"html"===n}(i)?(Es.cache.set(e,oL),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",oL)):(Es.cache.set(e,sL),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",sL)):(Es.cache.set(e,nL),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",nL));else Es.cache.set(e,tL),this.el.nativeElement.hidden=!1,this.renderer.setAttribute(this.el.nativeElement,"src",tL)}})}ngOnDestroy(){Es.cache.clear()}static#n=this.\u0275fac=function(e){return new(e||hS)(lt(Xn),lt(Qi))};static#r=this.\u0275dir=co({type:hS,selectors:[["","file-to-image",""]],inputs:{file:"file"},standalone:!0})};WI=Es=ke([Co()],WI);let eee=(()=>{class n{transform(e,...r){if(e<1024)return`${e.toFixed(2)} Byte`;{const i=e/1024;if(i>=1024){const o=i/1024;return o>=1024?`${(o/1024).toFixed(2)} GB`:`${o.toFixed(2)} MB`}return`${i.toFixed(2)} KB`}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Gn({name:"filesize",type:n,pure:!0,standalone:!0})}return n})();const tee=["fileInput"];function nee(n,t){1&n&&Cr(0,10),2&n&&(j(2),z("ngTemplateOutlet",Wt(6)))}function ree(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",5),De("drop",function(i){return ve(e),we(j().onDrop(i))})("dragover",function(i){return ve(e),we(j().onDragOver(i))}),dt(2,"img",6),V(3,"div")(4,"div",7),Pe(5,"Drag and drop your files"),Y(),V(6,"div",7),Pe(7,"Or "),V(8,"span",8),De("click",function(){return ve(e),j(),we(Wt(2).click())}),Pe(9,"Upload files"),Y()()()(),ue(10,nee,1,1,"ng-container",9),Fe()}if(2&n){const e=j();U(2),z("src",e.Assets.Images.FileUpload,It),U(8),z("ngIf",e.fileSelectionError)}}function iee(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",18),De("click",function(){ve(e);const i=j().$implicit;return we(j(2).removeFileFromlist(i))}),dt(2,"img",19),Y(),Fe()}if(2&n){const e=j(3);U(2),z("src",e.Assets.Images.Delete,It)}}function oee(n,t){if(1&n&&(Ne(0),dt(1,"img",20),Fe()),2&n){const e=j(3);U(1),z("src",e.Assets.Gifs.Loading,It)}}function see(n,t){if(1&n&&(Ne(0),V(1,"div",13),dt(2,"img",14),V(3,"div",15)(4,"span",16),Pe(5),Y(),V(6,"span",17),Pe(7),wn(8,"filesize"),Y()(),ue(9,iee,3,1,"ng-container",3),ue(10,oee,2,1,"ng-container",3),Y(),Fe()),2&n){const e=t.$implicit,r=j(2);U(2),z("file",e.file),U(3),zn(e.file.name),U(2),zn(bn(8,5,e.file.size)),U(2),z("ngIf",e.uploadStatus===r.UploadStatus.None||e.uploadStatus===r.UploadStatus.UploadFailed),U(1),z("ngIf",e.uploadStatus===r.UploadStatus.Uploading)}}function aee(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",21),De("click",function(){return ve(e),we(j(2).onSubmitFile())}),Pe(2," Upload "),Y(),Fe()}}function uee(n,t){if(1&n&&(Ne(0),V(1,"div",11),ue(2,see,11,7,"ng-container",12),ue(3,aee,3,0,"ng-container",3),Y(),Fe()),2&n){const e=j();U(2),z("ngForOf",e.filelist)("ngForTrackBy",e.trackfilelist),U(1),z("ngIf",!e.isUploading)}}function cee(n,t){if(1&n&&(V(0,"div",22)(1,"span",23),Pe(2),Y()()),2&n){const e=j();U(2),zn(e.fileSelectionError)}}let VI=class pS{constructor(){this.Assets=Ti,this.maxFileSize=200,this.supportedFiles="*/*",this.data$=new bt({MaxFileSizeInMb:200}),this.primaryColor="#434",this.fileSelectionError=void 0,this.fileSubmitted=new Qe,this.isUploading=!1,this.subject=new bt(void 0),this.selectedFile=null,this.filelist=[],this.UploadStatus=Ko}ngOnInit(){this.data$.pipe(Dn(this)).subscribe(t=>{if(t.SupportedFileTypes&&t.SupportedFileTypes.length){let e="";"*/*"!==t.SupportedFileTypes&&t.SupportedFileTypes.split(new RegExp("[,;]","gi")).map(r=>r.trim()).filter(r=>!nb(r)).forEach(r=>{e.length>0&&(e+=","),r.startsWith(".")?e+=r:e+=`.${r}`}),this.supportedFiles=e}else this.supportedFiles="*/*";this.maxFileSize=t.MaxFileSizeInMb||200})}get data(){return this.data$.getValue()}set data(t){this.data$.next(t)}onFileSelected(t){this.addFilesinList(t.target.files)}verifyAndAddAfile(t){if(t.size/1024/1024>this.maxFileSize)this.setErrorMessage("File size limit exceeded.");else{const e=MI(t.name);this.supportedFiles&&"*/*"!==this.supportedFiles&&e&&!this.supportedFiles.includes(e)?this.setErrorMessage("The supported formats does not include this file format."):this.filelist.find(i=>i.file.name===t.name&&i.file.type===t.type&&i.file.size===t.size)||this.filelist.push(new ov(t))}}setErrorMessage(t){this.fileSelectionError=t,setTimeout(()=>{this.fileSelectionError=void 0},3e3)}onDrop(t){this.addFilesinList(t.dataTransfer.files),t.preventDefault()}addFilesinList(t){if(t&&t.length)for(let e=0;e<t.length;e++){const r=t.item(e);r&&setTimeout(()=>{this.verifyAndAddAfile(r)},100*e)}this.fileInput&&(this.fileInput.nativeElement.value="")}onDragOver(t){t.preventDefault()}onSubmitFile(){this.filelist.length<1||(this.isUploading=!0,this.subject.unsubscribe(),this.subject=new bt(void 0),this.subject.pipe(Dn(this)).subscribe(t=>{if(t){const e=this.filelist.findIndex(r=>r.id===t.id);-1!==e&&this.filelist.splice(e,1,t)}this.isUploading=void 0!==this.filelist.find(e=>e.uploadStatus===Ko.Uploading)}),this.fileSubmitted.next({files:this.filelist,subscriber:this.subject}))}removeFileFromlist(t){const e=this.filelist.findIndex(r=>r.id===t.id);-1!==e&&this.filelist.splice(e,1)}trackfilelist(t,e){return e.id}static#e=this.\u0275fac=function(e){return new(e||pS)};static#t=this.\u0275cmp=dn({type:pS,selectors:[["chat-upload"]],viewQuery:function(e,r){if(1&e&&Pr(tee,5),2&e){let i;kr(i=Or())&&(r.fileInput=i.first)}},inputs:{data:"data",primaryColor:"primaryColor"},outputs:{fileSubmitted:"fileSubmitted"},standalone:!0,features:[ii],decls:7,vars:5,consts:[[1,"upload-container"],["type","file","multiple","multiple",2,"display","none",3,"accept","change"],["fileInput",""],[4,"ngIf"],["error",""],[1,"file-upload",3,"drop","dragover"],["alt","Upload file icon","srcset","",3,"src"],[1,"text-block"],[1,"button-span",3,"click"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"files-selected"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"file-card"],["file-to-image","","alt","",1,"file-asset",3,"file"],[1,"file-data"],[1,"highlighted-data"],[1,"data"],[1,"file-action",3,"click"],["alt","Remove file icon","srcset","",3,"src"],["alt","Uploading file animation","srcset","",1,"file-asset",3,"src"],[1,"upload-button",3,"click"],[2,"width","100%","height","100%","display","flex","align-items","center","justify-content","center"],[2,"color","red","text-align","center","width","80%","text-align","center","text-align","center","overflow","hidden","word-wrap","break-word"]],template:function(e,r){1&e&&(V(0,"div",0)(1,"input",1,2),De("change",function(o){return r.onFileSelected(o)}),Y(),ue(3,ree,11,2,"ng-container",3),ue(4,uee,4,3,"ng-container",3),Y(),ue(5,cee,3,1,"ng-template",null,4,sn)),2&e&&(ri("--primary-color",r.primaryColor),U(1),z("accept",r.supportedFiles),U(2),z("ngIf",!r.isUploading),U(1),z("ngIf",r.filelist.length))},dependencies:[_r,ip,Fr,Qm,WI,eee],styles:[".upload-container[_ngcontent-%COMP%]{width:100%;max-width:370px;overflow:hidden;box-sizing:border-box;--primary-color: #434;padding:2px}.file-upload[_ngcontent-%COMP%]{border-radius:4px;border:1px solid rgba(129,129,129,.3);padding:32px 16px;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;color:var(--default-text-color);cursor:grab;gap:16px}.file-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;-webkit-user-select:none;user-select:none}.file-upload[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]{margin:0;-webkit-user-select:none;user-select:none;font-size:14px;font-weight:500}.file-upload[_ngcontent-%COMP%]   .button-span[_ngcontent-%COMP%]{color:var(--primary-color);-webkit-user-select:none;user-select:none;cursor:pointer}.files-selected[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center;margin-top:8px}.file-card[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;border-radius:4px;border:1px solid rgba(129,129,129,.3);gap:8px;padding:8px;box-sizing:border-box;cursor:pointer;animation:_ngcontent-%COMP%_slide-up .25s ease-in}@keyframes _ngcontent-%COMP%_slide-up{0%{opacity:0;transform:translateY(50%)}to{opacity:1;transform:translateY(0)}}.file-asset[_ngcontent-%COMP%]{width:40px;height:40px}.file-data[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px;color:var(--default-text-color);overflow:hidden}.highlighted-data[_ngcontent-%COMP%]{line-height:1.1rem;font-size:12px;font-weight:400;-webkit-user-select:none;user-select:none;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.data[_ngcontent-%COMP%]{font-size:12px;font-weight:300;-webkit-user-select:none;user-select:none}.file-action[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer}.file-action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:16px;height:16px}.upload-button[_ngcontent-%COMP%]{box-sizing:border-box;padding:6px 32px;border-radius:4px;border:1px solid var(--primary-color);color:var(--primary-color);display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:400}.upload-button[_ngcontent-%COMP%]:hover{border-color:var(--default-text-color);background-color:var(--default-text-color);color:#fff}"]})};function lee(n,t){if(1&n&&(Ne(0),V(1,"div",3)(2,"span",4),Pe(3),Y()(),Fe()),2&n){const e=j();U(3),zn(e.error)}}function dee(n,t){if(1&n){const e=ft();V(0,"div",5),De("click",function(){return ve(e),we(j().onRequestOpenAppointment())}),dt(1,"img",6),V(2,"span"),Pe(3,"Make an Appointment"),Y()()}if(2&n){const e=j();U(1),z("src",e.Assets.Images.Schedular,It)}}VI=ke([Co()],VI);let qI=class gS{constructor(){this.Assets=Ti,this.primaryColor="#dda",this.attribute={},this.requestOpenAppointment=new Qe,this.error=void 0,this.subject=new bt(Xs.ok(!0)),this.submitReply=new Qe,this.isProcessing=!1}onRequestOpenAppointment(){this.subject.unsubscribe(),this.subject=new bt(Xs.ok(!1)),this.subject.pipe(Dn(this)).subscribe(t=>{t.isError&&t.error?(this.error=t.error.message,setTimeout(()=>{this.error=void 0},3e3),this.subject.unsubscribe()):t.result&&(this.submitReply.next(this.attribute.OnCompleteMessageFormat&&this.attribute.OnCompleteMessageFormat.length?this.attribute.OnCompleteMessageFormat:"I have made an appointment. Please confirm."),this.subject.unsubscribe())}),this.requestOpenAppointment.next({attribute:this.attribute,subject:this.subject})}static#e=this.\u0275fac=function(e){return new(e||gS)};static#t=this.\u0275cmp=dn({type:gS,selectors:[["chat-schedular-view"]],inputs:{primaryColor:"primaryColor",attribute:"attribute"},outputs:{requestOpenAppointment:"requestOpenAppointment",submitReply:"submitReply"},standalone:!0,features:[ii],decls:4,vars:2,consts:[[2,"padding","16px"],[4,"ngIf","ngIfElse"],["buttonview",""],[2,"width","100%","height","100%","display","flex","align-items","center","justify-content","center"],[2,"color","red","text-align","center","max-width","80%"],[1,"button","horizontal-contents",3,"click"],["alt","Create Schedule",3,"src"]],template:function(e,r){if(1&e&&(V(0,"div",0),ue(1,lee,4,1,"ng-container",1),ue(2,dee,4,1,"ng-template",null,2,sn),Y()),2&e){const i=Wt(3);U(1),z("ngIf",r.error)("ngIfElse",i)}},dependencies:[_r,Fr],styles:[".button-containers[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;gap:10px;padding:8px;align-items:center;width:400px;max-width:100%}.buttons-left[_ngcontent-%COMP%]{justify-content:flex-start}.buttons-middle[_ngcontent-%COMP%]{justify-content:center}.button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:-moz-fit-content;width:fit-content;padding:16px;height:40px;border-radius:6px;background-color:#fff;z-index:5;box-shadow:#0003 0 1px 3px 1px;box-sizing:border-box}.button[_ngcontent-%COMP%]:hover{box-shadow:#0003 0 1px 1px 1px}.horizontal-contents[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.horizontal-contents[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:28px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}"]})};qI=ke([Co()],qI);let fee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({imports:[_r]})}return n})();class hee{constructor(t,e){this.mediaRecorder=null,this.recordedChunks=[],this.isRecording=!1,this.isPaused=!1,this.isStopped=!1,this.maxDurationInSeconds=60,this.maxFileSizeInBytes=10485760,this.startTime=0,this.pausedTime=0,this.audioContext=null,this.audioAnalyser=null,this.dataArray=null,this.soundWaveCanvas=null,this.canvasContext=null,this.recordingStarted=new Qe,this.recordingPaused=new Qe,this.recordingResumed=new Qe,this.recordingStopped=new Qe,this.elapsedRecordingTime=new bt(0),this.maxDurationInSeconds=t,this.maxFileSizeInBytes=1024*e*1024}getFileExtensionFromMimeType(t){return t.startsWith("audio/wav")?".wav":t.startsWith("audio/webm")?".webm":t.startsWith("audio/ogg")?".ogg":t.startsWith("audio/mpeg")?".mp3":""}filename(t){return this.getFileExtensionFromMimeType(t),"Recording-"+Date.now()+".mp3"}startRecording(t){var e=this;return du(function*(){navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{e.isStopped=!1,e.recordedChunks=[],e.mediaRecorder=new MediaRecorder(r),e.mediaRecorder.ondataavailable=o=>{e.isPaused||(e.recordedChunks.push(o.data),e.getTotalSize()>e.maxFileSizeInBytes&&e.stopRecording())},e.mediaRecorder.onstop=()=>{setTimeout(()=>{const o=e.mediaRecorder?e.mediaRecorder.mimeType:"audio/wav",s=new Blob(e.recordedChunks,{type:o}),a=new File([s],e.filename(o),{type:o,lastModified:Date.now()});setTimeout(()=>{e.recordingStopped.next(a)},10)},100)},e.mediaRecorder.start(),e.isRecording=!0,e.startTime=Date.now(),e.elapsedRecordingTime.next(0),e.audioContext=new AudioContext;const i=e.audioContext.createMediaStreamSource(r);e.audioAnalyser=e.audioContext.createAnalyser(),i.connect(e.audioAnalyser),e.audioAnalyser.fftSize=2048,e.dataArray=new Uint8Array(e.audioAnalyser.frequencyBinCount),e.soundWaveCanvas=t,e.canvasContext=e.soundWaveCanvas.getContext("2d"),e.canvasContext&&(e.canvasContext.fillStyle="rgb(200, 200, 200)",e.canvasContext.lineWidth=2,e.canvasContext.strokeStyle="rgb(0, 0, 0)"),e.recordingStarted.emit(),setTimeout(()=>{e.drawRepeatedly()},10)}).catch(r=>{console.error("Error starting recording:",r)})})()}drawRepeatedly(){var t=this;return du(function*(){if(t.isStopped)return;const e=(Date.now()-t.startTime)/1e3;e>t.maxDurationInSeconds?t.stopRecording():(t.elapsedRecordingTime.next(e),t.isRecording&&!t.isPaused&&(yield t.drawSoundWave(),setTimeout(()=>{t.drawRepeatedly()},100)))})()}stopRecording(){(this.isRecording||this.isPaused)&&(this.isStopped=!0,this.isRecording=!1,this.isPaused=!1,this.startTime=0,this.pausedTime=0,this.soundWaveCanvas=null,this.audioAnalyser&&(this.audioAnalyser.disconnect(),this.audioAnalyser=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null),setTimeout(()=>{this.mediaRecorder&&this.mediaRecorder.stop()},10))}releaseRecorder(){this.mediaRecorder&&this.mediaRecorder.stream&&this.mediaRecorder.stream.getTracks().forEach(t=>{t.stop()})}pauseRecording(){this.mediaRecorder&&this.isRecording&&!this.isPaused&&(this.mediaRecorder.pause(),this.isPaused=!0,this.pausedTime=Date.now(),this.recordingPaused.emit())}resumeRecording(){this.mediaRecorder&&this.isPaused&&(this.mediaRecorder.resume(),this.isPaused=!1,this.startTime+=Date.now()-this.pausedTime,this.pausedTime=0,this.drawRepeatedly(),this.recordingResumed.emit())}getTotalSize(){return this.recordedChunks.reduce((t,e)=>t+e.size,0)}drawSoundWave(){var t=this;return du(function*(){return new Promise(e=>{if(!(t.audioContext&&t.audioAnalyser&&t.dataArray&&t.canvasContext))return;t.audioAnalyser.getByteFrequencyData(t.dataArray);const r=t.soundWaveCanvas.width/t.dataArray.length*2.5;let i,o=0;t.canvasContext.clearRect(0,0,t.soundWaveCanvas.width,t.soundWaveCanvas.height);for(let s=0;s<t.dataArray.length;s++)i=t.dataArray[s]/2,t.canvasContext.fillStyle="rgb("+(i+100)+",50,50)",t.canvasContext.fillRect(o,t.soundWaveCanvas.height-i/2,r,i),o+=r+1;e()})})()}}const pee=["soundWaveCanvas"];function gee(n,t){1&n&&(Ne(0),dt(1,"div"),Fe())}function mee(n,t){if(1&n){const e=ft();Ne(0),V(1,"img",8),De("click",function(){return ve(e),we(j(2).pauseRecording())}),Y(),Fe()}if(2&n){const e=j(2);U(1),z("src",e.Assets.Images.PauseAudioRecording,It)}}function vee(n,t){if(1&n){const e=ft();Ne(0),V(1,"img",9),De("click",function(){return ve(e),we(j(2).resumeRecording())}),Y(),Fe()}if(2&n){const e=j(2);U(1),z("src",e.Assets.Images.ResumeAudioRecording,It)}}function yee(n,t){if(1&n&&(Ne(0),ue(1,mee,2,1,"ng-container",2),ue(2,vee,2,1,"ng-container",2),Fe()),2&n){const e=j();U(1),z("ngIf",!e.isPaused),U(1),z("ngIf",e.isPaused)}}function wee(n,t){if(1&n&&(Ne(0),dt(1,"img",10),Fe()),2&n){const e=j();U(1),z("src",e.Assets.Images.DisabledStart,It)}}function bee(n,t){if(1&n){const e=ft();Ne(0),V(1,"img",11),De("click",function(){return ve(e),we(j().startRecording())}),Y(),Fe()}if(2&n){const e=j();U(1),z("src",e.Assets.Images.StartAudioRecording,It)}}function Aee(n,t){if(1&n){const e=ft();Ne(0),V(1,"img",12),De("click",function(){return ve(e),we(j().stopRecording())}),Y(),Fe()}if(2&n){const e=j();U(1),z("src",e.Assets.Images.StopAudioRecoding,It)}}function xee(n,t){1&n&&(Ne(0),dt(1,"div"),Fe())}function Cee(n,t){1&n&&(Ne(0),V(1,"h4",13),Pe(2," Tap to start recording"),Y(),Fe())}function _ee(n,t){1&n&&(Pe(0),wn(1,"secondsToTime")),2&n&&Vs(" ",bn(1,1,j().timeElapsed)," ")}let GI=class mS{constructor(t){this.zone=t,this.Assets=Ti,this.isRecording=!1,this.isPaused=!1,this.timeElapsed=0,this.maxRecordingDurationInSec=60,this.maxFileSizeInMb=200,this.started=new Qe,this.audioRecordingService=null,this.recordCompleted=new Qe}ngOnDestroy(){this.releaseAudioService()}releaseAudioService(){this.audioRecordingService&&(this.audioRecordingService.releaseRecorder(),this.audioRecordingService.recordingStarted.unsubscribe(),this.audioRecordingService.recordingPaused.unsubscribe(),this.audioRecordingService.recordingResumed.unsubscribe(),this.audioRecordingService.recordingStopped.unsubscribe(),this.audioRecordingService.elapsedRecordingTime.unsubscribe(),this.audioRecordingService=null)}startRecording(){this.audioRecordingService=new hee(this.maxRecordingDurationInSec,this.maxFileSizeInMb),this.audioRecordingService.recordingStarted.pipe(Dn(this)).subscribe(()=>{this.isRecording=!0,this.started.next()}),this.audioRecordingService.recordingPaused.pipe(Dn(this)).subscribe(()=>{this.isPaused=!0}),this.audioRecordingService.recordingResumed.pipe(Dn(this)).subscribe(()=>{this.isPaused=!1}),this.audioRecordingService.elapsedRecordingTime.pipe(Dn(this),ku()).subscribe(e=>{this.zone.run(()=>{this.timeElapsed=e})}),this.audioRecordingService.recordingStopped.pipe(Dn(this)).subscribe(e=>{this.zone.run(()=>{this.isRecording=!1,this.isPaused=!1,this.recordCompleted.next(e)}),this.releaseAudioService()}),this.audioRecordingService.startRecording(this.soundWaveCanvas.nativeElement)}stopRecording(){this.audioRecordingService?.stopRecording()}pauseRecording(){this.audioRecordingService?.pauseRecording()}resumeRecording(){this.audioRecordingService?.resumeRecording()}static#e=this.\u0275fac=function(e){return new(e||mS)(lt(Pn))};static#t=this.\u0275cmp=dn({type:mS,selectors:[["audio-recorder"]],viewQuery:function(e,r){if(1&e&&Pr(pee,5),2&e){let i;kr(i=Or())&&(r.soundWaveCanvas=i.first)}},inputs:{maxRecordingDurationInSec:"maxRecordingDurationInSec",maxFileSizeInMb:"maxFileSizeInMb"},outputs:{started:"started",recordCompleted:"recordCompleted"},decls:14,vars:9,consts:[[1,"recorder"],[1,"button-container"],[4,"ngIf"],[1,"info-section"],[4,"ngIf","ngIfElse"],["showTime",""],[1,"wave",3,"height"],["soundWaveCanvas",""],["alt","Pause Recording button","srcset","",1,"button",3,"src","click"],["alt","Resume recording button","srcset","",1,"button",3,"src","click"],["alt","Start Button Disabled","srcset","",1,"button-big",3,"src"],["alt","Start button","srcset","",1,"button-big",3,"src","click"],["alt","Stop recoding button","srcset","",1,"button",3,"src","click"],[2,"margin","0","text-align","center","font-weight","400","font-size","14px","; color","#a6a6a6"]],template:function(e,r){if(1&e&&(V(0,"div",0)(1,"div",1),ue(2,gee,2,0,"ng-container",2),ue(3,yee,3,2,"ng-container",2),ue(4,wee,2,1,"ng-container",2),ue(5,bee,2,1,"ng-container",2),ue(6,Aee,2,1,"ng-container",2),ue(7,xee,2,0,"ng-container",2),Y(),V(8,"div",3),ue(9,Cee,3,0,"ng-container",4),ue(10,_ee,2,3,"ng-template",null,5,sn),Y(),dt(12,"canvas",6,7),Y()),2&e){const i=Wt(11);U(2),z("ngIf",!r.isRecording),U(1),z("ngIf",r.isRecording),U(1),z("ngIf",r.isRecording),U(1),z("ngIf",!r.isRecording),U(1),z("ngIf",r.isRecording),U(1),z("ngIf",!r.isRecording),U(2),z("ngIf",!r.isRecording&&!r.isPaused)("ngIfElse",i),U(3),z("height",r.isRecording?64:0)}},dependencies:[Fr,VB],styles:[".recorder[_ngcontent-%COMP%]{width:100%;height:100%}.wave[_ngcontent-%COMP%]{width:100%}.button-container[_ngcontent-%COMP%]{width:100%;height:84px;display:flex;align-items:center;justify-content:center;gap:24px}.button[_ngcontent-%COMP%]{width:48px}.button-big[_ngcontent-%COMP%]{width:64px}.info-section[_ngcontent-%COMP%]{width:100%;text-align:center}"]})};function Eee(n,t){if(1&n&&(Ne(0),V(1,"div",5)(2,"span",6),Pe(3),Y()(),Fe()),2&n){const e=t.ngIf;U(3),zn(e)}}GI=ke([Co()],GI);const Dee=function(n){return{color:n}};function Iee(n,t){if(1&n&&(Ne(0),V(1,"div",7),dt(2,"img",8),V(3,"h5",9),Pe(4,"We are uploading your file. This may take some time. Please be patient"),Y()(),Fe()),2&n){const e=j(2);U(2),z("src",e.Assets.Gifs.Loading,It),U(1),z("ngStyle",fr(2,Dee,e.primaryColor))}}function See(n,t){if(1&n&&ue(0,Iee,5,4,"ng-container",1),2&n){const e=j(),r=Wt(6);z("ngIf",e.isUploading)("ngIfElse",r)}}function Tee(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",10)(2,"audio",11),dt(3,"source",12),Y()(),V(4,"div",13)(5,"div",14),De("click",function(){return ve(e),we(j(2).reset())}),dt(6,"img",15),V(7,"span",16),Pe(8,"Change"),Y()(),V(9,"div",14),De("click",function(){return ve(e),we(j(2).onSubmitFile())}),dt(10,"img",17),V(11,"span",18),Pe(12,"Submit"),Y()()(),Fe()}if(2&n){const e=t.ngIf,r=j(2);U(3),z("src",e,It),U(3),z("src",r.Assets.Images.Edit,It),U(4),z("src",r.Assets.Images.SubmitGreen,It)}}function Ree(n,t){if(1&n&&(ue(0,Tee,13,3,"ng-container",1),wn(1,"async")),2&n){const e=j(),r=Wt(8);z("ngIf",bn(1,2,e.audioUrl$))("ngIfElse",r)}}function Mee(n,t){if(1&n){const e=ft();V(0,"audio-recorder",19),De("started",function(){return ve(e),we(j().onReceiveFile(null))})("recordCompleted",function(i){return ve(e),we(j().onReceiveFile(i))}),Y()}if(2&n){const e=j();z("maxFileSizeInMb",e.maxFileSizeInMb)("maxRecordingDurationInSec",e.maxRecordingDurationInSec)}}let KI=class vS{constructor(){this.Assets=Ti,this.isUploading=!1,this.audioUrl$=new bt(null),this.error$=new bt(null),this.file$=new bt(null),this.fileSubmitted=new Qe,this.subject=new bt(void 0),this.primaryColor="#ddd",this.maxRecordingDurationInSec=60,this.maxFileSizeInMb=200}ngOnInit(){this.error$.pipe(Dn(this)).subscribe(t=>{t&&setTimeout(()=>{this.error$.next(null)},3e3)}),this.file$.pipe(Dn(this)).subscribe(t=>{this.isUploading=!1,t?(this.error$.next(null),this.getContentUrl(t).then(e=>this.audioUrl$.next(e)).catch(e=>{this.audioUrl$.next(null),this.error$.error(e)})):(this.error$.next(null),this.audioUrl$.next(null))})}getContentUrl(t){return new Promise((e,r)=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=()=>{r("Unable to read file content")},i.readAsDataURL(t)})}reset(){this.isUploading=!1,this.error$.next(null),this.audioUrl$.next(null)}onReceiveFile(t){this.file$.next(t)}onSubmitFile(){const t=this.file$.getValue();t&&(this.isUploading||(this.isUploading=!0,this.subject.unsubscribe(),this.subject.unsubscribe(),this.subject=new bt(void 0),this.subject.pipe(Dn(this)).subscribe(e=>{if(e){this.isUploading=e.uploadStatus===Ko.Uploading;const r=e.uploadError||null;r&&this.error$.next(r)}}),this.fileSubmitted.next({files:[new ov(t)],subscriber:this.subject})))}static#e=this.\u0275fac=function(e){return new(e||vS)};static#t=this.\u0275cmp=dn({type:vS,selectors:[["chat-audio-recorder"]],inputs:{primaryColor:"primaryColor",maxRecordingDurationInSec:"maxRecordingDurationInSec",maxFileSizeInMb:"maxFileSizeInMb"},outputs:{fileSubmitted:"fileSubmitted"},standalone:!0,features:[ii],decls:9,vars:6,consts:[[1,"chat-audio-container"],[4,"ngIf","ngIfElse"],["uploading",""],["showFile",""],["showRecorder",""],[2,"width","100%","height","100%","display","flex","align-items","center","justify-content","center"],[2,"color","red","text-align","center","width","80%","text-align","center","overflow","hidden","word-wrap","break-word"],[2,"margin-top","16px","width","100%","height","100%","display","flex","align-items","center","justify-content","center","flex-direction","column"],["alt","loading","srcset","",2,"height","48px",3,"src"],[2,"text-align","center","max-width","80%","margin","16px 0 0 0","font-weight","400","font-size","14px",3,"ngStyle"],[2,"width","100%","height","64px"],["controls","",2,"width","100%","height","100%"],[3,"src"],[1,"button-containers","buttons-middle"],[1,"button","horizontal-contents",3,"click"],["alt","change",3,"src"],[2,"color","#D37242"],["alt","submit audio record",3,"src"],[2,"color","#237558"],[3,"maxFileSizeInMb","maxRecordingDurationInSec","started","recordCompleted"]],template:function(e,r){if(1&e&&(V(0,"div",0),ue(1,Eee,4,1,"ng-container",1),wn(2,"async"),ue(3,See,1,2,"ng-template",null,2,sn),ue(5,Ree,2,4,"ng-template",null,3,sn),ue(7,Mee,1,2,"ng-template",null,4,sn),Y()),2&e){const i=Wt(4);ri("--primarycolor",r.primaryColor),U(1),z("ngIf",bn(2,4,r.error$))("ngIfElse",i)}},dependencies:[_r,Fr,op,Aa,fee,GI],styles:[".chat-audio-container[_ngcontent-%COMP%]{width:100%;max-width:300px;height:-moz-fit-content;height:fit-content;padding:8px 0;--primarycolor: #ddd;box-sizing:border-box}.button-containers[_ngcontent-%COMP%]{display:flex;gap:8px;padding:8px;align-items:center;width:100%;box-sizing:border-box}.buttons-left[_ngcontent-%COMP%]{justify-content:flex-start}.buttons-middle[_ngcontent-%COMP%]{justify-content:center}.button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:-moz-fit-content;width:fit-content;padding:16px 16px 16px 8px;height:40px;border-radius:6px;background-color:#fff;z-index:5;box-shadow:#0003 0 1px 3px 1px;box-sizing:border-box}.button[_ngcontent-%COMP%]:hover{box-shadow:#0003 0 1px 1px 1px}.horizontal-contents[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.horizontal-contents[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:28px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}"]})};KI=ke([Co()],KI);const kee=["videoElement"],GL=function(n){return{$implicit:n}};function Pee(n,t){if(1&n&&Cr(0,7),2&n){const e=j();z("ngTemplateOutlet",Wt(9))("ngTemplateOutletContext",fr(2,GL,e.error))}}function Oee(n,t){if(1&n&&Cr(0,7),2&n){const e=j();z("ngTemplateOutlet",Wt(11))("ngTemplateOutletContext",fr(2,GL,e.contentUrl))}}function Nee(n,t){1&n&&Cr(0,8),2&n&&(j(),z("ngTemplateOutlet",Wt(7)))}function Fee(n,t){1&n&&Cr(0,8),2&n&&(j(),z("ngTemplateOutlet",Wt(13)))}const Bee=function(n){return{color:n}};function Lee(n,t){if(1&n&&(V(0,"div",9),dt(1,"img",10),V(2,"span",11),Pe(3,"We are uploading your file. This may take some time. Please be patient"),Y()()),2&n){const e=j();U(1),z("src",e.Assets.Gifs.Loading,It),U(1),z("ngStyle",fr(2,Bee,e.primaryColor))}}function Uee(n,t){if(1&n&&(V(0,"div",12)(1,"span"),Pe(2),Y()()),2&n){const e=t.$implicit;U(2),zn(e)}}function zee(n,t){if(1&n){const e=ft();V(0,"div",13)(1,"div",14)(2,"video",15),dt(3,"source",16),Pe(4," Unfortunately your browser doesn't playing this video format. "),Y()(),V(5,"div",17),dt(6,"img",18),Y(),V(7,"div",19)(8,"div",20),De("click",function(){return ve(e),we(j().startRecording())}),dt(9,"img",21),V(10,"span",22),Pe(11,"Change"),Y()(),V(12,"div",20),De("click",function(){return ve(e),we(j().onSubmitFile())}),dt(13,"img",23),V(14,"span",24),Pe(15,"Submit"),Y()()()()}if(2&n){const e=t.$implicit,r=j();U(1),ri("display",r.showImagepreview?"none":"block"),U(2),z("src",e,It),U(2),ri("display",r.showImagepreview?"flex":"none"),U(1),z("src",r.VideoFileIcon,It),U(3),z("src",r.Assets.Images.Edit,It),U(4),z("src",r.Assets.Images.SubmitGreen,It)}}function jee(n,t){if(1&n){const e=ft();V(0,"div",25)(1,"div",20),De("click",function(){return ve(e),we(j().startRecording())}),dt(2,"img",26),V(3,"span"),Pe(4,"Start recording"),Y()()()}if(2&n){const e=j();U(2),z("src",e.Assets.Images.VideoCamera,It)}}let QI=class yS{constructor(){this.Assets=Ti,this.primaryColor="#ddd",this.durationInSec=300,this.maximumFileSizeInMb=200,this.readyToRecordVideo=new Qe,this.videoFile$=new bt(null),this.fileSubmitted=new Qe,this.subject=new bt(void 0),this.isUploading=!1,this.isRecording=!1,this.contentUrl=null,this.showImagepreview=!1,this.error=null,this.VideoFileIcon=kI}ngOnDestroy(){this.contentUrl&&URL.revokeObjectURL(this.contentUrl)}get videoFile(){return this.videoFile$.getValue()}set videoFile(t){this.videoFile$.next(t)}onSubmitFile(){const t=this.videoFile;t&&(this.isUploading||(this.isUploading=!0,this.subject.unsubscribe(),this.subject=new bt(void 0),this.subject.pipe(Dn(this)).subscribe(e=>{e&&(this.isUploading=e.uploadStatus===Ko.Uploading,this.error=e.uploadError||null,this.error&&setTimeout(()=>{this.error=null},3e3))}),this.fileSubmitted.next({files:[new ov(t)],subscriber:this.subject})))}startRecording(){this.videoFile$.next(null),this.isRecording=!0,this.readyToRecordVideo.next(this.videoFile$)}ngOnInit(){this.videoFile$.pipe(Dn(this)).subscribe({next:t=>{this.contentUrl&&URL.revokeObjectURL(this.contentUrl),this.isRecording=!1,this.isUploading=!1,this.showImagepreview=!1,t?(this.element&&(this.showImagepreview=!this.element.nativeElement.canPlayType(t.type)),this.readFileAsUrl(t).then(e=>{this.contentUrl=e,this.error=null})):(this.contentUrl=null,this.error=null)},error:t=>{this.error=t,this.contentUrl=null,setTimeout(()=>{this.error=null},3e3)}})}readFileAsUrl(t){return new Promise(e=>{e(URL.createObjectURL(t))})}static#e=this.\u0275fac=function(e){return new(e||yS)};static#t=this.\u0275cmp=dn({type:yS,selectors:[["chat-video-recorder"]],viewQuery:function(e,r){if(1&e&&Pr(kee,5),2&e){let i;kr(i=Or())&&(r.element=i.first)}},inputs:{primaryColor:"primaryColor",durationInSec:"durationInSec",maximumFileSizeInMb:"maximumFileSizeInMb",videoFile:"videoFile"},outputs:{readyToRecordVideo:"readyToRecordVideo",fileSubmitted:"fileSubmitted"},standalone:!0,features:[ii],decls:14,vars:10,consts:[["videoElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],["uploadingFile",""],["errorSection",""],["recordPreview",""],["recordStartSection",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[1,"upload-section"],["alt","loading","srcset","",2,"height","48px",3,"src"],[3,"ngStyle"],[1,"error-section"],[2,"width","100%","box-sizing","border-box","padding","8px","overflow","hidden"],[1,"video-preview"],["controls",""],[3,"src"],[1,"attachment-messages"],["alt","uploaded video file",3,"src"],[1,"button-containers","buttons-middle"],[1,"button","horizontal-contents",3,"click"],["alt","change",3,"src"],[2,"color","#D37242"],["alt","submit audio record",3,"src"],[2,"color","#237558"],[1,"button-containers","buttons-left"],["alt","record video","srcset","",3,"src"]],template:function(e,r){1&e&&(dt(0,"video",null,0),ue(2,Pee,1,4,"ng-container",1),ue(3,Oee,1,4,"ng-container",1),ue(4,Nee,1,1,"ng-container",2),ue(5,Fee,1,1,"ng-container",2),ue(6,Lee,4,4,"ng-template",null,3,sn),ue(8,Uee,3,1,"ng-template",null,4,sn),ue(10,zee,16,8,"ng-template",null,5,sn),ue(12,jee,5,1,"ng-template",null,6,sn)),2&e&&(ri("display","none")("width",0,"px")("height",0,"px"),U(2),z("ngIf",r.error),U(1),z("ngIf",r.contentUrl&&!r.isUploading&&!r.error),U(1),z("ngIf",r.contentUrl&&r.isUploading),U(1),z("ngIf",!r.contentUrl&&!r.error&&!r.isUploading))},dependencies:[_r,Fr,Qm,op],styles:[".button-containers[_ngcontent-%COMP%]{display:flex;gap:8px;padding:8px;align-items:center;width:100%;height:100%;max-width:300px;max-height:500px;box-sizing:border-box}.buttons-left[_ngcontent-%COMP%]{justify-content:flex-start}.buttons-middle[_ngcontent-%COMP%]{justify-content:center}.button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;width:-moz-fit-content;width:fit-content;padding:16px 16px 16px 8px;height:40px;border-radius:6px;background-color:#fff;z-index:5;box-shadow:#0003 0 1px 3px 1px;box-sizing:border-box}.button[_ngcontent-%COMP%]:hover{box-shadow:#0003 0 1px 1px 1px}.horizontal-contents[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.horizontal-contents[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:28px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--default-text-color);font-weight:400}.video-preview[_ngcontent-%COMP%]{width:100%;height:100%;max-width:300px;max-height:500px;box-sizing:border-box;box-shadow:#0003 0 1px 2px 1px;border-radius:4px;display:flex;align-items:center;justify-content:center;padding:8px}.video-preview[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000}.error-section[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;max-width:300px;max-height:500px;box-sizing:border-box;padding:8px;text-align:center}.error-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:red}.upload-section[_ngcontent-%COMP%]{margin-top:16px;width:100%;height:100%;max-width:300px;display:flex;align-items:center;justify-content:center;flex-direction:column}.upload-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;max-width:80%;margin:16px 0 0;font-weight:400;font-size:14px}.attachment-messages[_ngcontent-%COMP%]{width:100%;height:100%;max-width:300px;max-height:500px;box-sizing:border-box;padding:8px;display:flex;align-items:center;justify-content:center}.attachment-messages[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:120px}@media screen and (max-width: 768px){.upload-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .error-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}}"]})};function Hee(n,t){if(1&n&&(Ne(0),V(1,"h3",4),Pe(2),Y(),Fe()),2&n){const e=t.ngIf;U(2),zn(e)}}function Wee(n,t){if(1&n&&(Ne(0),V(1,"div",5),dt(2,"img",6),V(3,"span"),Pe(4,"Uploading..."),Y()(),Fe()),2&n){const e=j(2);U(2),z("src",e.Assets.Gifs.Loading,It)}}function Vee(n,t){if(1&n&&ue(0,Wee,5,1,"ng-container",1),2&n){const e=j(),r=Wt(6);z("ngIf",e.isUploading)("ngIfElse",r)}}function qee(n,t){if(1&n){const e=ft();V(0,"div",7),De("click",function(){return ve(e),we(j().requestPhotoCapture())}),dt(1,"img",8),V(2,"span",9),Pe(3,"Capture Photo"),Y()()}if(2&n){const e=j();U(1),z("src",e.Assets.Images.PhotoCamera,It)}}QI=ke([Co()],QI);let YI=class wS{constructor(t){this.sanitizer=t,this.disableSwitchingCamera=!1,this.capturePhotoRequested=new Qe,this.submitPhoto=new Qe,this.error$=new bt(void 0),this.Assets=Ti,this.subject=new bt(void 0),this.isUploading=!1,this.uploadSubject=new bt(void 0)}get error(){return this.error$.getValue()}set error(t){this.error$.next(t),setTimeout(()=>{this.error$.next(void 0)},3e3)}requestPhotoCapture(){this.subject.unsubscribe(),this.subject=new bt(void 0),this.subject.pipe(Dn(this)).subscribe({next:t=>{t&&(this.subject.unsubscribe(),this.submitPhotoFile(t))},error:t=>{this.error=t.message||t}}),this.capturePhotoRequested.next(this.subject)}submitPhotoFile(t){this.uploadSubject.unsubscribe(),this.uploadSubject=new bt(void 0),this.uploadSubject.pipe(Dn(this)).subscribe(e=>{if(e){this.isUploading=e.uploadStatus===Ko.Uploading;const r=e.uploadError||null;r&&(this.error=r)}}),this.submitPhoto.next({files:[new ov(t)],subscriber:this.uploadSubject})}static#e=this.\u0275fac=function(e){return new(e||wS)(lt(ap))};static#t=this.\u0275cmp=dn({type:wS,selectors:[["chat-photo"]],inputs:{disableSwitchingCamera:"disableSwitchingCamera"},outputs:{capturePhotoRequested:"capturePhotoRequested",submitPhoto:"submitPhoto"},standalone:!0,features:[ii],decls:7,vars:4,consts:[[2,"width","100%","height","100%","box-sizing","border-box","max-width","300px","padding","4px"],[4,"ngIf","ngIfElse"],["noerror",""],["startcapture",""],[2,"color","#cc0000","margin","0"],[1,"uploading"],["alt","Loading","srcset","",3,"src"],[1,"button",3,"click"],["alt","Camera icon","srcset","",3,"src"],[2,"color","var(--default-text-color)"]],template:function(e,r){if(1&e&&(V(0,"div",0),ue(1,Hee,3,1,"ng-container",1),wn(2,"async"),ue(3,Vee,1,2,"ng-template",null,2,sn),ue(5,qee,4,1,"ng-template",null,3,sn),Y()),2&e){const i=Wt(4);U(1),z("ngIf",bn(2,2,r.error$))("ngIfElse",i)}},dependencies:[_r,Fr,Aa],styles:[".buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:16px}.button[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;padding:8px 16px 8px 8px;border-radius:4px;box-shadow:#0000001a 0 1px 3px 1px;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}.uploading[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.uploading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.uploading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}"]})};function Gee(n,t){if(1&n&&(Ne(0),V(1,"h3",3),Pe(2),Y(),Fe()),2&n){const e=t.ngIf;U(2),zn(e)}}function Kee(n,t){if(1&n&&(Ne(0),dt(1,"img",6),Fe()),2&n){const e=j(2);U(1),z("src",e.Assets.Gifs.Loading,It)}}function Qee(n,t){1&n&&dt(0,"img",7),2&n&&z("src",j(2).Assets.Images.PlaceMarker,It)}function Yee(n,t){if(1&n){const e=ft();V(0,"div",4),De("click",function(){return ve(e),we(j().getlocationClicked())}),ue(1,Kee,2,1,"ng-container",1),ue(2,Qee,1,1,"ng-template",null,5,sn),V(4,"span"),Pe(5,"Share current location"),Y()()}if(2&n){const e=Wt(3),r=j();U(1),z("ngIf",r.isFetching)("ngIfElse",e)}}YI=ke([Co()],YI);let Xee=(()=>{class n{constructor(){this.Assets=Ti,this.error$=new bt(void 0),this.isFetching=!1,this.geoLocationReceived=new Qe}get error(){return this.error$.getValue()}set error(e){this.error$.next(e),e&&setTimeout(()=>{this.error$.next(void 0)},3e3)}getlocationClicked(){this.isFetching||(navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(e=>{if("granted"===e.state||"prompt"===e.state)return this.isFetching=!0,void navigator.geolocation.getCurrentPosition(r=>{this.geoLocationReceived.next({lat:r.coords.latitude,lng:r.coords.longitude})},r=>{this.error=`Error getting location: ${r.message}`});"denied"===e.state&&(this.error="Geolocation permission has been denied.You can enable it in your browser settings."),this.isFetching=!1}):(this.error="Geolocation API is not supported in this browser.",this.isFetching=!1))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["chat-location"]],outputs:{geoLocationReceived:"geoLocationReceived"},standalone:!0,features:[ii],decls:5,vars:4,consts:[[1,"location-container"],[4,"ngIf","ngIfElse"],["getlocation",""],[2,"color","#cc0000","margin","0"],[1,"button",3,"click"],["marker",""],["alt","","srcset","",3,"src"],["alt","Location icon","srcset","",3,"src"]],template:function(r,i){if(1&r&&(V(0,"div",0),ue(1,Gee,3,1,"ng-container",1),wn(2,"async"),ue(3,Yee,6,2,"ng-template",null,2,sn),Y()),2&r){const o=Wt(4);U(1),z("ngIf",bn(2,2,i.error$))("ngIfElse",o)}},dependencies:[_r,Fr,Aa],styles:[".location-container[_ngcontent-%COMP%]{width:100%;height:100%;padding:4px}.button[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;padding:8px 16px 8px 8px;border-radius:4px;box-shadow:#0000001a 0 1px 3px 1px;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400;color:var(--default-text-color)}"]})}return n})(),Jee=(()=>{class n{constructor(){this.requestCodeScan=new Qe,this.Assets=Ti}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["chat-scan"]],outputs:{requestCodeScan:"requestCodeScan"},standalone:!0,features:[ii],decls:4,vars:1,consts:[[1,"button",3,"click"],["alt","Code scanner icon","srcset","",3,"src"],[2,"color","var(--default-text-color)"]],template:function(r,i){1&r&&(V(0,"div",0),De("click",function(){return i.requestCodeScan.next()}),dt(1,"img",1),V(2,"span",2),Pe(3,"Scan code"),Y()()),2&r&&(U(1),z("src",i.Assets.Images.CodeScanner,It))},dependencies:[_r],styles:[".button[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;padding:8px 16px 8px 8px;border-radius:4px;box-shadow:#0000001a 0 1px 3px 1px;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%;margin:2px}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}"]})}return n})(),Zee=(()=>{class n{constructor(){this.setting={Title:"Enter your pin",PinLength:4,IsAlphaNumericPin:!1},this.requestPin=new Qe,this.Assets=Ti}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["chat-pin"]],inputs:{setting:"setting"},outputs:{requestPin:"requestPin"},standalone:!0,features:[ii],decls:4,vars:2,consts:[[1,"button",3,"click"],["alt","Pin code","srcset","",3,"src"]],template:function(r,i){1&r&&(V(0,"div",0),De("click",function(){return i.requestPin.next(i.setting)}),dt(1,"img",1),V(2,"span"),Pe(3),Y()()),2&r&&(U(1),z("src",i.Assets.Images.PinCode,It),U(2),zn(i.setting.Title))},dependencies:[_r],styles:[".button[_ngcontent-%COMP%]{margin:2px;box-sizing:border-box;padding:8px;-webkit-user-select:none;user-select:none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:16px;width:-moz-fit-content;width:fit-content;background:white;box-shadow:#0000004d 0 1px 3px 1px;border-radius:6px}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:var(--default-text-color)}"]})}return n})();function $ee(n,t){if(1&n&&(Ne(0),V(1,"h3",4),Pe(2),Y(),Fe()),2&n){const e=t.ngIf;U(2),zn(e)}}function ete(n,t){if(1&n&&(Ne(0),V(1,"div",5),dt(2,"img",6),V(3,"span"),Pe(4,"Uploading..."),Y()(),Fe()),2&n){const e=j(2);U(2),z("src",e.Assets.Gifs.Loading,It)}}function tte(n,t){if(1&n&&ue(0,ete,5,1,"ng-container",1),2&n){const e=j(),r=Wt(6);z("ngIf",e.isUploading)("ngIfElse",r)}}function nte(n,t){if(1&n){const e=ft();V(0,"div",7),De("click",function(){return ve(e),we(j().requestPhotoCapture())}),dt(1,"img",8),V(2,"span",9),Pe(3,"Capture Face Photo"),Y()()}if(2&n){const e=j();U(1),z("src",e.Assets.Images.FaceScan,It)}}let XI=class bS{constructor(){this.setting={IsDefaultToFrontCamera:!0,DisableSwitchingCamera:!1},this.requestFacescan=new Qe,this.submitPhoto=new Qe,this.error$=new bt(void 0),this.Assets=Ti,this.subject=new bt(void 0),this.isUploading=!1,this.uploadSubject=new bt(void 0)}get error(){return this.error$.getValue()}set error(t){this.error$.next(t),setTimeout(()=>{this.error$.next(void 0)},3e3)}requestPhotoCapture(){this.subject.unsubscribe(),this.subject=new bt(void 0),this.subject.pipe(Dn(this)).subscribe({next:t=>{t&&(this.subject.unsubscribe(),this.submitPhotoFile(t))},error:t=>{this.error=t.message||t}}),this.requestFacescan.next({setting:this.setting,subject:this.subject})}submitPhotoFile(t){this.uploadSubject.unsubscribe(),this.uploadSubject=new bt(void 0),this.uploadSubject.pipe(Dn(this)).subscribe(e=>{if(e){this.isUploading=e.uploadStatus===Ko.Uploading;const r=e.uploadError||null;r&&(this.error=r)}}),this.submitPhoto.next({files:[new ov(t)],subscriber:this.uploadSubject})}static#e=this.\u0275fac=function(e){return new(e||bS)};static#t=this.\u0275cmp=dn({type:bS,selectors:[["chat-face"]],inputs:{setting:"setting"},outputs:{requestFacescan:"requestFacescan",submitPhoto:"submitPhoto"},standalone:!0,features:[ii],decls:7,vars:4,consts:[[2,"width","100%","height","100%","box-sizing","border-box","max-width","300px","padding","4px"],[4,"ngIf","ngIfElse"],["noerror",""],["startcapture",""],[2,"color","#cc0000","margin","0"],[1,"uploading"],["alt","Loading","srcset","",3,"src"],[1,"button",3,"click"],["alt","Camera icon","srcset","",3,"src"],[2,"color","var(--default-text-color)"]],template:function(e,r){if(1&e&&(V(0,"div",0),ue(1,$ee,3,1,"ng-container",1),wn(2,"async"),ue(3,tte,1,2,"ng-template",null,2,sn),ue(5,nte,4,1,"ng-template",null,3,sn),Y()),2&e){const i=Wt(4);U(1),z("ngIf",bn(2,2,r.error$))("ngIfElse",i)}},dependencies:[_r,Fr,Aa],styles:[".buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:16px}.button[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;padding:8px 16px 8px 8px;border-radius:4px;box-shadow:#0000001a 0 1px 3px 1px;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}.uploading[_ngcontent-%COMP%]{height:48px;cursor:pointer;background-color:#fff;box-sizing:border-box;display:flex;align-items:center;justify-content:center;gap:8px;width:-moz-fit-content;width:fit-content;max-width:100%}.uploading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;-webkit-user-select:none;user-select:none}.uploading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:400}"]})};XI=ke([Co()],XI);const rte=function(){return{$implicit:!1}};function ite(n,t){1&n&&Cr(0,18),2&n&&(j(),z("ngTemplateOutlet",Wt(19))("ngTemplateOutletContext",ya(2,rte)))}const ote=function(){return{$implicit:!0}};function ste(n,t){1&n&&Cr(0,18),2&n&&(j(),z("ngTemplateOutlet",Wt(19))("ngTemplateOutletContext",ya(2,ote)))}function ate(n,t){1&n&&Cr(0,19),2&n&&(j(),z("ngTemplateOutlet",Wt(21)))}function ute(n,t){1&n&&Cr(0,19),2&n&&(j(),z("ngTemplateOutlet",Wt(21)))}const cte=function(){return{MaxFileSizeInMb:200}},bf=function(n){return{$implicit:n}};function lte(n,t){if(1&n&&Cr(0,18),2&n){const e=j();z("ngTemplateOutlet",Wt(23))("ngTemplateOutletContext",fr(3,bf,e.action.ActionAttachmentAttributes||ya(2,cte)))}}const KL=function(){return{MaxFileSizeInMb:200,DurationInSec:60}};function dte(n,t){if(1&n&&Cr(0,18),2&n){const e=j();z("ngTemplateOutlet",Wt(25))("ngTemplateOutletContext",fr(3,bf,e.action.ActionAttachmentAttributes||ya(2,KL)))}}function fte(n,t){if(1&n&&Cr(0,18),2&n){const e=j();z("ngTemplateOutlet",Wt(27))("ngTemplateOutletContext",fr(3,bf,e.action.ActionAttachmentAttributes||ya(2,KL)))}}const hte=function(){return{ScheduleEventLink:"",ScheduleCompleteRedirectionLink:"",OnCompleteMessageFormat:""}};function pte(n,t){if(1&n&&Cr(0,18),2&n){const e=j();z("ngTemplateOutlet",Wt(29))("ngTemplateOutletContext",fr(3,bf,e.action.ActionScheduleAttributes||ya(2,hte)))}}const gte=function(){return{DisableSwitchingCamera:!1,IsDefaultToFrontCamera:!0}};function mte(n,t){if(1&n&&Cr(0,18),2&n){const e=j();z("ngTemplateOutlet",Wt(31))("ngTemplateOutletContext",fr(3,bf,e.action.CaptureImageDataAttributes||ya(2,gte)))}}function vte(n,t){1&n&&Cr(0,19),2&n&&(j(),z("ngTemplateOutlet",Wt(33)))}function yte(n,t){1&n&&Cr(0,19),2&n&&(j(),z("ngTemplateOutlet",Wt(35)))}const wte=function(){return{Title:"Enter your pin",PinLength:4,IsAlphaNumericPin:!1}};function bte(n,t){if(1&n&&Cr(0,18),2&n){const e=j();z("ngTemplateOutlet",Wt(37))("ngTemplateOutletContext",fr(3,bf,e.action.ReadPinCodeAttributes||ya(2,wte)))}}const Ate=function(){return{IsDefaultToFrontCamera:!0,DisableSwitchingCamera:!1}};function xte(n,t){if(1&n&&Cr(0,18),2&n){const e=j();z("ngTemplateOutlet",Wt(39))("ngTemplateOutletContext",fr(3,bf,e.action.CaptureImageDataAttributes||ya(2,Ate)))}}function Cte(n,t){if(1&n){const e=ft();Ne(0),V(1,"span",20),De("click",function(){return ve(e),we(j().onSubmitReply("SKIP"))}),Pe(2,"SKIP"),Y(),Fe()}}function _te(n,t){if(1&n){const e=ft();Ne(0),V(1,"chat-choice",21),De("choiceSelected",function(i){ve(e);const o=j(2);return we(o.onSubmitReply(i,o.PreviewTypes.Pill))}),wn(2,"choices"),Y(),Fe()}if(2&n){const e=j().$implicit,r=j();U(1),z("primaryColor",r.primaryColor)("choices",bn(2,3,r.action.ActionChoiceAttributes.Choices))("isMultiChoice",e)}}function Ete(n,t){if(1&n&&ue(0,_te,3,5,"ng-container",6),2&n){const e=j();z("ngIf",e.action.ActionChoiceAttributes&&e.action.ActionChoiceAttributes.Choices)}}const Dte=function(){return[]};function Ite(n,t){if(1&n&&dt(0,"chat-record",22),2&n){const e=j();z("primaryColor",e.primaryColor)("records",(null==e.action.ActionListAttributes?null:e.action.ActionListAttributes.RecordList)||ya(2,Dte))}}function Ste(n,t){if(1&n){const e=ft();V(0,"chat-upload",23),De("fileSubmitted",function(i){return ve(e),we(j().onFileSelected(i))}),Y()}if(2&n){const e=t.$implicit,r=j();z("data",e)("primaryColor",r.primaryColor)}}function Tte(n,t){if(1&n){const e=ft();V(0,"chat-audio-recorder",24),De("fileSubmitted",function(i){return ve(e),we(j().onFileSelected(i))}),Y()}if(2&n){const e=t.$implicit;z("primaryColor",j().primaryColor)("maxFileSizeInMb",e.MaxFileSizeInMb)("maxRecordingDurationInSec",e.DurationInSec)}}function Rte(n,t){if(1&n){const e=ft();V(0,"chat-video-recorder",25),De("readyToRecordVideo",function(i){return ve(e),we(j().startRecordingVideo(i))})("fileSubmitted",function(i){return ve(e),we(j().onFileSelected(i))}),Y()}if(2&n){const e=t.$implicit;z("primaryColor",j().primaryColor)("maximumFileSizeInMb",e.MaxFileSizeInMb)("durationInSec",e.DurationInSec)}}function Mte(n,t){if(1&n){const e=ft();V(0,"chat-schedular-view",26),De("requestOpenAppointment",function(i){return ve(e),we(j().onOpenAppointmentWindowRequest(i))})("submitReply",function(i){return ve(e),we(j().onReceiveScheduleRequest(i))}),Y()}2&n&&z("attribute",t.$implicit)}function kte(n,t){if(1&n){const e=ft();V(0,"chat-photo",27),De("capturePhotoRequested",function(i){return ve(e),we(j().onPhotoCaptureRequested(i))})("submitPhoto",function(i){return ve(e),we(j().onFileSelected(i))}),Y()}2&n&&z("disableSwitchingCamera",t.$implicit.DisableSwitchingCamera)}function Pte(n,t){if(1&n){const e=ft();V(0,"chat-location",28),De("geoLocationReceived",function(i){return ve(e),we(j().onGeoLocationReceived(i))}),Y()}}function Ote(n,t){if(1&n){const e=ft();V(0,"chat-scan",29),De("requestCodeScan",function(){return ve(e),we(j().onRequestCodeScan())}),Y()}}function Nte(n,t){if(1&n){const e=ft();V(0,"chat-pin",30),De("requestPin",function(i){return ve(e),we(j().onRequestPin(i))}),Y()}2&n&&z("setting",t.$implicit)}function Fte(n,t){if(1&n){const e=ft();V(0,"chat-face",31),De("requestFacescan",function(i){return ve(e),we(j().onRequestFacescan(i))})("submitPhoto",function(i){return ve(e),we(j().onFileSelected(i))}),Y()}2&n&&z("setting",t.$implicit)}let QL=(()=>{class n{constructor(){this.ChatActionTypes=fp,this.primaryColor="#215484",this.action={ActionType:fp.None},this.PreviewTypes=Ca,this.replyReceived=new Qe,this.fileSubmitted=new Qe,this.recordVideoRequested=new Qe,this.openAppointmentWindow=new Qe,this.scheduleRequest=new Qe,this.capturePhotoRequested=new Qe,this.geoLocationReceived=new Qe,this.requestCodeScan=new Qe,this.requestPin=new Qe,this.requestFaceScan=new Qe}trackChoice(e,r){return`${e}-${r}`}onSubmitReply(e,r){this.replyReceived.next({reply:e,type:r||Ca.Default})}onFileSelected(e){this.fileSubmitted.next(e)}startRecordingVideo(e){this.action.ActionAttachmentAttributes&&this.recordVideoRequested.next({subject:e,attribute:this.action.ActionAttachmentAttributes})}onOpenAppointmentWindowRequest(e){this.openAppointmentWindow.next(e)}onReceiveScheduleRequest(e){this.scheduleRequest.next(e)}onPhotoCaptureRequested(e){this.capturePhotoRequested.next({attribute:this.action.CaptureImageDataAttributes||{DisableSwitchingCamera:!1,IsDefaultToFrontCamera:!0},subject:e})}onGeoLocationReceived(e){this.geoLocationReceived.next(e)}onRequestCodeScan(){this.requestCodeScan.next()}onRequestPin(e){this.requestPin.next(e)}onRequestFacescan(e){this.requestFaceScan.next(e)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["chat-action"]],inputs:{primaryColor:"primaryColor",action:"action"},outputs:{replyReceived:"replyReceived",fileSubmitted:"fileSubmitted",recordVideoRequested:"recordVideoRequested",openAppointmentWindow:"openAppointmentWindow",scheduleRequest:"scheduleRequest",capturePhotoRequested:"capturePhotoRequested",geoLocationReceived:"geoLocationReceived",requestCodeScan:"requestCodeScan",requestPin:"requestPin",requestFaceScan:"requestFaceScan"},standalone:!0,features:[ii],decls:40,vars:15,consts:[[1,"action-container"],[2,"width","100%","height","100%","display","flex","flex-direction","column","gap","8px"],[2,"flex","1"],[3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[4,"ngIf"],["choiceview",""],["recordview",""],["uploadfile",""],["recordaudio",""],["recordVideo",""],["makeAppointment",""],["takephoto",""],["takelocation",""],["codescan",""],["readpin",""],["facescan",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[1,"skip-button",2,"flex","0 1 auto","padding","0 8px","box-sizing","border-box",3,"click"],[3,"primaryColor","choices","isMultiChoice","choiceSelected"],[3,"primaryColor","records"],[3,"data","primaryColor","fileSubmitted"],[3,"primaryColor","maxFileSizeInMb","maxRecordingDurationInSec","fileSubmitted"],[3,"primaryColor","maximumFileSizeInMb","durationInSec","readyToRecordVideo","fileSubmitted"],[3,"attribute","requestOpenAppointment","submitReply"],[3,"disableSwitchingCamera","capturePhotoRequested","submitPhoto"],[3,"geoLocationReceived"],[3,"requestCodeScan"],[3,"setting","requestPin"],[3,"setting","requestFacescan","submitPhoto"]],template:function(r,i){1&r&&(V(0,"div",0)(1,"div",1)(2,"div",2),Ne(3,3),ue(4,ite,1,3,"ng-container",4),ue(5,ste,1,3,"ng-container",4),ue(6,ate,1,1,"ng-container",5),ue(7,ute,1,1,"ng-container",5),ue(8,lte,1,5,"ng-container",4),ue(9,dte,1,5,"ng-container",4),ue(10,fte,1,5,"ng-container",4),ue(11,pte,1,5,"ng-container",4),ue(12,mte,1,5,"ng-container",4),ue(13,vte,1,1,"ng-container",5),ue(14,yte,1,1,"ng-container",5),ue(15,bte,1,5,"ng-container",4),ue(16,xte,1,5,"ng-container",4),Fe(),Y(),ue(17,Cte,3,0,"ng-container",6),Y()(),ue(18,Ete,1,1,"ng-template",null,7,sn),ue(20,Ite,1,3,"ng-template",null,8,sn),ue(22,Ste,1,2,"ng-template",null,9,sn),ue(24,Tte,1,3,"ng-template",null,10,sn),ue(26,Rte,1,3,"ng-template",null,11,sn),ue(28,Mte,1,1,"ng-template",null,12,sn),ue(30,kte,1,1,"ng-template",null,13,sn),ue(32,Pte,1,0,"ng-template",null,14,sn),ue(34,Ote,1,0,"ng-template",null,15,sn),ue(36,Nte,1,1,"ng-template",null,16,sn),ue(38,Fte,1,1,"ng-template",null,17,sn)),2&r&&(U(3),z("ngSwitch",i.action.ActionType),U(1),z("ngSwitchCase",i.ChatActionTypes.ChooseOption),U(1),z("ngSwitchCase",i.ChatActionTypes.ChooseOptions),U(1),z("ngSwitchCase",i.ChatActionTypes.ShowRecord),U(1),z("ngSwitchCase",i.ChatActionTypes.ShowRecords),U(1),z("ngSwitchCase",i.ChatActionTypes.UploadFile),U(1),z("ngSwitchCase",i.ChatActionTypes.RecordAudio),U(1),z("ngSwitchCase",i.ChatActionTypes.RecordVideo),U(1),z("ngSwitchCase",i.ChatActionTypes.CreateSchedule),U(1),z("ngSwitchCase",i.ChatActionTypes.TakePicture),U(1),z("ngSwitchCase",i.ChatActionTypes.ShareLocation),U(1),z("ngSwitchCase",i.ChatActionTypes.ScanQRCode),U(1),z("ngSwitchCase",i.ChatActionTypes.ReadPIN),U(1),z("ngSwitchCase",i.ChatActionTypes.FaceCapture),U(1),z("ngIf",i.action.ActionType!==i.ChatActionTypes.ShowRecord&&i.action.ActionType!==i.ChatActionTypes.ShowRecords))},dependencies:[_r,Fr,Qm,Nw,Gk,XI,Zee,Jee,YI,Xee,qI,QI,VI,HI,qL,jI,KI],styles:[".action-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow-x:hidden;margin-top:8px}.skip-button[_ngcontent-%COMP%]{color:var(--default-text-color-lighter);font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:400;width:-moz-fit-content;width:fit-content}.skip-button[_ngcontent-%COMP%]:hover{color:var(--default-text-color)}"]})}return n})(),Bte=(()=>{class n{constructor(){this.message="",this._queryText=void 0,this.onMessageSelected=new bt(void 0)}get queryText(){return this._queryText?this._queryText:this.message}set queryText(e){this._queryText=e}onSelection(){this.onMessageSelected.next({message:this.message,queryText:this.queryText})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["suggestion-item"]],inputs:{message:"message",queryText:"queryText"},outputs:{onMessageSelected:"onMessageSelected"},decls:2,vars:1,consts:[[1,"chat-suggestion",3,"click"]],template:function(r,i){1&r&&(V(0,"div",0),De("click",function(){return i.onSelection()}),Pe(1),Y()),2&r&&(U(1),Vs(" ",i.message,"\n"))},styles:[".chat-suggestion[_ngcontent-%COMP%]{border-radius:12px 6px 0 0;border:1px solid;padding:6px 8px;margin:4px;border-color:var(--suggestion-border-color);color:var(--suggestion-foreground-color);font-weight:300;font-size:12px;line-height:16px}.chat-suggestion[_ngcontent-%COMP%]:hover{border-color:var(--suggestion-border-color-hover);color:var(--suggestion-foreground-color-hover);font-weight:400;cursor:pointer}"]})}return n})();function Lte(n,t){if(1&n&&(Ne(0),V(1,"div",7),dt(2,"markdown",8),Y(),Fe()),2&n){const e=j(2);U(2),z("data",e.message.message)}}function Ute(n,t){if(1&n&&(Ne(0),V(1,"div",11),Pe(2),Y(),Fe()),2&n){const e=t.$implicit;U(2),zn(e)}}function zte(n,t){if(1&n&&(Ne(0),V(1,"div",9),ue(2,Ute,3,1,"ng-container",10),Y(),Fe()),2&n){const e=t.ngIf,r=j(2);U(2),z("ngForOf",e)("ngForTrackBy",r.trackChoice.bind(r))}}function jte(n,t){if(1&n&&(Ne(0),Pe(1),Fe()),2&n){const e=j().ngIf;U(1),Vs(" Submitted ",e.length," files. ")}}function Hte(n,t){1&n&&Pe(0," Submitted 1 file. ")}function Wte(n,t){if(1&n&&(Ne(0),V(1,"span",12),ue(2,jte,2,1,"ng-container",13),ue(3,Hte,1,0,"ng-template",null,14,sn),Y(),Fe()),2&n){const e=t.ngIf,r=Wt(4);U(2),z("ngIf",e.length>1)("ngIfElse",r)}}function Vte(n,t){if(1&n&&(Ne(0),V(1,"div",15)(2,"div",16),Pe(3),Y()(),Fe()),2&n){const e=j(2);U(3),Vs(" ",e.message.message," ")}}function qte(n,t){1&n&&(Ne(0),V(1,"span",12),Pe(2," Shared current location. "),Y(),Fe())}function Gte(n,t){1&n&&(Ne(0),dt(1,"div",19),Fe())}function Kte(n,t){if(1&n&&(Ne(0),V(1,"div",17),ue(2,Gte,2,0,"ng-container",18),Y(),Fe()),2&n){const e=t.ngIf;U(2),z("ngForOf",e)}}const mA=function(n){return{"background-color":n}},JI=function(n){return{color:n}};function Qte(n,t){if(1&n&&(Ne(0),V(1,"div",4)(2,"div",5)(3,"span",6),Pe(4),Y()(),ue(5,Lte,3,1,"ng-container",1),ue(6,zte,3,2,"ng-container",1),wn(7,"choices"),ue(8,Wte,5,2,"ng-container",1),wn(9,"attachments"),ue(10,Vte,4,1,"ng-container",1),ue(11,qte,3,0,"ng-container",1),wn(12,"geolocation"),ue(13,Kte,3,1,"ng-container",1),Y(),Fe()),2&n){const e=j();U(1),z("@item",void 0)("ngStyle",fr(16,mA,e.userColorProfile.backgroundColor)),U(2),z("ngStyle",fr(18,JI,e.userColorProfile.labelColor)),U(1),zn(e.user),U(1),z("ngIf",e.message.style===e.MessagePreviewTypes.Default),U(1),z("ngIf",e.message.style===e.MessagePreviewTypes.Pill&&bn(7,10,e.message.message)),U(2),z("ngIf",e.message.style===e.MessagePreviewTypes.Attachment&&bn(9,12,e.message.message)),U(2),z("ngIf",e.message.style===e.MessagePreviewTypes.Code&&e.message.message),U(1),z("ngIf",e.message.style===e.MessagePreviewTypes.Location&&bn(12,14,e.message.message)),U(2),z("ngIf",e.message.style===e.MessagePreviewTypes.Secret&&e.message.message&&e.getLengthRange(e.message.message.length))}}function Yte(n,t){if(1&n&&(Ne(0),V(1,"div",5)(2,"span",6),Pe(3),Y(),dt(4,"img",20),Y(),Fe()),2&n){const e=j(2);U(1),z("@item",void 0),U(1),z("ngStyle",fr(4,JI,e.botColorProfile.labelColor)),U(1),zn(e.bot),U(1),z("src",e.Assets.Gifs.Loading,It)}}function Xte(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",21),dt(2,"img",22),V(3,"div",7),Pe(4),Y()(),V(5,"div",23),De("click",function(){return ve(e),we(j(2).retryClicked())}),dt(6,"img",24),V(7,"span"),Pe(8,"Retry"),Y()(),Fe()}if(2&n){const e=j(2);U(2),z("src",e.Assets.Images.Warning,It),U(1),ri("color","#cc0000")("font-weight",500),U(1),Vs(" ",e.message.message," "),U(2),z("src",e.Assets.Images.Refresh,It)}}function Jte(n,t){if(1&n){const e=ft();Ne(0),V(1,"suggestion-item",26),De("onMessageSelected",function(i){return ve(e),we(j(3).onSuggestionSelected(i))}),Y(),Fe()}if(2&n){const e=t.$implicit;U(1),z("message",e)}}function Zte(n,t){if(1&n&&(Ne(0),V(1,"div",25),ue(2,Jte,2,1,"ng-container",18),Y(),Fe()),2&n){const e=j(2);U(1),z("ngStyle",fr(2,mA,e.botColorProfile.backgroundColor)),U(1),z("ngForOf",e.message.suggestions)}}function $te(n,t){if(1&n){const e=ft();Ne(0),V(1,"suggestion-item",27),De("onMessageSelected",function(i){return ve(e),we(j(3).onSuggestionSelected(i))}),Y(),Fe()}if(2&n){const e=t.$implicit;U(1),z("queryText",e.query_text)("message",e.display_text)}}function ene(n,t){if(1&n&&(Ne(0),V(1,"div",25),ue(2,$te,2,2,"ng-container",18),Y(),Fe()),2&n){const e=j(2);U(1),z("ngStyle",fr(2,mA,e.botColorProfile.backgroundColor)),U(1),z("ngForOf",e.message.suggestionObjects)}}function tne(n,t){if(1&n&&(Ne(0),V(1,"div",4),ue(2,Yte,5,6,"ng-container",13),ue(3,Xte,9,7,"ng-container",13),Y(),ue(4,Zte,3,4,"ng-container",1),ue(5,ene,3,4,"ng-container",1),Fe()),2&n){const e=j(),r=Wt(4),i=Wt(6);U(1),z("ngStyle",fr(7,mA,e.botColorProfile.backgroundColor)),U(1),z("ngIf",e.message.loading)("ngIfElse",r),U(1),z("ngIf",e.message.warning)("ngIfElse",i),U(1),z("ngIf",e.message.suggestions&&e.message.suggestions.length>0),U(1),z("ngIf",e.message.suggestionObjects&&e.message.suggestionObjects.length>0)}}function nne(n,t){if(1&n&&(V(0,"div",5)(1,"span",6),Pe(2),Y()()),2&n){const e=j();U(1),z("ngStyle",fr(2,JI,e.botColorProfile.labelColor)),U(1),zn(e.bot)}}function rne(n,t){if(1&n&&(Ne(0),V(1,"div",7),dt(2,"markdown",8),Y(),Fe()),2&n){const e=j(2);U(2),z("data",e.message.message)}}function ine(n,t){if(1&n&&(Ne(0),V(1,"div",11),Pe(2),Y(),Fe()),2&n){const e=t.$implicit;U(2),zn(e)}}function one(n,t){if(1&n&&(Ne(0),V(1,"div",9),ue(2,ine,3,1,"ng-container",10),Y(),Fe()),2&n){const e=t.ngIf,r=j(2);U(2),z("ngForOf",e)("ngForTrackBy",r.trackChoice.bind(r))}}function sne(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",0)(2,"chat-action",28),De("scheduleRequest",function(i){return ve(e),we(j(2).onRequestSearchSchedule(i))})("replyReceived",function(i){return ve(e),we(j(2).onActionReplied(i))})("recordVideoRequested",function(i){return ve(e),we(j(2).onRecordVideoRequested(i))})("fileSubmitted",function(i){return ve(e),we(j(2).onFileSelected(i))})("capturePhotoRequested",function(i){return ve(e),we(j(2).onCapturePhotoRequested(i))})("geoLocationReceived",function(i){return ve(e),we(j(2).onGeolocationReceived(i))})("requestCodeScan",function(){return ve(e),we(j(2).onRequestCodeScan())})("requestPin",function(i){return ve(e),we(j(2).onRequestPin(i))})("requestFaceScan",function(i){return ve(e),we(j(2).onRequestFaceScan(i))})("openAppointmentWindow",function(i){return ve(e),we(j(2).onOpenAppointmentWindowRequest(i))}),Y()(),Fe()}if(2&n){const e=j(2);U(2),z("primaryColor",e.botColorProfile.labelColor)("action",e.message.action)}}function ane(n,t){if(1&n&&(ue(0,rne,3,1,"ng-container",1),ue(1,one,3,2,"ng-container",1),wn(2,"choices"),ue(3,sne,3,2,"ng-container",1)),2&n){const e=j();z("ngIf",e.message.style===e.MessagePreviewTypes.Default),U(1),z("ngIf",e.message.style===e.MessagePreviewTypes.Pill&&bn(2,3,e.message.message)),U(2),z("ngIf",e.allowActionInteraction&&e.message.action)}}let une=(()=>{class n{constructor(e){this.mdService=e,this.Assets=Ti,this.MessagePreviewTypes=Ca,this.userColorProfile=new lp("#38383b","#0e1221","#c7c7c9"),this.botColorProfile=new lp("#1a1a9c","#0e1221","#FFFFFF"),this.user="user0123",this.bot="AI Assistant",this.isBotReply=!1,this.allowActionInteraction=!1,this._message=new dp("","",""),this.suggestionSelected=new bt(void 0),this.actionReplyReceived=new Qe,this.searchScheduleRequest=new Qe,this.fileSubmitted=new Qe,this.recordVideoRequested=new Qe,this.openAppointmentWindow=new Qe,this.capturePhotoRequested=new Qe,this.geolocationReceived=new Qe,this.retryRequested=new Qe,this.requestCodeScan=new Qe,this.requestPin=new Qe,this.requestFacescan=new Qe}ngOnInit(){this.mdService.renderer.image=(e,r,i)=>`\n                <div class="linked-messages">\n                    <a target="_blank" href="${e}">\n                        <img src="${e}" alt="${i}" >\n                    </a>\n                </div>\n            `,this.mdService.renderer.link=(e,r,i)=>function NZ(n){return/(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(?:channels\/[\w]+\/)?([\d]+)/.test(n)}(e)?`\n                            <div class="video-attachment">\n                                <iframe src="${function DZ(n){const e=/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i.exec(n),r=n.split?.("/")[4]?.split?.("?")[0];return e&&"https://player.vimeo.com/video/"+e[1]+"?h="+r}(e)}" frameborder="0" allowfullscreen></iframe>\n\n                            </div>\n                        `:function OZ(n){return/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})$/.test(n)}(e)&&function _Z(n){const e=n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=|shorts\/)([^#&?]*).*/);return!!e&&11===e[2].length}(e)?`\n                            <div class="video-attachment">\n                                <iframe src="${function IZ(n){return"https://www.youtube.com/embed/"+function EZ(n){const e=n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=|shorts\/)([^#&?]*).*/);return e&&11===e[2].length?e[2]:null}(n)}(e)}" frameborder="0" allowfullscreen></iframe>\n                            </div>\n                        `:`<a target="_blank" href=${e}>${r??i}</a>`}trackChoice(e,r){return`${e}-${r}`}trackAttachment(e,r){return e}set colorProfiles(e){e[xo.UserId]&&(this.userColorProfile=e[xo.UserId]),e[xo.BotId]&&(this.botColorProfile=e[xo.BotId])}set message(e){this._message=e,this.isBotReply=e.userId===xo.BotId}get message(){return this._message}onSuggestionSelected(e){this.suggestionSelected.next(e)}onActionReplied(e){this.actionReplyReceived.next(e)}onRequestSearchSchedule(e){this.searchScheduleRequest.next(e)}onFileSelected(e){this.fileSubmitted.next(e)}onRecordVideoRequested(e){this.recordVideoRequested.next(e)}onOpenAppointmentWindowRequest(e){this.openAppointmentWindow.next(e)}onCapturePhotoRequested(e){this.capturePhotoRequested.next(e)}retryClicked(){this.retryRequested.next()}onGeolocationReceived(e){this.geolocationReceived.next(e)}onRequestCodeScan(){this.requestCodeScan.next()}onRequestPin(e){this.requestPin.next(e)}getLengthRange(e){return Array.from({length:e},(r,i)=>i)}onRequestFaceScan(e){this.requestFacescan.next(e)}static#e=this.\u0275fac=function(r){return new(r||n)(lt(pA))};static#t=this.\u0275cmp=dn({type:n,selectors:[["chat-item"]],inputs:{user:"user",bot:"bot",colorProfiles:"colorProfiles",allowActionInteraction:"allowActionInteraction",message:"message"},outputs:{suggestionSelected:"suggestionSelected",actionReplyReceived:"actionReplyReceived",searchScheduleRequest:"searchScheduleRequest",fileSubmitted:"fileSubmitted",recordVideoRequested:"recordVideoRequested",openAppointmentWindow:"openAppointmentWindow",capturePhotoRequested:"capturePhotoRequested",geolocationReceived:"geolocationReceived",retryRequested:"retryRequested",requestCodeScan:"requestCodeScan",requestPin:"requestPin",requestFacescan:"requestFacescan"},decls:7,vars:2,consts:[[2,"width","100%"],[4,"ngIf"],["botLabel",""],["botMessage",""],[1,"chat-box",3,"ngStyle"],[2,"display","flex","flex-direction","row","flex-wrap","wrap","align-items","center"],[1,"chat-box-user",2,"margin","auto 0",3,"ngStyle"],[1,"chat-box-message"],[3,"data"],[1,"chat-choices"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"item-center","chat-choice"],[2,"flex","1","color","var(--default-text-color)","font-size","14px","font-weight","300"],[4,"ngIf","ngIfElse"],["singlefile",""],[1,"code-block",2,"flex","1"],[1,"code-content"],[1,"secret-container"],[4,"ngFor","ngForOf"],[1,"secret-item"],["alt","loading","srcset","",2,"margin-left","8px","height","48px",3,"src"],[1,"chat-box-error-section"],["alt","Warning sign",3,"src"],[1,"reload-button","mt-2",3,"click"],["alt","Refresh",3,"src"],[1,"chat-suggestion",3,"ngStyle"],[3,"message","onMessageSelected"],[3,"queryText","message","onMessageSelected"],[3,"primaryColor","action","scheduleRequest","replyReceived","recordVideoRequested","fileSubmitted","capturePhotoRequested","geoLocationReceived","requestCodeScan","requestPin","requestFaceScan","openAppointmentWindow"]],template:function(r,i){1&r&&(V(0,"div",0),ue(1,Qte,14,20,"ng-container",1),ue(2,tne,6,9,"ng-container",1),Y(),ue(3,nne,3,4,"ng-template",null,2,sn),ue(5,ane,4,5,"ng-template",null,3,sn)),2&r&&(U(1),z("ngIf",!i.isBotReply),U(1),z("ngIf",i.isBotReply))},dependencies:[ip,Fr,op,QL,WL,Bte,qL,Y$,X$],styles:[".chat-box[_ngcontent-%COMP%]{box-sizing:border-box;padding:16px 32px;--codeblockcolor: #e4f9ff;--highlightedtextcolor: #090d1a}.chat-box-user[_ngcontent-%COMP%]{font-size:12px;font-weight:400}.chat-box-error-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:16px}.chat-box-error-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:72px;padding:8px}.reload-button[_ngcontent-%COMP%]{display:flex;width:-moz-fit-content;width:fit-content;box-sizing:border-box;gap:8px;align-items:center;justify-content:flex-start;-webkit-user-select:none;user-select:none;cursor:pointer}.reload-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;box-sizing:border-box}.reload-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--default-text-color-light);-webkit-user-select:none;user-select:none}.reload-button[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:var(--default-text-color)}.chat-box-message[_ngcontent-%COMP%]{width:100%;font-size:14px;color:var(--default-text-color);font-weight:300}.chat-box-message-center[_ngcontent-%COMP%]{text-align:center}  .chat-box-message p{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;line-height:26px;font-weight:300}.chat-suggestion[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;padding:0 32px 16px;margin:-8px 0 0}  .chat-box-message .linked-messages{margin-top:8px;border-radius:8px;padding:8px;background-color:#f4f4f4;width:-moz-fit-content;width:fit-content}  .chat-box-message .linked-messages a{text-decoration:none}  .chat-box-message .linked-messages a img{margin:auto;max-height:400px;border-radius:8px;display:block}  .chat-box-message h1{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:26px!important;font-weight:600!important}  .chat-box-message h2{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:24px!important;font-weight:600!important}  .chat-box-message h3{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:22px!important;font-weight:600!important}  .chat-box-message h4{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:20px!important;font-weight:600!important}  .chat-box-message h5{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-size:18px!important;font-weight:600!important}  .chat-box-message strong{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-weight:600!important}  .chat-box-message b{margin:0!important;overflow-wrap:break-word!important;word-break:break-word!important;font-weight:600!important}  .chat-box-message em{margin:0!important;padding:4px;box-sizing:border-box;border:1px solid lightgray;border-radius:4px;background-color:var(--codeblockcolor);color:var(--highlightedtextcolor);overflow-wrap:break-word!important;word-break:break-word!important;font-weight:400!important}  .chat-box-message table{padding:8px;background:var(--codeblockcolor);border-radius:8px;margin:8px 0}  .chat-box-message table th{padding:4px 8px;text-align:left;font-weight:400}  .chat-box-message table td{padding:4px 8px;text-align:left}  .chat-box-message pre{padding:16px;background-color:var(--codeblockcolor);border-radius:8px}  .chat-box-message .attachment-messages{border-radius:8px;padding:4px;background-color:#fff;max-width:-moz-fit-content;max-width:fit-content;margin-top:8px;width:-moz-fit-content;width:fit-content;max-width:370px}  .chat-box-message .attachment-messages a{text-decoration:none;display:block;max-width:-moz-fit-content;max-width:fit-content}  .chat-box-message .attachment-messages a .message-body{display:flex;padding:8px;gap:10px;align-items:center;justify-content:flex-start;border-radius:4px}  .chat-box-message .attachment-messages a .message-body img{width:40px}  .chat-box-message .attachment-messages a .message-body span{text-overflow:ellipsis;overflow:hidden;width:90%;color:var(--default-text-color)}  .chat-box-message .video-attachment{width:100%;max-width:300px;padding:8px;box-shadow:#0002 0 1px 2px 1px;border-radius:4px;background-color:#fff;aspect-ratio:4/3;display:flex;align-items:center;justify-content:center;background-color:#000;margin-top:8px}  .chat-box-message .video-attachment video{width:calc(100% - 16px);height:calc(100% - 16px)}  .chat-box-message .video-attachment iframe{width:100%;height:100%;border-radius:4px;background-color:#fff}  .chat-box-message .audio-attachment{width:100%;max-width:300px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:30px;background:white;overflow:hidden;margin-top:8px}  .chat-box-message .audio-attachment audio{width:calc(100% - 16px);height:calc(100% - 16px)}.chat-choices[_ngcontent-%COMP%]{flex:1;display:flex;gap:8px;align-items:center;justify-content:flex-start;box-sizing:border-box;flex-wrap:wrap;margin-top:8px}.item-center[_ngcontent-%COMP%]{height:36px;display:flex;align-items:center;justify-content:flex-start;padding:0 16px;-webkit-user-select:none;user-select:none}.chat-choice[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;color:#fff;background-color:var(--default-text-color);box-shadow:#0000004d 0 1px 3px 1px;border-radius:6px;font-weight:400}.chat-attachments[_ngcontent-%COMP%]{flex:1;display:flex;gap:8px;align-items:center;justify-content:flex-start;box-sizing:border-box;flex-wrap:wrap;margin-top:8px}@media screen and (max-width: 768px){.chat-box[_ngcontent-%COMP%]{padding:16px 24px}.chat-box-user[_ngcontent-%COMP%]{font-size:14px}.chat-box-message[_ngcontent-%COMP%], .chat-choice[_ngcontent-%COMP%]{font-size:16px}}.code-block[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border-radius:5px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;gap:10px;cursor:pointer}.code-content[_ngcontent-%COMP%]{padding:10px;font-size:14px;font-weight:400;color:var(--default-text-color);box-sizing:border-box;word-wrap:break-word;border-left:5px solid var(--default-text-color)}.secret-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:flex-start;gap:8px;margin-top:8px}.secret-item[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:6px;background-color:var(--default-text-color)}"],data:{animation:[_6("item",[xP(":enter",[up({opacity:0}),bP(150,up({opacity:1}))]),xP(":leave",[up({opacity:1}),bP(100,up({opacity:0}))])])]}})}return n})();const cne=["chatUserInput"],lne=["chatbody"];function dne(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",9),De("click",function(){return ve(e),we(j().minimizeChatWindow())}),dt(2,"img",10),Y(),Fe()}if(2&n){const e=j();U(2),z("src",e.Assets.Images.Minimize,It)}}function fne(n,t){if(1&n){const e=ft();Ne(0),V(1,"chat-item",11),De("suggestionSelected",function(i){return ve(e),we(j().onSuggsetionSelected(i))})("actionReplyReceived",function(i){return ve(e),we(j().onActionSelected(i))})("recordVideoRequested",function(i){return ve(e),we(j().onRecordVideoRequested(i))})("fileSubmitted",function(i){return ve(e),we(j().onFileMessageReceived(i))})("retryRequested",function(){return ve(e),we(j().onRetryRequested())})("openAppointmentWindow",function(i){return ve(e),we(j().onMakeAppointmentRequested(i))})("capturePhotoRequested",function(i){return ve(e),we(j().openCapturePhoto(i))})("geolocationReceived",function(i){return ve(e),we(j().addGeolocationResponseFromUser(i))})("requestCodeScan",function(){return ve(e),we(j().onCodeScanRequested())})("requestPin",function(i){return ve(e),we(j().requestReadPin(i))})("requestFacescan",function(i){return ve(e),we(j().onRequestFaceScan(i))})("searchScheduleRequest",function(i){return ve(e),we(j().onScheduleSearchRequested(i))}),Y(),Fe()}if(2&n){const e=t.$implicit,r=t.index,i=j();U(1),z("id",e.id)("user",i.initialParameters.userName)("bot",i.initialParameters.botName)("colorProfiles",i.initialParameters.userColors)("allowActionInteraction",r===i.messages.length-1||void 0!==e.action&&(e.action.ActionType===i.ChatActionTypes.ShowRecord||e.action.ActionType===i.ChatActionTypes.ShowRecords))("message",e)}}function hne(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",12)(2,"textarea",13,14),De("input",function(i){return ve(e),we(j().onInputChange(i))})("keydown.enter",function(i){return i.preventDefault()})("keyup.enter",function(){return ve(e),we(j().onSubmitReplyEvent())}),Y(),V(4,"img",15),De("click",function(){return ve(e),we(j().onSubmitReplyEvent())}),Y(),V(5,"img",16),De("click",function(){return ve(e),we(j().onCancelUserRequest())}),Y()(),Fe()}if(2&n){const e=j();U(4),z("hidden",e.isLoading),U(1),z("hidden",!e.isLoading)}}function pne(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",17)(2,"div",18)(3,"div",19)(4,"span"),Pe(5,"Recording Video"),Y(),V(6,"img",20),De("click",function(){return ve(e),we(j().cancelRecording())}),Y()(),V(7,"div",21)(8,"video-recorder",22),De("recordCompleted",function(i){return ve(e),we(j().onRecordCompleted(i))})("cancel",function(i){return ve(e),we(j().cancelRecording(i))}),Y()()()(),Fe()}if(2&n){const e=j();U(8),z("duration",e.videoRecordAttributes.DurationInSec)("maxSize",e.videoRecordAttributes.MaxFileSizeInMb)}}function gne(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",17)(2,"div",18)(3,"div",19)(4,"span"),Pe(5,"Make An Appointment"),Y(),V(6,"img",20),De("click",function(){return ve(e),we(j().closeAppointment())}),Y()(),V(7,"div",21)(8,"iframe-preview",23),De("errorReceived",function(i){return ve(e),we(j().onErrorfromIframe(i))}),Y()()()(),Fe()}if(2&n){const e=j();U(8),z("openingLink",e.scheduleAttributes.ScheduleEventLink)}}function mne(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",17)(2,"div",18)(3,"div",19)(4,"span"),Pe(5,"Capture Photo"),Y(),V(6,"img",20),De("click",function(){return ve(e),we(j().closeCapturePhoto())}),Y()(),V(7,"div",21)(8,"web-cam",24),De("captureCompleted",function(i){return ve(e),we(j().onCaptureCompleted(i))}),Y()()()(),Fe()}2&n&&(U(8),z("autocapture",!1)("allowOverlay",!1))}function vne(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",17)(2,"div",18)(3,"div",19)(4,"span"),Pe(5,"Scan Code"),Y(),V(6,"img",20),De("click",function(){return ve(e),we(j().closeCodeScanning())}),Y()(),V(7,"div",21)(8,"scan-code",25),De("scanCompleted",function(i){return ve(e),we(j().onScanCompleted(i))}),Y()()()(),Fe()}}function yne(n,t){if(1&n){const e=ft();Ne(0),V(1,"alpha-numeric-pin",28),De("dismiss",function(){return ve(e),we(j(2).onCanceledReadPin())})("pinReady",function(i){return ve(e),we(j(2).onPinready(i))}),Y(),Fe()}if(2&n){const e=j(2);U(1),z("title",e.pinSetting.Title)("subtitle",e.pinSetting.Subtitle)("length",e.pinSetting.PinLength)}}function wne(n,t){if(1&n){const e=ft();Ne(0),V(1,"numeric-pin",28),De("dismiss",function(){return ve(e),we(j(2).onCanceledReadPin())})("pinReady",function(i){return ve(e),we(j(2).onPinready(i))}),Y(),Fe()}if(2&n){const e=j(2);U(1),z("title",e.pinSetting.Title)("subtitle",e.pinSetting.Subtitle)("length",e.pinSetting.PinLength)}}function bne(n,t){if(1&n&&(Ne(0),V(1,"div",26),De("click",function(r){return r.stopImmediatePropagation()}),V(2,"div",27),ue(3,yne,2,3,"ng-container",5),ue(4,wne,2,3,"ng-container",5),Y()(),Fe()),2&n){const e=j();U(3),z("ngIf",e.pinSetting.IsAlphaNumericPin),U(1),z("ngIf",!e.pinSetting.IsAlphaNumericPin)}}function Ane(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",17)(2,"div",18)(3,"div",19)(4,"span"),Pe(5,"Capture Face Photo"),Y(),V(6,"img",20),De("click",function(){return ve(e),we(j().onFaceScanCanceled())}),Y()(),V(7,"div",21)(8,"lib-face-camera-lib",29),De("faceImageReceived",function(i){return ve(e),we(j().onFaceScanCompleted(i))}),Y()()()(),Fe()}if(2&n){const e=j();U(8),z("allowMultipleFace",!1)("expectedFaceDirection",e.FaceDirections.Straight)}}const xne=function(n){return{"background-color":n}};let YL=(()=>{class n{constructor(){this.initialParameters=new eE("CloudApper AI","user0123","AI Assistant",new $_("#1960d1","#ffffff","#f2f2f2"),{},!1),this.messages=[],this.isLoading=!1,this.allowChatInput=!0,this.ChatActionTypes=fp,this.submitFileMessage=new Qe,this.cancelUserRequest=new Qe,this.userReplySubmitted=new bt(void 0),this.chatMinimizeRequestReceived=new bt(!1),this.allowMinimize=!0,this.isRecordingVideo=!1,this.isOpenAppointment=!1,this.fileUploadObserver=void 0,this.Assets=Ti,this.isPhotoCapturing=!1,this.capturePhotoObserver=void 0,this.isScanningCode=!1,this.isRequestingReadPin=!1,this.pinSetting={Title:"Enter your pin",PinLength:4,IsAlphaNumericPin:!1},this.isScanningFace=!1,this.FaceDirections=Ea}addWarningfromBot(e,r){const i=new dp(e,xo.BotId,r);i.warning=!0,this.updateMessageQueue(i)}reset(){this.messages=[],this.setReadyForUserReply(!0)}addReplyFromBot(e,r,i,o){const s=new dp(e,xo.BotId,r);s.suggestions=i,s.suggestionObjects=o,this.updateMessageQueue(s)}addActionReplyFromBot(e,r,i){const o=new dp(e,xo.BotId,r);o.action=i,this.updateMessageQueue(o)}setReadyForUserReply(e){this.isLoading=!e}addReplyFromUser(e,r,i){const o=new dp(lu(),xo.UserId,e);if(o.QueryText=r,o.style=i||Ca.Default,this.updateMessageQueue(o))return o}addGeolocationResponseFromUser(e){this.postUserReply(`${e.lat},${e.lng}`,void 0,Ca.Location)}addFileResponseFromUser(e){let r="";for(let i=0;i<e.length;i++)0!==i&&(r+=";"),r+=`${e[i].url}`;this.postUserReply(r,void 0,Ca.Attachment)}onRetryRequested(){this._lastQuery&&this.submitMessageWithoutShowing(this._lastQuery)}addLoadingMessage(){const e=new dp(lu(),xo.BotId,"");e.loading=!0,this.updateMessageQueue(e)}trackBy(e,r){return`${r.id}-${r.updateCount}`}updateMessageQueue(e){if(this.isLoading&&e.userId!==xo.BotId)return!1;const r=[...this.messages],i=r.findIndex(o=>o.loading);if(-1!==i)r[i]=e;else{const o=r.findIndex(s=>s.id===e.id);-1!==o?(r[o].updateCount+=1,r[o].message=e.message,r[o].warning=e.warning,r[o].action=e.action,r[o].suggestionObjects=e.suggestionObjects,r[o].suggestions=e.suggestions):r.push(e)}return this.action=r.length?r[r.length-1].action:void 0,this.allowChatInput=!this.action||this.action.ActionType===fp.ShowRecord||this.action.ActionType===fp.ShowRecords,this.messages=r,setTimeout(()=>{this.chatbody&&this.chatbody.nativeElement.scroll({top:this.chatbody.nativeElement.scrollHeight,left:0,behavior:"smooth"})},250),!0}submitMessageWithoutShowing(e){setTimeout(()=>{this.addLoadingMessage(),this.setReadyForUserReply(!1),this._lastQuery=e,this.userReplySubmitted.next(e)},250),this.chatUserInput&&(this.chatUserInput.nativeElement.value="")}postUserReply(e,r,i=Ca.Default){let o=e;const s=o.split("\n").map(u=>u.trim()).filter(u=>u.length);s.length&&(o=s.join("<br>"));const a=this.addReplyFromUser(o,r,i);a&&(setTimeout(()=>{this.addLoadingMessage(),this.setReadyForUserReply(!1),this._lastQuery=a.QueryText,this.userReplySubmitted.next(a.QueryText)},500),this.chatUserInput&&(this.chatUserInput.nativeElement.value="",this.chatUserInput.nativeElement.style.height="36px"))}onSubmitReplyEvent(){if(this.chatUserInput){const e=this.chatUserInput.nativeElement.value;e&&e.length>0&&this.postUserReply(e)}}onCancelUserRequest(){this.cancelUserRequest.next()}onSuggsetionSelected(e){e&&e.message.length>0&&this.postUserReply(e.message,e.queryText)}onActionSelected(e){this.postUserReply(e.reply,void 0,e.type)}minimizeChatWindow(){this.chatMinimizeRequestReceived.next(!0)}onInputChange(e){const r=e.target;r&&(r.style.height=r.value.length>0?`${Math.min(160,Math.max(36,r.scrollHeight))}px`:"36px")}onScheduleSearchRequested(e){this.isLoading||this.submitMessageWithoutShowing(e)}onRecordVideoRequested(e){this.videoRecordAttributes=e.attribute,this.videoRecordObserver=e.subject,this.isRecordingVideo=!0}cancelRecording(e){this.isRecordingVideo=!1,e?this.videoRecordObserver?.error(e):this.videoRecordObserver?.next(null)}onRecordCompleted(e){this.isRecordingVideo=!1,this.videoRecordObserver?.next(e)}onMakeAppointmentRequested(e){this.scheduleAttributes=e.attribute,this.scheduleObserver=e.subject,this.isOpenAppointment=!0}closeAppointment(){this.isOpenAppointment=!1,this.scheduleAttributes=void 0,this.scheduleObserver?.next(Xs.ok(!0))}onErrorfromIframe(e){this.scheduleObserver?.next(Xs.error(new Error(e))),this.isOpenAppointment=!1,this.scheduleAttributes=void 0}onFileMessageReceived(e){this.isLoading||(this.fileUploadObserver=e.subscriber,this.submitFileMessage.next(e.files))}updateFileInformation(e){this.fileUploadObserver?.next(e)}openCapturePhoto(e){this.photoAttributes=e.attribute,this.capturePhotoObserver=e.subject,this.isPhotoCapturing=!0}closeCapturePhoto(){this.isOpenAppointment=!1,this.photoAttributes=void 0,this.capturePhotoObserver?.next(void 0)}onCaptureCompleted(e){this.capturePhotoObserver?.next(e),this.isOpenAppointment=!1,this.photoAttributes=void 0}onCodeScanRequested(){this.scanResult=void 0,this.isScanningCode=!0}onScanCompleted(e){this.scanResult=e,this.isScanningCode=!0,this.postUserReply(e.code,void 0,Ca.Code)}closeCodeScanning(){this.scanResult=void 0,this.isScanningCode=!1}onCanceledReadPin(){this.isRequestingReadPin=!1}onPinready(e){this.postUserReply(e,void 0,Ca.Secret),this.isRequestingReadPin=!1}requestReadPin(e){this.pinSetting=e,this.isRequestingReadPin=!0}onRequestFaceScan(e){this.faceScanAttributes=e.setting,this.faceScanObserver=e.subject,this.isScanningFace=!0}onFaceScanCanceled(){this.faceScanAttributes=void 0,this.faceScanObserver=void 0,this.isScanningFace=!1}onFaceScanCompleted(e){this.faceScanObserver?.next(e),this.faceScanAttributes=void 0,this.faceScanObserver=void 0,this.isScanningFace=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=dn({type:n,selectors:[["ca-chat-box"]],viewQuery:function(r,i){if(1&r&&(Pr(cne,5),Pr(lne,5)),2&r){let o;kr(o=Or())&&(i.chatUserInput=o.first),kr(o=Or())&&(i.chatbody=o.first)}},inputs:{initialParameters:"initialParameters",allowMinimize:"allowMinimize"},outputs:{submitFileMessage:"submitFileMessage",cancelUserRequest:"cancelUserRequest",userReplySubmitted:"userReplySubmitted",chatMinimizeRequestReceived:"chatMinimizeRequestReceived"},decls:18,vars:14,consts:[[1,"chat-area"],[1,"chat-box-title"],[2,"width","100%"],[1,"chat-box-title-medium"],[1,"chat-box-title-small"],[4,"ngIf"],[1,"chat-box-body",3,"ngStyle"],["chatbody",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"chat-minimize",3,"click"],["alt","minimize window",3,"src"],[3,"id","user","bot","colorProfiles","allowActionInteraction","message","suggestionSelected","actionReplyReceived","recordVideoRequested","fileSubmitted","retryRequested","openAppointmentWindow","capturePhotoRequested","geolocationReceived","requestCodeScan","requestPin","requestFacescan","searchScheduleRequest"],[1,"chat-box-input"],["placeholder","Type here to search","spellcheck","true",1,"text",3,"input","keydown.enter","keyup.enter"],["chatUserInput",""],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAddJREFUaEPtV0tKA0EQfT1JzE8HElCXbvQC3kMQPIAH8BSiYCC6caur4ErFhVvBS4iiOxeC+CGdGZJMEk2XRFGjZDH9GbWxZ931qt571T1VDJZ/zPL64Qj8toPOAeeApgKuhTQF1A53DmhLqAngHNAUUDtcwYHJceChqZ3ZEIA0gWyhfMSIrjo5VMB5CIAM1aIEI00gXygdE7AAoAuwM+FhudesXyhlNxCkQ+A9vQBwScB2t813AfQN1BUbwgSBoWR0x8AOSNBWp9O4jl2FxkHDBIa5YI88Vuu26qdJupIcgQ8u7J4RVqIcnYDzQEPskaE/QOBL3o1sRlSDIGiYer2kCeSKpX0QlgB4imo+AWgwYvNRVL9RxPj0VxWgWJyaFqI/A4gxIkrB8+YAWgPgA8gDsfbtc8ZQi1q8quqItANxCfu+X+49pxcBShOQ9hgmiDAgmBrh3uAp3vGQWm23H2/j5hic+78ERrTQLEDrf76FrL/EQ7OQTKu+nSVUxjL9ahiGXPXSfk8qfQfkCdj6IyMrR4nXYe6QBG3aNMxZO07budBYv1ICli/18o9/shHS/4Fky5FHdwTkNTMb4Rwwq6c8mnNAXjOzEc4Bs3rKozkH5DUzG2G9Ay+zitkxUTv04QAAAABJRU5ErkJggg==","alt","Send Button",3,"hidden","click"],["src","data:image/png;base64,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","alt","Send Button",3,"hidden","click"],[1,"video-record-window"],[1,"video-record-body"],[1,"video-record-title"],["src","data:image/png;base64,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","alt","cancel-icon","srcset","",2,"width","32px",3,"click"],[1,"video-record-section"],[3,"duration","maxSize","recordCompleted","cancel"],[3,"openingLink","errorReceived"],[3,"autocapture","allowOverlay","captureCompleted"],[3,"scanCompleted"],[1,"popup-window",3,"click"],[1,"popup-body"],[3,"title","subtitle","length","dismiss","pinReady"],[3,"allowMultipleFace","expectedFaceDirection","faceImageReceived"]],template:function(r,i){1&r&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Pe(4),Y(),V(5,"div",4),Pe(6,"Powered by CloudApper AI"),Y()(),ue(7,dne,3,1,"ng-container",5),Y(),V(8,"div",6,7),ue(10,fne,2,6,"ng-container",8),Y(),ue(11,hne,6,2,"ng-container",5),ue(12,pne,9,2,"ng-container",5),ue(13,gne,9,1,"ng-container",5),ue(14,mne,9,2,"ng-container",5),ue(15,vne,9,0,"ng-container",5),ue(16,bne,5,2,"ng-container",5),ue(17,Ane,9,2,"ng-container",5),Y()),2&r&&(U(4),zn(i.initialParameters.title),U(3),z("ngIf",i.allowMinimize),U(1),z("ngStyle",fr(12,xne,i.initialParameters.windowColors.secondaryColor)),U(2),z("ngForOf",i.messages)("ngForTrackBy",i.trackBy),U(1),z("ngIf",i.allowChatInput),U(1),z("ngIf",i.isRecordingVideo&&i.videoRecordAttributes),U(1),z("ngIf",i.isOpenAppointment&&i.scheduleAttributes),U(1),z("ngIf",i.isPhotoCapturing&&i.photoAttributes),U(1),z("ngIf",i.isScanningCode&&!i.scanResult),U(1),z("ngIf",i.isRequestingReadPin),U(1),z("ngIf",i.isScanningFace))},dependencies:[ip,Fr,op,sv,HB,LJ,iA,sA,$B,eL,une],styles:[".chat-area[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;position:relative}.chat-box-title[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 24px;border-bottom:1px solid #e1e1e1;background-color:var(--chat-box-primary-color);color:var(--chat-box-on-primary-color)}.chat-box-title-medium[_ngcontent-%COMP%]{font-size:14px}.chat-box-title-small[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.chat-box-body[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 0 16px;background:#fafafa;overflow-y:auto}.chat-box-input[_ngcontent-%COMP%]{display:flex;padding:8px 16px;flex-direction:row;background:white;border-top:1px solid #f0f0f0}.chat-box-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;outline:none!important;border:none!important;height:36px;min-height:36px!important;max-height:160px!important;padding:0 16px!important;font-size:14px!important;font-weight:300!important;margin:0!important;resize:vertical;font-family:Be Vietnam Pro,sans-serif!important}.chat-box-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none!important;margin:0!important}.chat-box-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:36px;background-color:transparent;border:none;margin:0 0 0 8px}.chat-minimize[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:-16px}.chat-minimize[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:36px}.video-record-window[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:500;background-color:#ffffffc7;display:flex;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_move-in{0%{opacity:0;height:0}90%{height:95%}to{opacity:1;height:90%}}.video-record-body[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:90%;box-sizing:border-box;background-color:#fff;box-shadow:#0002 0 1px 5px 1px;border-radius:24px;overflow:hidden;z-index:5;opacity:1;animation:_ngcontent-%COMP%_move-in .4s ease-in}.video-record-title[_ngcontent-%COMP%]{height:48px;width:100%;z-index:5;box-sizing:border-box;box-shadow:#0002 0 1px 3px 1px;display:flex;align-items:center;justify-content:space-between;padding:0 16px;background-color:#fff;background-color:var(--chat-box-primary-color)}.video-record-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--chat-box-on-primary-color)}.video-record-title[_ngcontent-%COMP%]   tinted-img[_ngcontent-%COMP%]{width:32px;height:32px}.video-record-section[_ngcontent-%COMP%]{width:100%;height:calc(100% - 48px);background-color:#000}.popup-window[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:500;background-color:#ffffffc7;display:flex;align-items:center;justify-content:center}.popup-body[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;max-width:480px;height:90%;box-sizing:border-box;background-color:#fff;box-shadow:#0002 0 1px 5px 1px;border-radius:12px;overflow:hidden;z-index:5;opacity:1;animation:_ngcontent-%COMP%_move-in .4s ease-in}@media screen and (max-width: 480px){.chat-box-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:16px!important}}"]})}return n})();const Cne=["chatBox"];function _ne(n,t){if(1&n){const e=ft();Ne(0),V(1,"div",10),De("click",function(){return ve(e),we(j().tryToCloseWindow())}),Y(),Fe()}}const ZI=function(n){return{display:n}},Ene=function(n,t){return{background:n,display:t}};let $I=class AS{constructor(t){this.fileService=t,this._windowWidth=0,this.isBubbleDelayCompleted=!1,this._bubblestyle=tE.Callout,this._bubbletext="",this.bubblebackgroundcolor="#edefef",this.bubbleforegroundcolor="#414042",this._bubbledelay=3,this._addgloweffect=!1,this._brandlogo="data:image/png;base64,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",this.identifier="",this.knowledgebaseid="",this.instanceurl="",this._title="CloudApper AI",this._userName="user123",this._botName="AI Assistant",this._userTextColor="#414042",this._botTextColor="#414042",this._userLabelColor="#939598",this._botLabelColor="#00aaff",this._userBackgroundColor="#edefef",this._botBackgroundColor="#FFFFFF",this._chatWindowColor="#f2f2f2",this._chatPrimaryColor="#f2f2f2",this._chatOnPrimaryColor="#f2f2f2",this._cancelOnTouchOutside=!1,this.initialParameter=new eE("CloudApper AI","user0123","AI Assistant",new $_("#1960d1","#ffffff","#FFFFFF"),{},!1),this.chatBoxClass="chat-box-container",this.chatBoxBubbleClass="chat-box-bubble",this.chatBubbleTextClass="chat-box-bubble-text",this.chatContainerBubbleClass="chat-container-bubble",this._windowPosition=$w.BottomRight,this.welcomemessages=[],this.showChatWindow=!1,this.minimized=!1,this.closed=!1,this.Assets=Ti,this.chatDataService=new tb,this.chatService=new nv(this.chatDataService),this.setupChatWindowClass(this.windowposition),this.updateUserColorProfile(),this.updateBotColorProfile()}get windowWidth(){return this._windowWidth}set windowWidth(t){this._windowWidth=t,this.changeScrollState(!(this.showChatWindow&&t>480&&this.cancelontouchoutside))}onResize(t){this.windowWidth=window.innerWidth}ngAfterViewInit(){setTimeout(()=>{this.isBubbleDelayCompleted=!0,this.bubbletext.trim().length>0&&this.resetGlowEffect()},1e3*this.bubbledelay),this.windowWidth=window.innerWidth}ngOnChanges(t){(t.identifier||t.knowledgebaseId||t.aiURL)&&(this.identifier&&this.identifier.trim().length>0&&this.instanceurl&&this.instanceurl.trim()?(this.chatDataService=new fO(this.instanceurl.trim(),this.identifier.trim(),this.knowledgebaseid?this.knowledgebaseid.trim():""),this.fileService.updateEndpoint(this.instanceurl.trim(),this.identifier.trim())):this.chatDataService=new tb,this.chatService=new nv(this.chatDataService))}get bubblestyle(){return this._bubblestyle}set bubblestyle(t){this._bubblestyle=t,this.setupChatWindowClass(this.windowposition)}get bubbletext(){return this._bubbletext}set bubbletext(t){this._bubbletext=t,t.trim().length>0&&this.resetGlowEffect()}get bubbledelay(){return this._bubbledelay}set bubbledelay(t){t>1&&(this._bubbledelay=t)}get addgloweffect(){return this._addgloweffect}set addgloweffect(t){this._addgloweffect=t,this.setupChatWindowClass(this.windowposition)}get brandlogo(){return this._brandlogo}set brandlogo(t){this._brandlogo=t}get title(){return this._title}set title(t){this._title=t,this.initialParameter.title=t}get username(){return this._userName}set username(t){this._userName=t,this.initialParameter.userName=t}get botname(){return this._botName}set botname(t){this._botName=t,this.initialParameter.botName=t}get usertextcolor(){return this._userTextColor}set usertextcolor(t){this._userTextColor=t,this.updateUserColorProfile()}get bottextcolor(){return this._botTextColor}set bottextcolor(t){this._botTextColor=t,this.updateBotColorProfile()}get userlabelcolor(){return this._userLabelColor}set userlabelcolor(t){this._userLabelColor=t,this.updateUserColorProfile()}get botlabelcolor(){return this._botLabelColor}set botlabelcolor(t){this._botLabelColor=t,this.updateBotColorProfile()}get userbackgroundcolor(){return this._userBackgroundColor}set userbackgroundcolor(t){this._userBackgroundColor=t,this.updateUserColorProfile()}get botbackgroundcolor(){return this._botBackgroundColor}set botbackgroundcolor(t){this._botBackgroundColor=t,this.updateBotColorProfile()}get chatwindowcolor(){return this._chatWindowColor}set chatwindowcolor(t){this._chatWindowColor=t,this.initialParameter.windowColors.secondaryColor=t}get chatprimarycolor(){return this._chatPrimaryColor}set chatprimarycolor(t){this._chatPrimaryColor=t,this.initialParameter.windowColors.primaryColor=t}get chatonprimarycolor(){return this._chatOnPrimaryColor}set chatonprimarycolor(t){this._chatOnPrimaryColor=t,this.initialParameter.windowColors.onPrimaryColor=t}get cancelontouchoutside(){return this._cancelOnTouchOutside}set cancelontouchoutside(t){this._cancelOnTouchOutside=t,this.initialParameter.cancelOnClickOutside=t}changeScrollState(t){if(t)window.onscroll=function(){};else{const e=window.pageYOffset||document.documentElement.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft;window.onscroll=function(){window.scrollTo(r,e)}}}get initmsg(){return this._initMsg}set initmsg(t){this._initMsg=t}get windowposition(){return this._windowPosition}set windowposition(t){this._windowPosition=t,this.setupChatWindowClass(t)}setupChatWindowClass(t){switch(this.chatBoxBubbleClass=this.bubblestyle===tE.Callout?"chat-box-bubble-callout":"chat-box-bubble",t){case $w.BottomLeft:this.chatBoxClass="chat-box-container chat-box-container-left",this.chatBoxBubbleClass+=" chat-box-bubble-left",this.chatBubbleTextClass="chat-box-bubble-text chat-box-bubble-text-left",this.chatContainerBubbleClass="chat-container-bubble chat-container-bubble-left";break;case $w.BottomRight:this.chatBoxClass="chat-box-container chat-box-container-right",this.chatBoxBubbleClass+=" chat-box-bubble-right",this.chatBubbleTextClass="chat-box-bubble-text chat-box-bubble-text-right",this.chatContainerBubbleClass="chat-container-bubble chat-container-bubble-right"}this.addgloweffect&&(this.chatBoxBubbleClass+=" chat-box-bubble-animation")}resetGlowEffect(){this.addgloweffect&&(this.showChatWindow||this.isBubbleDelayCompleted&&this.bubbletext.trim().length>0)&&(this.addgloweffect=!1,this.setupChatWindowClass(this.windowposition))}updateUserColorProfile(){this.initialParameter.userColors[xo.UserId]=new lp(this.userlabelcolor,this.usertextcolor,this.userbackgroundcolor)}updateBotColorProfile(){this.initialParameter.userColors[xo.BotId]=new lp(this.botlabelcolor,this.bottextcolor,this.botbackgroundcolor)}onReceiveUserReply(t){if(t&&this.chatService){const e=lu();let r=!1;this.replyId=e,this.replyMessage=void 0;const i=this.chatService.submitUserReplyToBOT(t,()=>{r=!0,this.replyId=void 0,this.chatBox&&this.chatBox.setReadyForUserReply(!0),this.subscription=void 0});this.subscription=i.pipe(rO(()=>!r||this.closed),Dn(this)).subscribe({next:o=>{switch(o.isError){case!0:this.chatBox&&this.chatBox.addWarningfromBot(e,o.error.message);break;case!1:this.chatBox&&o.result&&(this.replyMessage=o.result.message,o.result.action?this.chatBox.addActionReplyFromBot(e,o.result.message,o.result.action):this.chatBox.addReplyFromBot(e,o.result.message,void 0,o.result.suggestions))}}})}}onSubmitFileMessage(t){const e=[...t],r=[];e.forEach(i=>{i.uploadStatus!==Ko.Uploaded&&r.push(this.fileService.uploadfile(i))}),iO(r.map(i=>i.pipe(ne(o=>({value:o,timestamp:Date.now()}))))).pipe(Dn(this)).subscribe({next:i=>{const o=i.reduce((a,u)=>!a||u.timestamp>a.timestamp?u:a),s=e.findIndex(a=>a.id===o.value.id);-1!==s&&e.splice(s,1,o.value),this.chatBox&&this.chatBox.updateFileInformation(o.value)},complete:()=>{void 0!==e.find(o=>o.uploadError)||this.chatBox&&this.chatBox.addFileResponseFromUser(e)}})}onCancelUserRequest(){this.chatBox&&this.replyId&&(this.replyMessage=this.replyMessage||"",this.chatBox.addReplyFromBot(this.replyId,this.replyMessage)),this.subscription?.unsubscribe(),this.subscription=void 0}tryToCloseWindow(){this.initialParameter.cancelOnClickOutside&&this.closeChatWindow()}openChatWindow(){this.showChatWindow=!0,this.resetGlowEffect(),this.bubbletext="",this.changeScrollState(this.windowWidth>480&&!this.cancelontouchoutside),setTimeout(()=>{if(this.chatBox&&!this.minimized){this.closed=!1,this.chatBox.reset(),this.chatService?.clearChatHistory();let t="";if(this.initmsg&&!nb(this.initmsg))return void this.chatBox.submitMessageWithoutShowing(this.initmsg);if(this.welcomemessages.length>0){const e=Math.floor(Math.random()*(this.welcomemessages.length-1));t=this.welcomemessages[e]}else t="Hello, how can I help you today?";this.chatBox.addReplyFromBot(lu(),t,this.suggestionmessages)}},100)}closeChatWindow(t=!1){this.chatBox&&(t?this.minimized=!0:(this.chatBox.reset(),this.minimized=!1,this.closed=!0),this.showChatWindow=!1,this.changeScrollState(!0))}static#e=this.\u0275fac=function(e){return new(e||AS)(lt(EO))};static#t=this.\u0275cmp=dn({type:AS,selectors:[["ca-ai-chat-popup-container"]],viewQuery:function(e,r){if(1&e&&Pr(Cne,5),2&e){let i;kr(i=Or())&&(r.chatBox=i.first)}},hostBindings:function(e,r){1&e&&De("resize",function(o){return r.onResize(o)},0,Y1)},inputs:{bubblestyle:"bubblestyle",bubbletext:"bubbletext",bubblebackgroundcolor:"bubblebackgroundcolor",bubbleforegroundcolor:"bubbleforegroundcolor",bubbledelay:"bubbledelay",addgloweffect:"addgloweffect",brandlogo:"brandlogo",identifier:"identifier",knowledgebaseid:"knowledgebaseid",instanceurl:"instanceurl",title:"title",username:"username",botname:"botname",usertextcolor:"usertextcolor",bottextcolor:"bottextcolor",userlabelcolor:"userlabelcolor",botlabelcolor:"botlabelcolor",userbackgroundcolor:"userbackgroundcolor",botbackgroundcolor:"botbackgroundcolor",chatwindowcolor:"chatwindowcolor",chatprimarycolor:"chatprimarycolor",chatonprimarycolor:"chatonprimarycolor",cancelontouchoutside:"cancelontouchoutside",initmsg:"initmsg",windowposition:"windowposition",welcomemessages:"welcomemessages",suggestionmessages:"suggestionmessages"},features:[Gc],decls:13,vars:40,consts:[[4,"ngIf"],[1,"container"],[3,"className"],[3,"className","ngStyle","click"],["alt","brand-logo","srcset","",3,"src"],[3,"className","ngStyle"],["alt","cancel-icon","srcset","",3,"src"],[2,"width","100%","height","100%"],[3,"initialParameters","allowMinimize","cancelUserRequest","userReplySubmitted","submitFileMessage","chatMinimizeRequestReceived"],["chatBox",""],[1,"chat-container-background",3,"click"]],template:function(e,r){1&e&&(ue(0,_ne,2,0,"ng-container",0),V(1,"div",1)(2,"div",2)(3,"div",3),De("click",function(){return r.openChatWindow()}),dt(4,"img",4),Y(),V(5,"div",5),Pe(6),Y(),V(7,"div",3),De("click",function(){return r.closeChatWindow()}),dt(8,"img",6),Y()(),V(9,"div",5)(10,"div",7)(11,"ca-chat-box",8,9),De("cancelUserRequest",function(){return r.onCancelUserRequest()})("userReplySubmitted",function(o){return r.onReceiveUserReply(o)})("submitFileMessage",function(o){return r.onSubmitFileMessage(o)})("chatMinimizeRequestReceived",function(){return r.closeChatWindow(!0)}),Y()()()()),2&e&&(z("ngIf",r.showChatWindow&&r.initialParameter.cancelOnClickOutside),U(1),ri("--chat-box-primary-color",r.initialParameter.windowColors.primaryColor)("--chat-box-on-primary-color",r.initialParameter.windowColors.onPrimaryColor)("--bubble-background-color",r.bubblebackgroundcolor)("--bubble-foreground-color",r.bubbleforegroundcolor)("--suggestion-border-color",r.botlabelcolor)("--suggestion-foreground-color",r.bottextcolor)("--suggestion-border-color-hover",r.bottextcolor)("--suggestion-foreground-color-hover",r.botlabelcolor),U(1),z("className",r.chatContainerBubbleClass),U(1),z("className",r.chatBoxBubbleClass)("ngStyle",fr(31,ZI,r.showChatWindow?"none":"flex")),U(1),z("src",r.brandlogo,It),U(1),z("className",r.chatBubbleTextClass)("ngStyle",fr(33,ZI,r.showChatWindow||!r.isBubbleDelayCompleted||r.bubbletext.trim().length<1?"none":"inline-block")),U(1),Vs(" ",r.bubbletext," "),U(1),z("className",r.chatBoxBubbleClass)("ngStyle",MC(35,Ene,r.initialParameter.windowColors.primaryColor,r.showChatWindow?"flex":"none")),U(1),z("src",r.Assets.Images.Cancel,It),U(1),z("className",r.chatBoxClass)("ngStyle",fr(38,ZI,r.showChatWindow?"block":"none")),U(2),z("initialParameters",r.initialParameter)("allowMinimize",!0))},dependencies:[Fr,op,YL],styles:['@import"https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600&display=swap";html{font-weight:300;font-size:14px}.container{all:initial;--bubble-background-color: "#edefef";--bubble-foreground-color: "#414042";--chat-box-primary-color: "#edefef";--chat-box-on-primary-color: "white";--suggestion-border-color: blue;--suggestion-foreground-color: black;--suggestion-border-color-hover: blue;--suggestion-foreground-color-hover: black;--font-family: "Be Vietnam Pro", sans-serif;--default-text-color: #0a0a11;--default-text-color-light: #090910cc;--default-text-color-lighter: #09091080;font-size:14px;line-height:24px}*{font-family:var(--font-family)!important;-webkit-font-smoothing:antialiased!important;font-variation-settings:normal!important}h1{font-size:26px!important;font-weight:400!important;color:var(--default-text-color)!important}h2{font-size:24px;font-weight:400!important;color:var(--default-text-color)!important}h3{font-size:22px;font-weight:400!important;color:var(--default-text-color)!important}h4{font-size:20px;font-weight:400!important;color:var(--default-text-color)!important}h5{font-size:18px;font-weight:400!important;color:var(--default-text-color)!important}.chat-container-background{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff1;z-index:18000}@media screen and (max-width: 480px){.container{font-size:16px;line-height:22px!important}}\n',".chat-box-container{height:80%;aspect-ratio:1.2/2;position:fixed;z-index:20000;border-radius:16px;overflow:hidden;animation:chat-container-grow .5s ease;box-shadow:#64646f33 0 7px 29px;min-width:360px}.chat-box-container-left{bottom:120px;left:64px}.chat-box-container-right{bottom:120px;right:64px}@keyframes chat-container-grow{0%{height:0%;transform:scale(0) translate(100%,100%)}10%{height:0%;transform:scale(.01) translateY(100%)}to{height:80%;transform:scale(1) translate(0)}}@media screen and (max-width:480px){.chat-box-container{width:100%;height:100%;border-radius:0;animation:chat-container-grow-small .5s ease}.chat-box-container-left{bottom:0;left:0}.chat-box-container-right{bottom:0;right:0}@keyframes chat-container-grow-small{0%{height:0%;transform:scale(0) translate(100%,100%)}10%{height:0%;transform:scale(.01) translateY(100%)}to{height:100%;transform:scale(1) translate(0)}}}\n",'.chat-box-bubble,.chat-box-bubble-callout{display:flex;position:absolute;justify-content:center;align-items:center;width:56px;height:56px;border-radius:50%;box-shadow:#6b6b6e33 0 7px 29px;transform:scale(1);transition:all .3s ease-in-out;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;background-color:var(--chat-box-primary-color)}.chat-box-bubble-callout:before{content:"";position:absolute;bottom:0;left:0;border-width:16px;border-radius:25%;border-style:solid;border-color:transparent transparent var(--chat-box-primary-color) transparent}.chat-box-bubble:hover,.chat-box-bubble-callout:hover{transform:scale(1.1)}@keyframes glow-bubble{0%{opacity:.9;transform:scale(1)}50%{opacity:1;transform:scale(1.1)}to{opacity:.9;transform:scale(1)}}.chat-box-bubble-animation{animation-name:glow-bubble;animation-duration:2s;animation-delay:.2s;animation-timing-function:ease-in-out;animation-iteration-count:infinite}.chat-box-bubble img,.chat-box-bubble-callout img{max-width:36px;animation:chat-box-bubble-img-animation .3s linear}@keyframes chat-box-bubble-img-animation{to{transform:scale(1)}0%{transform:scale(0)}}.chat-box-bubble-left{bottom:0;left:-12px}.chat-box-bubble-right{bottom:0;right:-12px}.chat-box-bubble-text{z-index:20000;position:absolute;bottom:50%;transform:translateY(50%);background-color:var(--bubble-background-color);color:var(--bubble-foreground-color);padding:10px 20px;border-radius:10px;width:max-content;max-width:200px}.chat-box-bubble-text-left{left:64px;animation:chat-bubble-text-grow-left .5s ease-in-out}.chat-box-bubble-text-right{right:64px;animation:chat-bubble-text-grow-right .5s ease-in-out}.chat-box-bubble-text-left:before{content:"";position:absolute;left:-10px;top:50%;border-width:10px;border-style:solid;border-color:var(--bubble-background-color) transparent transparent transparent;transform:translateY(-50%)}.chat-box-bubble-text-right:before{content:"";position:absolute;right:-10px;top:50%;border-width:10px;border-style:solid;border-color:var(--bubble-background-color) transparent transparent transparent;transform:translateY(-50%)}@keyframes chat-bubble-text-grow-left{0%{transform:scaleX(0) translateY(50%);opacity:0}10%{opacity:0;transform:scaleX(0) translate(-100%)}to{opacity:1;transform:scaleX(1) translate(0) translateY(50%)}}@keyframes chat-bubble-text-grow-right{0%{transform:scaleX(0) translateY(50%);opacity:0}10%{opacity:0;transform:scaleX(0) translate(100%)}to{opacity:1;transform:scaleX(1) translate(0) translateY(50%)}}.chat-container-bubble{width:48px;height:48px;position:fixed;z-index:20000}.chat-container-bubble-left{bottom:48px;left:64px}.chat-container-bubble-right{bottom:48px;right:64px}@media screen and (max-width:480px){.chat-container-bubble-left{bottom:24px;left:32px}.chat-container-bubble-right{bottom:24px;right:32px}}\n'],encapsulation:3})};$I=ke([Co()],$I);const vA={schedule(n,t){const e=setTimeout(n,t);return()=>clearTimeout(e)},scheduleBeforeRender(n){if(typeof window>"u")return vA.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return vA.schedule(n,16);const t=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(t)}};let eS;function One(n,t,e){let r=e;return function Ine(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&t.some((i,o)=>!("*"===i||!function Tne(n,t){if(!eS){const e=Element.prototype;eS=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&eS.call(n,t)}(n,i)||(r=o,0))),r}class Fne{constructor(t,e){this.componentFactory=e.get(Ft).resolveComponentFactory(t)}create(t){return new Bne(this.componentFactory,t)}}class Bne{constructor(t,e){this.componentFactory=t,this.injector=e,this.eventEmitters=new aL(1),this.events=this.eventEmitters.pipe(Kl(r=>Mf(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(Pn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=vA.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(t){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(t):this.componentRef.instance[t])}setInputValue(t,e,r){this.runInZone(()=>{r&&(e=r.call(this.componentRef?.instance,e)),null!==this.componentRef?function Rne(n,t){return n===t||n!=n&&t!=t}(e,this.getInputValue(t))&&(void 0!==e||!this.unchangedInputs.has(t))||(this.recordInputChange(t,e),this.unchangedInputs.delete(t),this.hasInputChanges=!0,this.componentRef.instance[t]=e,this.scheduleDetectChanges()):this.initialInputValues.set(t,e)})}initializeComponent(t){const e=hs.create({providers:[],parent:this.injector}),r=function Pne(n,t){const e=n.childNodes,r=t.map(()=>[]);let i=-1;t.some((o,s)=>"*"===o&&(i=s,!0));for(let o=0,s=e.length;o<s;++o){const a=e[o],u=One(a,t,i);-1!==u&&r[u].push(a)}return r}(t,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(e,r,t),this.viewChangeDetectorRef=this.componentRef.injector.get(gk),this.implementsOnChanges=function Sne(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Kd).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:t,transform:e})=>{this.initialInputValues.has(t)&&this.setInputValue(t,this.initialInputValues.get(t),e)}),this.initialInputValues.clear()}initializeOutputs(t){const e=this.componentFactory.outputs.map(({propName:r,templateName:i})=>t.instance[r].pipe(ne(s=>({name:i,value:s}))));this.eventEmitters.next(e)}callNgOnChanges(t){if(!this.implementsOnChanges||null===this.inputChanges)return;const e=this.inputChanges;this.inputChanges=null,t.instance.ngOnChanges(e)}markViewForCheck(t){this.hasInputChanges&&(this.hasInputChanges=!1,t.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=vA.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(t,e){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const r=this.inputChanges[t];if(r)return void(r.currentValue=e);const i=this.unchangedInputs.has(t),o=i?void 0:this.getInputValue(t);this.inputChanges[t]=new Ay(o,e,i)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}}class Lne extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function XL(n,t){const e=function kne(n,t){return t.get(Ft).resolveComponentFactory(n).inputs}(n,t.injector),r=t.strategyFactory||new Fne(n,t.injector),i=function Mne(n){const t={};return n.forEach(({propName:e,templateName:r,transform:i})=>{t[function Dne(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}(r)]=[e,i]}),t}(e);class o extends Lne{static#e=this.observedAttributes=Object.keys(i);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=r.create(this.injector||t.injector);e.forEach(({propName:u,transform:c})=>{if(!this.hasOwnProperty(u))return;const d=this[u];delete this[u],a.setInputValue(u,d,c)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,u,c,d){const[f,p]=i[a];this.ngElementStrategy.setInputValue(f,c,p)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const u=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(u)})}}return e.forEach(({propName:s,transform:a})=>{Object.defineProperty(o.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(u){this.ngElementStrategy.setInputValue(s,u,a)},configurable:!0,enumerable:!0})}),o}const Une=["simplechatBox"];let tS=class xS{constructor(t){this.fileService=t,this._identifier="",this._knowledgebaseid="",this._instanceurl="",this._title="CloudApper AI",this._userName="user123",this._botName="AI Assistant",this._userTextColor="#414042",this._botTextColor="#414042",this._userLabelColor="#939598",this._botLabelColor="#0393db",this._userBackgroundColor="#edefef",this._botBackgroundColor="#FFFFFF",this.initialParameter=new eE("CloudApper AI","user0123","AI Assistant",new $_("#0393db","#ffffff","#FFFFFF"),{},!1),this._welcomemessages=[],this._suggestionmessages=void 0,this.initateRequest=new bt(void 0),this.chatService=new nv(new tb),this.updateUserColorProfile(),this.updateBotColorProfile()}ngOnInit(){this.initateRequest.pipe(Dn(this),gA(100),ku()).subscribe(()=>{if(this.chatBox?.reset(),this.initmsg&&this.initmsg.length)this.chatBox?.submitMessageWithoutShowing(this.initmsg);else if(this.welcomemessages.length){const t=Math.round(Math.random()*(this.welcomemessages.length-1));this.chatBox?.addReplyFromBot(lu(),this.welcomemessages[t],this.suggestionmessages)}})}ngAfterViewInit(){this.initiateChatMessages()}setupChatDataService(){this.instanceurl.trim().length>0&&this.identifier.trim().length>0?(this.chatService=new nv(new fO(this.instanceurl,this.identifier,this.knowledgebaseid)),this.fileService.updateEndpoint(this.instanceurl,this.identifier)):this.chatService=new nv(new tb)}get identifier(){return this._identifier}set identifier(t){this._identifier=t,this.setupChatDataService()}get knowledgebaseid(){return this._knowledgebaseid}set knowledgebaseid(t){this._knowledgebaseid=t,this.setupChatDataService()}get instanceurl(){return this._instanceurl}set instanceurl(t){this._instanceurl=t,this.setupChatDataService()}get title(){return this._title}set title(t){this._title=t,this.initialParameter.title=t}get username(){return this._userName}set username(t){this._userName=t,this.initialParameter.userName=t}get botname(){return this._botName}set botname(t){this._botName=t,this.initialParameter.botName=t}get usertextcolor(){return this._userTextColor}set usertextcolor(t){this._userTextColor=t,this.updateUserColorProfile()}get bottextcolor(){return this._botTextColor}set bottextcolor(t){this._botTextColor=t,this.updateBotColorProfile()}get userlabelcolor(){return this._userLabelColor}set userlabelcolor(t){this._userLabelColor=t,this.updateUserColorProfile()}get botlabelcolor(){return this._botLabelColor}set botlabelcolor(t){this._botLabelColor=t,this.updateBotColorProfile()}get userbackgroundcolor(){return this._userBackgroundColor}set userbackgroundcolor(t){this._userBackgroundColor=t,this.updateUserColorProfile()}get botbackgroundcolor(){return this._botBackgroundColor}set botbackgroundcolor(t){this._botBackgroundColor=t,this.updateBotColorProfile()}get initmsg(){return this._initMsg}set initmsg(t){this._initMsg=t,this.initiateChatMessages()}updateUserColorProfile(){this.initialParameter.userColors[xo.UserId]=new lp(this.userlabelcolor,this.usertextcolor,this.userbackgroundcolor)}updateBotColorProfile(){this.initialParameter.userColors[xo.BotId]=new lp(this.botlabelcolor,this.bottextcolor,this.botbackgroundcolor)}onReceiveUserReply(t){if(t&&this.chatService){const e=lu();let r=!1;this.replyId=e,this.replyMessage=void 0;const i=this.chatService.submitUserReplyToBOT(t,()=>{r=!0,this.replyId=void 0,this.chatBox&&this.chatBox.setReadyForUserReply(!0),this.subscription=void 0});this.subscription=i.pipe(rO(()=>!r)).subscribe({next:o=>{switch(o.isError){case!0:this.chatBox&&this.chatBox.addWarningfromBot(e,o.error.message);break;case!1:this.chatBox&&o.result&&(this.replyMessage=o.result.message,o.result.action?this.chatBox.addActionReplyFromBot(e,o.result.message,o.result.action):this.chatBox.addReplyFromBot(e,o.result.message,void 0,o.result.suggestions))}}})}}onSubmitFileMessage(t){const e=[...t],r=[];e.forEach(i=>{i.uploadStatus!==Ko.Uploaded&&r.push(this.fileService.uploadfile(i))}),iO(r.map(i=>i.pipe(ne(o=>({value:o,timestamp:Date.now()}))))).pipe(Dn(this)).subscribe({next:i=>{const o=i.reduce((a,u)=>!a||u.timestamp>a.timestamp?u:a),s=e.findIndex(a=>a.id===o.value.id);-1!==s&&e.splice(s,1,o.value),this.chatBox&&this.chatBox.updateFileInformation(o.value)},complete:()=>{void 0!==e.find(o=>o.uploadError)||this.chatBox&&this.chatBox.addFileResponseFromUser(e)}})}onCancelUserRequest(){this.chatBox&&this.replyId&&(this.replyMessage=this.replyMessage||"",this.chatBox.addReplyFromBot(this.replyId,this.replyMessage)),this.subscription?.unsubscribe(),this.subscription=void 0}get welcomemessages(){return this._welcomemessages}set welcomemessages(t){this._welcomemessages=t,this.initiateChatMessages()}get suggestionmessages(){return this._suggestionmessages}set suggestionmessages(t){this._suggestionmessages=t,this.initiateChatMessages()}initiateChatMessages(){this.initateRequest.next(lu())}static#e=this.\u0275fac=function(e){return new(e||xS)(lt(EO))};static#t=this.\u0275cmp=dn({type:xS,selectors:[["ca-chat-container"]],viewQuery:function(e,r){if(1&e&&Pr(Une,5),2&e){let i;kr(i=Or())&&(r.chatBox=i.first)}},inputs:{identifier:"identifier",knowledgebaseid:"knowledgebaseid",instanceurl:"instanceurl",title:"title",username:"username",botname:"botname",usertextcolor:"usertextcolor",bottextcolor:"bottextcolor",userlabelcolor:"userlabelcolor",botlabelcolor:"botlabelcolor",userbackgroundcolor:"userbackgroundcolor",botbackgroundcolor:"botbackgroundcolor",initmsg:"initmsg",welcomemessages:"welcomemessages",suggestionmessages:"suggestionmessages"},decls:3,vars:14,consts:[[1,"chat-box-container"],[3,"initialParameters","allowMinimize","userReplySubmitted","cancelUserRequest","submitFileMessage"],["simplechatBox",""]],template:function(e,r){1&e&&(V(0,"div",0)(1,"ca-chat-box",1,2),De("userReplySubmitted",function(o){return r.onReceiveUserReply(o)})("cancelUserRequest",function(){return r.onCancelUserRequest()})("submitFileMessage",function(o){return r.onSubmitFileMessage(o)}),Y()()),2&e&&(ri("--chat-box-primary-color",r.initialParameter.windowColors.primaryColor)("--chat-box-on-primary-color",r.initialParameter.windowColors.onPrimaryColor)("--suggestion-border-color",r.botlabelcolor)("--suggestion-foreground-color",r.bottextcolor)("--suggestion-border-color-hover",r.bottextcolor)("--suggestion-foreground-color-hover",r.botlabelcolor),U(1),z("initialParameters",r.initialParameter)("allowMinimize",!1))},dependencies:[YL],styles:['@import"https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600&display=swap";html{font-weight:300;font-size:14px}.chat-box-container{box-shadow:#64646f33 0 7px 29px;border-radius:16px;overflow:hidden;height:100%;width:100%;--chat-box-primary-color: "#edefef";--chat-box-on-primary-color: "white";--suggestion-border-color: blue;--suggestion-foreground-color: black;--suggestion-border-color-hover: blue;--suggestion-foreground-color-hover: black;--font-family: "Be Vietnam Pro", sans-serif;--default-text-color: #0a0a11;--default-text-color-light: #090910cc;--default-text-color-lighter: #09091080;font-size:14px;line-height:24px}*{font-family:var(--font-family)!important;-webkit-font-smoothing:antialiased!important;font-variation-settings:normal!important}h1{font-size:26px!important;font-weight:400!important;color:var(--default-text-color)!important}h2{font-size:24px;font-weight:400!important;color:var(--default-text-color)!important}h3{font-size:22px;font-weight:400!important;color:var(--default-text-color)!important}h4{font-size:20px;font-weight:400!important;color:var(--default-text-color)!important}h5{font-size:18px;font-weight:400!important;color:var(--default-text-color)!important}@media screen and (max-width: 480px){.chat-box-container{border-radius:0}}@media screen and (max-width: 768px){.chat-box-container{font-size:16px}}\n'],encapsulation:3})};tS=ke([Co()],tS);let zne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({imports:[_r]})}return n})();class _u{constructor(t,e,r,i){this.value=t,this.serverError=e,this.networkError=r,this.localError=i}static ok(t){return new _u(t)}static serverError(t){return new _u(void 0,t)}static networkError(t){return new _u(void 0,void 0,t)}static localError(t){return new _u(void 0,void 0,void 0,t)}getError(){return this.serverError?this.serverError:this.networkError?this.networkError:this.localError?this.localError:null}}class Af{constructor(t,e){switch(this.code=t,this.message=e,this.errorType=gr.UnKnown,t){case 1e3:case 4e3:this.errorType=gr.EmailAlreadyTaken;break;case 1008:this.errorType=gr.UnableToClearUserRecord;break;case 1001:this.errorType=gr.UnableToStoreUserRecord;break;case 404:this.errorType=gr.ResourceUnavailable;break;case 409:this.errorType=gr.UniqueDataViolation;break;case 401:this.errorType=gr.Unauthorized;break;case 400:this.errorType=gr.InvalidRequestFormat;break;case 413:this.errorType=gr.PayloadTooLargeError;break;case 415:this.errorType=gr.UnsupportedFileFormatError;break;case 500:this.errorType=gr.InternalServerError;break;case 1009:this.errorType=gr.UserCountLimitReached;break;case 2e3:this.errorType=gr.QueueLimitReached;break;case 2001:this.errorType=gr.ActiveQueueItemFound;break;case 297:this.errorType=gr.CompanyNameIsAlreadyTaken;break;case 502:this.errorType=gr.ServiceIsUnavailable;break;case 2007:this.errorType=gr.UpdatedVersionOfRecordAvailable;break;case 4003:this.errorType=gr.DeviceIdisAlreadyRegistered;break;case 5004:this.errorType=gr.SubscriptionHasExpired;break;case 2011:this.errorType=gr.NoLayoutMapAvailable;break;case 3002:this.errorType=gr.RecordWasSavedAndDeleted;break;case 2013:this.errorType=gr.OneToOneRelationViolation}}getErrorMessage(){switch(this.code){case 1e3:case 4e3:return"This email address is already taken.";case 1008:return"We were unable to remove this user record";case 1001:return"We were unable to save this user record.";case 401:return"You are not authorized for this operation.";case 404:return"The data you are looking for isn't available.";case 413:return"Exceeds maximum file size.";case 415:return"Unsupported file format.";case 409:return"We encountered problem with unique property validation.";case 400:return"The request format isn't in the correct format.";case 500:return"Sorry we encountered an internal server error. Please try again later.";case 1009:return"You have reached the limit of user count";case 2e3:return"You have reached the limit of item in the queue";case 2001:return"There is already an active item in the queue";case 297:return"This company name is already taken";case 404:return"The data you requested is not available.";case 502:return"Service is unavailable, please try again later";case 2007:return"There is an updated version of this record";case 4001:return"User found but not attached yet.";case 4003:return"Device is already registered";case 5004:return"Subscription expired. Please update your subscription.";case 2e3:return"Queue limit reached. Please try again later.";case 2001:return"This queue is not available.";case 2011:return"There is no linkable layout map data.";case 3002:return"Record saved successfully";case 2013:return"Parent record already has a child.";case 3002:return"Record was saved sucessfully, and then removed after that.";default:return this.message&&this.message.trim()&&this.message.trim().length>0?this.message:0===this.code?"We encounted an internal problem. Please try again later.":`${this.code} - We encounted an internal problem. Please try again later.`}}}var gr=function(n){return n[n.UnKnown=-1]="UnKnown",n[n.EmailAlreadyTaken=1e3]="EmailAlreadyTaken",n[n.UnableToClearUserRecord=1008]="UnableToClearUserRecord",n[n.UnableToStoreUserRecord=1001]="UnableToStoreUserRecord",n[n.Unauthorized=401]="Unauthorized",n[n.ResourceUnavailable=404]="ResourceUnavailable",n[n.UniqueDataViolation=409]="UniqueDataViolation",n[n.InvalidRequestFormat=400]="InvalidRequestFormat",n[n.PayloadTooLargeError=413]="PayloadTooLargeError",n[n.UnsupportedFileFormatError=415]="UnsupportedFileFormatError",n[n.InternalServerError=500]="InternalServerError",n[n.UserCountLimitReached=1009]="UserCountLimitReached",n[n.QueueLimitReached=2e3]="QueueLimitReached",n[n.ActiveQueueItemFound=2001]="ActiveQueueItemFound",n[n.CompanyNameIsAlreadyTaken=297]="CompanyNameIsAlreadyTaken",n[n.ServiceIsUnavailable=502]="ServiceIsUnavailable",n[n.UpdatedVersionOfRecordAvailable=2007]="UpdatedVersionOfRecordAvailable",n[n.EmailAlreadyTaken2=4e3]="EmailAlreadyTaken2",n[n.UserFoundButNotAttachedYet=4001]="UserFoundButNotAttachedYet",n[n.EmailIsNotRegistered=4002]="EmailIsNotRegistered",n[n.DeviceIdisAlreadyRegistered=4003]="DeviceIdisAlreadyRegistered",n[n.SubscriptionHasExpired=5004]="SubscriptionHasExpired",n[n.NoLayoutMapAvailable=2011]="NoLayoutMapAvailable",n[n.OneToOneRelationViolation=2013]="OneToOneRelationViolation",n[n.RecordWasSavedAndDeleted=3002]="RecordWasSavedAndDeleted",n}(gr||{});class jne{constructor(t,e){switch(this.code=t,this.message=e,this.errorType=xf.Unknown,t){case 0:this.errorType=xf.CORS_ERROR;break;case 404:this.errorType=xf.ResourceUnavailable;break;case 401:this.errorType=xf.Unauthorized;break;case 500:this.errorType=xf.InternalServerError;break;case 502:this.errorType=xf.ServiceIsUnavailable}}getErrorMessage(){switch(this.code){case 0:return"Oops! It seems there was an issue reaching the server. Our team is actively working to resolve this problem. In the meantime, if you need immediate assistance, please don't hesitate to get in touch with our support team. Thank you for your patience!";case 404:return"The requested resource is not available.";case 401:return"You are not authorized for this";case 500:return"We have encountered an internal problem. Please try again later.";case 502:return"The service is temporarily unavailable. Please try again later.";default:return this.message&&this.message.trim()&&this.message.trim().length>0?this.message:`${this.code} - There is something wrong with the network. Please try again later.`}}}var xf=function(n){return n[n.CORS_ERROR=0]="CORS_ERROR",n[n.ResourceUnavailable=404]="ResourceUnavailable",n[n.Unauthorized=401]="Unauthorized",n[n.InternalServerError=500]="InternalServerError",n[n.ServiceIsUnavailable=502]="ServiceIsUnavailable",n[n.Unknown=-1]="Unknown",n}(xf||{});class Fp{constructor(t,e,r,i){this.Success=t,this.ResponseCode=e,this.Result=r,this.Message=i}toApiResult(){return this.Success?_u.ok(this.Result??void 0):_u.serverError(new Af(this.ResponseCode,this.Message??void 0))}static from(t){return new Fp(t.Success,t.ResponseCode,t.Result,t.Message)}}class nS{constructor(t){this.name=t}getErrorMessage(){switch(this.name){case"NoUserDataIsSet":return"User information not found. Please try again after re-login.";case"NoZoneDataAvailable":return"User zone information was not found. Please try again after re-login.";default:throw new Error("Unknown local error occurred.")}}static#e=this.NoUserDataIsSet=new nS("NoUserDataIsSet");static#t=this.NoZoneDataAvailable=new nS("NoZoneDataAvailable")}let Hne=(()=>{class n{constructor(e){this.http=e,this.UploadAPI="api/v2.0/hook/upload-file",this.identifier="",this.FileUploadEndpoint=this.UploadAPI}updateEndpointSetting(e,r){this.FileUploadEndpoint=e.endsWith("/")?`${e}${this.UploadAPI}`:`${e}/${this.UploadAPI}`,this.identifier=r}uploadFile(e){const r=new Z8;r.id=lu(),r.OriginalFileName=e.name,r.FileExtension=MI(e.name)??"",r.FileSizeInKB=parseInt((e.size/1024).toString()),r.FileType=e.type,r.CloudFileType=CO.RepositoryFile;const i=new Blob([JSON.stringify(r)],{type:"application/json"}),o=new FormData;return o.append("file",e,e.name),o.append("FileInfo",i,"Info"),new ln(a=>{this.http.post(this.FileUploadEndpoint,o,{headers:{identifier:this.identifier},reportProgress:!0,observe:"events"}).subscribe({next:u=>{if(u){let c;if(u.type===Ll.UploadProgress){const d=Math.round(100*u.loaded/(u.total||0));c=Fp.from({Success:!0,ResponseCode:200,Message:`${d}%`,Result:{isUploadProgress:!0,uploadPercent:d}}),a.next(c)}else if(u.type===Ll.Response){if(u.body){const d=Fp.from(u.body);if(d.Success){const f={isUploadProgress:!1,url:d.Result?d.Result:""};f.url?(c=Fp.from({Success:!0,ResponseCode:200,Message:"File is uploaded successfully.",Result:f}),a.next(c)):a.error(new Af(400).getErrorMessage())}else a.error(new Af(d.ResponseCode,d.Message??void 0).getErrorMessage())}else a.error(new Af(500).getErrorMessage());a.complete()}else c=Fp.from({Success:!0,ResponseCode:200,Message:"",Result:null}),a.next(c)}else a.error(new Af(500).getErrorMessage()),a.complete()},error:u=>{a.error(new jne(u.status,u.message).getErrorMessage()),a.complete()}})})}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(LI))};static#t=this.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wne=(()=>{class n{constructor(e){const r=XL($I,{injector:e});customElements.define("chat-popup-container",r);const i=XL(tS,{injector:e});customElements.define("chat-container",i)}ngDoBootstrap(e){}static#e=this.\u0275fac=function(r){return new(r||n)(Ze(hs))};static#t=this.\u0275mod=ji({type:n});static#n=this.\u0275inj=ao({providers:[{provide:_O,useClass:Hne}],imports:[pP,R$,w8,QL,sv,HB,zne,iA,Q$.forRoot(),sA,$B,eL]})}return n})();g6().bootstrapModule(Wne).catch(n=>console.error(n))},990:function(Oi,ta,Ni){var an;Oi=Ni.nmd(Oi),function(){var k,Ai="Expected a function",Su="__lodash_hash_undefined__",no="__lodash_placeholder__",ln=1/0,Do=9007199254740991,K=4294967295,pe=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ge="[object Arguments]",ie="[object Array]",ne="[object Boolean]",Be="[object Date]",Me="[object Error]",Ve="[object Function]",ke="[object GeneratorFunction]",Oe="[object Map]",Se="[object Number]",ct="[object Object]",Ue="[object Promise]",Le="[object RegExp]",ae="[object Set]",me="[object String]",qe="[object Symbol]",Kt="[object WeakMap]",nr="[object ArrayBuffer]",Rn="[object DataView]",Tr="[object Float32Array]",rr="[object Float64Array]",Ss="[object Int8Array]",Ci="[object Int16Array]",Br="[object Int32Array]",Io="[object Uint8Array]",Li="[object Uint8ClampedArray]",oo="[object Uint16Array]",Yr="[object Uint32Array]",ia=/\b__p \+= '';/g,jl=/\b(__p \+=) '' \+/g,Hl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Cf=/&(?:amp|lt|gt|quot|#39);/g,Ru=/[&<>"']/g,Wl=RegExp(Cf.source),Mu=RegExp(Ru.source),_f=/<%-([\s\S]+?)%>/g,Tc=/<%([\s\S]+?)%>/g,yr=/<%=([\s\S]+?)%>/g,Ef=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Df=/^\w*$/,If=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ua=/[\\^$.*+?()[\]{}|]/g,dr=RegExp(Ua.source),_i=/^\s+/,ir=/\s/,Ui=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xr=/\{\n\/\* \[wrapped with (.+)\] \*/,os=/,? & /,oa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rc=/[()=,{}\[\]\/\s]/,Sf=/\\(\\)?/g,jp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,So=/\w*$/,yA=/^[-+]0x[0-9a-f]+$/i,Mc=/^0b[01]+$/i,Gv=/^\[object .+?Constructor\]$/,Tf=/^0o[0-7]+$/i,CS=/^(?:0|[1-9]\d*)$/,wA=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vl=/($^)/,Hp=/['\n\r\u2028\u2029\\]/g,Rf="\\ud800-\\udfff",Wp="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qv="\\u2700-\\u27bf",Yv="a-z\\xdf-\\xf6\\xf8-\\xff",Jv="A-Z\\xc0-\\xd6\\xd8-\\xde",sa="\\ufe0e\\ufe0f",Mf="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gl="["+Rf+"]",kf="["+Mf+"]",kc="["+Wp+"]",Kl="\\d+",ku="["+Qv+"]",Zv="["+Yv+"]",vn="[^"+Rf+Mf+Kl+Qv+Yv+Jv+"]",Pc="\\ud83c[\\udffb-\\udfff]",Pf="[^"+Rf+"]",Vp="(?:\\ud83c[\\udde6-\\uddff]){2}",Ql="[\\ud800-\\udbff][\\udc00-\\udfff]",vt="["+Jv+"]",Nf="(?:"+Zv+"|"+vn+")",_S="(?:"+vt+"|"+vn+")",qp="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ee="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Yl="(?:"+kc+"|"+Pc+")?",Tt="["+sa+"]?",$v=Tt+Yl+"(?:\\u200d(?:"+[Pf,Vp,Ql].join("|")+")"+Tt+Yl+")*",Gp="(?:"+[ku,Vp,Ql].join("|")+")"+$v,so="(?:"+[Pf+kc+"?",kc,Vp,Ql,Gl].join("|")+")",DS=RegExp("['\u2019]","g"),EA=RegExp(kc,"g"),ey=RegExp(Pc+"(?="+Pc+")|"+so+$v,"g"),Pu=RegExp([vt+"?"+Zv+"+"+qp+"(?="+[kf,vt,"$"].join("|")+")",_S+"+"+Ee+"(?="+[kf,vt+Nf,"$"].join("|")+")",vt+"?"+Nf+"+"+qp,vt+"+"+Ee,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Kl,Gp].join("|"),"g"),IS=RegExp("[\\u200d"+Rf+Wp+sa+"]"),SS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,TS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],RS=-1,Nn={};Nn[Tr]=Nn[rr]=Nn[Ss]=Nn[Ci]=Nn[Br]=Nn[Io]=Nn[Li]=Nn[oo]=Nn[Yr]=!0,Nn[ge]=Nn[ie]=Nn[nr]=Nn[ne]=Nn[Rn]=Nn[Be]=Nn[Me]=Nn[Ve]=Nn[Oe]=Nn[Se]=Nn[ct]=Nn[Le]=Nn[ae]=Nn[me]=Nn[Kt]=!1;var Fn={};Fn[ge]=Fn[ie]=Fn[nr]=Fn[Rn]=Fn[ne]=Fn[Be]=Fn[Tr]=Fn[rr]=Fn[Ss]=Fn[Ci]=Fn[Br]=Fn[Oe]=Fn[Se]=Fn[ct]=Fn[Le]=Fn[ae]=Fn[me]=Fn[qe]=Fn[Io]=Fn[Li]=Fn[oo]=Fn[Yr]=!0,Fn[Me]=Fn[Ve]=Fn[Kt]=!1;var Et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kS=parseFloat,PS=parseInt,IA="object"==typeof global&&global&&global.Object===Object&&global,Nt="object"==typeof self&&self&&self.Object===Object&&self,di=IA||Nt||Function("return this")(),ao=ta&&!ta.nodeType&&ta,za=ao&&Oi&&!Oi.nodeType&&Oi,SA=za&&za.exports===ao,Ff=SA&&IA.process,Ro=function(){try{return za&&za.require&&za.require("util").types||Ff&&Ff.binding&&Ff.binding("util")}catch{}}(),Xl=Ro&&Ro.isArrayBuffer,Jl=Ro&&Ro.isDate,Bf=Ro&&Ro.isMap,Kp=Ro&&Ro.isRegExp,ty=Ro&&Ro.isSet,Zt=Ro&&Ro.isTypedArray;function Ei(J,ye,se){switch(se.length){case 0:return J.call(ye);case 1:return J.call(ye,se[0]);case 2:return J.call(ye,se[0],se[1]);case 3:return J.call(ye,se[0],se[1],se[2])}return J.apply(ye,se)}function ny(J,ye,se,Xe){for(var mt=-1,gn=null==J?0:J.length;++mt<gn;){var wr=J[mt];ye(Xe,wr,se(wr),J)}return Xe}function Bn(J,ye){for(var se=-1,Xe=null==J?0:J.length;++se<Xe&&!1!==ye(J[se],se,J););return J}function ry(J,ye){for(var se=null==J?0:J.length;se--&&!1!==ye(J[se],se,J););return J}function TA(J,ye){for(var se=-1,Xe=null==J?0:J.length;++se<Xe;)if(!ye(J[se],se,J))return!1;return!0}function on(J,ye){for(var se=-1,Xe=null==J?0:J.length,mt=0,gn=[];++se<Xe;){var wr=J[se];ye(wr,se,J)&&(gn[mt++]=wr)}return gn}function Qp(J,ye){return!(null==J||!J.length)&&ed(J,ye,0)>-1}function iy(J,ye,se){for(var Xe=-1,mt=null==J?0:J.length;++Xe<mt;)if(se(ye,J[Xe]))return!0;return!1}function ze(J,ye){for(var se=-1,Xe=null==J?0:J.length,mt=Array(Xe);++se<Xe;)mt[se]=ye(J[se],se,J);return mt}function Ts(J,ye){for(var se=-1,Xe=ye.length,mt=J.length;++se<Xe;)J[mt+se]=ye[se];return J}function Zl(J,ye,se,Xe){var mt=-1,gn=null==J?0:J.length;for(Xe&&gn&&(se=J[++mt]);++mt<gn;)se=ye(se,J[mt],mt,J);return se}function oy(J,ye,se,Xe){var mt=null==J?0:J.length;for(Xe&&mt&&(se=J[--mt]);mt--;)se=ye(se,J[mt],mt,J);return se}function $l(J,ye){for(var se=-1,Xe=null==J?0:J.length;++se<Xe;)if(ye(J[se],se,J))return!0;return!1}var RA=Nc("length");function MA(J,ye,se){var Xe;return se(J,function(mt,gn,wr){if(ye(mt,gn,wr))return Xe=gn,!1}),Xe}function Xp(J,ye,se,Xe){for(var mt=J.length,gn=se+(Xe?1:-1);Xe?gn--:++gn<mt;)if(ye(J[gn],gn,J))return gn;return-1}function ed(J,ye,se){return ye==ye?function ay(J,ye,se){for(var Xe=se-1,mt=J.length;++Xe<mt;)if(J[Xe]===ye)return Xe;return-1}(J,ye,se):Xp(J,Oc,se)}function NS(J,ye,se,Xe){for(var mt=se-1,gn=J.length;++mt<gn;)if(Xe(J[mt],ye))return mt;return-1}function Oc(J){return J!=J}function Lf(J,ye){var se=null==J?0:J.length;return se?Uf(J,ye)/se:NaN}function Nc(J){return function(ye){return null==ye?k:ye[J]}}function Jp(J){return function(ye){return null==J?k:J[ye]}}function sy(J,ye,se,Xe,mt){return mt(J,function(gn,wr,Mn){se=Xe?(Xe=!1,gn):ye(se,gn,wr,Mn)}),se}function Uf(J,ye){for(var se,Xe=-1,mt=J.length;++Xe<mt;){var gn=ye(J[Xe]);gn!==k&&(se=se===k?gn:se+gn)}return se}function ja(J,ye){for(var se=-1,Xe=Array(J);++se<J;)Xe[se]=ye(se);return Xe}function aa(J){return J&&J.slice(0,$p(J)+1).replace(_i,"")}function uo(J){return function(ye){return J(ye)}}function Ze(J,ye){return ze(ye,function(se){return J[se]})}function Fc(J,ye){return J.has(ye)}function un(J,ye){for(var se=-1,Xe=J.length;++se<Xe&&ed(ye,J[se],0)>-1;);return se}function td(J,ye){for(var se=J.length;se--&&ed(ye,J[se],0)>-1;);return se}var nd=Jp({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),OA=Jp({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function NA(J){return"\\"+Et[J]}function zi(J){return IS.test(J)}function ko(J){var ye=-1,se=Array(J.size);return J.forEach(function(Xe,mt){se[++ye]=[mt,Xe]}),se}function cn(J,ye){return function(se){return J(ye(se))}}function ss(J,ye){for(var se=-1,Xe=J.length,mt=0,gn=[];++se<Xe;){var wr=J[se];(wr===ye||wr===no)&&(J[se]=no,gn[mt++]=se)}return gn}function Bc(J){var ye=-1,se=Array(J.size);return J.forEach(function(Xe){se[++ye]=Xe}),se}function Rs(J){return zi(J)?function uy(J){for(var ye=ey.lastIndex=0;ey.test(J);)++ye;return ye}(J):RA(J)}function Po(J){return zi(J)?function cy(J){return J.match(ey)||[]}(J):function Yp(J){return J.split("")}(J)}function $p(J){for(var ye=J.length;ye--&&ir.test(J.charAt(ye)););return ye}var eg=Jp({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),id=function J(ye){var l,se=(ye=null==ye?di:id.defaults(di.Object(),ye,id.pick(di,TS))).Array,Xe=ye.Date,mt=ye.Error,gn=ye.Function,wr=ye.Math,Mn=ye.Object,tg=ye.RegExp,BA=ye.String,Oo=ye.TypeError,od=se.prototype,Lc=Mn.prototype,Hf=ye["__core-js_shared__"],dn=gn.prototype.toString,Cn=Lc.hasOwnProperty,UA=0,dy=(l=/[^.]+$/.exec(Hf&&Hf.keys&&Hf.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",ji=Lc.toString,zA=dn.call(Mn),fy=di._,co=tg("^"+dn.call(Cn).replace(Ua,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gn=SA?ye.Buffer:k,Ut=ye.Symbol,br=ye.Uint8Array,fi=Gn?Gn.allocUnsafe:k,Ha=cn(Mn.getPrototypeOf,Mn),Hi=Mn.create,ng=Lc.propertyIsEnumerable,sd=od.splice,ad=Ut?Ut.isConcatSpreadable:k,ud=Ut?Ut.iterator:k,Ou=Ut?Ut.toStringTag:k,Ln=function(){try{var l=fa(Mn,"defineProperty");return l({},"",{}),l}catch{}}(),Ge=ye.clearTimeout!==di.clearTimeout&&ye.clearTimeout,kt=Xe&&Xe.now!==di.Date.now&&Xe.now,Kn=ye.setTimeout!==di.setTimeout&&ye.setTimeout,Wi=wr.ceil,Wa=wr.floor,Lr=Mn.getOwnPropertySymbols,Uc=Gn?Gn.isBuffer:k,ur=ye.isFinite,Va=od.join,zc=cn(Mn.keys,Mn),tt=wr.max,Ar=wr.min,hy=Xe.now,jc=ye.parseInt,cr=wr.random,cd=od.reverse,qa=fa(ye,"DataView"),Vi=fa(ye,"Map"),Nu=fa(ye,"Promise"),Fu=fa(ye,"Set"),No=fa(ye,"WeakMap"),lo=fa(Mn,"create"),Ga=No&&new No,Ms={},Yt=Ho(qa),FS=Ho(Vi),rg=Ho(Nu),py=Ho(Fu),ks=Ho(No),Bu=Ut?Ut.prototype:k,Ps=Bu?Bu.valueOf:k,Hc=Bu?Bu.toString:k;function S(l){if(sr(l)&&!Pt(l)&&!(l instanceof Qt)){if(l instanceof kn)return l;if(Cn.call(l,"__wrapped__"))return ah(l)}return new kn(l)}var ld=function(){function l(){}return function(h){if(!Yn(h))return{};if(Hi)return Hi(h);l.prototype=h;var m=new l;return l.prototype=k,m}}();function Jr(){}function kn(l,h){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=k}function Qt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function ca(l){var h=-1,m=null==l?0:l.length;for(this.clear();++h<m;){var x=l[h];this.set(x[0],x[1])}}function Ka(l){var h=-1,m=null==l?0:l.length;for(this.clear();++h<m;){var x=l[h];this.set(x[0],x[1])}}function Qa(l){var h=-1,m=null==l?0:l.length;for(this.clear();++h<m;){var x=l[h];this.set(x[0],x[1])}}function Ya(l){var h=-1,m=null==l?0:l.length;for(this.__data__=new Qa;++h<m;)this.add(l[h])}function Os(l){var h=this.__data__=new Ka(l);this.size=h.size}function Ur(l,h){var m=Pt(l),x=!m&&$u(l),I=!m&&!x&&tu(l),R=!m&&!x&&!I&&ll(l),L=m||x||I||R,q=L?ja(l.length,BA):[],Z=q.length;for(var be in l)(h||Cn.call(l,be))&&(!L||!("length"==be||I&&("offset"==be||"parent"==be)||R&&("buffer"==be||"byteLength"==be||"byteOffset"==be)||ls(be,Z)))&&q.push(be);return q}function dd(l){var h=l.length;return h?l[pg(0,h-1)]:k}function Fo(l,h){return nl(pi(l),Ja(h,0,l.length))}function my(l){return nl(pi(l))}function Vf(l,h,m){(m!==k&&!fs(l[h],m)||m===k&&!(h in l))&&us(l,h,m)}function Wc(l,h,m){var x=l[h];(!Cn.call(l,h)||!fs(x,m)||m===k&&!(h in l))&&us(l,h,m)}function fd(l,h){for(var m=l.length;m--;)if(fs(l[m][0],h))return m;return-1}function ig(l,h,m,x){return ju(l,function(I,R,L){h(x,I,m(I),L)}),x}function og(l,h){return l&&zo(h,Hr(h),l)}function us(l,h,m){"__proto__"==h&&Ln?Ln(l,h,{configurable:!0,enumerable:!0,value:m,writable:!0}):l[h]=m}function qf(l,h){for(var m=-1,x=h.length,I=se(x),R=null==l;++m<x;)I[m]=R?k:im(l,h[m]);return I}function Ja(l,h,m){return l==l&&(m!==k&&(l=l<=m?l:m),h!==k&&(l=l>=h?l:h)),l}function fo(l,h,m,x,I,R){var L,q=1&h,Z=2&h,be=4&h;if(m&&(L=I?m(l,x,I,R):m(l)),L!==k)return L;if(!Yn(l))return l;var Ae=Pt(l);if(Ae){if(L=function zy(l){var h=l.length,m=new l.constructor(h);return h&&"string"==typeof l[0]&&Cn.call(l,"index")&&(m.index=l.index,m.input=l.input),m}(l),!q)return pi(l,L)}else{var Ie=jr(l),He=Ie==Ve||Ie==ke;if(tu(l))return yg(l,q);if(Ie==ct||Ie==ge||He&&!I){if(L=Z||He?{}:jy(l),!q)return Z?function wg(l,h){return zo(l,Zc(l),h)}(l,function sg(l,h){return l&&zo(h,Gi(h),l)}(L,l)):function Oy(l,h){return zo(l,Sg(l),h)}(l,og(L,l))}else{if(!Fn[Ie])return I?l:{};L=function zs(l,h,m){var x=l.constructor;switch(h){case nr:return Zr(l);case ne:case Be:return new x(+l);case Rn:return function da(l,h){var m=h?Zr(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.byteLength)}(l,m);case Tr:case rr:case Ss:case Ci:case Br:case Io:case Li:case oo:case Yr:return Bs(l,m);case Oe:return new x;case Se:case me:return new x(l);case Le:return function Ty(l){var h=new l.constructor(l.source,So.exec(l));return h.lastIndex=l.lastIndex,h}(l);case ae:return new x;case qe:return function Yc(l){return Ps?Mn(Ps.call(l)):{}}(l)}}(l,Ie,q)}}R||(R=new Os);var st=R.get(l);if(st)return st;R.set(l,L),_0(l)?l.forEach(function(At){L.add(fo(At,h,m,At,l,R))}):em(l)&&l.forEach(function(At,Ft){L.set(Ft,fo(At,h,m,Ft,l,R))});var qt=Ae?k:(be?Z?Ly:Eg:Z?Gi:Hr)(l);return Bn(qt||l,function(At,Ft){qt&&(At=l[Ft=At]),Wc(L,Ft,fo(At,h,m,Ft,l,R))}),L}function Vc(l,h,m){var x=m.length;if(null==l)return!x;for(l=Mn(l);x--;){var I=m[x],L=l[I];if(L===k&&!(I in l)||!(0,h[I])(L))return!1}return!0}function zu(l,h,m){if("function"!=typeof l)throw new Oo(Ai);return xd(function(){l.apply(k,m)},h)}function qc(l,h,m,x){var I=-1,R=Qp,L=!0,q=l.length,Z=[],be=h.length;if(!q)return Z;m&&(h=ze(h,uo(m))),x?(R=iy,L=!1):h.length>=200&&(R=Fc,L=!1,h=new Ya(h));e:for(;++I<q;){var Ae=l[I],Ie=null==m?Ae:m(Ae);if(Ae=x||0!==Ae?Ae:0,L&&Ie==Ie){for(var He=be;He--;)if(h[He]===Ie)continue e;Z.push(Ae)}else R(h,Ie,x)||Z.push(Ae)}return Z}S.templateSettings={escape:_f,evaluate:Tc,interpolate:yr,variable:"",imports:{_:S}},(S.prototype=Jr.prototype).constructor=S,(kn.prototype=ld(Jr.prototype)).constructor=kn,(Qt.prototype=ld(Jr.prototype)).constructor=Qt,ca.prototype.clear=function jA(){this.__data__=lo?lo(null):{},this.size=0},ca.prototype.delete=function HA(l){var h=this.has(l)&&delete this.__data__[l];return this.size-=h?1:0,h},ca.prototype.get=function BS(l){var h=this.__data__;if(lo){var m=h[l];return m===Su?k:m}return Cn.call(h,l)?h[l]:k},ca.prototype.has=function WA(l){var h=this.__data__;return lo?h[l]!==k:Cn.call(h,l)},ca.prototype.set=function VA(l,h){var m=this.__data__;return this.size+=this.has(l)?0:1,m[l]=lo&&h===k?Su:h,this},Ka.prototype.clear=function LS(){this.__data__=[],this.size=0},Ka.prototype.delete=function US(l){var h=this.__data__,m=fd(h,l);return!(m<0||(m==h.length-1?h.pop():sd.call(h,m,1),--this.size,0))},Ka.prototype.get=function zS(l){var h=this.__data__,m=fd(h,l);return m<0?k:h[m][1]},Ka.prototype.has=function jS(l){return fd(this.__data__,l)>-1},Ka.prototype.set=function HS(l,h){var m=this.__data__,x=fd(m,l);return x<0?(++this.size,m.push([l,h])):m[x][1]=h,this},Qa.prototype.clear=function WS(){this.size=0,this.__data__={hash:new ca,map:new(Vi||Ka),string:new ca}},Qa.prototype.delete=function VS(l){var h=Ig(this,l).delete(l);return this.size-=h?1:0,h},Qa.prototype.get=function qS(l){return Ig(this,l).get(l)},Qa.prototype.has=function GS(l){return Ig(this,l).has(l)},Qa.prototype.set=function KS(l,h){var m=Ig(this,l),x=m.size;return m.set(l,h),this.size+=m.size==x?0:1,this},Ya.prototype.add=Ya.prototype.push=function gy(l){return this.__data__.set(l,Su),this},Ya.prototype.has=function QS(l){return this.__data__.has(l)},Os.prototype.clear=function YS(){this.__data__=new Ka,this.size=0},Os.prototype.delete=function Uu(l){var h=this.__data__,m=h.delete(l);return this.size=h.size,m},Os.prototype.get=function Xa(l){return this.__data__.get(l)},Os.prototype.has=function XS(l){return this.__data__.has(l)},Os.prototype.set=function JS(l,h){var m=this.__data__;if(m instanceof Ka){var x=m.__data__;if(!Vi||x.length<199)return x.push([l,h]),this.size=++m.size,this;m=this.__data__=new Qa(x)}return m.set(l,h),this.size=m.size,this};var ju=eh(Bo),qA=eh(yy,!0);function ZS(l,h){var m=!0;return ju(l,function(x,I,R){return m=!!h(x,I,R)}),m}function Kf(l,h,m){for(var x=-1,I=l.length;++x<I;){var R=l[x],L=h(R);if(null!=L&&(q===k?L==L&&!mo(L):m(L,q)))var q=L,Z=R}return Z}function KA(l,h){var m=[];return ju(l,function(x,I,R){h(x,I,R)&&m.push(x)}),m}function zr(l,h,m,x,I){var R=-1,L=l.length;for(m||(m=oh),I||(I=[]);++R<L;){var q=l[R];h>0&&m(q)?h>1?zr(q,h-1,m,x,I):Ts(I,q):x||(I[I.length]=q)}return I}var hd=bg(),vy=bg(!0);function Bo(l,h){return l&&hd(l,h,Hr)}function yy(l,h){return l&&vy(l,h,Hr)}function ag(l,h){return on(h,function(m){return nu(l[m])})}function Hu(l,h){for(var m=0,x=(h=Fs(h,l)).length;null!=l&&m<x;)l=l[Ii(h[m++])];return m&&m==x?l:k}function ug(l,h,m){var x=h(l);return Pt(l)?x:Ts(x,m(l))}function hi(l){return null==l?l===k?"[object Undefined]":"[object Null]":Ou&&Ou in Mn(l)?function Ad(l){var h=Cn.call(l,Ou),m=l[Ou];try{l[Ou]=k;var x=!0}catch{}var I=ji.call(l);return x&&(h?l[Ou]=m:delete l[Ou]),I}(l):function qy(l){return ji.call(l)}(l)}function cg(l,h){return l>h}function QA(l,h){return null!=l&&Cn.call(l,h)}function YA(l,h){return null!=l&&h in Mn(l)}function lg(l,h,m){for(var x=m?iy:Qp,I=l[0].length,R=l.length,L=R,q=se(R),Z=1/0,be=[];L--;){var Ae=l[L];L&&h&&(Ae=ze(Ae,uo(h))),Z=Ar(Ae.length,Z),q[L]=!m&&(h||I>=120&&Ae.length>=120)?new Ya(L&&Ae):k}Ae=l[0];var Ie=-1,He=q[0];e:for(;++Ie<I&&be.length<Z;){var st=Ae[Ie],wt=h?h(st):st;if(st=m||0!==st?st:0,!(He?Fc(He,wt):x(be,wt,m))){for(L=R;--L;){var qt=q[L];if(!(qt?Fc(qt,wt):x(l[L],wt,m)))continue e}He&&He.push(wt),be.push(st)}}return be}function pd(l,h,m){var x=null==(l=tl(l,h=Fs(h,l)))?l:l[Ii(ds(h))];return null==x?k:Ei(x,l,m)}function XA(l){return sr(l)&&hi(l)==ge}function Kc(l,h,m,x,I){return l===h||(null==l||null==h||!sr(l)&&!sr(h)?l!=l&&h!=h:function JA(l,h,m,x,I,R){var L=Pt(l),q=Pt(h),Z=L?ie:jr(l),be=q?ie:jr(h),Ae=(Z=Z==ge?ct:Z)==ct,Ie=(be=be==ge?ct:be)==ct,He=Z==be;if(He&&tu(l)){if(!tu(h))return!1;L=!0,Ae=!1}if(He&&!Ae)return R||(R=new Os),L||ll(l)?_g(l,h,m,x,I,R):function dx(l,h,m,x,I,R,L){switch(m){case Rn:if(l.byteLength!=h.byteLength||l.byteOffset!=h.byteOffset)return!1;l=l.buffer,h=h.buffer;case nr:return!(l.byteLength!=h.byteLength||!R(new br(l),new br(h)));case ne:case Be:case Se:return fs(+l,+h);case Me:return l.name==h.name&&l.message==h.message;case Le:case me:return l==h+"";case Oe:var q=ko;case ae:if(q||(q=Bc),l.size!=h.size&&!(1&x))return!1;var be=L.get(l);if(be)return be==h;x|=2,L.set(l,h);var Ae=_g(q(l),q(h),x,I,R,L);return L.delete(l),Ae;case qe:if(Ps)return Ps.call(l)==Ps.call(h)}return!1}(l,h,Z,m,x,I,R);if(!(1&m)){var st=Ae&&Cn.call(l,"__wrapped__"),wt=Ie&&Cn.call(h,"__wrapped__");if(st||wt){var qt=st?l.value():l,At=wt?h.value():h;return R||(R=new Os),I(qt,At,m,x,R)}}return!!He&&(R||(R=new Os),function Xc(l,h,m,x,I,R){var L=1&m,q=Eg(l),Z=q.length;if(Z!=Eg(h).length&&!L)return!1;for(var Ie=Z;Ie--;){var He=q[Ie];if(!(L?He in h:Cn.call(h,He)))return!1}var st=R.get(l),wt=R.get(h);if(st&&wt)return st==h&&wt==l;var qt=!0;R.set(l,h),R.set(h,l);for(var At=L;++Ie<Z;){var Ft=l[He=q[Ie]],rn=h[He];if(x)var Wr=L?x(rn,Ft,He,h,l,R):x(Ft,rn,He,l,h,R);if(!(Wr===k?Ft===rn||I(Ft,rn,m,x,R):Wr)){qt=!1;break}At||(At="constructor"==He)}if(qt&&!At){var Xn=l.constructor,yo=h.constructor;Xn!=yo&&"constructor"in l&&"constructor"in h&&!("function"==typeof Xn&&Xn instanceof Xn&&"function"==typeof yo&&yo instanceof yo)&&(qt=!1)}return R.delete(l),R.delete(h),qt}(l,h,m,x,I,R))}(l,h,m,x,Kc,I))}function Qf(l,h,m,x){var I=m.length,R=I,L=!x;if(null==l)return!R;for(l=Mn(l);I--;){var q=m[I];if(L&&q[2]?q[1]!==l[q[0]]:!(q[0]in l))return!1}for(;++I<R;){var Z=(q=m[I])[0],be=l[Z],Ae=q[1];if(L&&q[2]){if(be===k&&!(Z in l))return!1}else{var Ie=new Os;if(x)var He=x(be,Ae,Z,l,h,Ie);if(!(He===k?Kc(Ae,be,3,x,Ie):He))return!1}}return!0}function dg(l){return!(!Yn(l)||function Hy(l){return!!dy&&dy in l}(l))&&(nu(l)?co:Gv).test(Ho(l))}function cs(l){return"function"==typeof l?l:null==l?vi:"object"==typeof l?Pt(l)?Di(l[0],l[1]):gd(l):F1(l)}function Yf(l){if(!el(l))return zc(l);var h=[];for(var m in Mn(l))Cn.call(l,m)&&"constructor"!=m&&h.push(m);return h}function Tn(l,h){return l<h}function Xf(l,h){var m=-1,x=ti(l)?se(l.length):[];return ju(l,function(I,R,L){x[++m]=h(I,R,L)}),x}function gd(l){var h=Uy(l);return 1==h.length&&h[0][2]?Vy(h[0][0],h[0][1]):function(m){return m===l||Qf(m,l,h)}}function Di(l,h){return $c(l)&&kg(h)?Vy(Ii(l),h):function(m){var x=im(m,l);return x===k&&x===h?om(m,l):Kc(h,x,3)}}function Jf(l,h,m,x,I){l!==h&&hd(h,function(R,L){if(I||(I=new Os),Yn(R))!function Cy(l,h,m,x,I,R,L){var q=$r(l,m),Z=$r(h,m),be=L.get(Z);if(be)Vf(l,m,be);else{var Ae=R?R(q,Z,m+"",l,h,L):k,Ie=Ae===k;if(Ie){var He=Pt(Z),st=!He&&tu(Z),wt=!He&&!st&&ll(Z);Ae=Z,He||st||wt?Pt(q)?Ae=q:or(q)?Ae=pi(q):st?(Ie=!1,Ae=yg(Z,!0)):wt?(Ie=!1,Ae=Bs(Z,!0)):Ae=[]:cl(Z)||$u(Z)?(Ae=q,$u(q)?Ae=Dh(q):(!Yn(q)||nu(q))&&(Ae=jy(Z))):Ie=!1}Ie&&(L.set(Z,Ae),I(Ae,Z,x,R,L),L.delete(Z)),Vf(l,m,Ae)}}(l,h,L,m,Jf,x,I);else{var q=x?x($r(l,L),R,L+"",l,h,I):k;q===k&&(q=R),Vf(l,L,q)}},Gi)}function Wu(l,h){var m=l.length;if(m)return ls(h+=h<0?m:0,m)?l[h]:k}function qi(l,h,m){h=h.length?ze(h,function(R){return Pt(R)?function(L){return Hu(L,1===R.length?R[0]:R)}:R}):[vi];var x=-1;return h=ze(h,uo(yt())),function kA(J,ye){var se=J.length;for(J.sort(ye);se--;)J[se]=J[se].value;return J}(Xf(l,function(R,L,q){return{criteria:ze(h,function(be){return be(R)}),index:++x,value:R}}),function(R,L){return function My(l,h,m){for(var x=-1,I=l.criteria,R=h.criteria,L=I.length,q=m.length;++x<L;){var Z=Ry(I[x],R[x]);if(Z)return x>=q?Z:Z*("desc"==m[x]?-1:1)}return l.index-h.index}(R,L,m)})}function _y(l,h,m){for(var x=-1,I=h.length,R={};++x<I;){var L=h[x],q=Hu(l,L);m(q,L)&&Qc(R,Fs(L,l),q)}return R}function Ns(l,h,m,x){var I=x?NS:ed,R=-1,L=h.length,q=l;for(l===h&&(h=pi(h)),m&&(q=ze(l,uo(m)));++R<L;)for(var Z=0,be=h[R],Ae=m?m(be):be;(Z=I(q,Ae,Z,x))>-1;)q!==l&&sd.call(q,Z,1),sd.call(l,Z,1);return l}function hg(l,h){for(var m=l?h.length:0,x=m-1;m--;){var I=h[m];if(m==x||I!==R){var R=I;ls(I)?sd.call(l,I,1):Ce(l,I)}}return l}function pg(l,h){return l+Wa(cr()*(h-l+1))}function Zf(l,h){var m="";if(!l||h<1||h>Do)return m;do{h%2&&(m+=l),(h=Wa(h/2))&&(l+=l)}while(h);return m}function Ht(l,h){return Cd(Pg(l,h,vi),l+"")}function rx(l){return dd(dl(l))}function Dt(l,h){var m=dl(l);return nl(m,Ja(h,0,m.length))}function Qc(l,h,m,x){if(!Yn(l))return l;for(var I=-1,R=(h=Fs(h,l)).length,L=R-1,q=l;null!=q&&++I<R;){var Z=Ii(h[I]),be=m;if("__proto__"===Z||"constructor"===Z||"prototype"===Z)return l;if(I!=L){var Ae=q[Z];(be=x?x(Ae,Z,q):k)===k&&(be=Yn(Ae)?Ae:ls(h[I+1])?[]:{})}Wc(q,Z,be),q=q[Z]}return l}var ix=Ga?function(l,h){return Ga.set(l,h),l}:vi,ox=Ln?function(l,h){return Ln(l,"toString",{configurable:!0,enumerable:!1,value:Ud(h),writable:!0})}:vi;function sx(l){return nl(dl(l))}function Lo(l,h,m){var x=-1,I=l.length;h<0&&(h=-h>I?0:I+h),(m=m>I?I:m)<0&&(m+=I),I=h>m?0:m-h>>>0,h>>>=0;for(var R=se(I);++x<I;)R[x]=l[x+h];return R}function Dy(l,h){var m;return ju(l,function(x,I,R){return!(m=h(x,I,R))}),!!m}function la(l,h,m){var x=0,I=null==l?x:l.length;if("number"==typeof h&&h==h&&I<=2147483647){for(;x<I;){var R=x+I>>>1,L=l[R];null!==L&&!mo(L)&&(m?L<=h:L<h)?x=R+1:I=R}return I}return gg(l,h,vi,m)}function gg(l,h,m,x){var I=0,R=null==l?0:l.length;if(0===R)return 0;for(var L=(h=m(h))!=h,q=null===h,Z=mo(h),be=h===k;I<R;){var Ae=Wa((I+R)/2),Ie=m(l[Ae]),He=Ie!==k,st=null===Ie,wt=Ie==Ie,qt=mo(Ie);if(L)var At=x||wt;else At=be?wt&&(x||He):q?wt&&He&&(x||!st):Z?wt&&He&&!st&&(x||!qt):!st&&!qt&&(x?Ie<=h:Ie<h);At?I=Ae+1:R=Ae}return Ar(R,4294967294)}function Iy(l,h){for(var m=-1,x=l.length,I=0,R=[];++m<x;){var L=l[m],q=h?h(L):L;if(!m||!fs(q,Z)){var Z=q;R[I++]=0===L?0:L}}return R}function Sy(l){return"number"==typeof l?l:mo(l)?NaN:+l}function ho(l){if("string"==typeof l)return l;if(Pt(l))return ze(l,ho)+"";if(mo(l))return Hc?Hc.call(l):"";var h=l+"";return"0"==h&&1/l==-ln?"-0":h}function Za(l,h,m){var x=-1,I=Qp,R=l.length,L=!0,q=[],Z=q;if(m)L=!1,I=iy;else if(R>=200){var be=h?null:lx(l);if(be)return Bc(be);L=!1,I=Fc,Z=new Ya}else Z=h?[]:q;e:for(;++x<R;){var Ae=l[x],Ie=h?h(Ae):Ae;if(Ae=m||0!==Ae?Ae:0,L&&Ie==Ie){for(var He=Z.length;He--;)if(Z[He]===Ie)continue e;h&&Z.push(Ie),q.push(Ae)}else I(Z,Ie,m)||(Z!==q&&Z.push(Ie),q.push(Ae))}return q}function Ce(l,h){return null==(l=tl(l,h=Fs(h,l)))||delete l[Ii(ds(h))]}function tn(l,h,m,x){return Qc(l,h,m(Hu(l,h)),x)}function ve(l,h,m,x){for(var I=l.length,R=x?I:-1;(x?R--:++R<I)&&h(l[R],R,l););return m?Lo(l,x?0:R,x?R+1:I):Lo(l,x?R+1:0,x?I:R)}function we(l,h){var m=l;return m instanceof Qt&&(m=m.value()),Zl(h,function(x,I){return I.func.apply(I.thisArg,Ts([x],I.args))},m)}function Mr(l,h,m){var x=l.length;if(x<2)return x?Za(l[0]):[];for(var I=-1,R=se(x);++I<x;)for(var L=l[I],q=-1;++q<x;)q!=I&&(R[I]=qc(R[I]||L,l[q],h,m));return Za(zr(R,1),h,m)}function mg(l,h,m){for(var x=-1,I=l.length,R=h.length,L={};++x<I;)m(L,l[x],x<R?h[x]:k);return L}function Vu(l){return or(l)?l:[]}function Uo(l){return"function"==typeof l?l:vi}function Fs(l,h){return Pt(l)?l:$c(l,h)?[l]:Yu(nn(l))}var vg=Ht;function $a(l,h,m){var x=l.length;return m=m===k?x:m,!h&&m>=x?l:Lo(l,h,m)}var ax=Ge||function(l){return di.clearTimeout(l)};function yg(l,h){if(h)return l.slice();var m=l.length,x=fi?fi(m):new l.constructor(m);return l.copy(x),x}function Zr(l){var h=new l.constructor(l.byteLength);return new br(h).set(new br(l)),h}function Bs(l,h){var m=h?Zr(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.length)}function Ry(l,h){if(l!==h){var m=l!==k,x=null===l,I=l==l,R=mo(l),L=h!==k,q=null===h,Z=h==h,be=mo(h);if(!q&&!be&&!R&&l>h||R&&L&&Z&&!q&&!be||x&&L&&Z||!m&&Z||!I)return 1;if(!x&&!R&&!be&&l<h||be&&m&&I&&!x&&!R||q&&m&&I||!L&&I||!Z)return-1}return 0}function ky(l,h,m,x){for(var I=-1,R=l.length,L=m.length,q=-1,Z=h.length,be=tt(R-L,0),Ae=se(Z+be),Ie=!x;++q<Z;)Ae[q]=h[q];for(;++I<L;)(Ie||I<R)&&(Ae[m[I]]=l[I]);for(;be--;)Ae[q++]=l[I++];return Ae}function Py(l,h,m,x){for(var I=-1,R=l.length,L=-1,q=m.length,Z=-1,be=h.length,Ae=tt(R-q,0),Ie=se(Ae+be),He=!x;++I<Ae;)Ie[I]=l[I];for(var st=I;++Z<be;)Ie[st+Z]=h[Z];for(;++L<q;)(He||I<R)&&(Ie[st+m[L]]=l[I++]);return Ie}function pi(l,h){var m=-1,x=l.length;for(h||(h=se(x));++m<x;)h[m]=l[m];return h}function zo(l,h,m,x){var I=!m;m||(m={});for(var R=-1,L=h.length;++R<L;){var q=h[R],Z=x?x(m[q],l[q],q,m,l):k;Z===k&&(Z=l[q]),I?us(m,q,Z):Wc(m,q,Z)}return m}function $f(l,h){return function(m,x){var I=Pt(m)?ny:ig,R=h?h():{};return I(m,l,yt(x,2),R)}}function qu(l){return Ht(function(h,m){var x=-1,I=m.length,R=I>1?m[I-1]:k,L=I>2?m[2]:k;for(R=l.length>3&&"function"==typeof R?(I--,R):k,L&&mi(m[0],m[1],L)&&(R=I<3?k:R,I=1),h=Mn(h);++x<I;){var q=m[x];q&&l(h,q,x,R)}return h})}function eh(l,h){return function(m,x){if(null==m)return m;if(!ti(m))return l(m,x);for(var I=m.length,R=h?I:-1,L=Mn(m);(h?R--:++R<I)&&!1!==x(L[R],R,L););return m}}function bg(l){return function(h,m,x){for(var I=-1,R=Mn(h),L=x(h),q=L.length;q--;){var Z=L[l?q:++I];if(!1===m(R[Z],Z,R))break}return h}}function Ag(l){return function(h){var m=zi(h=nn(h))?Po(h):k,x=m?m[0]:h.charAt(0),I=m?$a(m,1).join(""):h.slice(1);return x[l]()+I}}function Gu(l){return function(h){return Zl(ru(N0(h).replace(DS,"")),l,"")}}function Ku(l){return function(){var h=arguments;switch(h.length){case 0:return new l;case 1:return new l(h[0]);case 2:return new l(h[0],h[1]);case 3:return new l(h[0],h[1],h[2]);case 4:return new l(h[0],h[1],h[2],h[3]);case 5:return new l(h[0],h[1],h[2],h[3],h[4]);case 6:return new l(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new l(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var m=ld(l.prototype),x=l.apply(m,h);return Yn(x)?x:m}}function Fy(l){return function(h,m,x){var I=Mn(h);if(!ti(h)){var R=yt(m,3);h=Hr(h),m=function(q){return R(I[q],q,I)}}var L=l(h,m,x);return L>-1?I[R?h[L]:L]:k}}function gi(l){return po(function(h){var m=h.length,x=m,I=kn.prototype.thru;for(l&&h.reverse();x--;){var R=h[x];if("function"!=typeof R)throw new Oo(Ai);if(I&&!L&&"wrapper"==Dg(R))var L=new kn([],!0)}for(x=L?x:m;++x<m;){var q=Dg(R=h[x]),Z="wrapper"==q?bd(R):k;L=Z&&Mg(Z[0])&&424==Z[1]&&!Z[4].length&&1==Z[9]?L[Dg(Z[0])].apply(L,Z[3]):1==R.length&&Mg(R)?L[q]():L.thru(R)}return function(){var be=arguments,Ae=be[0];if(L&&1==be.length&&Pt(Ae))return L.plant(Ae).value();for(var Ie=0,He=m?h[Ie].apply(this,be):Ae;++Ie<m;)He=h[Ie].call(this,He);return He}})}function Ls(l,h,m,x,I,R,L,q,Z,be){var Ae=128&h,Ie=1&h,He=2&h,st=24&h,wt=512&h,qt=He?k:Ku(l);return function At(){for(var Ft=arguments.length,rn=se(Ft),Wr=Ft;Wr--;)rn[Wr]=arguments[Wr];if(st)var Xn=Jc(At),yo=function Zp(J,ye){for(var se=J.length,Xe=0;se--;)J[se]===ye&&++Xe;return Xe}(rn,Xn);if(x&&(rn=ky(rn,x,I,st)),R&&(rn=Py(rn,R,L,st)),Ft-=yo,st&&Ft<be){var Un=ss(rn,Xn);return vd(l,h,Ls,At.placeholder,m,rn,Un,q,Z,be-Ft)}var Qi=Ie?m:this,ga=He?Qi[l]:l;return Ft=rn.length,q?rn=function px(l,h){for(var m=l.length,x=Ar(h.length,m),I=pi(l);x--;){var R=h[x];l[x]=ls(R,m)?I[R]:k}return l}(rn,q):wt&&Ft>1&&rn.reverse(),Ae&&Z<Ft&&(rn.length=Z),this&&this!==di&&this instanceof At&&(ga=qt||Ku(ga)),ga.apply(Qi,rn)}}function Qn(l,h){return function(m,x){return function by(l,h,m,x){return Bo(l,function(I,R,L){h(x,m(I),R,L)}),x}(m,l,h(x),{})}}function th(l,h){return function(m,x){var I;if(m===k&&x===k)return h;if(m!==k&&(I=m),x!==k){if(I===k)return x;"string"==typeof m||"string"==typeof x?(m=ho(m),x=ho(x)):(m=Sy(m),x=Sy(x)),I=l(m,x)}return I}}function xg(l){return po(function(h){return h=ze(h,uo(yt())),Ht(function(m){var x=this;return l(h,function(I){return Ei(I,x,m)})})})}function nh(l,h){var m=(h=h===k?" ":ho(h)).length;if(m<2)return m?Zf(h,l):h;var x=Zf(h,Wi(l/Rs(h)));return zi(h)?$a(Po(x),0,l).join(""):x.slice(0,l)}function Cg(l){return function(h,m,x){return x&&"number"!=typeof x&&mi(h,m,x)&&(m=x=k),h=ha(h),m===k?(m=h,h=0):m=ha(m),function Ey(l,h,m,x){for(var I=-1,R=tt(Wi((h-l)/(m||1)),0),L=se(R);R--;)L[x?R:++I]=l,l+=m;return L}(h,m,x=x===k?h<m?1:-1:ha(x),l)}}function md(l){return function(h,m){return"string"==typeof h&&"string"==typeof m||(h=Vo(h),m=Vo(m)),l(h,m)}}function vd(l,h,m,x,I,R,L,q,Z,be){var Ae=8&h;h|=Ae?32:64,4&(h&=~(Ae?64:32))||(h&=-4);var qt=[l,h,I,Ae?R:k,Ae?L:k,Ae?k:R,Ae?k:L,q,Z,be],At=m.apply(k,qt);return Mg(l)&&Gy(At,qt),At.placeholder=x,Ky(At,l,h)}function Us(l){var h=wr[l];return function(m,x){if(m=Vo(m),(x=null==x?0:Ar(zt(x),292))&&ur(m)){var I=(nn(m)+"e").split("e");return+((I=(nn(h(I[0]+"e"+(+I[1]+x)))+"e").split("e"))[0]+"e"+(+I[1]-x))}return h(m)}}var lx=Fu&&1/Bc(new Fu([,-0]))[1]==ln?function(l){return new Fu(l)}:zd;function yd(l){return function(h){var m=jr(h);return m==Oe?ko(h):m==ae?function jf(J){var ye=-1,se=Array(J.size);return J.forEach(function(Xe){se[++ye]=[Xe,Xe]}),se}(h):function PA(J,ye){return ze(ye,function(se){return[se,J[se]]})}(h,l(h))}}function jo(l,h,m,x,I,R,L,q){var Z=2&h;if(!Z&&"function"!=typeof l)throw new Oo(Ai);var be=x?x.length:0;if(be||(h&=-97,x=I=k),L=L===k?L:tt(zt(L),0),q=q===k?q:zt(q),be-=I?I.length:0,64&h){var Ae=x,Ie=I;x=I=k}var He=Z?k:bd(l),st=[l,h,m,x,I,Ae,Ie,R,L,q];if(He&&function Qu(l,h){var m=l[1],x=h[1],I=m|x;if(!(I<131)&&!(128==x&&8==m||128==x&&256==m&&l[7].length<=h[8]||384==x&&h[7].length<=h[8]&&8==m))return l;1&x&&(l[2]=h[2],I|=1&m?0:4);var q=h[3];if(q){var Z=l[3];l[3]=Z?ky(Z,q,h[4]):q,l[4]=Z?ss(l[3],no):h[4]}(q=h[5])&&(l[5]=(Z=l[5])?Py(Z,q,h[6]):q,l[6]=Z?ss(l[5],no):h[6]),(q=h[7])&&(l[7]=q),128&x&&(l[8]=null==l[8]?h[8]:Ar(l[8],h[8])),null==l[9]&&(l[9]=h[9]),l[0]=h[0],l[1]=I}(st,He),l=st[0],h=st[1],m=st[2],x=st[3],I=st[4],!(q=st[9]=st[9]===k?Z?0:l.length:tt(st[9]-be,0))&&24&h&&(h&=-25),h&&1!=h)wt=8==h||16==h?function ux(l,h,m){var x=Ku(l);return function I(){for(var R=arguments.length,L=se(R),q=R,Z=Jc(I);q--;)L[q]=arguments[q];var be=R<3&&L[0]!==Z&&L[R-1]!==Z?[]:ss(L,Z);return(R-=be.length)<m?vd(l,h,Ls,I.placeholder,k,L,be,k,k,m-R):Ei(this&&this!==di&&this instanceof I?x:l,this,L)}}(l,h,q):32!=h&&33!=h||I.length?Ls.apply(k,st):function cx(l,h,m,x){var I=1&h,R=Ku(l);return function L(){for(var q=-1,Z=arguments.length,be=-1,Ae=x.length,Ie=se(Ae+Z),He=this&&this!==di&&this instanceof L?R:l;++be<Ae;)Ie[be]=x[be];for(;Z--;)Ie[be++]=arguments[++q];return Ei(He,I?m:this,Ie)}}(l,h,m,x);else var wt=function Ny(l,h,m){var x=1&h,I=Ku(l);return function R(){return(this&&this!==di&&this instanceof R?I:l).apply(x?m:this,arguments)}}(l,h,m);return Ky((He?ix:Gy)(wt,st),l,h)}function wd(l,h,m,x){return l===k||fs(l,Lc[m])&&!Cn.call(x,m)?h:l}function rh(l,h,m,x,I,R){return Yn(l)&&Yn(h)&&(R.set(h,l),Jf(l,h,k,rh,R),R.delete(h)),l}function By(l){return cl(l)?k:l}function _g(l,h,m,x,I,R){var L=1&m,q=l.length,Z=h.length;if(q!=Z&&!(L&&Z>q))return!1;var be=R.get(l),Ae=R.get(h);if(be&&Ae)return be==h&&Ae==l;var Ie=-1,He=!0,st=2&m?new Ya:k;for(R.set(l,h),R.set(h,l);++Ie<q;){var wt=l[Ie],qt=h[Ie];if(x)var At=L?x(qt,wt,Ie,h,l,R):x(wt,qt,Ie,l,h,R);if(At!==k){if(At)continue;He=!1;break}if(st){if(!$l(h,function(Ft,rn){if(!Fc(st,rn)&&(wt===Ft||I(wt,Ft,m,x,R)))return st.push(rn)})){He=!1;break}}else if(wt!==qt&&!I(wt,qt,m,x,R)){He=!1;break}}return R.delete(l),R.delete(h),He}function po(l){return Cd(Pg(l,k,Xy),l+"")}function Eg(l){return ug(l,Hr,Sg)}function Ly(l){return ug(l,Gi,Zc)}var bd=Ga?function(l){return Ga.get(l)}:zd;function Dg(l){for(var h=l.name+"",m=Ms[h],x=Cn.call(Ms,h)?m.length:0;x--;){var I=m[x],R=I.func;if(null==R||R==l)return I.name}return h}function Jc(l){return(Cn.call(S,"placeholder")?S:l).placeholder}function yt(){var l=S.iteratee||mm;return l=l===mm?cs:l,arguments.length?l(arguments[0],arguments[1]):l}function Ig(l,h){var m=l.__data__;return function Rg(l){var h=typeof l;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==l:null===l}(h)?m["string"==typeof h?"string":"hash"]:m.map}function Uy(l){for(var h=Hr(l),m=h.length;m--;){var x=h[m],I=l[x];h[m]=[x,I,kg(I)]}return h}function fa(l,h){var m=function FA(J,ye){return null==J?k:J[ye]}(l,h);return dg(m)?m:k}var Sg=Lr?function(l){return null==l?[]:(l=Mn(l),on(Lr(l),function(h){return ng.call(l,h)}))}:G0,Zc=Lr?function(l){for(var h=[];l;)Ts(h,Sg(l)),l=Ha(l);return h}:G0,jr=hi;function Tg(l,h,m){for(var x=-1,I=(h=Fs(h,l)).length,R=!1;++x<I;){var L=Ii(h[x]);if(!(R=null!=l&&m(l,L)))break;l=l[L]}return R||++x!=I?R:!!(I=null==l?0:l.length)&&Ch(I)&&ls(L,I)&&(Pt(l)||$u(l))}function jy(l){return"function"!=typeof l.constructor||el(l)?{}:ld(Ha(l))}function oh(l){return Pt(l)||$u(l)||!!(ad&&l&&l[ad])}function ls(l,h){var m=typeof l;return!!(h=h??Do)&&("number"==m||"symbol"!=m&&CS.test(l))&&l>-1&&l%1==0&&l<h}function mi(l,h,m){if(!Yn(m))return!1;var x=typeof h;return!!("number"==x?ti(m)&&ls(h,m.length):"string"==x&&h in m)&&fs(m[h],l)}function $c(l,h){if(Pt(l))return!1;var m=typeof l;return!("number"!=m&&"symbol"!=m&&"boolean"!=m&&null!=l&&!mo(l))||Df.test(l)||!Ef.test(l)||null!=h&&l in Mn(h)}function Mg(l){var h=Dg(l),m=S[h];if("function"!=typeof m||!(h in Qt.prototype))return!1;if(l===m)return!0;var x=bd(m);return!!x&&l===x[0]}(qa&&jr(new qa(new ArrayBuffer(1)))!=Rn||Vi&&jr(new Vi)!=Oe||Nu&&jr(Nu.resolve())!=Ue||Fu&&jr(new Fu)!=ae||No&&jr(new No)!=Kt)&&(jr=function(l){var h=hi(l),m=h==ct?l.constructor:k,x=m?Ho(m):"";if(x)switch(x){case Yt:return Rn;case FS:return Oe;case rg:return Ue;case py:return ae;case ks:return Kt}return h});var Wy=Hf?nu:K0;function el(l){var h=l&&l.constructor;return l===("function"==typeof h&&h.prototype||Lc)}function kg(l){return l==l&&!Yn(l)}function Vy(l,h){return function(m){return null!=m&&m[l]===h&&(h!==k||l in Mn(m))}}function Pg(l,h,m){return h=tt(h===k?l.length-1:h,0),function(){for(var x=arguments,I=-1,R=tt(x.length-h,0),L=se(R);++I<R;)L[I]=x[h+I];I=-1;for(var q=se(h+1);++I<h;)q[I]=x[I];return q[h]=m(L),Ei(l,this,q)}}function tl(l,h){return h.length<2?l:Hu(l,Lo(h,0,-1))}function $r(l,h){if(("constructor"!==h||"function"!=typeof l[h])&&"__proto__"!=h)return l[h]}var Gy=Og(ix),xd=Kn||function(l,h){return di.setTimeout(l,h)},Cd=Og(ox);function Ky(l,h,m){var x=h+"";return Cd(l,function fx(l,h){var m=h.length;if(!m)return l;var x=m-1;return h[x]=(m>1?"& ":"")+h[x],h=h.join(m>2?", ":" "),l.replace(Ui,"{\n/* [wrapped with "+h+"] */\n")}(x,function Qy(l,h){return Bn(pe,function(m){var x="_."+m[0];h&m[1]&&!Qp(l,x)&&l.push(x)}),l.sort()}(function $S(l){var h=l.match(Xr);return h?h[1].split(os):[]}(x),m)))}function Og(l){var h=0,m=0;return function(){var x=hy(),I=16-(x-m);if(m=x,I>0){if(++h>=800)return arguments[0]}else h=0;return l.apply(k,arguments)}}function nl(l,h){var m=-1,x=l.length,I=x-1;for(h=h===k?x:h;++m<h;){var R=pg(m,I),L=l[R];l[R]=l[m],l[m]=L}return l.length=h,l}var Yu=function sh(l){var h=Id(l,function(x){return 500===m.size&&m.clear(),x}),m=h.cache;return h}(function(l){var h=[];return 46===l.charCodeAt(0)&&h.push(""),l.replace(If,function(m,x,I,R){h.push(I?R.replace(Sf,"$1"):x||m)}),h});function Ii(l){if("string"==typeof l||mo(l))return l;var h=l+"";return"0"==h&&1/l==-ln?"-0":h}function Ho(l){if(null!=l){try{return dn.call(l)}catch{}try{return l+""}catch{}}return""}function ah(l){if(l instanceof Qt)return l.clone();var h=new kn(l.__wrapped__,l.__chain__);return h.__actions__=pi(l.__actions__),h.__index__=l.__index__,h.__values__=l.__values__,h}var t2=Ht(function(l,h){return or(l)?qc(l,zr(h,1,or,!0)):[]}),n2=Ht(function(l,h){var m=ds(h);return or(m)&&(m=k),or(l)?qc(l,zr(h,1,or,!0),yt(m,2)):[]}),r2=Ht(function(l,h){var m=ds(h);return or(m)&&(m=k),or(l)?qc(l,zr(h,1,or,!0),k,m):[]});function Yy(l,h,m){var x=null==l?0:l.length;if(!x)return-1;var I=null==m?0:zt(m);return I<0&&(I=tt(x+I,0)),Xp(l,yt(h,3),I)}function xr(l,h,m){var x=null==l?0:l.length;if(!x)return-1;var I=x-1;return m!==k&&(I=zt(m),I=m<0?tt(x+I,0):Ar(I,x-1)),Xp(l,yt(h,3),I,!0)}function Xy(l){return null!=l&&l.length?zr(l,1):[]}function Xu(l){return l&&l.length?l[0]:k}var Ed=Ht(function(l){var h=ze(l,Vu);return h.length&&h[0]===l[0]?lg(h):[]}),yx=Ht(function(l){var h=ds(l),m=ze(l,Vu);return h===ds(m)?h=k:m.pop(),m.length&&m[0]===l[0]?lg(m,yt(h,2)):[]}),a2=Ht(function(l){var h=ds(l),m=ze(l,Vu);return(h="function"==typeof h?h:k)&&m.pop(),m.length&&m[0]===l[0]?lg(m,k,h):[]});function ds(l){var h=null==l?0:l.length;return h?l[h-1]:k}var ol=Ht(bx);function bx(l,h){return l&&l.length&&h&&h.length?Ns(l,h):l}var xx=po(function(l,h){var m=null==l?0:l.length,x=qf(l,h);return hg(l,ze(h,function(I){return ls(I,m)?+I:I}).sort(Ry)),x});function Fg(l){return null==l?l:cd.call(l)}var Rx=Ht(function(l){return Za(zr(l,1,or,!0))}),sl=Ht(function(l){var h=ds(l);return or(h)&&(h=k),Za(zr(l,1,or,!0),yt(h,2))}),Dd=Ht(function(l){var h=ds(l);return h="function"==typeof h?h:k,Za(zr(l,1,or,!0),k,h)});function jg(l){if(!l||!l.length)return[];var h=0;return l=on(l,function(m){if(or(m))return h=tt(m.length,h),!0}),ja(h,function(m){return ze(l,Nc(m))})}function kx(l,h){if(!l||!l.length)return[];var m=jg(l);return null==h?m:ze(m,function(x){return Ei(h,k,x)})}var Px=Ht(function(l,h){return or(l)?qc(l,h):[]}),Ox=Ht(function(l){return Mr(on(l,or))}),Nx=Ht(function(l){var h=ds(l);return or(h)&&(h=k),Mr(on(l,or),yt(h,2))}),dh=Ht(function(l){var h=ds(l);return h="function"==typeof h?h:k,Mr(on(l,or),k,h)}),n0=Ht(jg),c2=Ht(function(l){var h=l.length,m=h>1?l[h-1]:k;return m="function"==typeof m?(l.pop(),m):k,kx(l,m)});function Hg(l){var h=S(l);return h.__chain__=!0,h}function fh(l,h){return h(l)}var Bx=po(function(l){var h=l.length,m=h?l[0]:0,x=this.__wrapped__,I=function(R){return qf(R,l)};return!(h>1||this.__actions__.length)&&x instanceof Qt&&ls(m)?((x=x.slice(m,+m+(h?1:0))).__actions__.push({func:fh,args:[I],thisArg:k}),new kn(x,this.__chain__).thru(function(R){return h&&!R.length&&R.push(k),R})):this.thru(I)}),m2=$f(function(l,h,m){Cn.call(l,m)?++l[m]:us(l,m,1)}),hh=Fy(Yy),ph=Fy(xr);function Ju(l,h){return(Pt(l)?Bn:ju)(l,yt(h,3))}function qg(l,h){return(Pt(l)?ry:qA)(l,yt(h,3))}var u0=$f(function(l,h,m){Cn.call(l,m)?l[m].push(h):us(l,m,[h])}),mh=Ht(function(l,h,m){var x=-1,I="function"==typeof h,R=ti(l)?se(l.length):[];return ju(l,function(L){R[++x]=I?Ei(h,L,m):pd(L,h,m)}),R}),eu=$f(function(l,h,m){us(l,m,h)});function vh(l,h){return(Pt(l)?ze:Xf)(l,yt(h,3))}var zx=$f(function(l,h,m){l[m?0:1].push(h)},function(){return[[],[]]}),Si=Ht(function(l,h){if(null==l)return[];var m=h.length;return m>1&&mi(l,h[0],h[1])?h=[]:m>2&&mi(h[0],h[1],h[2])&&(h=[h[0]]),qi(l,zr(h,1),[])}),al=kt||function(){return di.Date.now()};function yh(l,h,m){return h=m?k:h,jo(l,128,k,k,k,k,h=l&&null==h?l.length:h)}function ei(l,h){var m;if("function"!=typeof h)throw new Oo(Ai);return l=zt(l),function(){return--l>0&&(m=h.apply(this,arguments)),l<=1&&(h=k),m}}var Zu=Ht(function(l,h,m){var x=1;if(m.length){var I=ss(m,Jc(Zu));x|=32}return jo(l,x,h,m,I)}),Kg=Ht(function(l,h,m){var x=3;if(m.length){var I=ss(m,Jc(Kg));x|=32}return jo(h,x,l,m,I)});function Yg(l,h,m){var x,I,R,L,q,Z,be=0,Ae=!1,Ie=!1,He=!0;if("function"!=typeof l)throw new Oo(Ai);function st(Un){var Qi=x,ga=I;return x=I=k,be=Un,L=l.apply(ga,Qi)}function At(Un){var Qi=Un-Z;return Z===k||Qi>=h||Qi<0||Ie&&Un-be>=R}function Ft(){var Un=al();if(At(Un))return rn(Un);q=xd(Ft,function qt(Un){var Y0=h-(Un-Z);return Ie?Ar(Y0,R-(Un-be)):Y0}(Un))}function rn(Un){return q=k,He&&x?st(Un):(x=I=k,L)}function yo(){var Un=al(),Qi=At(Un);if(x=arguments,I=this,Z=Un,Qi){if(q===k)return function wt(Un){return be=Un,q=xd(Ft,h),Ae?st(Un):L}(Z);if(Ie)return ax(q),q=xd(Ft,h),st(Z)}return q===k&&(q=xd(Ft,h)),L}return h=Vo(h)||0,Yn(m)&&(Ae=!!m.leading,R=(Ie="maxWait"in m)?tt(Vo(m.maxWait)||0,h):R,He="trailing"in m?!!m.trailing:He),yo.cancel=function Wr(){q!==k&&ax(q),be=0,x=Z=I=q=k},yo.flush=function Xn(){return q===k?L:rn(al())},yo}var Gx=Ht(function(l,h){return zu(l,1,h)}),h0=Ht(function(l,h,m){return zu(l,Vo(h)||0,m)});function Id(l,h){if("function"!=typeof l||null!=h&&"function"!=typeof h)throw new Oo(Ai);var m=function(){var x=arguments,I=h?h.apply(this,x):x[0],R=m.cache;if(R.has(I))return R.get(I);var L=l.apply(this,x);return m.cache=R.set(I,L)||R,L};return m.cache=new(Id.Cache||Qa),m}function wh(l){if("function"!=typeof l)throw new Oo(Ai);return function(){var h=arguments;switch(h.length){case 0:return!l.call(this);case 1:return!l.call(this,h[0]);case 2:return!l.call(this,h[0],h[1]);case 3:return!l.call(this,h[0],h[1],h[2])}return!l.apply(this,h)}}Id.Cache=Qa;var Xg=vg(function(l,h){var m=(h=1==h.length&&Pt(h[0])?ze(h[0],uo(yt())):ze(zr(h,1),uo(yt()))).length;return Ht(function(x){for(var I=-1,R=Ar(x.length,m);++I<R;)x[I]=h[I].call(this,x[I]);return Ei(l,this,x)})}),Sd=Ht(function(l,h){var m=ss(h,Jc(Sd));return jo(l,32,k,h,m)}),p0=Ht(function(l,h){var m=ss(h,Jc(p0));return jo(l,64,k,h,m)}),Td=po(function(l,h){return jo(l,256,k,k,k,h)});function fs(l,h){return l===h||l!=l&&h!=h}var Zx=md(cg),$x=md(function(l,h){return l>=h}),$u=XA(function(){return arguments}())?XA:function(l){return sr(l)&&Cn.call(l,"callee")&&!ng.call(l,"callee")},Pt=se.isArray,w0=Xl?uo(Xl):function Ay(l){return sr(l)&&hi(l)==nr};function ti(l){return null!=l&&Ch(l.length)&&!nu(l)}function or(l){return sr(l)&&ti(l)}var tu=Uc||K0,e1=Jl?uo(Jl):function Gc(l){return sr(l)&&hi(l)==Be};function xh(l){if(!sr(l))return!1;var h=hi(l);return h==Me||"[object DOMException]"==h||"string"==typeof l.message&&"string"==typeof l.name&&!cl(l)}function nu(l){if(!Yn(l))return!1;var h=hi(l);return h==Ve||h==ke||"[object AsyncFunction]"==h||"[object Proxy]"==h}function Rd(l){return"number"==typeof l&&l==zt(l)}function Ch(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=Do}function Yn(l){var h=typeof l;return null!=l&&("object"==h||"function"==h)}function sr(l){return null!=l&&"object"==typeof l}var em=Bf?uo(Bf):function ZA(l){return sr(l)&&jr(l)==Oe};function kd(l){return"number"==typeof l||sr(l)&&hi(l)==Se}function cl(l){if(!sr(l)||hi(l)!=ct)return!1;var h=Ha(l);if(null===h)return!0;var m=Cn.call(h,"constructor")&&h.constructor;return"function"==typeof m&&m instanceof m&&dn.call(m)==zA}var Pd=Kp?uo(Kp):function $A(l){return sr(l)&&hi(l)==Le},_0=ty?uo(ty):function fg(l){return sr(l)&&jr(l)==ae};function Nd(l){return"string"==typeof l||!Pt(l)&&sr(l)&&hi(l)==me}function mo(l){return"symbol"==typeof l||sr(l)&&hi(l)==qe}var ll=Zt?uo(Zt):function ex(l){return sr(l)&&Ch(l.length)&&!!Nn[hi(l)]},Eh=md(Tn),rm=md(function(l,h){return l<=h});function tc(l){if(!l)return[];if(ti(l))return Nd(l)?Po(l):pi(l);if(ud&&l[ud])return function Mo(J){for(var ye,se=[];!(ye=J.next()).done;)se.push(ye.value);return se}(l[ud]());var h=jr(l);return(h==Oe?ko:h==ae?Bc:dl)(l)}function ha(l){return l?(l=Vo(l))===ln||l===-ln?17976931348623157e292*(l<0?-1:1):l==l?l:0:0===l?l:0}function zt(l){var h=ha(l),m=h%1;return h==h?m?h-m:h:0}function r1(l){return l?Ja(zt(l),0,K):0}function Vo(l){if("number"==typeof l)return l;if(mo(l))return NaN;if(Yn(l)){var h="function"==typeof l.valueOf?l.valueOf():l;l=Yn(h)?h+"":h}if("string"!=typeof l)return 0===l?l:+l;l=aa(l);var m=Mc.test(l);return m||Tf.test(l)?PS(l.slice(2),m?2:8):yA.test(l)?NaN:+l}function Dh(l){return zo(l,Gi(l))}function nn(l){return null==l?"":ho(l)}var Ih=qu(function(l,h){if(el(h)||ti(h))zo(h,Hr(h),l);else for(var m in h)Cn.call(h,m)&&Wc(l,m,h[m])}),Sh=qu(function(l,h){zo(h,Gi(h),l)}),Fd=qu(function(l,h,m,x){zo(h,Gi(h),l,x)}),I0=qu(function(l,h,m,x){zo(h,Hr(h),l,x)}),S0=po(qf),o1=Ht(function(l,h){l=Mn(l);var m=-1,x=h.length,I=x>2?h[2]:k;for(I&&mi(h[0],h[1],I)&&(x=1);++m<x;)for(var R=h[m],L=Gi(R),q=-1,Z=L.length;++q<Z;){var be=L[q],Ae=l[be];(Ae===k||fs(Ae,Lc[be])&&!Cn.call(l,be))&&(l[be]=R[be])}return l}),s1=Ht(function(l){return l.push(k,rh),Ei(sm,k,l)});function im(l,h,m){var x=null==l?k:Hu(l,h);return x===k?m:x}function om(l,h){return null!=l&&Tg(l,h,YA)}var T0=Qn(function(l,h,m){null!=h&&"function"!=typeof h.toString&&(h=ji.call(h)),l[h]=m},Ud(vi)),p1=Qn(function(l,h,m){null!=h&&"function"!=typeof h.toString&&(h=ji.call(h)),Cn.call(l,h)?l[h].push(m):l[h]=[m]},yt),g1=Ht(pd);function Hr(l){return ti(l)?Ur(l):Yf(l)}function Gi(l){return ti(l)?Ur(l,!0):function xy(l){if(!Yn(l))return function hx(l){var h=[];if(null!=l)for(var m in Mn(l))h.push(m);return h}(l);var h=el(l),m=[];for(var x in l)"constructor"==x&&(h||!Cn.call(l,x))||m.push(x);return m}(l)}var Bd=qu(function(l,h,m){Jf(l,h,m)}),sm=qu(function(l,h,m,x){Jf(l,h,m,x)}),R0=po(function(l,h){var m={};if(null==l)return m;var x=!1;h=ze(h,function(R){return R=Fs(R,l),x||(x=R.length>1),R}),zo(l,Ly(l),m),x&&(m=fo(m,7,By));for(var I=h.length;I--;)Ce(m,h[I]);return m}),y2=po(function(l,h){return null==l?{}:function tx(l,h){return _y(l,h,function(m,x){return om(l,x)})}(l,h)});function m1(l,h){if(null==l)return{};var m=ze(Ly(l),function(x){return[x]});return h=yt(h),_y(l,m,function(x,I){return h(x,I[0])})}var v1=yd(Hr),y1=yd(Gi);function dl(l){return null==l?[]:Ze(l,Hr(l))}var x1=Gu(function(l,h,m){return h=h.toLowerCase(),l+(m?Ki(h):h)});function Ki(l){return Ph(nn(l).toLowerCase())}function N0(l){return(l=nn(l))&&l.replace(wA,nd).replace(EA,"")}var _1=Gu(function(l,h,m){return l+(m?"-":"")+h.toLowerCase()}),E1=Gu(function(l,h,m){return l+(m?" ":"")+h.toLowerCase()}),D1=Ag("toLowerCase"),F0=Gu(function(l,h,m){return l+(m?"_":"")+h.toLowerCase()}),dm=Gu(function(l,h,m){return l+(m?" ":"")+Ph(h)}),z0=Gu(function(l,h,m){return l+(m?" ":"")+h.toUpperCase()}),Ph=Ag("toUpperCase");function ru(l,h,m){return l=nn(l),(h=m?k:h)===k?function zf(J){return SS.test(J)}(l)?function rd(J){return J.match(Pu)||[]}(l):function OS(J){return J.match(oa)||[]}(l):l.match(h)||[]}var j0=Ht(function(l,h){try{return Ei(l,k,h)}catch(m){return xh(m)?m:new mt(m)}}),gm=po(function(l,h){return Bn(h,function(m){m=Ii(m),us(l,m,Zu(l[m],l))}),l});function Ud(l){return function(){return l}}var Hs=gi(),fl=gi(!0);function vi(l){return l}function mm(l){return cs("function"==typeof l?l:fo(l,1))}var hl=Ht(function(l,h){return function(m){return pd(m,l,h)}}),P1=Ht(function(l,h){return function(m){return pd(l,m,h)}});function vm(l,h,m){var x=Hr(h),I=ag(h,x);null==m&&(!Yn(h)||!I.length&&x.length)&&(m=h,h=l,l=this,I=ag(h,Hr(h)));var R=!(Yn(m)&&"chain"in m&&!m.chain),L=nu(l);return Bn(I,function(q){var Z=h[q];l[q]=Z,L&&(l.prototype[q]=function(){var be=this.__chain__;if(R||be){var Ae=l(this.__wrapped__);return(Ae.__actions__=pi(this.__actions__)).push({func:Z,args:arguments,thisArg:l}),Ae.__chain__=be,Ae}return Z.apply(l,Ts([this.value()],arguments))})}),l}function zd(){}var N1=xg(ze),W0=xg(TA),iu=xg($l);function F1(l){return $c(l)?Nc(Ii(l)):function nx(l){return function(h){return Hu(h,l)}}(l)}var q0=Cg(),B1=Cg(!0);function G0(){return[]}function K0(){return!1}var Am=th(function(l,h){return l+h},0),jd=Us("ceil"),Lh=th(function(l,h){return l/h},1),gl=Us("floor"),U1=th(function(l,h){return l*h},1),Q0=Us("round"),z1=th(function(l,h){return l-h},0);return S.after=function d0(l,h){if("function"!=typeof h)throw new Oo(Ai);return l=zt(l),function(){if(--l<1)return h.apply(this,arguments)}},S.ary=yh,S.assign=Ih,S.assignIn=Sh,S.assignInWith=Fd,S.assignWith=I0,S.at=S0,S.before=ei,S.bind=Zu,S.bindAll=gm,S.bindKey=Kg,S.castArray=function ul(){if(!arguments.length)return[];var l=arguments[0];return Pt(l)?l:[l]},S.chain=Hg,S.chunk=function rl(l,h,m){h=(m?mi(l,h,m):h===k)?1:tt(zt(h),0);var x=null==l?0:l.length;if(!x||h<1)return[];for(var I=0,R=0,L=se(Wi(x/h));I<x;)L[R++]=Lo(l,I,I+=h);return L},S.compact=function e2(l){for(var h=-1,m=null==l?0:l.length,x=0,I=[];++h<m;){var R=l[h];R&&(I[x++]=R)}return I},S.concat=function gx(){var l=arguments.length;if(!l)return[];for(var h=se(l-1),m=arguments[0],x=l;x--;)h[x-1]=arguments[x];return Ts(Pt(m)?pi(m):[m],zr(h,1))},S.cond=function Oh(l){var h=null==l?0:l.length,m=yt();return l=h?ze(l,function(x){if("function"!=typeof x[1])throw new Oo(Ai);return[m(x[0]),x[1]]}):[],Ht(function(x){for(var I=-1;++I<h;){var R=l[I];if(Ei(R[0],this,x))return Ei(R[1],this,x)}})},S.conforms=function M1(l){return function Gf(l){var h=Hr(l);return function(m){return Vc(m,l,h)}}(fo(l,1))},S.constant=Ud,S.countBy=m2,S.create=function nc(l,h){var m=ld(l);return null==h?m:og(m,h)},S.curry=function Qg(l,h,m){var x=jo(l,8,k,k,k,k,k,h=m?k:h);return x.placeholder=Qg.placeholder,x},S.curryRight=function f0(l,h,m){var x=jo(l,16,k,k,k,k,k,h=m?k:h);return x.placeholder=f0.placeholder,x},S.debounce=Yg,S.defaults=o1,S.defaultsDeep=s1,S.defer=Gx,S.delay=h0,S.difference=t2,S.differenceBy=n2,S.differenceWith=r2,S.drop=function i2(l,h,m){var x=null==l?0:l.length;return x?Lo(l,(h=m||h===k?1:zt(h))<0?0:h,x):[]},S.dropRight=function o2(l,h,m){var x=null==l?0:l.length;return x?Lo(l,0,(h=x-(h=m||h===k?1:zt(h)))<0?0:h):[]},S.dropRightWhile=function s2(l,h){return l&&l.length?ve(l,yt(h,3),!0,!0):[]},S.dropWhile=function il(l,h){return l&&l.length?ve(l,yt(h,3),!0):[]},S.fill=function mx(l,h,m,x){var I=null==l?0:l.length;return I?(m&&"number"!=typeof m&&mi(l,h,m)&&(m=0,x=I),function GA(l,h,m,x){var I=l.length;for((m=zt(m))<0&&(m=-m>I?0:I+m),(x=x===k||x>I?I:zt(x))<0&&(x+=I),x=m>x?0:r1(x);m<x;)l[m++]=h;return l}(l,h,m,x)):[]},S.filter=function Lx(l,h){return(Pt(l)?on:KA)(l,yt(h,3))},S.flatMap=function o0(l,h){return zr(vh(l,h),1)},S.flatMapDeep=function s0(l,h){return zr(vh(l,h),ln)},S.flatMapDepth=function a0(l,h,m){return m=m===k?1:zt(m),zr(vh(l,h),m)},S.flatten=Xy,S.flattenDeep=function _d(l){return null!=l&&l.length?zr(l,ln):[]},S.flattenDepth=function vx(l,h){return null!=l&&l.length?zr(l,h=h===k?1:zt(h)):[]},S.flip=function Kx(l){return jo(l,512)},S.flow=Hs,S.flowRight=fl,S.fromPairs=function Wo(l){for(var h=-1,m=null==l?0:l.length,x={};++h<m;){var I=l[h];x[I[0]]=I[1]}return x},S.functions=function d1(l){return null==l?[]:ag(l,Hr(l))},S.functionsIn=function f1(l){return null==l?[]:ag(l,Gi(l))},S.groupBy=u0,S.initial=function uh(l){return null!=l&&l.length?Lo(l,0,-1):[]},S.intersection=Ed,S.intersectionBy=yx,S.intersectionWith=a2,S.invert=T0,S.invertBy=p1,S.invokeMap=mh,S.iteratee=mm,S.keyBy=eu,S.keys=Hr,S.keysIn=Gi,S.map=vh,S.mapKeys=function Th(l,h){var m={};return h=yt(h,3),Bo(l,function(x,I,R){us(m,h(x,I,R),x)}),m},S.mapValues=function pa(l,h){var m={};return h=yt(h,3),Bo(l,function(x,I,R){us(m,I,h(x,I,R))}),m},S.matches=function k1(l){return gd(fo(l,1))},S.matchesProperty=function H0(l,h){return Di(l,fo(h,1))},S.memoize=Id,S.merge=Bd,S.mergeWith=sm,S.method=hl,S.methodOf=P1,S.mixin=vm,S.negate=wh,S.nthArg=function Fh(l){return l=zt(l),Ht(function(h){return Wu(h,l)})},S.omit=R0,S.omitBy=function M0(l,h){return m1(l,wh(yt(h)))},S.once=function Qx(l){return ei(2,l)},S.orderBy=function Ux(l,h,m,x){return null==l?[]:(Pt(h)||(h=null==h?[]:[h]),Pt(m=x?k:m)||(m=null==m?[]:[m]),qi(l,h,m))},S.over=N1,S.overArgs=Xg,S.overEvery=W0,S.overSome=iu,S.partial=Sd,S.partialRight=p0,S.partition=zx,S.pick=y2,S.pickBy=m1,S.property=F1,S.propertyOf=function V0(l){return function(h){return null==l?k:Hu(l,h)}},S.pull=ol,S.pullAll=bx,S.pullAllBy=function Zy(l,h,m){return l&&l.length&&h&&h.length?Ns(l,h,yt(m,2)):l},S.pullAllWith=function Ax(l,h,m){return l&&l.length&&h&&h.length?Ns(l,h,k,m):l},S.pullAt=xx,S.range=q0,S.rangeRight=B1,S.rearg=Td,S.reject=function jx(l,h){return(Pt(l)?on:KA)(l,wh(yt(h,3)))},S.remove=function Cx(l,h){var m=[];if(!l||!l.length)return m;var x=-1,I=[],R=l.length;for(h=yt(h,3);++x<R;){var L=l[x];h(L,x,l)&&(m.push(L),I.push(x))}return hg(l,I),m},S.rest=function Yx(l,h){if("function"!=typeof l)throw new Oo(Ai);return Ht(l,h=h===k?h:zt(h))},S.reverse=Fg,S.sampleSize=function Wx(l,h,m){return h=(m?mi(l,h,m):h===k)?1:zt(h),(Pt(l)?Fo:Dt)(l,h)},S.set=function am(l,h,m){return null==l?l:Qc(l,h,m)},S.setWith=function um(l,h,m,x){return x="function"==typeof x?x:k,null==l?l:Qc(l,h,m,x)},S.shuffle=function l0(l){return(Pt(l)?my:sx)(l)},S.slice=function _x(l,h,m){var x=null==l?0:l.length;return x?(m&&"number"!=typeof m&&mi(l,h,m)?(h=0,m=x):(h=null==h?0:zt(h),m=m===k?x:zt(m)),Lo(l,h,m)):[]},S.sortBy=Si,S.sortedUniq=function Ug(l){return l&&l.length?Iy(l):[]},S.sortedUniqBy=function Sx(l,h){return l&&l.length?Iy(l,yt(h,2)):[]},S.split=function B0(l,h,m){return m&&"number"!=typeof m&&mi(l,h,m)&&(h=m=k),(m=m===k?K:m>>>0)?(l=nn(l))&&("string"==typeof h||null!=h&&!Pd(h))&&!(h=ho(h))&&zi(l)?$a(Po(l),0,m):l.split(h,m):[]},S.spread=function Xx(l,h){if("function"!=typeof l)throw new Oo(Ai);return h=null==h?0:tt(zt(h),0),Ht(function(m){var x=m[h],I=$a(m,0,h);return x&&Ts(I,x),Ei(l,this,I)})},S.tail=function $y(l){var h=null==l?0:l.length;return h?Lo(l,1,h):[]},S.take=function zg(l,h,m){return l&&l.length?Lo(l,0,(h=m||h===k?1:zt(h))<0?0:h):[]},S.takeRight=function lh(l,h,m){var x=null==l?0:l.length;return x?Lo(l,(h=x-(h=m||h===k?1:zt(h)))<0?0:h,x):[]},S.takeRightWhile=function e0(l,h){return l&&l.length?ve(l,yt(h,3),!1,!0):[]},S.takeWhile=function Tx(l,h){return l&&l.length?ve(l,yt(h,3)):[]},S.tap=function l2(l,h){return h(l),l},S.throttle=function g0(l,h,m){var x=!0,I=!0;if("function"!=typeof l)throw new Oo(Ai);return Yn(m)&&(x="leading"in m?!!m.leading:x,I="trailing"in m?!!m.trailing:I),Yg(l,h,{leading:x,maxWait:h,trailing:I})},S.thru=fh,S.toArray=tc,S.toPairs=v1,S.toPairsIn=y1,S.toPath=function pl(l){return Pt(l)?ze(l,Ii):mo(l)?[l]:pi(Yu(nn(l)))},S.toPlainObject=Dh,S.transform=function k0(l,h,m){var x=Pt(l),I=x||tu(l)||ll(l);if(h=yt(h,4),null==m){var R=l&&l.constructor;m=I?x?new R:[]:Yn(l)&&nu(R)?ld(Ha(l)):{}}return(I?Bn:Bo)(l,function(L,q,Z){return h(m,L,q,Z)}),m},S.unary=function m0(l){return yh(l,1)},S.union=Rx,S.unionBy=sl,S.unionWith=Dd,S.uniq=function Mx(l){return l&&l.length?Za(l):[]},S.uniqBy=function u2(l,h){return l&&l.length?Za(l,yt(h,2)):[]},S.uniqWith=function t0(l,h){return h="function"==typeof h?h:k,l&&l.length?Za(l,k,h):[]},S.unset=function w1(l,h){return null==l||Ce(l,h)},S.unzip=jg,S.unzipWith=kx,S.update=function b1(l,h,m){return null==l?l:tn(l,h,Uo(m))},S.updateWith=function A1(l,h,m,x){return x="function"==typeof x?x:k,null==l?l:tn(l,h,Uo(m),x)},S.values=dl,S.valuesIn=function P0(l){return null==l?[]:Ze(l,Gi(l))},S.without=Px,S.words=ru,S.wrap=function v0(l,h){return Sd(Uo(h),l)},S.xor=Ox,S.xorBy=Nx,S.xorWith=dh,S.zip=n0,S.zipObject=function Fx(l,h){return mg(l||[],h||[],Wc)},S.zipObjectDeep=function r0(l,h){return mg(l||[],h||[],Qc)},S.zipWith=c2,S.entries=v1,S.entriesIn=y1,S.extend=Sh,S.extendWith=Fd,vm(S,S),S.add=Am,S.attempt=j0,S.camelCase=x1,S.capitalize=Ki,S.ceil=jd,S.clamp=function Rh(l,h,m){return m===k&&(m=h,h=k),m!==k&&(m=(m=Vo(m))==m?m:0),h!==k&&(h=(h=Vo(h))==h?h:0),Ja(Vo(l),h,m)},S.clone=function bh(l){return fo(l,4)},S.cloneDeep=function Jg(l){return fo(l,5)},S.cloneDeepWith=function Ah(l,h){return fo(l,5,h="function"==typeof h?h:k)},S.cloneWith=function y0(l,h){return fo(l,4,h="function"==typeof h?h:k)},S.conformsTo=function Jx(l,h){return null==h||Vc(l,h,Hr(h))},S.deburr=N0,S.defaultTo=function Nh(l,h){return null==l||l!=l?h:l},S.divide=Lh,S.endsWith=function C1(l,h,m){l=nn(l),h=ho(h);var x=l.length,I=m=m===k?x:Ja(zt(m),0,x);return(m-=h.length)>=0&&l.slice(m,I)==h},S.eq=fs,S.escape=function It(l){return(l=nn(l))&&Mu.test(l)?l.replace(Ru,OA):l},S.escapeRegExp=function lm(l){return(l=nn(l))&&dr.test(l)?l.replace(Ua,"\\$&"):l},S.every=function v2(l,h,m){var x=Pt(l)?TA:ZS;return m&&mi(l,h,m)&&(h=k),x(l,yt(h,3))},S.find=hh,S.findIndex=Yy,S.findKey=function a1(l,h){return MA(l,yt(h,3),Bo)},S.findLast=ph,S.findLastIndex=xr,S.findLastKey=function u1(l,h){return MA(l,yt(h,3),yy)},S.floor=gl,S.forEach=Ju,S.forEachRight=qg,S.forIn=function c1(l,h){return null==l?l:hd(l,yt(h,3),Gi)},S.forInRight=function vo(l,h){return null==l?l:vy(l,yt(h,3),Gi)},S.forOwn=function js(l,h){return l&&Bo(l,yt(h,3))},S.forOwnRight=function l1(l,h){return l&&yy(l,yt(h,3))},S.get=im,S.gt=Zx,S.gte=$x,S.has=function h1(l,h){return null!=l&&Tg(l,h,QA)},S.hasIn=om,S.head=Xu,S.identity=vi,S.includes=function gh(l,h,m,x){l=ti(l)?l:dl(l),m=m&&!x?zt(m):0;var I=l.length;return m<0&&(m=tt(I+m,0)),Nd(l)?m<=I&&l.indexOf(h,m)>-1:!!I&&ed(l,h,m)>-1},S.indexOf=function Jy(l,h,m){var x=null==l?0:l.length;if(!x)return-1;var I=null==m?0:zt(m);return I<0&&(I=tt(x+I,0)),ed(l,h,I)},S.inRange=function O0(l,h,m){return h=ha(h),m===k?(m=h,h=0):m=ha(m),function wy(l,h,m){return l>=Ar(h,m)&&l<tt(h,m)}(l=Vo(l),h,m)},S.invoke=g1,S.isArguments=$u,S.isArray=Pt,S.isArrayBuffer=w0,S.isArrayLike=ti,S.isArrayLikeObject=or,S.isBoolean=function Zg(l){return!0===l||!1===l||sr(l)&&hi(l)==ne},S.isBuffer=tu,S.isDate=e1,S.isElement=function $g(l){return sr(l)&&1===l.nodeType&&!cl(l)},S.isEmpty=function b0(l){if(null==l)return!0;if(ti(l)&&(Pt(l)||"string"==typeof l||"function"==typeof l.splice||tu(l)||ll(l)||$u(l)))return!l.length;var h=jr(l);if(h==Oe||h==ae)return!l.size;if(el(l))return!Yf(l).length;for(var m in l)if(Cn.call(l,m))return!1;return!0},S.isEqual=function ec(l,h){return Kc(l,h)},S.isEqualWith=function A0(l,h,m){var x=(m="function"==typeof m?m:k)?m(l,h):k;return x===k?Kc(l,h,k,m):!!x},S.isError=xh,S.isFinite=function t1(l){return"number"==typeof l&&ur(l)},S.isFunction=nu,S.isInteger=Rd,S.isLength=Ch,S.isMap=em,S.isMatch=function tm(l,h){return l===h||Qf(l,h,Uy(h))},S.isMatchWith=function x0(l,h,m){return m="function"==typeof m?m:k,Qf(l,h,Uy(h),m)},S.isNaN=function _h(l){return kd(l)&&l!=+l},S.isNative=function Md(l){if(Wy(l))throw new mt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return dg(l)},S.isNil=function nm(l){return null==l},S.isNull=function C0(l){return null===l},S.isNumber=kd,S.isObject=Yn,S.isObjectLike=sr,S.isPlainObject=cl,S.isRegExp=Pd,S.isSafeInteger=function Od(l){return Rd(l)&&l>=-Do&&l<=Do},S.isSet=_0,S.isString=Nd,S.isSymbol=mo,S.isTypedArray=ll,S.isUndefined=function n1(l){return l===k},S.isWeakMap=function E0(l){return sr(l)&&jr(l)==Kt},S.isWeakSet=function D0(l){return sr(l)&&"[object WeakSet]"==hi(l)},S.join=function wx(l,h){return null==l?"":Va.call(l,h)},S.kebabCase=_1,S.last=ds,S.lastIndexOf=function go(l,h,m){var x=null==l?0:l.length;if(!x)return-1;var I=x;return m!==k&&(I=(I=zt(m))<0?tt(x+I,0):Ar(I,x-1)),h==h?function ua(J,ye,se){for(var Xe=se+1;Xe--;)if(J[Xe]===ye)return Xe;return Xe}(l,h,I):Xp(l,Oc,I,!0)},S.lowerCase=E1,S.lowerFirst=D1,S.lt=Eh,S.lte=rm,S.max=function xm(l){return l&&l.length?Kf(l,vi,cg):k},S.maxBy=function Cm(l,h){return l&&l.length?Kf(l,yt(h,2),cg):k},S.mean=function Uh(l){return Lf(l,vi)},S.meanBy=function C2(l,h){return Lf(l,yt(h,2))},S.min=function _m(l){return l&&l.length?Kf(l,vi,Tn):k},S.minBy=function Hd(l,h){return l&&l.length?Kf(l,yt(h,2),Tn):k},S.stubArray=G0,S.stubFalse=K0,S.stubObject=function Bh(){return{}},S.stubString=function L1(){return""},S.stubTrue=function ym(){return!0},S.multiply=U1,S.nth=function Ng(l,h){return l&&l.length?Wu(l,zt(h)):k},S.noConflict=function O1(){return di._===this&&(di._=fy),this},S.noop=zd,S.now=al,S.pad=function I1(l,h,m){l=nn(l);var x=(h=zt(h))?Rs(l):0;if(!h||x>=h)return l;var I=(h-x)/2;return nh(Wa(I),m)+l+nh(Wi(I),m)},S.padEnd=function S1(l,h,m){l=nn(l);var x=(h=zt(h))?Rs(l):0;return h&&x<h?l+nh(h-x,m):l},S.padStart=function b2(l,h,m){l=nn(l);var x=(h=zt(h))?Rs(l):0;return h&&x<h?nh(h-x,m)+l:l},S.parseInt=function A2(l,h,m){return m||null==h?h=0:h&&(h=+h),jc(nn(l).replace(_i,""),h||0)},S.random=function cm(l,h,m){if(m&&"boolean"!=typeof m&&mi(l,h,m)&&(h=m=k),m===k&&("boolean"==typeof h?(m=h,h=k):"boolean"==typeof l&&(m=l,l=k)),l===k&&h===k?(l=0,h=1):(l=ha(l),h===k?(h=l,l=0):h=ha(h)),l>h){var x=l;l=h,h=x}if(m||l%1||h%1){var I=cr();return Ar(l+I*(h-l+kS("1e-"+((I+"").length-1))),h)}return pg(l,h)},S.reduce=function c0(l,h,m){var x=Pt(l)?Zl:sy,I=arguments.length<3;return x(l,yt(h,4),m,I,ju)},S.reduceRight=function Gg(l,h,m){var x=Pt(l)?oy:sy,I=arguments.length<3;return x(l,yt(h,4),m,I,qA)},S.repeat=function Ld(l,h,m){return h=(m?mi(l,h,m):h===k)?1:zt(h),Zf(nn(l),h)},S.replace=function Mh(){var l=arguments,h=nn(l[0]);return l.length<3?h:h.replace(l[1],l[2])},S.result=function w2(l,h,m){var x=-1,I=(h=Fs(h,l)).length;for(I||(I=1,l=k);++x<I;){var R=null==l?k:l[Ii(h[x])];R===k&&(x=I,R=m),l=nu(R)?R.call(l):R}return l},S.round=Q0,S.runInContext=J,S.sample=function Hx(l){return(Pt(l)?dd:rx)(l)},S.size=function Vx(l){if(null==l)return 0;if(ti(l))return Nd(l)?Rs(l):l.length;var h=jr(l);return h==Oe||h==ae?l.size:Yf(l).length},S.snakeCase=F0,S.some=function qx(l,h,m){var x=Pt(l)?$l:Dy;return m&&mi(l,h,m)&&(h=k),x(l,yt(h,3))},S.sortedIndex=function Ex(l,h){return la(l,h)},S.sortedIndexBy=function Bg(l,h,m){return gg(l,h,yt(m,2))},S.sortedIndexOf=function ch(l,h){var m=null==l?0:l.length;if(m){var x=la(l,h);if(x<m&&fs(l[x],h))return x}return-1},S.sortedLastIndex=function Dx(l,h){return la(l,h,!0)},S.sortedLastIndexBy=function Lg(l,h,m){return gg(l,h,yt(m,2),!0)},S.sortedLastIndexOf=function Ix(l,h){if(null!=l&&l.length){var x=la(l,h,!0)-1;if(fs(l[x],h))return x}return-1},S.startCase=dm,S.startsWith=function fm(l,h,m){return l=nn(l),m=null==m?0:Ja(zt(m),0,l.length),h=ho(h),l.slice(m,m+h.length)==h},S.subtract=z1,S.sum=function j1(l){return l&&l.length?Uf(l,vi):0},S.sumBy=function Em(l,h){return l&&l.length?Uf(l,yt(h,2)):0},S.template=function T1(l,h,m){var x=S.templateSettings;m&&mi(l,h,m)&&(h=k),l=nn(l),h=Fd({},h,x,wd);var q,Z,I=Fd({},h.imports,x.imports,wd),R=Hr(I),L=Ze(I,R),be=0,Ae=h.interpolate||Vl,Ie="__p += '",He=tg((h.escape||Vl).source+"|"+Ae.source+"|"+(Ae===yr?jp:Vl).source+"|"+(h.evaluate||Vl).source+"|$","g"),st="//# sourceURL="+(Cn.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++RS+"]")+"\n";l.replace(He,function(At,Ft,rn,Wr,Xn,yo){return rn||(rn=Wr),Ie+=l.slice(be,yo).replace(Hp,NA),Ft&&(q=!0,Ie+="' +\n__e("+Ft+") +\n'"),Xn&&(Z=!0,Ie+="';\n"+Xn+";\n__p += '"),rn&&(Ie+="' +\n((__t = ("+rn+")) == null ? '' : __t) +\n'"),be=yo+At.length,At}),Ie+="';\n";var wt=Cn.call(h,"variable")&&h.variable;if(wt){if(Rc.test(wt))throw new mt("Invalid `variable` option passed into `_.template`")}else Ie="with (obj) {\n"+Ie+"\n}\n";Ie=(Z?Ie.replace(ia,""):Ie).replace(jl,"$1").replace(Hl,"$1;"),Ie="function("+(wt||"obj")+") {\n"+(wt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(q?", __e = _.escape":"")+(Z?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ie+"return __p\n}";var qt=j0(function(){return gn(R,st+"return "+Ie).apply(k,L)});if(qt.source=Ie,xh(qt))throw qt;return qt},S.times=function wm(l,h){if((l=zt(l))<1||l>Do)return[];var m=K,x=Ar(l,K);h=yt(h),l-=K;for(var I=ja(x,h);++m<l;)h(m);return I},S.toFinite=ha,S.toInteger=zt,S.toLength=r1,S.toLower=function L0(l){return nn(l).toLowerCase()},S.toNumber=Vo,S.toSafeInteger=function i1(l){return l?Ja(zt(l),-Do,Do):0===l?l:0},S.toString=nn,S.toUpper=function U0(l){return nn(l).toUpperCase()},S.trim=function kh(l,h,m){if((l=nn(l))&&(m||h===k))return aa(l);if(!l||!(h=ho(h)))return l;var x=Po(l),I=Po(h);return $a(x,un(x,I),td(x,I)+1).join("")},S.trimEnd=function x2(l,h,m){if((l=nn(l))&&(m||h===k))return l.slice(0,$p(l)+1);if(!l||!(h=ho(h)))return l;var x=Po(l);return $a(x,0,td(x,Po(h))+1).join("")},S.trimStart=function hm(l,h,m){if((l=nn(l))&&(m||h===k))return l.replace(_i,"");if(!l||!(h=ho(h)))return l;var x=Po(l);return $a(x,un(x,Po(h))).join("")},S.truncate=function R1(l,h){var m=30,x="...";if(Yn(h)){var I="separator"in h?h.separator:I;m="length"in h?zt(h.length):m,x="omission"in h?ho(h.omission):x}var R=(l=nn(l)).length;if(zi(l)){var L=Po(l);R=L.length}if(m>=R)return l;var q=m-Rs(x);if(q<1)return x;var Z=L?$a(L,0,q).join(""):l.slice(0,q);if(I===k)return Z+x;if(L&&(q+=Z.length-q),Pd(I)){if(l.slice(q).search(I)){var be,Ae=Z;for(I.global||(I=tg(I.source,nn(So.exec(I))+"g")),I.lastIndex=0;be=I.exec(Ae);)var Ie=be.index;Z=Z.slice(0,Ie===k?q:Ie)}}else if(l.indexOf(ho(I),q)!=q){var He=Z.lastIndexOf(I);He>-1&&(Z=Z.slice(0,He))}return Z+x},S.unescape=function pm(l){return(l=nn(l))&&Wl.test(l)?l.replace(Cf,eg):l},S.uniqueId=function bm(l){var h=++UA;return nn(l)+h},S.upperCase=z0,S.upperFirst=Ph,S.each=Ju,S.eachRight=qg,S.first=Xu,vm(S,function(){var l={};return Bo(S,function(h,m){Cn.call(S.prototype,m)||(l[m]=h)}),l}(),{chain:!1}),S.VERSION="4.17.21",Bn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){S[l].placeholder=S}),Bn(["drop","take"],function(l,h){Qt.prototype[l]=function(m){m=m===k?1:tt(zt(m),0);var x=this.__filtered__&&!h?new Qt(this):this.clone();return x.__filtered__?x.__takeCount__=Ar(m,x.__takeCount__):x.__views__.push({size:Ar(m,K),type:l+(x.__dir__<0?"Right":"")}),x},Qt.prototype[l+"Right"]=function(m){return this.reverse()[l](m).reverse()}}),Bn(["filter","map","takeWhile"],function(l,h){var m=h+1,x=1==m||3==m;Qt.prototype[l]=function(I){var R=this.clone();return R.__iteratees__.push({iteratee:yt(I,3),type:m}),R.__filtered__=R.__filtered__||x,R}}),Bn(["head","last"],function(l,h){var m="take"+(h?"Right":"");Qt.prototype[l]=function(){return this[m](1).value()[0]}}),Bn(["initial","tail"],function(l,h){var m="drop"+(h?"":"Right");Qt.prototype[l]=function(){return this.__filtered__?new Qt(this):this[m](1)}}),Qt.prototype.compact=function(){return this.filter(vi)},Qt.prototype.find=function(l){return this.filter(l).head()},Qt.prototype.findLast=function(l){return this.reverse().find(l)},Qt.prototype.invokeMap=Ht(function(l,h){return"function"==typeof l?new Qt(this):this.map(function(m){return pd(m,l,h)})}),Qt.prototype.reject=function(l){return this.filter(wh(yt(l)))},Qt.prototype.slice=function(l,h){l=zt(l);var m=this;return m.__filtered__&&(l>0||h<0)?new Qt(m):(l<0?m=m.takeRight(-l):l&&(m=m.drop(l)),h!==k&&(m=(h=zt(h))<0?m.dropRight(-h):m.take(h-l)),m)},Qt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Qt.prototype.toArray=function(){return this.take(K)},Bo(Qt.prototype,function(l,h){var m=/^(?:filter|find|map|reject)|While$/.test(h),x=/^(?:head|last)$/.test(h),I=S[x?"take"+("last"==h?"Right":""):h],R=x||/^find/.test(h);I&&(S.prototype[h]=function(){var L=this.__wrapped__,q=x?[1]:arguments,Z=L instanceof Qt,be=q[0],Ae=Z||Pt(L),Ie=function(Ft){var rn=I.apply(S,Ts([Ft],q));return x&&He?rn[0]:rn};Ae&&m&&"function"==typeof be&&1!=be.length&&(Z=Ae=!1);var He=this.__chain__,wt=R&&!He,qt=Z&&!this.__actions__.length;if(!R&&Ae){L=qt?L:new Qt(this);var At=l.apply(L,q);return At.__actions__.push({func:fh,args:[Ie],thisArg:k}),new kn(At,He)}return wt&&qt?l.apply(this,q):(At=this.thru(Ie),wt?x?At.value()[0]:At.value():At)})}),Bn(["pop","push","shift","sort","splice","unshift"],function(l){var h=od[l],m=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",x=/^(?:pop|shift)$/.test(l);S.prototype[l]=function(){var I=arguments;if(x&&!this.__chain__){var R=this.value();return h.apply(Pt(R)?R:[],I)}return this[m](function(L){return h.apply(Pt(L)?L:[],I)})}}),Bo(Qt.prototype,function(l,h){var m=S[h];if(m){var x=m.name+"";Cn.call(Ms,x)||(Ms[x]=[]),Ms[x].push({name:h,func:m})}}),Ms[Ls(k,2).name]=[{name:"wrapper",func:k}],Qt.prototype.clone=function Lu(){var l=new Qt(this.__wrapped__);return l.__actions__=pi(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=pi(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=pi(this.__views__),l},Qt.prototype.reverse=function Wf(){if(this.__filtered__){var l=new Qt(this);l.__dir__=-1,l.__filtered__=!0}else(l=this.clone()).__dir__*=-1;return l},Qt.prototype.value=function as(){var l=this.__wrapped__.value(),h=this.__dir__,m=Pt(l),x=h<0,I=m?l.length:0,R=function ih(l,h,m){for(var x=-1,I=m.length;++x<I;){var R=m[x],L=R.size;switch(R.type){case"drop":l+=L;break;case"dropRight":h-=L;break;case"take":h=Ar(h,l+L);break;case"takeRight":l=tt(l,h-L)}}return{start:l,end:h}}(0,I,this.__views__),L=R.start,q=R.end,Z=q-L,be=x?q:L-1,Ae=this.__iteratees__,Ie=Ae.length,He=0,st=Ar(Z,this.__takeCount__);if(!m||!x&&I==Z&&st==Z)return we(l,this.__actions__);var wt=[];e:for(;Z--&&He<st;){for(var qt=-1,At=l[be+=h];++qt<Ie;){var Ft=Ae[qt],Wr=Ft.type,Xn=(0,Ft.iteratee)(At);if(2==Wr)At=Xn;else if(!Xn){if(1==Wr)continue e;break e}}wt[He++]=At}return wt},S.prototype.at=Bx,S.prototype.chain=function Wg(){return Hg(this)},S.prototype.commit=function d2(){return new kn(this.value(),this.__chain__)},S.prototype.next=function f2(){this.__values__===k&&(this.__values__=tc(this.value()));var l=this.__index__>=this.__values__.length;return{done:l,value:l?k:this.__values__[this.__index__++]}},S.prototype.plant=function h2(l){for(var h,m=this;m instanceof Jr;){var x=ah(m);x.__index__=0,x.__values__=k,h?I.__wrapped__=x:h=x;var I=x;m=m.__wrapped__}return I.__wrapped__=l,h},S.prototype.reverse=function p2(){var l=this.__wrapped__;if(l instanceof Qt){var h=l;return this.__actions__.length&&(h=new Qt(this)),(h=h.reverse()).__actions__.push({func:fh,args:[Fg],thisArg:k}),new kn(h,this.__chain__)}return this.thru(Fg)},S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=function g2(){return we(this.__wrapped__,this.__actions__)},S.prototype.first=S.prototype.head,ud&&(S.prototype[ud]=function Vg(){return this}),S}();di._=id,(an=function(){return id}.call(ta,Ni,ta,Oi))!==k&&(Oi.exports=an)}.call(this)},480:(Oi,ta)=>{"use strict";var an,K;function k(K,D){if(!K)throw"First parameter is required.";D=new Ic(K,D=D||{type:"video"});var Q=this;function ge(Ue){Ue&&(D.initCallback=function(){Ue(),Ue=D.initCallback=null});var Te=new Na(K,D);(Se=new Te(K,D)).record(),Ve("recording"),D.disableLogs||console.log("Initialized recorderType:",Se.constructor.name,"for output-type:",D.type)}function ie(Ue){if(Ue=Ue||function(){},Se){if("paused"===Q.state)return Q.resumeRecording(),void setTimeout(function(){ie(Ue)},1);"recording"!==Q.state&&!D.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',Q.state),D.disableLogs||console.log("Stopped recording "+D.type+" stream."),"gif"!==D.type?Se.stop(Te):(Se.stop(),Te()),Ve("stopped")}else Oe();function Te(Le){if(Se){Object.keys(Se).forEach(function(qe){"function"!=typeof Se[qe]&&(Q[qe]=Se[qe])});var ae=Se.blob;if(!ae){if(!Le)throw"Recording failed.";Se.blob=ae=Le}if(ae&&!D.disableLogs&&console.log(ae.type,"->",ra(ae.size)),Ue){var me;try{me=Sn.createObjectURL(ae)}catch{}"function"==typeof Ue.call?Ue.call(Q,me):Ue(me)}D.autoWriteToDisk&&it(function(qe){var Ye={};Ye[D.type+"Blob"]=qe,is.Store(Ye)})}else"function"==typeof Ue.call?Ue.call(Q,""):Ue("")}}function Be(Ue){postMessage((new FileReaderSync).readAsDataURL(Ue))}function it(Ue,Te){if(!Ue)throw"Pass a callback function over getDataURL.";var Le=Te?Te.blob:(Se||{}).blob;if(!Le)return D.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){it(Ue,Te)},1e3);if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var ae=function qe(Ye){try{var Kt=Sn.createObjectURL(new Blob([Ye.toString(),"this.onmessage =  function (eee) {"+Ye.name+"(eee.data);}"],{type:"application/javascript"})),St=new Worker(Kt);return Sn.revokeObjectURL(Kt),St}catch{}}(Be);ae.onmessage=function(Ye){Ue(Ye.data)},ae.postMessage(Le)}else{var me=new FileReader;me.readAsDataURL(Le),me.onload=function(Ye){Ue(Ye.target.result)}}}function Me(Ue){if(Ue=Ue||0,"paused"!==Q.state){if("stopped"!==Q.state){if(Ue>=Q.recordingDuration)return void ie(Q.onRecordingStopped);Ue+=1e3,setTimeout(function(){Me(Ue)},1e3)}}else setTimeout(function(){Me(Ue)},1e3)}function Ve(Ue){Q&&(Q.state=Ue,"function"==typeof Q.onStateChanged.call?Q.onStateChanged.call(Q,Ue):Q.onStateChanged(Ue))}var ke='It seems that recorder is destroyed or "startRecording" is not invoked for '+D.type+" recorder.";function Oe(){!0!==D.disableLogs&&console.warn(ke)}var Se,gt={startRecording:function pe(Ue){return D.disableLogs||console.log("RecordRTC version: ",Q.version),Ue&&(D=new Ic(K,Ue)),D.disableLogs||console.log("started recording "+D.type+" stream."),Se?(Se.clearRecordedData(),Se.record(),Ve("recording"),Q.recordingDuration&&Me(),Q):(ge(function(){Q.recordingDuration&&Me()}),Q)},stopRecording:ie,pauseRecording:function Re(){Se?"recording"===Q.state?(Ve("paused"),Se.pause(),D.disableLogs||console.log("Paused recording.")):D.disableLogs||console.warn("Unable to pause the recording. Recording state: ",Q.state):Oe()},resumeRecording:function ne(){Se?"paused"===Q.state?(Ve("recording"),Se.resume(),D.disableLogs||console.log("Resumed recording.")):D.disableLogs||console.warn("Unable to resume the recording. Recording state: ",Q.state):Oe()},initRecorder:ge,setRecordingDuration:function(Ue,Te){if(typeof Ue>"u")throw"recordingDuration is required.";if("number"!=typeof Ue)throw"recordingDuration must be a number.";return Q.recordingDuration=Ue,Q.onRecordingStopped=Te||function(){},{onRecordingStopped:function(Le){Q.onRecordingStopped=Le}}},clearRecordedData:function(){Se?(Se.clearRecordedData(),D.disableLogs||console.log("Cleared old recorded data.")):Oe()},getBlob:function(){if(Se)return Se.blob;Oe()},getDataURL:it,toURL:function(){if(Se)return Sn.createObjectURL(Se.blob);Oe()},getInternalRecorder:function(){return Se},save:function(Ue){Se?io(Se.blob,Ue):Oe()},getFromDisk:function(Ue){Se?k.getFromDisk(D.type,Ue):Oe()},setAdvertisementArray:function(Ue){D.advertisement=[];for(var Te=Ue.length,Le=0;Le<Te;Le++)D.advertisement.push({duration:Le,image:Ue[Le]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"===Q.state&&!D.disableLogs&&console.warn("Stop an active recorder."),Se&&"function"==typeof Se.clearRecordedData&&Se.clearRecordedData(),Se=null,Ve("inactive"),Q.blob=null},onStateChanged:function(Ue){D.disableLogs||console.log("Recorder state changed:",Ue)},state:"inactive",getState:function(){return Q.state},destroy:function(){var Ue=D.disableLogs;D={disableLogs:!0},Q.reset(),Ve("destroyed"),gt=Q=null,li.AudioContextConstructor&&(li.AudioContextConstructor.close(),li.AudioContextConstructor=null),D.disableLogs=Ue,D.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return Q=gt,gt;for(var ct in gt)this[ct]=gt[ct];return Q=this,gt}function Ic(K,D){return!D.recorderType&&!D.type&&(D.audio&&D.video?D.type="video":D.audio&&!D.video&&(D.type="audio")),D.recorderType&&!D.type&&(D.recorderType===La||D.recorderType===Sc||D.recorderType===Is?D.type="video":D.recorderType===Tu?D.type="gif":D.recorderType===Ba?D.type="audio":D.recorderType===Bi&&(pn(K,"audio").length&&pn(K,"video").length||!pn(K,"audio").length&&pn(K,"video").length?D.type="video":pn(K,"audio").length&&!pn(K,"video").length&&(D.type="audio"))),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(D.mimeType||(D.mimeType="video/webm"),D.type||(D.type=D.mimeType.split("/")[0])),D.type||(D.mimeType&&(D.type=D.mimeType.split("/")[0]),D.type||(D.type="audio")),D}function Na(K,D){var Q;return(ro||Fa||$o)&&(Q=Ba),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!ro&&(Q=Bi),"video"===D.type&&(ro||$o)&&(Q=La,typeof ReadableStream<"u"&&(Q=Is)),"gif"===D.type&&(Q=Tu),"canvas"===D.type&&(Q=Sc),Fi()&&Q!==Sc&&Q!==Tu&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(pn(K,"video").length||pn(K,"audio").length)&&("audio"===D.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(Q=Bi):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(Q=Bi)),K instanceof Array&&K.length&&(Q=Do),D.recorderType&&(Q=D.recorderType),!D.disableLogs&&Q&&Q.name&&console.log("Using recorderType:",Q.name||Q.constructor.name),!Q&&Sr&&(Q=Bi),Q}function ci(K){this.addStream=function(D){D&&(K=D)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var Q,D=this.mediaType,pe=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof D.audio&&Fi()&&!pn(K,"audio").length&&(D.audio=!1),"function"!=typeof D.video&&Fi()&&!pn(K,"video").length&&(D.video=!1),"function"!=typeof D.gif&&Fi()&&!pn(K,"video").length&&(D.gif=!1),!D.audio&&!D.video&&!D.gif)throw"MediaStream must have either audio or video tracks.";if(D.audio&&(Q=null,"function"==typeof D.audio&&(Q=D.audio),this.audioRecorder=new k(K,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:Q,mimeType:pe.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),D.video||this.audioRecorder.startRecording()),D.video){Q=null,"function"==typeof D.video&&(Q=D.video);var ge=K;if(Fi()&&D.audio&&"function"==typeof D.audio){var ie=pn(K,"video")[0];na?((ge=new qn).addTrack(ie),Q&&Q===La&&(Q=Bi)):(ge=new qn).addTrack(ie)}this.videoRecorder=new k(ge,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:Q,mimeType:pe.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),D.audio||this.videoRecorder.startRecording()}if(D.audio&&D.video){var Re=this,ne=!0===Fi();(D.audio instanceof Ba&&D.video||!0!==D.audio&&!0!==D.video&&D.audio!==D.video)&&(ne=!1),!0===ne?(Re.audioRecorder=null,Re.videoRecorder.startRecording()):Re.videoRecorder.initRecorder(function(){Re.audioRecorder.initRecorder(function(){Re.videoRecorder.startRecording(),Re.audioRecorder.startRecording()})})}D.gif&&(Q=null,"function"==typeof D.gif&&(Q=D.gif),this.gifRecorder=new k(K,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:Q,mimeType:pe.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(D){D=D||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(Q){D(Q,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(Q){D(Q,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(Q){D(Q,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(D){var Q={};return this.audioRecorder&&(Q.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(Q.video=this.videoRecorder.getBlob()),this.gifRecorder&&(Q.gif=this.gifRecorder.getBlob()),D&&D(Q),Q},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(D){function Q(ge,ie){if(typeof Worker<"u"){var Re=function pe(ge){var ne,ie=Sn.createObjectURL(new Blob([ge.toString(),"this.onmessage =  function (eee) {"+ge.name+"(eee.data);}"],{type:"application/javascript"})),Re=new Worker(ie);if(typeof Sn<"u")ne=Sn;else{if(!(typeof webkitURL<"u"))throw"Neither URL nor webkitURL detected.";ne=webkitURL}return ne.revokeObjectURL(ie),Re}(function(it){postMessage((new FileReaderSync).readAsDataURL(it))});Re.onmessage=function(Be){ie(Be.data)},Re.postMessage(ge)}else{var ne=new FileReader;ne.readAsDataURL(ge),ne.onload=function(Be){ie(Be.target.result)}}}this.getBlob(function(ge){ge.audio&&ge.video?Q(ge.audio,function(ie){Q(ge.video,function(Re){D({audio:ie,video:Re})})}):ge.audio?Q(ge.audio,function(ie){D({audio:ie})}):ge.video&&Q(ge.video,function(ie){D({video:ie})})})},this.writeToDisk=function(){k.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(D){(D=D||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof D.audio?D.audio:""),D.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof D.video?D.video:""),D.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof D.gif?D.gif:"")}}k.version="5.6.2",Oi.exports=k,void 0!==(an=function(){return k}.apply(ta,[]))&&(Oi.exports=an),k.getFromDisk=function(K,D){if(!D)throw"callback is mandatory.";console.log("Getting recorded "+("all"===K?"blobs":K+" blob ")+" from disk!"),is.Fetch(function(Q,pe){"all"!==K&&pe===K+"Blob"&&D&&D(Q),"all"===K&&D&&D(Q,pe.replace("Blob",""))})},k.writeToDisk=function(K){console.log("Writing recorded blob(s) to disk!"),(K=K||{}).audio&&K.video&&K.gif?K.audio.getDataURL(function(D){K.video.getDataURL(function(Q){K.gif.getDataURL(function(pe){is.Store({audioBlob:D,videoBlob:Q,gifBlob:pe})})})}):K.audio&&K.video?K.audio.getDataURL(function(D){K.video.getDataURL(function(Q){is.Store({audioBlob:D,videoBlob:Q})})}):K.audio&&K.gif?K.audio.getDataURL(function(D){K.gif.getDataURL(function(Q){is.Store({audioBlob:D,gifBlob:Q})})}):K.video&&K.gif?K.video.getDataURL(function(D){K.gif.getDataURL(function(Q){is.Store({videoBlob:D,gifBlob:Q})})}):K.audio?K.audio.getDataURL(function(D){is.Store({audioBlob:D})}):K.video?K.video.getDataURL(function(D){is.Store({videoBlob:D})}):K.gif&&K.gif.getDataURL(function(D){is.Store({gifBlob:D})})},ci.getFromDisk=k.getFromDisk,ci.writeToDisk=k.writeToDisk,k.MRecordRTC=ci,(K=typeof global<"u"?global:null)&&(typeof window<"u"||typeof global>"u"||(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),(typeof global.console.log>"u"||typeof global.console.error>"u")&&(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),typeof document>"u"&&(K.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var D={getContext:function(){return D},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return D},K.HTMLVideoElement=function(){}),typeof location>"u"&&(K.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(K.screen={width:0,height:0}),typeof Sn>"u"&&(K.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),K.window=global));var Zo=window.requestAnimationFrame;if(typeof Zo>"u")if(typeof webkitRequestAnimationFrame<"u")Zo=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")Zo=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")Zo=msRequestAnimationFrame;else if(typeof Zo>"u"){var Su=0;Zo=function(K,D){var Q=(new Date).getTime(),pe=Math.max(0,16-(Q-Su)),ge=setTimeout(function(){K(Q+pe)},pe);return Su=Q+pe,ge}}var xi=window.cancelAnimationFrame;typeof xi>"u"&&(typeof webkitCancelAnimationFrame<"u"?xi=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?xi=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?xi=msCancelAnimationFrame:typeof xi>"u"&&(xi=function(K){clearTimeout(K)}));var no=window.AudioContext;typeof no>"u"&&(typeof webkitAudioContext<"u"&&(no=webkitAudioContext),typeof mozAudioContext<"u"&&(no=mozAudioContext));var Sn=window.URL;typeof Sn>"u"&&typeof webkitURL<"u"&&(Sn=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var Fa=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),$o=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),na=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),ro=!$o&&!Fa&&!!navigator.webkitGetUserMedia||es()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),Sr=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);Sr&&!ro&&-1!==navigator.userAgent.indexOf("CriOS")&&(Sr=!1,ro=!0);var qn=window.MediaStream;function ra(K){if(0===K)return"0 Bytes";var pe=parseInt(Math.floor(Math.log(K)/Math.log(1e3)),10);return(K/Math.pow(1e3,pe)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][pe]}function io(K,D){if(!K)throw"Blob object is required.";if(!K.type)try{K.type="video/webm"}catch{}var Q=(K.type||"video/webm").split("/")[1];if(-1!==Q.indexOf(";")&&(Q=Q.split(";")[0]),D&&-1!==D.indexOf(".")){var pe=D.split(".");D=pe[0],Q=pe[1]}var ge=(D||Math.round(9999999999*Math.random())+888888888)+"."+Q;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(K,ge);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(K,ge);var ie=document.createElement("a");ie.href=Sn.createObjectURL(K),ie.download=ge,ie.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(ie),"function"==typeof ie.click?ie.click():(ie.target="_blank",ie.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),Sn.revokeObjectURL(ie.href)}function es(){return!!(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function pn(K,D){return K&&K.getTracks?K.getTracks().filter(function(Q){return Q.kind===(D||"audio")}):[]}function ts(K,D){"srcObject"in D?D.srcObject=K:"mozSrcObject"in D?D.mozSrcObject=K:D.srcObject=K}typeof qn>"u"&&typeof webkitMediaStream<"u"&&(qn=webkitMediaStream),typeof qn<"u"&&typeof qn.prototype.stop>"u"&&(qn.prototype.stop=function(){this.getTracks().forEach(function(K){K.stop()})}),k.invokeSaveAsDialog=io,k.getTracks=pn,k.getSeekableBlob=function ns(K,D){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var Q=new EBML.Reader,pe=new EBML.Decoder,ge=EBML.tools,ie=new FileReader;ie.onload=function(Re){pe.decode(this.result).forEach(function(Ve){Q.read(Ve)}),Q.stop();var Be=ge.makeMetadataSeekable(Q.metadatas,Q.duration,Q.cues),it=this.result.slice(Q.metadataSize),Me=new Blob([Be,it],{type:"video/webm"});D(Me)},ie.readAsArrayBuffer(K)},k.bytesToSize=ra,k.isElectron=es;var li={};function Fi(){if(na||Sr||Fa)return!0;navigator;var ie,Re,D=navigator.userAgent,Q=""+parseFloat(navigator.appVersion),pe=parseInt(navigator.appVersion,10);return(ro||$o)&&(ie=D.indexOf("Chrome"),Q=D.substring(ie+7)),-1!==(Re=Q.indexOf(";"))&&(Q=Q.substring(0,Re)),-1!==(Re=Q.indexOf(" "))&&(Q=Q.substring(0,Re)),pe=parseInt(""+Q,10),isNaN(pe)&&(Q=""+parseFloat(navigator.appVersion),pe=parseInt(navigator.appVersion,10)),pe>=49}function Bi(K,D){var Q,Me=this;if(typeof K>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";"audio"===(D=D||{mimeType:"video/webm"}).type&&(pn(K,"video").length&&pn(K,"audio").length&&(navigator.mozGetUserMedia?(Q=new qn).addTrack(pn(K,"audio")[0]):Q=new qn(pn(K,"audio")),K=Q),(!D.mimeType||-1===D.mimeType.toString().toLowerCase().indexOf("audio"))&&(D.mimeType=ro?"audio/webm":"audio/ogg"),D.mimeType&&"audio/ogg"!==D.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(D.mimeType="audio/ogg"));var ne,pe=[];function ge(){Me.timestamps.push((new Date).getTime()),"function"==typeof D.onTimeStamp&&D.onTimeStamp(Me.timestamps[Me.timestamps.length-1],Me.timestamps)}function ie(Ve){return ne&&ne.mimeType?ne.mimeType:Ve.mimeType||"video/webm"}function Re(){pe=[],ne=null,Me.timestamps=[]}this.getArrayOfBlobs=function(){return pe},this.record=function(){Me.blob=null,Me.clearRecordedData(),Me.timestamps=[],it=[],pe=[];var Ve=D;D.disableLogs||console.log("Passing following config over MediaRecorder API.",Ve),ne&&(ne=null),ro&&!Fi()&&(Ve="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&Ve.mimeType&&(MediaRecorder.isTypeSupported(Ve.mimeType)||(D.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",Ve.mimeType),Ve.mimeType="audio"===D.type?"audio/webm":"video/webm"));try{ne=new MediaRecorder(K,Ve),D.mimeType=Ve.mimeType}catch{ne=new MediaRecorder(K)}Ve.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in ne&&!1===ne.canRecordMimeType(Ve.mimeType)&&(D.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",Ve.mimeType)),ne.ondataavailable=function(ke){if(ke.data&&it.push("ondataavailable: "+ra(ke.data.size)),"number"!=typeof D.timeSlice)!ke.data||!ke.data.size||ke.data.size<100||Me.blob?Me.recordingCallback&&(Me.recordingCallback(new Blob([],{type:ie(Ve)})),Me.recordingCallback=null):(Me.blob=D.getNativeBlob?ke.data:new Blob([ke.data],{type:ie(Ve)}),Me.recordingCallback&&(Me.recordingCallback(Me.blob),Me.recordingCallback=null));else if(ke.data&&ke.data.size&&(pe.push(ke.data),ge(),"function"==typeof D.ondataavailable)){var Oe=D.getNativeBlob?ke.data:new Blob([ke.data],{type:ie(Ve)});D.ondataavailable(Oe)}},ne.onstart=function(){it.push("started")},ne.onpause=function(){it.push("paused")},ne.onresume=function(){it.push("resumed")},ne.onstop=function(){it.push("stopped")},ne.onerror=function(ke){ke&&(ke.name||(ke.name="UnknownError"),it.push("error: "+ke),D.disableLogs||(-1!==ke.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",ke):-1!==ke.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",Ve.mimeType,") is not supported.",ke):-1!==ke.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",ke):"OutOfMemory"===ke.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",ke):"IllegalStreamModification"===ke.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",ke):"OtherRecordingError"===ke.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",ke):"GenericError"===ke.name?console.error("The UA cannot provide the codec or recording option that has been requested.",ke):console.error("MediaRecorder Error",ke)),function(Oe){if(!Me.manuallyStopped&&ne&&"inactive"===ne.state)return delete D.timeslice,void ne.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==ne.state&&"stopped"!==ne.state&&ne.stop())},"number"==typeof D.timeSlice?(ge(),ne.start(D.timeSlice)):ne.start(36e5),D.initCallback&&D.initCallback()},this.timestamps=[],this.stop=function(Ve){Ve=Ve||function(){},Me.manuallyStopped=!0,ne&&(this.recordingCallback=Ve,"recording"===ne.state&&ne.stop(),"number"==typeof D.timeSlice&&setTimeout(function(){Me.blob=new Blob(pe,{type:ie(D)}),Me.recordingCallback(Me.blob)},100))},this.pause=function(){ne&&"recording"===ne.state&&ne.pause()},this.resume=function(){ne&&"paused"===ne.state&&ne.resume()},this.clearRecordedData=function(){ne&&"recording"===ne.state&&Me.stop(Re),Re()},this.getInternalRecorder=function(){return ne},this.blob=null,this.getState=function(){return ne&&ne.state||"inactive"};var it=[];this.getAllStates=function(){return it},typeof D.checkForInactiveTracks>"u"&&(D.checkForInactiveTracks=!1),Me=this,function Ve(){if(ne&&!1!==D.checkForInactiveTracks){if(!1===function Be(){if("active"in K){if(!K.active)return!1}else if("ended"in K&&K.ended)return!1;return!0}())return D.disableLogs||console.log("MediaStream seems stopped."),void Me.stop();setTimeout(Ve,1e3)}}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function Ba(K,D){if(!pn(K,"audio").length)throw"Your stream has no audio tracks.";var ne,Q=this,pe=[],ge=[],ie=!1,Re=0,Be=2,it=(D=D||{}).desiredSampRate;function Me(){if(!1===D.checkForInactiveTracks)return!0;if("active"in K){if(!K.active)return!1}else if("ended"in K&&K.ended)return!1;return!0}function Ve(St,nr){function Rn(rr,Ss){var Wl,Ci=rr.numberOfAudioChannels,Br=rr.leftBuffers.slice(0),Io=rr.rightBuffers.slice(0),Li=rr.sampleRate,oo=rr.internalInterleavedLength,Yr=rr.desiredSampRate;function ia(dr,_i,ir){var Ui=Math.round(dr.length*(_i/ir)),Xr=[],os=Number((dr.length-1)/(Ui-1));Xr[0]=dr[0];for(var oa=1;oa<Ui-1;oa++){var Rc=oa*os,Sf=Number(Math.floor(Rc)).toFixed(),jp=Number(Math.ceil(Rc)).toFixed();Xr[oa]=jl(dr[Sf],dr[jp],Rc-Sf)}return Xr[Ui-1]=dr[dr.length-1],Xr}function jl(dr,_i,ir){return dr+(_i-dr)*ir}function Hl(dr,_i){for(var ir=new Float64Array(_i),Ui=0,Xr=dr.length,os=0;os<Xr;os++){var oa=dr[os];ir.set(oa,Ui),Ui+=oa.length}return ir}function Ru(dr,_i,ir){for(var Ui=ir.length,Xr=0;Xr<Ui;Xr++)dr.setUint8(_i+Xr,ir.charCodeAt(Xr))}2===Ci&&(Br=Hl(Br,oo),Io=Hl(Io,oo),Yr&&(Br=ia(Br,Yr,Li),Io=ia(Io,Yr,Li))),1===Ci&&(Br=Hl(Br,oo),Yr&&(Br=ia(Br,Yr,Li))),Yr&&(Li=Yr),2===Ci&&(Wl=function Cf(dr,_i){for(var ir=dr.length+_i.length,Ui=new Float64Array(ir),Xr=0,os=0;os<ir;)Ui[os++]=dr[Xr],Ui[os++]=_i[Xr],Xr++;return Ui}(Br,Io)),1===Ci&&(Wl=Br);var Mu=Wl.length,Tc=new ArrayBuffer(44+2*Mu),yr=new DataView(Tc);Ru(yr,0,"RIFF"),yr.setUint32(4,36+2*Mu,!0),Ru(yr,8,"WAVE"),Ru(yr,12,"fmt "),yr.setUint32(16,16,!0),yr.setUint16(20,1,!0),yr.setUint16(22,Ci,!0),yr.setUint32(24,Li,!0),yr.setUint32(28,Li*Ci*2,!0),yr.setUint16(32,2*Ci,!0),yr.setUint16(34,16,!0),Ru(yr,36,"data"),yr.setUint32(40,2*Mu,!0);for(var Ef=Mu,Df=44,Ua=0;Ua<Ef;Ua++)yr.setInt16(Df,32767*Wl[Ua],!0),Df+=2;if(Ss)return Ss({buffer:Tc,view:yr});postMessage({buffer:Tc,view:yr})}if(St.noWorker)Rn(St,function(rr){nr(rr.buffer,rr.view)});else{var Tr=function ke(St){var nr=Sn.createObjectURL(new Blob([St.toString(),";this.onmessage =  function (eee) {"+St.name+"(eee.data);}"],{type:"application/javascript"})),Rn=new Worker(nr);return Rn.workerURL=nr,Rn}(Rn);Tr.onmessage=function(rr){nr(rr.data.buffer,rr.data.view),Sn.revokeObjectURL(Tr.workerURL),Tr.terminate()},Tr.postMessage(St)}}!0===D.leftChannel&&(Be=1),1===D.numberOfAudioChannels&&(Be=1),(!Be||Be<1)&&(Be=2),D.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+Be),typeof D.checkForInactiveTracks>"u"&&(D.checkForInactiveTracks=!0),this.record=function(){if(!1===Me())throw"Please make sure MediaStream is active.";Le(),me=Te=!1,ie=!0,typeof D.timeSlice<"u"&&Kt()},this.stop=function(St){St=St||function(){},ie=!1,Ve({desiredSampRate:it,sampleRate:Ue,numberOfAudioChannels:Be,internalInterleavedLength:Re,leftBuffers:pe,rightBuffers:1===Be?[]:ge,noWorker:D.noWorker},function(nr,Rn){Q.blob=new Blob([Rn],{type:"audio/wav"}),Q.buffer=new ArrayBuffer(Rn.buffer.byteLength),Q.view=Rn,Q.sampleRate=it||Ue,Q.bufferSize=ct,Q.length=Re,me=!1,St&&St(Q.blob)})},typeof k.Storage>"u"&&(k.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!k.Storage.AudioContextConstructor||"closed"===k.Storage.AudioContextConstructor.state)&&(k.Storage.AudioContextConstructor=new k.Storage.AudioContext);var Oe=k.Storage.AudioContextConstructor,Se=Oe.createMediaStreamSource(K),gt=[0,256,512,1024,2048,4096,8192,16384],ct=typeof D.bufferSize>"u"?4096:D.bufferSize;if(-1===gt.indexOf(ct)&&(D.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(gt,null,"\t"))),Oe.createJavaScriptNode)ne=Oe.createJavaScriptNode(ct,Be,Be);else{if(!Oe.createScriptProcessor)throw"WebAudio API has no support on this browser.";ne=Oe.createScriptProcessor(ct,Be,Be)}Se.connect(ne),D.bufferSize||(ct=ne.bufferSize);var Ue=typeof D.sampleRate<"u"?D.sampleRate:Oe.sampleRate||44100;(Ue<22050||Ue>96e3)&&(D.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),D.disableLogs||D.desiredSampRate&&console.log("Desired sample-rate: "+D.desiredSampRate);var Te=!1;function Le(){ge=[],Re=0,me=!1,ie=!1,Te=!1,Oe=null,Q.leftchannel=pe=[],Q.rightchannel=ge,Q.numberOfAudioChannels=Be,Q.desiredSampRate=it,Q.sampleRate=Ue,Q.recordingLength=Re,Ye={left:[],right:[],recordingLength:0}}function ae(){ne&&(ne.onaudioprocess=null,ne.disconnect(),ne=null),Se&&(Se.disconnect(),Se=null),Le()}this.pause=function(){Te=!0},this.resume=function(){if(!1===Me())throw"Please make sure MediaStream is active.";if(!ie)return D.disableLogs||console.log("Seems recording has been restarted."),void this.record();Te=!1},this.clearRecordedData=function(){D.checkForInactiveTracks=!1,ie&&this.stop(ae),ae()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var me=!1;ne.onaudioprocess=function qe(St){if(!Te){if(!1===Me()&&(D.disableLogs||console.log("MediaStream seems stopped."),ne.disconnect(),ie=!1),!ie)return void(Se&&(Se.disconnect(),Se=null));me||(me=!0,D.onAudioProcessStarted&&D.onAudioProcessStarted(),D.initCallback&&D.initCallback());var nr=St.inputBuffer.getChannelData(0),Rn=new Float32Array(nr);if(pe.push(Rn),2===Be){var Tr=St.inputBuffer.getChannelData(1),rr=new Float32Array(Tr);ge.push(rr)}Q.recordingLength=Re+=ct,typeof D.timeSlice<"u"&&(Ye.recordingLength+=ct,Ye.left.push(Rn),2===Be&&Ye.right.push(rr))}},ne.connect(Oe.createMediaStreamDestination?Oe.createMediaStreamDestination():Oe.destination),this.leftchannel=pe,this.rightchannel=ge,this.numberOfAudioChannels=Be,this.desiredSampRate=it,this.sampleRate=Ue,Q.recordingLength=Re;var Ye={left:[],right:[],recordingLength:0};function Kt(){!ie||"function"!=typeof D.ondataavailable||typeof D.timeSlice>"u"||(Ye.left.length?(Ve({desiredSampRate:it,sampleRate:Ue,numberOfAudioChannels:Be,internalInterleavedLength:Ye.recordingLength,leftBuffers:Ye.left,rightBuffers:1===Be?[]:Ye.right},function(St,nr){var Rn=new Blob([nr],{type:"audio/wav"});D.ondataavailable(Rn),setTimeout(Kt,D.timeSlice)}),Ye={left:[],right:[],recordingLength:0}):setTimeout(Kt,D.timeSlice))}}function Sc(K,D){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(D=D||{}).frameInterval||(D.frameInterval=10);var Q=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(gt){gt in document.createElement("canvas")&&(Q=!0)});var Re,ne,Be,pe=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),ge=50,ie=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(pe&&ie&&ie[2]&&(ge=parseInt(ie[2],10)),pe&&ge<52&&(Q=!1),D.useWhammyRecorder&&(Q=!1),Q)if(D.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),K instanceof HTMLCanvasElement)Re=K;else{if(!(K instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";Re=K.canvas}else navigator.mozGetUserMedia&&(D.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(Be=!0,Q&&!D.useWhammyRecorder){var gt;"captureStream"in Re?gt=Re.captureStream(25):"mozCaptureStream"in Re?gt=Re.mozCaptureStream(25):"webkitCaptureStream"in Re&&(gt=Re.webkitCaptureStream(25));try{var ct=new qn;ct.addTrack(pn(gt,"video")[0]),gt=ct}catch{}if(!gt)throw"captureStream API are NOT available.";(ne=new Bi(gt,{mimeType:D.mimeType||"video/webm"})).record()}else Se.frames=[],Oe=(new Date).getTime(),ke();D.initCallback&&D.initCallback()},this.getWebPImages=function(gt){if("canvas"===K.nodeName.toLowerCase()){var ct=Se.frames.length;Se.frames.forEach(function(Ue,Te){var Le=ct-Te;D.disableLogs||console.log(Le+"/"+ct+" frames remaining"),D.onEncodingCallback&&D.onEncodingCallback(Le,ct);var ae=Ue.image.toDataURL("image/webp",1);Se.frames[Te].image=ae}),D.disableLogs||console.log("Generating WebM"),gt()}else gt()},this.stop=function(gt){Be=!1;var ct=this;Q&&ne?ne.stop(gt):this.getWebPImages(function(){Se.compile(function(Ue){D.disableLogs||console.log("Recording finished!"),ct.blob=Ue,ct.blob.forEach&&(ct.blob=new Blob([],{type:"video/webm"})),gt&&gt(ct.blob),Se.frames=[]})})};var it=!1;function Me(){Se.frames=[],Be=!1,it=!1}function Ve(){var gt=document.createElement("canvas"),ct=gt.getContext("2d");return gt.width=K.width,gt.height=K.height,ct.drawImage(K,0,0),gt}function ke(){if(it)return Oe=(new Date).getTime(),setTimeout(ke,500);if("canvas"===K.nodeName.toLowerCase()){var gt=(new Date).getTime()-Oe;return Oe=(new Date).getTime(),Se.frames.push({image:Ve(),duration:gt}),void(Be&&setTimeout(ke,D.frameInterval))}html2canvas(K,{grabMouse:typeof D.showMousePointer>"u"||D.showMousePointer,onrendered:function(ct){var Ue=(new Date).getTime()-Oe;if(!Ue)return setTimeout(ke,D.frameInterval);Oe=(new Date).getTime(),Se.frames.push({image:ct.toDataURL("image/webp",1),duration:Ue}),Be&&setTimeout(ke,D.frameInterval)}})}this.pause=function(){it=!0,ne instanceof Bi&&ne.pause()},this.resume=function(){it=!1,ne instanceof Bi?ne.resume():Be||this.record()},this.clearRecordedData=function(){Be&&this.stop(Me),Me()},this.name="CanvasRecorder",this.toString=function(){return this.name};var Oe=(new Date).getTime(),Se=new rs.Video(100)}function La(K,D){function Q(Oe){Oe=typeof Oe<"u"?Oe:10;var Se=(new Date).getTime()-Ve;return Se?Re?(Ve=(new Date).getTime(),setTimeout(Q,100)):(Ve=(new Date).getTime(),Me.paused&&Me.play(),it.drawImage(Me,0,0,Be.width,Be.height),ke.frames.push({duration:Se,image:Be.toDataURL("image/webp")}),void(ie||setTimeout(Q,Oe,Oe))):setTimeout(Q,Oe,Oe)}(D=D||{}).frameInterval||(D.frameInterval=10),D.disableLogs||console.log("Using frames-interval:",D.frameInterval),this.record=function(){D.width||(D.width=320),D.height||(D.height=240),D.video||(D.video={width:D.width,height:D.height}),D.canvas||(D.canvas={width:D.width,height:D.height}),Be.width=D.canvas.width||320,Be.height=D.canvas.height||240,it=Be.getContext("2d"),D.video&&D.video instanceof HTMLVideoElement?(Me=D.video.cloneNode(),D.initCallback&&D.initCallback()):(Me=document.createElement("video"),ts(K,Me),Me.onloadedmetadata=function(){D.initCallback&&D.initCallback()},Me.width=D.video.width,Me.height=D.video.height),Me.muted=!0,Me.play(),Ve=(new Date).getTime(),ke=new rs.Video,D.disableLogs||(console.log("canvas resolutions",Be.width,"*",Be.height),console.log("video width/height",Me.width||Be.width,"*",Me.height||Be.height)),Q(D.frameInterval)};var ie=!1;this.stop=function(Oe){Oe=Oe||function(){},ie=!0;var Se=this;setTimeout(function(){!function ge(Oe,Se,gt,ct,Ue){var Te=document.createElement("canvas");Te.width=Be.width,Te.height=Be.height;var Le=Te.getContext("2d"),ae=[],me=-1===Se,qe=Se&&Se>0&&Se<=Oe.length?Se:Oe.length,Kt=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),St=gt&&gt>=0&&gt<=1?gt:0,nr=ct&&ct>=0&&ct<=1?ct:0,Rn=!1;!function pe(Oe){var Se=-1,gt=Oe.length;!function ct(){++Se!==gt?setTimeout(function(){Oe.functionToLoop(ct,Se)},1):Oe.callback()}()}({length:qe,functionToLoop:function(Tr,rr){var Ss,Ci,Br,Io=function(){!Rn&&Br-Ss<=Br*nr||(me&&(Rn=!0),ae.push(Oe[rr])),Tr()};if(Rn)Io();else{var Li=new Image;Li.onload=function(){Le.drawImage(Li,0,0,Be.width,Be.height);var oo=Le.getImageData(0,0,Be.width,Be.height);Ss=0,Ci=oo.data.length,Br=oo.data.length/4;for(var Yr=0;Yr<Ci;Yr+=4){var ia={r:oo.data[Yr],g:oo.data[Yr+1],b:oo.data[Yr+2]};Math.sqrt(Math.pow(ia.r-0,2)+Math.pow(ia.g-0,2)+Math.pow(ia.b-0,2))<=Kt*St&&Ss++}Io()},Li.src=Oe[rr].image}},callback:function(){(ae=ae.concat(Oe.slice(qe))).length<=0&&ae.push(Oe[Oe.length-1]),Ue(ae)}})}(ke.frames,-1,null,null,function(gt){ke.frames=gt,D.advertisement&&D.advertisement.length&&(ke.frames=D.advertisement.concat(ke.frames)),ke.compile(function(ct){Se.blob=ct,Se.blob.forEach&&(Se.blob=new Blob([],{type:"video/webm"})),Oe&&Oe(Se.blob)})})},10)};var Re=!1;function ne(){ke.frames=[],ie=!0,Re=!1}this.pause=function(){Re=!0},this.resume=function(){Re=!1,ie&&this.record()},this.clearRecordedData=function(){ie||this.stop(ne),ne()},this.name="WhammyRecorder",this.toString=function(){return this.name};var Me,Ve,ke,Be=document.createElement("canvas"),it=Be.getContext("2d")}typeof no<"u"?li.AudioContext=no:typeof webkitAudioContext<"u"&&(li.AudioContext=webkitAudioContext),k.Storage=li,k.MediaStreamRecorder=Bi,k.StereoAudioRecorder=Ba,k.CanvasRecorder=Sc,k.WhammyRecorder=La;var rs=function(){function K(pe){this.frames=[],this.duration=pe||1,this.quality=.8}function Q(pe){function ie(Te,Le,ae){return[{data:Te,id:231}].concat(ae.map(function(me){var qe=function ke(Te){var Le=0;if(Te.keyframe&&(Le|=128),Te.invisible&&(Le|=8),Te.lacing&&(Le|=Te.lacing<<1),Te.discardable&&(Le|=1),Te.trackNum>127)throw"TrackNumber > 127 not supported";var ae=[128|Te.trackNum,Te.timecode>>8,255&Te.timecode,Le].map(function(me){return String.fromCharCode(me)}).join("")+Te.frame;return ae}({discardable:0,frame:me.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(Le)});return Le+=me.duration,{data:qe,id:163}}))}function ne(Te){for(var Le=[];Te>0;)Le.push(255&Te),Te>>=8;return new Uint8Array(Le.reverse())}function Be(Te){return new Uint8Array(Te.split("").map(function(Le){return Le.charCodeAt(0)}))}function it(Te){var Le=[];Te=(Te.length%8?new Array(9-Te.length%8).join("0"):"")+Te;for(var me=0;me<Te.length;me+=8)Le.push(parseInt(Te.substr(me,8),2));return new Uint8Array(Le)}function Me(Te){for(var Le=[],ae=0;ae<Te.length;ae++){var me=Te[ae].data;"object"==typeof me&&(me=Me(me)),"number"==typeof me&&(me=it(me.toString(2))),"string"==typeof me&&(me=Be(me));var qe=me.size||me.byteLength||me.length,Ye=Math.ceil(Math.ceil(Math.log(qe)/Math.log(2))/8),Kt=qe.toString(2),St=new Array(7*Ye+7+1-Kt.length).join("0")+Kt,nr=new Array(Ye).join("0")+"1"+St;Le.push(ne(Te[ae].id)),Le.push(it(nr)),Le.push(me)}return new Blob(Le,{type:"video/webm"})}function Se(Te,Le){return parseInt(Te.substr(Le+4,4).split("").map(function(ae){var me=ae.charCodeAt(0).toString(2);return new Array(8-me.length+1).join("0")+me}).join(""),2)}function gt(Te){for(var Le=0,ae={};Le<Te.length;){var me=Te.substr(Le,4),qe=Se(Te,Le),Ye=Te.substr(Le+4+4,qe);Le+=8+qe,ae[me]=ae[me]||[],ae[me].push("RIFF"===me||"LIST"===me?gt(Ye):Ye)}return ae}function ct(Te){return[].slice.call(new Uint8Array(new Float64Array([Te]).buffer),0).map(function(Le){return String.fromCharCode(Le)}).reverse().join("")}var Ue=new function ge(Te){var Le=function Re(Te){if(Te[0]){for(var Le=Te[0].width,ae=Te[0].height,me=Te[0].duration,qe=1;qe<Te.length;qe++)me+=Te[qe].duration;return{duration:me,width:Le,height:ae}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(Te);if(!Le)return[];for(var me=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:ct(Le.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:Le.width,id:176},{data:Le.height,id:186}]}]}]}]}],qe=0,Ye=0;qe<Te.length;){var Kt=[],St=0;do{Kt.push(Te[qe]),St+=Te[qe].duration,qe++}while(qe<Te.length&&St<3e4);var Rn={id:524531317,data:ie(Ye,0,Kt)};me[1].data.push(Rn),Ye+=St}return Me(me)}(pe.map(function(Te){var Le=function Oe(Te){for(var Le=Te.RIFF[0].WEBP[0],ae=Le.indexOf("\x9d\x01*"),me=0,qe=[];me<4;me++)qe[me]=Le.charCodeAt(ae+3+me);return{width:16383&(qe[1]<<8|qe[0]),height:16383&(qe[3]<<8|qe[2]),data:Le,riff:Te}}(gt(atob(Te.image.slice(23))));return Le.duration=Te.duration,Le}));postMessage(Ue)}return K.prototype.add=function(pe,ge){if("canvas"in pe&&(pe=pe.canvas),"toDataURL"in pe&&(pe=pe.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(pe))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:pe,duration:ge||this.duration})},K.prototype.compile=function(pe){var ge=function D(pe){var ge=Sn.createObjectURL(new Blob([pe.toString(),"this.onmessage =  function (eee) {"+pe.name+"(eee.data);}"],{type:"application/javascript"})),ie=new Worker(ge);return Sn.revokeObjectURL(ge),ie}(Q);ge.onmessage=function(ie){ie.data.error?console.error(ie.data.error):pe(ie.data)},ge.postMessage(this.frames)},{Video:K}}();k.Whammy=rs;var is={init:function(){var K=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u")console.error("IndexedDB API are not available in this browser.");else{var pe,Q=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),ge=indexedDB.open(Q,1);ge.onerror=K.onError,ge.onsuccess=function(){(pe=ge.result).onerror=K.onError,pe.setVersion&&1!==pe.version?pe.setVersion(1).onsuccess=function(){ie(pe),Re()}:Re()},ge.onupgradeneeded=function(ne){ie(ne.target.result)}}function ie(ne){ne.createObjectStore(K.dataStoreName)}function Re(){var ne=pe.transaction([K.dataStoreName],"readwrite");function Be(it){ne.objectStore(K.dataStoreName).get(it).onsuccess=function(Me){K.callback&&K.callback(Me.target.result,it)}}K.videoBlob&&ne.objectStore(K.dataStoreName).put(K.videoBlob,"videoBlob"),K.gifBlob&&ne.objectStore(K.dataStoreName).put(K.gifBlob,"gifBlob"),K.audioBlob&&ne.objectStore(K.dataStoreName).put(K.audioBlob,"audioBlob"),Be("audioBlob"),Be("videoBlob"),Be("gifBlob")}},Fetch:function(K){return this.callback=K,this.init(),this},Store:function(K){return this.audioBlob=K.audioBlob,this.videoBlob=K.videoBlob,this.gifBlob=K.gifBlob,this.init(),this},onError:function(K){console.error(JSON.stringify(K,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function Tu(K,D){if(typeof GIFEncoder>"u"){var Q=document.createElement("script");Q.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(Q)}D=D||{};var pe=K instanceof CanvasRenderingContext2D||K instanceof HTMLCanvasElement;this.record=function(){typeof GIFEncoder>"u"?setTimeout(gt.record,1e3):Be?(pe||(D.width||(D.width=it.offsetWidth||320),D.height||(D.height=it.offsetHeight||240),D.video||(D.video={width:D.width,height:D.height}),D.canvas||(D.canvas={width:D.width,height:D.height}),Re.width=D.canvas.width||320,Re.height=D.canvas.height||240,it.width=D.video.width||320,it.height=D.video.height||240),(Se=new GIFEncoder).setRepeat(0),Se.setDelay(D.frameRate||200),Se.setQuality(D.quality||10),Se.start(),"function"==typeof D.onGifRecordingStarted&&D.onGifRecordingStarted(),Date.now(),Me=Zo(function ct(Ue){if(!0!==gt.clearedRecordedData){if(ge)return setTimeout(function(){ct(Ue)},100);Me=Zo(ct),void 0===typeof Oe&&(Oe=Ue),!(Ue-Oe<90)&&(!pe&&it.paused&&it.play(),pe||ne.drawImage(it,0,0,Re.width,Re.height),D.onGifPreview&&D.onGifPreview(Re.toDataURL("image/png")),Se.addFrame(ne),Oe=Ue)}}),D.initCallback&&D.initCallback()):setTimeout(gt.record,1e3)},this.stop=function(ct){ct=ct||function(){},Me&&xi(Me),Date.now(),this.blob=new Blob([new Uint8Array(Se.stream().bin)],{type:"image/gif"}),ct(this.blob),Se.stream().bin=[]};var ge=!1;this.pause=function(){ge=!0},this.resume=function(){ge=!1},this.clearRecordedData=function(){gt.clearedRecordedData=!0,function ie(){Se&&(Se.stream().bin=[])}()},this.name="GifRecorder",this.toString=function(){return this.name};var Re=document.createElement("canvas"),ne=Re.getContext("2d");pe&&(K instanceof CanvasRenderingContext2D?Re=(ne=K).canvas:K instanceof HTMLCanvasElement&&(ne=K.getContext("2d"),Re=K));var Be=!0;if(!pe){var it=document.createElement("video");it.muted=!0,it.autoplay=!0,it.playsInline=!0,Be=!1,it.onloadedmetadata=function(){Be=!0},ts(K,it),it.play()}var Oe,Se,Me=null,gt=this}function ln(K,D){typeof global<"u"&&global,D=D||"multi-streams-mixer";var pe=[],ge=!1,ie=document.createElement("canvas"),Re=ie.getContext("2d");ie.style.opacity=0,ie.style.position="absolute",ie.style.zIndex=-1,ie.style.top="-1000em",ie.style.left="-1000em",ie.className=D,(document.body||document.documentElement).appendChild(ie),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var ne=this,Be=window.AudioContext;typeof Be>"u"&&(typeof webkitAudioContext<"u"&&(Be=webkitAudioContext),typeof mozAudioContext<"u"&&(Be=mozAudioContext));var it=window.URL;typeof it>"u"&&typeof webkitURL<"u"&&(it=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var Me=window.MediaStream;typeof Me>"u"&&typeof webkitMediaStream<"u"&&(Me=webkitMediaStream),typeof Me<"u"&&typeof Me.prototype.stop>"u"&&(Me.prototype.stop=function(){this.getTracks().forEach(function(ae){ae.stop()})});var Ve={};function Oe(){if(!ge){var ae=pe.length,me=!1,qe=[];if(pe.forEach(function(Kt){Kt.stream||(Kt.stream={}),Kt.stream.fullcanvas?me=Kt:qe.push(Kt)}),me)ie.width=me.stream.width,ie.height=me.stream.height;else if(qe.length){ie.width=ae>1?2*qe[0].width:qe[0].width;var Ye=1;(3===ae||4===ae)&&(Ye=2),(5===ae||6===ae)&&(Ye=3),(7===ae||8===ae)&&(Ye=4),(9===ae||10===ae)&&(Ye=5),ie.height=qe[0].height*Ye}else ie.width=ne.width||360,ie.height=ne.height||240;me&&me instanceof HTMLVideoElement&&Se(me),qe.forEach(function(Kt,St){Se(Kt,St)}),setTimeout(Oe,ne.frameInterval)}}function Se(ae,me){if(!ge){var qe=0,Ye=0,Kt=ae.width,St=ae.height;1===me&&(qe=ae.width),2===me&&(Ye=ae.height),3===me&&(qe=ae.width,Ye=ae.height),4===me&&(Ye=2*ae.height),5===me&&(qe=ae.width,Ye=2*ae.height),6===me&&(Ye=3*ae.height),7===me&&(qe=ae.width,Ye=3*ae.height),typeof ae.stream.left<"u"&&(qe=ae.stream.left),typeof ae.stream.top<"u"&&(Ye=ae.stream.top),typeof ae.stream.width<"u"&&(Kt=ae.stream.width),typeof ae.stream.height<"u"&&(St=ae.stream.height),Re.drawImage(ae,qe,Ye,Kt,St),"function"==typeof ae.stream.onRender&&ae.stream.onRender(Re,qe,Ye,Kt,St,me)}}function Te(ae){var me=document.createElement("video");return function ke(ae,me){"srcObject"in me?me.srcObject=ae:"mozSrcObject"in me?me.mozSrcObject=ae:me.srcObject=ae}(ae,me),me.className=D,me.muted=!0,me.volume=0,me.width=ae.width||ne.width||360,me.height=ae.height||ne.height||240,me.play(),me}function Le(ae){pe=[],(ae=ae||K).forEach(function(me){if(me.getTracks().filter(function(Ye){return"video"===Ye.kind}).length){var qe=Te(me);qe.stream=me,pe.push(qe)}})}typeof Be<"u"?Ve.AudioContext=Be:typeof webkitAudioContext<"u"&&(Ve.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){Oe()},this.appendStreams=function(ae){if(!ae)throw"First parameter is required.";ae instanceof Array||(ae=[ae]),ae.forEach(function(me){var qe=new Me;if(me.getTracks().filter(function(St){return"video"===St.kind}).length){var Ye=Te(me);Ye.stream=me,pe.push(Ye),qe.addTrack(me.getTracks().filter(function(St){return"video"===St.kind})[0])}if(me.getTracks().filter(function(St){return"audio"===St.kind}).length){var Kt=ne.audioContext.createMediaStreamSource(me);ne.audioDestination=ne.audioContext.createMediaStreamDestination(),Kt.connect(ne.audioDestination),qe.addTrack(ne.audioDestination.stream.getTracks().filter(function(St){return"audio"===St.kind})[0])}K.push(qe)})},this.releaseStreams=function(){pe=[],ge=!0,ne.gainNode&&(ne.gainNode.disconnect(),ne.gainNode=null),ne.audioSources.length&&(ne.audioSources.forEach(function(ae){ae.disconnect()}),ne.audioSources=[]),ne.audioDestination&&(ne.audioDestination.disconnect(),ne.audioDestination=null),ne.audioContext&&ne.audioContext.close(),ne.audioContext=null,Re.clearRect(0,0,ie.width,ie.height),ie.stream&&(ie.stream.stop(),ie.stream=null)},this.resetVideoStreams=function(ae){ae&&!(ae instanceof Array)&&(ae=[ae]),Le(ae)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function gt(){ge=!1;var ae=function ct(){var ae;Le(),"captureStream"in ie?ae=ie.captureStream():"mozCaptureStream"in ie?ae=ie.mozCaptureStream():ne.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var me=new Me;return ae.getTracks().filter(function(qe){return"video"===qe.kind}).forEach(function(qe){me.addTrack(qe)}),ie.stream=me,me}(),me=function Ue(){Ve.AudioContextConstructor||(Ve.AudioContextConstructor=new Ve.AudioContext),ne.audioContext=Ve.AudioContextConstructor,ne.audioSources=[],!0===ne.useGainNode&&(ne.gainNode=ne.audioContext.createGain(),ne.gainNode.connect(ne.audioContext.destination),ne.gainNode.gain.value=0);var ae=0;if(K.forEach(function(me){if(me.getTracks().filter(function(Ye){return"audio"===Ye.kind}).length){ae++;var qe=ne.audioContext.createMediaStreamSource(me);!0===ne.useGainNode&&qe.connect(ne.gainNode),ne.audioSources.push(qe)}}),ae)return ne.audioDestination=ne.audioContext.createMediaStreamDestination(),ne.audioSources.forEach(function(me){me.connect(ne.audioDestination)}),ne.audioDestination.stream}();return me&&me.getTracks().filter(function(Ye){return"audio"===Ye.kind}).forEach(function(Ye){ae.addTrack(Ye)}),K.forEach(function(Ye){}),ae}}function Do(K,D){K=K||[];var pe,ge,Q=this;(D=D||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(D.frameInterval=10),D.video||(D.video={}),D.video.width||(D.video.width=360),D.video.height||(D.video.height=240),this.record=function(){pe=new ln(K,D.elementClass||"multi-streams-mixer"),function ie(){var Re=[];return K.forEach(function(ne){pn(ne,"video").forEach(function(Be){Re.push(Be)})}),Re}().length&&(pe.frameInterval=D.frameInterval||10,pe.width=D.video.width||360,pe.height=D.video.height||240,pe.startDrawingFrames()),D.previewStream&&"function"==typeof D.previewStream&&D.previewStream(pe.getMixedStream()),(ge=new Bi(pe.getMixedStream(),D)).record()},this.stop=function(Re){ge&&ge.stop(function(ne){Q.blob=ne,Re(ne),Q.clearRecordedData()})},this.pause=function(){ge&&ge.pause()},this.resume=function(){ge&&ge.resume()},this.clearRecordedData=function(){ge&&(ge.clearRecordedData(),ge=null),pe&&(pe.releaseStreams(),pe=null)},this.addStreams=function(Re){if(!Re)throw"First parameter is required.";Re instanceof Array||(Re=[Re]),K.concat(Re),ge&&pe&&(pe.appendStreams(Re),D.previewStream&&"function"==typeof D.previewStream&&D.previewStream(pe.getMixedStream()))},this.resetVideoStreams=function(Re){pe&&(Re&&!(Re instanceof Array)&&(Re=[Re]),pe.resetVideoStreams(Re))},this.getMixer=function(){return pe},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function Is(K,D){var pe,ie,ne;function Re(Me,Ve){if(!D.workerPath&&!Ve)return pe=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(Oe){Oe.arrayBuffer().then(function(Se){Re(Me,Se)})});if(!D.workerPath&&Ve instanceof ArrayBuffer){var ke=new Blob([Ve],{type:"text/javascript"});D.workerPath=Sn.createObjectURL(ke)}D.workerPath||console.error("workerPath parameter is missing."),(ie=new Worker(D.workerPath)).postMessage(D.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),ie.addEventListener("message",function(Oe){"READY"===Oe.data?(ie.postMessage({width:D.width,height:D.height,bitrate:D.bitrate||1200,timebaseDen:D.frameRate||30,realtime:D.realtime}),function ge(){return new ReadableStream({start:function(Me){var Ve=document.createElement("canvas"),ke=document.createElement("video"),Oe=!0;ke.srcObject=K,ke.muted=!0,ke.height=D.height,ke.width=D.width,ke.volume=0,ke.onplaying=function(){Ve.width=D.width,Ve.height=D.height;var Se=Ve.getContext("2d"),ct=setInterval(function(){if(pe&&(clearInterval(ct),Me.close()),Oe&&(Oe=!1,D.onVideoProcessStarted&&D.onVideoProcessStarted()),Se.drawImage(ke,0,0),"closed"!==Me._controlledReadableStream.state)try{Me.enqueue(Se.getImageData(0,0,D.width,D.height))}catch{}},1e3/D.frameRate)},ke.play()}})}().pipeTo(new WritableStream({write:function(Se){pe?console.error("Got image, but recorder is finished!"):ie.postMessage(Se.data.buffer,[Se.data.buffer])}}))):Oe.data&&(ne||it.push(Oe.data))})}(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(D=D||{}).width=D.width||640,D.height=D.height||480,D.frameRate=D.frameRate||30,D.bitrate=D.bitrate||1200,D.realtime=D.realtime||!0,this.record=function(){it=[],ne=!1,this.blob=null,Re(K),"function"==typeof D.initCallback&&D.initCallback()},this.pause=function(){ne=!0},this.resume=function(){ne=!1};var it=[];this.stop=function(Me){pe=!0;var Ve=this;!function Be(Me){ie?(ie.addEventListener("message",function(Ve){null===Ve.data&&(ie.terminate(),ie=null,Me&&Me())}),ie.postMessage(null)):Me&&Me()}(function(){Ve.blob=new Blob(it,{type:"video/webm"}),Me(Ve.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){it=[],ne=!1,this.blob=null},this.blob=null}k.DiskStorage=is,k.GifRecorder=Tu,k.MultiStreamRecorder=Do,k.RecordRTCPromisesHandler=function zp(K,D){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof K>"u")throw'First argument "MediaStream" is required.';var Q=this;Q.recordRTC=new k(K,D),this.startRecording=function(){return new Promise(function(pe,ge){try{Q.recordRTC.startRecording(),pe()}catch(ie){ge(ie)}})},this.stopRecording=function(){return new Promise(function(pe,ge){try{Q.recordRTC.stopRecording(function(ie){Q.blob=Q.recordRTC.getBlob(),Q.blob&&Q.blob.size?pe(ie):ge("Empty blob.",Q.blob)})}catch(ie){ge(ie)}})},this.pauseRecording=function(){return new Promise(function(pe,ge){try{Q.recordRTC.pauseRecording(),pe()}catch(ie){ge(ie)}})},this.resumeRecording=function(){return new Promise(function(pe,ge){try{Q.recordRTC.resumeRecording(),pe()}catch(ie){ge(ie)}})},this.getDataURL=function(pe){return new Promise(function(ge,ie){try{Q.recordRTC.getDataURL(function(Re){ge(Re)})}catch(Re){ie(Re)}})},this.getBlob=function(){return new Promise(function(pe,ge){try{pe(Q.recordRTC.getBlob())}catch(ie){ge(ie)}})},this.getInternalRecorder=function(){return new Promise(function(pe,ge){try{pe(Q.recordRTC.getInternalRecorder())}catch(ie){ge(ie)}})},this.reset=function(){return new Promise(function(pe,ge){try{pe(Q.recordRTC.reset())}catch(ie){ge(ie)}})},this.destroy=function(){return new Promise(function(pe,ge){try{pe(Q.recordRTC.destroy())}catch(ie){ge(ie)}})},this.getState=function(){return new Promise(function(pe,ge){try{pe(Q.recordRTC.getState())}catch(ie){ge(ie)}})},this.blob=null,this.version="5.6.2"},k.WebAssemblyRecorder=Is},902:()=>{},522:()=>{},753:()=>{}},Oi=>{Oi(Oi.s=676)}]);